

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>pyNastran.op2.result_objects.table_object &mdash; pyNastran 1.4-dev 1.4-dev documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> pyNastran 1.4-dev
          

          
            
            <img src="../../../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.4-dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../quick_start/index.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../how_to/index.html">How To: pyNastran</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference/pyNastran.html">pyNastran Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../manual/index.html">pyNastran Manual</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">pyNastran 1.4-dev</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
        
      <li>pyNastran.op2.result_objects.table_object</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pyNastran.op2.result_objects.table_object</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">defines:</span>
<span class="sd"> - TableObject</span>
<span class="sd"> - RealTableArray</span>
<span class="sd"> - ComplexTableArray</span>

<span class="sd">these are used by:</span>
<span class="sd"> - RealDisplacementArray</span>
<span class="sd"> - RealVelocityArray</span>
<span class="sd"> - RealAccelerationArray</span>
<span class="sd"> - RealEigenvaluesArray</span>
<span class="sd"> - RealSPCForcesArray</span>
<span class="sd"> - RealMPCForcesArray</span>
<span class="sd"> - RealAppliedLoadsArray</span>

<span class="sd"> - ComplexDisplacementArray</span>
<span class="sd"> - ComplexVelocityArray</span>
<span class="sd"> - ComplexAccelerationArray</span>
<span class="sd"> - ComplexEigenvaluesArray</span>
<span class="sd"> - ComplexSPCForcesArray</span>
<span class="sd"> - ComplexMPCForcesArray</span>
<span class="sd"> - ComplexAppliedLoadsArray</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">from</span> <span class="nn">struct</span> <span class="kn">import</span> <span class="n">Struct</span><span class="p">,</span> <span class="n">pack</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="c1">#from numpy import float32</span>

<span class="kn">from</span> <span class="nn">pyNastran.op2.result_objects.op2_objects</span> <span class="kn">import</span> <span class="n">ScalarObject</span>
<span class="kn">from</span> <span class="nn">pyNastran.f06.f06_formatting</span> <span class="kn">import</span> <span class="n">write_floats_13e</span><span class="p">,</span> <span class="n">write_imag_floats_13e</span><span class="p">,</span> <span class="n">write_float_12e</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.errors</span> <span class="kn">import</span> <span class="n">SixtyFourBitError</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.op2_interface.write_utils</span> <span class="kn">import</span> <span class="n">set_table3_field</span>

<span class="n">float_types</span> <span class="o">=</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="n">integer_types</span> <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>

<span class="n">SORT2_TABLE_NAME_MAP</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># sort2_name : sort1_name</span>
    <span class="s1">&#39;OUGATO2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OUGATO1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OUGCRM2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OUGCRM1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OUGNO2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OUGNO1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OUGPSD2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OUGPSD1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OUGRMS2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OUGRMS1&#39;</span><span class="p">,</span>

    <span class="s1">&#39;OVGATO2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OVGATO1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OVGCRM2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OVGCRM1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OVGNO2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OVGNO1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OVGPSD2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OVGPSD1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OVGRMS2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OVGRMS1&#39;</span><span class="p">,</span>

    <span class="s1">&#39;OAGATO2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OAGATO1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OAGCRM2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OAGCRM1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OAGNO2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OAGNO1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OAGPSD2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OAGPSD1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OAGRMS2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OAGRMS1&#39;</span><span class="p">,</span>

    <span class="s1">&#39;OQGATO2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OQGATO1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OQGCRM2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OQGCRM1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OQGNO2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OQGNO1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OQGPSD2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OQGPSD1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OQGRMS2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OQGRMS1&#39;</span><span class="p">,</span>

    <span class="s1">&#39;OQMATO2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OQMATO1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OQMCRM2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OQMCRM1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OQMNO2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OQMNO1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OQMPSD2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OQMPSD1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OQMRMS2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OQMRMS1&#39;</span><span class="p">,</span>

    <span class="s1">&#39;OPGATO2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OPGATO1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OPGCRM2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OPGCRM1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OPGNO2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OPGNO1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OPGPSD2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OPGPSD1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OPGRMS2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OPGRMS1&#39;</span><span class="p">,</span>

    <span class="c1">#&#39;OUG2&#39; : &#39;OUG1&#39;,</span>
    <span class="s1">&#39;OUGV2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OUGV1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OQG2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OQG1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OQMG2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OQMG1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OPG2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OPG1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OPNL2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OPNL1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OUXY2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OUXY1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OQGGF2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OQGGF1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OQGCF2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OQGCF1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OUGF2&#39;</span> <span class="p">:</span> <span class="s1">&#39;OUGF1&#39;</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">SORT1_TABLES</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">SORT2_TABLE_NAME_MAP</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="n">SORT1_TABLES</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
    <span class="s1">&#39;BOUGV1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OUG1F&#39;</span><span class="p">,</span>
    <span class="s1">&#39;BOUGF1&#39;</span><span class="p">,</span>
<span class="p">])</span>
<span class="n">SORT2_TABLES</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">SORT2_TABLE_NAME_MAP</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

<span class="n">table_name_to_table_code</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># displacement (msc/nx)</span>
    <span class="s1">&#39;OUGV1&#39;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;BOUGV1&#39;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="c1"># load vector (msc/nx)</span>
    <span class="s1">&#39;OPG1&#39;</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s1">&#39;BOPG1&#39;</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="c1">#&#39;BOPHIG1&#39; : 5, # ???</span>

    <span class="c1"># spc/mpc forces</span>
    <span class="s1">&#39;OQG1&#39;</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">}</span>
<div class="viewcode-block" id="append_sort1_sort2"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.append_sort1_sort2">[docs]</a><span class="k">def</span> <span class="nf">append_sort1_sort2</span><span class="p">(</span><span class="n">data1</span><span class="p">,</span> <span class="n">data2</span><span class="p">,</span> <span class="n">to_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    data1 : (ntimes, nnids, 6)</span>
<span class="sd">    data2 : (nnids, ntimes, 6)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">data1</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">,</span> <span class="n">data1</span><span class="o">.</span><span class="n">shape</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">data2</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">,</span> <span class="n">data2</span><span class="o">.</span><span class="n">shape</span>
    <span class="n">ntimes1</span><span class="p">,</span> <span class="n">nnids1</span> <span class="o">=</span> <span class="n">data1</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">nnids2</span><span class="p">,</span> <span class="n">ntimes2</span> <span class="o">=</span> <span class="n">data2</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">unused_ntimes</span> <span class="o">=</span> <span class="n">ntimes1</span> <span class="o">+</span> <span class="n">ntimes2</span>
    <span class="n">unused_nnids</span> <span class="o">=</span> <span class="n">nnids1</span> <span class="o">+</span> <span class="n">nnids2</span>
    <span class="k">assert</span> <span class="n">ntimes1</span> <span class="o">==</span> <span class="n">ntimes2</span>
    <span class="k">if</span> <span class="n">to_sort1</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">([</span>
            <span class="n">data1</span><span class="p">,</span>
            <span class="n">np</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="n">data2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">([</span>
            <span class="n">np</span><span class="o">.</span><span class="n">swapaxes</span><span class="p">(</span><span class="n">data1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="n">data2</span><span class="p">,])</span>
    <span class="k">return</span> <span class="n">out</span></div>

<div class="viewcode-block" id="oug_data_code"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.oug_data_code">[docs]</a><span class="k">def</span> <span class="nf">oug_data_code</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">analysis_code</span><span class="p">,</span>
                  <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">is_random</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                  <span class="n">random_code</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">subtitle</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">is_msc</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">sort1_sort_bit</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">is_sort1</span> <span class="k">else</span> <span class="mi">1</span>
    <span class="n">random_sort_bit</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">is_random</span> <span class="k">else</span> <span class="mi">0</span>
    <span class="n">sort_method</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">is_sort1</span> <span class="k">else</span> <span class="mi">2</span>
    <span class="k">assert</span> <span class="n">analysis_code</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">analysis_code</span>
    <span class="c1">#if format_code == 1:</span>
        <span class="c1">#format_word = &quot;Real&quot;</span>
    <span class="c1">#elif format_code == 2:</span>
        <span class="c1">#format_word = &quot;Real/Imaginary&quot;</span>
    <span class="c1">#elif format_code == 3:</span>
        <span class="c1">#format_word = &quot;Magnitude/Phase&quot;</span>
    <span class="c1">#DEVICE_CODE_MAP = {</span>
        <span class="c1">#1 : &quot;Print&quot;,</span>
        <span class="c1">#2 : &quot;Plot&quot;,</span>
        <span class="c1">#3 : &quot;Print and Plot&quot;,</span>
        <span class="c1">#4 : &quot;Punch&quot;,</span>
        <span class="c1">#5 : &quot;Print and Punch&quot;,</span>
        <span class="c1">#6 : &quot;Plot and Punch&quot;,</span>
        <span class="c1">#7 : &quot;Print, Plot, and Punch&quot;,</span>
    <span class="c1">#}</span>

    <span class="n">table_code</span> <span class="o">=</span> <span class="n">table_name_to_table_code</span><span class="p">[</span><span class="n">table_name</span><span class="p">]</span>
    <span class="n">sort_code</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># TODO: what should this be???</span>

    <span class="c1">#table_code = tCode % 1000</span>
    <span class="c1">#sort_code = tCode // 1000</span>
    <span class="n">tCode</span> <span class="o">=</span> <span class="n">table_code</span> <span class="o">*</span> <span class="mi">1000</span> <span class="o">+</span> <span class="n">sort_code</span>

    <span class="n">device_code</span> <span class="o">=</span> <span class="mi">2</span>  <span class="c1"># Plot</span>
    <span class="n">approach_code</span> <span class="o">=</span> <span class="n">analysis_code</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="n">device_code</span>
    <span class="c1">#print(f&#39;approach_code={approach_code} analysis_code={analysis_code} device_code={device_code}&#39;)</span>
    <span class="n">data_code</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;nonlinear_factor&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;approach_code&#39;</span> <span class="p">:</span> <span class="n">approach_code</span><span class="p">,</span>
        <span class="s1">&#39;analysis_code&#39;</span> <span class="p">:</span> <span class="n">analysis_code</span><span class="p">,</span>
        <span class="s1">&#39;sort_bits&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">sort1_sort_bit</span><span class="p">,</span> <span class="n">random_sort_bit</span><span class="p">],</span> <span class="c1"># real, sort1, random</span>
        <span class="s1">&#39;sort_method&#39;</span> <span class="p">:</span> <span class="n">sort_method</span><span class="p">,</span>
        <span class="s1">&#39;is_msc&#39;</span><span class="p">:</span> <span class="n">is_msc</span><span class="p">,</span>
        <span class="c1">#&#39;is_nasa95&#39;: is_nasa95,</span>
        <span class="s1">&#39;format_code&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="c1"># real</span>
        <span class="s1">&#39;table_code&#39;</span><span class="p">:</span> <span class="n">table_code</span><span class="p">,</span>
        <span class="s1">&#39;tCode&#39;</span><span class="p">:</span> <span class="n">tCode</span><span class="p">,</span>
        <span class="s1">&#39;table_name&#39;</span><span class="p">:</span> <span class="n">table_name</span><span class="p">,</span> <span class="c1">## TODO: should this be a string?</span>
        <span class="s1">&#39;device_code&#39;</span> <span class="p">:</span> <span class="n">device_code</span><span class="p">,</span>
        <span class="s1">&#39;random_code&#39;</span> <span class="p">:</span> <span class="n">random_code</span><span class="p">,</span>
        <span class="s1">&#39;thermal&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s1">&#39;title&#39;</span> <span class="p">:</span> <span class="n">title</span><span class="p">,</span>
        <span class="s1">&#39;subtitle&#39;</span><span class="p">:</span> <span class="n">subtitle</span><span class="p">,</span>
        <span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">label</span><span class="p">,</span>
        <span class="s1">&#39;num_wide&#39;</span> <span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="c1"># displacement-style table</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">data_code</span></div>

<div class="viewcode-block" id="TableArray"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.TableArray">[docs]</a><span class="k">class</span> <span class="nc">TableArray</span><span class="p">(</span><span class="n">ScalarObject</span><span class="p">):</span>  <span class="c1"># displacement style table</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class for:</span>
<span class="sd">     - RealTableArray</span>
<span class="sd">     - ComplexTableArray</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
        <span class="c1">#self.table_name = None</span>
        <span class="c1">#self.approach_code = None</span>
        <span class="c1">#self.analysis_code = None</span>

        <span class="c1"># no double inheritance</span>
        <span class="n">ScalarObject</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">apply_data_code</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">)</span>
        <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">is_sort2</span><span class="p">)</span>
        <span class="c1">#self.dt = dt</span>

        <span class="c1">#self.code = [self.format_code, self.sort_code, self.s_code]</span>

        <span class="c1">#self.ntimes = 0  # or frequency/mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_nnodes</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># result specific</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assert_equal</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>

<div class="viewcode-block" id="TableArray.assert_equal"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.TableArray.assert_equal">[docs]</a>    <span class="k">def</span> <span class="nf">assert_equal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">1.e-5</span><span class="p">,</span> <span class="n">atol</span><span class="o">=</span><span class="mf">1.e-8</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_eq_header</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span> <span class="o">==</span> <span class="n">table</span><span class="o">.</span><span class="n">is_sort1</span>
        <span class="c1">#print(self.node_gridtype)</span>
        <span class="c1">#print(table.node_gridtype)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">):</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="n">table</span><span class="o">.</span><span class="n">node_gridtype</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="s1">&#39;shape=</span><span class="si">%s</span><span class="s1"> table.shape=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">node_gridtype</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;table_name=</span><span class="si">%r</span><span class="s1"> class_name=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;nid_gridtype:</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;gridtype.shape=</span><span class="si">%s</span><span class="s1"> table.gridtype.shape=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="o">.</span><span class="n">shape</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">node_gridtype</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">grid_type</span><span class="p">),</span> <span class="p">(</span><span class="n">nid2</span><span class="p">,</span> <span class="n">grid_type2</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">):</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;(</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)    (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">grid_type</span><span class="p">,</span> <span class="n">nid2</span><span class="p">,</span> <span class="n">grid_type2</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;table_name=</span><span class="si">%r</span><span class="s1"> class_name=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">atols</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">rtols</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ntimes</span><span class="p">):</span>
                    <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;(nid, gridtype); itime=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">itime</span>
                    <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;(tx, ty, tz, rx, ry, rz)</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="k">for</span> <span class="n">inid</span><span class="p">,</span> <span class="n">nid_gridtype</span><span class="p">,</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">):</span>
                        <span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">grid_type</span><span class="p">)</span> <span class="o">=</span> <span class="n">nid_gridtype</span>
                        <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">inid</span><span class="p">,</span> <span class="p">:]</span>
                        <span class="n">t2</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">inid</span><span class="p">,</span> <span class="p">:]</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="n">rtol</span><span class="p">,</span> <span class="n">atol</span><span class="o">=</span><span class="n">atol</span><span class="p">):</span>
                        <span class="c1">#if not np.array_equal(t1, t2):</span>
                            <span class="n">inonzero</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">t1</span> <span class="o">!=</span> <span class="mf">0.</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">atoli</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">t2</span> <span class="o">-</span> <span class="n">t1</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
                            <span class="n">rtoli</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">t2</span><span class="p">[</span><span class="n">inonzero</span><span class="p">]</span> <span class="o">/</span> <span class="n">t1</span><span class="p">[</span><span class="n">inonzero</span><span class="p">])</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>

                            <span class="p">(</span><span class="n">tx1</span><span class="p">,</span> <span class="n">ty1</span><span class="p">,</span> <span class="n">tz1</span><span class="p">,</span> <span class="n">rx1</span><span class="p">,</span> <span class="n">ry1</span><span class="p">,</span> <span class="n">rz1</span><span class="p">)</span> <span class="o">=</span> <span class="n">t1</span>
                            <span class="p">(</span><span class="n">tx2</span><span class="p">,</span> <span class="n">ty2</span><span class="p">,</span> <span class="n">tz2</span><span class="p">,</span> <span class="n">rx2</span><span class="p">,</span> <span class="n">ry2</span><span class="p">,</span> <span class="n">rz2</span><span class="p">)</span> <span class="o">=</span> <span class="n">t2</span>
                            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;(</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">  (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">  (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                <span class="n">nid</span><span class="p">,</span> <span class="n">grid_type</span><span class="p">,</span>
                                <span class="n">tx1</span><span class="p">,</span> <span class="n">ty1</span><span class="p">,</span> <span class="n">tz1</span><span class="p">,</span> <span class="n">rx1</span><span class="p">,</span> <span class="n">ry1</span><span class="p">,</span> <span class="n">rz1</span><span class="p">,</span>
                                <span class="n">tx2</span><span class="p">,</span> <span class="n">ty2</span><span class="p">,</span> <span class="n">tz2</span><span class="p">,</span> <span class="n">rx2</span><span class="p">,</span> <span class="n">ry2</span><span class="p">,</span> <span class="n">rz2</span><span class="p">)</span>
                            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                            <span class="n">atols</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">atoli</span><span class="p">)</span>
                            <span class="n">rtols</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rtoli</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
                            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;atol.max() = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">max</span><span class="p">(</span><span class="n">atols</span><span class="p">)</span>
                            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;rtol.max() = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">max</span><span class="p">(</span><span class="n">rtols</span><span class="p">)</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">is_sort2</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;atol.max() = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">max</span><span class="p">(</span><span class="n">atols</span><span class="p">)</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;rtol.max() = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">max</span><span class="p">(</span><span class="n">rtols</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="TableArray.combine"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.TableArray.combine">[docs]</a>    <span class="k">def</span> <span class="nf">combine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="c1">#print(&quot;combine; result=%s&quot; % result)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span> <span class="o">!=</span> <span class="n">result</span><span class="o">.</span><span class="n">is_sort1</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="c1"># self.ntimes += result.ntimes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span> <span class="o">+=</span> <span class="n">result</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">append_sort1_sort2</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="c1">#print(self._times)</span>
        <span class="c1">#print(result._times)</span>
        <span class="c1"># self._times = hstack([self._times, result._times])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">])</span></div>
        <span class="c1">#print(&#39;%s&#39; % &#39;&#39;.join(self.get_stats()))</span>

    <span class="k">def</span> <span class="nf">_get_msgs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

<div class="viewcode-block" id="TableArray.data_type"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.TableArray.data_type">[docs]</a>    <span class="k">def</span> <span class="nf">data_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span></div>

<div class="viewcode-block" id="TableArray.get_stats"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.TableArray.get_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">short</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="s1">&#39;&lt;</span><span class="si">%s</span><span class="s1">&gt;; table_name=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">),</span>
                <span class="s1">&#39;  ntimes: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span>
                <span class="s1">&#39;  ntotal: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="c1">#ngrids = len(self.gridTypes)</span>
        <span class="k">if</span> <span class="n">short</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_stats_short</span><span class="p">()</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">unused_ntimesi</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">)</span>
        <span class="n">nnodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">nmajor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="n">nminor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">nmajor</span> <span class="o">==</span> <span class="n">ntimes</span><span class="p">,</span> <span class="s1">&#39;ntimes=</span><span class="si">%s</span><span class="s1"> expected=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nmajor</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">nminor</span> <span class="o">==</span> <span class="n">ntotal</span><span class="p">,</span> <span class="s1">&#39;ntotal=</span><span class="si">%s</span><span class="s1"> expected=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nminor</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">nmajor</span> <span class="o">==</span> <span class="n">nnodes</span><span class="p">:</span>
                <span class="n">msgi</span> <span class="o">=</span> <span class="s1">&#39;nnodes=</span><span class="si">%s</span><span class="s1"> expected=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nmajor</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">)</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">msgi</span><span class="p">)</span>
                <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  WARNING: &#39;</span> <span class="o">+</span> <span class="n">msgi</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">nminor</span> <span class="o">==</span> <span class="n">ntotal</span><span class="p">,</span> <span class="s1">&#39;ntotal=</span><span class="si">%s</span><span class="s1"> expected=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nminor</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">)</span>

        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  isubcase = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">isubcase</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">):</span>  <span class="c1"># transient</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> ntimes=</span><span class="si">%s</span><span class="s1"> nnodes=</span><span class="si">%s</span><span class="s1">, table_name=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> nnodes=</span><span class="si">%s</span><span class="s1">, table_name=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">))</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_headers</span><span class="p">())</span>
        <span class="c1">#msg.append(&#39;  data: [%s] shape=%s dtype=%s\n&#39;</span>
                   <span class="c1">#% (headers, [int(i) for i in self.data.shape], self.data.dtype))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data: [</span><span class="si">%s</span><span class="s1">] shape=</span><span class="si">%s</span><span class="s1"> dtype=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span>
                   <span class="o">%</span> <span class="p">(</span><span class="n">headers</span><span class="p">,</span>
                      <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">dtype</span><span class="p">))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  node_gridtype.shape = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
        <span class="c1">#msg.append(&#39;  gridTypes\n  &#39;)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_code</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">msg</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">headers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;t1&#39;</span><span class="p">,</span> <span class="s1">&#39;t2&#39;</span><span class="p">,</span> <span class="s1">&#39;t3&#39;</span><span class="p">,</span> <span class="s1">&#39;r1&#39;</span><span class="p">,</span> <span class="s1">&#39;r2&#39;</span><span class="p">,</span> <span class="s1">&#39;r3&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_get_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">headers</span>

<div class="viewcode-block" id="TableArray.get_headers"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.TableArray.get_headers">[docs]</a>    <span class="k">def</span> <span class="nf">get_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_headers</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_reset_indices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="TableArray.build"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.TableArray.build">[docs]</a>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;sizes the vectorized attributes of the TableArray&quot;&quot;&quot;</span>
        <span class="c1">#print(&#39;_nnodes=%s ntimes=%s sort1?=%s ntotal=%s -&gt; _nnodes=%s&#39; % (self._nnodes, self.ntimes, self.is_sort1,</span>
                                                                          <span class="c1">#self.ntotal, self._nnodes // self.ntimes))</span>

        <span class="c1"># we have a SORT1 data array that will be (ntimes, nnodes, 6)</span>
        <span class="c1"># we start by sizing the total number of entries (_nnodes = ntimes * nnodes)</span>
        <span class="c1"># we also keep track of the number of times</span>
        <span class="c1"># then we compute nnodes</span>
        <span class="c1">#</span>
        <span class="c1"># for sort1, we just use what was discussed above</span>
        <span class="c1"># for sort2, we flip nnodes and ntimes</span>
        <span class="c1">#</span>
        <span class="c1"># note that in both cases, ntotal is the major dimension:</span>
        <span class="c1">#  - SORT1 - ntimes</span>
        <span class="c1">#  - SORT2 - nnodes</span>
        <span class="c1">#print(&#39;ntotal=%s ntimes=%s _nnodes=%s&#39; % (self.ntotal, self.ntimes, self._nnodes))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_nnodes</span> <span class="o">//=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="c1">#print(&#39;ntotal=%s ntimes=%s _nnodes=%s\n&#39; % (self.ntotal, self.ntimes, self._nnodes))</span>
        <span class="c1">#if self.ntimes &gt; 1000:</span>
        <span class="c1">#    raise RuntimeError(self.ntimes)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">itime</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">:</span>
            <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
            <span class="n">nnodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span>
            <span class="n">nx</span> <span class="o">=</span> <span class="n">ntimes</span>
            <span class="n">ny</span> <span class="o">=</span> <span class="n">nnodes</span>
            <span class="c1">#print(&quot;SORT1 ntimes=%s nnodes=%s&quot; % (ntimes, nnodes))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort2</span><span class="p">:</span>
            <span class="c1"># flip this to sort1</span>
            <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span>
            <span class="n">nnodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="n">nnodes</span>
            <span class="n">nx</span> <span class="o">=</span> <span class="n">ntimes</span>
            <span class="n">ny</span> <span class="o">=</span> <span class="n">nnodes</span>
            <span class="c1">#print(&quot;***SORT2 ntotal=%s nnodes=%s ntimes=%s&quot; % (ntotal, nnodes, ntimes))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;expected sort1/sort2</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build_data</span><span class="p">(</span><span class="n">ntimes</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_times_dtype</span><span class="p">)</span></div>

<div class="viewcode-block" id="TableArray.build_data"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.TableArray.build_data">[docs]</a>    <span class="k">def</span> <span class="nf">build_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">,</span> <span class="n">float_fmt</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;actually performs the build step&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span> <span class="o">=</span> <span class="n">ntimes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_nnodes</span> <span class="o">=</span> <span class="n">nnodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span> <span class="o">=</span> <span class="n">ntotal</span>

        <span class="n">_times</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">ntimes</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">float_fmt</span><span class="p">)</span>
        <span class="n">int_fmt</span> <span class="o">=</span> <span class="s1">&#39;int32&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="s1">&#39;int64&#39;</span>
        <span class="n">node_gridtype</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nnodes</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">int_fmt</span><span class="p">)</span>

        <span class="c1">#[t1, t2, t3, r1, r2, r3]</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_type</span><span class="p">())</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_as_h5</span><span class="p">:</span>
            <span class="n">group</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_result_group</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_times</span> <span class="o">=</span> <span class="n">group</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;_times&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">_times</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span> <span class="o">=</span> <span class="n">group</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;node_gridtype&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">node_gridtype</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">group</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_times</span> <span class="o">=</span> <span class="n">_times</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span> <span class="o">=</span> <span class="n">node_gridtype</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span></div>
        <span class="c1">#print(&#39;ntimes=%s nnodes=%s; nx=%s ny=%s; ntotal=%s&#39; % (</span>
            <span class="c1">#ntimes, nnodes, nx, ny, self.ntotal))</span>

<div class="viewcode-block" id="TableArray.build_dataframe"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.TableArray.build_dataframe">[docs]</a>    <span class="k">def</span> <span class="nf">build_dataframe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;creates a pandas dataframe</span>

<span class="sd">        works: 0.24.2</span>
<span class="sd">        broken: 0.25.0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
        <span class="c1">#is_v25 = pd.__version__ &gt;= &#39;0.25&#39;</span>

        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">()</span>
        <span class="c1">#headers = [0, 1, 2, 3, 4, 5]</span>
        <span class="c1">#node_gridtype = [self.node_gridtype[:, 0], self.gridtype_str]</span>

        <span class="c1">#letter_dims = [</span>
            <span class="c1">#(&#39;G&#39;, 6),</span>
            <span class="c1">#(&#39;E&#39;, 1),</span>
            <span class="c1">#(&#39;S&#39;, 1),</span>
            <span class="c1">#(&#39;H&#39;, 6),</span>
            <span class="c1">#(&#39;L&#39;, 6),</span>
        <span class="c1">#]</span>
        <span class="n">ntimes</span><span class="p">,</span> <span class="n">nnodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>

        <span class="n">ugridtype_str</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gridtype_str</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">):</span>
            <span class="c1">#if not self.is_sort1:</span>
                <span class="c1">#print(&quot;skipping %s becuase it&#39;s not SORT1&quot; % self.class_name)</span>
                <span class="c1">#return</span>
            <span class="n">column_names</span><span class="p">,</span> <span class="n">column_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_dataframe_transient_header</span><span class="p">()</span>
            <span class="c1">#if is_v25:</span>
            <span class="c1">#  we start out like this...</span>
            <span class="c1">#</span>
            <span class="c1"># Mode                             1                 2                   3</span>
            <span class="c1"># EigenvalueReal               -0.0              -0.0                -0.0</span>
            <span class="c1"># EigenvalueImag          -0.463393          0.463393           -1.705689</span>
            <span class="c1"># Damping                        0.0               0.0                 0.0</span>
            <span class="c1"># NodeID Type Item</span>
            <span class="c1"># 1      G    t1      (0.6558146+0j)    (0.6558146+0j)       (1.034078+0j)</span>
            <span class="c1">#             t2                  0j                0j                  0j</span>
            <span class="c1">#             t3                  0j                0j                  0j</span>
            <span class="c1">#             r1                  0j                0j                  0j</span>
            <span class="c1">#             r2                  0j                0j                  0j</span>
            <span class="c1">#             r3                  0j                0j                  0j</span>
            <span class="c1">#  ...</span>
            <span class="c1">#</span>
            <span class="c1"># then we call pandas_extract_rows to make it this...</span>
            <span class="c1">#</span>
            <span class="c1"># Mode                        1              2              3</span>
            <span class="c1"># EigenvalueReal           -0.0           -0.0           -0.0</span>
            <span class="c1"># EigenvalueImag      -0.463393       0.463393      -1.705689</span>
            <span class="c1"># Damping                   0.0            0.0            0.0</span>
            <span class="c1"># NodeID Item</span>
            <span class="c1"># 1      t1       0.655815+0.0j  0.655815+0.0j  1.034078+0.0j</span>
            <span class="c1">#        t2            0.0+0.0j       0.0+0.0j       0.0+0.0j</span>
            <span class="c1">#        t3            0.0+0.0j       0.0+0.0j       0.0+0.0j</span>
            <span class="c1">#        r1            0.0+0.0j       0.0+0.0j       0.0+0.0j</span>
            <span class="c1">#        r2            0.0+0.0j       0.0+0.0j       0.0+0.0j</span>
            <span class="c1">#        r3            0.0+0.0j       0.0+0.0j       0.0+0.0j</span>
            <span class="c1"># 2      t1       0.999141+0.0j  0.999141+0.0j -0.282216+0.0j</span>
            <span class="c1">#        t2            0.0+0.0j       0.0+0.0j       0.0+0.0j</span>
            <span class="c1">#        t3            0.0+0.0j       0.0+0.0j       0.0+0.0j</span>
            <span class="c1">#        r1            0.0+0.0j       0.0+0.0j       0.0+0.0j</span>
            <span class="c1">#        r2            0.0+0.0j       0.0+0.0j       0.0+0.0j</span>
            <span class="c1">#        r3            0.0+0.0j       0.0+0.0j       0.0+0.0j</span>
            <span class="c1"># 1001   S        0.000859+0.0j  0.000859+0.0j -0.003323+0.0j</span>

            <span class="n">columns</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_arrays</span><span class="p">(</span><span class="n">column_values</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="n">column_names</span><span class="p">)</span>

            <span class="n">gridtype_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gridtype_str</span>
            <span class="n">ugridtype_str</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">gridtype_str</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ugridtype_str</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">gridtype_str</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;S&#39;</span><span class="p">,</span> <span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">]:</span>
                <span class="n">nnodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">node_gridtype</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="n">gridtype_str</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">*</span> <span class="n">nnodes</span><span class="p">]</span>

                <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;NodeID&#39;</span><span class="p">,</span> <span class="s1">&#39;Item&#39;</span><span class="p">]</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_arrays</span><span class="p">(</span><span class="n">node_gridtype</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">)</span>
                <span class="n">A</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">T</span>
                <span class="n">data_frame</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">node_gridtype_item</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">node_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">nid</span><span class="p">,</span> <span class="n">gridtype</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">node_ids</span><span class="p">,</span> <span class="n">gridtype_str</span><span class="p">):</span>
                    <span class="n">node_gridtype_item</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">nid</span><span class="p">,</span> <span class="n">gridtype</span><span class="p">,</span> <span class="s1">&#39;t1&#39;</span><span class="p">]])</span>
                    <span class="n">node_gridtype_item</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">nid</span><span class="p">,</span> <span class="n">gridtype</span><span class="p">,</span> <span class="s1">&#39;t2&#39;</span><span class="p">]])</span>
                    <span class="n">node_gridtype_item</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">nid</span><span class="p">,</span> <span class="n">gridtype</span><span class="p">,</span> <span class="s1">&#39;t3&#39;</span><span class="p">]])</span>
                    <span class="n">node_gridtype_item</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">nid</span><span class="p">,</span> <span class="n">gridtype</span><span class="p">,</span> <span class="s1">&#39;r1&#39;</span><span class="p">]])</span>
                    <span class="n">node_gridtype_item</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">nid</span><span class="p">,</span> <span class="n">gridtype</span><span class="p">,</span> <span class="s1">&#39;r2&#39;</span><span class="p">]])</span>
                    <span class="n">node_gridtype_item</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">nid</span><span class="p">,</span> <span class="n">gridtype</span><span class="p">,</span> <span class="s1">&#39;r3&#39;</span><span class="p">]])</span>


                <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;NodeID&#39;</span><span class="p">,</span> <span class="s1">&#39;Type&#39;</span><span class="p">,</span> <span class="s1">&#39;Item&#39;</span><span class="p">]</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">(</span><span class="n">node_gridtype_item</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">)</span>
                <span class="n">A</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">ntimes</span><span class="p">,</span> <span class="n">nnodes</span><span class="o">*</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">data_frame</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;data.shape=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s1"> A.shape=</span><span class="si">{</span><span class="n">A</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s1"> &#39;</span>
                          <span class="sa">f</span><span class="s1">&#39;ntimes=</span><span class="si">{</span><span class="n">ntimes</span><span class="si">}</span><span class="s1"> nnodes*6=</span><span class="si">{</span><span class="n">nnodes</span><span class="o">*</span><span class="mi">6</span><span class="si">}</span><span class="s1"> ngrids=</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">node_ids</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
                          <span class="sa">f</span><span class="s1">&#39;column_names=</span><span class="si">{</span><span class="n">column_names</span><span class="si">}</span><span class="s1"> column_values=</span><span class="si">{</span><span class="n">column_values</span><span class="si">}</span><span class="s1"> _times=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">raise</span>
                <span class="c1">#print(data_frame.to_string())</span>
                <span class="n">data_frame</span> <span class="o">=</span> <span class="n">pandas_extract_rows</span><span class="p">(</span><span class="n">data_frame</span><span class="p">,</span> <span class="n">ugridtype_str</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;NodeID&#39;</span><span class="p">,</span> <span class="s1">&#39;Item&#39;</span><span class="p">])</span>

            <span class="c1">#elif is_v25 and 0:  # pragma: no cover</span>
                <span class="c1">#                                                                           t1        t2</span>
                <span class="c1"># itime Mode  EigenvalueReal EigenvalueImag Damping  NodeID  Type</span>
                <span class="c1"># 0      1      G    -0.0         -0.463393     0.0  1           0.655815+0.0j  0.0+0.0j</span>
                <span class="c1">#               G                                    2           0.999141+0.0j  0.0+0.0j</span>
                <span class="c1">#               G                                    3                1.0+0.0j  0.0+0.0j</span>
                <span class="c1">#               S                                    1001        0.000859+0.0j  0.0+0.0j</span>
                <span class="c1"># 1      1      G    -0.0          0.463393     0.0  2           0.655815+0.0j  0.0+0.0j</span>
                <span class="c1">#               G                                    2           0.999141+0.0j  0.0+0.0j</span>
                <span class="c1">#               G                                    3                1.0+0.0j  0.0+0.0j</span>
                <span class="c1">#               S                                    1001        0.000859+0.0j  0.0+0.0j</span>
                <span class="c1"># 2      1      G    -0.0        -1.705689      0.0  3           1.034078+0.0j  0.0+0.0j</span>
                <span class="c1">#               G                                    2          -0.282216+0.0j  0.0+0.0j</span>
                <span class="c1">#               G                                    3          -0.285539+0.0j  0.0+0.0j</span>
                <span class="c1">#               S                                    1001       -0.003323+0.0j  0.0+0.0j</span>
                <span class="c1">#time_node_gridtype = []</span>
                <span class="c1">#from itertools import count</span>
                <span class="c1">#for itime in range(ntimes):</span>
                    <span class="c1">#column_values2 = [column_value[itime] for column_value in column_values]</span>
                    <span class="c1">#for nid, gridtype in zip(self.node_gridtype[:, 0], self.gridtype_str):</span>
                        <span class="c1">#time_node_gridtype.append([itime] + column_values2 + [nid, gridtype])</span>

                <span class="c1">#names = [&#39;itime&#39;] + column_names + [&#39;NodeID&#39;, &#39;Type&#39;]</span>
                <span class="c1">#index = pd.MultiIndex.from_tuples(time_node_gridtype, names=names)</span>
                <span class="c1">#A = self.data.reshape(ntimes*nnodes, 6)</span>
                <span class="c1">#data_frame = pd.DataFrame(A, columns=headers, index=index)</span>
                <span class="c1">##print(self.data_frame.index.names)</span>
                <span class="c1">##data_frame = pandas_extract_rows(self.data_frame, ugridtype_str)</span>
                <span class="c1">#print(data_frame)</span>
            <span class="c1">#elif is_v25 and 0:  # pragma: no cover</span>
                <span class="c1">#node_gridtype2 = []</span>
                <span class="c1">#NodeID Type             t1        t2        ...</span>
                <span class="c1">#1      G     0.655815+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#2      G     0.999141+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#3      G          1.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#1001   S     0.000859+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#1      G     0.655815+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#2      G     0.999141+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#3      G          1.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#1001   S     0.000859+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#1      G     1.034078+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#2      G    -0.282216+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#3      G    -0.285539+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#1001   S    -0.003323+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#1      G     1.034078+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#2      G    -0.282216+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#3      G    -0.285539+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#1001   S    -0.003323+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#1      G    -0.001818+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#2      G    -0.124197+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#3      G     0.625574+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#1001   S     0.749771+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#1      G     0.001011+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#2      G    -0.200504+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#3      G          1.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#1001   S     1.200504+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#1      G     0.001011+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#2      G    -0.200504+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#3      G          1.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#1001   S     1.200504+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#for itime in range(ntimes):</span>
                    <span class="c1">#column_values2 = [column_value[itime] for column_value in column_values]</span>
                    <span class="c1">#for nid, gridtype in zip(self.node_gridtype[:, 0], self.gridtype_str):</span>
                        <span class="c1">#node_gridtype2.append([itime, nid, gridtype])</span>

                <span class="c1">#names = [&#39;itime&#39;, &#39;NodeID&#39;, &#39;Type&#39;]</span>
                <span class="c1">#index = pd.MultiIndex.from_tuples(node_gridtype2, names=names)</span>
                <span class="c1">#A = self.data.reshape(ntimes*nnodes, 6)</span>
                <span class="c1">#data_frame = pd.DataFrame(A, columns=headers, index=index)</span>
                <span class="c1">##print(data_frame.index.names)</span>
                <span class="c1">##data_frame = pandas_extract_rows(data_frame, ugridtype_str)</span>
                <span class="c1">#print(data_frame)</span>

            <span class="c1">#elif is_v25 and 0:  # pragma: no cover</span>
                <span class="c1">#                t1        t2        t3        r1        r2        r3</span>
                <span class="c1"># 0   0.655815+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1"># 1   0.999141+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1"># 2        1.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1"># 3   0.000859+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1"># 4   0.655815+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1"># 5   0.999141+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1"># 6        1.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j  0.0+0.0j</span>
                <span class="c1">#index = pd.MultiIndex.from_arrays(node_gridtype, names=[&#39;NodeID&#39;, &#39;Type&#39;])</span>
                <span class="c1">#A = self.data.reshape(nnodes*ntimes, 6)</span>
                <span class="c1">#data_frame = pd.DataFrame(A, columns=headers)</span>
                <span class="c1">##data_frame = pd.DataFrame(A, columns=headers, index=index)  # doesn&#39;t work</span>
                <span class="c1"># doesn&#39;t turn into workable table</span>
            <span class="c1">#else:</span>
                <span class="c1"># old</span>
                <span class="c1"># Mode                             1                 2                   3</span>
                <span class="c1"># EigenvalueReal               -0.0              -0.0                -0.0</span>
                <span class="c1"># EigenvalueImag          -0.463393          0.463393           -1.705689</span>
                <span class="c1"># Damping                        0.0               0.0                 0.0</span>
                <span class="c1"># NodeID Type Item</span>
                <span class="c1"># 1      G    t1      (0.6558146+0j)    (0.6558146+0j)       (1.034078+0j)</span>
                <span class="c1">#             t2                  0j                0j                  0j</span>
                <span class="c1">#             t3                  0j                0j                  0j</span>
                <span class="c1">#             r1                  0j                0j                  0j</span>
                <span class="c1">#             r2                  0j                0j                  0j</span>
                <span class="c1">#             r3                  0j                0j                  0j</span>

                <span class="c1">#   mode    1      2    3</span>
                <span class="c1">#   freq    1.0  2.0  3.0</span>
                <span class="c1"># nodeid</span>
                <span class="c1">#  1  item  1.0  2.0  3.0</span>
                <span class="c1">#     t1    etc.</span>
                <span class="c1">#     t2</span>
                <span class="c1">#     t3</span>
                <span class="c1">#     ...</span>
                <span class="c1">#  2</span>
                <span class="c1">#     t1</span>
                <span class="c1">#     t2</span>
                <span class="c1">#     t3</span>
                <span class="c1">#     ...</span>

                <span class="c1">#data_frame = pd.Panel(self.data, items=column_values,</span>
                                      <span class="c1">#major_axis=node_gridtype, minor_axis=headers).to_frame()  # to_xarray()</span>
                <span class="c1">#data_frame.columns.names = column_names</span>
                <span class="c1">#data_frame.index.names = [&#39;NodeID&#39;, &#39;Type&#39;, &#39;Item&#39;]</span>
                <span class="c1">#print(column_names)</span>
                <span class="c1">#print(data_frame)</span>
                <span class="c1">#print(self.data_frame.index.names)</span>
                <span class="c1">#data_frame = pandas_extract_rows(data_frame, ugridtype_str, [&#39;NodeID&#39;, &#39;Item&#39;])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_frame</span> <span class="o">=</span> <span class="n">data_frame</span>
            <span class="c1">#print(self.data_frame)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#self.data_frame = pd.Panel(self.data[0, :, :], major_axis=node_gridtype, minor_axis=headers).to_frame()</span>
            <span class="c1">#self.data_frame.columns.names = [&#39;Static&#39;]</span>
            <span class="c1">#self.data_frame.index.names = [&#39;NodeID&#39;, &#39;Type&#39;, &#39;Item&#39;]</span>

            <span class="c1">#    NodeID Type      t1           t2            t3   r1   r2   r3</span>
            <span class="c1"># 0        1    G     0.0     0.000000  0.000000e+00  0.0  0.0  0.0</span>
            <span class="c1"># 1        2    G     0.0     0.000000  0.000000e+00  0.0  0.0  0.0</span>
            <span class="c1"># 2        3    G     0.0     0.000000  0.000000e+00  0.0  0.0  0.0</span>
            <span class="c1">#self.data_frame = pd.DataFrame(self.data[0], columns=headers, index=self.node_gridtype)</span>

            <span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
            <span class="n">df1</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;NodeID&#39;</span><span class="p">]</span>
            <span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gridtype_str</span><span class="p">)</span>
            <span class="n">df2</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Type&#39;</span><span class="p">]</span>
            <span class="n">df3</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">df3</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">headers</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_frame</span> <span class="o">=</span> <span class="n">df1</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">df2</span><span class="p">,</span> <span class="n">df3</span><span class="p">])</span></div>

            <span class="c1">#df1 = pd.DataFrame(self.node_gridtype)</span>
            <span class="c1">#df1.columns = [&#39;NodeID&#39;, &#39;Type&#39;]</span>
            <span class="c1">#df2 = pd.DataFrame(self.data[0])</span>
            <span class="c1">#df2.columns = headers</span>
            <span class="c1">#self.data_frame = df1.join([df2])</span>
        <span class="c1">#print(self.data_frame)</span>

<div class="viewcode-block" id="TableArray.finalize"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.TableArray.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calls any OP2 objects that need to do any post matrix calcs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_as_sort1</span><span class="p">()</span>
        <span class="n">gridtypes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">nnodes</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">gridtypes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gridtype_str</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">chararray</span><span class="p">((</span><span class="n">nnodes</span><span class="p">),</span> <span class="n">unicode</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">ugridtypes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">gridtypes</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ugridtype</span> <span class="ow">in</span> <span class="n">ugridtypes</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">gridtypes</span> <span class="o">==</span> <span class="n">ugridtype</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gridtype_str</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">recast_gridtype_as_string</span><span class="p">(</span><span class="n">ugridtype</span><span class="p">)</span></div>
        <span class="c1">#del self.itotal, self.itime</span>

<div class="viewcode-block" id="TableArray.set_as_sort1"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.TableArray.set_as_sort1">[docs]</a>    <span class="k">def</span> <span class="nf">set_as_sort1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;changes the table into SORT1&quot;&quot;&quot;</span>
        <span class="c1">#if not self.table_name != &#39;OQMRMS1&#39;:</span>
            <span class="c1">#return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="c1">#print(&#39;set_as_sort1: table_name=%r&#39; % self.table_name)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">analysis_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_method</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="k">raise</span>
        <span class="c1">#print(self.get_stats())</span>
        <span class="c1">#print(self.node_gridtype)</span>
        <span class="c1">#print(self.data.shape)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">bit0</span><span class="p">,</span> <span class="n">bit1</span><span class="p">,</span> <span class="n">bit2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span> <span class="o">=</span> <span class="n">SORT2_TABLE_NAME_MAP</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sort_code</span> <span class="o">=</span> <span class="n">bit0</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">bit1</span> <span class="o">+</span> <span class="mi">4</span><span class="o">*</span><span class="n">bit2</span>
        <span class="c1">#print(self.code_information())</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span>
        <span class="k">if</span> <span class="n">analysis_method</span> <span class="o">!=</span> <span class="s1">&#39;N/A&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">analysis_method</span>
            <span class="c1">#print(self.table_name_str, analysis_method, self._times)</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_method</span> <span class="o">+</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">)</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_method</span></div>

    <span class="k">def</span> <span class="nf">add_sort1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">node_id</span><span class="p">,</span> <span class="n">grid_type</span><span class="p">,</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">,</span> <span class="n">v4</span><span class="p">,</span> <span class="n">v5</span><span class="p">,</span> <span class="n">v6</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;unvectorized method for adding SORT1 transient data&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node_id</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="n">node_id</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;dt=</span><span class="si">%s</span><span class="s1"> node_id=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">node_id</span><span class="p">)</span>
        <span class="c1"># itotal - the node number</span>
        <span class="c1"># itime - the time/frequency step</span>

        <span class="c1"># the times/freqs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itotal</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">node_id</span><span class="p">,</span> <span class="n">grid_type</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">,</span> <span class="n">v4</span><span class="p">,</span> <span class="n">v5</span><span class="p">,</span> <span class="n">v6</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">add_sort2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">node_id</span><span class="p">,</span> <span class="n">grid_type</span><span class="p">,</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">,</span> <span class="n">v4</span><span class="p">,</span> <span class="n">v5</span><span class="p">,</span> <span class="n">v6</span><span class="p">):</span>
        <span class="c1">#if node_id &lt; 1:</span>
            <span class="c1">#msg = self.code_information()</span>
            <span class="c1">#msg += &quot;(%s, %s) dt=%g node_id=%s v1=%g v2=%g v3=%g&quot; % (</span>
                <span class="c1">#self.itotal, self.itime, dt, node_id, v1, v2, v3)</span>
            <span class="c1">##msg += &quot;                    v4=%g v5=%g v6=%g&quot; % (v4, v5, v6)</span>
            <span class="c1">#raise RuntimeError(msg)</span>
        <span class="c1">#print(msg)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itotal</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>

        <span class="c1"># itotal - the time/frequency step</span>
        <span class="c1"># itime - the node number</span>
        <span class="c1">#print(&#39;itime=%s&#39; % self.itime)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">node_id</span><span class="p">,</span> <span class="n">grid_type</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itotal</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">,</span> <span class="n">v4</span><span class="p">,</span> <span class="n">v5</span><span class="p">,</span> <span class="n">v6</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="c1">#self.itime += 1</span>

    <span class="k">def</span> <span class="nf">_write_table_3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op2_file</span><span class="p">,</span> <span class="n">fascii</span><span class="p">,</span> <span class="n">new_result</span><span class="p">,</span> <span class="n">itable</span><span class="o">=-</span><span class="mi">3</span><span class="p">,</span> <span class="n">itime</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">inspect</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
        <span class="n">call_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getouterframes</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">fascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.write_table_3: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">call_frame</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]))</span>

        <span class="k">if</span> <span class="n">new_result</span> <span class="ow">and</span> <span class="n">itable</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">3</span><span class="p">:</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[</span>
                <span class="mi">4</span><span class="p">,</span> <span class="mi">146</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[</span>
                <span class="mi">4</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                <span class="mi">4</span><span class="p">,</span> <span class="mi">146</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="n">op2_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="si">%i</span><span class="s1">i&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">header</span><span class="p">),</span> <span class="o">*</span><span class="n">header</span><span class="p">))</span>
        <span class="n">fascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;table_3_header = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">header</span><span class="p">)</span>
        <span class="c1">#op2_file.write(pack(&#39;12i&#39;, *[4, itable, 4,</span>
                              <span class="c1">#4, 1, 4,</span>
                              <span class="c1">#4, 0, 4,</span>
                              <span class="c1">#4, 146, 4,</span>
                              <span class="c1">#]))</span>

        <span class="n">approach_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">approach_code</span>
        <span class="n">table_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_code</span>
        <span class="n">isubcase</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">isubcase</span>
        <span class="n">random_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random_code</span>
        <span class="n">format_code</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">num_wide</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
        <span class="n">acoustic_flag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">acoustic_flag</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;acoustic_flag&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="n">thermal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span>
        <span class="n">title</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="si">%-128s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
        <span class="n">subtitle</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="si">%-128s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">subtitle</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>  <span class="c1"># missing superelement_adaptivity_index</span>
        <span class="n">label</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="si">%-128s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
        <span class="n">oCode</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">ftable3</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span> <span class="o">*</span> <span class="mi">50</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;128s 128s 128s&#39;</span>
        <span class="n">field6</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">field7</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">acoustic_flag</span><span class="p">,</span> <span class="n">float_types</span><span class="p">):</span>
            <span class="n">ftable3</span> <span class="o">=</span> <span class="n">set_table3_field</span><span class="p">(</span><span class="n">ftable3</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">)</span> <span class="c1"># field 11</span>

        <span class="c1">#print(self.get_stats())</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1">#if hasattr(self, &#39;lsdvmns&#39;):</span>
            <span class="n">field5</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lsdvmns</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>
            <span class="c1">#else:</span>
                <span class="c1">#field5 = self.dts[itime]</span>
                <span class="c1">#assert isinstance(field5, float_types), type(field5)</span>
                <span class="c1">#ftable3 = set_table3_field(ftable3, 5, b&#39;f&#39;) # field 5</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">field5</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modes</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>
            <span class="n">field6</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eigns</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>
            <span class="n">field7</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode_cycles</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field6</span><span class="p">,</span> <span class="n">float_types</span><span class="p">),</span> <span class="sa">f</span><span class="s1">&#39;field6=</span><span class="si">{</span><span class="n">field6</span><span class="si">}</span><span class="s1"> type=</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">field6</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field7</span><span class="p">,</span> <span class="n">float_types</span><span class="p">),</span> <span class="sa">f</span><span class="s1">&#39;field5=</span><span class="si">{</span><span class="n">field5</span><span class="si">}</span><span class="s1"> field6=</span><span class="si">{</span><span class="n">field6</span><span class="si">}</span><span class="s1"> field7=</span><span class="si">{</span><span class="n">field7</span><span class="si">}</span><span class="s1"> type=</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">field7</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="n">ftable3</span> <span class="o">=</span> <span class="n">set_table3_field</span><span class="p">(</span><span class="n">ftable3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">)</span> <span class="c1"># field 6</span>
            <span class="n">ftable3</span> <span class="o">=</span> <span class="n">set_table3_field</span><span class="p">(</span><span class="n">ftable3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">)</span> <span class="c1"># field 7</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">field5</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">freqs</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field5</span><span class="p">,</span> <span class="n">float_types</span><span class="p">),</span> <span class="sa">f</span><span class="s1">&#39;field5=</span><span class="si">{</span><span class="n">field5</span><span class="si">}</span><span class="s1"> type=</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">field5</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="n">ftable3</span> <span class="o">=</span> <span class="n">set_table3_field</span><span class="p">(</span><span class="n">ftable3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">)</span> <span class="c1"># field 5</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;dts&#39;</span><span class="p">):</span>
                <span class="n">field5</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dts</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>
                <span class="c1">#assert isinstance(field5, float), type(field5)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">field5</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">times</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>
                <span class="c1">#assert isinstance(field5, float), type(field5)</span>
            <span class="n">ftable3</span> <span class="o">=</span> <span class="n">set_table3_field</span><span class="p">(</span><span class="n">ftable3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">)</span> <span class="c1"># field 5</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>  <span class="c1"># pre-buckling</span>
            <span class="n">field5</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lsdvmns</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span> <span class="c1"># load set number</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>  <span class="c1"># post-buckling</span>
            <span class="n">field5</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lsdvmns</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span> <span class="c1"># load set number</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;eigns&#39;</span><span class="p">):</span>
                <span class="n">field6</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eigns</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;eigrs&#39;</span><span class="p">):</span>
                <span class="n">field6</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eigrs</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;cant find eigns or eigrs on analysis_code=8&#39;</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field6</span><span class="p">,</span> <span class="n">float_types</span><span class="p">),</span> <span class="sa">f</span><span class="s1">&#39;field6=</span><span class="si">{</span><span class="n">field6</span><span class="si">}</span><span class="s1"> type=</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">field6</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="n">ftable3</span> <span class="o">=</span> <span class="n">set_table3_field</span><span class="p">(</span><span class="n">ftable3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">)</span> <span class="c1"># field 6</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span>  <span class="c1"># complex eigenvalues</span>
            <span class="n">field5</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modes</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;eigns&#39;</span><span class="p">):</span>
                <span class="n">field6</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eigns</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>
                <span class="n">ftable3</span> <span class="o">=</span> <span class="n">set_table3_field</span><span class="p">(</span><span class="n">ftable3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">)</span> <span class="c1"># field 6</span>
            <span class="n">field7</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eigis</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>
            <span class="n">ftable3</span> <span class="o">=</span> <span class="n">set_table3_field</span><span class="p">(</span><span class="n">ftable3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">)</span> <span class="c1"># field 7</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>  <span class="c1"># nonlinear statics</span>
            <span class="n">field5</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lftsfqs</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>
            <span class="n">ftable3</span> <span class="o">=</span> <span class="n">set_table3_field</span><span class="p">(</span><span class="n">ftable3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">)</span> <span class="c1"># field 5; load step</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span>  <span class="c1"># old geometric nonlinear statics</span>
            <span class="n">field5</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lsdvmns</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span> <span class="c1"># load set number</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span><span class="p">)</span>

        <span class="n">table3</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">approach_code</span><span class="p">,</span> <span class="n">table_code</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">field5</span><span class="p">,</span>
            <span class="n">field6</span><span class="p">,</span> <span class="n">field7</span><span class="p">,</span> <span class="n">random_code</span><span class="p">,</span> <span class="n">format_code</span><span class="p">,</span> <span class="n">num_wide</span><span class="p">,</span>
            <span class="n">oCode</span><span class="p">,</span> <span class="n">acoustic_flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
            <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
            <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">thermal</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
            <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
            <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
            <span class="n">title</span><span class="p">,</span> <span class="n">subtitle</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">assert</span> <span class="n">table3</span><span class="p">[</span><span class="mi">22</span><span class="p">]</span> <span class="o">==</span> <span class="n">thermal</span>

        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">count</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">ftable3i</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">count</span><span class="p">(),</span> <span class="n">table3</span><span class="p">,</span> <span class="n">ftable3</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)):</span>
            <span class="k">assert</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;i=</span><span class="si">%s</span><span class="s1"> val=</span><span class="si">%s</span><span class="s1"> ftable3i=</span><span class="si">%s</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">ftable3i</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_stats</span><span class="p">())</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="mi">4</span>
                <span class="k">assert</span> <span class="n">ftable3i</span> <span class="o">==</span> <span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="s1">&#39;analysis_code=</span><span class="si">%s</span><span class="s1"> i=</span><span class="si">%s</span><span class="s1"> val=</span><span class="si">%s</span><span class="s1"> type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">ftable3i</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">float_types</span><span class="p">):</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="mi">4</span>
                <span class="k">assert</span> <span class="n">ftable3i</span> <span class="o">==</span> <span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="s1">&#39;analysis_code=</span><span class="si">%s</span><span class="s1"> i=</span><span class="si">%s</span><span class="s1"> val=</span><span class="si">%s</span><span class="s1"> type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">ftable3i</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">584</span><span class="p">,</span> <span class="n">n</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">584</span><span class="p">]</span> <span class="o">+</span> <span class="n">table3</span> <span class="o">+</span> <span class="p">[</span><span class="mi">584</span><span class="p">]</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span> <span class="o">+</span> <span class="n">ftable3</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span>

        <span class="c1">#op2_file.write(pack(fascii, &#39;%s header 3c&#39; % self.table_name, fmt, data))</span>
        <span class="n">fascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> header 3c = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">,</span> <span class="n">data</span><span class="p">))</span>

        <span class="c1">#j = 7</span>
        <span class="c1">#print(ftable3[:j])</span>
        <span class="c1">#print(table3[:j])</span>
        <span class="c1">#pack(ftable3[:j], *table3[:j])</span>
        <span class="n">op2_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="n">fmt</span><span class="p">,</span> <span class="o">*</span><span class="n">data</span><span class="p">))</span></div>


<div class="viewcode-block" id="RealTableArray"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.RealTableArray">[docs]</a><span class="k">class</span> <span class="nc">RealTableArray</span><span class="p">(</span><span class="n">TableArray</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    displacement style table</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="n">TableArray</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>

<div class="viewcode-block" id="RealTableArray.set_as_static_case"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.RealTableArray.set_as_static_case">[docs]</a>    <span class="k">def</span> <span class="nf">set_as_static_case</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">analysis_code</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># static</span>
        <span class="n">device_code</span> <span class="o">=</span> <span class="mi">2</span>  <span class="c1"># Plot</span>
        <span class="n">approach_code</span> <span class="o">=</span> <span class="n">analysis_code</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="n">device_code</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">table_code</span> <span class="o">=</span> <span class="n">table_name_to_table_code</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name_str</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;lsdvmns&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># TODO: ???</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;data_names&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;analysis_code&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">analysis_code</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;approach_code&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">approach_code</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">=</span> <span class="n">analysis_code</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">approach_code</span> <span class="o">=</span> <span class="n">approach_code</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lsdvmns</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span></div>

<div class="viewcode-block" id="RealTableArray.add_static_case"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.RealTableArray.add_static_case">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_static_case</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">node_gridtype</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span>
                        <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">is_random</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_msc</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                        <span class="n">random_code</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">subtitle</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>

        <span class="n">table_name</span> <span class="o">=</span> <span class="n">table_name</span>
        <span class="n">analysis_code</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># static</span>
        <span class="n">data_code</span> <span class="o">=</span> <span class="n">oug_data_code</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">analysis_code</span><span class="p">,</span>
                                  <span class="n">is_sort1</span><span class="o">=</span><span class="n">is_sort1</span><span class="p">,</span> <span class="n">is_random</span><span class="o">=</span><span class="n">is_random</span><span class="p">,</span>
                                  <span class="n">random_code</span><span class="o">=</span><span class="n">random_code</span><span class="p">,</span>
                                  <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">subtitle</span><span class="o">=</span><span class="n">subtitle</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
                                  <span class="n">is_msc</span><span class="o">=</span><span class="n">is_msc</span><span class="p">)</span>
        <span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;lsdvmns&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># TODO: ???</span>
        <span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;data_names&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">ntimes</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">nnodes</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">node_gridtype</span> <span class="o">=</span> <span class="n">node_gridtype</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>

        <span class="n">obj</span><span class="o">.</span><span class="n">ntimes</span> <span class="o">=</span> <span class="n">ntimes</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">ntotal</span> <span class="o">=</span> <span class="n">nnodes</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_times</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">is_built</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">obj</span></div>

<div class="viewcode-block" id="RealTableArray.add_transient_case"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.RealTableArray.add_transient_case">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_transient_case</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">node_gridtype</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span>
                           <span class="n">times</span><span class="p">,</span>
                           <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">is_random</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_msc</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">random_code</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">subtitle</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>

        <span class="n">analysis_code</span> <span class="o">=</span> <span class="mi">6</span> <span class="c1"># transient</span>
        <span class="n">data_code</span> <span class="o">=</span> <span class="n">oug_data_code</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">analysis_code</span><span class="p">,</span>
                                  <span class="n">is_sort1</span><span class="o">=</span><span class="n">is_sort1</span><span class="p">,</span> <span class="n">is_random</span><span class="o">=</span><span class="n">is_random</span><span class="p">,</span>
                                  <span class="n">random_code</span><span class="o">=</span><span class="n">random_code</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">subtitle</span><span class="o">=</span><span class="n">subtitle</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
                                  <span class="n">is_msc</span><span class="o">=</span><span class="n">is_msc</span><span class="p">)</span>
        <span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;data_names&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">]</span>

        <span class="n">ntimes</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">nnodes</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="n">times</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">node_gridtype</span> <span class="o">=</span> <span class="n">node_gridtype</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>

        <span class="n">obj</span><span class="o">.</span><span class="n">ntimes</span> <span class="o">=</span> <span class="n">ntimes</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">ntotal</span> <span class="o">=</span> <span class="n">nnodes</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">dts</span> <span class="o">=</span> <span class="n">times</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_times</span> <span class="o">=</span> <span class="n">times</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">is_built</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">obj</span></div>

<div class="viewcode-block" id="RealTableArray.add_modal_case"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.RealTableArray.add_modal_case">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_modal_case</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">node_gridtype</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span>
                       <span class="n">modes</span><span class="p">,</span> <span class="n">eigenvalues</span><span class="p">,</span> <span class="n">mode_cycles</span><span class="p">,</span>
                       <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">is_random</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_msc</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                       <span class="n">random_code</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">subtitle</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>

        <span class="c1">#elif self.analysis_code == 2:  # real eigenvalues</span>
            <span class="c1">## mode number</span>
            <span class="c1">#self.mode = self.add_data_parameter(data, &#39;mode&#39;, b&#39;i&#39;, 5)</span>
            <span class="c1">## eigenvalue</span>
            <span class="c1">#self.eign = self.add_data_parameter(data, &#39;eign&#39;, b&#39;f&#39;, 6, False)</span>
            <span class="c1">## mode or cycle .. todo:: confused on the type - F1???</span>
            <span class="c1">#self.mode_cycle = self.add_data_parameter(data, &#39;mode_cycle&#39;, b&#39;i&#39;, 7, False)</span>
            <span class="c1">#self.update_mode_cycle(&#39;mode_cycle&#39;)</span>
            <span class="c1">#self.data_names = self.apply_data_code_value(&#39;data_names&#39;, [&#39;mode&#39;, &#39;eign&#39;, &#39;mode_cycle&#39;])</span>

        <span class="n">analysis_code</span> <span class="o">=</span> <span class="mi">2</span> <span class="c1"># modal</span>
        <span class="n">data_code</span> <span class="o">=</span> <span class="n">oug_data_code</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">analysis_code</span><span class="p">,</span>
                                  <span class="n">is_sort1</span><span class="o">=</span><span class="n">is_sort1</span><span class="p">,</span> <span class="n">is_random</span><span class="o">=</span><span class="n">is_random</span><span class="p">,</span>
                                  <span class="n">random_code</span><span class="o">=</span><span class="n">random_code</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">subtitle</span><span class="o">=</span><span class="n">subtitle</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
                                  <span class="n">is_msc</span><span class="o">=</span><span class="n">is_msc</span><span class="p">)</span>
        <span class="c1">#data_code[&#39;modes&#39;] = modes</span>
        <span class="c1">#data_code[&#39;eigns&#39;] = eigenvalues</span>
        <span class="c1">#data_code[&#39;mode_cycles&#39;] = mode_cycles</span>
        <span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;data_names&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;modes&#39;</span><span class="p">,</span> <span class="s1">&#39;eigns&#39;</span><span class="p">,</span> <span class="s1">&#39;mode_cycles&#39;</span><span class="p">]</span>

        <span class="n">ntimes</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">nnodes</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="n">modes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">node_gridtype</span> <span class="o">=</span> <span class="n">node_gridtype</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>

        <span class="n">obj</span><span class="o">.</span><span class="n">modes</span> <span class="o">=</span> <span class="n">modes</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">eigns</span> <span class="o">=</span> <span class="n">eigenvalues</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">mode_cycles</span> <span class="o">=</span> <span class="n">mode_cycles</span>

        <span class="n">obj</span><span class="o">.</span><span class="n">ntimes</span> <span class="o">=</span> <span class="n">ntimes</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">ntotal</span> <span class="o">=</span> <span class="n">nnodes</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_times</span> <span class="o">=</span> <span class="n">modes</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">is_built</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">obj</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_real</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_complex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

<div class="viewcode-block" id="RealTableArray.data_type"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.RealTableArray.data_type">[docs]</a>    <span class="k">def</span> <span class="nf">data_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;float32&#39;</span></div>

<div class="viewcode-block" id="RealTableArray.write_op2"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.RealTableArray.write_op2">[docs]</a>    <span class="k">def</span> <span class="nf">write_op2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op2_file</span><span class="p">,</span> <span class="n">fascii</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="n">new_result</span><span class="p">,</span>
                  <span class="n">date</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">endian</span><span class="o">=</span><span class="s1">&#39;&gt;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;writes an OP2&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">inspect</span>
        <span class="n">allowed_tables</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;OUGV1&#39;</span><span class="p">,</span> <span class="s1">&#39;BOUGV1&#39;</span><span class="p">,</span> <span class="s1">&#39;BOPHIG&#39;</span><span class="p">,</span> <span class="s1">&#39;BOPG1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;OUPV1&#39;</span><span class="p">,</span> <span class="s1">&#39;OUXY1&#39;</span><span class="p">,</span> <span class="c1"># solution set</span>
            <span class="s1">&#39;OQP1&#39;</span><span class="p">,</span> <span class="s1">&#39;OQMG1&#39;</span><span class="p">,</span> <span class="s1">&#39;OQG1&#39;</span><span class="p">,</span> <span class="s1">&#39;OQGV1&#39;</span><span class="p">,</span> <span class="s1">&#39;OPNL1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;OPG1&#39;</span><span class="p">,</span> <span class="s1">&#39;OPGV1&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;OUGCRM1&#39;</span><span class="p">,</span> <span class="s1">&#39;OUGNO1&#39;</span><span class="p">,</span> <span class="s1">&#39;OUGPSD1&#39;</span><span class="p">,</span> <span class="s1">&#39;OUGRMS1&#39;</span><span class="p">,</span> <span class="c1"># disp/vel/acc/eigenvector</span>
            <span class="s1">&#39;OAGATO1&#39;</span><span class="p">,</span> <span class="s1">&#39;OAGCRM1&#39;</span><span class="p">,</span> <span class="s1">&#39;OAGNO1&#39;</span><span class="p">,</span> <span class="s1">&#39;OAGPSD1&#39;</span><span class="p">,</span> <span class="s1">&#39;OAGRMS1&#39;</span><span class="p">,</span> <span class="c1"># acceleration</span>
                                  <span class="s1">&#39;OPGNO1&#39;</span><span class="p">,</span>            <span class="s1">&#39;OPGRMS1&#39;</span><span class="p">,</span> <span class="c1"># load vector</span>
            <span class="s1">&#39;OQGPSD1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;OCRPG&#39;</span><span class="p">,</span> <span class="s1">&#39;OCRUG&#39;</span><span class="p">,</span> <span class="s1">&#39;OUG1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;OUGV1PAT&#39;</span><span class="p">,</span>
            <span class="s1">&#39;OUGF1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;OQGCF1&#39;</span><span class="p">,</span> <span class="s1">&#39;OQGGF1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;RADCONS&#39;</span><span class="p">,</span> <span class="s1">&#39;RADEATC&#39;</span><span class="p">,</span> <span class="s1">&#39;RADEFFM&#39;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span> <span class="ow">in</span> <span class="n">allowed_tables</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span>

        <span class="n">frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
        <span class="n">call_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getouterframes</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">fascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.write_op2: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">call_frame</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]))</span>

        <span class="k">if</span> <span class="n">itable</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_table_header</span><span class="p">(</span><span class="n">op2_file</span><span class="p">,</span> <span class="n">fascii</span><span class="p">,</span> <span class="n">date</span><span class="p">)</span>
            <span class="n">itable</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span>

        <span class="c1">#print(&#39;nonlinear_factor =&#39;, self.nonlinear_factor)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">:</span>
            <span class="n">op2_format</span> <span class="o">=</span> <span class="n">endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i6f&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;SORT2&#39;</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">op2_format</span><span class="p">)</span>

        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">gridtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">max_id</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">max_id</span> <span class="o">&gt;</span> <span class="mi">99999999</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SixtyFourBitError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;64-bit OP2 writing is not supported; max id=</span><span class="si">{</span><span class="n">max_id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="c1">#format_table4_1 = Struct(self._endian + b&#39;15i&#39;)</span>
        <span class="c1">#format_table4_2 = Struct(self._endian + b&#39;3i&#39;)</span>

        <span class="c1"># table 4 info</span>
        <span class="c1">#ntimes = self.data.shape[0]</span>
        <span class="n">nnodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">nnodes_device</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">device_code</span>

        <span class="c1">#(2+6) =&gt; (node_id, gridtypei, t1i, t2i, t3i, r1i, r2i, r3i)</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="n">nnodes</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">6</span><span class="p">)</span>

        <span class="c1">#print(&#39;shape = %s&#39; % str(self.data.shape))</span>
        <span class="c1">#assert nnodes &gt; 1, nnodes</span>
        <span class="k">assert</span> <span class="n">ntotal</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ntotal</span>

        <span class="n">unused_device_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">device_code</span>
        <span class="n">fascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  ntimes = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">)</span>

        <span class="c1">#fmt = &#39;%2i %6f&#39;</span>
        <span class="c1">#print(&#39;ntotal=%s&#39; % (ntotal))</span>
        <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_table_3</span><span class="p">(</span><span class="n">op2_file</span><span class="p">,</span> <span class="n">fascii</span><span class="p">,</span> <span class="n">new_result</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="n">itime</span><span class="p">)</span>

            <span class="c1"># record 4</span>
            <span class="n">itable</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="o">*</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">op2_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="si">%i</span><span class="s1">i&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">header</span><span class="p">),</span> <span class="o">*</span><span class="n">header</span><span class="p">))</span>
            <span class="n">fascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, 0, 4]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, </span><span class="si">%s</span><span class="s1">, 4]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">itable</span><span class="p">))</span>
            <span class="n">fascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, </span><span class="si">%i</span><span class="s1">, 4]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">ntotal</span><span class="p">))</span>

            <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]</span>
            <span class="n">r1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">3</span><span class="p">]</span>
            <span class="n">r2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">4</span><span class="p">]</span>
            <span class="n">r3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">5</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">node_id</span><span class="p">,</span> <span class="n">gridtypei</span><span class="p">,</span> <span class="n">t1i</span><span class="p">,</span> <span class="n">t2i</span><span class="p">,</span> <span class="n">t3i</span><span class="p">,</span> <span class="n">r1i</span><span class="p">,</span> <span class="n">r2i</span><span class="p">,</span> <span class="n">r3i</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">nnodes_device</span><span class="p">,</span> <span class="n">gridtype</span><span class="p">,</span> <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">,</span> <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">,</span> <span class="n">r3</span><span class="p">):</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">node_id</span><span class="p">,</span> <span class="n">gridtypei</span><span class="p">,</span> <span class="n">t1i</span><span class="p">,</span> <span class="n">t2i</span><span class="p">,</span> <span class="n">t3i</span><span class="p">,</span> <span class="n">r1i</span><span class="p">,</span> <span class="n">r2i</span><span class="p">,</span> <span class="n">r3i</span><span class="p">]</span>
                <span class="n">fascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  nid, grid_type, dx, dy, dz, rx, ry, rz = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">data</span><span class="p">)</span>
                <span class="n">op2_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">))</span>

            <span class="n">itable</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,]</span>
            <span class="n">op2_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">header</span><span class="p">))</span>
            <span class="n">fascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;footer = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">header</span><span class="p">)</span>
            <span class="n">new_result</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">itable</span></div>

<div class="viewcode-block" id="RealTableArray.write_csv"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.RealTableArray.write_csv">[docs]</a>    <span class="k">def</span> <span class="nf">write_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">csv_file</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="n">csv_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Node&#39;</span><span class="p">,</span> <span class="s1">&#39;GridType&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">headers</span>
        <span class="n">csv_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">,&#39;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">gridtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">itime</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">unused_times</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_times</span>

        <span class="c1"># sort1 as sort1</span>
        <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">):</span>
            <span class="c1">#dt = self._times[itime]</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]</span>
            <span class="n">r1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">3</span><span class="p">]</span>
            <span class="n">r2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">4</span><span class="p">]</span>
            <span class="n">r3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">5</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">node_id</span><span class="p">,</span> <span class="n">gridtypei</span><span class="p">,</span> <span class="n">t1i</span><span class="p">,</span> <span class="n">t2i</span><span class="p">,</span> <span class="n">t3i</span><span class="p">,</span> <span class="n">r1i</span><span class="p">,</span> <span class="n">r2i</span><span class="p">,</span> <span class="n">r3i</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">gridtype</span><span class="p">,</span> <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">,</span> <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">,</span> <span class="n">r3</span><span class="p">):</span>
                <span class="n">unused_sgridtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">recast_gridtype_as_string</span><span class="p">(</span><span class="n">gridtypei</span><span class="p">)</span>
                <span class="n">csv_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">,&#39;</span> <span class="o">*</span> <span class="mi">9</span> <span class="o">%</span> <span class="p">(</span><span class="n">itime</span><span class="p">,</span> <span class="n">node_id</span><span class="p">,</span> <span class="n">gridtypei</span><span class="p">,</span> <span class="n">t1i</span><span class="p">,</span> <span class="n">t2i</span><span class="p">,</span> <span class="n">t3i</span><span class="p">,</span> <span class="n">r1i</span><span class="p">,</span> <span class="n">r2i</span><span class="p">,</span> <span class="n">r3i</span><span class="p">))</span>
                <span class="n">csv_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">return</span></div>

    <span class="k">def</span> <span class="nf">_write_f06_block</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">words</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">page_stamp</span><span class="p">,</span> <span class="n">page_num</span><span class="p">,</span> <span class="n">f06_file</span><span class="p">,</span> <span class="n">write_words</span><span class="p">,</span>
                         <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">write_words</span><span class="p">:</span>
            <span class="n">words</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39; </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;      POINT ID.   TYPE          T1             T2             T3             R1             R2             R3</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="c1">#words += self.getTableMarker()</span>
        <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">header</span> <span class="o">+</span> <span class="n">words</span><span class="p">))</span>

        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">gridtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">t3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]</span>
        <span class="n">r1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">3</span><span class="p">]</span>
        <span class="n">r2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">4</span><span class="p">]</span>
        <span class="n">r3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">5</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">node_id</span><span class="p">,</span> <span class="n">gridtypei</span><span class="p">,</span> <span class="n">t1i</span><span class="p">,</span> <span class="n">t2i</span><span class="p">,</span> <span class="n">t3i</span><span class="p">,</span> <span class="n">r1i</span><span class="p">,</span> <span class="n">r2i</span><span class="p">,</span> <span class="n">r3i</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">gridtype</span><span class="p">,</span> <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">,</span> <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">,</span> <span class="n">r3</span><span class="p">):</span>
            <span class="n">sgridtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">recast_gridtype_as_string</span><span class="p">(</span><span class="n">gridtypei</span><span class="p">)</span>
            <span class="n">vals</span> <span class="o">=</span> <span class="p">[</span><span class="n">t1i</span><span class="p">,</span> <span class="n">t2i</span><span class="p">,</span> <span class="n">t3i</span><span class="p">,</span> <span class="n">r1i</span><span class="p">,</span> <span class="n">r2i</span><span class="p">,</span> <span class="n">r3i</span><span class="p">]</span>
            <span class="n">vals2</span> <span class="o">=</span> <span class="n">write_floats_13e</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span>
            <span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">dz</span><span class="p">,</span> <span class="n">rx</span><span class="p">,</span> <span class="n">ry</span><span class="p">,</span> <span class="n">rz</span><span class="p">)</span> <span class="o">=</span> <span class="n">vals2</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%14i</span><span class="s1"> </span><span class="si">%6s</span><span class="s1">     </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">node_id</span><span class="p">,</span> <span class="n">sgridtype</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">dz</span><span class="p">,</span> <span class="n">rx</span><span class="p">,</span> <span class="n">ry</span><span class="p">,</span> <span class="n">rz</span><span class="p">))</span>
        <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">page_stamp</span> <span class="o">%</span> <span class="n">page_num</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">page_num</span>

    <span class="k">def</span> <span class="nf">_write_sort1_as_sort2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f06_file</span><span class="p">,</span> <span class="n">page_num</span><span class="p">,</span> <span class="n">page_stamp</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">words</span><span class="p">):</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">gridtypes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">times</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_times</span>

        <span class="k">for</span> <span class="n">inode</span><span class="p">,</span> <span class="p">(</span><span class="n">node_id</span><span class="p">,</span> <span class="n">gridtypei</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">nodes</span><span class="p">,</span> <span class="n">gridtypes</span><span class="p">)):</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">inode</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">inode</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">inode</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
            <span class="n">r1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">inode</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
            <span class="n">r2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">inode</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
            <span class="n">r3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">inode</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>

            <span class="n">header</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39; POINT-ID = </span><span class="si">%10i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">node_id</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">header</span> <span class="o">+</span> <span class="n">words</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">dt</span><span class="p">,</span> <span class="n">t1i</span><span class="p">,</span> <span class="n">t2i</span><span class="p">,</span> <span class="n">t3i</span><span class="p">,</span> <span class="n">r1i</span><span class="p">,</span> <span class="n">r2i</span><span class="p">,</span> <span class="n">r3i</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">times</span><span class="p">,</span> <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">,</span> <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">,</span> <span class="n">r3</span><span class="p">):</span>
                <span class="n">sgridtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">recast_gridtype_as_string</span><span class="p">(</span><span class="n">gridtypei</span><span class="p">)</span>
                <span class="n">vals</span> <span class="o">=</span> <span class="p">[</span><span class="n">t1i</span><span class="p">,</span> <span class="n">t2i</span><span class="p">,</span> <span class="n">t3i</span><span class="p">,</span> <span class="n">r1i</span><span class="p">,</span> <span class="n">r2i</span><span class="p">,</span> <span class="n">r3i</span><span class="p">]</span>
                <span class="n">vals2</span> <span class="o">=</span> <span class="n">write_floats_13e</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span>
                <span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">dz</span><span class="p">,</span> <span class="n">rx</span><span class="p">,</span> <span class="n">ry</span><span class="p">,</span> <span class="n">rz</span><span class="p">)</span> <span class="o">=</span> <span class="n">vals2</span>
                <span class="k">if</span> <span class="n">sgridtype</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;G&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;L&#39;</span><span class="p">]:</span>
                    <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%14s</span><span class="s1"> </span><span class="si">%6s</span><span class="s1">     </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="n">write_float_12e</span><span class="p">(</span><span class="n">dt</span><span class="p">),</span> <span class="n">sgridtype</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">dz</span><span class="p">,</span> <span class="n">rx</span><span class="p">,</span> <span class="n">ry</span><span class="p">,</span> <span class="n">rz</span><span class="p">))</span>
                <span class="k">elif</span> <span class="n">sgridtype</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;S&#39;</span><span class="p">,</span> <span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">]:</span>
                    <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%14s</span><span class="s1"> </span><span class="si">%6s</span><span class="s1">     </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">node_id</span><span class="p">,</span> <span class="n">sgridtype</span><span class="p">,</span> <span class="n">dx</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">sgridtype</span><span class="p">)</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">page_stamp</span> <span class="o">%</span> <span class="n">page_num</span><span class="p">)</span>
            <span class="n">page_num</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">page_num</span>

    <span class="k">def</span> <span class="nf">_write_sort1_as_sort1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f06_file</span><span class="p">,</span> <span class="n">page_num</span><span class="p">,</span> <span class="n">page_stamp</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">words</span><span class="p">):</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">gridtypes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">unused_times</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_times</span>

        <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">):</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]</span>
            <span class="n">r1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">3</span><span class="p">]</span>
            <span class="n">r2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">4</span><span class="p">]</span>
            <span class="n">r3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">5</span><span class="p">]</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">float_types</span><span class="p">):</span>
                <span class="n">header</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39; </span><span class="si">%s</span><span class="s1"> = </span><span class="si">%10.4E</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">dt</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">header</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39; </span><span class="si">%s</span><span class="s1"> = </span><span class="si">%10i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">dt</span><span class="p">)</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">header</span> <span class="o">+</span> <span class="n">words</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">node_id</span><span class="p">,</span> <span class="n">gridtypei</span><span class="p">,</span> <span class="n">t1i</span><span class="p">,</span> <span class="n">t2i</span><span class="p">,</span> <span class="n">t3i</span><span class="p">,</span> <span class="n">r1i</span><span class="p">,</span> <span class="n">r2i</span><span class="p">,</span> <span class="n">r3i</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">nodes</span><span class="p">,</span> <span class="n">gridtypes</span><span class="p">,</span> <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">,</span> <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">,</span> <span class="n">r3</span><span class="p">):</span>
                <span class="n">sgridtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">recast_gridtype_as_string</span><span class="p">(</span><span class="n">gridtypei</span><span class="p">)</span>
                <span class="n">vals</span> <span class="o">=</span> <span class="p">[</span><span class="n">t1i</span><span class="p">,</span> <span class="n">t2i</span><span class="p">,</span> <span class="n">t3i</span><span class="p">,</span> <span class="n">r1i</span><span class="p">,</span> <span class="n">r2i</span><span class="p">,</span> <span class="n">r3i</span><span class="p">]</span>
                <span class="n">vals2</span> <span class="o">=</span> <span class="n">write_floats_13e</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span>
                <span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">dz</span><span class="p">,</span> <span class="n">rx</span><span class="p">,</span> <span class="n">ry</span><span class="p">,</span> <span class="n">rz</span><span class="p">)</span> <span class="o">=</span> <span class="n">vals2</span>
                <span class="k">if</span> <span class="n">sgridtype</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;G&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;L&#39;</span><span class="p">]:</span>
                    <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%14i</span><span class="s1"> </span><span class="si">%6s</span><span class="s1">     </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="n">node_id</span><span class="p">,</span> <span class="n">sgridtype</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">dz</span><span class="p">,</span> <span class="n">rx</span><span class="p">,</span> <span class="n">ry</span><span class="p">,</span> <span class="n">rz</span><span class="p">))</span>
                <span class="k">elif</span> <span class="n">sgridtype</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;S&#39;</span><span class="p">,</span> <span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">]:</span>
                    <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%14i</span><span class="s1"> </span><span class="si">%6s</span><span class="s1">     </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">node_id</span><span class="p">,</span> <span class="n">sgridtype</span><span class="p">,</span> <span class="n">dx</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;node_id=</span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s1"> sgridtype=</span><span class="si">{</span><span class="n">sgridtype</span><span class="si">}</span><span class="s1"> vals=</span><span class="si">{</span><span class="n">vals2</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">page_stamp</span> <span class="o">%</span> <span class="n">page_num</span><span class="p">)</span>
            <span class="n">page_num</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">page_num</span>

    <span class="c1">#def _write_sort2_as_sort2(self, f06_file, page_num, page_stamp, header, words):</span>
        <span class="c1">#nodes = self.node_gridtype[:, 0]</span>
        <span class="c1">#gridtypes = self.node_gridtype[:, 1]</span>
        <span class="c1">#times = self._times</span>
        <span class="c1">#for inode, (node_id, gridtypei) in enumerate(zip(nodes, gridtypes)):</span>
            <span class="c1">#t1 = self.data[inode, :, 0]</span>
            <span class="c1">#t2 = self.data[inode, :, 1]</span>
            <span class="c1">#t3 = self.data[inode, :, 2]</span>
            <span class="c1">#r1 = self.data[inode, :, 3]</span>
            <span class="c1">#r2 = self.data[inode, :, 4]</span>
            <span class="c1">#r3 = self.data[inode, :, 5]</span>

            <span class="c1">#header[1] = &#39; POINT-ID = %10i\n&#39; % node_id</span>
            <span class="c1">#f06_file.write(&#39;&#39;.join(header + words))</span>
            <span class="c1">#for dt, t1i, t2i, t3i, r1i, r2i, r3i in zip(times, t1, t2, t3, r1, r2, r3):</span>
                <span class="c1">#sgridtype = self.recast_gridtype_as_string(gridtypei)</span>
                <span class="c1">#vals = [t1i, t2i, t3i, r1i, r2i, r3i]</span>
                <span class="c1">#vals2 = write_floats_13e(vals)</span>
                <span class="c1">#(dx, dy, dz, rx, ry, rz) = vals2</span>
                <span class="c1">#if sgridtype in [&#39;G&#39;, &#39;H&#39;, &#39;L&#39;]:</span>
                    <span class="c1">#f06_file.write(&#39;%14s %6s     %-13s  %-13s  %-13s  %-13s  %-13s  %s\n&#39; % (</span>
                        <span class="c1">#write_float_12e(dt), sgridtype, dx, dy, dz, rx, ry, rz))</span>
                <span class="c1">#elif sgridtype == &#39;S&#39;:</span>
                    <span class="c1">#f06_file.write(&#39;%14s %6s     %s\n&#39; % (node_id, sgridtype, dx))</span>
                <span class="c1">#else:</span>
                    <span class="c1">#raise NotImplementedError(sgridtype)</span>
            <span class="c1">#f06_file.write(page_stamp % page_num)</span>
            <span class="c1">#page_num += 1</span>
        <span class="c1">#return page_num</span>

    <span class="k">def</span> <span class="nf">_write_f06_transient_block</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">words</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">page_stamp</span><span class="p">,</span> <span class="n">page_num</span><span class="p">,</span> <span class="n">f06_file</span><span class="p">,</span> <span class="n">write_words</span><span class="p">,</span>
                                   <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">write_words</span><span class="p">:</span>
            <span class="n">words</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39; </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;      POINT ID.   TYPE          T1             T2             T3             R1             R2             R3</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="c1">#words += self.getTableMarker()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">header</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">header</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

        <span class="n">is_sort2</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">is_sort1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">is_sort2</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">page_num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_sort1_as_sort2</span><span class="p">(</span><span class="n">f06_file</span><span class="p">,</span> <span class="n">page_num</span><span class="p">,</span> <span class="n">page_stamp</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">words</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">page_num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_sort1_as_sort1</span><span class="p">(</span><span class="n">f06_file</span><span class="p">,</span> <span class="n">page_num</span><span class="p">,</span> <span class="n">page_stamp</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">words</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">page_num</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="c1">#raise NotImplementedError(&#39;SORT2&#39;)</span>
            <span class="c1">#page_num = self._write_sort2_as_sort2(f06_file, page_num, page_stamp, header, words)</span>
        <span class="k">return</span> <span class="n">page_num</span> <span class="o">-</span> <span class="mi">1</span>

<div class="viewcode-block" id="RealTableArray.extract_xyplot"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.RealTableArray.extract_xyplot">[docs]</a>    <span class="k">def</span> <span class="nf">extract_xyplot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_ids</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="n">node_ids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">node_ids</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">index</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">assert</span> <span class="n">index</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="n">index</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">inids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">searchsorted</span><span class="p">(</span><span class="n">nids</span><span class="p">,</span> <span class="n">node_ids</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="n">nids</span><span class="p">[</span><span class="n">inids</span><span class="p">]</span> <span class="o">==</span> <span class="n">node_ids</span><span class="p">),</span> <span class="s1">&#39;nids=</span><span class="si">%s</span><span class="s1"> expected=</span><span class="si">%s</span><span class="s1">; all=</span><span class="si">%s</span><span class="s1">&#39;</span>  <span class="o">%</span> <span class="p">(</span><span class="n">nids</span><span class="p">[</span><span class="n">inids</span><span class="p">],</span> <span class="n">node_ids</span><span class="p">,</span> <span class="n">nids</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">inids</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span></div></div>


<div class="viewcode-block" id="ComplexTableArray"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.ComplexTableArray">[docs]</a><span class="k">class</span> <span class="nc">ComplexTableArray</span><span class="p">(</span><span class="n">TableArray</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    complex displacement style table</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="n">TableArray</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>

<div class="viewcode-block" id="ComplexTableArray.add_freq_case"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.ComplexTableArray.add_freq_case">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_freq_case</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">node_gridtype</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span>
                      <span class="n">freqs</span><span class="p">,</span>
                      <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">is_random</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_msc</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                      <span class="n">random_code</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">subtitle</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>

        <span class="n">table_name</span> <span class="o">=</span> <span class="s1">&#39;OUGV1&#39;</span>
        <span class="n">analysis_code</span> <span class="o">=</span> <span class="mi">5</span> <span class="c1"># freq</span>
        <span class="n">data_code</span> <span class="o">=</span> <span class="n">oug_data_code</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">analysis_code</span><span class="p">,</span>
                                  <span class="n">is_sort1</span><span class="o">=</span><span class="n">is_sort1</span><span class="p">,</span> <span class="n">is_random</span><span class="o">=</span><span class="n">is_random</span><span class="p">,</span>
                                  <span class="n">random_code</span><span class="o">=</span><span class="n">random_code</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">subtitle</span><span class="o">=</span><span class="n">subtitle</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
                                  <span class="n">is_msc</span><span class="o">=</span><span class="n">is_msc</span><span class="p">)</span>
        <span class="c1">#data_code[&#39;modes&#39;] = modes</span>
        <span class="c1">#data_code[&#39;eigns&#39;] = eigenvalues</span>
        <span class="c1">#data_code[&#39;mode_cycles&#39;] = mode_cycles</span>
        <span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;data_names&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;freq&#39;</span><span class="p">]</span>
        <span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;FREQ&#39;</span>

        <span class="n">ntimes</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">nnodes</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="n">freqs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">node_gridtype</span> <span class="o">=</span> <span class="n">node_gridtype</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>

        <span class="n">obj</span><span class="o">.</span><span class="n">freqs</span> <span class="o">=</span> <span class="n">freqs</span>

        <span class="n">obj</span><span class="o">.</span><span class="n">ntimes</span> <span class="o">=</span> <span class="n">ntimes</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">ntotal</span> <span class="o">=</span> <span class="n">nnodes</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">_times</span> <span class="o">=</span> <span class="n">freqs</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">is_built</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">obj</span></div>

<div class="viewcode-block" id="ComplexTableArray.extract_xyplot"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.ComplexTableArray.extract_xyplot">[docs]</a>    <span class="k">def</span> <span class="nf">extract_xyplot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_ids</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">index_str</span><span class="p">):</span>
        <span class="n">index_str</span> <span class="o">=</span> <span class="n">index_str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">index_str</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;real&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">]:</span>
            <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">index_str</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;imag&#39;</span><span class="p">,</span> <span class="s1">&#39;i&#39;</span><span class="p">]:</span>
            <span class="n">j</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="k">elif</span> <span class="n">index_str</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;mag&#39;</span><span class="p">,</span> <span class="s1">&#39;magnitude&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">]:</span>
            <span class="n">j</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="k">elif</span> <span class="n">index_str</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;phase&#39;</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">]:</span>
            <span class="n">j</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;index_str=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">index_str</span><span class="p">)</span>

        <span class="n">node_ids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">node_ids</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">index</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">assert</span> <span class="n">index</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span>
                         <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span> <span class="n">index</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">inids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">searchsorted</span><span class="p">(</span><span class="n">nids</span><span class="p">,</span> <span class="n">node_ids</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="n">nids</span><span class="p">[</span><span class="n">inids</span><span class="p">]</span> <span class="o">==</span> <span class="n">node_ids</span><span class="p">),</span> <span class="s1">&#39;nids=</span><span class="si">%s</span><span class="s1"> expected=</span><span class="si">%s</span><span class="s1">; all=</span><span class="si">%s</span><span class="s1">&#39;</span>  <span class="o">%</span> <span class="p">(</span><span class="n">nids</span><span class="p">[</span><span class="n">inids</span><span class="p">],</span> <span class="n">node_ids</span><span class="p">,</span> <span class="n">nids</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># real</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">inids</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">real</span>
        <span class="k">elif</span> <span class="n">j</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="c1"># imag</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">inids</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">imag</span>
        <span class="k">elif</span> <span class="n">j</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="c1"># mag</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">inids</span><span class="p">,</span> <span class="n">i</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">j</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="c1"># phase</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">angle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">inids</span><span class="p">,</span> <span class="n">i</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">()</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_real</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_complex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

<div class="viewcode-block" id="ComplexTableArray.data_type"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.ComplexTableArray.data_type">[docs]</a>    <span class="k">def</span> <span class="nf">data_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;complex64&#39;</span></div>

    <span class="c1">#def _write_f06_block(self, words, header, page_stamp, page_num, f06_file, is_mag_phase):</span>
        <span class="c1">#self._write_f06_transient_block(words, header, page_stamp, page_num, f06_file, is_mag_phase, is_sort1)</span>

    <span class="k">def</span> <span class="nf">_write_f06_transient_block</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">words</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">page_stamp</span><span class="p">,</span> <span class="n">page_num</span><span class="p">,</span> <span class="n">f06_file</span><span class="p">,</span>
                                   <span class="n">is_mag_phase</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">is_mag_phase</span><span class="p">:</span>
            <span class="n">words</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;                                                         (MAGNITUDE/PHASE)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">words</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;                                                          (REAL/IMAGINARY)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">header</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">header</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

        <span class="c1">#is_sort1_table = self.is_sort1</span>
        <span class="n">is_sort1_table</span> <span class="o">=</span> <span class="n">SORT1_TABLES</span> <span class="c1"># self.table_name[-1] == &#39;1&#39;</span>
        <span class="k">if</span> <span class="n">is_sort1_table</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span> <span class="ow">in</span> <span class="n">SORT1_TABLES</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span>
            <span class="k">if</span> <span class="n">is_sort1</span><span class="p">:</span>
                <span class="n">words</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39; </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;      POINT ID.   TYPE          T1             T2             T3             R1             R2             R3</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
                <span class="n">page_num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">write_sort1_as_sort1</span><span class="p">(</span><span class="n">f06_file</span><span class="p">,</span> <span class="n">page_num</span><span class="p">,</span> <span class="n">page_stamp</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">words</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">words</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39; </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;      FREQUENCY   TYPE          T1             T2             T3             R1             R2             R3</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
                <span class="n">page_num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">write_sort1_as_sort2</span><span class="p">(</span><span class="n">f06_file</span><span class="p">,</span> <span class="n">page_num</span><span class="p">,</span> <span class="n">page_stamp</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">words</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span> <span class="ow">in</span> <span class="n">SORT2_TABLES</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span>
            <span class="n">words</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39; </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;      FREQUENCY   TYPE          T1             T2             T3             R1             R2             R3</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
            <span class="n">page_num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">write_sort2_as_sort2</span><span class="p">(</span><span class="n">f06_file</span><span class="p">,</span> <span class="n">page_num</span><span class="p">,</span> <span class="n">page_stamp</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">words</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">page_num</span> <span class="o">-</span> <span class="mi">1</span>

<div class="viewcode-block" id="ComplexTableArray.write_sort1_as_sort1"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.ComplexTableArray.write_sort1_as_sort1">[docs]</a>    <span class="k">def</span> <span class="nf">write_sort1_as_sort1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f06_file</span><span class="p">,</span> <span class="n">page_num</span><span class="p">,</span> <span class="n">page_stamp</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">words</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="p">):</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">),</span> <span class="s1">&#39;ntimes=</span><span class="si">%s</span><span class="s1"> len(self._times)=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">)</span>
        <span class="n">words_orig</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">itime</span><span class="p">,</span> <span class="n">dt</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;eigrs&#39;</span><span class="p">):</span>
                <span class="n">words</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">words_orig</span><span class="p">)</span>
                <span class="n">eigr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eigrs</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>
                <span class="n">eigi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eigis</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>
                <span class="n">eigr</span> <span class="o">=</span> <span class="mf">0.</span> <span class="k">if</span> <span class="n">eigr</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">eigr</span>
                <span class="n">eigi</span> <span class="o">=</span> <span class="mf">0.</span> <span class="k">if</span> <span class="n">eigi</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">eigi</span>
                <span class="k">if</span> <span class="s1">&#39;%&#39;</span> <span class="ow">in</span> <span class="n">words</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">words</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">words</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">%</span> <span class="p">(</span><span class="n">eigr</span><span class="p">,</span> <span class="n">eigi</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;words =&#39;</span><span class="p">,</span> <span class="n">words</span><span class="p">)</span>
                        <span class="k">raise</span>

                <span class="k">if</span> <span class="s1">&#39;%&#39;</span> <span class="ow">in</span> <span class="n">words</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">words</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">words</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">%</span> <span class="p">(</span><span class="n">itime</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;words =&#39;</span><span class="p">,</span> <span class="n">words</span><span class="p">)</span>
                        <span class="k">raise</span>

            <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">gridtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]</span>
            <span class="n">r1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">3</span><span class="p">]</span>
            <span class="n">r2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">4</span><span class="p">]</span>
            <span class="n">r3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">5</span><span class="p">]</span>

            <span class="n">header</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39; </span><span class="si">%s</span><span class="s1"> = </span><span class="si">%10.4E</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">dt</span><span class="p">)</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">header</span> <span class="o">+</span> <span class="n">words</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">node_id</span><span class="p">,</span> <span class="n">gridtypei</span><span class="p">,</span> <span class="n">t1i</span><span class="p">,</span> <span class="n">t2i</span><span class="p">,</span> <span class="n">t3i</span><span class="p">,</span> <span class="n">r1i</span><span class="p">,</span> <span class="n">r2i</span><span class="p">,</span> <span class="n">r3i</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">gridtype</span><span class="p">,</span> <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">,</span> <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">,</span> <span class="n">r3</span><span class="p">):</span>
                <span class="n">sgridtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">recast_gridtype_as_string</span><span class="p">(</span><span class="n">gridtypei</span><span class="p">)</span>
                <span class="n">vals</span> <span class="o">=</span> <span class="p">[</span><span class="n">t1i</span><span class="p">,</span> <span class="n">t2i</span><span class="p">,</span> <span class="n">t3i</span><span class="p">,</span> <span class="n">r1i</span><span class="p">,</span> <span class="n">r2i</span><span class="p">,</span> <span class="n">r3i</span><span class="p">]</span>
                <span class="n">vals2</span> <span class="o">=</span> <span class="n">write_imag_floats_13e</span><span class="p">(</span><span class="n">vals</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="p">)</span>
                <span class="p">[</span><span class="n">dxr</span><span class="p">,</span> <span class="n">dyr</span><span class="p">,</span> <span class="n">dzr</span><span class="p">,</span> <span class="n">rxr</span><span class="p">,</span> <span class="n">ryr</span><span class="p">,</span> <span class="n">rzr</span><span class="p">,</span>
                 <span class="n">dxi</span><span class="p">,</span> <span class="n">dyi</span><span class="p">,</span> <span class="n">dzi</span><span class="p">,</span> <span class="n">rxi</span><span class="p">,</span> <span class="n">ryi</span><span class="p">,</span> <span class="n">rzi</span><span class="p">]</span> <span class="o">=</span> <span class="n">vals2</span>
                <span class="k">if</span> <span class="n">sgridtype</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;G&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">]:</span>
                    <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;0 </span><span class="si">%12i</span><span class="s1"> </span><span class="si">%6s</span><span class="s1">     </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-s</span><span class="se">\n</span><span class="s1">&#39;</span>
                                   <span class="s1">&#39;  </span><span class="si">%12s</span><span class="s1"> </span><span class="si">%6s</span><span class="s1">     </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                       <span class="n">node_id</span><span class="p">,</span> <span class="n">sgridtype</span><span class="p">,</span> <span class="n">dxr</span><span class="p">,</span> <span class="n">dyr</span><span class="p">,</span> <span class="n">dzr</span><span class="p">,</span> <span class="n">rxr</span><span class="p">,</span> <span class="n">ryr</span><span class="p">,</span> <span class="n">rzr</span><span class="p">,</span>
                                       <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">dxi</span><span class="p">,</span> <span class="n">dyi</span><span class="p">,</span> <span class="n">dzi</span><span class="p">,</span> <span class="n">rxi</span><span class="p">,</span> <span class="n">ryi</span><span class="p">,</span> <span class="n">rzi</span><span class="p">))</span>
                <span class="k">elif</span> <span class="n">sgridtype</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;S&#39;</span><span class="p">,</span> <span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">]:</span>
                    <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;0 </span><span class="si">%12i</span><span class="s1"> </span><span class="si">%6s</span><span class="s1">     </span><span class="si">%-13s</span><span class="se">\n</span><span class="s1">&#39;</span>
                                   <span class="s1">&#39;  </span><span class="si">%12s</span><span class="s1"> </span><span class="si">%6s</span><span class="s1">     </span><span class="si">%-13s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">node_id</span><span class="p">,</span> <span class="n">sgridtype</span><span class="p">,</span> <span class="n">dxr</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">dxi</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;node_id=</span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s1"> sgridtype=</span><span class="si">{</span><span class="n">sgridtype</span><span class="si">}</span><span class="s1"> vals=</span><span class="si">{</span><span class="n">vals2</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">page_stamp</span> <span class="o">%</span> <span class="n">page_num</span><span class="p">)</span>
            <span class="n">page_num</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">page_num</span></div>

<div class="viewcode-block" id="ComplexTableArray.write_sort1_as_sort2"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.ComplexTableArray.write_sort1_as_sort2">[docs]</a>    <span class="k">def</span> <span class="nf">write_sort1_as_sort2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f06_file</span><span class="p">,</span> <span class="n">page_num</span><span class="p">,</span> <span class="n">page_stamp</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">words</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="p">):</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">gridtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>

        <span class="n">times</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_times</span>
        <span class="c1"># print(self.data.shape)</span>
        <span class="k">for</span> <span class="n">inode</span><span class="p">,</span> <span class="p">(</span><span class="n">node_id</span><span class="p">,</span> <span class="n">gridtypei</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">gridtype</span><span class="p">)):</span>
            <span class="c1"># TODO: for SORT1 pretending to be SORT2</span>
            <span class="c1">#t1 = self.data[:, inode, 0].ravel()</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">inode</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">inode</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">inode</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
            <span class="n">r1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">inode</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
            <span class="n">r2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">inode</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
            <span class="n">r3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">inode</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r3</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">times</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;len(d)=</span><span class="si">%s</span><span class="s1"> len(times)=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">r3</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">times</span><span class="p">)))</span>

            <span class="n">header</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39; POINT-ID = </span><span class="si">%10i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">node_id</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">header</span> <span class="o">+</span> <span class="n">words</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">dt</span><span class="p">,</span> <span class="n">t1i</span><span class="p">,</span> <span class="n">t2i</span><span class="p">,</span> <span class="n">t3i</span><span class="p">,</span> <span class="n">r1i</span><span class="p">,</span> <span class="n">r2i</span><span class="p">,</span> <span class="n">r3i</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">times</span><span class="p">,</span> <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">,</span> <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">,</span> <span class="n">r3</span><span class="p">):</span>
                <span class="n">sgridtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">recast_gridtype_as_string</span><span class="p">(</span><span class="n">gridtypei</span><span class="p">)</span>
                <span class="n">vals</span> <span class="o">=</span> <span class="p">[</span><span class="n">t1i</span><span class="p">,</span> <span class="n">t2i</span><span class="p">,</span> <span class="n">t3i</span><span class="p">,</span> <span class="n">r1i</span><span class="p">,</span> <span class="n">r2i</span><span class="p">,</span> <span class="n">r3i</span><span class="p">]</span>
                <span class="n">vals2</span> <span class="o">=</span> <span class="n">write_imag_floats_13e</span><span class="p">(</span><span class="n">vals</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="p">)</span>
                <span class="p">[</span><span class="n">dxr</span><span class="p">,</span> <span class="n">dyr</span><span class="p">,</span> <span class="n">dzr</span><span class="p">,</span> <span class="n">rxr</span><span class="p">,</span> <span class="n">ryr</span><span class="p">,</span> <span class="n">rzr</span><span class="p">,</span>
                 <span class="n">dxi</span><span class="p">,</span> <span class="n">dyi</span><span class="p">,</span> <span class="n">dzi</span><span class="p">,</span> <span class="n">rxi</span><span class="p">,</span> <span class="n">ryi</span><span class="p">,</span> <span class="n">rzi</span><span class="p">]</span> <span class="o">=</span> <span class="n">vals2</span>
                <span class="n">sdt</span> <span class="o">=</span> <span class="n">write_float_12e</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
                <span class="c1">#if not is_all_zeros:</span>
                <span class="k">if</span> <span class="n">sgridtype</span> <span class="o">==</span> <span class="s1">&#39;G&#39;</span><span class="p">:</span>
                    <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;0 </span><span class="si">%12s</span><span class="s1"> </span><span class="si">%6s</span><span class="s1">     </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-s</span><span class="se">\n</span><span class="s1">&#39;</span>
                                   <span class="s1">&#39;  </span><span class="si">%13s</span><span class="s1"> </span><span class="si">%6s</span><span class="s1">     </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                       <span class="n">sdt</span><span class="p">,</span> <span class="n">sgridtype</span><span class="p">,</span> <span class="n">dxr</span><span class="p">,</span> <span class="n">dyr</span><span class="p">,</span> <span class="n">dzr</span><span class="p">,</span> <span class="n">rxr</span><span class="p">,</span> <span class="n">ryr</span><span class="p">,</span> <span class="n">rzr</span><span class="p">,</span>
                                       <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">dxi</span><span class="p">,</span> <span class="n">dyi</span><span class="p">,</span> <span class="n">dzi</span><span class="p">,</span> <span class="n">rxi</span><span class="p">,</span> <span class="n">ryi</span><span class="p">,</span> <span class="n">rzi</span><span class="p">))</span>
                <span class="k">elif</span> <span class="n">sgridtype</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;S&#39;</span><span class="p">,</span> <span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">]:</span>
                    <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;0 </span><span class="si">%12s</span><span class="s1"> </span><span class="si">%6s</span><span class="s1">     </span><span class="si">%-13s</span><span class="se">\n</span><span class="s1">&#39;</span>
                                   <span class="s1">&#39;  </span><span class="si">%12s</span><span class="s1"> </span><span class="si">%6s</span><span class="s1">     </span><span class="si">%-13s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sdt</span><span class="p">,</span> <span class="n">sgridtype</span><span class="p">,</span> <span class="n">dxr</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">dxi</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;nid=</span><span class="si">%s</span><span class="s1"> dt=</span><span class="si">%s</span><span class="s1"> type=</span><span class="si">%s</span><span class="s1"> dx=</span><span class="si">%s</span><span class="s1"> dy=</span><span class="si">%s</span><span class="s1"> dz=</span><span class="si">%s</span><span class="s1"> rx=</span><span class="si">%s</span><span class="s1"> ry=</span><span class="si">%s</span><span class="s1"> rz=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="n">node_id</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">sgridtype</span><span class="p">,</span> <span class="n">t1i</span><span class="p">,</span> <span class="n">t2i</span><span class="p">,</span> <span class="n">t3i</span><span class="p">,</span> <span class="n">r1i</span><span class="p">,</span> <span class="n">r2i</span><span class="p">,</span> <span class="n">r3i</span><span class="p">)</span>
                    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">page_stamp</span> <span class="o">%</span> <span class="n">page_num</span><span class="p">)</span>
            <span class="n">page_num</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">page_num</span></div>

    <span class="c1">#def write_sort2_as_sort2(self, f06_file, page_num, page_stamp, header, words, is_mag_phase):</span>
        <span class="c1">#&quot;&quot;&quot;TODO: not validated&quot;&quot;&quot;</span>
        <span class="c1">#node = self.node_gridtype[:, 0]</span>
        <span class="c1">#gridtype = self.node_gridtype[:, 1]</span>

        <span class="c1">#times = self._times</span>
        <span class="c1">## print(self.data.shape)</span>
        <span class="c1">#for inode, (node_id, gridtypei) in enumerate(zip(node, gridtype)):</span>
            <span class="c1">## TODO: for SORT1 pretending to be SORT2</span>
            <span class="c1">##t1 = self.data[:, inode, 0].ravel()</span>
            <span class="c1">#t1 = self.data[:, inode, 0].ravel()</span>
            <span class="c1">#t2 = self.data[:, inode, 1].ravel()</span>
            <span class="c1">#t3 = self.data[:, inode, 2].ravel()</span>
            <span class="c1">#r1 = self.data[:, inode, 3].ravel()</span>
            <span class="c1">#r2 = self.data[:, inode, 4].ravel()</span>
            <span class="c1">#r3 = self.data[:, inode, 5].ravel()</span>
            <span class="c1">#if len(r3) != len(times):</span>
                <span class="c1">#raise RuntimeError(&#39;len(d)=%s len(times)=%s&#39; % (len(r3), len(times)))</span>

            <span class="c1">#header[2] = &#39; POINT-ID = %10i\n&#39; % node_id</span>
            <span class="c1">#f06_file.write(&#39;&#39;.join(header + words))</span>
            <span class="c1">#for dt, t1i, t2i, t3i, r1i, r2i, r3i in zip(times, t1, t2, t3, r1, r2, r3):</span>
                <span class="c1">#sgridtype = self.recast_gridtype_as_string(gridtypei)</span>
                <span class="c1">#vals = [t1i, t2i, t3i, r1i, r2i, r3i]</span>
                <span class="c1">#vals2 = write_imag_floats_13e(vals, is_mag_phase)</span>
                <span class="c1">#[dxr, dyr, dzr, rxr, ryr, rzr,</span>
                 <span class="c1">#dxi, dyi, dzi, rxi, ryi, rzi] = vals2</span>
                <span class="c1">#sdt = write_float_12e(dt)</span>
                <span class="c1">##if not is_all_zeros:</span>
                <span class="c1">#if sgridtype == &#39;G&#39;:</span>
                    <span class="c1">#f06_file.write(&#39;0 %12s %6s     %-13s  %-13s  %-13s  %-13s  %-13s  %-s\n&#39;</span>
                                   <span class="c1">#&#39;  %13s %6s     %-13s  %-13s  %-13s  %-13s  %-13s  %-s\n&#39; % (</span>
                                       <span class="c1">#sdt, sgridtype, dxr, dyr, dzr, rxr, ryr, rzr,</span>
                                       <span class="c1">#&#39;&#39;, &#39;&#39;, dxi, dyi, dzi, rxi, ryi, rzi))</span>
                <span class="c1">#elif sgridtype in [&#39;S&#39;, &#39;M&#39;, &#39;E&#39;]:</span>
                    <span class="c1">#f06_file.write(&#39;0 %12s %6s     %-13s\n&#39;</span>
                                   <span class="c1">#&#39;  %12s %6s     %-13s\n&#39; % (sdt, sgridtype, dxr, &#39;&#39;, &#39;&#39;, dxi))</span>
                <span class="c1">#else:</span>
                    <span class="c1">#msg = &#39;nid=%s dt=%s type=%s dx=%s dy=%s dz=%s rx=%s ry=%s rz=%s&#39; % (</span>
                        <span class="c1">#node_id, dt, sgridtype, t1i, t2i, t3i, r1i, r2i, r3i)</span>
                    <span class="c1">#raise NotImplementedError(msg)</span>
            <span class="c1">#f06_file.write(page_stamp % page_num)</span>
            <span class="c1">#page_num += 1</span>
        <span class="c1">#return page_num</span>

<div class="viewcode-block" id="ComplexTableArray.write_op2"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.ComplexTableArray.write_op2">[docs]</a>    <span class="k">def</span> <span class="nf">write_op2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op2_file</span><span class="p">,</span> <span class="n">fascii</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="n">new_result</span><span class="p">,</span>
                  <span class="n">date</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">endian</span><span class="o">=</span><span class="s1">&#39;&gt;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;writes an OP2&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">inspect</span>
        <span class="n">allowed_tables</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;OUGV1&#39;</span><span class="p">,</span> <span class="s1">&#39;BOUGV1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;OQG1&#39;</span><span class="p">,</span> <span class="s1">&#39;OQMG1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;OPG1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;OUXY1&#39;</span><span class="p">,</span>
            <span class="s1">&#39;OUGF1&#39;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span> <span class="ow">in</span> <span class="n">allowed_tables</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span>

        <span class="n">frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
        <span class="n">call_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getouterframes</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">fascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.write_op2: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">call_frame</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]))</span>

        <span class="k">if</span> <span class="n">itable</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_table_header</span><span class="p">(</span><span class="n">op2_file</span><span class="p">,</span> <span class="n">fascii</span><span class="p">,</span> <span class="n">date</span><span class="p">)</span>
            <span class="n">itable</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span>

        <span class="c1">#print(&#39;nonlinear_factor =&#39;, self.nonlinear_factor)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">:</span>
            <span class="n">op2_format</span> <span class="o">=</span> <span class="n">endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i 12f&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;SORT2&#39;</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">op2_format</span><span class="p">)</span>

        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">max_id</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">max_id</span> <span class="o">&gt;</span> <span class="mi">99999999</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SixtyFourBitError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;64-bit OP2 writing is not supported; max id=</span><span class="si">{</span><span class="n">max_id</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">gridtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="c1">#format_table4_1 = Struct(self._endian + b&#39;15i&#39;)</span>
        <span class="c1">#format_table4_2 = Struct(self._endian + b&#39;3i&#39;)</span>

        <span class="c1"># table 4 info</span>
        <span class="c1">#ntimes = self.data.shape[0]</span>
        <span class="n">nnodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">nnodes_device</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_gridtype</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">device_code</span>

        <span class="c1">#(2+6) =&gt; (node_id, gridtypei, t1i, t2i, t3i, r1i, r2i, r3i)</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="n">nnodes</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">12</span><span class="p">)</span>

        <span class="c1">#print(&#39;shape = %s&#39; % str(self.data.shape))</span>
        <span class="k">assert</span> <span class="n">nnodes</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">nnodes</span>
        <span class="k">assert</span> <span class="n">ntotal</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ntotal</span>

        <span class="n">unused_device_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">device_code</span>
        <span class="n">fascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  ntimes = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">)</span>

        <span class="c1">#fmt = &#39;%2i %6f&#39;</span>
        <span class="c1">#print(&#39;ntotal=%s&#39; % (ntotal))</span>
        <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_table_3</span><span class="p">(</span><span class="n">op2_file</span><span class="p">,</span> <span class="n">fascii</span><span class="p">,</span> <span class="n">new_result</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="n">itime</span><span class="p">)</span>

            <span class="c1"># record 4</span>
            <span class="n">itable</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="o">*</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">op2_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="si">%i</span><span class="s1">i&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">header</span><span class="p">),</span> <span class="o">*</span><span class="n">header</span><span class="p">))</span>
            <span class="n">fascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, 0, 4]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, </span><span class="si">%s</span><span class="s1">, 4]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">itable</span><span class="p">))</span>
            <span class="n">fascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, </span><span class="si">%i</span><span class="s1">, 4]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">ntotal</span><span class="p">))</span>

            <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]</span>
            <span class="n">r1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">3</span><span class="p">]</span>
            <span class="n">r2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">4</span><span class="p">]</span>
            <span class="n">r3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">5</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">node_id</span><span class="p">,</span> <span class="n">gridtypei</span><span class="p">,</span> <span class="n">t1i</span><span class="p">,</span> <span class="n">t2i</span><span class="p">,</span> <span class="n">t3i</span><span class="p">,</span> <span class="n">r1i</span><span class="p">,</span> <span class="n">r2i</span><span class="p">,</span> <span class="n">r3i</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">nnodes_device</span><span class="p">,</span> <span class="n">gridtype</span><span class="p">,</span> <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">,</span> <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">,</span> <span class="n">r3</span><span class="p">):</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">node_id</span><span class="p">,</span> <span class="n">gridtypei</span><span class="p">,</span>
                        <span class="n">t1i</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">t2i</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">t3i</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">r1i</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">r2i</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">r3i</span><span class="o">.</span><span class="n">real</span><span class="p">,</span>
                        <span class="n">t1i</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">t2i</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">t3i</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">r1i</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">r2i</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">r3i</span><span class="o">.</span><span class="n">imag</span><span class="p">]</span>
                <span class="n">fascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  nid, grid_type, dx, dy, dz, rx, ry, rz = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">data</span><span class="p">)</span>
                <span class="n">op2_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">))</span>

            <span class="n">itable</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,]</span>
            <span class="n">op2_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">header</span><span class="p">))</span>
            <span class="n">fascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;footer = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">header</span><span class="p">)</span>
            <span class="n">new_result</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="c1">#header = [</span>
                <span class="c1">#4, itable, 4,</span>
                <span class="c1">#4, 1, 4,</span>
                <span class="c1">#4, 0, 4,</span>
            <span class="c1">#]</span>
            <span class="c1">#op2_file.write(pack(b&#39;%ii&#39; % len(header), *header))</span>
            <span class="c1">#fascii.write(&#39;footer2 = %s\n&#39; % header)</span>
        <span class="k">return</span> <span class="n">itable</span></div></div>

    <span class="c1">#def write_sort2_as_sort2(self, f06_file, page_num, page_stamp, header, words, is_mag_phase):</span>
        <span class="c1">#node = self.node_gridtype[:, 0]</span>
        <span class="c1">#gridtype = self.node_gridtype[:, 1]</span>

        <span class="c1">#times = self._times</span>
        <span class="c1">#for inode, (node_id, gridtypei) in enumerate(zip(node, gridtype)):</span>
            <span class="c1">## TODO: for SORT1 pretending to be SORT2</span>
            <span class="c1">##t1 = self.data[:, inode, 0].ravel()</span>
            <span class="c1">#t1 = self.data[inode, :, 0]</span>
            <span class="c1">#t2 = self.data[inode, :, 1]</span>
            <span class="c1">#t3 = self.data[inode, :, 2]</span>
            <span class="c1">#r1 = self.data[inode, :, 3]</span>
            <span class="c1">#r2 = self.data[inode, :, 4]</span>
            <span class="c1">#r3 = self.data[inode, :, 5]</span>
            <span class="c1">#if len(r3) != len(times):</span>
                <span class="c1">#raise RuntimeError(&#39;len(d)=%s len(times)=%s&#39; % (len(r3), len(times)))</span>

            <span class="c1">#header[2] = &#39; POINT-ID = %10i\n&#39; % node_id</span>
            <span class="c1">#f06_file.write(&#39;&#39;.join(header + words))</span>
            <span class="c1">#for dt, t1i, t2i, t3i, r1i, r2i, r3i in zip(times, t1, t2, t3, r1, r2, r3):</span>
                <span class="c1">#sgridtype = self.recast_gridtype_as_string(gridtypei)</span>
                <span class="c1">#vals = [t1i, t2i, t3i, r1i, r2i, r3i]</span>
                <span class="c1">#vals2 = write_imag_floats_13e(vals, is_mag_phase)</span>
                <span class="c1">#[dxr, dyr, dzr, rxr, ryr, rzr,</span>
                 <span class="c1">#dxi, dyi, dzi, rxi, ryi, rzi] = vals2</span>
                <span class="c1">#sdt = write_float_12e(dt)</span>
                <span class="c1">##if not is_all_zeros:</span>
                <span class="c1">#if sgridtype == &#39;G&#39;:</span>
                    <span class="c1">#f06_file.write(&#39;0 %12s %6s     %-13s  %-13s  %-13s  %-13s  %-13s  %-s\n&#39;</span>
                                   <span class="c1">#&#39;  %13s %6s     %-13s  %-13s  %-13s  %-13s  %-13s  %-s\n&#39; % (</span>
                                       <span class="c1">#sdt, sgridtype, dxr, dyr, dzr, rxr, ryr, rzr,</span>
                                       <span class="c1">#&#39;&#39;, &#39;&#39;, dxi, dyi, dzi, rxi, ryi, rzi))</span>
                <span class="c1">#elif sgridtype == &#39;S&#39;:</span>
                    <span class="c1">#f06_file.write(&#39;0 %12s %6s     %-13s\n&#39;</span>
                                   <span class="c1">#&#39;  %12s %6s     %-13s\n&#39; % (sdt, sgridtype, dxr, &#39;&#39;, &#39;&#39;, dxi))</span>
                <span class="c1">#else:</span>
                    <span class="c1">#msg = &#39;nid=%s dt=%s type=%s dx=%s dy=%s dz=%s rx=%s ry=%s rz=%s&#39; % (</span>
                        <span class="c1">#node_id, dt, sgridtype, t1i, t2i, t3i, r1i, r2i, r3i)</span>
                    <span class="c1">#raise NotImplementedError(msg)</span>
            <span class="c1">#f06_file.write(page_stamp % page_num)</span>
            <span class="c1">#page_num += 1</span>
        <span class="c1">#return page_num</span>

<div class="viewcode-block" id="pandas_extract_rows"><a class="viewcode-back" href="../../../../reference/op2/result_objects/pyNastran.op2.result_objects.html#pyNastran.op2.result_objects.table_object.pandas_extract_rows">[docs]</a><span class="k">def</span> <span class="nf">pandas_extract_rows</span><span class="p">(</span><span class="n">data_frame</span><span class="p">,</span> <span class="n">ugridtype_str</span><span class="p">,</span> <span class="n">index_names</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;removes the t2-t6 for S and E points&quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
    <span class="n">letter_dims</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;G&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;S&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">cat_keys</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">letter</span><span class="p">,</span> <span class="n">dim</span><span class="p">)</span> <span class="ow">in</span> <span class="n">letter_dims</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">letter</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ugridtype_str</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">dim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># Note that I&#39;m only keeping every 6th row</span>
            <span class="n">eig</span> <span class="o">=</span> <span class="n">data_frame</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="n">letter</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">::</span><span class="mi">6</span><span class="p">]</span>
            <span class="n">eig</span> <span class="o">=</span> <span class="n">eig</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
            <span class="c1">#print(eig.columns)</span>
            <span class="c1">#print(eig)</span>
            <span class="c1">#item = eig.loc[:, 1]</span>
            <span class="c1">#item = eig.loc[:, &#39;Item&#39;]</span>
            <span class="c1">#print(dir(eig))</span>
            <span class="c1">#print(eig.loc)</span>
            <span class="c1">#item = eig[&#39;Item&#39;]</span>
            <span class="c1">#print(item)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">eig</span> <span class="o">=</span> <span class="n">eig</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="s1">&#39;Item&#39;</span> <span class="p">:</span> <span class="p">{</span><span class="s1">&#39;t1&#39;</span> <span class="p">:</span> <span class="n">letter</span><span class="p">}})</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">index_names</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">NotImplementedError</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;skipping pandas cleanup due to issue with complex </span><span class="si">{</span><span class="n">letter</span><span class="si">}</span><span class="s1"> points&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">data_frame</span>
                <span class="c1">#continue</span>
        <span class="k">elif</span> <span class="n">dim</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
            <span class="n">eig</span> <span class="o">=</span> <span class="n">data_frame</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="n">letter</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">dim</span><span class="p">)</span>
        <span class="c1">#log.info(&#39;eig = %s&#39; % eig)</span>
        <span class="n">cat_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">eig</span><span class="p">)</span>
    <span class="n">data_frame</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">cat_keys</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">data_frame</span></div>

<span class="c1">#class StaticArrayNode(RealTableArray):</span>
    <span class="c1">#def __init__(self, data_code, is_sort1, isubcase, dt):</span>
        <span class="c1">#RealTableArray.__init__(self, data_code, is_sort1, isubcase, dt)</span>
    <span class="c1">#@property</span>
    <span class="c1">#def node_ids(self):</span>
        <span class="c1">#return self.node_gridtype[:, 0]</span>


<span class="c1">#class StaticArrayElement(RealTableArray):</span>
    <span class="c1">#def __init__(self, data_code, is_sort1, isubcase, dt):</span>
        <span class="c1">#RealTableArray.__init__(self, data_code, is_sort1, isubcase, dt)</span>
    <span class="c1">#@property</span>
    <span class="c1">#def element_ids(self):</span>
        <span class="c1">#return self.node_gridtype[:, 0]</span>


<span class="c1">#class TimeArrayNodeSort1(RealTableArray):</span>
    <span class="c1">#def __init__(self, data_code, is_sort1, isubcase, dt):</span>
        <span class="c1">#RealTableArray.__init__(self, data_code, is_sort1, isubcase, dt)</span>
    <span class="c1">#@property</span>
    <span class="c1">#def times(self):</span>
        <span class="c1">#return self._times</span>
    <span class="c1">#@property</span>
    <span class="c1">#def node_ids(self):</span>
        <span class="c1">#return self.node_gridtype[:, 0]</span>


<span class="c1">#class TimeArrayElementSort1(RealTableArray):</span>
    <span class="c1">#def __init__(self, data_code, is_sort1, isubcase, dt):</span>
        <span class="c1">#RealTableArray.__init__(self, data_code, is_sort1, isubcase, dt)</span>
    <span class="c1">#@property</span>
    <span class="c1">#def times(self):</span>
        <span class="c1">#return self._times</span>
    <span class="c1">#@property</span>
    <span class="c1">#def element_ids(self):</span>
        <span class="c1">#return self.node_gridtype[:, 0]</span>


<span class="c1">#class TimeArrayNodeSort2(RealTableArray):</span>
    <span class="c1">#def __init__(self, data_code, is_sort1, isubcase, dt):</span>
        <span class="c1">#RealTableArray.__init__(self, data_code, is_sort1, isubcase, dt)</span>
    <span class="c1">#@property</span>
    <span class="c1">#def times(self):</span>
        <span class="c1">#return self._times</span>
    <span class="c1">#@property</span>
    <span class="c1">#def node_ids(self):</span>
        <span class="c1">#return self.node_gridtype[:, 0]</span>


<span class="c1">#class TimeArrayElementSort2(RealTableArray):</span>
    <span class="c1">#def __init__(self, data_code, is_sort1, isubcase, dt):</span>
        <span class="c1">#RealTableArray.__init__(self, data_code, is_sort1, isubcase, dt)</span>
    <span class="c1">#@property</span>
    <span class="c1">#def times(self):</span>
        <span class="c1">#return self._times</span>
    <span class="c1">#@property</span>
    <span class="c1">#def element_ids(self):</span>
        <span class="c1">#return self.node_gridtype[:, 0]</span>


<span class="c1">#class FrequencyArrayNodeSort2(ComplexTableArray):</span>
    <span class="c1">#def __init__(self, data_code, is_sort1, isubcase, dt):</span>
        <span class="c1">#ComplexTableArray.__init__(self, data_code, is_sort1, isubcase, dt)</span>
    <span class="c1">#@property</span>
    <span class="c1">#def frequencies(self):</span>
        <span class="c1">#return self._times</span>
    <span class="c1">#@property</span>
    <span class="c1">#def node_ids(self):</span>
        <span class="c1">#return self.node_gridtype[:, 0]</span>


<span class="c1">#class FrequencyArrayElementSort2(ComplexTableArray):</span>
    <span class="c1">#def __init__(self, data_code, is_sort1, isubcase, dt):</span>
        <span class="c1">#ComplexTableArray.__init__(self, data_code, is_sort1, isubcase, dt)</span>
    <span class="c1">#@property</span>
    <span class="c1">#def frequencies(self):</span>
        <span class="c1">#return self._times</span>
    <span class="c1">#@property</span>
    <span class="c1">#def node_ids(self):</span>
        <span class="c1">#return self.node_gridtype[:, 0]</span>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Steven Doyle.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>