

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>pyNastran.op2.tables.oef_forces.oef_complex_force_objects &mdash; pyNastran 1.4-dev 1.4-dev documentation</title>
  

  
  <link rel="stylesheet" href="../../../../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../index.html" class="icon icon-home"> pyNastran 1.4-dev
          

          
            
            <img src="../../../../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.4-dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../quick_start/index.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../how_to/index.html">How To: pyNastran</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../reference/pyNastran.html">pyNastran Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../manual/index.html">pyNastran Manual</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">pyNastran 1.4-dev</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../../index.html">Module code</a> &raquo;</li>
        
      <li>pyNastran.op2.tables.oef_forces.oef_complex_force_objects</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pyNastran.op2.tables.oef_forces.oef_complex_force_objects</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">cycle</span>
<span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">abstractmethod</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">zeros</span><span class="p">,</span> <span class="n">searchsorted</span><span class="p">,</span> <span class="n">allclose</span>

<span class="kn">from</span> <span class="nn">pyNastran.utils.numpy_utils</span> <span class="kn">import</span> <span class="n">integer_types</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.result_objects.op2_objects</span> <span class="kn">import</span> <span class="n">BaseElement</span><span class="p">,</span> <span class="n">get_complex_times_dtype</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oef_forces.oef_force_objects</span> <span class="kn">import</span> <span class="n">ForceObject</span>
<span class="kn">from</span> <span class="nn">pyNastran.f06.f06_formatting</span> <span class="kn">import</span> <span class="n">write_imag_floats_13e</span><span class="p">,</span> <span class="n">write_float_12e</span> <span class="c1"># get_key0,</span>
<span class="kn">from</span> <span class="nn">pyNastran.f06.f06_formatting</span> <span class="kn">import</span> <span class="n">_eigenvalue_header</span>


<div class="viewcode-block" id="ComplexForceObject"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexForceObject">[docs]</a><span class="k">class</span> <span class="nc">ComplexForceObject</span><span class="p">(</span><span class="n">ForceObject</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">apply_data_code</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">ForceObject</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">apply_data_code</span><span class="o">=</span><span class="n">apply_data_code</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_real</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_complex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nnodes_per_element</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">1</span></div>


<div class="viewcode-block" id="ComplexRodForceArray"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexRodForceArray">[docs]</a><span class="k">class</span> <span class="nc">ComplexRodForceArray</span><span class="p">(</span><span class="n">ComplexForceObject</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">ComplexForceObject</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">)</span>
        <span class="c1">#self.code = [self.format_code, self.sort_code, self.s_code]</span>

        <span class="c1">#self.ntimes = 0  # or frequency/mode</span>
        <span class="c1">#self.ntotal = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># result specific</span>

        <span class="k">if</span> <span class="n">is_sort1</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;SORT2&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="ComplexRodForceArray.get_headers"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexRodForceArray.get_headers">[docs]</a>    <span class="k">def</span> <span class="nf">get_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;axial_force&#39;</span><span class="p">,</span> <span class="s1">&#39;torque&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">headers</span></div>

    <span class="c1">#def get_headers(self):</span>
        <span class="c1">#headers = [&#39;axial&#39;, &#39;torque&#39;]</span>
        <span class="c1">#return headers</span>

<div class="viewcode-block" id="ComplexRodForceArray.build"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexRodForceArray.build">[docs]</a>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;sizes the vectorized attributes of the ComplexRodForceArray&quot;&quot;&quot;</span>
        <span class="c1">#print(&#39;ntimes=%s nelements=%s ntotal=%s&#39; % (self.ntimes, self.nelements, self.ntotal))</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ntimes=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;nelements=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ntotal=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span>
        <span class="c1">#self.names = []</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">//=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itime</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#self.ntimes = 0</span>
        <span class="c1">#self.nelements = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1">#print(&quot;ntimes=%s nelements=%s ntotal=%s&quot; % (self.ntimes, self.nelements, self.ntotal))</span>
        <span class="n">dtype</span><span class="p">,</span> <span class="n">idtype</span><span class="p">,</span> <span class="n">cfdtype</span> <span class="o">=</span> <span class="n">get_complex_times_dtype</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nelements</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">idtype</span><span class="p">)</span>

        <span class="c1">#[axial_force, torque]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">cfdtype</span><span class="p">)</span></div>

<div class="viewcode-block" id="ComplexRodForceArray.build_dataframe"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexRodForceArray.build_dataframe">[docs]</a>    <span class="k">def</span> <span class="nf">build_dataframe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;creates a pandas dataframe&quot;&quot;&quot;</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">()</span>
        <span class="n">column_names</span><span class="p">,</span> <span class="n">column_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_dataframe_transient_header</span><span class="p">()</span>
        <span class="n">data_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_pandas_transient_elements</span><span class="p">(</span><span class="n">column_values</span><span class="p">,</span> <span class="n">column_names</span><span class="p">,</span>
                                                           <span class="n">headers</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="c1">#data_frame = pd.Panel(self.data, items=column_values,</span>
                              <span class="c1">#major_axis=self.element, minor_axis=headers).to_frame()</span>
        <span class="c1">#data_frame.columns.names = column_names</span>
        <span class="c1">#data_frame.index.names = [&#39;ElementID&#39;, &#39;Item&#39;]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_frame</span> <span class="o">=</span> <span class="n">data_frame</span></div>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_eq_header</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span> <span class="o">==</span> <span class="n">table</span><span class="o">.</span><span class="n">is_sort1</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;table_name=</span><span class="si">%r</span><span class="s1"> class_name=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">ie</span><span class="p">,</span> <span class="n">eid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">):</span>
                    <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">ie</span><span class="p">,</span> <span class="p">:]</span>
                    <span class="n">t2</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">ie</span><span class="p">,</span> <span class="p">:]</span>
                    <span class="p">(</span><span class="n">axial1</span><span class="p">,</span> <span class="n">torque1</span><span class="p">)</span> <span class="o">=</span> <span class="n">t1</span>
                    <span class="p">(</span><span class="n">axial2</span><span class="p">,</span> <span class="n">torque2</span><span class="p">)</span> <span class="o">=</span> <span class="n">t2</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="n">allclose</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">):</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;(</span><span class="si">%s</span><span class="s1">)    (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)  (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">eid</span><span class="p">,</span>
                            <span class="n">axial1</span><span class="p">,</span> <span class="n">torque1</span><span class="p">,</span>
                            <span class="n">axial2</span><span class="p">,</span> <span class="n">torque2</span><span class="p">)</span>
                        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="c1">#print(msg)</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">add_sort1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">axial</span><span class="p">,</span> <span class="n">torque</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;unvectorized method for adding SORT1 transient data&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span> <span class="ow">and</span> <span class="n">eid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;dt=</span><span class="si">%s</span><span class="s1"> eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ielement</span><span class="p">]</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">axial</span><span class="p">,</span> <span class="n">torque</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">+=</span> <span class="mi">1</span>

<div class="viewcode-block" id="ComplexRodForceArray.get_stats"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexRodForceArray.get_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">short</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="s1">&#39;&lt;</span><span class="si">%s</span><span class="s1">&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                <span class="s1">&#39;  ntimes: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span>
                <span class="s1">&#39;  ntotal: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span>
            <span class="p">]</span>

        <span class="n">nelements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="c1">#ntotal = self.ntotal</span>

        <span class="n">msg</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">):</span>  <span class="c1"># transient</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> ntimes=</span><span class="si">%i</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="s1">; table_name=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">))</span>
            <span class="n">ntimes_word</span> <span class="o">=</span> <span class="s1">&#39;ntimes&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="s1">; table_name=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">))</span>
            <span class="n">ntimes_word</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  eType</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data: [</span><span class="si">%s</span><span class="s1">, nnodes, </span><span class="si">%i</span><span class="s1">] where </span><span class="si">%i</span><span class="s1">=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">ntimes_word</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">headers</span><span class="p">))))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data.shape = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
        <span class="c1">#msg.append(&#39;  element type: %s\n&#39; % self.element_type)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  element name: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_code</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="ComplexRodForceArray.get_f06_header"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexRodForceArray.get_f06_header">[docs]</a>    <span class="k">def</span> <span class="nf">get_f06_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="c1"># CROD</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                             C O M P L E X   F O R C E S   I N   R O D   E L E M E N T S   ( C R O D )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span> <span class="c1"># CONROD</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                           C O M P L E X   F O R C E S   I N   R O D   E L E M E N T S   ( C O N R O D )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span> <span class="c1"># CTUBE</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                            C O M P L E X   F O R C E S   I N   R O D   E L E M E N T S   ( C T U B E )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
            <span class="c1">#pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;element_name=</span><span class="si">%s</span><span class="s1"> element_type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">is_mag_phase</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;                                                          (MAGNITUDE/PHASE)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;                                                          (REAL/IMAGINARY)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">is_sort1</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="p">[</span>
                <span class="s1">&#39; </span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="s1">&#39;                 ELEMENT                             AXIAL                                       TORSIONAL</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="s1">&#39;                   ID.                              STRAIN                                         STRAIN</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="p">]</span>
            <span class="c1">#&#39;                      14                  0.0          /  0.0                           0.0          /  0.0&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;sort2&#39;</span><span class="p">)</span>


        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="ComplexRodForceArray.get_element_index"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexRodForceArray.get_element_index">[docs]</a>    <span class="k">def</span> <span class="nf">get_element_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eids</span><span class="p">):</span>
        <span class="c1"># elements are always sorted; nodes are not</span>
        <span class="n">itot</span> <span class="o">=</span> <span class="n">searchsorted</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">)</span>  <span class="c1">#[0]</span>
        <span class="k">return</span> <span class="n">itot</span></div>

<div class="viewcode-block" id="ComplexRodForceArray.eid_to_element_node_index"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexRodForceArray.eid_to_element_node_index">[docs]</a>    <span class="k">def</span> <span class="nf">eid_to_element_node_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eids</span><span class="p">):</span>
        <span class="c1">#ind = ravel([searchsorted(self.element == eid) for eid in eids])</span>
        <span class="n">ind</span> <span class="o">=</span> <span class="n">searchsorted</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">)</span>
        <span class="c1">#ind = ind.reshape(ind.size)</span>
        <span class="c1">#ind.sort()</span>
        <span class="k">return</span> <span class="n">ind</span></div>

<div class="viewcode-block" id="ComplexRodForceArray.write_f06"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexRodForceArray.write_f06">[docs]</a>    <span class="k">def</span> <span class="nf">write_f06</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f06_file</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">page_stamp</span><span class="o">=</span><span class="s1">&#39;PAGE </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">page_num</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">header</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="p">(</span><span class="n">elem_name</span><span class="p">,</span> <span class="n">msg_temp</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_f06_header</span><span class="p">(</span><span class="n">is_mag_phase</span><span class="o">=</span><span class="n">is_mag_phase</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="n">is_sort1</span><span class="p">)</span>

        <span class="c1"># write the f06</span>
        <span class="c1">#(ntimes, ntotal, two) = self.data.shape</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">eids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span>
        <span class="c1">#is_odd = False</span>
        <span class="c1">#nwrite = len(eids)</span>
        <span class="c1">#if len(eids) % 2 == 1:</span>
            <span class="c1">#nwrite -= 1</span>
            <span class="c1">#is_odd = True</span>

        <span class="c1">#print(&#39;len(eids)=%s nwrite=%s is_odd=%s&#39; % (len(eids), nwrite, is_odd))</span>
        <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ntimes</span><span class="p">):</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>  <span class="c1"># TODO: rename this...</span>
            <span class="n">header</span> <span class="o">=</span> <span class="n">_eigenvalue_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">itime</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">header</span> <span class="o">+</span> <span class="n">msg_temp</span><span class="p">))</span>

            <span class="c1">#print(&quot;self.data.shape=%s itime=%s ieids=%s&quot; % (str(self.data.shape), itime, str(ieids)))</span>
            <span class="n">axial</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">torsion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">eid</span><span class="p">,</span> <span class="n">axiali</span><span class="p">,</span> <span class="n">torsioni</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="n">axial</span><span class="p">,</span> <span class="n">torsion</span><span class="p">):</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">write_imag_floats_13e</span><span class="p">([</span><span class="n">axiali</span><span class="p">,</span> <span class="n">torsioni</span><span class="p">],</span> <span class="n">is_mag_phase</span><span class="p">)</span>
                <span class="p">[</span><span class="n">raxial</span><span class="p">,</span> <span class="n">rtorsion</span><span class="p">,</span> <span class="n">iaxial</span><span class="p">,</span> <span class="n">itorsion</span><span class="p">]</span> <span class="o">=</span> <span class="n">out</span>
                <span class="c1">#ELEMENT                             AXIAL                                       TORSIONAL</span>
                    <span class="c1">#ID.                              STRESS                                         STRESS</span>
                    <span class="c1">#14                  0.0          /  0.0                           0.0          /  0.0</span>

                <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;      </span><span class="si">%8i</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1"> / </span><span class="si">%-13s</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1"> / </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">raxial</span><span class="p">,</span> <span class="n">iaxial</span><span class="p">,</span> <span class="n">rtorsion</span><span class="p">,</span> <span class="n">itorsion</span><span class="p">))</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">page_stamp</span> <span class="o">%</span> <span class="n">page_num</span><span class="p">)</span>
            <span class="n">page_num</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">page_num</span> <span class="o">-</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="ComplexRodForceArray.write_op2"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexRodForceArray.write_op2">[docs]</a>    <span class="k">def</span> <span class="nf">write_op2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op2</span><span class="p">,</span> <span class="n">op2_ascii</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="n">new_result</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span>
                  <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">endian</span><span class="o">=</span><span class="s1">&#39;&gt;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;writes an OP2&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">inspect</span>
        <span class="kn">from</span> <span class="nn">struct</span> <span class="kn">import</span> <span class="n">Struct</span><span class="p">,</span> <span class="n">pack</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
        <span class="n">call_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getouterframes</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.write_op2: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">call_frame</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]))</span>

        <span class="k">if</span> <span class="n">itable</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_table_header</span><span class="p">(</span><span class="n">op2</span><span class="p">,</span> <span class="n">op2_ascii</span><span class="p">,</span> <span class="n">date</span><span class="p">)</span>
            <span class="n">itable</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span>

        <span class="c1">#eids = self.element</span>

        <span class="c1"># table 4 info</span>
        <span class="c1">#ntimes = self.data.shape[0]</span>
        <span class="c1">#nnodes = self.data.shape[1]</span>
        <span class="n">nelements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># 21 = 1 node, 3 principal, 6 components, 9 vectors, 2 p/ovm</span>
        <span class="c1">#ntotal = ((nnodes * 21) + 1) + (nelements * 4)</span>

        <span class="n">ntotali</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="n">ntotali</span> <span class="o">*</span> <span class="n">nelements</span>

        <span class="c1">#device_code = self.device_code</span>
        <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  ntimes = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">)</span>

        <span class="n">eids_device</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">device_code</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">:</span>
            <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i4f&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;SORT2&#39;</span><span class="p">)</span>

        <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;nelements=</span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nelements</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_table_3</span><span class="p">(</span><span class="n">op2</span><span class="p">,</span> <span class="n">op2_ascii</span><span class="p">,</span> <span class="n">new_result</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="n">itime</span><span class="p">)</span>

            <span class="c1"># record 4</span>
            <span class="n">itable</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">]</span>
            <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%i</span><span class="s1">i&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">header</span><span class="p">),</span> <span class="o">*</span><span class="n">header</span><span class="p">))</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, 0, 4]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, </span><span class="si">%s</span><span class="s1">, 4]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">itable</span><span class="p">))</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, </span><span class="si">%i</span><span class="s1">, 4]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">))</span>

            <span class="n">axial</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">torsion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">eid_device</span><span class="p">,</span> <span class="n">axiali</span><span class="p">,</span> <span class="n">torsioni</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">eids_device</span><span class="p">,</span> <span class="n">axial</span><span class="p">,</span> <span class="n">torsion</span><span class="p">):</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">axiali</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">torsioni</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">axiali</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">torsioni</span><span class="o">.</span><span class="n">imag</span><span class="p">]</span>
                <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid_device=</span><span class="si">%s</span><span class="s1"> data=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">data</span><span class="p">)))</span>
                <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">struct1</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">))</span>

            <span class="n">itable</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,]</span>
            <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">header</span><span class="p">))</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;footer = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">header</span><span class="p">)</span>
            <span class="n">new_result</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">itable</span></div></div>


<div class="viewcode-block" id="ComplexCShearForceArray"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCShearForceArray">[docs]</a><span class="k">class</span> <span class="nc">ComplexCShearForceArray</span><span class="p">(</span><span class="n">BaseElement</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">BaseElement</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">)</span>
        <span class="c1">#self.code = [self.format_code, self.sort_code, self.s_code]</span>

        <span class="c1">#self.ntimes = 0  # or frequency/mode</span>
        <span class="c1">#self.ntotal = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># result specific</span>

        <span class="c1">#if is_sort1:</span>
            <span class="c1">#pass</span>
        <span class="c1">#else:</span>
            <span class="c1">#raise NotImplementedError(&#39;SORT2&#39;)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_real</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_complex</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nnodes_per_element</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">_reset_indices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="ComplexCShearForceArray.get_headers"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCShearForceArray.get_headers">[docs]</a>    <span class="k">def</span> <span class="nf">get_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;force41&#39;</span><span class="p">,</span> <span class="s1">&#39;force14&#39;</span><span class="p">,</span> <span class="s1">&#39;force21&#39;</span><span class="p">,</span> <span class="s1">&#39;force12&#39;</span><span class="p">,</span> <span class="s1">&#39;force32&#39;</span><span class="p">,</span> <span class="s1">&#39;force23&#39;</span><span class="p">,</span>
            <span class="s1">&#39;force43&#39;</span><span class="p">,</span> <span class="s1">&#39;force34&#39;</span><span class="p">,</span> <span class="s1">&#39;kickForce1&#39;</span><span class="p">,</span> <span class="s1">&#39;kickForce2&#39;</span><span class="p">,</span> <span class="s1">&#39;kickForce3&#39;</span><span class="p">,</span>
            <span class="s1">&#39;kickForce4&#39;</span><span class="p">,</span> <span class="s1">&#39;shear12&#39;</span><span class="p">,</span> <span class="s1">&#39;shear23&#39;</span><span class="p">,</span> <span class="s1">&#39;shear34&#39;</span><span class="p">,</span> <span class="s1">&#39;shear41&#39;</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">headers</span></div>

    <span class="c1">#def get_headers(self):</span>
        <span class="c1">#headers = [&#39;axial&#39;, &#39;torque&#39;]</span>
        <span class="c1">#return headers</span>

<div class="viewcode-block" id="ComplexCShearForceArray.build"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCShearForceArray.build">[docs]</a>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;sizes the vectorized attributes of the ComplexCShearForceArray&quot;&quot;&quot;</span>
        <span class="c1">#print(&#39;ntimes=%s nelements=%s ntotal=%s&#39; % (self.ntimes, self.nelements, self.ntotal))</span>

        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ntimes=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;nelements=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ntotal=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span>
        <span class="c1">#self.names = []</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">//=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itime</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#self.ntimes = 0</span>
        <span class="c1">#self.nelements = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1">#print(&quot;ntimes=%s nelements=%s ntotal=%s&quot; % (self.ntimes, self.nelements, self.ntotal))</span>
        <span class="n">dtype</span><span class="p">,</span> <span class="n">idtype</span><span class="p">,</span> <span class="n">cfdtype</span> <span class="o">=</span> <span class="n">get_complex_times_dtype</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nelements</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">idtype</span><span class="p">)</span>

        <span class="c1">#[force41, force14, force21, force12, force32, force23, force43, force34,</span>
        <span class="c1">#kick_force1, kick_force2, kick_force3, kick_force4,</span>
        <span class="c1">#shear12, shear23, shear34, shear41]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">cfdtype</span><span class="p">)</span></div>

<div class="viewcode-block" id="ComplexCShearForceArray.build_dataframe"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCShearForceArray.build_dataframe">[docs]</a>    <span class="k">def</span> <span class="nf">build_dataframe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;creates a pandas dataframe&quot;&quot;&quot;</span>
        <span class="c1">#Mode                                           1                   2</span>
        <span class="c1">#EigenvalueReal                              -0.0                -0.0</span>
        <span class="c1">#EigenvalueImag                              -0.0                -0.0</span>
        <span class="c1">#Damping                                      0.0                 0.0</span>
        <span class="c1">#ElementID Item</span>
        <span class="c1">#22        force41     2.927977e-10+0.000000e+00j  0.000000+0.000000j</span>
        <span class="c1">#          force14     2.927977e-10+5.855954e-10j  0.000000+0.000000j</span>
        <span class="c1">#          force21    -2.927977e-10+0.000000e+00j  0.000000+0.000000j</span>
        <span class="c1">#          force12    -2.927977e-10+5.855954e-10j  0.000000+0.000000j</span>
        <span class="c1">#          force32     2.927977e-10+0.000000e+00j  0.000000+0.000000j</span>
        <span class="c1">#          force23     2.927977e-10+5.855954e-10j  0.000000+0.000000j</span>
        <span class="c1">#          force43    -2.927977e-10+0.000000e+00j  0.000000+0.000000j</span>
        <span class="c1">#          force34    -2.927977e-10+5.855954e-10j  0.000000+0.000000j</span>
        <span class="c1">#          kickForce1  0.000000e+00+0.000000e+00j  0.000000+0.000000j</span>
        <span class="c1">#          kickForce2  0.000000e+00+0.000000e+00j  0.000000+0.000000j</span>
        <span class="c1">#          kickForce3  0.000000e+00+0.000000e+00j  0.000000+0.000000j</span>
        <span class="c1">#          kickForce4  0.000000e+00+0.000000e+00j  0.000000+0.000000j</span>
        <span class="c1">#          shear12     0.000000e+00+0.000000e+00j  0.000000+0.000000j</span>
        <span class="c1">#          shear23     0.000000e+00+0.000000e+00j  0.000000+0.000000j</span>
        <span class="c1">#          shear34     0.000000e+00+0.000000e+00j  0.000000+0.000000j</span>
        <span class="c1">#          shear41     0.000000e+00+0.000000e+00j  0.000000+0.000000j</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">()</span>
        <span class="n">column_names</span><span class="p">,</span> <span class="n">column_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_dataframe_transient_header</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_pandas_transient_elements</span><span class="p">(</span>
            <span class="n">column_values</span><span class="p">,</span> <span class="n">column_names</span><span class="p">,</span>
            <span class="n">headers</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_eq_header</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span> <span class="o">==</span> <span class="n">table</span><span class="o">.</span><span class="n">is_sort1</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;table_name=</span><span class="si">%r</span><span class="s1"> class_name=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">ie</span><span class="p">,</span> <span class="n">eid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">):</span>
                    <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">ie</span><span class="p">,</span> <span class="p">:]</span>
                    <span class="n">t2</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">ie</span><span class="p">,</span> <span class="p">:]</span>
                    <span class="p">(</span><span class="n">force41a</span><span class="p">,</span> <span class="n">force14a</span><span class="p">,</span> <span class="n">force21a</span><span class="p">,</span> <span class="n">force12a</span><span class="p">,</span> <span class="n">force32a</span><span class="p">,</span> <span class="n">force23a</span><span class="p">,</span> <span class="n">force43a</span><span class="p">,</span> <span class="n">force34a</span><span class="p">,</span>
                     <span class="n">kick_force1a</span><span class="p">,</span> <span class="n">kick_force2a</span><span class="p">,</span> <span class="n">kick_force3a</span><span class="p">,</span> <span class="n">kick_force4a</span><span class="p">,</span>
                     <span class="n">shear12a</span><span class="p">,</span> <span class="n">shear23a</span><span class="p">,</span> <span class="n">shear34a</span><span class="p">,</span> <span class="n">shear41a</span><span class="p">)</span> <span class="o">=</span> <span class="n">t1</span>

                    <span class="p">(</span><span class="n">force41b</span><span class="p">,</span> <span class="n">force14b</span><span class="p">,</span> <span class="n">force21b</span><span class="p">,</span> <span class="n">force12b</span><span class="p">,</span> <span class="n">force32b</span><span class="p">,</span> <span class="n">force23b</span><span class="p">,</span> <span class="n">force43b</span><span class="p">,</span> <span class="n">force34b</span><span class="p">,</span>
                     <span class="n">kick_force1b</span><span class="p">,</span> <span class="n">kick_force2b</span><span class="p">,</span> <span class="n">kick_force3b</span><span class="p">,</span> <span class="n">kick_force4b</span><span class="p">,</span>
                     <span class="n">shear12b</span><span class="p">,</span> <span class="n">shear23b</span><span class="p">,</span> <span class="n">shear34b</span><span class="p">,</span> <span class="n">shear41b</span><span class="p">)</span> <span class="o">=</span> <span class="n">t2</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="n">allclose</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">):</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="p">(</span>
                            <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">   (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span>
                            <span class="s1">&#39;     (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                <span class="n">eid</span><span class="p">,</span>
                                <span class="n">force41a</span><span class="p">,</span> <span class="n">force14a</span><span class="p">,</span> <span class="n">force21a</span><span class="p">,</span> <span class="n">force12a</span><span class="p">,</span> <span class="n">force32a</span><span class="p">,</span> <span class="n">force23a</span><span class="p">,</span>
                                <span class="n">force43a</span><span class="p">,</span> <span class="n">force34a</span><span class="p">,</span> <span class="n">kick_force1a</span><span class="p">,</span> <span class="n">kick_force2a</span><span class="p">,</span> <span class="n">kick_force3a</span><span class="p">,</span>
                                <span class="n">kick_force4a</span><span class="p">,</span> <span class="n">shear12a</span><span class="p">,</span> <span class="n">shear23a</span><span class="p">,</span> <span class="n">shear34a</span><span class="p">,</span> <span class="n">shear41a</span><span class="p">,</span>

                                <span class="n">force41b</span><span class="p">,</span> <span class="n">force14b</span><span class="p">,</span> <span class="n">force21b</span><span class="p">,</span> <span class="n">force12b</span><span class="p">,</span> <span class="n">force32b</span><span class="p">,</span> <span class="n">force23b</span><span class="p">,</span>
                                <span class="n">force43b</span><span class="p">,</span> <span class="n">force34b</span><span class="p">,</span> <span class="n">kick_force1b</span><span class="p">,</span> <span class="n">kick_force2b</span><span class="p">,</span> <span class="n">kick_force3b</span><span class="p">,</span>
                                <span class="n">kick_force4b</span><span class="p">,</span> <span class="n">shear12b</span><span class="p">,</span> <span class="n">shear23b</span><span class="p">,</span> <span class="n">shear34b</span><span class="p">,</span> <span class="n">shear41b</span>
                            <span class="p">))</span>
                        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="c1">#print(msg)</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">add_sort1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span>
                  <span class="n">force41</span><span class="p">,</span> <span class="n">force14</span><span class="p">,</span> <span class="n">force21</span><span class="p">,</span> <span class="n">force12</span><span class="p">,</span> <span class="n">force32</span><span class="p">,</span> <span class="n">force23</span><span class="p">,</span> <span class="n">force43</span><span class="p">,</span> <span class="n">force34</span><span class="p">,</span>
                  <span class="n">kick_force1</span><span class="p">,</span> <span class="n">kick_force2</span><span class="p">,</span> <span class="n">kick_force3</span><span class="p">,</span> <span class="n">kick_force4</span><span class="p">,</span>
                  <span class="n">shear12</span><span class="p">,</span> <span class="n">shear23</span><span class="p">,</span> <span class="n">shear34</span><span class="p">,</span> <span class="n">shear41</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;unvectorized method for adding SORT1 transient data&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span> <span class="ow">and</span> <span class="n">eid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;dt=</span><span class="si">%s</span><span class="s1"> eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ielement</span><span class="p">]</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">force41</span><span class="p">,</span> <span class="n">force14</span><span class="p">,</span> <span class="n">force21</span><span class="p">,</span> <span class="n">force12</span><span class="p">,</span> <span class="n">force32</span><span class="p">,</span> <span class="n">force23</span><span class="p">,</span> <span class="n">force43</span><span class="p">,</span> <span class="n">force34</span><span class="p">,</span>
            <span class="n">kick_force1</span><span class="p">,</span> <span class="n">kick_force2</span><span class="p">,</span> <span class="n">kick_force3</span><span class="p">,</span> <span class="n">kick_force4</span><span class="p">,</span>
            <span class="n">shear12</span><span class="p">,</span> <span class="n">shear23</span><span class="p">,</span> <span class="n">shear34</span><span class="p">,</span> <span class="n">shear41</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">+=</span> <span class="mi">1</span>

<div class="viewcode-block" id="ComplexCShearForceArray.get_stats"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCShearForceArray.get_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">short</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="s1">&#39;&lt;</span><span class="si">%s</span><span class="s1">&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                <span class="s1">&#39;  ntimes: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span>
                <span class="s1">&#39;  ntotal: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span>
            <span class="p">]</span>

        <span class="n">nelements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="c1">#ntotal = self.ntotal</span>

        <span class="n">msg</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">):</span>  <span class="c1"># transient</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> ntimes=</span><span class="si">%i</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="s1">; table_name=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">))</span>
            <span class="n">ntimes_word</span> <span class="o">=</span> <span class="s1">&#39;ntimes&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="s1">; table_name=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">))</span>
            <span class="n">ntimes_word</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  eType</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data: [</span><span class="si">%s</span><span class="s1">, nnodes, </span><span class="si">%i</span><span class="s1">] where </span><span class="si">%i</span><span class="s1">=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">ntimes_word</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">headers</span><span class="p">))))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data.shape = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
        <span class="c1">#msg.append(&#39;  element type: %s\n&#39; % self.element_type)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  element name: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_code</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="ComplexCShearForceArray.get_f06_header"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCShearForceArray.get_f06_header">[docs]</a>    <span class="k">def</span> <span class="nf">get_f06_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                C O M P L E X   F O R C E S   A C T I N G   O N   S H E A R   P A N E L   E L E M E N T S   (CSHEAR)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">is_mag_phase</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;                                                          (MAGNITUDE/PHASE)</span><span class="se">\n</span><span class="s1"> </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;                                                          (REAL/IMAGINARY)</span><span class="se">\n</span><span class="s1"> </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">is_sort1</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="p">[</span>
                <span class="s1">&#39;                  ====== POINT  1 ======      ====== POINT  2 ======      ====== POINT  3 ======      ====== POINT  4 ======</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="s1">&#39; ELEMENT          F-FROM-4      F-FROM-2      F-FROM-1      F-FROM-3      F-FROM-2      F-FROM-4      F-FROM-3      F-FROM-1</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="s1">&#39;         ID               KICK-1       SHEAR-12       KICK-2       SHEAR-23       KICK-3       SHEAR-34       KICK-4       SHEAR-41</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;sort2&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="ComplexCShearForceArray.write_f06"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCShearForceArray.write_f06">[docs]</a>    <span class="k">def</span> <span class="nf">write_f06</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f06_file</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">page_stamp</span><span class="o">=</span><span class="s1">&#39;PAGE </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span>
                  <span class="n">page_num</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">header</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">msg_temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_f06_header</span><span class="p">(</span><span class="n">is_mag_phase</span><span class="o">=</span><span class="n">is_mag_phase</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="n">is_sort1</span><span class="p">)</span>

        <span class="c1"># write the f06</span>
        <span class="c1">#(ntimes, ntotal, two) = self.data.shape</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">eids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span>
        <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ntimes</span><span class="p">):</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>  <span class="c1"># TODO: rename this...</span>
            <span class="n">header</span> <span class="o">=</span> <span class="n">_eigenvalue_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">itime</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">header</span> <span class="o">+</span> <span class="n">msg_temp</span><span class="p">))</span>

            <span class="c1">#print(&quot;self.data.shape=%s itime=%s ieids=%s&quot; % (str(self.data.shape), itime, str(ieids)))</span>

            <span class="c1">## TODO: I&#39;m sure this ordering is wrong...</span>
            <span class="n">force41</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">force14</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">force21</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]</span>  <span class="c1"># TODO: this is wrong...</span>
            <span class="n">force12</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">3</span><span class="p">]</span>
            <span class="n">force32</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">4</span><span class="p">]</span>
            <span class="n">force23</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">5</span><span class="p">]</span>
            <span class="n">force43</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">6</span><span class="p">]</span>
            <span class="n">force34</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">7</span><span class="p">]</span>
            <span class="n">kick_force1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">8</span><span class="p">]</span>
            <span class="n">kick_force2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">9</span><span class="p">]</span>
            <span class="n">kick_force3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">10</span><span class="p">]</span>
            <span class="n">kick_force4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">11</span><span class="p">]</span>
            <span class="n">shear12</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">12</span><span class="p">]</span>
            <span class="n">shear23</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">13</span><span class="p">]</span>
            <span class="n">shear34</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">14</span><span class="p">]</span>
            <span class="n">shear41</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">15</span><span class="p">]</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">force12</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">force12</span>

            <span class="k">for</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">iforce41</span><span class="p">,</span> <span class="n">force14i</span><span class="p">,</span> <span class="n">iforce21</span><span class="p">,</span> <span class="n">iforce12</span><span class="p">,</span> <span class="n">iforce32</span><span class="p">,</span> <span class="n">iforce23</span><span class="p">,</span> <span class="n">iforce43</span><span class="p">,</span> <span class="n">iforce34</span><span class="p">,</span>
                 <span class="n">ikick_force1</span><span class="p">,</span> <span class="n">ikick_force2</span><span class="p">,</span> <span class="n">ikick_force3</span><span class="p">,</span> <span class="n">ikick_force4</span><span class="p">,</span>
                 <span class="n">ishear12</span><span class="p">,</span> <span class="n">ishear23</span><span class="p">,</span> <span class="n">ishear34</span><span class="p">,</span> <span class="n">ishear41</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
                     <span class="n">eids</span><span class="p">,</span> <span class="n">force41</span><span class="p">,</span> <span class="n">force14</span><span class="p">,</span> <span class="n">force21</span><span class="p">,</span> <span class="n">force12</span><span class="p">,</span> <span class="n">force32</span><span class="p">,</span> <span class="n">force23</span><span class="p">,</span> <span class="n">force43</span><span class="p">,</span> <span class="n">force34</span><span class="p">,</span>
                     <span class="n">kick_force1</span><span class="p">,</span> <span class="n">kick_force2</span><span class="p">,</span> <span class="n">kick_force3</span><span class="p">,</span> <span class="n">kick_force4</span><span class="p">,</span>
                     <span class="n">shear12</span><span class="p">,</span> <span class="n">shear23</span><span class="p">,</span> <span class="n">shear34</span><span class="p">,</span> <span class="n">shear41</span><span class="p">):</span>

                <span class="n">vals2</span> <span class="o">=</span> <span class="n">write_imag_floats_13e</span><span class="p">([</span>
                    <span class="n">iforce41</span><span class="p">,</span> <span class="n">force14i</span><span class="p">,</span> <span class="n">iforce21</span><span class="p">,</span> <span class="n">iforce12</span><span class="p">,</span> <span class="n">iforce32</span><span class="p">,</span> <span class="n">iforce23</span><span class="p">,</span> <span class="n">iforce43</span><span class="p">,</span> <span class="n">iforce34</span><span class="p">,</span>
                    <span class="n">ikick_force1</span><span class="p">,</span> <span class="n">ikick_force2</span><span class="p">,</span> <span class="n">ikick_force3</span><span class="p">,</span> <span class="n">ikick_force4</span><span class="p">,</span>
                    <span class="n">ishear12</span><span class="p">,</span> <span class="n">ishear23</span><span class="p">,</span> <span class="n">ishear34</span><span class="p">,</span> <span class="n">ishear41</span><span class="p">],</span> <span class="n">is_mag_phase</span><span class="p">)</span>

                <span class="p">[</span>
                    <span class="n">force41r</span><span class="p">,</span> <span class="n">force14r</span><span class="p">,</span> <span class="n">force21i</span><span class="p">,</span> <span class="n">force12r</span><span class="p">,</span> <span class="n">force32r</span><span class="p">,</span> <span class="n">force23r</span><span class="p">,</span> <span class="n">force43r</span><span class="p">,</span> <span class="n">force34r</span><span class="p">,</span>
                    <span class="n">kick_force1r</span><span class="p">,</span> <span class="n">kick_force2r</span><span class="p">,</span> <span class="n">kick_force3r</span><span class="p">,</span> <span class="n">kick_force4r</span><span class="p">,</span>
                    <span class="n">shear12r</span><span class="p">,</span> <span class="n">shear23r</span><span class="p">,</span> <span class="n">shear34r</span><span class="p">,</span> <span class="n">shear41r</span><span class="p">,</span>

                    <span class="n">force41i</span><span class="p">,</span> <span class="n">force14i</span><span class="p">,</span> <span class="n">force21i</span><span class="p">,</span> <span class="n">force12i</span><span class="p">,</span> <span class="n">force32i</span><span class="p">,</span> <span class="n">force23i</span><span class="p">,</span> <span class="n">force43i</span><span class="p">,</span> <span class="n">force34i</span><span class="p">,</span>
                    <span class="n">kick_force1i</span><span class="p">,</span> <span class="n">kick_force2i</span><span class="p">,</span> <span class="n">kick_force3i</span><span class="p">,</span> <span class="n">kick_force4i</span><span class="p">,</span>
                    <span class="n">shear12i</span><span class="p">,</span> <span class="n">shear23i</span><span class="p">,</span> <span class="n">shear34i</span><span class="p">,</span> <span class="n">shear41i</span>
                <span class="p">]</span> <span class="o">=</span> <span class="n">vals2</span>

                <span class="c1">#complex_cshear_force_f06</span>
                <span class="c1">#&#39;                  ====== POINT  1 ======      ====== POINT  2 ======      ====== POINT  3 ======      ====== POINT  4 ======&#39;</span>
                <span class="c1">#&#39; ELEMENT          F-FROM-4      F-FROM-2      F-FROM-1      F-FROM-3      F-FROM-2      F-FROM-4      F-FROM-3      F-FROM-1&#39;</span>
                <span class="c1">#&#39;         ID               KICK-1       SHEAR-12       KICK-2       SHEAR-23       KICK-3       SHEAR-34       KICK-4       SHEAR-41&#39;</span>
                <span class="c1">#&#39;            25  0.0           0.0           0.0           0.0           0.0           0.0           0.0           0.0&#39;</span>
                <span class="c1">#&#39;                0.0           0.0           0.0           0.0           0.0           0.0           0.0           0.0&#39;</span>

                <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="s1">&#39;      </span><span class="si">%8i</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="s1">&#39;               </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="s1">&#39;                      </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="s1">&#39;                      </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">%</span> <span class="p">(</span>
                        <span class="n">eid</span><span class="p">,</span>
                        <span class="n">force41r</span><span class="p">,</span> <span class="n">force14r</span><span class="p">,</span> <span class="n">force21i</span><span class="p">,</span> <span class="n">force12r</span><span class="p">,</span> <span class="n">force32r</span><span class="p">,</span> <span class="n">force23r</span><span class="p">,</span> <span class="n">force43r</span><span class="p">,</span> <span class="n">force34r</span><span class="p">,</span>
                        <span class="n">kick_force1r</span><span class="p">,</span> <span class="n">kick_force2r</span><span class="p">,</span> <span class="n">kick_force3r</span><span class="p">,</span> <span class="n">kick_force4r</span><span class="p">,</span>
                        <span class="n">shear12r</span><span class="p">,</span> <span class="n">shear23r</span><span class="p">,</span> <span class="n">shear34r</span><span class="p">,</span> <span class="n">shear41r</span><span class="p">,</span>

                        <span class="n">force41i</span><span class="p">,</span> <span class="n">force14i</span><span class="p">,</span> <span class="n">force21i</span><span class="p">,</span> <span class="n">force12i</span><span class="p">,</span> <span class="n">force32i</span><span class="p">,</span> <span class="n">force23i</span><span class="p">,</span> <span class="n">force43i</span><span class="p">,</span> <span class="n">force34i</span><span class="p">,</span>
                        <span class="n">kick_force1i</span><span class="p">,</span> <span class="n">kick_force2i</span><span class="p">,</span> <span class="n">kick_force3i</span><span class="p">,</span> <span class="n">kick_force4i</span><span class="p">,</span>
                        <span class="n">shear12i</span><span class="p">,</span> <span class="n">shear23i</span><span class="p">,</span> <span class="n">shear34i</span><span class="p">,</span> <span class="n">shear41i</span>
                <span class="p">))</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">page_stamp</span> <span class="o">%</span> <span class="n">page_num</span><span class="p">)</span>
            <span class="n">page_num</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">page_num</span> <span class="o">-</span> <span class="mi">1</span></div></div>


<div class="viewcode-block" id="ComplexSpringDamperForceArray"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexSpringDamperForceArray">[docs]</a><span class="k">class</span> <span class="nc">ComplexSpringDamperForceArray</span><span class="p">(</span><span class="n">ComplexForceObject</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">ComplexForceObject</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">)</span>
        <span class="c1">#self.code = [self.format_code, self.sort_code, self.s_code]</span>

        <span class="c1">#self.ntimes = 0  # or frequency/mode</span>
        <span class="c1">#self.ntotal = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># result specific</span>

        <span class="c1">#if is_sort1:</span>
            <span class="c1">#pass</span>
        <span class="c1">#else:</span>
            <span class="c1">#raise NotImplementedError(&#39;SORT2&#39;)</span>

<div class="viewcode-block" id="ComplexSpringDamperForceArray.get_headers"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexSpringDamperForceArray.get_headers">[docs]</a>    <span class="k">def</span> <span class="nf">get_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;spring_force&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">headers</span></div>

    <span class="c1">#def get_headers(self):</span>
        <span class="c1">#headers = [&#39;axial&#39;, &#39;torque&#39;]</span>
        <span class="c1">#return headers</span>

<div class="viewcode-block" id="ComplexSpringDamperForceArray.build"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexSpringDamperForceArray.build">[docs]</a>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;sizes the vectorized attributes of the ComplexSpringDamperForceArray&quot;&quot;&quot;</span>
        <span class="c1">#print(&#39;ntimes=%s nelements=%s ntotal=%s&#39; % (self.ntimes, self.nelements, self.ntotal))</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ntimes=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;nelements=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ntotal=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span>
        <span class="c1">#self.names = []</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">//=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itime</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#self.ntimes = 0</span>
        <span class="c1">#self.nelements = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1">#print(&quot;ntimes=%s nelements=%s ntotal=%s&quot; % (self.ntimes, self.nelements, self.ntotal))</span>
        <span class="n">dtype</span><span class="p">,</span> <span class="n">idtype</span><span class="p">,</span> <span class="n">cfdtype</span> <span class="o">=</span> <span class="n">get_complex_times_dtype</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nelements</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">idtype</span><span class="p">)</span>

        <span class="c1">#[axial_force, torque]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">cfdtype</span><span class="p">)</span></div>

<div class="viewcode-block" id="ComplexSpringDamperForceArray.build_dataframe"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexSpringDamperForceArray.build_dataframe">[docs]</a>    <span class="k">def</span> <span class="nf">build_dataframe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;creates a pandas dataframe&quot;&quot;&quot;</span>
        <span class="c1">#Mode                                     1                   2</span>
        <span class="c1">#EigenvalueReal                        -0.0                -0.0</span>
        <span class="c1">#EigenvalueImag                        -0.0                -0.0</span>
        <span class="c1">#Damping                                0.0                 0.0</span>
        <span class="c1">#ElementID Item</span>
        <span class="c1">#30        spring_force  0.000000+0.000000j  0.000000+0.000000j</span>
        <span class="c1">#31        spring_force  0.000000+0.000000j  0.000000+0.000000j</span>
        <span class="c1">#32        spring_force  0.000000+0.000000j  0.000000+0.000000j</span>
        <span class="c1">#33        spring_force  0.000000+0.000000j  0.000000+0.000000j</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">()</span>
        <span class="n">column_names</span><span class="p">,</span> <span class="n">column_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_dataframe_transient_header</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_pandas_transient_elements</span><span class="p">(</span>
            <span class="n">column_values</span><span class="p">,</span> <span class="n">column_names</span><span class="p">,</span>
            <span class="n">headers</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_eq_header</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span> <span class="o">==</span> <span class="n">table</span><span class="o">.</span><span class="n">is_sort1</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;table_name=</span><span class="si">%r</span><span class="s1"> class_name=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">ie</span><span class="p">,</span> <span class="n">eid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">):</span>
                    <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">ie</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
                    <span class="n">t2</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">ie</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="n">allclose</span><span class="p">([</span><span class="n">t1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">t1</span><span class="o">.</span><span class="n">imag</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">t2</span><span class="o">.</span><span class="n">imag</span><span class="p">],</span> <span class="n">atol</span><span class="o">=</span><span class="mf">0.0001</span><span class="p">):</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">    (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)  (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">eid</span><span class="p">,</span>
                            <span class="n">t1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">t1</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                            <span class="n">t2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">t2</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span>
                        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="c1">#print(msg)</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">add_sort1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">force</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;unvectorized method for adding SORT1 transient data&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span> <span class="ow">and</span> <span class="n">eid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;dt=</span><span class="si">%s</span><span class="s1"> eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ielement</span><span class="p">]</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">force</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">+=</span> <span class="mi">1</span>

<div class="viewcode-block" id="ComplexSpringDamperForceArray.get_stats"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexSpringDamperForceArray.get_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">short</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="s1">&#39;&lt;</span><span class="si">%s</span><span class="s1">&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                <span class="s1">&#39;  ntimes: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span>
                <span class="s1">&#39;  ntotal: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span>
            <span class="p">]</span>

        <span class="n">nelements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="c1">#ntotal = self.ntotal</span>

        <span class="n">msg</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">):</span>  <span class="c1"># transient</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> ntimes=</span><span class="si">%i</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="s1">; table_name=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">))</span>
            <span class="n">ntimes_word</span> <span class="o">=</span> <span class="s1">&#39;ntimes&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="s1">; table_name=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">))</span>
            <span class="n">ntimes_word</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  eType</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data: [</span><span class="si">%s</span><span class="s1">, nelements, </span><span class="si">%i</span><span class="s1">] where </span><span class="si">%i</span><span class="s1">=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ntimes_word</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">headers</span><span class="p">))))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data.shape = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
        <span class="c1">#msg.append(&#39;  element type: %s\n&#39; % self.element_type)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  element name: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_code</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="ComplexSpringDamperForceArray.get_f06_header"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexSpringDamperForceArray.get_f06_header">[docs]</a>    <span class="k">def</span> <span class="nf">get_f06_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="c1"># 11-CELAS1, 12-CELAS2, 13-CELAS3, 14-CELAS4</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                         C O M P L E X   F O R C E S   I N   S C A L A R   S P R I N G S   ( C E L A S 1 )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">12</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                         C O M P L E X   F O R C E S   I N   S C A L A R   S P R I N G S   ( C E L A S 2 )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">13</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                         C O M P L E X   F O R C E S   I N   S C A L A R   S P R I N G S   ( C E L A S 3 )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">14</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                         C O M P L E X   F O R C E S   I N   S C A L A R   S P R I N G S   ( C E L A S 4 )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">20</span><span class="p">:</span> <span class="c1"># CDAMP1</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                         C O M P L E X   F O R C E S   I N   S C A L A R   D A M P E R S   ( C D A M P 1 )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">21</span><span class="p">:</span> <span class="c1"># CDAMP2</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                         C O M P L E X   F O R C E S   I N   S C A L A R   D A M P E R S   ( C D A M P 2 )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">22</span><span class="p">:</span> <span class="c1"># CDAMP3</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                         C O M P L E X   F O R C E S   I N   S C A L A R   D A M P E R S   ( C D A M P 3 )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">23</span><span class="p">:</span> <span class="c1"># CDAMP4</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                         C O M P L E X   F O R C E S   I N   S C A L A R   D A M P E R S   ( C D A M P 4 )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;element_name=</span><span class="si">%s</span><span class="s1"> element_type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">is_mag_phase</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;                                                          (MAGNITUDE/PHASE)</span><span class="se">\n</span><span class="s1"> </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;                                                          (REAL/IMAGINARY)</span><span class="se">\n</span><span class="s1"> </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">is_sort1</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="p">[</span>
                <span class="s1">&#39;                ELEMENT                                                   ELEMENT</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="s1">&#39;                  ID.                    FORCE                              ID.                    FORCE</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="p">]</span>
            <span class="c1">#&#39;                      14                  0.0          /  0.0                           0.0          /  0.0&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;            FREQUENCY                    FORCE                        FREQUENCY                    FORCE</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>


        <span class="k">return</span> <span class="n">msg</span></div>

    <span class="c1">#def get_element_index(self, eids):</span>
        <span class="c1">## elements are always sorted; nodes are not</span>
        <span class="c1">#itot = searchsorted(eids, self.element)  #[0]</span>
        <span class="c1">#return itot</span>

    <span class="c1">#def eid_to_element_node_index(self, eids):</span>
        <span class="c1">##ind = ravel([searchsorted(self.element == eid) for eid in eids])</span>
        <span class="c1">#ind = searchsorted(eids, self.element)</span>
        <span class="c1">##ind = ind.reshape(ind.size)</span>
        <span class="c1">##ind.sort()</span>
        <span class="c1">#return ind</span>

<div class="viewcode-block" id="ComplexSpringDamperForceArray.write_f06"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexSpringDamperForceArray.write_f06">[docs]</a>    <span class="k">def</span> <span class="nf">write_f06</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f06_file</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">page_stamp</span><span class="o">=</span><span class="s1">&#39;PAGE </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">page_num</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">header</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">msg_temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_f06_header</span><span class="p">(</span><span class="n">is_mag_phase</span><span class="o">=</span><span class="n">is_mag_phase</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="n">is_sort1</span><span class="p">)</span>

        <span class="c1"># write the f06</span>
        <span class="c1">#(ntimes, ntotal, two) = self.data.shape</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">eids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span>
        <span class="c1">#is_odd = False</span>
        <span class="c1">#nwrite = len(eids)</span>
        <span class="c1">#if len(eids) % 2 == 1:</span>
            <span class="c1">#nwrite -= 1</span>
            <span class="c1">#is_odd = True</span>

        <span class="c1">#print(&#39;len(eids)=%s nwrite=%s is_odd=%s&#39; % (len(eids), nwrite, is_odd))</span>
        <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ntimes</span><span class="p">):</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>  <span class="c1"># TODO: rename this...</span>
            <span class="n">header</span> <span class="o">=</span> <span class="n">_eigenvalue_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">itime</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">header</span> <span class="o">+</span> <span class="n">msg_temp</span><span class="p">))</span>

            <span class="c1">#print(&quot;self.data.shape=%s itime=%s ieids=%s&quot; % (str(self.data.shape), itime, str(ieids)))</span>
            <span class="n">spring_force</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">eid</span><span class="p">,</span> <span class="n">spring_forcei</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="n">spring_force</span><span class="p">):</span>
                <span class="p">[</span><span class="n">rspring</span><span class="p">,</span> <span class="n">ispring</span><span class="p">]</span> <span class="o">=</span> <span class="n">write_imag_floats_13e</span><span class="p">([</span><span class="n">spring_forcei</span><span class="p">],</span> <span class="n">is_mag_phase</span><span class="p">)</span>
                <span class="c1">#ELEMENT                             AXIAL                                       TORSIONAL</span>
                    <span class="c1">#ID.                              STRESS                                         STRESS</span>
                    <span class="c1">#14                  0.0          /  0.0                           0.0          /  0.0</span>

                <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;      </span><span class="si">%8i</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1"> / </span><span class="si">%-13s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">rspring</span><span class="p">,</span> <span class="n">ispring</span><span class="p">))</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">page_stamp</span> <span class="o">%</span> <span class="n">page_num</span><span class="p">)</span>
            <span class="n">page_num</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">page_num</span> <span class="o">-</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="ComplexSpringDamperForceArray.write_op2"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexSpringDamperForceArray.write_op2">[docs]</a>    <span class="k">def</span> <span class="nf">write_op2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op2</span><span class="p">,</span> <span class="n">op2_ascii</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="n">new_result</span><span class="p">,</span>
                  <span class="n">date</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">endian</span><span class="o">=</span><span class="s1">&#39;&gt;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;writes an OP2&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">inspect</span>
        <span class="kn">from</span> <span class="nn">struct</span> <span class="kn">import</span> <span class="n">Struct</span><span class="p">,</span> <span class="n">pack</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
        <span class="n">call_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getouterframes</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.write_op2: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">call_frame</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]))</span>

        <span class="k">if</span> <span class="n">itable</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_table_header</span><span class="p">(</span><span class="n">op2</span><span class="p">,</span> <span class="n">op2_ascii</span><span class="p">,</span> <span class="n">date</span><span class="p">)</span>
            <span class="n">itable</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span>

        <span class="c1">#eids = self.element</span>

        <span class="c1"># table 4 info</span>
        <span class="c1">#ntimes = self.data.shape[0]</span>
        <span class="c1">#nnodes = self.data.shape[1]</span>
        <span class="n">nelements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># 21 = 1 node, 3 principal, 6 components, 9 vectors, 2 p/ovm</span>
        <span class="c1">#ntotal = ((nnodes * 21) + 1) + (nelements * 4)</span>

        <span class="n">ntotali</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="n">ntotali</span> <span class="o">*</span> <span class="n">nelements</span>

        <span class="c1">#print(&#39;shape = %s&#39; % str(self.data.shape))</span>
        <span class="c1">#assert self.ntimes == 1, self.ntimes</span>

        <span class="c1">#device_code = self.device_code</span>
        <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  ntimes = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">)</span>

        <span class="n">eids_device</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">device_code</span>

        <span class="c1">#print(&#39;ntotal=%s&#39; % (ntotal))</span>
        <span class="c1">#assert ntotal == 193, ntotal</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">:</span>
            <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i2f&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;SORT2&#39;</span><span class="p">)</span>

        <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-nelements=</span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="n">nelements</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_table_3</span><span class="p">(</span><span class="n">op2</span><span class="p">,</span> <span class="n">op2_ascii</span><span class="p">,</span> <span class="n">new_result</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="n">itime</span><span class="p">)</span>

            <span class="c1"># record 4</span>
            <span class="n">itable</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">]</span>
            <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%i</span><span class="s1">i&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">header</span><span class="p">),</span> <span class="o">*</span><span class="n">header</span><span class="p">))</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, 0, 4]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, </span><span class="si">%s</span><span class="s1">, 4]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">itable</span><span class="p">))</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, </span><span class="si">%i</span><span class="s1">, 4]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">))</span>

            <span class="n">force</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">eid</span><span class="p">,</span> <span class="n">forcei</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">eids_device</span><span class="p">,</span> <span class="n">force</span><span class="p">):</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">eid</span><span class="p">,</span> <span class="n">forcei</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">forcei</span><span class="o">.</span><span class="n">imag</span><span class="p">]</span>
                <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%s</span><span class="s1"> force=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">forcei</span><span class="p">))</span>
                <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">struct1</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">))</span>

            <span class="n">itable</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,]</span>
            <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">header</span><span class="p">))</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;footer = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">header</span><span class="p">)</span>
            <span class="n">new_result</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">itable</span></div></div>


<div class="viewcode-block" id="ComplexSpringForceArray"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexSpringForceArray">[docs]</a><span class="k">class</span> <span class="nc">ComplexSpringForceArray</span><span class="p">(</span><span class="n">ComplexSpringDamperForceArray</span><span class="p">):</span>  <span class="c1"># 11-CELAS1,12-CELAS2,13-CELAS3, 14-CELAS4</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="n">ComplexSpringDamperForceArray</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span></div>

<div class="viewcode-block" id="ComplexDamperForceArray"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexDamperForceArray">[docs]</a><span class="k">class</span> <span class="nc">ComplexDamperForceArray</span><span class="p">(</span><span class="n">ComplexSpringDamperForceArray</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="n">ComplexSpringDamperForceArray</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span></div>


<div class="viewcode-block" id="ComplexViscForceArray"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexViscForceArray">[docs]</a><span class="k">class</span> <span class="nc">ComplexViscForceArray</span><span class="p">(</span><span class="n">BaseElement</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">BaseElement</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">)</span>
        <span class="c1">#self.code = [self.format_code, self.sort_code, self.s_code]</span>

        <span class="c1">#self.ntimes = 0  # or frequency/mode</span>
        <span class="c1">#self.ntotal = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># result specific</span>

        <span class="k">if</span> <span class="n">is_sort1</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;SORT2&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_real</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_complex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_reset_indices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="ComplexViscForceArray.get_headers"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexViscForceArray.get_headers">[docs]</a>    <span class="k">def</span> <span class="nf">get_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;axial_force&#39;</span><span class="p">,</span> <span class="s1">&#39;torque&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">headers</span></div>

    <span class="c1">#def get_headers(self):</span>
        <span class="c1">#headers = [&#39;axial&#39;, &#39;torque&#39;]</span>
        <span class="c1">#return headers</span>

<div class="viewcode-block" id="ComplexViscForceArray.build"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexViscForceArray.build">[docs]</a>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;sizes the vectorized attributes of the ComplexViscForceArray&quot;&quot;&quot;</span>
        <span class="c1">#print(&#39;ntimes=%s nelements=%s ntotal=%s&#39; % (self.ntimes, self.nelements, self.ntotal))</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ntimes=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;nelements=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ntotal=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span>
        <span class="c1">#self.names = []</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">//=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itime</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#self.ntimes = 0</span>
        <span class="c1">#self.nelements = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1">#print(&quot;ntimes=%s nelements=%s ntotal=%s&quot; % (self.ntimes, self.nelements, self.ntotal))</span>
        <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;float32&#39;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;int32&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nelements</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span>

        <span class="c1">#[axial_force, torque]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;complex64&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ComplexViscForceArray.build_dataframe"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexViscForceArray.build_dataframe">[docs]</a>    <span class="k">def</span> <span class="nf">build_dataframe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;creates a pandas dataframe&quot;&quot;&quot;</span>
        <span class="c1">#Mode                         1        2        3        4</span>
        <span class="c1">#EigenvalueReal            -0.0     -0.0     -0.0     -0.0</span>
        <span class="c1">#EigenvalueImag            -0.0     -0.0     -0.0     -0.0</span>
        <span class="c1">#Damping                    0.0      0.0      0.0      0.0</span>
        <span class="c1">#ElementID Item</span>
        <span class="c1">#50        axial_force  (-0+0j)  (-0+0j)  (-0+0j)  (-0+0j)</span>
        <span class="c1">#          torque       (-0+0j)  (-0+0j)  (-0+0j)  (-0+0j)</span>
        <span class="c1">#51        axial_force  (-0+0j)  (-0+0j)  (-0+0j)  (-0+0j)</span>
        <span class="c1">#          torque            0j  (-0+0j)  (-0+0j)  (-0+0j)</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">()</span>
        <span class="n">column_names</span><span class="p">,</span> <span class="n">column_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_dataframe_transient_header</span><span class="p">()</span>
        <span class="n">data_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_pandas_transient_elements</span><span class="p">(</span><span class="n">column_values</span><span class="p">,</span> <span class="n">column_names</span><span class="p">,</span>
                                                           <span class="n">headers</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_frame</span> <span class="o">=</span> <span class="n">data_frame</span></div>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_eq_header</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span> <span class="o">==</span> <span class="n">table</span><span class="o">.</span><span class="n">is_sort1</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;table_name=</span><span class="si">%r</span><span class="s1"> class_name=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">ie</span><span class="p">,</span> <span class="n">eid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">):</span>
                    <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">ie</span><span class="p">,</span> <span class="p">:]</span>
                    <span class="n">t2</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">ie</span><span class="p">,</span> <span class="p">:]</span>
                    <span class="p">(</span><span class="n">axial1</span><span class="p">,</span> <span class="n">torque1</span><span class="p">)</span> <span class="o">=</span> <span class="n">t1</span>
                    <span class="p">(</span><span class="n">axial2</span><span class="p">,</span> <span class="n">torque2</span><span class="p">)</span> <span class="o">=</span> <span class="n">t2</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="n">allclose</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">):</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;(</span><span class="si">%s</span><span class="s1">)    (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)  (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">eid</span><span class="p">,</span>
                            <span class="n">axial1</span><span class="p">,</span> <span class="n">torque1</span><span class="p">,</span>
                            <span class="n">axial2</span><span class="p">,</span> <span class="n">torque2</span><span class="p">)</span>
                        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="c1">#print(msg)</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">add_sort1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">axial</span><span class="p">,</span> <span class="n">torque</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;unvectorized method for adding SORT1 transient data&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span> <span class="ow">and</span> <span class="n">eid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;dt=</span><span class="si">%s</span><span class="s1"> eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ielement</span><span class="p">]</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">axial</span><span class="p">,</span> <span class="n">torque</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">+=</span> <span class="mi">1</span>

<div class="viewcode-block" id="ComplexViscForceArray.get_stats"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexViscForceArray.get_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">short</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="s1">&#39;&lt;</span><span class="si">%s</span><span class="s1">&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                <span class="s1">&#39;  ntimes: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span>
                <span class="s1">&#39;  ntotal: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span>
            <span class="p">]</span>

        <span class="n">nelements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="c1">#ntotal = self.ntotal</span>

        <span class="n">msg</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">):</span>  <span class="c1"># transient</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> ntimes=</span><span class="si">%i</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="s1">; table_name=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">))</span>
            <span class="n">ntimes_word</span> <span class="o">=</span> <span class="s1">&#39;ntimes&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="s1">; table_name=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">))</span>
            <span class="n">ntimes_word</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  eType</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data: [</span><span class="si">%s</span><span class="s1">, nnodes, </span><span class="si">%i</span><span class="s1">] where </span><span class="si">%i</span><span class="s1">=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ntimes_word</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">headers</span><span class="p">))))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data.shape = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
        <span class="c1">#msg.append(&#39;  element type: %s\n&#39; % self.element_type)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  element name: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_code</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="ComplexViscForceArray.get_f06_header"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexViscForceArray.get_f06_header">[docs]</a>    <span class="k">def</span> <span class="nf">get_f06_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="c1">#if self.element_type == 1: # CROD</span>
            <span class="c1">#msg = [&#39;                             C O M P L E X   F O R C E S   I N   R O D   E L E M E N T S   ( C R O D )\n&#39;]</span>
        <span class="c1">#elif self.element_type == 10: # CONROD</span>
            <span class="c1">#msg = [&#39;                           C O M P L E X   F O R C E S   I N   R O D   E L E M E N T S   ( C O N R O D )\n&#39;]</span>
        <span class="c1">#elif self.element_type == 3: # CTUBE</span>
            <span class="c1">#msg = [&#39;                            C O M P L E X   F O R C E S   I N   R O D   E L E M E N T S   ( C T U B E )\n&#39;]</span>
            <span class="c1">##pass</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">24</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                           C O M P L E X   F O R C E S   I N   V I S C   E L E M E N T S   ( C V I S C )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;element_name=</span><span class="si">%s</span><span class="s1"> element_type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">is_mag_phase</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;                                                          (MAGNITUDE/PHASE)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;                                                          (REAL/IMAGINARY)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">is_sort1</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="p">[</span>
                <span class="s1">&#39; </span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="s1">&#39;                 ELEMENT                             AXIAL                                       TORSIONAL</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="s1">&#39;                   ID.                              STRAIN                                         STRAIN</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="p">]</span>
            <span class="c1">#&#39;                      14                  0.0          /  0.0                           0.0          /  0.0&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;sort2&#39;</span><span class="p">)</span>


        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="ComplexViscForceArray.get_element_index"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexViscForceArray.get_element_index">[docs]</a>    <span class="k">def</span> <span class="nf">get_element_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eids</span><span class="p">):</span>
        <span class="c1"># elements are always sorted; nodes are not</span>
        <span class="n">itot</span> <span class="o">=</span> <span class="n">searchsorted</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">)</span>  <span class="c1">#[0]</span>
        <span class="k">return</span> <span class="n">itot</span></div>

<div class="viewcode-block" id="ComplexViscForceArray.eid_to_element_node_index"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexViscForceArray.eid_to_element_node_index">[docs]</a>    <span class="k">def</span> <span class="nf">eid_to_element_node_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eids</span><span class="p">):</span>
        <span class="c1">#ind = ravel([searchsorted(self.element == eid) for eid in eids])</span>
        <span class="n">ind</span> <span class="o">=</span> <span class="n">searchsorted</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">)</span>
        <span class="c1">#ind = ind.reshape(ind.size)</span>
        <span class="c1">#ind.sort()</span>
        <span class="k">return</span> <span class="n">ind</span></div>

<div class="viewcode-block" id="ComplexViscForceArray.write_f06"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexViscForceArray.write_f06">[docs]</a>    <span class="k">def</span> <span class="nf">write_f06</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f06_file</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">page_stamp</span><span class="o">=</span><span class="s1">&#39;PAGE </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span>
                  <span class="n">page_num</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">header</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="p">(</span><span class="n">elem_name</span><span class="p">,</span> <span class="n">msg_temp</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_f06_header</span><span class="p">(</span><span class="n">is_mag_phase</span><span class="o">=</span><span class="n">is_mag_phase</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="n">is_sort1</span><span class="p">)</span>

        <span class="c1"># write the f06</span>
        <span class="c1">#(ntimes, ntotal, two) = self.data.shape</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">eids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span>
        <span class="c1">#is_odd = False</span>
        <span class="c1">#nwrite = len(eids)</span>
        <span class="c1">#if len(eids) % 2 == 1:</span>
            <span class="c1">#nwrite -= 1</span>
            <span class="c1">#is_odd = True</span>

        <span class="c1">#print(&#39;len(eids)=%s nwrite=%s is_odd=%s&#39; % (len(eids), nwrite, is_odd))</span>
        <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ntimes</span><span class="p">):</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>  <span class="c1"># TODO: rename this...</span>
            <span class="n">header</span> <span class="o">=</span> <span class="n">_eigenvalue_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">itime</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">header</span> <span class="o">+</span> <span class="n">msg_temp</span><span class="p">))</span>

            <span class="c1">#print(&quot;self.data.shape=%s itime=%s ieids=%s&quot; % (str(self.data.shape), itime, str(ieids)))</span>
            <span class="n">axial</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">torsion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">eid</span><span class="p">,</span> <span class="n">axiali</span><span class="p">,</span> <span class="n">torsioni</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="n">axial</span><span class="p">,</span> <span class="n">torsion</span><span class="p">):</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">write_imag_floats_13e</span><span class="p">([</span><span class="n">axiali</span><span class="p">,</span> <span class="n">torsioni</span><span class="p">],</span> <span class="n">is_mag_phase</span><span class="p">)</span>
                <span class="p">[</span><span class="n">raxial</span><span class="p">,</span> <span class="n">rtorsion</span><span class="p">,</span> <span class="n">iaxial</span><span class="p">,</span> <span class="n">itorsion</span><span class="p">]</span> <span class="o">=</span> <span class="n">out</span>
                <span class="c1">#ELEMENT                             AXIAL                                       TORSIONAL</span>
                    <span class="c1">#ID.                              STRESS                                         STRESS</span>
                    <span class="c1">#14                  0.0          /  0.0                           0.0          /  0.0</span>
                <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;      </span><span class="si">%8i</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1"> / </span><span class="si">%-13s</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1"> / </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>
                               <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">raxial</span><span class="p">,</span> <span class="n">iaxial</span><span class="p">,</span> <span class="n">rtorsion</span><span class="p">,</span> <span class="n">itorsion</span><span class="p">))</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">page_stamp</span> <span class="o">%</span> <span class="n">page_num</span><span class="p">)</span>
            <span class="n">page_num</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">page_num</span> <span class="o">-</span> <span class="mi">1</span></div></div>


<div class="viewcode-block" id="ComplexPlateForceArray"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexPlateForceArray">[docs]</a><span class="k">class</span> <span class="nc">ComplexPlateForceArray</span><span class="p">(</span><span class="n">ComplexForceObject</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">ComplexForceObject</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">)</span>
        <span class="c1">#self.code = [self.format_code, self.sort_code, self.s_code]</span>

        <span class="c1">#self.ntimes = 0  # or frequency/mode</span>
        <span class="c1">#self.ntotal = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># result specific</span>

        <span class="c1">#if is_sort1:</span>
            <span class="c1">#pass</span>
        <span class="c1">#else:</span>
            <span class="c1">#raise NotImplementedError(&#39;SORT2&#39;)</span>

<div class="viewcode-block" id="ComplexPlateForceArray.get_headers"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexPlateForceArray.get_headers">[docs]</a>    <span class="k">def</span> <span class="nf">get_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;mx&#39;</span><span class="p">,</span> <span class="s1">&#39;my&#39;</span><span class="p">,</span> <span class="s1">&#39;mxy&#39;</span><span class="p">,</span> <span class="s1">&#39;bmx&#39;</span><span class="p">,</span> <span class="s1">&#39;bmy&#39;</span><span class="p">,</span> <span class="s1">&#39;bmxy&#39;</span><span class="p">,</span> <span class="s1">&#39;tx&#39;</span><span class="p">,</span> <span class="s1">&#39;ty&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">headers</span></div>

<div class="viewcode-block" id="ComplexPlateForceArray.build"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexPlateForceArray.build">[docs]</a>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;sizes the vectorized attributes of the ComplexPlateForceArray&quot;&quot;&quot;</span>
        <span class="c1">#print(&#39;ntimes=%s nelements=%s ntotal=%s&#39; % (self.ntimes, self.nelements, self.ntotal))</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ntimes=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;nelements=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ntotal=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span>
        <span class="c1">#self.names = []</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">//=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itime</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#self.ntimes = 0</span>
        <span class="c1">#self.nelements = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1">#print(&quot;ntimes=%s nelements=%s ntotal=%s&quot; % (self.ntimes, self.nelements, self.ntotal))</span>
        <span class="n">dtype</span><span class="p">,</span> <span class="n">idtype</span><span class="p">,</span> <span class="n">cfdtype</span> <span class="o">=</span> <span class="n">get_complex_times_dtype</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nelements</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">idtype</span><span class="p">)</span>

        <span class="c1">#[mx, my, mxy, bmx, bmy, bmxy, tx, ty]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">cfdtype</span><span class="p">)</span></div>

<div class="viewcode-block" id="ComplexPlateForceArray.build_dataframe"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexPlateForceArray.build_dataframe">[docs]</a>    <span class="k">def</span> <span class="nf">build_dataframe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;creates a pandas dataframe&quot;&quot;&quot;</span>
        <span class="c1"># Freq           0.00001  10.00000 20.00000 30.00000                 40.00000 50.00000 60.00000</span>
        <span class="c1"># ElementID Item</span>
        <span class="c1">#8         mx         0j       0j       0j       0j   (-361.6303-680.04156j)       0j       0j</span>
        <span class="c1">#          my         0j       0j       0j       0j  (-7884.6196-14826.936j)       0j       0j</span>
        <span class="c1">#          mxy        0j       0j       0j       0j    (-237.5723-446.7519j)       0j       0j</span>
        <span class="c1">#          bmx        0j       0j       0j       0j   (5.514431+10.3698225j)       0j       0j</span>
        <span class="c1">#          bmy        0j       0j       0j       0j    (10.107019+19.00613j)       0j       0j</span>
        <span class="c1">#          bmxy       0j       0j       0j       0j  (-16.361727-30.768036j)       0j       0j</span>
        <span class="c1">#          tx         0j       0j       0j       0j     (18.819313+35.3895j)       0j       0j</span>
        <span class="c1">#          ty         0j       0j       0j       0j   (-61.55238-115.74853j)       0j       0j</span>
        <span class="c1">#9         mx         0j       0j       0j       0j   (1086.9078+2043.9175j)       0j       0j</span>
        <span class="c1">#          my         0j       0j       0j       0j    (8089.895+15212.953j)       0j       0j</span>
        <span class="c1">#          mxy        0j       0j       0j       0j   (-4725.3286-8885.925j)       0j       0j</span>
        <span class="c1">#          bmx        0j       0j       0j       0j   (-3.9810739-7.486363j)       0j       0j</span>
        <span class="c1">#          bmy        0j       0j       0j       0j  (-10.283798-19.338562j)       0j       0j</span>
        <span class="c1">#          bmxy       0j       0j       0j       0j   (-8.663734-16.292051j)       0j       0j</span>
        <span class="c1">#          tx         0j       0j       0j       0j    (54.14508+101.81919j)       0j       0j</span>
        <span class="c1">#          ty         0j       0j       0j       0j   (-61.92162-116.44288j)       0j       0j</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">()</span>
        <span class="n">column_names</span><span class="p">,</span> <span class="n">column_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_dataframe_transient_header</span><span class="p">()</span>
        <span class="n">data_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_pandas_transient_elements</span><span class="p">(</span><span class="n">column_values</span><span class="p">,</span> <span class="n">column_names</span><span class="p">,</span>
                                                           <span class="n">headers</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="c1">#data_frame = pd.Panel(self.data, items=column_values,</span>
                                   <span class="c1">#major_axis=self.element, minor_axis=headers).to_frame()</span>
        <span class="c1">#data_frame.columns.names = column_names</span>
        <span class="c1">#data_frame.index.names = [&#39;ElementID&#39;, &#39;Item&#39;]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_frame</span> <span class="o">=</span> <span class="n">data_frame</span></div>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span> <span class="o">==</span> <span class="n">table</span><span class="o">.</span><span class="n">is_sort1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_eq_header</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;table_name=</span><span class="si">%r</span><span class="s1"> class_name=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">ie</span><span class="p">,</span> <span class="n">eid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">):</span>
                    <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">ie</span><span class="p">,</span> <span class="p">:]</span>
                    <span class="n">t2</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">ie</span><span class="p">,</span> <span class="p">:]</span>
                    <span class="p">(</span><span class="n">mx1</span><span class="p">,</span> <span class="n">my1</span><span class="p">,</span> <span class="n">mxy1</span><span class="p">,</span> <span class="n">bmx1</span><span class="p">,</span> <span class="n">bmy1</span><span class="p">,</span> <span class="n">bmxy1</span><span class="p">,</span> <span class="n">tx1</span><span class="p">,</span> <span class="n">ty1</span><span class="p">)</span> <span class="o">=</span> <span class="n">t1</span>
                    <span class="p">(</span><span class="n">mx2</span><span class="p">,</span> <span class="n">my2</span><span class="p">,</span> <span class="n">mxy2</span><span class="p">,</span> <span class="n">bmx2</span><span class="p">,</span> <span class="n">bmy2</span><span class="p">,</span> <span class="n">bmxy2</span><span class="p">,</span> <span class="n">tx2</span><span class="p">,</span> <span class="n">ty2</span><span class="p">)</span> <span class="o">=</span> <span class="n">t2</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="n">allclose</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">):</span>
                    <span class="c1">#if not np.array_equal(t1.real, t2.real):</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="p">(</span><span class="s1">&#39;</span><span class="si">%-8s</span><span class="s1"> (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span>
                                <span class="s1">&#39;</span><span class="si">%-8s</span><span class="s1"> (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                    <span class="n">eid</span><span class="p">,</span>
                                    <span class="c1">#mx1.real, my1.real, mxy1.real, bmx1.real, bmy1.real,</span>
                                    <span class="c1">#bmxy1.real, tx1.real, ty1.real,</span>
                                    <span class="n">mx1</span><span class="p">,</span> <span class="n">my1</span><span class="p">,</span> <span class="n">mxy1</span><span class="p">,</span> <span class="n">bmx1</span><span class="p">,</span> <span class="n">bmy1</span><span class="p">,</span> <span class="n">bmxy1</span><span class="p">,</span> <span class="n">tx1</span><span class="p">,</span> <span class="n">ty1</span><span class="p">,</span>
                                    <span class="s1">&#39;&#39;</span><span class="p">,</span>
                                    <span class="n">mx2</span><span class="p">,</span> <span class="n">my2</span><span class="p">,</span> <span class="n">mxy2</span><span class="p">,</span> <span class="n">bmx2</span><span class="p">,</span> <span class="n">bmy2</span><span class="p">,</span> <span class="n">bmxy2</span><span class="p">,</span> <span class="n">tx2</span><span class="p">,</span> <span class="n">ty2</span><span class="p">,</span>
                                    <span class="c1">#mx2.real, my2.real, mxy2.real, bmx2.real, bmy2.real,</span>
                                    <span class="c1">#bmxy2.real, tx2.real, ty2.real,</span>
                        <span class="p">))</span>
                        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="c1">#print(msg)</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">add_sort1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mxy</span><span class="p">,</span> <span class="n">bmx</span><span class="p">,</span> <span class="n">bmy</span><span class="p">,</span> <span class="n">bmxy</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;unvectorized method for adding SORT1 transient data&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span> <span class="ow">and</span> <span class="n">eid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;dt=</span><span class="si">%s</span><span class="s1"> eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ielement</span><span class="p">]</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mxy</span><span class="p">,</span> <span class="n">bmx</span><span class="p">,</span> <span class="n">bmy</span><span class="p">,</span> <span class="n">bmxy</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="c1">#@property</span>
    <span class="c1">#def nnodes_per_element(self):</span>
        <span class="c1">#return 1</span>

<div class="viewcode-block" id="ComplexPlateForceArray.get_stats"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexPlateForceArray.get_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">short</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="s1">&#39;&lt;</span><span class="si">%s</span><span class="s1">&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                <span class="s1">&#39;  ntimes: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span>
                <span class="s1">&#39;  ntotal: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span>
            <span class="p">]</span>

        <span class="n">nelements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="c1">#ntotal = self.ntotal</span>

        <span class="n">msg</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">):</span>  <span class="c1"># transient</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> ntimes=</span><span class="si">%i</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="s1">; table_name=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">))</span>
            <span class="n">ntimes_word</span> <span class="o">=</span> <span class="s1">&#39;ntimes&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="s1">; table_name=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">))</span>
            <span class="n">ntimes_word</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  eType</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data: [</span><span class="si">%s</span><span class="s1">, nnodes, </span><span class="si">%i</span><span class="s1">] where </span><span class="si">%i</span><span class="s1">=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ntimes_word</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">headers</span><span class="p">))))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data.shape = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
        <span class="c1">#msg.append(&#39;  element type: %s\n&#39; % self.element_type)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  element name: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_code</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="ComplexPlateForceArray.get_f06_header"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexPlateForceArray.get_f06_header">[docs]</a>    <span class="k">def</span> <span class="nf">get_f06_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">loads</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;    ELEMENT                - MEMBRANE  FORCES -                        - BENDING MOMENTS -               - TRANSVERSE SHEAR FORCES -</span><span class="se">\n</span><span class="s1">&#39;</span>
                 <span class="s1">&#39;      ID              FX            FY            FXY             MX            MY            MXY             QX            QY</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,]</span>
        <span class="k">if</span> <span class="n">is_mag_phase</span><span class="p">:</span>
            <span class="n">mag_real</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                                                         (MAGNITUDE/PHASE)</span><span class="se">\n</span><span class="s1"> </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mag_real</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                                                          (REAL/IMAGINARY)</span><span class="se">\n</span><span class="s1"> </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>

        <span class="n">cquad4_bilinear</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                  C O M P L E X   F O R C E S   I N   Q U A D R I L A T E R A L   E L E M E N T S   ( Q U A D 4 )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>  <span class="c1"># good</span>
        <span class="n">cquad4_linear</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                  C O M P L E X   F O R C E S   I N   Q U A D R I L A T E R A L   E L E M E N T S   ( Q U A D 4 )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>  <span class="c1"># good</span>
        <span class="n">ctria3</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                     C O M P L E X   F O R C E S   I N   T R I A N G U L A R   E L E M E N T S   ( T R I A 3 )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>  <span class="c1"># good</span>
        <span class="n">cquad8</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                  C O M P L E X   F O R C E S   I N   Q U A D R I L A T E R A L   E L E M E N T S   ( Q U A D 8 )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="n">cquadr</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                  C O M P L E X   F O R C E S   I N   Q U A D R I L A T E R A L   E L E M E N T S   ( Q U A D R )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="n">ctria6</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                     C O M P L E X   F O R C E S   I N   T R I A N G U L A R   E L E M E N T S   ( T R I A 6 )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="n">ctriar</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                     C O M P L E X   F O R C E S   I N   T R I A N G U L A R   E L E M E N T S   ( T R I A R )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>

        <span class="c1">#is_bilinear = False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">144</span><span class="p">:</span> <span class="c1"># CQUAD4</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">cquad4_linear</span> <span class="o">+</span> <span class="n">mag_real</span> <span class="o">+</span> <span class="n">loads</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">33</span><span class="p">:</span> <span class="c1"># CQUAD4</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">cquad4_bilinear</span> <span class="o">+</span> <span class="n">mag_real</span> <span class="o">+</span> <span class="n">loads</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">64</span><span class="p">:</span>  <span class="c1">#CQUAD8</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">cquad8</span> <span class="o">+</span> <span class="n">mag_real</span> <span class="o">+</span> <span class="n">loads</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">82</span><span class="p">,</span> <span class="mi">228</span><span class="p">]:</span>  <span class="c1"># CQUADR, CQUADR linear</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">cquadr</span> <span class="o">+</span> <span class="n">mag_real</span> <span class="o">+</span> <span class="n">loads</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">74</span><span class="p">:</span> <span class="c1"># CTRIA3</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">ctria3</span> <span class="o">+</span> <span class="n">mag_real</span> <span class="o">+</span> <span class="n">loads</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">75</span><span class="p">:</span>  <span class="c1"># CTRIA6</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">ctria6</span> <span class="o">+</span> <span class="n">mag_real</span> <span class="o">+</span> <span class="n">loads</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">70</span><span class="p">,</span> <span class="mi">227</span><span class="p">]:</span>  <span class="c1"># CTRIAR, CTRIAR linear</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">ctriar</span> <span class="o">+</span> <span class="n">mag_real</span> <span class="o">+</span> <span class="n">loads</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;name=</span><span class="si">%r</span><span class="s1"> type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="ComplexPlateForceArray.get_element_index"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexPlateForceArray.get_element_index">[docs]</a>    <span class="k">def</span> <span class="nf">get_element_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eids</span><span class="p">):</span>
        <span class="c1"># elements are always sorted; nodes are not</span>
        <span class="n">itot</span> <span class="o">=</span> <span class="n">searchsorted</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">)</span>  <span class="c1">#[0]</span>
        <span class="k">return</span> <span class="n">itot</span></div>

<div class="viewcode-block" id="ComplexPlateForceArray.eid_to_element_node_index"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexPlateForceArray.eid_to_element_node_index">[docs]</a>    <span class="k">def</span> <span class="nf">eid_to_element_node_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eids</span><span class="p">):</span>
        <span class="c1">#ind = ravel([searchsorted(self.element == eid) for eid in eids])</span>
        <span class="n">ind</span> <span class="o">=</span> <span class="n">searchsorted</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">)</span>
        <span class="c1">#ind = ind.reshape(ind.size)</span>
        <span class="c1">#ind.sort()</span>
        <span class="k">return</span> <span class="n">ind</span></div>

<div class="viewcode-block" id="ComplexPlateForceArray.write_f06"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexPlateForceArray.write_f06">[docs]</a>    <span class="k">def</span> <span class="nf">write_f06</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f06_file</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">page_stamp</span><span class="o">=</span><span class="s1">&#39;PAGE </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">page_num</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">header</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">msg_temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_f06_header</span><span class="p">(</span><span class="n">is_mag_phase</span><span class="o">=</span><span class="n">is_mag_phase</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="n">is_sort1</span><span class="p">)</span>

        <span class="c1"># write the f06</span>
        <span class="c1">#(ntimes, ntotal, two) = self.data.shape</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">eids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span>
        <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ntimes</span><span class="p">):</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>  <span class="c1"># TODO: rename this...</span>
            <span class="n">header</span> <span class="o">=</span> <span class="n">_eigenvalue_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">itime</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">header</span> <span class="o">+</span> <span class="n">msg_temp</span><span class="p">))</span>

            <span class="c1">#print(&quot;self.data.shape=%s itime=%s ieids=%s&quot; % (str(self.data.shape), itime, str(ieids)))</span>
            <span class="n">mx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">my</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">mxy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]</span>
            <span class="n">bmx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">3</span><span class="p">]</span>
            <span class="n">bmy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">4</span><span class="p">]</span>
            <span class="n">bmxy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">5</span><span class="p">]</span>
            <span class="n">tx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">6</span><span class="p">]</span>
            <span class="n">ty</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">7</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">eid</span><span class="p">,</span> <span class="n">mxi</span><span class="p">,</span> <span class="n">myi</span><span class="p">,</span> <span class="n">mxyi</span><span class="p">,</span> <span class="n">bmxi</span><span class="p">,</span> <span class="n">bmyi</span><span class="p">,</span> <span class="n">bmxyi</span><span class="p">,</span> <span class="n">txi</span><span class="p">,</span> <span class="n">tyi</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mxy</span><span class="p">,</span> <span class="n">bmx</span><span class="p">,</span> <span class="n">bmy</span><span class="p">,</span> <span class="n">bmxy</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">):</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">write_imag_floats_13e</span><span class="p">([</span><span class="n">mxi</span><span class="p">,</span> <span class="n">myi</span><span class="p">,</span> <span class="n">mxyi</span><span class="p">,</span> <span class="n">bmxi</span><span class="p">,</span> <span class="n">bmyi</span><span class="p">,</span> <span class="n">bmxyi</span><span class="p">,</span> <span class="n">txi</span><span class="p">,</span> <span class="n">tyi</span><span class="p">],</span> <span class="n">is_mag_phase</span><span class="p">)</span>
                <span class="p">[</span><span class="n">smxr</span><span class="p">,</span> <span class="n">smyr</span><span class="p">,</span> <span class="n">smxyr</span><span class="p">,</span> <span class="n">sbmxr</span><span class="p">,</span> <span class="n">sbmyr</span><span class="p">,</span> <span class="n">sbmxyr</span><span class="p">,</span> <span class="n">stxr</span><span class="p">,</span> <span class="n">styr</span><span class="p">,</span>
                 <span class="n">smxi</span><span class="p">,</span> <span class="n">smyi</span><span class="p">,</span> <span class="n">smxyi</span><span class="p">,</span> <span class="n">sbmxi</span><span class="p">,</span> <span class="n">sbmyi</span><span class="p">,</span> <span class="n">sbmxyi</span><span class="p">,</span> <span class="n">stxi</span><span class="p">,</span> <span class="n">styi</span><span class="p">]</span> <span class="o">=</span> <span class="n">out</span>
                <span class="c1">#&quot;&quot;&quot;</span>
                    <span class="c1">#ELEMENT                - MEMBRANE  FORCES -                        - BENDING MOMENTS -               - TRANSVERSE SHEAR FORCES -</span>
                      <span class="c1">#ID              FX            FY            FXY             MX            MY            MXY             QX            QY</span>
                <span class="c1">#0       564       1.543439E+03  7.311177E+02  1.322702E+02    1.080178E+00  1.699104E+00  2.618547E-01    3.877034E+01  4.518554E+00</span>
                                  <span class="c1">#358.3129      358.0245      177.5593        177.5292      178.2112        0.0907        358.1465      179.4567</span>
                <span class="c1">#&quot;&quot;&quot;</span>
                <span class="c1">#                fx     fy     fxy     mx     my     mxy    qx      qy</span>
                <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="s1">&#39;0  </span><span class="si">%8i</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="s1">&#39;   </span><span class="si">%8s</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="n">eid</span><span class="p">,</span> <span class="n">smxr</span><span class="p">,</span> <span class="n">smyr</span><span class="p">,</span> <span class="n">smxyr</span><span class="p">,</span> <span class="n">sbmxr</span><span class="p">,</span> <span class="n">sbmyr</span><span class="p">,</span> <span class="n">sbmxyr</span><span class="p">,</span> <span class="n">stxr</span><span class="p">,</span> <span class="n">styr</span><span class="p">,</span>
                        <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">smxi</span><span class="p">,</span> <span class="n">smyi</span><span class="p">,</span> <span class="n">smxyi</span><span class="p">,</span> <span class="n">sbmxi</span><span class="p">,</span> <span class="n">sbmyi</span><span class="p">,</span> <span class="n">sbmxyi</span><span class="p">,</span> <span class="n">stxi</span><span class="p">,</span> <span class="n">styi</span><span class="p">))</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">page_stamp</span> <span class="o">%</span> <span class="n">page_num</span><span class="p">)</span>
            <span class="n">page_num</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">page_num</span> <span class="o">-</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="ComplexPlateForceArray.write_op2"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexPlateForceArray.write_op2">[docs]</a>    <span class="k">def</span> <span class="nf">write_op2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op2</span><span class="p">,</span> <span class="n">op2_ascii</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="n">new_result</span><span class="p">,</span>
                  <span class="n">date</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">endian</span><span class="o">=</span><span class="s1">&#39;&gt;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;writes an OP2&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">inspect</span>
        <span class="kn">from</span> <span class="nn">struct</span> <span class="kn">import</span> <span class="n">Struct</span><span class="p">,</span> <span class="n">pack</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
        <span class="n">call_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getouterframes</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.write_op2: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">call_frame</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]))</span>

        <span class="k">if</span> <span class="n">itable</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_table_header</span><span class="p">(</span><span class="n">op2</span><span class="p">,</span> <span class="n">op2_ascii</span><span class="p">,</span> <span class="n">date</span><span class="p">)</span>
            <span class="n">itable</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span>

        <span class="c1">#if isinstance(self.nonlinear_factor, float):</span>
            <span class="c1">#op2_format = &#39;%sif&#39; % (7 * self.ntimes)</span>
            <span class="c1">#raise NotImplementedError()</span>
        <span class="c1">#else:</span>
            <span class="c1">#op2_format = &#39;i21f&#39;</span>
        <span class="c1">#s = Struct(op2_format)</span>

        <span class="n">eids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span>
        <span class="n">eids_device</span> <span class="o">=</span> <span class="n">eids</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">device_code</span>

        <span class="c1"># table 4 info</span>
        <span class="c1">#ntimes = self.data.shape[0]</span>
        <span class="c1">#nnodes = self.data.shape[1]</span>
        <span class="n">nelements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># 21 = 1 node, 3 principal, 6 components, 9 vectors, 2 p/ovm</span>
        <span class="c1">#ntotal = ((nnodes * 21) + 1) + (nelements * 4)</span>

        <span class="n">ntotali</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="n">ntotali</span> <span class="o">*</span> <span class="n">nelements</span>

        <span class="c1">#print(&#39;shape = %s&#39; % str(self.data.shape))</span>
        <span class="c1">#assert self.ntimes == 1, self.ntimes</span>

        <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  ntimes = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">)</span>

        <span class="c1">#fmt = &#39;%2i %6f&#39;</span>
        <span class="c1">#print(&#39;ntotal=%s&#39; % (ntotal))</span>
        <span class="c1">#assert ntotal == 193, ntotal</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">:</span>
            <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i 16f&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;SORT2&#39;</span><span class="p">)</span>

        <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-nelements=</span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="n">nelements</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_table_3</span><span class="p">(</span><span class="n">op2</span><span class="p">,</span> <span class="n">op2_ascii</span><span class="p">,</span> <span class="n">new_result</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="n">itime</span><span class="p">)</span>

            <span class="c1"># record 4</span>
            <span class="c1">#print(&#39;stress itable = %s&#39; % itable)</span>
            <span class="n">itable</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">]</span>
            <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%i</span><span class="s1">i&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">header</span><span class="p">),</span> <span class="o">*</span><span class="n">header</span><span class="p">))</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, 0, 4]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, </span><span class="si">%s</span><span class="s1">, 4]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">itable</span><span class="p">))</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, </span><span class="si">%i</span><span class="s1">, 4]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">))</span>

            <span class="n">mx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">my</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">mxy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]</span>
            <span class="n">bmx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">3</span><span class="p">]</span>
            <span class="n">bmy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">4</span><span class="p">]</span>
            <span class="n">bmxy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">5</span><span class="p">]</span>
            <span class="n">tx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">6</span><span class="p">]</span>
            <span class="n">ty</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">7</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">eid_device</span><span class="p">,</span> <span class="n">mxi</span><span class="p">,</span> <span class="n">myi</span><span class="p">,</span> <span class="n">mxyi</span><span class="p">,</span> <span class="n">bmxi</span><span class="p">,</span> <span class="n">bmyi</span><span class="p">,</span> <span class="n">bmxyi</span><span class="p">,</span> <span class="n">txi</span><span class="p">,</span> <span class="n">tyi</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">eids_device</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mxy</span><span class="p">,</span> <span class="n">bmx</span><span class="p">,</span> <span class="n">bmy</span><span class="p">,</span> <span class="n">bmxy</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">):</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">eid_device</span><span class="p">,</span>
                        <span class="n">mxi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">myi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">mxyi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">bmxi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">bmyi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">bmxyi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">txi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">tyi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span>
                        <span class="n">mxi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">myi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">mxyi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">bmxi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">bmyi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">bmxyi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">txi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">tyi</span><span class="o">.</span><span class="n">imag</span><span class="p">]</span>
                <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid_device=</span><span class="si">%s</span><span class="s1"> data=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">)))</span>
                <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">struct1</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">))</span>

            <span class="n">itable</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,]</span>
            <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">header</span><span class="p">))</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;footer = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">header</span><span class="p">)</span>
            <span class="n">new_result</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">itable</span></div></div>


<div class="viewcode-block" id="ComplexPlate2ForceArray"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexPlate2ForceArray">[docs]</a><span class="k">class</span> <span class="nc">ComplexPlate2ForceArray</span><span class="p">(</span><span class="n">ComplexForceObject</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">ComplexForceObject</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">)</span>
        <span class="c1">#self.code = [self.format_code, self.sort_code, self.s_code]</span>

        <span class="c1">#self.ntimes = 0  # or frequency/mode</span>
        <span class="c1">#self.ntotal = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># result specific</span>

        <span class="c1">#if is_sort1:</span>
            <span class="c1">#pass</span>
        <span class="c1">#else:</span>
            <span class="c1">#raise NotImplementedError(&#39;SORT2&#39;)</span>

<div class="viewcode-block" id="ComplexPlate2ForceArray.get_headers"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexPlate2ForceArray.get_headers">[docs]</a>    <span class="k">def</span> <span class="nf">get_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;mx&#39;</span><span class="p">,</span> <span class="s1">&#39;my&#39;</span><span class="p">,</span> <span class="s1">&#39;mxy&#39;</span><span class="p">,</span> <span class="s1">&#39;bmx&#39;</span><span class="p">,</span> <span class="s1">&#39;bmy&#39;</span><span class="p">,</span> <span class="s1">&#39;bmxy&#39;</span><span class="p">,</span> <span class="s1">&#39;tx&#39;</span><span class="p">,</span> <span class="s1">&#39;ty&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">headers</span></div>

<div class="viewcode-block" id="ComplexPlate2ForceArray.build"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexPlate2ForceArray.build">[docs]</a>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;sizes the vectorized attributes of the ComplexPlate2ForceArray&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ntimes=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;nelements=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ntotal=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span>
        <span class="c1">#self.names = []</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">//=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="c1">#print(&#39;ntimes=%s nelements=%s ntotal=%s&#39; % (self.ntimes, self.nelements, self.ntotal))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itime</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#self.ntimes = 0</span>
        <span class="c1">#self.nelements = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1">#print(&quot;ntimes=%s nelements=%s ntotal=%s&quot; % (self.ntimes, self.nelements, self.ntotal))</span>
        <span class="n">dtype</span><span class="p">,</span> <span class="n">idtype</span><span class="p">,</span> <span class="n">cfdtype</span> <span class="o">=</span> <span class="n">get_complex_times_dtype</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">element</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nelements</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">idtype</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">idtype</span><span class="p">)</span>

        <span class="c1">#[mx, my, mxy, bmx, bmy, bmxy, tx, ty]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">cfdtype</span><span class="p">)</span></div>

<div class="viewcode-block" id="ComplexPlate2ForceArray.build_dataframe"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexPlate2ForceArray.build_dataframe">[docs]</a>    <span class="k">def</span> <span class="nf">build_dataframe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;creates a pandas dataframe&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">()</span>
        <span class="k">assert</span> <span class="mi">0</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span>
        <span class="c1">#print(self.element_node)</span>
        <span class="n">element_node</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]]</span>
        <span class="k">assert</span> <span class="mi">0</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">):</span>
            <span class="c1"># Freq                  0.00001  10.00000 20.00000 30.00000                  40.00000 50.00000 60.00000</span>
            <span class="c1"># ElementID NodeID Item</span>
            <span class="c1"># 6         0      mx         0j       0j       0j       0j    (-705.7376-1327.1312j)       0j       0j</span>
            <span class="c1">#                  my         0j       0j       0j       0j      (7404.8853+13924.8j)       0j       0j</span>
            <span class="c1">#                  mxy        0j       0j       0j       0j  (-101.319756-190.53061j)       0j       0j</span>
            <span class="c1">#                  bmx        0j       0j       0j       0j    (3.0701134+5.7733126j)       0j       0j</span>
            <span class="c1">#                  bmy        0j       0j       0j       0j     (98.75731+185.71196j)       0j       0j</span>
            <span class="c1">#                  bmxy       0j       0j       0j       0j   (0.25202343+0.4739271j)       0j       0j</span>
            <span class="c1">#                  tx         0j       0j       0j       0j    (14.426779+27.129389j)       0j       0j</span>
            <span class="c1">#                  ty         0j       0j       0j       0j     (-199.6823-375.5002j)       0j       0j</span>
            <span class="c1">#           4      mx         0j       0j       0j       0j    (-2934.639-5518.5537j)       0j       0j</span>
            <span class="c1">#                  my         0j       0j       0j       0j    (7516.2485+14134.217j)       0j       0j</span>
            <span class="c1">#                  mxy        0j       0j       0j       0j  (-101.319756-190.53061j)       0j       0j</span>
            <span class="c1">#                  bmx        0j       0j       0j       0j    (-19.69526-37.036705j)       0j       0j</span>
            <span class="c1">#                  bmy        0j       0j       0j       0j     (100.64615+189.2639j)       0j       0j</span>
            <span class="c1">#                  bmxy       0j       0j       0j       0j   (0.25202343+0.4739271j)       0j       0j</span>
            <span class="c1">#                  tx         0j       0j       0j       0j    (14.426779+27.129389j)       0j       0j</span>
            <span class="c1">#                  ty         0j       0j       0j       0j     (-199.6823-375.5002j)       0j       0j</span>
            <span class="n">column_names</span><span class="p">,</span> <span class="n">column_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_dataframe_transient_header</span><span class="p">()</span>
            <span class="n">data_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_pandas_transient_element_node</span><span class="p">(</span>
                <span class="n">column_values</span><span class="p">,</span> <span class="n">column_names</span><span class="p">,</span>
                <span class="n">headers</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

            <span class="c1">#data_frame = pd.Panel(self.data, items=column_values,</span>
                                  <span class="c1">#major_axis=element_node, minor_axis=headers).to_frame()</span>
            <span class="c1">#data_frame.columns.names = column_names</span>
            <span class="c1">#data_frame.index.names = [&#39;ElementID&#39;, &#39;NodeID&#39;, &#39;Item&#39;]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data_frame</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
                                  <span class="n">major_axis</span><span class="o">=</span><span class="n">element_node</span><span class="p">,</span> <span class="n">minor_axis</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
            <span class="n">data_frame</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Static&#39;</span><span class="p">]</span>
            <span class="n">data_frame</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ElementID&#39;</span><span class="p">,</span> <span class="s1">&#39;NodeID&#39;</span><span class="p">,</span> <span class="s1">&#39;Item&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_frame</span> <span class="o">=</span> <span class="n">data_frame</span></div>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_eq_header</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span> <span class="o">==</span> <span class="n">table</span><span class="o">.</span><span class="n">is_sort1</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;table_name=</span><span class="si">%r</span><span class="s1"> class_name=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">ie</span><span class="p">,</span> <span class="n">e</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">):</span>
                    <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">nid</span><span class="p">)</span> <span class="o">=</span> <span class="n">e</span>
                    <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">ie</span><span class="p">,</span> <span class="p">:]</span>
                    <span class="n">t2</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">ie</span><span class="p">,</span> <span class="p">:]</span>
                    <span class="p">(</span><span class="n">mx1</span><span class="p">,</span> <span class="n">my1</span><span class="p">,</span> <span class="n">mxy1</span><span class="p">,</span> <span class="n">bmx1</span><span class="p">,</span> <span class="n">bmy1</span><span class="p">,</span> <span class="n">bmxy1</span><span class="p">,</span> <span class="n">tx1</span><span class="p">,</span> <span class="n">ty1</span><span class="p">)</span> <span class="o">=</span> <span class="n">t1</span>
                    <span class="p">(</span><span class="n">mx2</span><span class="p">,</span> <span class="n">my2</span><span class="p">,</span> <span class="n">mxy2</span><span class="p">,</span> <span class="n">bmx2</span><span class="p">,</span> <span class="n">bmy2</span><span class="p">,</span> <span class="n">bmxy2</span><span class="p">,</span> <span class="n">tx2</span><span class="p">,</span> <span class="n">ty2</span><span class="p">)</span> <span class="o">=</span> <span class="n">t2</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="n">allclose</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">):</span>
                        <span class="n">base1</span> <span class="o">=</span> <span class="s1">&#39;(</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)   &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">nid</span><span class="p">)</span>
                        <span class="n">base2</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">base1</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="p">(</span>
                            <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span>
                            <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">(</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                <span class="n">base1</span><span class="p">,</span>
                                <span class="n">mx1</span><span class="p">,</span> <span class="n">my1</span><span class="p">,</span> <span class="n">mxy1</span><span class="p">,</span> <span class="n">bmx1</span><span class="p">,</span> <span class="n">bmy1</span><span class="p">,</span> <span class="n">bmxy1</span><span class="p">,</span> <span class="n">tx1</span><span class="p">,</span> <span class="n">ty1</span><span class="p">,</span>
                                <span class="n">base2</span><span class="p">,</span>
                                <span class="n">mx2</span><span class="p">,</span> <span class="n">my2</span><span class="p">,</span> <span class="n">mxy2</span><span class="p">,</span> <span class="n">bmx2</span><span class="p">,</span> <span class="n">bmy2</span><span class="p">,</span> <span class="n">bmxy2</span><span class="p">,</span> <span class="n">tx2</span><span class="p">,</span> <span class="n">ty2</span><span class="p">))</span>
                        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

<div class="viewcode-block" id="ComplexPlate2ForceArray.add_new_element_sort1"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexPlate2ForceArray.add_new_element_sort1">[docs]</a>    <span class="k">def</span> <span class="nf">add_new_element_sort1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">term</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mxy</span><span class="p">,</span> <span class="n">bmx</span><span class="p">,</span> <span class="n">bmy</span><span class="p">,</span> <span class="n">bmxy</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ielement</span><span class="p">]</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itotal</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">eid</span><span class="p">,</span> <span class="n">nid</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mxy</span><span class="p">,</span> <span class="n">bmx</span><span class="p">,</span> <span class="n">bmy</span><span class="p">,</span> <span class="n">bmxy</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">+=</span> <span class="mi">1</span></div>

    <span class="k">def</span> <span class="nf">add_sort1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mxy</span><span class="p">,</span> <span class="n">bmx</span><span class="p">,</span> <span class="n">bmy</span><span class="p">,</span> <span class="n">bmxy</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;unvectorized method for adding SORT1 transient data&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span> <span class="ow">and</span> <span class="n">eid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;dt=</span><span class="si">%s</span><span class="s1"> eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
        <span class="c1">#assert self.element[self.ielement - 1] == eid, eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itotal</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">eid</span><span class="p">,</span> <span class="n">nid</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mxy</span><span class="p">,</span> <span class="n">bmx</span><span class="p">,</span> <span class="n">bmy</span><span class="p">,</span> <span class="n">bmxy</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nnodes_per_element</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">144</span><span class="p">:</span>  <span class="c1"># CQUAD4</span>
            <span class="n">nnodes_element</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">64</span><span class="p">:</span>  <span class="c1"># CQUAD8</span>
            <span class="n">nnodes_element</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">82</span><span class="p">:</span>  <span class="c1"># CQUADR</span>
            <span class="n">nnodes_element</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">75</span><span class="p">:</span>  <span class="c1"># CTRIA6</span>
            <span class="n">nnodes_element</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">70</span><span class="p">:</span>  <span class="c1"># CTRIAR</span>
            <span class="n">nnodes_element</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;element_type=</span><span class="si">%s</span><span class="s1"> element_name=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">nnodes_element</span>

<div class="viewcode-block" id="ComplexPlate2ForceArray.get_stats"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexPlate2ForceArray.get_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">short</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="s1">&#39;&lt;</span><span class="si">%s</span><span class="s1">&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                <span class="s1">&#39;  ntimes: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span>
                <span class="s1">&#39;  ntotal: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span>
            <span class="p">]</span>

        <span class="n">nelements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="c1">#ntotal = self.ntotal</span>

        <span class="n">msg</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">):</span>  <span class="c1"># transient</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> ntimes=</span><span class="si">%i</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="s1">; table_name=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">))</span>
            <span class="n">ntimes_word</span> <span class="o">=</span> <span class="s1">&#39;ntimes&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="s1">; table_name=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">))</span>
            <span class="n">ntimes_word</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  eType</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data: [</span><span class="si">%s</span><span class="s1">, nnodes, </span><span class="si">%i</span><span class="s1">] where </span><span class="si">%i</span><span class="s1">=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">ntimes_word</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">headers</span><span class="p">))))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data.shape = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
        <span class="c1">#msg.append(&#39;  element type: %s\n&#39; % self.element_type)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  element name: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_code</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="ComplexPlate2ForceArray.get_f06_header"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexPlate2ForceArray.get_f06_header">[docs]</a>    <span class="k">def</span> <span class="nf">get_f06_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">loads</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;    ELEMENT                - MEMBRANE  FORCES -                        - BENDING MOMENTS -               - TRANSVERSE SHEAR FORCES -</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;      ID              FX            FY            FXY             MX            MY            MXY             QX            QY</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,]</span>
        <span class="k">if</span> <span class="n">is_mag_phase</span><span class="p">:</span>
            <span class="n">mag_real</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                                                         (MAGNITUDE/PHASE)</span><span class="se">\n</span><span class="s1"> </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mag_real</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                                                          (REAL/IMAGINARY)</span><span class="se">\n</span><span class="s1"> </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>

        <span class="n">cquad4_bilinear</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                  C O M P L E X   F O R C E S   I N   Q U A D R I L A T E R A L   E L E M E N T S   ( Q U A D 4 )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>  <span class="c1"># good</span>
        <span class="n">cquad4_linear</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                  C O M P L E X   F O R C E S   I N   Q U A D R I L A T E R A L   E L E M E N T S   ( Q U A D 4 )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>  <span class="c1"># good</span>
        <span class="n">ctria3</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                     C O M P L E X   F O R C E S   I N   T R I A N G U L A R   E L E M E N T S   ( T R I A 3 )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>  <span class="c1"># good</span>
        <span class="n">cquad8</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                  C O M P L E X   F O R C E S   I N   Q U A D R I L A T E R A L   E L E M E N T S   ( Q U A D 8 )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="n">cquadr</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                  C O M P L E X   F O R C E S   I N   Q U A D R I L A T E R A L   E L E M E N T S   ( Q U A D R )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="n">ctria6</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                     C O M P L E X   F O R C E S   I N   T R I A N G U L A R   E L E M E N T S   ( T R I A 6 )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="n">ctriar</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                     C O M P L E X   F O R C E S   I N   T R I A N G U L A R   E L E M E N T S   ( T R I A R )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>

        <span class="c1">#is_bilinear = False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">144</span><span class="p">:</span> <span class="c1"># CQUAD4</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">cquad4_linear</span> <span class="o">+</span> <span class="n">mag_real</span> <span class="o">+</span> <span class="n">loads</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">33</span><span class="p">:</span> <span class="c1"># CQUAD4</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">cquad4_bilinear</span> <span class="o">+</span> <span class="n">mag_real</span> <span class="o">+</span> <span class="n">loads</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">64</span><span class="p">:</span>  <span class="c1">#CQUAD8</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">cquad8</span> <span class="o">+</span> <span class="n">mag_real</span> <span class="o">+</span> <span class="n">loads</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">82</span><span class="p">:</span>  <span class="c1"># CQUADR</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">cquadr</span> <span class="o">+</span> <span class="n">mag_real</span> <span class="o">+</span> <span class="n">loads</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">74</span><span class="p">:</span> <span class="c1"># CTRIA3</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">ctria3</span> <span class="o">+</span> <span class="n">mag_real</span> <span class="o">+</span> <span class="n">loads</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">75</span><span class="p">:</span>  <span class="c1"># CTRIA6</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">ctria6</span> <span class="o">+</span> <span class="n">mag_real</span> <span class="o">+</span> <span class="n">loads</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">70</span><span class="p">:</span>  <span class="c1"># CTRIAR</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">ctriar</span> <span class="o">+</span> <span class="n">mag_real</span> <span class="o">+</span> <span class="n">loads</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;name=</span><span class="si">%r</span><span class="s1"> type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="ComplexPlate2ForceArray.get_element_index"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexPlate2ForceArray.get_element_index">[docs]</a>    <span class="k">def</span> <span class="nf">get_element_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eids</span><span class="p">):</span>
        <span class="c1"># elements are always sorted; nodes are not</span>
        <span class="n">itot</span> <span class="o">=</span> <span class="n">searchsorted</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">)</span>  <span class="c1">#[0]</span>
        <span class="k">return</span> <span class="n">itot</span></div>

<div class="viewcode-block" id="ComplexPlate2ForceArray.eid_to_element_node_index"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexPlate2ForceArray.eid_to_element_node_index">[docs]</a>    <span class="k">def</span> <span class="nf">eid_to_element_node_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eids</span><span class="p">):</span>
        <span class="c1">#ind = ravel([searchsorted(self.element == eid) for eid in eids])</span>
        <span class="n">ind</span> <span class="o">=</span> <span class="n">searchsorted</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">)</span>
        <span class="c1">#ind = ind.reshape(ind.size)</span>
        <span class="c1">#ind.sort()</span>
        <span class="k">return</span> <span class="n">ind</span></div>

<div class="viewcode-block" id="ComplexPlate2ForceArray.write_f06"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexPlate2ForceArray.write_f06">[docs]</a>    <span class="k">def</span> <span class="nf">write_f06</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f06_file</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">page_stamp</span><span class="o">=</span><span class="s1">&#39;PAGE </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">page_num</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">header</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">msg_temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_f06_header</span><span class="p">(</span><span class="n">is_mag_phase</span><span class="o">=</span><span class="n">is_mag_phase</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="n">is_sort1</span><span class="p">)</span>

        <span class="c1"># write the f06</span>
        <span class="c1">#(ntimes, ntotal, two) = self.data.shape</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">eids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span>
        <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ntimes</span><span class="p">):</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>  <span class="c1"># TODO: rename this...</span>
            <span class="n">header</span> <span class="o">=</span> <span class="n">_eigenvalue_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">itime</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">header</span> <span class="o">+</span> <span class="n">msg_temp</span><span class="p">))</span>

            <span class="c1">#print(&quot;self.data.shape=%s itime=%s ieids=%s&quot; % (str(self.data.shape), itime, str(ieids)))</span>
            <span class="n">mx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">my</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">mxy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]</span>
            <span class="n">bmx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">3</span><span class="p">]</span>
            <span class="n">bmy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">4</span><span class="p">]</span>
            <span class="n">bmxy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">5</span><span class="p">]</span>
            <span class="n">tx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">6</span><span class="p">]</span>
            <span class="n">ty</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">7</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">eid</span><span class="p">,</span> <span class="n">mxi</span><span class="p">,</span> <span class="n">myi</span><span class="p">,</span> <span class="n">mxyi</span><span class="p">,</span> <span class="n">bmxi</span><span class="p">,</span> <span class="n">bmyi</span><span class="p">,</span> <span class="n">bmxyi</span><span class="p">,</span> <span class="n">txi</span><span class="p">,</span> <span class="n">tyi</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mxy</span><span class="p">,</span> <span class="n">bmx</span><span class="p">,</span> <span class="n">bmy</span><span class="p">,</span> <span class="n">bmxy</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">):</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">write_imag_floats_13e</span><span class="p">([</span><span class="n">mxi</span><span class="p">,</span> <span class="n">myi</span><span class="p">,</span> <span class="n">mxyi</span><span class="p">,</span> <span class="n">bmxi</span><span class="p">,</span> <span class="n">bmyi</span><span class="p">,</span> <span class="n">bmxyi</span><span class="p">,</span> <span class="n">txi</span><span class="p">,</span> <span class="n">tyi</span><span class="p">],</span> <span class="n">is_mag_phase</span><span class="p">)</span>
                <span class="p">[</span><span class="n">smxr</span><span class="p">,</span> <span class="n">smyr</span><span class="p">,</span> <span class="n">smxyr</span><span class="p">,</span> <span class="n">sbmxr</span><span class="p">,</span> <span class="n">sbmyr</span><span class="p">,</span> <span class="n">sbmxyr</span><span class="p">,</span> <span class="n">stxr</span><span class="p">,</span> <span class="n">styr</span><span class="p">,</span>
                 <span class="n">smxi</span><span class="p">,</span> <span class="n">smyi</span><span class="p">,</span> <span class="n">smxyi</span><span class="p">,</span> <span class="n">sbmxi</span><span class="p">,</span> <span class="n">sbmyi</span><span class="p">,</span> <span class="n">sbmxyi</span><span class="p">,</span> <span class="n">stxi</span><span class="p">,</span> <span class="n">styi</span><span class="p">]</span> <span class="o">=</span> <span class="n">out</span>
                <span class="c1">#&quot;&quot;&quot;</span>
                    <span class="c1">#ELEMENT                - MEMBRANE  FORCES -                        - BENDING MOMENTS -               - TRANSVERSE SHEAR FORCES -</span>
                      <span class="c1">#ID              FX            FY            FXY             MX            MY            MXY             QX            QY</span>
                <span class="c1">#0       564       1.543439E+03  7.311177E+02  1.322702E+02    1.080178E+00  1.699104E+00  2.618547E-01    3.877034E+01  4.518554E+00</span>
                                  <span class="c1">#358.3129      358.0245      177.5593        177.5292      178.2112        0.0907        358.1465      179.4567</span>
                <span class="c1">#&quot;&quot;&quot;</span>
                <span class="c1">#                fx     fy     fxy     mx     my     mxy    qx      qy</span>
                <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="s1">&#39;0  </span><span class="si">%8i</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="s1">&#39;   </span><span class="si">%8s</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="n">eid</span><span class="p">,</span> <span class="n">smxr</span><span class="p">,</span> <span class="n">smyr</span><span class="p">,</span> <span class="n">smxyr</span><span class="p">,</span> <span class="n">sbmxr</span><span class="p">,</span> <span class="n">sbmyr</span><span class="p">,</span> <span class="n">sbmxyr</span><span class="p">,</span> <span class="n">stxr</span><span class="p">,</span> <span class="n">styr</span><span class="p">,</span>
                        <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">smxi</span><span class="p">,</span> <span class="n">smyi</span><span class="p">,</span> <span class="n">smxyi</span><span class="p">,</span> <span class="n">sbmxi</span><span class="p">,</span> <span class="n">sbmyi</span><span class="p">,</span> <span class="n">sbmxyi</span><span class="p">,</span> <span class="n">stxi</span><span class="p">,</span> <span class="n">styi</span><span class="p">))</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">page_stamp</span> <span class="o">%</span> <span class="n">page_num</span><span class="p">)</span>
            <span class="n">page_num</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">page_num</span> <span class="o">-</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="ComplexPlate2ForceArray.write_op2"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexPlate2ForceArray.write_op2">[docs]</a>    <span class="k">def</span> <span class="nf">write_op2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op2</span><span class="p">,</span> <span class="n">op2_ascii</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="n">new_result</span><span class="p">,</span>
                  <span class="n">date</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">endian</span><span class="o">=</span><span class="s1">&#39;&gt;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;writes an OP2&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">inspect</span>
        <span class="kn">from</span> <span class="nn">struct</span> <span class="kn">import</span> <span class="n">Struct</span><span class="p">,</span> <span class="n">pack</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
        <span class="n">call_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getouterframes</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.write_op2: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">call_frame</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]))</span>

        <span class="k">if</span> <span class="n">itable</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_table_header</span><span class="p">(</span><span class="n">op2</span><span class="p">,</span> <span class="n">op2_ascii</span><span class="p">,</span> <span class="n">date</span><span class="p">)</span>
            <span class="n">itable</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span>

        <span class="c1">#if isinstance(self.nonlinear_factor, float):</span>
            <span class="c1">#op2_format = &#39;%sif&#39; % (7 * self.ntimes)</span>
            <span class="c1">#raise NotImplementedError()</span>
        <span class="c1">#else:</span>
            <span class="c1">#op2_format = &#39;i21f&#39;</span>
        <span class="c1">#s = Struct(op2_format)</span>

        <span class="c1">#eids = self.element</span>
        <span class="n">eids_device</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">device_code</span>
        <span class="n">eids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>

        <span class="c1"># table 4 info</span>
        <span class="c1">#ntimes = self.data.shape[0]</span>
        <span class="c1">#nnodes = self.data.shape[1]</span>
        <span class="n">nelements</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">)</span>

        <span class="c1"># 21 = 1 node, 3 principal, 6 components, 9 vectors, 2 p/ovm</span>
        <span class="c1">#ntotal = ((nnodes * 21) + 1) + (nelements * 4)</span>

        <span class="n">ntotali</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>

        <span class="n">nnodes_all</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="n">numwide_imag</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">nnodes_all</span> <span class="o">*</span> <span class="mi">17</span>
        <span class="k">assert</span> <span class="n">ntotali</span> <span class="o">==</span> <span class="n">numwide_imag</span>

        <span class="n">ntotal</span> <span class="o">=</span> <span class="n">ntotali</span> <span class="o">*</span> <span class="n">nelements</span>

        <span class="c1">#print(&#39;shape = %s&#39; % str(self.data.shape))</span>
        <span class="c1">#assert self.ntimes == 1, self.ntimes</span>

        <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  ntimes = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">)</span>

        <span class="c1">#fmt = &#39;%2i %6f&#39;</span>
        <span class="c1">#print(&#39;ntotal=%s&#39; % (ntotal))</span>
        <span class="c1">#assert ntotal == 193, ntotal</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">:</span>
            <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i 4s i 16f&#39;</span><span class="p">)</span>
            <span class="n">struct2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i 16f&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;SORT2&#39;</span><span class="p">)</span>

        <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-nelements=</span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="n">nelements</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_table_3</span><span class="p">(</span><span class="n">op2</span><span class="p">,</span> <span class="n">op2_ascii</span><span class="p">,</span> <span class="n">new_result</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="n">itime</span><span class="p">)</span>

            <span class="c1"># record 4</span>
            <span class="c1">#print(&#39;stress itable = %s&#39; % itable)</span>
            <span class="n">itable</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">]</span>
            <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%i</span><span class="s1">i&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">header</span><span class="p">),</span> <span class="o">*</span><span class="n">header</span><span class="p">))</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, 0, 4]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, </span><span class="si">%s</span><span class="s1">, 4]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">itable</span><span class="p">))</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, </span><span class="si">%i</span><span class="s1">, 4]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">))</span>

            <span class="n">mx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">my</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">mxy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]</span>
            <span class="n">bmx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">3</span><span class="p">]</span>
            <span class="n">bmy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">4</span><span class="p">]</span>
            <span class="n">bmxy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">5</span><span class="p">]</span>
            <span class="n">tx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">6</span><span class="p">]</span>
            <span class="n">ty</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">7</span><span class="p">]</span>

            <span class="n">nwide</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">ielement</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">for</span> <span class="n">eid</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">mxi</span><span class="p">,</span> <span class="n">myi</span><span class="p">,</span> <span class="n">mxyi</span><span class="p">,</span> <span class="n">bmxi</span><span class="p">,</span> <span class="n">bmyi</span><span class="p">,</span> <span class="n">bmxyi</span><span class="p">,</span> <span class="n">txi</span><span class="p">,</span> <span class="n">tyi</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mxy</span><span class="p">,</span> <span class="n">bmx</span><span class="p">,</span> <span class="n">bmy</span><span class="p">,</span> <span class="n">bmxy</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">nid</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ielement</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">eid_device</span> <span class="o">=</span> <span class="n">eids_device</span><span class="p">[</span><span class="n">ielement</span><span class="p">]</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">eid_device</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;CEN/&#39;</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span>
                            <span class="n">mxi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">myi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">mxyi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">bmxi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">bmyi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">bmxyi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">txi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">tyi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span>
                            <span class="n">mxi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">myi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">mxyi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">bmxi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">bmyi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">bmxyi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">txi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">tyi</span><span class="o">.</span><span class="n">imag</span><span class="p">]</span>
                    <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid_device=</span><span class="si">%s</span><span class="s1"> data=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">)))</span>
                    <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">struct1</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">nid</span><span class="p">,</span>
                            <span class="n">mxi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">myi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">mxyi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">bmxi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">bmyi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">bmxyi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">txi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">tyi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span>
                            <span class="n">mxi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">myi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">mxyi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">bmxi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">bmyi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">bmxyi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">txi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">tyi</span><span class="o">.</span><span class="n">imag</span><span class="p">]</span>
                    <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;    data=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">)))</span>
                    <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">struct2</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">))</span>
                <span class="n">nwide</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">nwide</span> <span class="o">==</span> <span class="n">ntotal</span><span class="p">,</span> <span class="s1">&#39;nwide=</span><span class="si">%s</span><span class="s1"> ntotal=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nwide</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">)</span>
            <span class="n">itable</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,]</span>
            <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">header</span><span class="p">))</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;footer = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">header</span><span class="p">)</span>
            <span class="n">new_result</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">itable</span></div></div>



<div class="viewcode-block" id="ComplexCBarWeldForceArray"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBarWeldForceArray">[docs]</a><span class="k">class</span> <span class="nc">ComplexCBarWeldForceArray</span><span class="p">(</span><span class="n">ComplexForceObject</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">ComplexForceObject</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">result_flag</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#self.code = [self.format_code, self.sort_code, self.s_code]</span>

        <span class="c1">#self.ntimes = 0  # or frequency/mode</span>
        <span class="c1">#self.ntotal = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itime</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># result specific</span>
        <span class="c1">#self.element_type = &#39;CBAR&#39;</span>
        <span class="c1">#self.cid = {}  # gridGauss</span>

        <span class="c1">#if is_sort1:</span>
            <span class="c1">##sort1</span>
            <span class="c1">#pass</span>
        <span class="c1">#else:</span>
            <span class="c1">#raise NotImplementedError(&#39;SORT2&#39;)</span>

<div class="viewcode-block" id="ComplexCBarWeldForceArray.get_headers"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBarWeldForceArray.get_headers">[docs]</a>    <span class="k">def</span> <span class="nf">get_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bending_moment_1a&#39;</span><span class="p">,</span> <span class="s1">&#39;bending_moment_2a&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;bending_moment_1b&#39;</span><span class="p">,</span> <span class="s1">&#39;bending_moment_2b&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;shear1&#39;</span><span class="p">,</span> <span class="s1">&#39;shear2&#39;</span><span class="p">,</span> <span class="s1">&#39;axial&#39;</span><span class="p">,</span> <span class="s1">&#39;torque&#39;</span><span class="p">,</span> <span class="p">]</span>
        <span class="k">return</span> <span class="n">headers</span></div>

<div class="viewcode-block" id="ComplexCBarWeldForceArray.build"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBarWeldForceArray.build">[docs]</a>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;sizes the vectorized attributes of the ComplexCBarForceArray&quot;&quot;&quot;</span>
        <span class="c1">#print(&#39;ntimes=%s nelements=%s ntotal=%s subtitle=%s&#39; % (</span>
            <span class="c1">#self.ntimes, self.nelements, self.ntotal, self.subtitle))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="c1">#self.names = []</span>
        <span class="c1">#self.nelements //= nnodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">//=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="c1">#self.ntotal //= self.ntimes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itime</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1">#print(&#39;ntotal=%s ntimes=%s nelements=%s&#39; % (self.ntotal, self.ntimes, self.nelements))</span>

        <span class="c1">#print(&quot;ntimes=%s nelements=%s ntotal=%s&quot; % (self.ntimes, self.nelements, self.ntotal))</span>
        <span class="n">dtype</span><span class="p">,</span> <span class="n">idtype</span><span class="p">,</span> <span class="n">cfdtype</span> <span class="o">=</span> <span class="n">get_complex_times_dtype</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">idtype</span><span class="p">)</span>

        <span class="c1"># the number is messed up because of the offset for the element&#39;s properties</span>

        <span class="c1">#if not self.nelements * nnodes == self.ntotal:</span>
            <span class="c1">#msg = &#39;ntimes=%s nelements=%s nnodes=%s ne*nn=%s ntotal=%s&#39; % (</span>
                <span class="c1">#self.ntimes, self.nelements, nnodes, self.nelements * nnodes, self.ntotal)</span>
            <span class="c1">#raise RuntimeError(msg)</span>
        <span class="c1">#[bm1a, bm2a, bm1b, bm2b, ts1, ts2, af, trq]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">cfdtype</span><span class="p">)</span></div>


<div class="viewcode-block" id="ComplexCBarWeldForceArray.build_dataframe"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBarWeldForceArray.build_dataframe">[docs]</a>    <span class="k">def</span> <span class="nf">build_dataframe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;creates a pandas dataframe&quot;&quot;&quot;</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">()</span>
        <span class="n">column_names</span><span class="p">,</span> <span class="n">column_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_dataframe_transient_header</span><span class="p">()</span>
        <span class="n">data_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_pandas_transient_elements</span><span class="p">(</span><span class="n">column_values</span><span class="p">,</span> <span class="n">column_names</span><span class="p">,</span>
                                                           <span class="n">headers</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="c1">#self.data_frame = pd.Panel(self.data, items=column_values,</span>
                                   <span class="c1">#major_axis=self.element, minor_axis=headers).to_frame()</span>
        <span class="c1">#self.data_frame.columns.names = column_names</span>
        <span class="c1">#self.data_frame.index.names = [&#39;ElementID&#39;, &#39;Item&#39;]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_frame</span> <span class="o">=</span> <span class="n">data_frame</span></div>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span> <span class="o">==</span> <span class="n">table</span><span class="o">.</span><span class="n">is_sort1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_eq_header</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;table_name=</span><span class="si">%r</span><span class="s1"> class_name=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ntimes</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">ieid</span><span class="p">,</span> <span class="n">eid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">):</span>
                        <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">ieid</span><span class="p">,</span> <span class="p">:]</span>
                        <span class="n">t2</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">ieid</span><span class="p">,</span> <span class="p">:]</span>
                        <span class="p">(</span><span class="n">s1a1</span><span class="p">,</span> <span class="n">s2a1</span><span class="p">,</span> <span class="n">s3a1</span><span class="p">,</span> <span class="n">s4a1</span><span class="p">,</span> <span class="n">axial1</span><span class="p">,</span> <span class="n">s2a1</span><span class="p">,</span> <span class="n">s2b1</span><span class="p">,</span> <span class="n">s2c1</span><span class="p">,</span> <span class="n">s2d1</span><span class="p">)</span> <span class="o">=</span> <span class="n">t1</span>
                        <span class="p">(</span><span class="n">s1a2</span><span class="p">,</span> <span class="n">s2a2</span><span class="p">,</span> <span class="n">s3a2</span><span class="p">,</span> <span class="n">s4a2</span><span class="p">,</span> <span class="n">axial2</span><span class="p">,</span> <span class="n">s2a2</span><span class="p">,</span> <span class="n">s2b2</span><span class="p">,</span> <span class="n">s2c2</span><span class="p">,</span> <span class="n">s2d2</span><span class="p">)</span> <span class="o">=</span> <span class="n">t2</span>
                        <span class="c1">#d = t1 - t2</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">allclose</span><span class="p">([</span><span class="n">s1a1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s2a1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s3a1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s4a1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">axial1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s2a1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s2b1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s2c1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s2d1</span><span class="o">.</span><span class="n">real</span><span class="p">],</span>
                                        <span class="p">[</span><span class="n">s1a2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s2a2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s3a2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s4a2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">axial2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s2a2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s2b2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s2c2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s2d2</span><span class="o">.</span><span class="n">real</span><span class="p">],</span> <span class="n">atol</span><span class="o">=</span><span class="mf">0.0001</span><span class="p">):</span>
                        <span class="c1">#if not np.array_equal(t1, t2):</span>
                            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%-4s</span><span class="s1">  (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">      (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                <span class="n">eid</span><span class="p">,</span>
                                <span class="n">s1a1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s2a1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s3a1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s4a1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">axial1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s2a1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s2b1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s2c1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s2d1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span>
                                <span class="n">s1a2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s2a2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s3a2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s4a2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">axial2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s2a2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s2b2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s2c2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">s2d2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span>
                                <span class="p">)</span>
                            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">is_sort2</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">add_sort1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">bm1a</span><span class="p">,</span> <span class="n">bm2a</span><span class="p">,</span> <span class="n">bm1b</span><span class="p">,</span> <span class="n">bm2b</span><span class="p">,</span> <span class="n">ts1</span><span class="p">,</span> <span class="n">ts2</span><span class="p">,</span> <span class="n">af</span><span class="p">,</span> <span class="n">trq</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;unvectorized method for adding SORT1 transient data&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span> <span class="ow">and</span> <span class="n">eid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;dt=</span><span class="si">%s</span><span class="s1"> eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">bm1a</span><span class="p">,</span> <span class="n">bm2a</span><span class="p">,</span> <span class="n">bm1b</span><span class="p">,</span> <span class="n">bm2b</span><span class="p">,</span> <span class="n">ts1</span><span class="p">,</span> <span class="n">ts2</span><span class="p">,</span> <span class="n">af</span><span class="p">,</span> <span class="n">trq</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itotal</span><span class="p">]</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+=</span> <span class="mi">1</span>

<div class="viewcode-block" id="ComplexCBarWeldForceArray.get_stats"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBarWeldForceArray.get_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">short</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="s1">&#39;&lt;</span><span class="si">%s</span><span class="s1">&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                <span class="s1">&#39;  ntimes: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span>
                <span class="s1">&#39;  ntotal: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span>
            <span class="p">]</span>

        <span class="n">nelements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">):</span>  <span class="c1"># transient</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> ntimes=</span><span class="si">%i</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="s1">; table_name=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="s1">; table_name=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  eType, cid</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data: [ntimes, nelements, 8] where 8=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">())))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data.shape = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  is_sort1=</span><span class="si">%s</span><span class="s1"> is_sort2=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort2</span><span class="p">))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;  </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_code</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="ComplexCBarWeldForceArray.write_f06"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBarWeldForceArray.write_f06">[docs]</a>    <span class="k">def</span> <span class="nf">write_f06</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f06_file</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">page_stamp</span><span class="o">=</span><span class="s1">&#39;PAGE </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span>
                  <span class="n">page_num</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">header</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">#msg_temp, nnodes = get_f06_header(self, is_mag_phase, is_sort1)</span>


        <span class="c1">#is_sort1 = False</span>
        <span class="k">if</span> <span class="n">is_mag_phase</span><span class="p">:</span>
            <span class="n">mag_phase</span> <span class="o">=</span> <span class="s1">&#39;                                                          (MAGNITUDE/PHASE)</span><span class="se">\n</span><span class="s1"> </span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mag_phase</span> <span class="o">=</span> <span class="s1">&#39;                                                          (REAL/IMAGINARY)</span><span class="se">\n</span><span class="s1"> </span><span class="se">\n</span><span class="s1">&#39;</span>


        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;freq&#39;</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;FREQUENCY&#39;</span>
        <span class="c1">#else: # mode</span>
            <span class="c1">#raise RuntimeError(name)</span>

        <span class="k">if</span> <span class="n">is_sort1</span><span class="p">:</span>
            <span class="n">line1</span> <span class="o">=</span> <span class="s1">&#39;0    ELEMENT         BEND-MOMENT-END-A            BEND-MOMENT-END-B                  SHEAR</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">line2</span> <span class="o">=</span> <span class="s1">&#39;       ID.         PLANE 1       PLANE 2        PLANE 1       PLANE 2        PLANE 1       PLANE 2        FORCE          TORQUE</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">line1</span> <span class="o">=</span> <span class="s1">&#39;                    BEND-MOMENT-END-A            BEND-MOMENT-END-B                  SHEAR</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">line2</span> <span class="o">=</span> <span class="s1">&#39;   </span><span class="si">%16s</span><span class="s1">       PLANE 1       PLANE 2        PLANE 1       PLANE 2        PLANE 1       PLANE 2        FORCE          TORQUE</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">name</span>

        <span class="c1"># force</span>
        <span class="n">msg_temp</span> <span class="o">=</span> <span class="n">header</span> <span class="o">+</span> <span class="p">[</span>
            <span class="s1">&#39;                             C O M P L E X   F O R C E S   I N   B A R   E L E M E N T S   ( C B A R )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="n">mag_phase</span><span class="p">,</span>
            <span class="s1">&#39; &#39;</span><span class="p">,</span>
            <span class="n">line1</span><span class="p">,</span>
            <span class="n">line2</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span> <span class="o">==</span> <span class="kc">True</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">is_sort1</span><span class="p">:</span>
                <span class="n">page_num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_sort1_as_sort1</span><span class="p">(</span><span class="n">f06_file</span><span class="p">,</span> <span class="n">page_num</span><span class="p">,</span> <span class="n">page_stamp</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">msg_temp</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write_sort1_as_sort2</span><span class="p">(</span><span class="n">f06_file</span><span class="p">,</span> <span class="n">page_num</span><span class="p">,</span> <span class="n">page_stamp</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">msg_temp</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span> <span class="o">==</span> <span class="kc">True</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">page_num</span> <span class="o">-</span> <span class="mi">1</span></div>

    <span class="k">def</span> <span class="nf">_write_sort1_as_sort1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f06_file</span><span class="p">,</span> <span class="n">page_num</span><span class="p">,</span> <span class="n">page_stamp</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">msg_temp</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="p">):</span>
        <span class="n">eids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span>
        <span class="c1">#times = self._times</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ntimes</span><span class="p">):</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>
            <span class="n">dt_line</span> <span class="o">=</span> <span class="s1">&#39; </span><span class="si">%14s</span><span class="s1"> = </span><span class="si">%12.5E</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">dt</span><span class="p">)</span>
            <span class="n">header</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt_line</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">header</span> <span class="o">+</span> <span class="n">msg_temp</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">msg</span><span class="p">))</span>

            <span class="c1">#bm1a, bm2a, bm1b, bm2b, ts1, ts2, af, trq</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span> <span class="o">==</span> <span class="kc">True</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">bm1a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">bm2a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">bm1b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]</span>
            <span class="n">bm2b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">3</span><span class="p">]</span>
            <span class="n">ts1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">4</span><span class="p">]</span>
            <span class="n">ts2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">5</span><span class="p">]</span>
            <span class="n">af</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">6</span><span class="p">]</span>
            <span class="n">trq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">7</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">eid</span><span class="p">,</span> <span class="n">bm1ai</span><span class="p">,</span> <span class="n">bm2ai</span><span class="p">,</span> <span class="n">bm1bi</span><span class="p">,</span> <span class="n">bm2bi</span><span class="p">,</span> <span class="n">ts1i</span><span class="p">,</span> <span class="n">ts2i</span><span class="p">,</span> <span class="n">afi</span><span class="p">,</span> <span class="n">trqi</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="n">bm1a</span><span class="p">,</span> <span class="n">bm2a</span><span class="p">,</span> <span class="n">bm1b</span><span class="p">,</span> <span class="n">bm2b</span><span class="p">,</span> <span class="n">ts1</span><span class="p">,</span> <span class="n">ts2</span><span class="p">,</span> <span class="n">af</span><span class="p">,</span> <span class="n">trq</span><span class="p">):</span>
                <span class="n">vals</span> <span class="o">=</span> <span class="p">(</span><span class="n">bm1ai</span><span class="p">,</span> <span class="n">bm2ai</span><span class="p">,</span> <span class="n">bm1bi</span><span class="p">,</span> <span class="n">bm2bi</span><span class="p">,</span> <span class="n">ts1i</span><span class="p">,</span> <span class="n">ts2i</span><span class="p">,</span> <span class="n">afi</span><span class="p">,</span> <span class="n">trqi</span><span class="p">)</span>
                <span class="n">vals2</span> <span class="o">=</span> <span class="n">write_imag_floats_13e</span><span class="p">(</span><span class="n">vals</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="p">)</span>
                <span class="p">(</span><span class="n">bm1air</span><span class="p">,</span> <span class="n">bm2air</span><span class="p">,</span> <span class="n">bm1bir</span><span class="p">,</span> <span class="n">bm2bir</span><span class="p">,</span> <span class="n">ts1ir</span><span class="p">,</span> <span class="n">ts2ir</span><span class="p">,</span> <span class="n">afir</span><span class="p">,</span> <span class="n">trqir</span><span class="p">,</span>
                 <span class="n">bm1aii</span><span class="p">,</span> <span class="n">bm2aii</span><span class="p">,</span> <span class="n">bm1bii</span><span class="p">,</span> <span class="n">bm2bii</span><span class="p">,</span> <span class="n">ts1ii</span><span class="p">,</span> <span class="n">ts2ii</span><span class="p">,</span> <span class="n">afii</span><span class="p">,</span> <span class="n">trqii</span><span class="p">)</span> <span class="o">=</span> <span class="n">vals2</span>

                <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;0</span><span class="si">%16i</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span>
                               <span class="s1">&#39; </span><span class="si">%14s</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                   <span class="n">eid</span><span class="p">,</span> <span class="n">bm1air</span><span class="p">,</span> <span class="n">bm2air</span><span class="p">,</span> <span class="n">bm1bir</span><span class="p">,</span> <span class="n">bm2bir</span><span class="p">,</span> <span class="n">ts1ir</span><span class="p">,</span> <span class="n">ts2ir</span><span class="p">,</span> <span class="n">afir</span><span class="p">,</span> <span class="n">trqir</span><span class="p">,</span>
                                   <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">bm1aii</span><span class="p">,</span> <span class="n">bm2aii</span><span class="p">,</span> <span class="n">bm1bii</span><span class="p">,</span> <span class="n">bm2bii</span><span class="p">,</span> <span class="n">ts1ii</span><span class="p">,</span> <span class="n">ts2ii</span><span class="p">,</span> <span class="n">afii</span><span class="p">,</span> <span class="n">trqii</span><span class="p">))</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">page_stamp</span> <span class="o">%</span> <span class="n">page_num</span><span class="p">)</span>
            <span class="n">page_num</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">page_num</span>

    <span class="k">def</span> <span class="nf">_write_sort1_as_sort2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f06_file</span><span class="p">,</span> <span class="n">page_num</span><span class="p">,</span> <span class="n">page_stamp</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">msg_temp</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="p">):</span>
        <span class="n">eids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span>
        <span class="n">times</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_times</span>
        <span class="c1">#ntimes = self.data.shape[0]</span>
        <span class="k">for</span> <span class="n">ieid</span><span class="p">,</span> <span class="n">eid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">eids</span><span class="p">):</span>
            <span class="n">eid_line</span> <span class="o">=</span> <span class="s1">&#39; ELEMENT-ID = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">)</span>
            <span class="n">header</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">eid_line</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">header</span> <span class="o">+</span> <span class="n">msg_temp</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">msg</span><span class="p">))</span>

            <span class="c1">#bm1a, bm2a, bm1b, bm2b, ts1, ts2, af, trq</span>
            <span class="n">bm1a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">ieid</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">bm2a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">ieid</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">bm1b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">ieid</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
            <span class="n">bm2b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">ieid</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
            <span class="n">ts1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">ieid</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
            <span class="n">ts2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">ieid</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
            <span class="n">af</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">ieid</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
            <span class="n">trq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">ieid</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">dt</span><span class="p">,</span> <span class="n">bm1ai</span><span class="p">,</span> <span class="n">bm2ai</span><span class="p">,</span> <span class="n">bm1bi</span><span class="p">,</span> <span class="n">bm2bi</span><span class="p">,</span> <span class="n">ts1i</span><span class="p">,</span> <span class="n">ts2i</span><span class="p">,</span> <span class="n">afi</span><span class="p">,</span> <span class="n">trqi</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">times</span><span class="p">,</span> <span class="n">bm1a</span><span class="p">,</span> <span class="n">bm2a</span><span class="p">,</span> <span class="n">bm1b</span><span class="p">,</span> <span class="n">bm2b</span><span class="p">,</span> <span class="n">ts1</span><span class="p">,</span> <span class="n">ts2</span><span class="p">,</span> <span class="n">af</span><span class="p">,</span> <span class="n">trq</span><span class="p">):</span>
                <span class="n">vals</span> <span class="o">=</span> <span class="p">(</span><span class="n">bm1ai</span><span class="p">,</span> <span class="n">bm2ai</span><span class="p">,</span> <span class="n">bm1bi</span><span class="p">,</span> <span class="n">bm2bi</span><span class="p">,</span> <span class="n">ts1i</span><span class="p">,</span> <span class="n">ts2i</span><span class="p">,</span> <span class="n">afi</span><span class="p">,</span> <span class="n">trqi</span><span class="p">)</span>
                <span class="n">vals2</span> <span class="o">=</span> <span class="n">write_imag_floats_13e</span><span class="p">(</span><span class="n">vals</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="p">)</span>
                <span class="p">(</span><span class="n">bm1air</span><span class="p">,</span> <span class="n">bm2air</span><span class="p">,</span> <span class="n">bm1bir</span><span class="p">,</span> <span class="n">bm2bir</span><span class="p">,</span> <span class="n">ts1ir</span><span class="p">,</span> <span class="n">ts2ir</span><span class="p">,</span> <span class="n">afir</span><span class="p">,</span> <span class="n">trqir</span><span class="p">,</span>
                 <span class="n">bm1aii</span><span class="p">,</span> <span class="n">bm2aii</span><span class="p">,</span> <span class="n">bm1bii</span><span class="p">,</span> <span class="n">bm2bii</span><span class="p">,</span> <span class="n">ts1ii</span><span class="p">,</span> <span class="n">ts2ii</span><span class="p">,</span> <span class="n">afii</span><span class="p">,</span> <span class="n">trqii</span><span class="p">)</span> <span class="o">=</span> <span class="n">vals2</span>

                <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;0</span><span class="si">%16s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span>
                               <span class="s1">&#39; </span><span class="si">%15s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                   <span class="n">write_float_12e</span><span class="p">(</span><span class="n">dt</span><span class="p">),</span>
                                   <span class="n">bm1air</span><span class="p">,</span> <span class="n">bm2air</span><span class="p">,</span> <span class="n">bm1bir</span><span class="p">,</span> <span class="n">bm2bir</span><span class="p">,</span> <span class="n">ts1ir</span><span class="p">,</span> <span class="n">ts2ir</span><span class="p">,</span> <span class="n">afir</span><span class="p">,</span> <span class="n">trqir</span><span class="p">,</span>
                                   <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">bm1aii</span><span class="p">,</span> <span class="n">bm2aii</span><span class="p">,</span> <span class="n">bm1bii</span><span class="p">,</span> <span class="n">bm2bii</span><span class="p">,</span> <span class="n">ts1ii</span><span class="p">,</span> <span class="n">ts2ii</span><span class="p">,</span> <span class="n">afii</span><span class="p">,</span> <span class="n">trqii</span><span class="p">))</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">page_stamp</span> <span class="o">%</span> <span class="n">page_num</span><span class="p">)</span>
            <span class="n">page_num</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">page_num</span>

<div class="viewcode-block" id="ComplexCBarWeldForceArray.write_op2"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBarWeldForceArray.write_op2">[docs]</a>    <span class="k">def</span> <span class="nf">write_op2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op2</span><span class="p">,</span> <span class="n">op2_ascii</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="n">new_result</span><span class="p">,</span>
                  <span class="n">date</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">endian</span><span class="o">=</span><span class="s1">&#39;&gt;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;writes an OP2&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">inspect</span>
        <span class="kn">from</span> <span class="nn">struct</span> <span class="kn">import</span> <span class="n">Struct</span><span class="p">,</span> <span class="n">pack</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
        <span class="n">call_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getouterframes</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.write_op2: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">call_frame</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]))</span>

        <span class="k">if</span> <span class="n">itable</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_table_header</span><span class="p">(</span><span class="n">op2</span><span class="p">,</span> <span class="n">op2_ascii</span><span class="p">,</span> <span class="n">date</span><span class="p">)</span>
            <span class="n">itable</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span>

        <span class="c1">#if isinstance(self.nonlinear_factor, float):</span>
            <span class="c1">#op2_format = &#39;%sif&#39; % (7 * self.ntimes)</span>
            <span class="c1">#raise NotImplementedError()</span>
        <span class="c1">#else:</span>
            <span class="c1">#op2_format = &#39;i21f&#39;</span>
        <span class="c1">#s = Struct(op2_format)</span>

        <span class="n">eids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span>
        <span class="n">eids_device</span> <span class="o">=</span> <span class="n">eids</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">device_code</span>

        <span class="c1"># table 4 info</span>
        <span class="c1">#ntimes = self.data.shape[0]</span>
        <span class="c1">#nnodes = self.data.shape[1]</span>
        <span class="n">nelements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># 21 = 1 node, 3 principal, 6 components, 9 vectors, 2 p/ovm</span>
        <span class="c1">#ntotal = ((nnodes * 21) + 1) + (nelements * 4)</span>

        <span class="n">ntotali</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="n">ntotali</span> <span class="o">*</span> <span class="n">nelements</span>

        <span class="c1">#print(&#39;shape = %s&#39; % str(self.data.shape))</span>
        <span class="c1">#assert self.ntimes == 1, self.ntimes</span>

        <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  ntimes = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">)</span>

        <span class="c1">#fmt = &#39;%2i %6f&#39;</span>
        <span class="c1">#print(&#39;ntotal=%s&#39; % (ntotal))</span>
        <span class="c1">#assert ntotal == 193, ntotal</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">:</span>
            <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i 16f&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;SORT2&#39;</span><span class="p">)</span>

        <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-nelements=</span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="n">nelements</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_table_3</span><span class="p">(</span><span class="n">op2</span><span class="p">,</span> <span class="n">op2_ascii</span><span class="p">,</span> <span class="n">new_result</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="n">itime</span><span class="p">)</span>

            <span class="c1"># record 4</span>
            <span class="c1">#print(&#39;stress itable = %s&#39; % itable)</span>
            <span class="n">itable</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">]</span>
            <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%i</span><span class="s1">i&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">header</span><span class="p">),</span> <span class="o">*</span><span class="n">header</span><span class="p">))</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, 0, 4]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, </span><span class="si">%s</span><span class="s1">, 4]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">itable</span><span class="p">))</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, </span><span class="si">%i</span><span class="s1">, 4]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">))</span>

            <span class="c1">#bm1a, bm2a, bm1b, bm2b, ts1, ts2, af, trq</span>
            <span class="n">bm1a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">bm2a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">bm1b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]</span>
            <span class="n">bm2b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">3</span><span class="p">]</span>
            <span class="n">ts1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">4</span><span class="p">]</span>
            <span class="n">ts2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">5</span><span class="p">]</span>
            <span class="n">af</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">6</span><span class="p">]</span>
            <span class="n">trq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">7</span><span class="p">]</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">eids_device</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">bm1a</span><span class="o">.</span><span class="n">real</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">eid_device</span><span class="p">,</span> <span class="n">bm1ai</span><span class="p">,</span> <span class="n">bm2ai</span><span class="p">,</span> <span class="n">bm1bi</span><span class="p">,</span> <span class="n">bm2bi</span><span class="p">,</span> <span class="n">ts1i</span><span class="p">,</span> <span class="n">ts2i</span><span class="p">,</span> <span class="n">afi</span><span class="p">,</span> <span class="n">trqi</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
                <span class="n">eids_device</span><span class="p">,</span> <span class="n">bm1a</span><span class="p">,</span> <span class="n">bm2a</span><span class="p">,</span> <span class="n">bm1b</span><span class="p">,</span> <span class="n">bm2b</span><span class="p">,</span> <span class="n">ts1</span><span class="p">,</span> <span class="n">ts2</span><span class="p">,</span> <span class="n">af</span><span class="p">,</span> <span class="n">trq</span><span class="p">):</span>

                <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">eid_device</span><span class="p">,</span>
                        <span class="n">bm1ai</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">bm2ai</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">bm1bi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">bm2bi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">ts1i</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">ts2i</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">afi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">trqi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span>
                        <span class="n">bm1ai</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">bm2ai</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">bm1bi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">bm2bi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">ts1i</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">ts2i</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">afi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">trqi</span><span class="o">.</span><span class="n">imag</span><span class="p">]</span>
                <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid_device=</span><span class="si">%s</span><span class="s1"> data=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">)))</span>
                <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">struct1</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">))</span>

            <span class="n">itable</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,]</span>
            <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">header</span><span class="p">))</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;footer = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">header</span><span class="p">)</span>
            <span class="n">new_result</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">itable</span></div></div>

<div class="viewcode-block" id="ComplexCBarForceArray"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBarForceArray">[docs]</a><span class="k">class</span> <span class="nc">ComplexCBarForceArray</span><span class="p">(</span><span class="n">ComplexCBarWeldForceArray</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="n">ComplexCBarWeldForceArray</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span></div>

<div class="viewcode-block" id="ComplexCWeldForceArray"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCWeldForceArray">[docs]</a><span class="k">class</span> <span class="nc">ComplexCWeldForceArray</span><span class="p">(</span><span class="n">ComplexCBarWeldForceArray</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="n">ComplexCBarWeldForceArray</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span></div>



<div class="viewcode-block" id="ComplexCBeamForceArray"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBeamForceArray">[docs]</a><span class="k">class</span> <span class="nc">ComplexCBeamForceArray</span><span class="p">(</span><span class="n">ComplexForceObject</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">ComplexForceObject</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">result_flag</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itime</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># result specific</span>
        <span class="c1">#self.element_type = &#39;CBEAM&#39;</span>

        <span class="c1">#if is_sort1:</span>
            <span class="c1">##sort1</span>
            <span class="c1">#pass</span>
        <span class="c1">#else:</span>
            <span class="c1">#raise NotImplementedError(&#39;SORT2&#39;)</span>

<div class="viewcode-block" id="ComplexCBeamForceArray.get_headers"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBeamForceArray.get_headers">[docs]</a>    <span class="k">def</span> <span class="nf">get_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;sd&#39;</span><span class="p">,</span> <span class="s1">&#39;bending_moment1&#39;</span><span class="p">,</span> <span class="s1">&#39;bending_moment2&#39;</span><span class="p">,</span> <span class="s1">&#39;shear1&#39;</span><span class="p">,</span> <span class="s1">&#39;shear2&#39;</span><span class="p">,</span>
            <span class="s1">&#39;axial_force&#39;</span><span class="p">,</span> <span class="s1">&#39;total_torque&#39;</span><span class="p">,</span> <span class="s1">&#39;warping_torque&#39;</span><span class="p">,</span> <span class="p">]</span>
        <span class="k">return</span> <span class="n">headers</span></div>

<div class="viewcode-block" id="ComplexCBeamForceArray.build"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBeamForceArray.build">[docs]</a>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;sizes the vectorized attributes of the ComplexCBeamForceArray&quot;&quot;&quot;</span>
        <span class="c1">#print(&#39;ntimes=%s nelements=%s ntotal=%s subtitle=%s&#39; % (</span>
            <span class="c1">#self.ntimes, self.nelements, self.ntotal, self.subtitle))</span>
        <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">11</span>

        <span class="c1">#self.names = []</span>
        <span class="c1">#self.nelements //= nnodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">//=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="c1">#self.ntotal //= self.ntimes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itime</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1">#print(&#39;ntotal=%s ntimes=%s nelements=%s&#39; % (self.ntotal, self.ntimes, self.nelements))</span>

        <span class="c1">#print(&quot;ntimes=%s nelements=%s ntotal=%s&quot; % (self.ntimes, self.nelements, self.ntotal))</span>
        <span class="n">dtype</span><span class="p">,</span> <span class="n">idtype</span><span class="p">,</span> <span class="n">cfdtype</span> <span class="o">=</span> <span class="n">get_complex_times_dtype</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="n">dtype</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span> <span class="n">idtype</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">idtype</span><span class="p">)</span>

        <span class="c1"># the number is messed up because of the offset for the element&#39;s properties</span>

        <span class="c1">#if not self.nelements * nnodes == self.ntotal:</span>
            <span class="c1">#msg = &#39;ntimes=%s nelements=%s nnodes=%s ne*nn=%s ntotal=%s&#39; % (</span>
                <span class="c1">#self.ntimes, self.nelements, nnodes, self.nelements * nnodes, self.ntotal)</span>
            <span class="c1">#raise RuntimeError(msg)</span>
        <span class="c1">#[sd, bm1, bm2, ts1, ts2, af, ttrq, wtrq]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="n">cfdtype</span><span class="p">)</span></div>

<div class="viewcode-block" id="ComplexCBeamForceArray.finalize"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBeamForceArray.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">sd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">real</span>
        <span class="n">i_sd_zero</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">sd</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">i_node_zero</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">assert</span> <span class="n">i_node_zero</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;CBEAM element_node hasnt been filled&#39;</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">union1d</span><span class="p">(</span><span class="n">i_sd_zero</span><span class="p">,</span> <span class="n">i_node_zero</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">i</span><span class="p">,</span> <span class="p">:]</span></div>

<div class="viewcode-block" id="ComplexCBeamForceArray.build_dataframe"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBeamForceArray.build_dataframe">[docs]</a>    <span class="k">def</span> <span class="nf">build_dataframe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;creates a pandas dataframe&quot;&quot;&quot;</span>
        <span class="c1"># Freq                                          0.00001             10.00000  ...            50.00000            60.00000</span>
        <span class="c1"># ElementID Location Item                                                     ...</span>
        <span class="c1"># 12.0      12.0     bending_moment1  0.000000+0.000000j  0.000000+0.000000j  ...  0.000000+0.000000j  0.000000+0.000000j</span>
        <span class="c1">#                    bending_moment2  0.000000+0.000000j  0.000000+0.000000j  ...  0.000000+0.000000j  0.000000+0.000000j</span>
        <span class="c1">#                    shear1           0.000000+0.000000j  0.000000+0.000000j  ...  0.000000+0.000000j  0.000000+0.000000j</span>
        <span class="c1">#                    shear2           0.000000+0.000000j  0.000000+0.000000j  ...  0.000000+0.000000j  0.000000+0.000000j</span>
        <span class="c1">#                    axial_force      0.000000+0.000000j  0.000000+0.000000j  ...  0.000000+0.000000j  0.000000+0.000000j</span>
        <span class="c1">#                    total_torque     0.000000+0.000000j  0.000000+0.000000j  ...  0.000000+0.000000j  0.000000+0.000000j</span>
        <span class="c1">#                    warping_torque   0.000000+0.000000j  0.000000+0.000000j  ...  0.000000+0.000000j  0.000000+0.000000j</span>
        <span class="c1"># 0.0       1.0      bending_moment1  0.000000+0.000000j  0.000000+0.000000j  ...  0.000000+0.000000j  0.000000+0.000000j</span>
        <span class="c1">#                    bending_moment2  0.000000+0.000000j  0.000000+0.000000j  ...  0.000000+0.000000j  0.000000+0.000000j</span>
        <span class="c1">#                    shear1           0.000000+0.000000j  0.000000+0.000000j  ...  0.000000+0.000000j  0.000000+0.000000j</span>
        <span class="c1">#                    shear2           0.000000+0.000000j  0.000000+0.000000j  ...  0.000000+0.000000j  0.000000+0.000000j</span>
        <span class="c1">#                    axial_force      0.000000+0.000000j  0.000000+0.000000j  ...  0.000000+0.000000j  0.000000+0.000000j</span>
        <span class="c1">#                    total_torque     0.000000+0.000000j  0.000000+0.000000j  ...  0.000000+0.000000j  0.000000+0.000000j</span>
        <span class="c1">#                    warping_torque   0.000000+0.000000j  0.000000+0.000000j  ...  0.000000+0.000000j  0.000000+0.000000j</span>
        <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">()[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">column_names</span><span class="p">,</span> <span class="n">column_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_dataframe_transient_header</span><span class="p">()</span>
        <span class="n">element_location</span> <span class="o">=</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">real</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="n">is_v25</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">__version__</span> <span class="o">&gt;=</span> <span class="s1">&#39;0.25&#39;</span>
        <span class="k">if</span> <span class="n">is_v25</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;skipping pandas </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">class_name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="c1"># wrong type for ElementID</span>
        <span class="c1">#data_frame = self._build_pandas_transient_element_node(</span>
            <span class="c1">#column_values, column_names,</span>
            <span class="c1">#headers, element_location, self.data[:, :, 1:])</span>
        <span class="c1">#data_frame.index.names = [&#39;ElementID&#39;, &#39;Location&#39;, &#39;Item&#39;]</span>
        <span class="c1">#data_frame.index[&#39;ElementID&#39;, :]# .astype(&#39;int32&#39;)</span>
        <span class="c1">#print(data_frame)</span>

        <span class="n">data_frame</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">:],</span> <span class="n">items</span><span class="o">=</span><span class="n">column_values</span><span class="p">,</span>
                              <span class="n">major_axis</span><span class="o">=</span><span class="n">element_location</span><span class="p">,</span> <span class="n">minor_axis</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
        <span class="n">data_frame</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">names</span> <span class="o">=</span> <span class="n">column_names</span>
        <span class="n">data_frame</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ElementID&#39;</span><span class="p">,</span> <span class="s1">&#39;Location&#39;</span><span class="p">,</span> <span class="s1">&#39;Item&#39;</span><span class="p">]</span>
        <span class="c1">#print(data_frame)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_frame</span> <span class="o">=</span> <span class="n">data_frame</span></div>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assert_equal</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>

<div class="viewcode-block" id="ComplexCBeamForceArray.assert_equal"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBeamForceArray.assert_equal">[docs]</a>    <span class="k">def</span> <span class="nf">assert_equal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="n">rtol</span><span class="o">=</span><span class="mf">1.e-5</span><span class="p">,</span> <span class="n">atol</span><span class="o">=</span><span class="mf">1.e-8</span><span class="p">):</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span> <span class="o">==</span> <span class="n">table</span><span class="o">.</span><span class="n">is_sort1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_eq_header</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">atol</span><span class="o">=</span><span class="n">atol</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;table_name=</span><span class="si">%r</span><span class="s1"> class_name=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ntimes</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">ieid</span><span class="p">,</span> <span class="n">eid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">):</span>
                        <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">ieid</span><span class="p">,</span> <span class="p">:]</span>
                        <span class="n">t2</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">ieid</span><span class="p">,</span> <span class="p">:]</span>
                        <span class="c1">#print(t1)</span>
                        <span class="c1">#&#39;sd&#39;, &#39;bending_moment1&#39;, &#39;bending_moment2&#39;, &#39;shear1&#39;, &#39;shear2&#39;,</span>
                        <span class="c1">#&#39;axial_force&#39;, &#39;total_torque&#39;, &#39;warping_torque&#39;, ]</span>

                        <span class="p">(</span><span class="n">sd1</span><span class="p">,</span> <span class="n">bm11</span><span class="p">,</span> <span class="n">bm21</span><span class="p">,</span> <span class="n">shear11</span><span class="p">,</span> <span class="n">shear21</span><span class="p">,</span> <span class="n">axial1</span><span class="p">,</span> <span class="n">total_torque1</span><span class="p">,</span> <span class="n">warp_torque1</span><span class="p">)</span> <span class="o">=</span> <span class="n">t1</span>
                        <span class="p">(</span><span class="n">sd2</span><span class="p">,</span> <span class="n">bm12</span><span class="p">,</span> <span class="n">bm22</span><span class="p">,</span> <span class="n">shear12</span><span class="p">,</span> <span class="n">shear22</span><span class="p">,</span> <span class="n">axial2</span><span class="p">,</span> <span class="n">total_torque2</span><span class="p">,</span> <span class="n">warp_torque2</span><span class="p">)</span> <span class="o">=</span> <span class="n">t2</span>
                        <span class="n">d</span> <span class="o">=</span> <span class="n">t1</span> <span class="o">-</span> <span class="n">t2</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">allclose</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">atol</span><span class="o">=</span><span class="n">atol</span><span class="p">):</span>
                            <span class="n">msg</span> <span class="o">+=</span> <span class="p">(</span>
                                <span class="s1">&#39;</span><span class="si">%-4s</span><span class="s1">  (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j)</span><span class="se">\n</span><span class="s1">&#39;</span>
                                <span class="s1">&#39;      (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j)</span><span class="se">\n</span><span class="s1">&#39;</span>
                                <span class="s1">&#39;  dt12=(</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                    <span class="n">eid</span><span class="p">,</span>
                                    <span class="n">bm11</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">bm11</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                                    <span class="n">bm21</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">bm21</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                                    <span class="n">shear11</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">shear11</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                                    <span class="n">shear21</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">shear21</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                                    <span class="n">axial1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">axial1</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                                    <span class="n">total_torque1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">total_torque1</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                                    <span class="n">warp_torque1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">warp_torque1</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>

                                    <span class="n">bm12</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">bm12</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                                    <span class="n">bm22</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">bm22</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                                    <span class="n">shear12</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">shear12</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                                    <span class="n">shear22</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">shear22</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                                    <span class="n">axial2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">axial2</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                                    <span class="n">total_torque2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">total_torque2</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                                    <span class="n">warp_torque2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">warp_torque2</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>

                                    <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                                    <span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                                    <span class="n">d</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">d</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                                    <span class="n">d</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">d</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                                    <span class="n">d</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">d</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                                    <span class="n">d</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">d</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                                    <span class="n">d</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">d</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                                <span class="p">))</span>
                        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">is_sort2</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span></div>

    <span class="c1">#def add_new_element_sort1(self, dt, eid, nid, sd, bm1, bm2, ts1, ts2, af, ttrq, wtrq):</span>
        <span class="c1">#return self.add_sort1(dt, eid, nid, sd, bm1, bm2, ts1, ts2, af, ttrq, wtrq)</span>

    <span class="k">def</span> <span class="nf">add_sort1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">sd</span><span class="p">,</span> <span class="n">bm1</span><span class="p">,</span> <span class="n">bm2</span><span class="p">,</span> <span class="n">ts1</span><span class="p">,</span> <span class="n">ts2</span><span class="p">,</span> <span class="n">af</span><span class="p">,</span> <span class="n">ttrq</span><span class="p">,</span> <span class="n">wtrq</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;unvectorized method for adding SORT1 transient data&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span> <span class="ow">and</span> <span class="n">eid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;dt=</span><span class="si">%s</span><span class="s1"> eid=</span><span class="si">%s</span><span class="s1"> type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">eid</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">sd</span><span class="p">,</span> <span class="n">bm1</span><span class="p">,</span> <span class="n">bm2</span><span class="p">,</span> <span class="n">ts1</span><span class="p">,</span> <span class="n">ts2</span><span class="p">,</span> <span class="n">af</span><span class="p">,</span> <span class="n">ttrq</span><span class="p">,</span> <span class="n">wtrq</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itotal</span><span class="p">]</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itotal</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">eid</span><span class="p">,</span> <span class="n">nid</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+=</span> <span class="mi">1</span>

<div class="viewcode-block" id="ComplexCBeamForceArray.get_stats"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBeamForceArray.get_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">short</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="s1">&#39;&lt;</span><span class="si">%s</span><span class="s1">&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                <span class="s1">&#39;  ntimes: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span>
                <span class="s1">&#39;  ntotal: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span>
            <span class="p">]</span>

        <span class="n">nelements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">):</span>  <span class="c1"># transient</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> ntimes=</span><span class="si">%i</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">nelements</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">nelements</span><span class="p">))</span>
        <span class="c1">#msg.append(&#39;  eType, cid\n&#39;)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data: [ntimes, nelements, 8] where 8=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">())))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data.shape = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  is_sort1=</span><span class="si">%s</span><span class="s1"> is_sort2=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort2</span><span class="p">))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  CBEAM</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_code</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="ComplexCBeamForceArray.write_f06"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBeamForceArray.write_f06">[docs]</a>    <span class="k">def</span> <span class="nf">write_f06</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f06_file</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">page_stamp</span><span class="o">=</span><span class="s1">&#39;PAGE </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">page_num</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">header</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># option B</span>
        <span class="c1">#&#39;                           C O M P L E X   F O R C E S   I N   B E A M   E L E M E N T S   ( C B E A M ) &#39;</span>
        <span class="c1">#&#39;                                                          (REAL/IMAGINARY)&#39;</span>
        <span class="c1">#&#39;                    STAT DIST/   - BENDING MOMENTS -            - WEB  SHEARS -           AXIAL          TOTAL          WARPING&#39;</span>
        <span class="c1">#&#39;   ELEMENT-ID  GRID   LENGTH    PLANE 1       PLANE 2        PLANE 1       PLANE 2        FORCE          TORQUE         TORQUE&#39;</span>
        <span class="c1">#&#39;0        20&#39;</span>
        <span class="c1">#&#39;0                11   0.000    0.0           0.0            0.0           0.0            0.0            0.0            0.0&#39;</span>
        <span class="c1">#&#39;                               0.0           0.0            0.0           0.0            0.0            0.0            0.0&#39;</span>
        <span class="c1">#&#39;0                12   1.000    0.0           0.0            0.0           0.0            0.0            0.0            0.0&#39;</span>
        <span class="c1">#&#39;                               0.0           0.0            0.0           0.0            0.0            0.0            0.0&#39;</span>

        <span class="c1">#msg_temp, nnodes = get_f06_header(self, is_mag_phase, is_sort1)</span>
        <span class="c1">#print(&#39;write_f06 not implemented for ComplexCBeamForceArray&#39;)</span>
        <span class="c1">#return page_num</span>

        <span class="c1">#is_sort1 = False</span>
        <span class="k">if</span> <span class="n">is_mag_phase</span><span class="p">:</span>
            <span class="n">mag_phase</span> <span class="o">=</span> <span class="s1">&#39;                                                          (MAGNITUDE/PHASE)</span><span class="se">\n</span><span class="s1"> </span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mag_phase</span> <span class="o">=</span> <span class="s1">&#39;                                                          (REAL/IMAGINARY)</span><span class="se">\n</span><span class="s1"> </span><span class="se">\n</span><span class="s1">&#39;</span>


        <span class="k">if</span> <span class="n">is_sort1</span><span class="p">:</span>
            <span class="n">line1</span> <span class="o">=</span> <span class="s1">&#39;0    ELEMENT         BEND-MOMENT-END-A            BEND-MOMENT-END-B                  SHEAR</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">line2</span> <span class="o">=</span> <span class="s1">&#39;       ID.         PLANE 1       PLANE 2        PLANE 1       PLANE 2        PLANE 1       PLANE 2        FORCE          TORQUE</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;freq&#39;</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;FREQUENCY&#39;</span>
            <span class="k">else</span><span class="p">:</span> <span class="c1"># mode</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="n">line1</span> <span class="o">=</span> <span class="s1">&#39;                    BEND-MOMENT-END-A            BEND-MOMENT-END-B                  SHEAR</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">line2</span> <span class="o">=</span> <span class="s1">&#39;   </span><span class="si">%16s</span><span class="s1">       PLANE 1       PLANE 2        PLANE 1       PLANE 2        PLANE 1       PLANE 2        FORCE          TORQUE</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">name</span>

        <span class="c1"># force</span>
        <span class="n">msg_temp</span> <span class="o">=</span> <span class="n">header</span> <span class="o">+</span> <span class="p">[</span>
            <span class="s1">&#39;                             C O M P L E X   F O R C E S   I N   B A R   E L E M E N T S   ( C B E A M )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span>
            <span class="n">mag_phase</span><span class="p">,</span>
            <span class="s1">&#39; &#39;</span><span class="p">,</span>
            <span class="n">line1</span><span class="p">,</span>
            <span class="n">line2</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span> <span class="o">==</span> <span class="kc">True</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="c1">#if is_sort1:</span>
            <span class="n">page_num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_sort1_as_sort1</span><span class="p">(</span><span class="n">f06_file</span><span class="p">,</span> <span class="n">page_num</span><span class="p">,</span> <span class="n">page_stamp</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">msg_temp</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="p">)</span>
            <span class="c1">#else:</span>
                <span class="c1">#self._write_sort1_as_sort2(f06_file, page_num, page_stamp, header, msg_temp, is_mag_phase)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span> <span class="o">==</span> <span class="kc">True</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">page_num</span> <span class="o">-</span> <span class="mi">1</span></div>

    <span class="k">def</span> <span class="nf">_write_sort1_as_sort1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f06_file</span><span class="p">,</span> <span class="n">page_num</span><span class="p">,</span> <span class="n">page_stamp</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">msg_temp</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="p">):</span>
        <span class="n">eids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span>
        <span class="c1">#times = self._times</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ntimes</span><span class="p">):</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>
            <span class="n">dt_line</span> <span class="o">=</span> <span class="s1">&#39; </span><span class="si">%14s</span><span class="s1"> = </span><span class="si">%12.5E</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">dt</span><span class="p">)</span>
            <span class="n">header</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt_line</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">header</span> <span class="o">+</span> <span class="n">msg_temp</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">msg</span><span class="p">))</span>

            <span class="c1">#bm1a, bm2a, bm1b, bm2b, ts1, ts2, af, trq</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span> <span class="o">==</span> <span class="kc">True</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="c1">#sd, bm1, bm2, ts1, ts2, af, ttrq, wtrq</span>
            <span class="n">sd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">bm1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">bm2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]</span>
            <span class="n">ts1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">3</span><span class="p">]</span>
            <span class="n">ts2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">4</span><span class="p">]</span>
            <span class="n">af</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">5</span><span class="p">]</span>
            <span class="n">ttrq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">6</span><span class="p">]</span>
            <span class="n">wtrq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">7</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">eid</span><span class="p">,</span> <span class="n">sdi</span><span class="p">,</span> <span class="n">bm1i</span><span class="p">,</span> <span class="n">bm2i</span><span class="p">,</span> <span class="n">ts1i</span><span class="p">,</span> <span class="n">ts2i</span><span class="p">,</span> <span class="n">afi</span><span class="p">,</span> <span class="n">ttrqi</span><span class="p">,</span> <span class="n">wtrqi</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="n">sd</span><span class="p">,</span> <span class="n">bm1</span><span class="p">,</span> <span class="n">bm2</span><span class="p">,</span> <span class="n">ts1</span><span class="p">,</span> <span class="n">ts2</span><span class="p">,</span> <span class="n">af</span><span class="p">,</span> <span class="n">ttrq</span><span class="p">,</span> <span class="n">wtrq</span><span class="p">):</span>
                <span class="n">vals</span> <span class="o">=</span> <span class="p">(</span><span class="n">sdi</span><span class="p">,</span> <span class="n">bm1i</span><span class="p">,</span> <span class="n">bm2i</span><span class="p">,</span> <span class="n">ts1i</span><span class="p">,</span> <span class="n">ts2i</span><span class="p">,</span> <span class="n">afi</span><span class="p">,</span> <span class="n">ttrqi</span><span class="p">,</span> <span class="n">wtrqi</span><span class="p">)</span>
                <span class="n">vals2</span> <span class="o">=</span> <span class="n">write_imag_floats_13e</span><span class="p">(</span><span class="n">vals</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="p">)</span>
                <span class="p">(</span><span class="n">sdir</span><span class="p">,</span> <span class="n">bm1ir</span><span class="p">,</span> <span class="n">bm2ir</span><span class="p">,</span> <span class="n">ts1ir</span><span class="p">,</span> <span class="n">ts2ir</span><span class="p">,</span> <span class="n">afir</span><span class="p">,</span> <span class="n">ttrqir</span><span class="p">,</span> <span class="n">wtrqir</span><span class="p">,</span>
                 <span class="n">sdii</span><span class="p">,</span> <span class="n">bm1ii</span><span class="p">,</span> <span class="n">bm2ii</span><span class="p">,</span> <span class="n">ts1ii</span><span class="p">,</span> <span class="n">ts2ii</span><span class="p">,</span> <span class="n">afii</span><span class="p">,</span> <span class="n">ttrqii</span><span class="p">,</span> <span class="n">wtrqii</span><span class="p">)</span> <span class="o">=</span> <span class="n">vals2</span>

                <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;0</span><span class="si">%16i</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span>
                               <span class="s1">&#39; </span><span class="si">%14s</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                   <span class="n">eid</span><span class="p">,</span> <span class="n">sdir</span><span class="p">,</span> <span class="n">bm1ir</span><span class="p">,</span> <span class="n">bm2ir</span><span class="p">,</span> <span class="n">ts1ir</span><span class="p">,</span> <span class="n">ts2ir</span><span class="p">,</span> <span class="n">afir</span><span class="p">,</span> <span class="n">ttrqir</span><span class="p">,</span> <span class="n">wtrqir</span><span class="p">,</span>
                                   <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">sdii</span><span class="p">,</span> <span class="n">bm1ii</span><span class="p">,</span> <span class="n">bm2ii</span><span class="p">,</span> <span class="n">ts1ii</span><span class="p">,</span> <span class="n">ts2ii</span><span class="p">,</span> <span class="n">afii</span><span class="p">,</span> <span class="n">ttrqii</span><span class="p">,</span> <span class="n">wtrqii</span><span class="p">))</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">page_stamp</span> <span class="o">%</span> <span class="n">page_num</span><span class="p">)</span>
            <span class="n">page_num</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">page_num</span>

<div class="viewcode-block" id="ComplexCBeamForceArray.write_op2"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBeamForceArray.write_op2">[docs]</a>    <span class="k">def</span> <span class="nf">write_op2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op2</span><span class="p">,</span> <span class="n">op2_ascii</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="n">new_result</span><span class="p">,</span>
                  <span class="n">date</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">endian</span><span class="o">=</span><span class="s1">&#39;&gt;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;writes an OP2&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">inspect</span>
        <span class="kn">from</span> <span class="nn">struct</span> <span class="kn">import</span> <span class="n">Struct</span><span class="p">,</span> <span class="n">pack</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
        <span class="n">call_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getouterframes</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.write_op2: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">call_frame</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]))</span>

        <span class="k">if</span> <span class="n">itable</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_table_header</span><span class="p">(</span><span class="n">op2</span><span class="p">,</span> <span class="n">op2_ascii</span><span class="p">,</span> <span class="n">date</span><span class="p">)</span>
            <span class="n">itable</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span>

        <span class="n">eids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="c1">#long_form = False</span>
        <span class="c1">#if nids.min() == 0:</span>
            <span class="c1">#long_form = True</span>

        <span class="n">eids_device</span> <span class="o">=</span> <span class="n">eids</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">device_code</span>
        <span class="n">ueids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">eids</span><span class="p">)</span>
        <span class="c1">#ieid = np.searchsorted(eids, ueids)</span>
        <span class="c1"># table 4 info</span>
        <span class="c1">#ntimes = self.data.shape[0]</span>
        <span class="c1">#nnodes = self.data.shape[1]</span>
        <span class="n">nelements</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ueids</span><span class="p">)</span>

        <span class="c1"># 21 = 1 node, 3 principal, 6 components, 9 vectors, 2 p/ovm</span>
        <span class="c1">#ntotal = ((nnodes * 21) + 1) + (nelements * 4)</span>

        <span class="n">ntotali</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="n">ntotali</span> <span class="o">*</span> <span class="n">nelements</span>

        <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  ntimes = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">)</span>

        <span class="c1">#print(&#39;ntotal=%s&#39; % (ntotal))</span>
        <span class="c1">#assert ntotal == 193, ntotal</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">:</span>
            <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i 15f&#39;</span><span class="p">)</span>
            <span class="n">struct2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i 15f&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;SORT2&#39;</span><span class="p">)</span>

        <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;nelements=</span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nelements</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_table_3</span><span class="p">(</span><span class="n">op2</span><span class="p">,</span> <span class="n">op2_ascii</span><span class="p">,</span> <span class="n">new_result</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="n">itime</span><span class="p">)</span>

            <span class="c1"># record 4</span>
            <span class="n">itable</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">]</span>
            <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%i</span><span class="s1">i&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">header</span><span class="p">),</span> <span class="o">*</span><span class="n">header</span><span class="p">))</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, 0, 4]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, </span><span class="si">%s</span><span class="s1">, 4]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">itable</span><span class="p">))</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, </span><span class="si">%i</span><span class="s1">, 4]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">))</span>

            <span class="n">sd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">bm1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">bm2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]</span>
            <span class="n">ts1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">3</span><span class="p">]</span>
            <span class="n">ts2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">4</span><span class="p">]</span>
            <span class="n">af</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">5</span><span class="p">]</span>
            <span class="n">ttrq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">6</span><span class="p">]</span>
            <span class="n">wtrq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">7</span><span class="p">]</span>

            <span class="n">icount</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">nwide</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">ielement</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">eids</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">sd</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">eid</span><span class="p">,</span> <span class="n">sdi</span><span class="p">,</span> <span class="n">bm1i</span><span class="p">,</span> <span class="n">bm2i</span><span class="p">,</span> <span class="n">ts1i</span><span class="p">,</span> <span class="n">ts2i</span><span class="p">,</span> <span class="n">afi</span><span class="p">,</span> <span class="n">ttrqi</span><span class="p">,</span> <span class="n">wtrqi</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="n">sd</span><span class="p">,</span> <span class="n">bm1</span><span class="p">,</span> <span class="n">bm2</span><span class="p">,</span> <span class="n">ts1</span><span class="p">,</span> <span class="n">ts2</span><span class="p">,</span> <span class="n">af</span><span class="p">,</span> <span class="n">ttrq</span><span class="p">,</span> <span class="n">wtrq</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">icount</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">eid_device</span> <span class="o">=</span> <span class="n">eids_device</span><span class="p">[</span><span class="n">ielement</span><span class="p">]</span>
                    <span class="n">nid</span> <span class="o">=</span> <span class="n">nids</span><span class="p">[</span><span class="n">ielement</span><span class="p">]</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">sdi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span>
                            <span class="n">bm1i</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">bm2i</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">ts1i</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">ts2i</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">afi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">ttrqi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">wtrqi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span>
                            <span class="n">bm1i</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">bm2i</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">ts1i</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">ts2i</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">afi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">ttrqi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">wtrqi</span><span class="o">.</span><span class="n">imag</span><span class="p">]</span> <span class="c1"># 17</span>
                    <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">struct1</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">))</span>
                    <span class="n">ielement</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">icount</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">elif</span> <span class="n">nid</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">icount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c1"># 11 total nodes, with 1, 11 getting an nid; the other 9 being</span>
                    <span class="c1"># xxb sections</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span>
                            <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span>
                            <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]</span>
                    <span class="c1">#print(&#39;***adding %s\n&#39; % (10-icount))</span>
                    <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span> <span class="o">-</span> <span class="n">icount</span><span class="p">):</span>
                        <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">struct2</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">))</span>
                        <span class="n">nwide</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

                    <span class="n">eid_device2</span> <span class="o">=</span> <span class="n">eids_device</span><span class="p">[</span><span class="n">ielement</span><span class="p">]</span>
                    <span class="c1">#print(eids_device)</span>
                    <span class="k">assert</span> <span class="n">eid_device</span> <span class="o">==</span> <span class="n">eid_device2</span><span class="p">,</span> <span class="s1">&#39;eid_device=</span><span class="si">%s</span><span class="s1"> eid_device2=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">eid_device2</span><span class="p">)</span>
                    <span class="n">nid</span> <span class="o">=</span> <span class="n">nids</span><span class="p">[</span><span class="n">ielement</span><span class="p">]</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">nid</span><span class="p">,</span> <span class="n">sdi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span>
                            <span class="n">bm1i</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">bm2i</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">ts1i</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">ts2i</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">afi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">ttrqi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">wtrqi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span>
                            <span class="n">bm1i</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">bm2i</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">ts1i</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">ts2i</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">afi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">ttrqi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">wtrqi</span><span class="o">.</span><span class="n">imag</span><span class="p">]</span> <span class="c1"># 16</span>
                    <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">struct2</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">))</span>
                    <span class="n">ielement</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">icount</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;CBEAM OEF op2 writer&#39;</span><span class="p">)</span>
                    <span class="c1">#data = [0, xxb, sxc, sxd, sxe, sxf, smax, smin, smt, smc]  # 10</span>
                    <span class="c1">#op2.write(struct2.pack(*data))</span>
                    <span class="c1">#icount += 1</span>

                <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid_device=</span><span class="si">%s</span><span class="s1"> data=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">)))</span>
                <span class="n">nwide</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

            <span class="k">assert</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="n">nwide</span><span class="p">,</span> <span class="s1">&#39;ntotal=</span><span class="si">%s</span><span class="s1"> nwide=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ntotal</span><span class="p">,</span> <span class="n">nwide</span><span class="p">)</span>

            <span class="n">itable</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,]</span>
            <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">header</span><span class="p">))</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;footer = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">header</span><span class="p">)</span>
            <span class="n">new_result</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">itable</span></div></div>


<div class="viewcode-block" id="ComplexCBendForceArray"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBendForceArray">[docs]</a><span class="k">class</span> <span class="nc">ComplexCBendForceArray</span><span class="p">(</span><span class="n">BaseElement</span><span class="p">):</span>  <span class="c1"># 69-CBEND</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">BaseElement</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">)</span>
        <span class="c1">#self.code = [self.format_code, self.sort_code, self.s_code]</span>

        <span class="c1">#self.ntimes = 0  # or frequency/mode</span>
        <span class="c1">#self.ntotal = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># result specific</span>

        <span class="c1">#if is_sort1:</span>
            <span class="c1">#pass</span>
        <span class="c1">#else:</span>
            <span class="c1">#raise NotImplementedError(&#39;SORT2&#39;)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_real</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;is the result real?&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_complex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;is the result complex?&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_reset_indices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="ComplexCBendForceArray.get_headers"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBendForceArray.get_headers">[docs]</a>    <span class="k">def</span> <span class="nf">get_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;bending_moment_1a&#39;</span><span class="p">,</span> <span class="s1">&#39;bending_moment_2a&#39;</span><span class="p">,</span> <span class="s1">&#39;shear_1a&#39;</span><span class="p">,</span> <span class="s1">&#39;shear_2a&#39;</span><span class="p">,</span> <span class="s1">&#39;axial_a&#39;</span><span class="p">,</span> <span class="s1">&#39;torque_a&#39;</span><span class="p">,</span>
            <span class="s1">&#39;bending_moment_1b&#39;</span><span class="p">,</span> <span class="s1">&#39;bending_moment_2b&#39;</span><span class="p">,</span> <span class="s1">&#39;shear_1b&#39;</span><span class="p">,</span> <span class="s1">&#39;shear_2b&#39;</span><span class="p">,</span> <span class="s1">&#39;axial_b&#39;</span><span class="p">,</span> <span class="s1">&#39;torque_b&#39;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">headers</span></div>

<div class="viewcode-block" id="ComplexCBendForceArray.build"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBendForceArray.build">[docs]</a>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;sizes the vectorized attributes of the ComplexCBendForceArray&quot;&quot;&quot;</span>
        <span class="c1">#print(&#39;ntimes=%s nelements=%s ntotal=%s&#39; % (self.ntimes, self.nelements, self.ntotal))</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ntimes=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;nelements=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ntotal=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span>
        <span class="c1">#self.names = []</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">//=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itime</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#self.ntimes = 0</span>
        <span class="c1">#self.nelements = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1">#print(&quot;ntimes=%s nelements=%s ntotal=%s&quot; % (self.ntimes, self.nelements, self.ntotal))</span>
        <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;float32&#39;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;int32&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span>

        <span class="c1">#[bending_moment_1a, bending_moment_2a, shear_1a, shear_2a, axial_a, torque_a</span>
        <span class="c1"># bending_moment_1b, bending_moment_2b, shear_1b, shear_2b, axial_b, torque_b]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;complex64&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ComplexCBendForceArray.build_dataframe"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBendForceArray.build_dataframe">[docs]</a>    <span class="k">def</span> <span class="nf">build_dataframe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;creates a pandas dataframe&quot;&quot;&quot;</span>
        <span class="c1">#Freq                                       0.0                 2.5</span>
        <span class="c1">#ElementID Item</span>
        <span class="c1">#6901      bending_moment_1a  1.066567-0.035549j  1.066996-0.035577j</span>
        <span class="c1">#          bending_moment_2a  1.101375-0.036709j  1.102188-0.036763j</span>
        <span class="c1">#          shear_1a           0.516478-0.017214j  0.516842-0.017239j</span>
        <span class="c1">#          shear_2a           0.859292-0.028640j  0.860111-0.028695j</span>
        <span class="c1">#          axial_a            0.834822-0.027825j  0.834982-0.027835j</span>
        <span class="c1">#          torque_a           0.953420-0.031777j  0.953947-0.031813j</span>
        <span class="c1">#          bending_moment_1b -0.284733+0.009490j -0.284828+0.009497j</span>
        <span class="c1">#          bending_moment_2b  0.094127-0.003137j  0.093836-0.003118j</span>
        <span class="c1">#          shear_1b           0.834822-0.027825j  0.834982-0.027835j</span>
        <span class="c1">#          shear_2b           0.859292-0.028640j  0.860111-0.028695j</span>
        <span class="c1">#          axial_b           -0.516478+0.017214j -0.516842+0.017239j</span>
        <span class="c1">#          torque_b          -0.242082+0.008069j -0.242077+0.008068j</span>
        <span class="c1">#6902      bending_moment_1a -0.931214+0.031037j -0.931519+0.031058j</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">()</span>
        <span class="n">column_names</span><span class="p">,</span> <span class="n">column_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_dataframe_transient_header</span><span class="p">()</span>

        <span class="c1"># element_node is (nelements, 3)</span>
        <span class="n">element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_pandas_transient_elements</span><span class="p">(</span>
            <span class="n">column_values</span><span class="p">,</span> <span class="n">column_names</span><span class="p">,</span>
            <span class="n">headers</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span> <span class="o">==</span> <span class="n">table</span><span class="o">.</span><span class="n">is_sort1</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">element_node</span><span class="p">):</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="n">table</span><span class="o">.</span><span class="n">element_node</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="s1">&#39;element_node shape=</span><span class="si">%s</span><span class="s1"> table.shape=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">element_nodes</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;table_name=</span><span class="si">%r</span><span class="s1"> class_name=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;Eid, Nid_A, Nid_B</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">eid1</span><span class="p">,</span> <span class="n">nida1</span><span class="p">,</span> <span class="n">nidb1</span><span class="p">),</span> <span class="p">(</span><span class="n">eid2</span><span class="p">,</span> <span class="n">nida2</span><span class="p">,</span> <span class="n">nidb2</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">element_node</span><span class="p">):</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;(</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">), (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid1</span><span class="p">,</span> <span class="n">nida1</span><span class="p">,</span> <span class="n">nidb1</span><span class="p">,</span> <span class="n">eid2</span><span class="p">,</span> <span class="n">nida2</span><span class="p">,</span> <span class="n">nidb2</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;table_name=</span><span class="si">%r</span><span class="s1"> class_name=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">eids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">ie</span><span class="p">,</span> <span class="n">eid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">eids</span><span class="p">):</span>
                    <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">ie</span><span class="p">,</span> <span class="p">:]</span>
                    <span class="n">t2</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">ie</span><span class="p">,</span> <span class="p">:]</span>
                    <span class="p">(</span><span class="n">bending_moment_1a1</span><span class="p">,</span> <span class="n">bending_moment_2a1</span><span class="p">,</span> <span class="n">shear_1a1</span><span class="p">,</span> <span class="n">shear_2a1</span><span class="p">,</span> <span class="n">axial_a1</span><span class="p">,</span> <span class="n">torque_a1</span><span class="p">,</span>
                     <span class="n">bending_moment_1b1</span><span class="p">,</span> <span class="n">bending_moment_2b1</span><span class="p">,</span> <span class="n">shear_1b1</span><span class="p">,</span> <span class="n">shear_2b1</span><span class="p">,</span> <span class="n">axial_b1</span><span class="p">,</span> <span class="n">torque_b1</span><span class="p">)</span> <span class="o">=</span> <span class="n">t1</span>
                    <span class="p">(</span><span class="n">bending_moment_1a2</span><span class="p">,</span> <span class="n">bending_moment_2a2</span><span class="p">,</span> <span class="n">shear_1a2</span><span class="p">,</span> <span class="n">shear_2a2</span><span class="p">,</span> <span class="n">axial_a2</span><span class="p">,</span> <span class="n">torque_a2</span><span class="p">,</span>
                     <span class="n">bending_moment_1b2</span><span class="p">,</span> <span class="n">bending_moment_2b2</span><span class="p">,</span> <span class="n">shear_1b2</span><span class="p">,</span> <span class="n">shear_2b2</span><span class="p">,</span> <span class="n">axial_b2</span><span class="p">,</span> <span class="n">torque_b2</span><span class="p">)</span> <span class="o">=</span> <span class="n">t2</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="n">allclose</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">):</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;(</span><span class="si">%s</span><span class="s1">)    (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)  (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">eid</span><span class="p">,</span>
                            <span class="n">bending_moment_1a1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span>
                            <span class="n">bending_moment_1b1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span>

                            <span class="n">bending_moment_1a2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span>
                            <span class="n">bending_moment_1b2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="p">)</span>
                        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

                    <span class="c1">#if not allclose(t1, t2):</span>
                        <span class="c1">#msg += &#39;(%s)    (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)\n&#39; % (</span>
                            <span class="c1">#eid,</span>
                            <span class="c1">#bending_moment_1a1, bending_moment_2a1, shear_1a1, shear_2a1, axial_a1, torque_a1,</span>
                            <span class="c1">#bending_moment_1b1, bending_moment_2b1, shear_1b1, shear_2b1, axial_b1, torque_b1,</span>

                            <span class="c1">#bending_moment_1a2, bending_moment_2a2, shear_1a2, shear_2a2, axial_a2, torque_a2,</span>
                            <span class="c1">#bending_moment_1b2, bending_moment_2b2, shear_1b2, shear_2b2, axial_b2, torque_b2)</span>
                        <span class="c1">#i += 1</span>
                        <span class="c1">#if i &gt; 10:</span>
                            <span class="c1">#print(msg)</span>
                            <span class="c1">#raise ValueError(msg)</span>
                <span class="c1">#print(msg)</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">add_sort1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span>
                  <span class="n">nid_a</span><span class="p">,</span> <span class="n">bending_moment_1a</span><span class="p">,</span> <span class="n">bending_moment_2a</span><span class="p">,</span> <span class="n">shear_1a</span><span class="p">,</span> <span class="n">shear_2a</span><span class="p">,</span> <span class="n">axial_a</span><span class="p">,</span> <span class="n">torque_a</span><span class="p">,</span>
                  <span class="n">nid_b</span><span class="p">,</span> <span class="n">bending_moment_1b</span><span class="p">,</span> <span class="n">bending_moment_2b</span><span class="p">,</span> <span class="n">shear_1b</span><span class="p">,</span> <span class="n">shear_2b</span><span class="p">,</span> <span class="n">axial_b</span><span class="p">,</span> <span class="n">torque_b</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;unvectorized method for adding SORT1 transient data&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span> <span class="ow">and</span> <span class="n">eid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;dt=</span><span class="si">%s</span><span class="s1"> eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">)</span>
        <span class="c1">#bending_moment_1a, bending_moment_2a, shear_1a, shear_2a, axial_a, torque_a,</span>
        <span class="c1">#bending_moment_1b, bending_moment_2b, shear_1b, shear_2b, axial_b, torque_b</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ielement</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">eid</span><span class="p">,</span> <span class="n">nid_a</span><span class="p">,</span> <span class="n">nid_b</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">bending_moment_1a</span><span class="p">,</span> <span class="n">bending_moment_2a</span><span class="p">,</span> <span class="n">shear_1a</span><span class="p">,</span> <span class="n">shear_2a</span><span class="p">,</span> <span class="n">axial_a</span><span class="p">,</span> <span class="n">torque_a</span><span class="p">,</span>
            <span class="n">bending_moment_1b</span><span class="p">,</span> <span class="n">bending_moment_2b</span><span class="p">,</span> <span class="n">shear_1b</span><span class="p">,</span> <span class="n">shear_2b</span><span class="p">,</span> <span class="n">axial_b</span><span class="p">,</span> <span class="n">torque_b</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="ComplexCBendForceArray.get_stats"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBendForceArray.get_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">short</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="s1">&#39;&lt;</span><span class="si">%s</span><span class="s1">&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                <span class="s1">&#39;  ntimes: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span>
                <span class="s1">&#39;  ntotal: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span>
            <span class="p">]</span>

        <span class="n">nelements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="c1">#ntotal = self.ntotal</span>

        <span class="n">msg</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">):</span>  <span class="c1"># transient</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> ntimes=</span><span class="si">%i</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="s1">; table_name=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">))</span>
            <span class="n">ntimes_word</span> <span class="o">=</span> <span class="s1">&#39;ntimes&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="s1">; table_name=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">))</span>
            <span class="n">ntimes_word</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  eType</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data: [</span><span class="si">%s</span><span class="s1">, nnodes, </span><span class="si">%i</span><span class="s1">] where </span><span class="si">%i</span><span class="s1">=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">ntimes_word</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">headers</span><span class="p">))))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data.shape = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
        <span class="c1">#msg.append(&#39;  element type: %s\n&#39; % self.element_type)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  element name: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_code</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="ComplexCBendForceArray.get_f06_header"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBendForceArray.get_f06_header">[docs]</a>    <span class="k">def</span> <span class="nf">get_f06_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;                           C O M P L E X   F O R C E S   I N   B E N D    E L E M E N T S   ( C B E N D )</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">is_mag_phase</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;                                                          (MAGNITUDE/PHASE)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;                                                          (REAL/IMAGINARY)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">is_sort1</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="p">[</span>
                <span class="s1">&#39;                                 - BENDING MOMENTS -            -   SHEARS   -            AXIAL&#39;</span>
                <span class="s1">&#39;   ELEMENT-ID  GRID    END      PLANE 1       PLANE 2        PLANE 1       PLANE 2        FORCE          TORQUE&#39;</span>
            <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;sort2&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="ComplexCBendForceArray.write_f06"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBendForceArray.write_f06">[docs]</a>    <span class="k">def</span> <span class="nf">write_f06</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f06_file</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">page_stamp</span><span class="o">=</span><span class="s1">&#39;PAGE </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span>
                  <span class="n">page_num</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">header</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">#&#39;                           C O M P L E X   F O R C E S   I N   B E N D    E L E M E N T S   ( C B E N D )&#39;</span>
        <span class="c1">#&#39;                                                          (REAL/IMAGINARY)&#39;</span>
        <span class="c1">#&#39;                                 - BENDING MOMENTS -            -   SHEARS   -            AXIAL&#39;</span>
        <span class="c1">#&#39;   ELEMENT-ID  GRID    END      PLANE 1       PLANE 2        PLANE 1       PLANE 2        FORCE          TORQUE&#39;</span>
        <span class="c1">#&#39;0        27      21      A     0.0           0.0            0.0           0.0            0.0            0.0&#39;</span>
        <span class="c1">#&#39;                               0.0           0.0            0.0           0.0            0.0            0.0&#39;</span>
        <span class="c1">#&#39;0                22      B     0.0           0.0            0.0           0.0            0.0            0.0&#39;</span>
        <span class="c1">#&#39;                               0.0           0.0            0.0           0.0            0.0            0.0&#39;</span>
        <span class="n">msg_temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_f06_header</span><span class="p">(</span><span class="n">is_mag_phase</span><span class="o">=</span><span class="n">is_mag_phase</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="n">is_sort1</span><span class="p">)</span>

        <span class="c1"># write the f06</span>
        <span class="c1">#(ntimes, ntotal, two) = self.data.shape</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">eids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">nid_a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">nid_b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ntimes</span><span class="p">):</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>  <span class="c1"># TODO: rename this...</span>
            <span class="n">header</span> <span class="o">=</span> <span class="n">_eigenvalue_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">itime</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">header</span> <span class="o">+</span> <span class="n">msg_temp</span><span class="p">))</span>

            <span class="c1">#print(&quot;self.data.shape=%s itime=%s ieids=%s&quot; % (str(self.data.shape), itime, str(ieids)))</span>
            <span class="n">bending_moment_1a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">bending_moment_2a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">shear_1a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]</span>
            <span class="n">shear_2a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">3</span><span class="p">]</span>
            <span class="n">axial_a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">4</span><span class="p">]</span>
            <span class="n">torque_a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">5</span><span class="p">]</span>
            <span class="n">bending_moment_1b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">6</span><span class="p">]</span>
            <span class="n">bending_moment_2b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">7</span><span class="p">]</span>
            <span class="n">shear_1b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">8</span><span class="p">]</span>
            <span class="n">shear_2b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">9</span><span class="p">]</span>
            <span class="n">axial_b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">10</span><span class="p">]</span>
            <span class="n">torque_b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">11</span><span class="p">]</span>

            <span class="k">for</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span>
                 <span class="n">nid_ai</span><span class="p">,</span> <span class="n">bending_moment_1ai</span><span class="p">,</span> <span class="n">bending_moment_2ai</span><span class="p">,</span> <span class="n">shear_1ai</span><span class="p">,</span> <span class="n">shear_2ai</span><span class="p">,</span> <span class="n">axial_ai</span><span class="p">,</span> <span class="n">torque_ai</span><span class="p">,</span>
                 <span class="n">nid_bi</span><span class="p">,</span> <span class="n">bending_moment_1bi</span><span class="p">,</span> <span class="n">bending_moment_2bi</span><span class="p">,</span> <span class="n">shear_1bi</span><span class="p">,</span> <span class="n">shear_2bi</span><span class="p">,</span> <span class="n">axial_bi</span><span class="p">,</span> <span class="n">torque_bi</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span>
                                                                                                                   <span class="n">nid_a</span><span class="p">,</span> <span class="n">bending_moment_1a</span><span class="p">,</span> <span class="n">bending_moment_2a</span><span class="p">,</span> <span class="n">shear_1a</span><span class="p">,</span> <span class="n">shear_2a</span><span class="p">,</span> <span class="n">axial_a</span><span class="p">,</span> <span class="n">torque_a</span><span class="p">,</span>
                                                                                                                   <span class="n">nid_b</span><span class="p">,</span> <span class="n">bending_moment_1b</span><span class="p">,</span> <span class="n">bending_moment_2b</span><span class="p">,</span> <span class="n">shear_1b</span><span class="p">,</span> <span class="n">shear_2b</span><span class="p">,</span> <span class="n">axial_b</span><span class="p">,</span> <span class="n">torque_b</span><span class="p">):</span>
                <span class="p">[</span><span class="n">bending_moment_1ari</span><span class="p">,</span> <span class="n">bending_moment_2ari</span><span class="p">,</span> <span class="n">shear_1ari</span><span class="p">,</span> <span class="n">shear_2ari</span><span class="p">,</span> <span class="n">axial_ari</span><span class="p">,</span> <span class="n">torque_ari</span><span class="p">,</span>
                 <span class="n">bending_moment_1bri</span><span class="p">,</span> <span class="n">bending_moment_2bri</span><span class="p">,</span> <span class="n">shear_1bri</span><span class="p">,</span> <span class="n">shear_2bri</span><span class="p">,</span> <span class="n">axial_bri</span><span class="p">,</span> <span class="n">torque_bri</span><span class="p">,</span>
                 <span class="n">bending_moment_1aii</span><span class="p">,</span> <span class="n">bending_moment_2aii</span><span class="p">,</span> <span class="n">shear_1aii</span><span class="p">,</span> <span class="n">shear_2aii</span><span class="p">,</span> <span class="n">axial_aii</span><span class="p">,</span> <span class="n">torque_aii</span><span class="p">,</span>
                 <span class="n">bending_moment_1bii</span><span class="p">,</span> <span class="n">bending_moment_2bii</span><span class="p">,</span> <span class="n">shear_1bii</span><span class="p">,</span> <span class="n">shear_2bii</span><span class="p">,</span> <span class="n">axial_bii</span><span class="p">,</span> <span class="n">torque_bii</span><span class="p">,</span>
                 <span class="p">]</span> <span class="o">=</span> <span class="n">write_imag_floats_13e</span><span class="p">(</span>
                     <span class="p">[</span><span class="n">bending_moment_1ai</span><span class="p">,</span> <span class="n">bending_moment_2ai</span><span class="p">,</span> <span class="n">shear_1ai</span><span class="p">,</span> <span class="n">shear_2ai</span><span class="p">,</span> <span class="n">axial_ai</span><span class="p">,</span> <span class="n">torque_ai</span><span class="p">,</span>
                      <span class="n">bending_moment_1bi</span><span class="p">,</span> <span class="n">bending_moment_2bi</span><span class="p">,</span> <span class="n">shear_1bi</span><span class="p">,</span> <span class="n">shear_2bi</span><span class="p">,</span> <span class="n">axial_bi</span><span class="p">,</span> <span class="n">torque_bi</span><span class="p">],</span>
                     <span class="n">is_mag_phase</span><span class="p">)</span>
                <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="s1">&#39;0  </span><span class="si">%8s%8s</span><span class="s1">      A    </span><span class="si">%13s</span><span class="s1"> </span><span class="si">%13s</span><span class="s1">  </span><span class="si">%13s</span><span class="s1"> </span><span class="si">%13s</span><span class="s1">  </span><span class="si">%13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="s1">&#39;                              </span><span class="si">%13s</span><span class="s1"> </span><span class="si">%13s</span><span class="s1">  </span><span class="si">%13s</span><span class="s1"> </span><span class="si">%13s</span><span class="s1">  </span><span class="si">%13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="s1">&#39;0  </span><span class="si">%8s%8s</span><span class="s1">      B    </span><span class="si">%13s</span><span class="s1"> </span><span class="si">%13s</span><span class="s1">  </span><span class="si">%13s</span><span class="s1"> </span><span class="si">%13s</span><span class="s1">  </span><span class="si">%13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="s1">&#39;                              </span><span class="si">%13s</span><span class="s1"> </span><span class="si">%13s</span><span class="s1">  </span><span class="si">%13s</span><span class="s1"> </span><span class="si">%13s</span><span class="s1">  </span><span class="si">%13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="o">%</span> <span class="p">(</span>
                        <span class="n">eid</span><span class="p">,</span> <span class="n">nid_ai</span><span class="p">,</span>
                        <span class="n">bending_moment_1ari</span><span class="p">,</span> <span class="n">bending_moment_2ari</span><span class="p">,</span> <span class="n">shear_1ari</span><span class="p">,</span> <span class="n">shear_2ari</span><span class="p">,</span> <span class="n">axial_ari</span><span class="p">,</span> <span class="n">torque_ari</span><span class="p">,</span>
                        <span class="n">bending_moment_1aii</span><span class="p">,</span> <span class="n">bending_moment_2aii</span><span class="p">,</span> <span class="n">shear_1aii</span><span class="p">,</span> <span class="n">shear_2aii</span><span class="p">,</span> <span class="n">axial_aii</span><span class="p">,</span> <span class="n">torque_aii</span><span class="p">,</span>
                        <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">nid_bi</span><span class="p">,</span>
                        <span class="n">bending_moment_1bri</span><span class="p">,</span> <span class="n">bending_moment_2bri</span><span class="p">,</span> <span class="n">shear_1bri</span><span class="p">,</span> <span class="n">shear_2bri</span><span class="p">,</span> <span class="n">axial_bri</span><span class="p">,</span> <span class="n">torque_bri</span><span class="p">,</span>
                        <span class="n">bending_moment_1bii</span><span class="p">,</span> <span class="n">bending_moment_2bii</span><span class="p">,</span> <span class="n">shear_1bii</span><span class="p">,</span> <span class="n">shear_2bii</span><span class="p">,</span> <span class="n">axial_bii</span><span class="p">,</span> <span class="n">torque_bii</span><span class="p">,))</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">page_stamp</span> <span class="o">%</span> <span class="n">page_num</span><span class="p">)</span>
            <span class="n">page_num</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">page_num</span> <span class="o">-</span> <span class="mi">1</span></div></div>


<div class="viewcode-block" id="ComplexSolidPressureForceArray"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexSolidPressureForceArray">[docs]</a><span class="k">class</span> <span class="nc">ComplexSolidPressureForceArray</span><span class="p">(</span><span class="n">ComplexForceObject</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">ComplexForceObject</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">)</span>
        <span class="c1">#self.code = [self.format_code, self.sort_code, self.s_code]</span>

        <span class="c1">#self.ntimes = 0  # or frequency/mode</span>
        <span class="c1">#self.ntotal = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># result specific</span>

        <span class="k">if</span> <span class="n">is_sort1</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;SORT2&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_reset_indices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="ComplexSolidPressureForceArray.get_headers"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexSolidPressureForceArray.get_headers">[docs]</a>    <span class="k">def</span> <span class="nf">get_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ax&#39;</span><span class="p">,</span> <span class="s1">&#39;ay&#39;</span><span class="p">,</span> <span class="s1">&#39;az&#39;</span><span class="p">,</span> <span class="s1">&#39;vx&#39;</span><span class="p">,</span> <span class="s1">&#39;vy&#39;</span><span class="p">,</span> <span class="s1">&#39;vz&#39;</span><span class="p">,</span> <span class="s1">&#39;pressure&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">headers</span></div>

    <span class="c1">#def get_headers(self):</span>
        <span class="c1">#headers = [&#39;axial&#39;, &#39;torque&#39;]</span>
        <span class="c1">#return headers</span>

<div class="viewcode-block" id="ComplexSolidPressureForceArray.build"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexSolidPressureForceArray.build">[docs]</a>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;sizes the vectorized attributes of the ComplexSolidPressureForceArray&quot;&quot;&quot;</span>
        <span class="c1">#print(&#39;ntimes=%s nelements=%s ntotal=%s&#39; % (self.ntimes, self.nelements, self.ntotal))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ntimes=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;nelements=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ntotal=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span>
        <span class="c1">#self.names = []</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">//=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itime</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#self.ntimes = 0</span>
        <span class="c1">#self.nelements = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1">#print(&quot;ntimes=%s nelements=%s ntotal=%s&quot; % (self.ntimes, self.nelements, self.ntotal))</span>
        <span class="n">dtype</span><span class="p">,</span> <span class="n">idtype</span><span class="p">,</span> <span class="n">cfdtype</span> <span class="o">=</span> <span class="n">get_complex_times_dtype</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nelements</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">idtype</span><span class="p">)</span>

        <span class="c1">#[ax, ay, az, vx, vy, vz, pressure]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">cfdtype</span><span class="p">)</span></div>

<div class="viewcode-block" id="ComplexSolidPressureForceArray.build_dataframe"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexSolidPressureForceArray.build_dataframe">[docs]</a>    <span class="k">def</span> <span class="nf">build_dataframe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;creates a pandas dataframe&quot;&quot;&quot;</span>
        <span class="c1">#Mode                                        1                           2</span>
        <span class="c1">#EigenvalueReal                    -0.000000                   -0.000000</span>
        <span class="c1">#EigenvalueImag                    -0.000000                   -0.000000</span>
        <span class="c1">#Damping                               0.000000                    0.000000</span>
        <span class="c1">#ElementID Item</span>
        <span class="c1">#1000      ax       -1.887379e-13+2.791559e-13j -1.901257e-13+2.789015e-13j</span>
        <span class="c1">#          ay        3.330669e-14-7.316397e-14j  1.776357e-14-7.368508e-14j</span>
        <span class="c1">#          az       -1.360023e-13-9.545406e-14j -1.432188e-13-8.333307e-14j</span>
        <span class="c1">#          vx        0.000000e+00+0.000000e+00j  0.000000e+00+0.000000e+00j</span>
        <span class="c1">#          vy        0.000000e+00+0.000000e+00j  0.000000e+00+0.000000e+00j</span>
        <span class="c1">#          vz        0.000000e+00+0.000000e+00j  0.000000e+00+0.000000e+00j</span>
        <span class="c1">#          pressure  0.000000e+00+0.000000e+00j  0.000000e+00+0.000000e+00j</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">()</span>
        <span class="n">column_names</span><span class="p">,</span> <span class="n">column_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_dataframe_transient_header</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_pandas_transient_elements</span><span class="p">(</span>
            <span class="n">column_values</span><span class="p">,</span> <span class="n">column_names</span><span class="p">,</span>
            <span class="n">headers</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_eq_header</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span> <span class="o">==</span> <span class="n">table</span><span class="o">.</span><span class="n">is_sort1</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;table_name=</span><span class="si">%r</span><span class="s1"> class_name=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">ie</span><span class="p">,</span> <span class="n">eid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">):</span>
                    <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">ie</span><span class="p">,</span> <span class="p">:]</span>
                    <span class="n">t2</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">ie</span><span class="p">,</span> <span class="p">:]</span>
                    <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ay1</span><span class="p">,</span> <span class="n">az1</span><span class="p">,</span> <span class="n">vx1</span><span class="p">,</span> <span class="n">vy1</span><span class="p">,</span> <span class="n">vz1</span><span class="p">,</span> <span class="n">pressure1</span><span class="p">)</span> <span class="o">=</span> <span class="n">t1</span>
                    <span class="p">(</span><span class="n">ax2</span><span class="p">,</span> <span class="n">ay2</span><span class="p">,</span> <span class="n">az2</span><span class="p">,</span> <span class="n">vx2</span><span class="p">,</span> <span class="n">vy2</span><span class="p">,</span> <span class="n">vz2</span><span class="p">,</span> <span class="n">pressure2</span><span class="p">)</span> <span class="o">=</span> <span class="n">t2</span>
                    <span class="c1">#rpressure1 = pressure1.real</span>
                    <span class="c1">#rpressure2 = pressure2.real</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">allclose</span><span class="p">([</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ay1</span><span class="p">,</span> <span class="n">az1</span><span class="p">,</span> <span class="n">vx1</span><span class="p">,</span> <span class="n">vy1</span><span class="p">,</span> <span class="n">vz1</span><span class="p">],</span>
                                    <span class="p">[</span><span class="n">ax2</span><span class="p">,</span> <span class="n">ay2</span><span class="p">,</span> <span class="n">az2</span><span class="p">,</span> <span class="n">vx2</span><span class="p">,</span> <span class="n">vy2</span><span class="p">,</span> <span class="n">vz2</span><span class="p">]):</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">    (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)  (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">eid</span><span class="p">,</span>
                            <span class="n">ax1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">t1</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                            <span class="n">ax2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">t2</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span>
                        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="c1">#print(msg)</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">add_sort1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">ename</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">ay</span><span class="p">,</span> <span class="n">az</span><span class="p">,</span> <span class="n">vx</span><span class="p">,</span> <span class="n">vy</span><span class="p">,</span> <span class="n">vz</span><span class="p">,</span> <span class="n">pressure</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;unvectorized method for adding SORT1 transient data&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span> <span class="ow">and</span> <span class="n">eid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;dt=</span><span class="si">%s</span><span class="s1"> eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ielement</span><span class="p">]</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">ax</span><span class="p">,</span> <span class="n">ay</span><span class="p">,</span> <span class="n">az</span><span class="p">,</span> <span class="n">vx</span><span class="p">,</span> <span class="n">vy</span><span class="p">,</span> <span class="n">vz</span><span class="p">,</span> <span class="n">pressure</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">+=</span> <span class="mi">1</span>

<div class="viewcode-block" id="ComplexSolidPressureForceArray.get_stats"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexSolidPressureForceArray.get_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">short</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="s1">&#39;&lt;</span><span class="si">%s</span><span class="s1">&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                <span class="s1">&#39;  ntimes: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span>
                <span class="s1">&#39;  ntotal: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span>
            <span class="p">]</span>

        <span class="n">nelements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="c1">#ntotal = self.ntotal</span>

        <span class="n">msg</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">):</span>  <span class="c1"># transient</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> ntimes=</span><span class="si">%i</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="s1">; table_name=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">))</span>
            <span class="n">ntimes_word</span> <span class="o">=</span> <span class="s1">&#39;ntimes&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="s1">; table_name=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">))</span>
            <span class="n">ntimes_word</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  eType</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data: [</span><span class="si">%s</span><span class="s1">, nelements, </span><span class="si">%i</span><span class="s1">] where </span><span class="si">%i</span><span class="s1">=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">ntimes_word</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">headers</span><span class="p">))))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data.shape = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
        <span class="c1">#msg.append(&#39;  element type: %s\n&#39; % self.element_type)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  element name: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_code</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="ComplexSolidPressureForceArray.get_f06_header"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexSolidPressureForceArray.get_f06_header">[docs]</a>    <span class="k">def</span> <span class="nf">get_f06_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;                                                 ( R O O T   M E A N   S Q U A R E )      </span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;              C O M P L E X   A C C E L E R A T I O N S   V E L O C I T I E S   A N D   P R E S S U R E   L E V E L S</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="c1">#&#39;                                                          (REAL/IMAGINARY)&#39;</span>
            <span class="c1">#&#39;     ELE-ID   EL-TYPE    X-ACCELERATION  Y-ACCELERATION  Z-ACCELERATION     X-VELOCITY     Y-VELOCITY     Z-VELOCITY   PRESSURE (DB)&#39;</span>
            <span class="c1">#&#39;       2000    PENPR      6.883253E+06    1.066544E+07   -6.883253E+06     7.288279E+05  -3.134843E+04  -7.288279E+05   1.162309E+02&#39;</span>
            <span class="c1">#&#39;                          1.831744E+07   -7.878719E+05   -1.831744E+07    -2.738759E+05  -4.243642E+05   2.738759E+05&#39;</span>
            <span class="c1">#&#39;&#39;</span>
        <span class="p">]</span>
        <span class="c1">#msg = [&#39;                                   C O M P L E X   A C O U S T I C   P R E S S U R E   R E S U L T S&#39;]</span>
        <span class="c1">#&#39;                                   C O M P L E X   A C O U S T I C   P R E S S U R E   R E S U L T S&#39;</span>
        <span class="c1">#&#39;                                                         (MAGNITUDE/PHASE)&#39;</span>
        <span class="c1">#&#39; &#39;</span>
        <span class="c1">#&#39;      POINT ID.               TYPE                    P                   P(RMS)              DB                  DB(A)&#39;</span>
        <span class="c1">#&#39;0           57                 S                   7.339671E+05        5.189931E+05        1.173135E+02        3.011353E+01&#39;</span>
        <span class="c1">#&#39;                                                       249.9102            249.9102            249.9102            249.9102&#39;</span>

        <span class="k">if</span> <span class="n">is_mag_phase</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;                                                          (MAGNITUDE/PHASE)</span><span class="se">\n</span><span class="s1"> </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;                                                          (REAL/IMAGINARY)</span><span class="se">\n</span><span class="s1"> </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">is_sort1</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;     ELE-ID   EL-TYPE    X-ACCELERATION  Y-ACCELERATION  Z-ACCELERATION     X-VELOCITY     Y-VELOCITY     Z-VELOCITY   PRESSURE (DB)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
            <span class="c1">#msg += [</span>
                <span class="c1">#&#39;      POINT ID.               TYPE                    P                   P(RMS)              DB                  DB(A)\n&#39;</span>
            <span class="c1">#]</span>
            <span class="c1">#&#39;                      14                  0.0          /  0.0                           0.0          /  0.0&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;sort2&#39;</span><span class="p">)</span>


        <span class="k">return</span> <span class="n">msg</span></div>

    <span class="c1">#def get_element_index(self, eids):</span>
        <span class="c1">## elements are always sorted; nodes are not</span>
        <span class="c1">#itot = searchsorted(eids, self.element)  #[0]</span>
        <span class="c1">#return itot</span>

    <span class="c1">#def eid_to_element_node_index(self, eids):</span>
        <span class="c1">##ind = ravel([searchsorted(self.element == eid) for eid in eids])</span>
        <span class="c1">#ind = searchsorted(eids, self.element)</span>
        <span class="c1">##ind = ind.reshape(ind.size)</span>
        <span class="c1">##ind.sort()</span>
        <span class="c1">#return ind</span>

<div class="viewcode-block" id="ComplexSolidPressureForceArray.write_f06"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexSolidPressureForceArray.write_f06">[docs]</a>    <span class="k">def</span> <span class="nf">write_f06</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f06_file</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">page_stamp</span><span class="o">=</span><span class="s1">&#39;PAGE </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span>
                  <span class="n">page_num</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">header</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">msg_temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_f06_header</span><span class="p">(</span><span class="n">is_mag_phase</span><span class="o">=</span><span class="n">is_mag_phase</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="n">is_sort1</span><span class="p">)</span>

        <span class="c1"># write the f06</span>
        <span class="c1">#(ntimes, ntotal, two) = self.data.shape</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">eids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span>

        <span class="c1">#print(&#39;len(eids)=%s nwrite=%s is_odd=%s&#39; % (len(eids), nwrite, is_odd))</span>
        <span class="n">etypei</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span>
        <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ntimes</span><span class="p">):</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>  <span class="c1"># TODO: rename this...</span>
            <span class="n">header</span> <span class="o">=</span> <span class="n">_eigenvalue_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">itime</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">header</span> <span class="o">+</span> <span class="n">msg_temp</span><span class="p">))</span>

            <span class="c1">#print(&quot;self.data.shape=%s itime=%s ieids=%s&quot; % (str(self.data.shape), itime, str(ieids)))</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">ay</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">az</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">vx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">vy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">vz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">pressure</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">eid</span><span class="p">,</span> <span class="n">axi</span><span class="p">,</span> <span class="n">ayi</span><span class="p">,</span> <span class="n">azi</span><span class="p">,</span> <span class="n">vxi</span><span class="p">,</span> <span class="n">vyi</span><span class="p">,</span> <span class="n">vzi</span><span class="p">,</span> <span class="n">pressurei</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">ay</span><span class="p">,</span> <span class="n">az</span><span class="p">,</span> <span class="n">vx</span><span class="p">,</span> <span class="n">vy</span><span class="p">,</span> <span class="n">vz</span><span class="p">,</span> <span class="n">pressure</span><span class="p">):</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">write_imag_floats_13e</span><span class="p">([</span><span class="n">axi</span><span class="p">,</span> <span class="n">ayi</span><span class="p">,</span> <span class="n">azi</span><span class="p">,</span> <span class="n">vxi</span><span class="p">,</span> <span class="n">vyi</span><span class="p">,</span> <span class="n">vzi</span><span class="p">,</span> <span class="n">pressurei</span><span class="p">],</span> <span class="n">is_mag_phase</span><span class="p">)</span>
                <span class="p">[</span><span class="n">saxr</span><span class="p">,</span> <span class="n">sayr</span><span class="p">,</span> <span class="n">sazr</span><span class="p">,</span> <span class="n">svxr</span><span class="p">,</span> <span class="n">svyr</span><span class="p">,</span> <span class="n">svzr</span><span class="p">,</span> <span class="n">spressurer</span><span class="p">,</span>
                 <span class="n">saxi</span><span class="p">,</span> <span class="n">sayi</span><span class="p">,</span> <span class="n">sazi</span><span class="p">,</span> <span class="n">svxi</span><span class="p">,</span> <span class="n">svyi</span><span class="p">,</span> <span class="n">svzi</span><span class="p">,</span> <span class="n">spressurei</span><span class="p">]</span> <span class="o">=</span> <span class="n">out</span>
                <span class="c1">#&#39;       1000    HEXPR      1.582050E-08    5.505425E+06    2.598164E-09    -8.884337E-10  -4.806934E+04   1.046571E-10   9.968034E+01&#39;</span>
                <span class="c1">#&#39;                         -1.116439E-08   -6.040572E+05    1.315160E-09    -1.258955E-09  -4.381078E+05  -2.067553E-10&#39;</span>

                <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;      </span><span class="si">%8i</span><span class="s1"> </span><span class="si">%8s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span>
                               <span class="s1">&#39;      </span><span class="si">%8s</span><span class="s1"> </span><span class="si">%8s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%s</span><span class="se">\n\n</span><span class="s1">&#39;</span>
                               <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">etypei</span><span class="p">,</span> <span class="n">saxr</span><span class="p">,</span> <span class="n">sayr</span><span class="p">,</span> <span class="n">sazr</span><span class="p">,</span> <span class="n">svxr</span><span class="p">,</span> <span class="n">svyr</span><span class="p">,</span> <span class="n">svzr</span><span class="p">,</span> <span class="n">spressurer</span><span class="p">,</span>
                                  <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>      <span class="n">saxi</span><span class="p">,</span> <span class="n">sayi</span><span class="p">,</span> <span class="n">sazi</span><span class="p">,</span> <span class="n">svxi</span><span class="p">,</span> <span class="n">svyi</span><span class="p">,</span> <span class="n">svzi</span><span class="p">))</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">page_stamp</span> <span class="o">%</span> <span class="n">page_num</span><span class="p">)</span>
            <span class="n">page_num</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">page_num</span> <span class="o">-</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="ComplexSolidPressureForceArray.write_op2"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexSolidPressureForceArray.write_op2">[docs]</a>    <span class="k">def</span> <span class="nf">write_op2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op2</span><span class="p">,</span> <span class="n">op2_ascii</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="n">new_result</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span>
                  <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">endian</span><span class="o">=</span><span class="s1">&#39;&gt;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;writes an OP2&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">inspect</span>
        <span class="kn">from</span> <span class="nn">struct</span> <span class="kn">import</span> <span class="n">Struct</span><span class="p">,</span> <span class="n">pack</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
        <span class="n">call_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getouterframes</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.write_op2: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">call_frame</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]))</span>

        <span class="k">if</span> <span class="n">itable</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_table_header</span><span class="p">(</span><span class="n">op2</span><span class="p">,</span> <span class="n">op2_ascii</span><span class="p">,</span> <span class="n">date</span><span class="p">)</span>
            <span class="n">itable</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span>

        <span class="n">eids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span>

        <span class="c1"># table 4 info</span>
        <span class="c1">#ntimes = self.data.shape[0]</span>
        <span class="c1">#nnodes = self.data.shape[1]</span>
        <span class="n">nelements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># 21 = 1 node, 3 principal, 6 components, 9 vectors, 2 p/ovm</span>
        <span class="c1">#ntotal = ((nnodes * 21) + 1) + (nelements * 4)</span>

        <span class="n">ntotali</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="n">ntotali</span> <span class="o">*</span> <span class="n">nelements</span>

        <span class="c1">#device_code = self.device_code</span>
        <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  ntimes = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">)</span>

        <span class="n">eids_device</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">device_code</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">:</span>
            <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i 8s13f&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;SORT2&#39;</span><span class="p">)</span>

        <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;nelements=</span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nelements</span><span class="p">)</span>

        <span class="n">etypei</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span>
        <span class="k">if</span> <span class="n">etypei</span> <span class="o">==</span> <span class="mi">76</span><span class="p">:</span>
            <span class="n">ename</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;HEXPR&#39;</span>
        <span class="k">elif</span> <span class="n">etypei</span> <span class="o">==</span> <span class="mi">77</span><span class="p">:</span>
            <span class="n">ename</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;PENPR&#39;</span>
        <span class="k">elif</span> <span class="n">etypei</span> <span class="o">==</span> <span class="mi">78</span><span class="p">:</span>
            <span class="n">ename</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;TETPR&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1">#etypeb = self.element_type#.encode(&#39;ascii&#39;)</span>
        <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_table_3</span><span class="p">(</span><span class="n">op2</span><span class="p">,</span> <span class="n">op2_ascii</span><span class="p">,</span> <span class="n">new_result</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="n">itime</span><span class="p">)</span>

            <span class="c1"># record 4</span>
            <span class="n">itable</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">]</span>
            <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%i</span><span class="s1">i&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">header</span><span class="p">),</span> <span class="o">*</span><span class="n">header</span><span class="p">))</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, 0, 4]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, </span><span class="si">%s</span><span class="s1">, 4]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">itable</span><span class="p">))</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, </span><span class="si">%i</span><span class="s1">, 4]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">))</span>

            <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">ay</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">az</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">vx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">vy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">vz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">pressure</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">eid</span><span class="p">,</span> <span class="n">eid_device</span><span class="p">,</span> <span class="n">axi</span><span class="p">,</span> <span class="n">ayi</span><span class="p">,</span> <span class="n">azi</span><span class="p">,</span> <span class="n">vxi</span><span class="p">,</span> <span class="n">vyi</span><span class="p">,</span> <span class="n">vzi</span><span class="p">,</span> <span class="n">pressurei</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
                    <span class="n">eids</span><span class="p">,</span> <span class="n">eids_device</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">ay</span><span class="p">,</span> <span class="n">az</span><span class="p">,</span> <span class="n">vx</span><span class="p">,</span> <span class="n">vy</span><span class="p">,</span> <span class="n">vz</span><span class="p">,</span> <span class="n">pressure</span><span class="p">):</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">write_imag_floats_13e</span><span class="p">([</span><span class="n">axi</span><span class="p">,</span> <span class="n">ayi</span><span class="p">,</span> <span class="n">azi</span><span class="p">,</span> <span class="n">vxi</span><span class="p">,</span> <span class="n">vyi</span><span class="p">,</span> <span class="n">vzi</span><span class="p">,</span> <span class="n">pressurei</span><span class="p">],</span> <span class="n">is_mag_phase</span><span class="p">)</span>
                <span class="p">[</span><span class="n">saxr</span><span class="p">,</span> <span class="n">sayr</span><span class="p">,</span> <span class="n">sazr</span><span class="p">,</span> <span class="n">svxr</span><span class="p">,</span> <span class="n">svyr</span><span class="p">,</span> <span class="n">svzr</span><span class="p">,</span> <span class="n">spressurer</span><span class="p">,</span>
                 <span class="n">saxi</span><span class="p">,</span> <span class="n">sayi</span><span class="p">,</span> <span class="n">sazi</span><span class="p">,</span> <span class="n">svxi</span><span class="p">,</span> <span class="n">svyi</span><span class="p">,</span> <span class="n">svzi</span><span class="p">,</span> <span class="n">spressurei</span><span class="p">]</span> <span class="o">=</span> <span class="n">out</span>
                <span class="c1">#&#39;       1000    HEXPR      1.582050E-08    5.505425E+06    2.598164E-09    -8.884337E-10  -4.806934E+04   1.046571E-10   9.968034E+01&#39;</span>
                <span class="c1">#&#39;                         -1.116439E-08   -6.040572E+05    1.315160E-09    -1.258955E-09  -4.381078E+05  -2.067553E-10&#39;</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">eid_device</span><span class="p">,</span> <span class="n">ename</span><span class="p">,</span>
                    <span class="n">axi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">ayi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">azi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">vxi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">vyi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">vzi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">pressurei</span><span class="o">.</span><span class="n">real</span><span class="p">,</span>
                    <span class="n">axi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">ayi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">azi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">vxi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">vyi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">vzi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                <span class="p">]</span>
                <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;      </span><span class="si">%8i</span><span class="s1"> </span><span class="si">%8s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span>
                                <span class="s1">&#39;      </span><span class="si">%8s</span><span class="s1"> </span><span class="si">%8s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%-13s</span><span class="s1"> </span><span class="si">%s</span><span class="se">\n\n</span><span class="s1">&#39;</span>
                                <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">etypei</span><span class="p">,</span> <span class="n">saxr</span><span class="p">,</span> <span class="n">sayr</span><span class="p">,</span> <span class="n">sazr</span><span class="p">,</span> <span class="n">svxr</span><span class="p">,</span> <span class="n">svyr</span><span class="p">,</span> <span class="n">svzr</span><span class="p">,</span> <span class="n">spressurer</span><span class="p">,</span>
                                   <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>      <span class="n">saxi</span><span class="p">,</span> <span class="n">sayi</span><span class="p">,</span> <span class="n">sazi</span><span class="p">,</span> <span class="n">svxi</span><span class="p">,</span> <span class="n">svyi</span><span class="p">,</span> <span class="n">svzi</span><span class="p">))</span>
                <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">struct1</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">))</span>

            <span class="c1">#for eid, eid_device, fxi, fyi, fzi, mxi, myi, mzi in zip(eids, eids_device, fx, fy, fz, mx, my, mz):</span>
                <span class="c1">#data = [</span>
                    <span class="c1">#eid_device,</span>
                    <span class="c1">#fxi.real, fyi.real, fzi.real, mxi.real, myi.real, mzi.real,</span>
                    <span class="c1">#fxi.imag, fyi.imag, fzi.imag, mxi.imag, myi.imag, mzi.imag,</span>
                <span class="c1">#]</span>

                <span class="c1">#vals = (fxi, fyi, fzi, mxi, myi, mzi)</span>
                <span class="c1">#vals2 = write_imag_floats_13e(vals, is_mag_phase)</span>
                <span class="c1">#(fxir, fyir, fzir, mxir, myir, mzir,</span>
                 <span class="c1">#fxii, fyii, fzii, mxii, myii, mzii) = vals2</span>
                <span class="c1">#op2_ascii.write(&#39;0%26i   %-13s  %-13s  %-13s  %-13s  %-13s  %s\n&#39;</span>
                               <span class="c1">#&#39; %26s   %-13s  %-13s  %-13s  %-13s  %-13s  %s\n&#39; % (</span>
                                   <span class="c1">#eid, fxir, fyir, fzir, mxir, myir, mzir,</span>
                                   <span class="c1">#&#39;&#39;, fxii, fyii, fzii, mxii, myii, mzii))</span>
                <span class="c1">#op2.write(struct1.pack(*data))</span>

            <span class="n">itable</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,]</span>
            <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">header</span><span class="p">))</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;footer = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">header</span><span class="p">)</span>
            <span class="n">new_result</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">itable</span></div></div>


<div class="viewcode-block" id="ComplexForceMomentArray"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexForceMomentArray">[docs]</a><span class="k">class</span> <span class="nc">ComplexForceMomentArray</span><span class="p">(</span><span class="n">ComplexForceObject</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="n">ComplexForceObject</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">result_flag</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#self.code = [self.format_code, self.sort_code, self.s_code]</span>

        <span class="c1">#self.ntimes = 0  # or frequency/mode</span>
        <span class="c1">#self.ntotal = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itime</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># result specific</span>

<div class="viewcode-block" id="ComplexForceMomentArray.get_headers"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexForceMomentArray.get_headers">[docs]</a>    <span class="k">def</span> <span class="nf">get_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;fx&#39;</span><span class="p">,</span> <span class="s1">&#39;fy&#39;</span><span class="p">,</span> <span class="s1">&#39;fz&#39;</span><span class="p">,</span> <span class="s1">&#39;mx&#39;</span><span class="p">,</span> <span class="s1">&#39;my&#39;</span><span class="p">,</span> <span class="s1">&#39;mz&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">headers</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_real</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_complex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_reset_indices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="ComplexForceMomentArray.build"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexForceMomentArray.build">[docs]</a>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;sizes the vectorized attributes of the ComplexCBushForceArray&quot;&quot;&quot;</span>
        <span class="c1">#print(&#39;ntimes=%s nelements=%s ntotal=%s subtitle=%s&#39; % (</span>
            <span class="c1">#self.ntimes, self.nelements, self.ntotal, self.subtitle))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="c1">#self.names = []</span>
        <span class="c1">#self.nelements //= nnodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">/=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="c1">#self.ntotal //= self.ntimes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itime</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1">#print(&#39;ntotal=%s ntimes=%s nelements=%s&#39; % (self.ntotal, self.ntimes, self.nelements))</span>

        <span class="c1">#print(&quot;ntimes=%s nelements=%s ntotal=%s&quot; % (self.ntimes, self.nelements, self.ntotal))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="s1">&#39;float32&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span> <span class="s1">&#39;int32&#39;</span><span class="p">)</span>

        <span class="c1"># the number is messed up because of the offset for the element&#39;s properties</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;ntimes=</span><span class="si">%s</span><span class="s1"> nelements=</span><span class="si">%s</span><span class="s1"> nnodes=</span><span class="si">%s</span><span class="s1"> ne*nn=</span><span class="si">%s</span><span class="s1"> ntotal=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="c1">#[fx, fy, fz, mx, my, mz]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="s1">&#39;complex64&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ComplexForceMomentArray.build_dataframe"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexForceMomentArray.build_dataframe">[docs]</a>    <span class="k">def</span> <span class="nf">build_dataframe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;creates a pandas dataframe&quot;&quot;&quot;</span>
        <span class="c1">#Freq                              10.0</span>
        <span class="c1">#ElementID Item</span>
        <span class="c1">#123       fx    10000.000000+0.000021j</span>
        <span class="c1">#          fy     1000.000000+0.000002j</span>
        <span class="c1">#          fz      100.000000+0.000000j</span>
        <span class="c1">#          mx     7000.000000+0.000000j</span>
        <span class="c1">#          my      700.000000+0.000000j</span>
        <span class="c1">#          mz       70.000000+0.000000j</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">()</span>
        <span class="n">column_names</span><span class="p">,</span> <span class="n">column_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_dataframe_transient_header</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_pandas_transient_elements</span><span class="p">(</span>
            <span class="n">column_values</span><span class="p">,</span> <span class="n">column_names</span><span class="p">,</span>
            <span class="n">headers</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_eq_header</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span> <span class="o">==</span> <span class="n">table</span><span class="o">.</span><span class="n">is_sort1</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;table_name=</span><span class="si">%r</span><span class="s1"> class_name=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ntimes</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">ieid</span><span class="p">,</span> <span class="n">eid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">):</span>
                        <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">ieid</span><span class="p">,</span> <span class="p">:]</span>
                        <span class="n">t2</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">ieid</span><span class="p">,</span> <span class="p">:]</span>
                        <span class="p">(</span><span class="n">tx1</span><span class="p">,</span> <span class="n">ty1</span><span class="p">,</span> <span class="n">tz1</span><span class="p">,</span> <span class="n">rx1</span><span class="p">,</span> <span class="n">ry1</span><span class="p">,</span> <span class="n">rz1</span><span class="p">)</span> <span class="o">=</span> <span class="n">t1</span>
                        <span class="p">(</span><span class="n">tx2</span><span class="p">,</span> <span class="n">ty2</span><span class="p">,</span> <span class="n">tz2</span><span class="p">,</span> <span class="n">rx2</span><span class="p">,</span> <span class="n">ry2</span><span class="p">,</span> <span class="n">rz2</span><span class="p">)</span> <span class="o">=</span> <span class="n">t2</span>
                        <span class="n">d</span> <span class="o">=</span> <span class="n">t1</span> <span class="o">-</span> <span class="n">t2</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">allclose</span><span class="p">([</span><span class="n">tx1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">tx1</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">ty1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">ty1</span><span class="o">.</span><span class="n">imag</span><span class="p">],</span>
                                        <span class="p">[</span><span class="n">tx2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">tx2</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">ty2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">ty2</span><span class="o">.</span><span class="n">imag</span><span class="p">],</span> <span class="n">atol</span><span class="o">=</span><span class="mf">0.0001</span><span class="p">):</span>
                        <span class="c1">#if not np.array_equal(t1, t2):</span>
                            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%-4s</span><span class="s1">  (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j)</span><span class="se">\n</span><span class="s1">      (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j)</span><span class="se">\n</span><span class="s1">  dt12=(</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">j)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                <span class="n">eid</span><span class="p">,</span>
                                <span class="n">tx1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">tx1</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">ty1</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">ty1</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                                <span class="n">tx2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">tx2</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">ty2</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">ty2</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                                <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">imag</span><span class="p">,)</span>
                            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">is_sort2</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">add_sort1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">fx</span><span class="p">,</span> <span class="n">fy</span><span class="p">,</span> <span class="n">fz</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mz</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;unvectorized method for adding SORT1 transient data&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span> <span class="ow">and</span> <span class="n">eid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;dt=</span><span class="si">%s</span><span class="s1"> eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">)</span>
        <span class="c1">#[fx, fy, fz, mx, my, mz]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">fx</span><span class="p">,</span> <span class="n">fy</span><span class="p">,</span> <span class="n">fz</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mz</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itotal</span><span class="p">]</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+=</span> <span class="mi">1</span>

<div class="viewcode-block" id="ComplexForceMomentArray.get_stats"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexForceMomentArray.get_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">short</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="s1">&#39;&lt;</span><span class="si">%s</span><span class="s1">&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                <span class="s1">&#39;  ntimes: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span>
                <span class="s1">&#39;  ntotal: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span>
            <span class="p">]</span>

        <span class="n">nelements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="c1">#ntotal = self.ntotal</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">):</span>  <span class="c1"># transient</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> ntimes=</span><span class="si">%i</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="s1">; table_name=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="s1">; table_name=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  eType, cid</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data: [ntimes, nelements, 6] where 6=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">())))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data.shape = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
        <span class="c1"># msg.append(&#39;  is_sort1=%s is_sort2=%s\n&#39; % (self.is_sort1, self.is_sort2))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;  </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_code</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="ComplexForceMomentArray.write_f06"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexForceMomentArray.write_f06">[docs]</a>    <span class="k">def</span> <span class="nf">write_f06</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f06_file</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">page_stamp</span><span class="o">=</span><span class="s1">&#39;PAGE </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span>
                  <span class="n">page_num</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">header</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">is_mag_phase</span><span class="p">:</span>
            <span class="n">mag_phase</span> <span class="o">=</span> <span class="s1">&#39;                                                          (MAGNITUDE/PHASE)</span><span class="se">\n\n</span><span class="s1">&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mag_phase</span> <span class="o">=</span> <span class="s1">&#39;                                                          (REAL/IMAGINARY)</span><span class="se">\n\n</span><span class="s1">&#39;</span>


        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;freq&#39;</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;FREQUENCY&#39;</span>
        <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;mode&#39;</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;MODE&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

        <span class="c1"># is_sort1 = True</span>
        <span class="k">if</span> <span class="n">is_sort1</span><span class="p">:</span>
            <span class="n">line2</span> <span class="o">=</span> <span class="s1">&#39;       ID.     FORCE-X       FORCE-Y       FORCE-Z      MOMENT-X      MOMENT-Y      MOMENT-Z  </span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">line2</span> <span class="o">=</span> <span class="s1">&#39;   </span><span class="si">%26s</span><span class="s1">        FORCE-X       FORCE-Y       FORCE-Z      MOMENT-X      MOMENT-Y      MOMENT-Z  </span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">name</span>

        <span class="c1"># force</span>
        <span class="n">words</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_words</span><span class="p">()</span>
        <span class="n">msg_temp</span> <span class="o">=</span> <span class="n">header</span> <span class="o">+</span> <span class="p">[</span>
            <span class="n">words</span><span class="p">,</span>
            <span class="n">mag_phase</span><span class="p">,</span>
            <span class="s1">&#39; &#39;</span><span class="p">,</span>
            <span class="c1"># line1,</span>
            <span class="n">line2</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">is_sort1</span><span class="p">:</span>
                <span class="n">page_num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_sort1_as_sort1</span><span class="p">(</span><span class="n">f06_file</span><span class="p">,</span> <span class="n">page_num</span><span class="p">,</span> <span class="n">page_stamp</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">msg_temp</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">page_num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_sort1_as_sort2</span><span class="p">(</span><span class="n">f06_file</span><span class="p">,</span> <span class="n">page_num</span><span class="p">,</span> <span class="n">page_stamp</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">msg_temp</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span> <span class="o">==</span> <span class="kc">True</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">page_num</span> <span class="o">-</span> <span class="mi">1</span></div>

    <span class="k">def</span> <span class="nf">_write_sort1_as_sort1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f06_file</span><span class="p">,</span> <span class="n">page_num</span><span class="p">,</span> <span class="n">page_stamp</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">msg_temp</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="p">):</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">eids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span>
        <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ntimes</span><span class="p">):</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>
            <span class="n">dt_line</span> <span class="o">=</span> <span class="s1">&#39; </span><span class="si">%14s</span><span class="s1"> = </span><span class="si">%12.5E</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">dt</span><span class="p">)</span>
            <span class="n">header</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt_line</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">header</span> <span class="o">+</span> <span class="n">msg_temp</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">msg</span><span class="p">))</span>

            <span class="c1">#fx, fy, fz, mx, my, mz</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">:</span>
                <span class="n">fx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
                <span class="n">fy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">fz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]</span>
                <span class="n">mx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">3</span><span class="p">]</span>
                <span class="n">my</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">4</span><span class="p">]</span>
                <span class="n">mz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">5</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">itime</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
                <span class="n">fy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">itime</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">fz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">itime</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
                <span class="n">mx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">itime</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
                <span class="n">my</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">itime</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
                <span class="n">mz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">itime</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">eid</span><span class="p">,</span> <span class="n">fxi</span><span class="p">,</span> <span class="n">fyi</span><span class="p">,</span> <span class="n">fzi</span><span class="p">,</span> <span class="n">mxi</span><span class="p">,</span> <span class="n">myi</span><span class="p">,</span> <span class="n">mzi</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="n">fx</span><span class="p">,</span> <span class="n">fy</span><span class="p">,</span> <span class="n">fz</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mz</span><span class="p">):</span>
                <span class="n">vals</span> <span class="o">=</span> <span class="p">(</span><span class="n">fxi</span><span class="p">,</span> <span class="n">fyi</span><span class="p">,</span> <span class="n">fzi</span><span class="p">,</span> <span class="n">mxi</span><span class="p">,</span> <span class="n">myi</span><span class="p">,</span> <span class="n">mzi</span><span class="p">)</span>
                <span class="n">vals2</span> <span class="o">=</span> <span class="n">write_imag_floats_13e</span><span class="p">(</span><span class="n">vals</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="p">)</span>
                <span class="p">(</span><span class="n">fxir</span><span class="p">,</span> <span class="n">fyir</span><span class="p">,</span> <span class="n">fzir</span><span class="p">,</span> <span class="n">mxir</span><span class="p">,</span> <span class="n">myir</span><span class="p">,</span> <span class="n">mzir</span><span class="p">,</span>
                 <span class="n">fxii</span><span class="p">,</span> <span class="n">fyii</span><span class="p">,</span> <span class="n">fzii</span><span class="p">,</span> <span class="n">mxii</span><span class="p">,</span> <span class="n">myii</span><span class="p">,</span> <span class="n">mzii</span><span class="p">)</span> <span class="o">=</span> <span class="n">vals2</span>

                <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;0</span><span class="si">%26i</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span>
                               <span class="s1">&#39; </span><span class="si">%26s</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                   <span class="n">eid</span><span class="p">,</span> <span class="n">fxir</span><span class="p">,</span> <span class="n">fyir</span><span class="p">,</span> <span class="n">fzir</span><span class="p">,</span> <span class="n">mxir</span><span class="p">,</span> <span class="n">myir</span><span class="p">,</span> <span class="n">mzir</span><span class="p">,</span>
                                   <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">fxii</span><span class="p">,</span> <span class="n">fyii</span><span class="p">,</span> <span class="n">fzii</span><span class="p">,</span> <span class="n">mxii</span><span class="p">,</span> <span class="n">myii</span><span class="p">,</span> <span class="n">mzii</span><span class="p">))</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">page_stamp</span> <span class="o">%</span> <span class="n">page_num</span><span class="p">)</span>
            <span class="n">page_num</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">page_num</span>

    <span class="k">def</span> <span class="nf">_write_sort1_as_sort2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f06_file</span><span class="p">,</span> <span class="n">page_num</span><span class="p">,</span> <span class="n">page_stamp</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">msg_temp</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="p">):</span>
        <span class="n">eids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span>
        <span class="n">times</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_times</span>
        <span class="k">for</span> <span class="n">ieid</span><span class="p">,</span> <span class="n">eid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">eids</span><span class="p">):</span>
            <span class="n">eid_line</span> <span class="o">=</span> <span class="s1">&#39; ELEMENT-ID = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">)</span>
            <span class="n">header</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">eid_line</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">header</span> <span class="o">+</span> <span class="n">msg_temp</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">msg</span><span class="p">))</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">:</span>
                <span class="n">fx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">ieid</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
                <span class="n">fy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">ieid</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">fz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">ieid</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
                <span class="n">mx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">ieid</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
                <span class="n">my</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">ieid</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
                <span class="n">mz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">ieid</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">dt</span><span class="p">,</span> <span class="n">fxi</span><span class="p">,</span> <span class="n">fyi</span><span class="p">,</span> <span class="n">fzi</span><span class="p">,</span> <span class="n">mxi</span><span class="p">,</span> <span class="n">myi</span><span class="p">,</span> <span class="n">mzi</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">times</span><span class="p">,</span> <span class="n">fx</span><span class="p">,</span> <span class="n">fy</span><span class="p">,</span> <span class="n">fz</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mz</span><span class="p">):</span>
                <span class="n">vals</span> <span class="o">=</span> <span class="p">(</span><span class="n">fxi</span><span class="p">,</span> <span class="n">fyi</span><span class="p">,</span> <span class="n">fzi</span><span class="p">,</span> <span class="n">mxi</span><span class="p">,</span> <span class="n">myi</span><span class="p">,</span> <span class="n">mzi</span><span class="p">)</span>
                <span class="n">vals2</span> <span class="o">=</span> <span class="n">write_imag_floats_13e</span><span class="p">(</span><span class="n">vals</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="p">)</span>
                <span class="p">(</span><span class="n">fxir</span><span class="p">,</span> <span class="n">fyir</span><span class="p">,</span> <span class="n">fzir</span><span class="p">,</span> <span class="n">mxir</span><span class="p">,</span> <span class="n">myir</span><span class="p">,</span> <span class="n">mzir</span><span class="p">,</span>
                 <span class="n">fxii</span><span class="p">,</span> <span class="n">fyii</span><span class="p">,</span> <span class="n">fzii</span><span class="p">,</span> <span class="n">mxii</span><span class="p">,</span> <span class="n">myii</span><span class="p">,</span> <span class="n">mzii</span><span class="p">)</span> <span class="o">=</span> <span class="n">vals2</span>

                <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;0</span><span class="si">%26s</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span>
                               <span class="s1">&#39; </span><span class="si">%26s</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                   <span class="n">write_float_12e</span><span class="p">(</span><span class="n">dt</span><span class="p">),</span>
                                   <span class="n">fxir</span><span class="p">,</span> <span class="n">fyir</span><span class="p">,</span> <span class="n">fzir</span><span class="p">,</span> <span class="n">mxir</span><span class="p">,</span> <span class="n">myir</span><span class="p">,</span> <span class="n">mzir</span><span class="p">,</span>
                                   <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">fxii</span><span class="p">,</span> <span class="n">fyii</span><span class="p">,</span> <span class="n">fzii</span><span class="p">,</span> <span class="n">mxii</span><span class="p">,</span> <span class="n">myii</span><span class="p">,</span> <span class="n">mzii</span><span class="p">))</span>
            <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">page_stamp</span> <span class="o">%</span> <span class="n">page_num</span><span class="p">)</span>
            <span class="n">page_num</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">page_num</span>

<div class="viewcode-block" id="ComplexForceMomentArray.write_op2"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexForceMomentArray.write_op2">[docs]</a>    <span class="k">def</span> <span class="nf">write_op2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op2</span><span class="p">,</span> <span class="n">op2_ascii</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="n">new_result</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span>
                  <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">endian</span><span class="o">=</span><span class="s1">&#39;&gt;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;writes an OP2&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">inspect</span>
        <span class="kn">from</span> <span class="nn">struct</span> <span class="kn">import</span> <span class="n">Struct</span><span class="p">,</span> <span class="n">pack</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
        <span class="n">call_frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getouterframes</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.write_op2: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">call_frame</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]))</span>

        <span class="k">if</span> <span class="n">itable</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_table_header</span><span class="p">(</span><span class="n">op2</span><span class="p">,</span> <span class="n">op2_ascii</span><span class="p">,</span> <span class="n">date</span><span class="p">)</span>
            <span class="n">itable</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span>

        <span class="n">eids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span>

        <span class="c1"># table 4 info</span>
        <span class="c1">#ntimes = self.data.shape[0]</span>
        <span class="c1">#nnodes = self.data.shape[1]</span>
        <span class="n">nelements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># 21 = 1 node, 3 principal, 6 components, 9 vectors, 2 p/ovm</span>
        <span class="c1">#ntotal = ((nnodes * 21) + 1) + (nelements * 4)</span>

        <span class="n">ntotali</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="n">ntotali</span> <span class="o">*</span> <span class="n">nelements</span>

        <span class="c1">#device_code = self.device_code</span>
        <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  ntimes = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">)</span>

        <span class="n">eids_device</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">device_code</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">:</span>
            <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i 12f&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;SORT2&#39;</span><span class="p">)</span>

        <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;nelements=</span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nelements</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_table_3</span><span class="p">(</span><span class="n">op2</span><span class="p">,</span> <span class="n">op2_ascii</span><span class="p">,</span> <span class="n">new_result</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="n">itime</span><span class="p">)</span>

            <span class="c1"># record 4</span>
            <span class="n">itable</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="n">itable</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
                      <span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">]</span>
            <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%i</span><span class="s1">i&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">header</span><span class="p">),</span> <span class="o">*</span><span class="n">header</span><span class="p">))</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, 0, 4]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, </span><span class="si">%s</span><span class="s1">, 4]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">itable</span><span class="p">))</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;r4 [4, </span><span class="si">%i</span><span class="s1">, 4]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">))</span>

            <span class="n">fx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">fy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">fz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]</span>
            <span class="n">mx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">3</span><span class="p">]</span>
            <span class="n">my</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">4</span><span class="p">]</span>
            <span class="n">mz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">5</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">eid</span><span class="p">,</span> <span class="n">eid_device</span><span class="p">,</span> <span class="n">fxi</span><span class="p">,</span> <span class="n">fyi</span><span class="p">,</span> <span class="n">fzi</span><span class="p">,</span> <span class="n">mxi</span><span class="p">,</span> <span class="n">myi</span><span class="p">,</span> <span class="n">mzi</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="n">eids_device</span><span class="p">,</span> <span class="n">fx</span><span class="p">,</span> <span class="n">fy</span><span class="p">,</span> <span class="n">fz</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mz</span><span class="p">):</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">eid_device</span><span class="p">,</span>
                    <span class="n">fxi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">fyi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">fzi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">mxi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">myi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">mzi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span>
                    <span class="n">fxi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">fyi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">fzi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">mxi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">myi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">mzi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                <span class="p">]</span>

                <span class="n">vals</span> <span class="o">=</span> <span class="p">(</span><span class="n">fxi</span><span class="p">,</span> <span class="n">fyi</span><span class="p">,</span> <span class="n">fzi</span><span class="p">,</span> <span class="n">mxi</span><span class="p">,</span> <span class="n">myi</span><span class="p">,</span> <span class="n">mzi</span><span class="p">)</span>
                <span class="n">vals2</span> <span class="o">=</span> <span class="n">write_imag_floats_13e</span><span class="p">(</span><span class="n">vals</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="p">)</span>
                <span class="p">(</span><span class="n">fxir</span><span class="p">,</span> <span class="n">fyir</span><span class="p">,</span> <span class="n">fzir</span><span class="p">,</span> <span class="n">mxir</span><span class="p">,</span> <span class="n">myir</span><span class="p">,</span> <span class="n">mzir</span><span class="p">,</span>
                 <span class="n">fxii</span><span class="p">,</span> <span class="n">fyii</span><span class="p">,</span> <span class="n">fzii</span><span class="p">,</span> <span class="n">mxii</span><span class="p">,</span> <span class="n">myii</span><span class="p">,</span> <span class="n">mzii</span><span class="p">)</span> <span class="o">=</span> <span class="n">vals2</span>
                <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;0</span><span class="si">%26i</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span>
                               <span class="s1">&#39; </span><span class="si">%26s</span><span class="s1">   </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%-13s</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                   <span class="n">eid</span><span class="p">,</span> <span class="n">fxir</span><span class="p">,</span> <span class="n">fyir</span><span class="p">,</span> <span class="n">fzir</span><span class="p">,</span> <span class="n">mxir</span><span class="p">,</span> <span class="n">myir</span><span class="p">,</span> <span class="n">mzir</span><span class="p">,</span>
                                   <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">fxii</span><span class="p">,</span> <span class="n">fyii</span><span class="p">,</span> <span class="n">fzii</span><span class="p">,</span> <span class="n">mxii</span><span class="p">,</span> <span class="n">myii</span><span class="p">,</span> <span class="n">mzii</span><span class="p">))</span>
                <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">struct1</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">))</span>

            <span class="n">itable</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,]</span>
            <span class="n">op2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">header</span><span class="p">))</span>
            <span class="n">op2_ascii</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;footer = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">header</span><span class="p">)</span>
            <span class="n">new_result</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">itable</span></div>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">_words</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span></div>

<div class="viewcode-block" id="ComplexCBushForceArray"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBushForceArray">[docs]</a><span class="k">class</span> <span class="nc">ComplexCBushForceArray</span><span class="p">(</span><span class="n">ComplexForceMomentArray</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="n">ComplexForceMomentArray</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">=</span> <span class="s1">&#39;CBUSH&#39;</span>

    <span class="k">def</span> <span class="nf">_words</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">words</span> <span class="o">=</span> <span class="s1">&#39;                         C O M P L E X   F O R C E S   I N   B U S H   E L E M E N T S   ( C B U S H ) </span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">words</span></div>

<div class="viewcode-block" id="ComplexCBearForceArray"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBearForceArray">[docs]</a><span class="k">class</span> <span class="nc">ComplexCBearForceArray</span><span class="p">(</span><span class="n">ComplexForceMomentArray</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="n">ComplexForceMomentArray</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">=</span> <span class="s1">&#39;CBEAR&#39;</span></div>

    <span class="c1">#def _words(self) -&gt; str:</span>
        <span class="c1">#words = &#39;                        C O M P L E X   F O R C E S   I N   B U S H   E L E M E N T S   ( C B E A R ) \n&#39;</span>
        <span class="c1">#return words</span>


<div class="viewcode-block" id="ComplexCBeamForceVUArray"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBeamForceVUArray">[docs]</a><span class="k">class</span> <span class="nc">ComplexCBeamForceVUArray</span><span class="p">(</span><span class="n">BaseElement</span><span class="p">):</span>  <span class="c1"># 191-VUBEAM</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    **ELTYPE = 191 Beam view element (VUBEAM)**</span>

<span class="sd">    2 PARENT I     Parent p-element identification number</span>
<span class="sd">    3 COORD  I     CID coordinate system identification number</span>
<span class="sd">    4 ICORD  CHAR4 ICORD flat/curved and so on TCODE,7 =0 Real</span>
<span class="sd">    5 VUGRID I     VU grid ID for output grid</span>
<span class="sd">    6 POSIT  RS    x/L position of VU grid identification number</span>
<span class="sd">    7 POS(3) RS    Y, Z, W coordinate of output point</span>
<span class="sd">    10 NX    RS    Normal x</span>
<span class="sd">    11 TXY   RS    Shear xy</span>
<span class="sd">    12 TZX   RS    Shear zx</span>

<span class="sd">    **ELTYPE = 191 Beam view element (VUBEAM)**</span>

<span class="sd">    TCODE,7 = 1 Real/imaginary or magnitude/phase</span>
<span class="sd">    5 VUGRID   I  VU grid identification number for output grid</span>
<span class="sd">    6 POSIT    RS x/L position of VU grid identification number</span>

<span class="sd">    7 FORCEXR  RS Force x real/mag.</span>
<span class="sd">    8 SHEARYR  RS Shear force y real/mag.</span>
<span class="sd">    9 SHEARZR  RS Shear force z real/mag.</span>
<span class="sd">    10 TORSINR RS Torsional moment x real/mag.</span>
<span class="sd">    11 BENDYR  RS Bending moment y real/mag.</span>
<span class="sd">    12 BENDZR  RS Bending moment z real/mag.</span>

<span class="sd">    13 FORCEXI RS Force x imag./phase</span>
<span class="sd">    14 SHEARYI RS Shear force y imag./phase</span>
<span class="sd">    15 SHEARZI RS Shear force z imag./phase</span>
<span class="sd">    16 TORSINI RS Torsional moment x imag./phase</span>
<span class="sd">    17 BENDYI  RS Bending moment y imag./phase</span>
<span class="sd">    18 BENDZI  RS Bending moment z imag./phase</span>
<span class="sd">    Words 5 through max repeat 2 times</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="n">BaseElement</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">apply_data_code</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="c1">#self.code = [self.format_code, self.sort_code, self.s_code]</span>

        <span class="c1">#self.ntimes = 0  # or frequency/mode</span>
        <span class="c1">#self.ntotal = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># result specific</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nnodes</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1">#if is_sort1:</span>
            <span class="c1">#pass</span>
        <span class="c1">#else:</span>
            <span class="c1">#raise NotImplementedError(&#39;SORT2&#39;)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_real</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_complex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nnodes_per_element</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">191</span><span class="p">]:</span>  <span class="c1"># VUBEAM</span>
            <span class="n">nnodes_per_element</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;name=</span><span class="si">%r</span><span class="s1"> type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">nnodes_per_element</span>

    <span class="k">def</span> <span class="nf">_reset_indices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="ComplexCBeamForceVUArray.get_headers"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBeamForceVUArray.get_headers">[docs]</a>    <span class="k">def</span> <span class="nf">get_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;xxb&#39;</span><span class="p">,</span> <span class="s1">&#39;force_x&#39;</span><span class="p">,</span> <span class="s1">&#39;shear_y&#39;</span><span class="p">,</span> <span class="s1">&#39;shear_z&#39;</span><span class="p">,</span> <span class="s1">&#39;torsion&#39;</span><span class="p">,</span> <span class="s1">&#39;bending_y&#39;</span><span class="p">,</span> <span class="s1">&#39;bending_z&#39;</span><span class="p">]</span></div>

<div class="viewcode-block" id="ComplexCBeamForceVUArray.build"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBeamForceVUArray.build">[docs]</a>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;sizes the vectorized attributes of the ComplexCBendForceVUArray&quot;&quot;&quot;</span>
        <span class="c1">#print(&quot;self.ielement = %s&quot; % self.ielement)</span>
        <span class="c1">#print(&#39;ntimes=%s nelements=%s ntotal=%s&#39; % (self.ntimes, self.nelements, self.ntotal))</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ntimes=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;nelements=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ntotal=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span>

        <span class="n">nnodes_per_element</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nnodes_per_element</span>

        <span class="c1">#print(&#39;nnodes_per_element[%s, %s] = %s&#39; % (self.isubcase, self.element_type, nnodes_per_element))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nnodes</span> <span class="o">=</span> <span class="n">nnodes_per_element</span>
        <span class="c1">#self.nelements //= nnodes_per_element</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">//=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itime</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#self.ntimes = 0</span>
        <span class="c1">#self.nelements = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1">#print(&quot;***name=%s type=%s nnodes_per_element=%s ntimes=%s nelements=%s ntotal=%s&quot; % (</span>
            <span class="c1">#self.element_name, self.element_type, nnodes_per_element, self.ntimes, self.nelements, self.ntotal))</span>
        <span class="n">dtype</span><span class="p">,</span> <span class="n">idtype</span><span class="p">,</span> <span class="n">cfdtype</span> <span class="o">=</span> <span class="n">get_complex_times_dtype</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">idtype</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent_coord</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">idtype</span><span class="p">)</span>

        <span class="c1">#[xxb, force_x, shear_y, shear_z, torsion, bending_y, bending_z]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">cfdtype</span><span class="p">)</span></div>

    <span class="c1">#def build_dataframe(self):</span>
        <span class="c1">#&quot;&quot;&quot;creates a pandas dataframe&quot;&quot;&quot;</span>
        <span class="c1">#import pandas as pd</span>
        <span class="c1">#headers = self.get_headers()</span>

        <span class="c1">#nelements = self.element_node.shape[0] // 2</span>
        <span class="c1">#if self.is_fiber_distance:</span>
            <span class="c1">#fiber_distance = [&#39;Top&#39;, &#39;Bottom&#39;] * nelements</span>
        <span class="c1">#else:</span>
            <span class="c1">#fiber_distance = [&#39;Mean&#39;, &#39;Curvature&#39;] * nelements</span>
        <span class="c1">#fd = np.array(fiber_distance, dtype=&#39;unicode&#39;)</span>
        <span class="c1">#element_node = [self.element_node[:, 0], self.element_node[:, 1], fd]</span>

        <span class="c1">#if self.nonlinear_factor not in (None, np.nan):</span>
            <span class="c1">#column_names, column_values = self._build_dataframe_transient_header()</span>
            <span class="c1">#self.data_frame = pd.Panel(self.data, items=column_values, major_axis=element_node, minor_axis=headers).to_frame()</span>
            <span class="c1">#self.data_frame.columns.names = column_names</span>
            <span class="c1">#self.data_frame.index.names = [&#39;ElementID&#39;, &#39;NodeID&#39;, &#39;Location&#39;, &#39;Item&#39;]</span>
        <span class="c1">#else:</span>
            <span class="c1">## option B - nice!</span>
            <span class="c1">#df1 = pd.DataFrame(element_node).T</span>
            <span class="c1">#df1.columns = [&#39;ElementID&#39;, &#39;NodeID&#39;, &#39;Location&#39;]</span>
            <span class="c1">#df2 = pd.DataFrame(self.data[0])</span>
            <span class="c1">#df2.columns = headers</span>
            <span class="c1">#self.data_frame = df1.join(df2)</span>
        <span class="c1">#self.data_frame = self.data_frame.reset_index().replace({&#39;NodeID&#39;: {0:&#39;CEN&#39;}}).set_index([&#39;ElementID&#39;, &#39;NodeID&#39;, &#39;Location&#39;])</span>
        <span class="c1">#print(self.data_frame)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span> <span class="o">==</span> <span class="n">table</span><span class="o">.</span><span class="n">is_sort1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_eq_header</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;table_name=</span><span class="si">%r</span><span class="s1"> class_name=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">ie</span><span class="p">,</span> <span class="n">element_nodei</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">):</span>
                    <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">nid</span><span class="p">)</span> <span class="o">=</span> <span class="n">element_nodei</span>
                    <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">ie</span><span class="p">,</span> <span class="p">:]</span>
                    <span class="n">t2</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">ie</span><span class="p">,</span> <span class="p">:]</span>
                    <span class="p">(</span><span class="n">xxb1</span><span class="p">,</span> <span class="n">fx1</span><span class="p">,</span> <span class="n">fy1</span><span class="p">,</span> <span class="n">fz1</span><span class="p">,</span> <span class="n">mx1</span><span class="p">,</span> <span class="n">my1</span><span class="p">,</span> <span class="n">mz1</span><span class="p">)</span> <span class="o">=</span> <span class="n">t1</span>
                    <span class="p">(</span><span class="n">xxb2</span><span class="p">,</span> <span class="n">fx2</span><span class="p">,</span> <span class="n">fy2</span><span class="p">,</span> <span class="n">fz2</span><span class="p">,</span> <span class="n">mx2</span><span class="p">,</span> <span class="n">my2</span><span class="p">,</span> <span class="n">mz2</span><span class="p">)</span> <span class="o">=</span> <span class="n">t2</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">):</span>
                        <span class="n">eid_nid1</span> <span class="o">=</span> <span class="s1">&#39;(</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)  &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">nid</span><span class="p">)</span>
                        <span class="n">eid_nid2</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">eid_nid1</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">(</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="si">%s</span><span class="s1">(</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">eid_nid1</span><span class="p">,</span>
                            <span class="n">xxb1</span><span class="p">,</span> <span class="n">fx1</span><span class="p">,</span> <span class="n">fy1</span><span class="p">,</span> <span class="n">fz1</span><span class="p">,</span> <span class="n">mx1</span><span class="p">,</span> <span class="n">my1</span><span class="p">,</span> <span class="n">mz1</span><span class="p">,</span>
                            <span class="n">eid_nid2</span><span class="p">,</span>
                            <span class="n">xxb2</span><span class="p">,</span> <span class="n">fx2</span><span class="p">,</span> <span class="n">fy2</span><span class="p">,</span> <span class="n">fz2</span><span class="p">,</span> <span class="n">mx2</span><span class="p">,</span> <span class="n">my2</span><span class="p">,</span> <span class="n">mz2</span><span class="p">))</span>
                        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
                            <span class="c1">#print(msg.replace(&#39;+0j,&#39;, &#39;0,&#39;))</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;0j,&#39;</span><span class="p">,</span> <span class="s1">&#39;0,&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;+0j)&#39;</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">))</span>
                <span class="c1">#print(msg)</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;0j,&#39;</span><span class="p">,</span> <span class="s1">&#39;0,&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;+0j)&#39;</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_add_sort1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">coord</span><span class="p">,</span> <span class="n">icord</span><span class="p">,</span>
                   <span class="n">node_id</span><span class="p">,</span> <span class="n">xxb</span><span class="p">,</span> <span class="n">force_x</span><span class="p">,</span> <span class="n">shear_y</span><span class="p">,</span> <span class="n">shear_z</span><span class="p">,</span> <span class="n">torsion</span><span class="p">,</span> <span class="n">bending_y</span><span class="p">,</span> <span class="n">bending_z</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">eid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="n">eid</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node_id</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="n">node_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itotal</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">eid</span><span class="p">,</span> <span class="n">node_id</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent_coord</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itotal</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">parent</span><span class="p">,</span> <span class="n">coord</span><span class="p">]</span>
        <span class="c1"># TODO: save ICORD</span>
        <span class="c1">#print(&#39;parent=%r, coord=%r, icord=%r&#39; % (parent, coord, icord))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">xxb</span><span class="p">,</span> <span class="n">force_x</span><span class="p">,</span> <span class="n">shear_y</span><span class="p">,</span> <span class="n">shear_z</span><span class="p">,</span> <span class="n">torsion</span><span class="p">,</span> <span class="n">bending_y</span><span class="p">,</span> <span class="n">bending_z</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+=</span> <span class="mi">1</span>

<div class="viewcode-block" id="ComplexCBeamForceVUArray.get_stats"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBeamForceVUArray.get_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">short</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="s1">&#39;&lt;</span><span class="si">%s</span><span class="s1">&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                <span class="s1">&#39;  ntimes: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span>
                <span class="s1">&#39;  ntotal: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span>
            <span class="p">]</span>

        <span class="n">nelements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="n">nnodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nnodes</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span>
        <span class="n">nlayers</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="n">nelements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">nnodes</span> <span class="o">//</span> <span class="mi">2</span>

        <span class="n">msg</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">):</span>  <span class="c1"># transient</span>
            <span class="n">msgi</span> <span class="o">=</span> <span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> ntimes=</span><span class="si">%i</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="s1"> nnodes_per_element=</span><span class="si">%i</span><span class="s1"> nlayers=</span><span class="si">%i</span><span class="s1"> ntotal=</span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">,</span> <span class="n">nlayers</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">)</span>
            <span class="n">ntimes_word</span> <span class="o">=</span> <span class="s1">&#39;ntimes&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msgi</span> <span class="o">=</span> <span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="s1"> nnodes_per_element=</span><span class="si">%i</span><span class="s1"> nlayers=</span><span class="si">%i</span><span class="s1"> ntotal=</span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">,</span> <span class="n">nlayers</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">)</span>
            <span class="n">ntimes_word</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msgi</span><span class="p">)</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data: [</span><span class="si">%s</span><span class="s1">, ntotal, </span><span class="si">%i</span><span class="s1">] where </span><span class="si">%i</span><span class="s1">=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ntimes_word</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span>
                                                                 <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">headers</span><span class="p">))))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  element_node.shape = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data.shape=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  element type: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_code</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="ComplexCBeamForceVUArray.get_element_index"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBeamForceVUArray.get_element_index">[docs]</a>    <span class="k">def</span> <span class="nf">get_element_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eids</span><span class="p">):</span>
        <span class="c1"># elements are always sorted; nodes are not</span>
        <span class="n">itot</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">searchsorted</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>  <span class="c1">#[0]</span>
        <span class="k">return</span> <span class="n">itot</span></div>

<div class="viewcode-block" id="ComplexCBeamForceVUArray.eid_to_element_node_index"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBeamForceVUArray.eid_to_element_node_index">[docs]</a>    <span class="k">def</span> <span class="nf">eid_to_element_node_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eids</span><span class="p">):</span>
        <span class="n">ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ravel</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">searchsorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">eid</span><span class="p">)</span> <span class="k">for</span> <span class="n">eid</span> <span class="ow">in</span> <span class="n">eids</span><span class="p">])</span>
        <span class="c1">#ind = searchsorted(eids, self.element)</span>
        <span class="c1">#ind = ind.reshape(ind.size)</span>
        <span class="c1">#ind.sort()</span>
        <span class="k">return</span> <span class="n">ind</span></div>


<div class="viewcode-block" id="ComplexCBeamForceVUArray.write_f06"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexCBeamForceVUArray.write_f06">[docs]</a>    <span class="k">def</span> <span class="nf">write_f06</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f06_file</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">page_stamp</span><span class="o">=</span><span class="s1">&#39;PAGE </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">page_num</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">is_mag_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_sort1</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">                 C O M P L E X   F O R C E S   I N   P - V E R S I O N   B E A M   E L E M E N T S   ( B E A M )</span>
<span class="sd">                                                                (REAL/IMAGINARY)</span>
<span class="sd">                         VU-ELEMENT ID=  100001001, P-ELEMENT ID =       1, OUTPUT COORD. ID=       0, P OF EDGES =  3</span>

<span class="sd">           VUGRID VUGRID DIST/    - BENDING MOMENTS -            -WEB  SHEARS -             AXIAL         TOTAL</span>
<span class="sd">             ID.     LENGTH      PLANE 1       PLANE 2        PLANE 1       PLANE 2          FORCE         TORQUE</span>
<span class="sd">        111001001     0.000    0.000000E+00 -1.598690E+05   0.000000E+00 -1.040952E+06   0.000000E+00   0.000000E+00</span>
<span class="sd">                               0.000000E+00  0.000000E+00   0.000000E+00  0.000000E+00   0.000000E+00   0.000000E+00</span>
<span class="sd">        111001002     0.333    0.000000E+00  5.328967E+04   0.000000E+00  1.872484E+05   0.000000E+00   0.000000E+00</span>
<span class="sd">                               0.000000E+00  0.000000E+00   0.000000E+00  0.000000E+00   0.000000E+00   0.000000E+00</span>

<span class="sd">                       C O M P L E X    S T R A I N S    I N   P - V E R S I O N   B E A M   E L E M E N T S   ( B E A M )</span>
<span class="sd">                                                                 (REAL/IMAGINARY)</span>
<span class="sd">                          VU-ELEMENT ID=  100001003, P-ELEMENT ID =       1, OUTPUT COORD. ID=       0, P OF EDGES =  3</span>

<span class="sd">            VUGRID VUGRID DIST/     LOCATION         LOCATION         LOCATION         LOCATION</span>
<span class="sd">              ID.     LENGTH           C                D  E                F</span>
<span class="sd">         111001003     0.667    -2.557904E+00    -2.557904E+00     2.557904E+00     2.557904E+00</span>
<span class="sd">                                 0.000000E+00     0.000000E+00     0.000000E+00     0.000000E+00</span>
<span class="sd">         111001004     1.000     7.673713E+00     7.673713E+00    -7.673713E+00    -7.673713E+00</span>
<span class="sd">                                 0.000000E+00     0.000000E+00     0.000000E+00     0.000000E+00</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;                   C O M P L E X   F O R C E S   I N   P - V E R S I O N   B E A M   E L E M E N T S   ( B E A M )</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;                                                           (REAL/IMAGINARY)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;                    VU-ELEMENT ID=  </span><span class="si">%9i</span><span class="s1">, P-ELEMENT ID =</span><span class="si">%8i</span><span class="s1">, OUTPUT COORD. ID=</span><span class="si">%8i</span><span class="s1">, P OF EDGES =  3</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;      VUGRID VUGRID DIST/     - BENDING MOMENTS -              -WEB  SHEARS -               AXIAL           TOTAL                    </span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;        ID.     LENGTH       PLANE 1       PLANE 2          PLANE 1       PLANE 2            FORCE           TORQUE   </span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="c1">#&#39;   111001003     0.667     0.000000E+00  5.328967E+04     0.000000E+00 -1.872484E+05     0.000000E+00     0.000000E+00&#39;</span>
            <span class="c1">#&#39;                           0.000000E+00  0.000000E+00     0.000000E+00  0.000000E+00     0.000000E+00     0.000000E+00&#39;</span>
            <span class="c1">#&#39;   111001004     1.000     0.000000E+00 -1.598690E+05     0.000000E+00  1.040952E+06     0.000000E+00     0.000000E+00&#39;</span>
            <span class="c1">#&#39;                           0.000000E+00  0.000000E+00     0.000000E+00  0.000000E+00     0.000000E+00     0.000000E+00&#39;</span>

            <span class="c1">#&#39;                 C O M P L E X    S T R A I N S    I N   P - V E R S I O N   B E A M   E L E M E N T S   ( B E A M )\n&#39;</span>
            <span class="c1">#&#39;                                                           (REAL/IMAGINARY)\n&#39;</span>
            <span class="c1">#&#39;                    VU-ELEMENT ID=  %9i, P-ELEMENT ID =       1, OUTPUT COORD. ID=       0, P OF EDGES =  3\n&#39;</span>
            <span class="c1">#&#39;\n&#39;</span>
            <span class="c1">#&#39;      VUGRID VUGRID DIST/     LOCATION         LOCATION         LOCATION         LOCATION                                            \n&#39;</span>
            <span class="c1">#&#39;        ID.     LENGTH           C                D  E                F                                                              \n&#39;</span>
            <span class="c1">#&#39;   111001003     0.667    -2.557904E+00    -2.557904E+00     2.557904E+00     2.557904E+00&#39;</span>
            <span class="c1">#&#39;                           0.000000E+00     0.000000E+00     0.000000E+00     0.000000E+00&#39;</span>
            <span class="c1">#&#39;   111001004     1.000     7.673713E+00     7.673713E+00    -7.673713E+00    -7.673713E+00&#39;</span>
            <span class="c1">#&#39;                           0.000000E+00     0.000000E+00     0.000000E+00     0.000000E+00&#39;</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="n">header</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">#msg, nnodes, cen = _get_plate_msg(self)</span>

        <span class="c1"># write the f06</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">eids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_coord</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">coord</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent_coord</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">itime</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ntimes</span><span class="p">):</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span>
            <span class="n">header</span> <span class="o">=</span> <span class="n">_eigenvalue_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">itime</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>

            <span class="c1">#[xxb, force_x, shear_y, shear_z, torsion, bending_y, bending_z]</span>
            <span class="n">xxb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">fx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">fy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]</span>
            <span class="n">fz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">3</span><span class="p">]</span>
            <span class="n">mx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">4</span><span class="p">]</span>
            <span class="n">my</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">5</span><span class="p">]</span>
            <span class="n">mz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">6</span><span class="p">]</span>

            <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">parenti</span><span class="p">,</span> <span class="n">coordi</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">xxbi</span><span class="p">,</span> <span class="n">fxi</span><span class="p">,</span> <span class="n">fyi</span><span class="p">,</span> <span class="n">fzi</span><span class="p">,</span> <span class="n">mxi</span><span class="p">,</span> <span class="n">myi</span><span class="p">,</span> <span class="n">mzi</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
                 <span class="n">cycle</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">)),</span> <span class="n">eids</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">coord</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">xxb</span><span class="p">,</span> <span class="n">fx</span><span class="p">,</span> <span class="n">fy</span><span class="p">,</span> <span class="n">fz</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mz</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">header</span> <span class="o">+</span> <span class="n">msg</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">parenti</span><span class="p">,</span> <span class="n">coordi</span><span class="p">))</span>

                <span class="c1">#out = write_imag_floats_13e([fxi, fyi, fzi, mxi, myi, mzi], is_mag_phase=is_mag_phase)</span>
                <span class="c1">#[fxri, fyri, fzri, mxri, myri, mzri,</span>
                 <span class="c1">#fxii, fyii, fzii, mxii, myii, mzii] = out</span>

                        <span class="c1">#   nid   xxb</span>
                <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="s1">&#39;   </span><span class="si">%9i</span><span class="s1">     </span><span class="si">%.3f</span><span class="s1">    </span><span class="si">%13.6E</span><span class="s1"> </span><span class="si">%13.6E</span><span class="s1">    </span><span class="si">%13.6E</span><span class="s1"> </span><span class="si">%13.6E</span><span class="s1">    </span><span class="si">%13.6E</span><span class="s1">    </span><span class="si">%13.6E</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="s1">&#39;                          </span><span class="si">%13.6E</span><span class="s1"> </span><span class="si">%13.6E</span><span class="s1">    </span><span class="si">%13.6E</span><span class="s1"> </span><span class="si">%13.6E</span><span class="s1">    </span><span class="si">%13.6E</span><span class="s1">    </span><span class="si">%13.6E</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="n">nid</span><span class="p">,</span> <span class="n">xxbi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span>
                        <span class="n">myi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">mzi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">fyi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">fzi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">fxi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">mxi</span><span class="o">.</span><span class="n">real</span><span class="p">,</span>
                        <span class="n">myi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">mzi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">fyi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">fzi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">fxi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span> <span class="n">mxi</span><span class="o">.</span><span class="n">imag</span><span class="p">,</span>
                <span class="p">))</span>

                <span class="c1"># stress/strain</span>
                <span class="c1">#f06_file.write(</span>
                    <span class="c1">#&#39;   %9i     %.3s      %13.6E  %13.6E  %13.6E  %13.6E  %13.6E  %13.6E\n&#39;</span>
                    <span class="c1">#&#39;                          %13.6E  %13.6E  %13.6E  %13.6E  %13.6E  %13.6E\n&#39; % (</span>
                        <span class="c1">#nid, xxbi.real,</span>
                        <span class="c1">#fxi.real, fyi.real, fzi.real, mxi.real, myi.real, mzi.real,</span>
                        <span class="c1">#fxi.imag, fyi.imag, fzi.imag, mxi.imag, myi.imag, mzi.imag,</span>
                <span class="c1">#))</span>

                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">f06_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">page_stamp</span> <span class="o">%</span> <span class="n">page_num</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="n">page_num</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">page_num</span> <span class="o">-</span> <span class="mi">1</span></div></div>


<div class="viewcode-block" id="ComplexForceVU_2DArray"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexForceVU_2DArray">[docs]</a><span class="k">class</span> <span class="nc">ComplexForceVU_2DArray</span><span class="p">(</span><span class="n">BaseElement</span><span class="p">):</span>  <span class="c1"># 189-VUQUAD,190-VUTRIA</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">is_sort1</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
        <span class="n">BaseElement</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_code</span><span class="p">,</span> <span class="n">isubcase</span><span class="p">)</span>

        <span class="c1">#self.parent = {}</span>
        <span class="c1">#self.coord = {}</span>
        <span class="c1">#self.icord = {}</span>
        <span class="c1">#self.theta = {}</span>

        <span class="c1">#self.ntimes = 0  # or frequency/mode</span>
        <span class="c1">#self.ntotal = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># result specific</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># TODO if dt=None, handle SORT1 case</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dt</span> <span class="o">=</span> <span class="n">dt</span>
        <span class="c1">#if is_sort1:</span>
            <span class="c1">#if dt is not None:</span>
                <span class="c1">#self.add = self.add_sort1</span>
        <span class="c1">#else:</span>
            <span class="c1">#assert dt is not None</span>
            <span class="c1">#self.add = self.add_sort2</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_real</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_complex</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_reset_indices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="ComplexForceVU_2DArray.get_stats"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexForceVU_2DArray.get_stats">[docs]</a>    <span class="k">def</span> <span class="nf">get_stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">short</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="s1">&#39;&lt;</span><span class="si">%s</span><span class="s1">&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                <span class="s1">&#39;  ntimes: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span>
                <span class="s1">&#39;  ntotal: </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span><span class="p">,</span>
            <span class="p">]</span>

        <span class="n">nelements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="c1">#ntotal = self.ntotal</span>

        <span class="n">msg</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">):</span>  <span class="c1"># transient</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> ntimes=</span><span class="si">%i</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="s1">; table_name=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">))</span>
            <span class="n">ntimes_word</span> <span class="o">=</span> <span class="s1">&#39;ntimes&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  type=</span><span class="si">%s</span><span class="s1"> nelements=</span><span class="si">%i</span><span class="s1">; table_name=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">))</span>
            <span class="n">ntimes_word</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  eType</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_headers</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data: [</span><span class="si">%s</span><span class="s1">, nnodes, </span><span class="si">%i</span><span class="s1">] where </span><span class="si">%i</span><span class="s1">=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">ntimes_word</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">headers</span><span class="p">))))</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  data.shape = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
        <span class="c1">#msg.append(&#39;  element type: %s\n&#39; % self.element_type)</span>
        <span class="n">msg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;  element name: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_data_code</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="ComplexForceVU_2DArray.build"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexForceVU_2DArray.build">[docs]</a>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;sizes the vectorized attributes of the ComplexCShearForceArray&quot;&quot;&quot;</span>
        <span class="c1">#print(&#39;%s ntimes=%s nelements=%s ntotal=%s&#39; % (</span>
            <span class="c1">#self.element_type, self.ntimes, self.nelements, self.ntotal))</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ntimes=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;nelements=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ntotal=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span>
        <span class="c1">#self.names = []</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span> <span class="o">//=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itime</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#self.ntimes = 0</span>
        <span class="c1">#self.nelements = 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_built</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1">#print(&quot;ntimes=%s nelements=%s ntotal=%s&quot; % (self.ntimes, self.nelements, self.ntotal))</span>
        <span class="n">dtype</span><span class="p">,</span> <span class="n">idtype</span><span class="p">,</span> <span class="n">cfdtype</span> <span class="o">=</span> <span class="n">get_complex_times_dtype</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">idtype</span><span class="p">)</span>

        <span class="c1">#[membrane_x, membrane_y, membrane_xy, bending_x, bending_y, bending_xy,</span>
        <span class="c1"># shear_yz, shear_xz]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">ntimes</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">cfdtype</span><span class="p">)</span></div>

<div class="viewcode-block" id="ComplexForceVU_2DArray.get_headers"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.complex.html#pyNastran.op2.tables.oef_forces.oef_complex_force_objects.ComplexForceVU_2DArray.get_headers">[docs]</a>    <span class="k">def</span> <span class="nf">get_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;membrane_x&#39;</span><span class="p">,</span> <span class="s1">&#39;membrane_y&#39;</span><span class="p">,</span> <span class="s1">&#39;membrane_xy&#39;</span><span class="p">,</span>
            <span class="s1">&#39;bending_x&#39;</span><span class="p">,</span> <span class="s1">&#39;bending_y&#39;</span><span class="p">,</span> <span class="s1">&#39;bending_xy&#39;</span><span class="p">,</span>
            <span class="s1">&#39;shear_yz&#39;</span><span class="p">,</span> <span class="s1">&#39;shear_xz&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">headers</span></div>

    <span class="k">def</span> <span class="nf">add_sort1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">coord</span><span class="p">,</span> <span class="n">icord</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">vugrids</span><span class="p">,</span> <span class="n">forces</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;unvectorized method for adding SORT1 transient data&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span> <span class="ow">and</span> <span class="n">eid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;dt=</span><span class="si">%s</span><span class="s1"> eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>

        <span class="c1">#self.parent[eid] = parent</span>
        <span class="c1">#self.coord[eid] = coord</span>
        <span class="c1">#self.icord[eid] = icord</span>
        <span class="c1">#self.theta[eid] = theta</span>
        <span class="k">for</span> <span class="n">vugrid</span><span class="p">,</span> <span class="n">force</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">vugrids</span><span class="p">,</span> <span class="n">forces</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ielement</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">eid</span><span class="p">,</span> <span class="n">vugrid</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">force</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ielement</span> <span class="o">+=</span> <span class="mi">1</span></div>
<span class="c1">#&#39;                  C O M P L E X   F O R C E S   I N   Q U A D R I L A T E R A L   E L E M E N T S   ( Q U A D 8 )&#39;</span>
<span class="c1">#&#39;                                                          (REAL/IMAGINARY)&#39;</span>
<span class="c1">#&#39; &#39;</span>
<span class="c1">#&#39;    ELEMENT                    - MEMBRANE  FORCES -                      - BENDING   MOMENTS -            - TRANSVERSE SHEAR FORCES -&#39;</span>
<span class="c1">#&#39;      ID       GRID-ID     FX            FY            FXY           MX            MY            MXY           QX            QY&#39;</span>
<span class="c1">#&#39;0       100    CEN/8  0.0           0.0           0.0           0.0           0.0           0.0          -3.492460E-10 -1.368206E-09&#39;</span>
<span class="c1">#&#39;                      0.0           0.0           0.0           0.0           0.0           0.0           2.910383E-11  5.088840E-10&#39;</span>
<span class="c1">#&#39;&#39;</span>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Steven Doyle.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>