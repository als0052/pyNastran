

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>pyNastran.op2.tables.geom.dynamics &mdash; pyNastran 1.4-dev 1.4-dev documentation</title>
  

  
  <link rel="stylesheet" href="../../../../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../index.html" class="icon icon-home"> pyNastran 1.4-dev
          

          
            
            <img src="../../../../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.4-dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../quick_start/index.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../how_to/index.html">How To: pyNastran</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../reference/pyNastran.html">pyNastran Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../manual/index.html">pyNastran Manual</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">pyNastran 1.4-dev</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../../index.html">Module code</a> &raquo;</li>
        
      <li>pyNastran.op2.tables.geom.dynamics</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pyNastran.op2.tables.geom.dynamics</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;defines readers for BDF objects in the OP2 DYNAMIC/DYNAMICS table&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">struct</span> <span class="kn">import</span> <span class="n">unpack</span><span class="p">,</span> <span class="n">Struct</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">List</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">pyNastran.bdf.cards.nodes</span> <span class="kn">import</span> <span class="n">EPOINTs</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.cards.loads.loads</span> <span class="kn">import</span> <span class="n">DAREA</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.cards.methods</span> <span class="kn">import</span> <span class="n">EIGB</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.cards.dynamic</span> <span class="kn">import</span> <span class="n">FREQ1</span><span class="p">,</span> <span class="n">TF</span><span class="p">,</span> <span class="n">DELAY</span><span class="p">,</span> <span class="n">DPHASE</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.cards.loads.dloads</span> <span class="kn">import</span> <span class="n">TLOAD1</span><span class="p">,</span> <span class="n">TLOAD2</span><span class="p">,</span> <span class="n">RLOAD1</span><span class="p">,</span> <span class="n">RLOAD2</span><span class="p">,</span> <span class="n">ACSRCE</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.op2_interface.op2_reader</span> <span class="kn">import</span> <span class="n">mapfmt</span> <span class="c1"># , reshape_bytes_block</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.geom.geom_common</span> <span class="kn">import</span> <span class="n">GeomCommon</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.geom.dit</span> <span class="kn">import</span> <span class="n">get_iend_from_ints</span>

<div class="viewcode-block" id="DYNAMICS"><a class="viewcode-back" href="../../../../../reference/op2/tables/geom/pyNastran.op2.tables.geom.dynamics.html#pyNastran.op2.tables.geom.dynamics.DYNAMICS">[docs]</a><span class="k">class</span> <span class="nc">DYNAMICS</span><span class="p">(</span><span class="n">GeomCommon</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;defines methods for reading op2 dynamics loads/methods&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">_read_dynamics_4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_geom_4</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dynamics_map</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">GeomCommon</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dynamics_map</span> <span class="o">=</span> <span class="p">{</span>
            <span class="p">(</span><span class="mi">5307</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">379</span><span class="p">)</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;ACSRCE&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_acsrce</span><span class="p">],</span> <span class="c1"># 1</span>
            <span class="p">(</span><span class="mi">27</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">182</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;DAREA&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_darea</span><span class="p">],</span>  <span class="c1"># 2</span>

            <span class="p">(</span><span class="mi">37</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">183</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;DELAY&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_delay</span><span class="p">],</span>  <span class="c1"># 3</span>
            <span class="p">(</span><span class="mi">57</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">123</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;DLOAD&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_dload</span><span class="p">],</span>  <span class="c1"># 4</span>
            <span class="p">(</span><span class="mi">77</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">184</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;DPHASE&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_dphase</span><span class="p">],</span>  <span class="c1"># 5</span>
            <span class="p">(</span><span class="mi">107</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">86</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;EIGB&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_eigb</span><span class="p">],</span>   <span class="c1"># 7</span>
            <span class="p">(</span><span class="mi">207</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">87</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;EIGC&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_eigc</span><span class="p">],</span>   <span class="c1"># 8</span>
            <span class="p">(</span><span class="mi">257</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">158</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;EIGP&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_eigp</span><span class="p">],</span>   <span class="c1"># 9</span>
            <span class="p">(</span><span class="mi">307</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">85</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;EIGR&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_eigr</span><span class="p">],</span>   <span class="c1"># 10</span>

            <span class="p">(</span><span class="mi">308</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">348</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;EIGRL&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_eigrl</span><span class="p">],</span>  <span class="c1"># 11</span>
            <span class="p">(</span><span class="mi">707</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">124</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;EPOINT&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_epoint</span><span class="p">],</span>  <span class="c1"># 12</span>
            <span class="p">(</span><span class="mi">1307</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">126</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;FREQ&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_freq</span><span class="p">],</span>   <span class="c1"># 13</span>
            <span class="p">(</span><span class="mi">1007</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">125</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;FREQ1&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_freq1</span><span class="p">],</span>  <span class="c1"># 14</span>
            <span class="p">(</span><span class="mi">1107</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">166</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;FREQ2&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_freq2</span><span class="p">],</span>  <span class="c1"># 15</span>
            <span class="p">(</span><span class="mi">1407</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">39</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;FREQ3&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_freq3</span><span class="p">],</span>  <span class="c1"># 16</span>
            <span class="p">(</span><span class="mi">1507</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">40</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;FREQ4&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_freq4</span><span class="p">],</span>  <span class="c1"># 17</span>
            <span class="p">(</span><span class="mi">1607</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">41</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;FREQ5&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_freq5</span><span class="p">],</span>  <span class="c1"># 18</span>

            <span class="p">(</span><span class="mi">3707</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">556</span><span class="p">)</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;NLRGAP&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_nrlgap</span><span class="p">],</span> <span class="c1"># 19</span>

            <span class="p">(</span><span class="mi">3107</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">127</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;NOLIN1&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_nolin1</span><span class="p">],</span> <span class="c1"># 20</span>
            <span class="p">(</span><span class="mi">3207</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">128</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;NOLIN2&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_nolin2</span><span class="p">],</span> <span class="c1"># 21</span>
            <span class="c1">#(3207, 33, 129): [&#39;NOLIN3&#39;, self._read_fake], # 22</span>
            <span class="p">(</span><span class="mi">3307</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">129</span><span class="p">)</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;NOLIN3&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_nolin3</span><span class="p">],</span>
            <span class="p">(</span><span class="mi">3407</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">130</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;NOLIN4&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_nolin4</span><span class="p">],</span> <span class="c1"># 23</span>
            <span class="p">(</span><span class="mi">2107</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">195</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;RANDPS&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_randps</span><span class="p">],</span> <span class="c1"># 24</span>
            <span class="p">(</span><span class="mi">2207</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">196</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;RANDT1&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_randt1</span><span class="p">],</span> <span class="c1"># 25</span>
            <span class="p">(</span><span class="mi">5107</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">131</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;RLOAD1&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_rload1</span><span class="p">],</span>  <span class="c1"># 26</span>
            <span class="p">(</span><span class="mi">5207</span><span class="p">,</span> <span class="mi">52</span><span class="p">,</span> <span class="mi">132</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;RLOAD2&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_rload2</span><span class="p">],</span>  <span class="c1"># 27</span>
            <span class="p">(</span><span class="mi">8910</span><span class="p">,</span> <span class="mi">89</span><span class="p">,</span> <span class="mi">606</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;ROTORB&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>  <span class="c1"># 28</span>
            <span class="p">(</span><span class="mi">8210</span><span class="p">,</span> <span class="mi">82</span><span class="p">,</span> <span class="mi">599</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;ROTORD&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_rotord</span><span class="p">],</span>  <span class="c1"># 29</span>
            <span class="p">(</span><span class="mi">8410</span><span class="p">,</span> <span class="mi">84</span><span class="p">,</span> <span class="mi">600</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;ROTORG&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_rotorg</span><span class="p">],</span>  <span class="c1"># 30</span>
            <span class="p">(</span><span class="mi">5707</span><span class="p">,</span> <span class="mi">57</span><span class="p">,</span> <span class="mi">135</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;SEQEP&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>  <span class="c1"># 31</span>
            <span class="p">(</span><span class="mi">6207</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="mi">136</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;TF&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_tf</span><span class="p">],</span>  <span class="c1"># 32</span>
            <span class="p">(</span><span class="mi">6607</span><span class="p">,</span> <span class="mi">66</span><span class="p">,</span> <span class="mi">137</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;TIC&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_tic</span><span class="p">],</span>  <span class="c1"># 33</span>
            <span class="p">(</span><span class="mi">7107</span><span class="p">,</span> <span class="mi">71</span><span class="p">,</span> <span class="mi">138</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;TLOAD1&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_tload1</span><span class="p">],</span>  <span class="c1"># 37</span>
            <span class="p">(</span><span class="mi">7207</span><span class="p">,</span> <span class="mi">72</span><span class="p">,</span> <span class="mi">139</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;TLOAD2&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_tload2</span><span class="p">],</span>  <span class="c1"># 38</span>
            <span class="p">(</span><span class="mi">8307</span><span class="p">,</span> <span class="mi">83</span><span class="p">,</span> <span class="mi">142</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;TSTEP&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_tstep</span><span class="p">],</span>  <span class="c1"># 39</span>
            <span class="p">(</span><span class="mi">17500</span><span class="p">,</span> <span class="mi">175</span><span class="p">,</span> <span class="mi">618</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;TSTEP&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_tstep1</span><span class="p">],</span>

            <span class="p">(</span><span class="mi">10701</span><span class="p">,</span> <span class="mi">107</span><span class="p">,</span> <span class="mi">117</span><span class="p">)</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;RGYRO&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_rgyro</span><span class="p">],</span>
            <span class="p">(</span><span class="mi">10801</span><span class="p">,</span> <span class="mi">108</span><span class="p">,</span> <span class="mi">242</span><span class="p">)</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;ROTORG&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>
            <span class="p">(</span><span class="mi">3807</span><span class="p">,</span> <span class="mi">38</span><span class="p">,</span> <span class="mi">505</span><span class="p">)</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;NLRSFD&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_nlrsfd</span><span class="p">],</span>
            <span class="p">(</span><span class="mi">4807</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">306</span><span class="p">)</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;DYNRED&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_dynred</span><span class="p">],</span>
            <span class="p">(</span><span class="mi">11001</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">310</span><span class="p">)</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;RSPINT&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_rspint</span><span class="p">],</span>
            <span class="p">(</span><span class="mi">10901</span><span class="p">,</span> <span class="mi">109</span><span class="p">,</span> <span class="mi">260</span><span class="p">)</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;RSPINR&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>
            <span class="p">(</span><span class="mi">11101</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span> <span class="mi">368</span><span class="p">)</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;UNBALNC&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>

            <span class="c1"># F:\work\pyNastran\examples\Dropbox\move_tpl\nlttlhxb.op2</span>
            <span class="p">(</span><span class="mi">7507</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">626</span><span class="p">)</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;TEMPD/TTEMP/TMPSET&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>

            <span class="c1">#F:\work\pyNastran\examples\Dropbox\move_tpl\rcross01.op2</span>
            <span class="p">(</span><span class="mi">3201</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">54</span><span class="p">)</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;RCROSS&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_rcross</span><span class="p">],</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">_read_acsrce</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;common method for reading NX/MSC ACSRCE&quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_dual_card</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_acsrce_nx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_acsrce_msc</span><span class="p">,</span>
                                 <span class="s1">&#39;ACSRCE&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_dload_entry</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_acsrce_msc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ACSRCE(5307,53,379)</span>

<span class="sd">        MSC 2005r2 - 2016.1</span>
<span class="sd">        -------------------</span>
<span class="sd">        Word Name Type Description</span>
<span class="sd">        1 SID    I Load set identification number</span>
<span class="sd">        2 DAREA  I DAREA Bulk Data entry identification number</span>
<span class="sd">        3 DPHASE I DPHASE Bulk Data entry identification number</span>
<span class="sd">        4 DELAY  I DELAY Bulk Data entry identification number</span>
<span class="sd">        5 TC     I TABLEDi Bulk Data entry identification number for C(f)</span>
<span class="sd">        6 RHO   RS Density of the fluid</span>
<span class="sd">        7 B     RS Bulk modulus of the fluid</span>
<span class="sd">        8 T     RS Time delay</span>
<span class="sd">        9 PH    RS Phase lead</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">36</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">assert</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ACSRCE&#39;</span>

        <span class="n">loads</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;5i4f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">excite_id</span><span class="p">,</span> <span class="n">dphase</span><span class="p">,</span> <span class="n">delay</span><span class="p">,</span> <span class="n">tc</span><span class="p">,</span> <span class="n">rho</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">delay</span><span class="p">,</span> <span class="n">dphase_float</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">assert</span> <span class="n">sid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">sid</span>
            <span class="k">assert</span> <span class="n">dphase_float</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">dphase</span>
            <span class="k">assert</span> <span class="n">delay</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">delay</span>
            <span class="k">assert</span> <span class="n">tc</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tc</span>
            <span class="k">assert</span> <span class="n">rho</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">rho</span>
            <span class="k">assert</span> <span class="n">b</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">b</span>
            <span class="k">if</span> <span class="n">dphase</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">dphase</span> <span class="o">=</span> <span class="n">dphase_float</span>
            <span class="n">acsrce</span> <span class="o">=</span> <span class="n">ACSRCE</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">excite_id</span><span class="p">,</span> <span class="n">rho</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="n">delay</span><span class="p">,</span> <span class="n">dphase</span><span class="o">=</span><span class="n">dphase</span><span class="p">,</span> <span class="n">power</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
            <span class="n">loads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">acsrce</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">loads</span>

    <span class="k">def</span> <span class="nf">_read_acsrce_nx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        NX 12 - 2019.2</span>
<span class="sd">        --------------</span>
<span class="sd">        Word Name Type Description</span>
<span class="sd">        1 SID    I Load set identification number</span>
<span class="sd">        2 DAREA  I DAREA Bulk Data entry identification number</span>
<span class="sd">        3 DPHASE I DPHASE Bulk Data entry identification number</span>
<span class="sd">        4 DELAY  I DELAY Bulk Data entry identification number</span>
<span class="sd">        5 TC     I TABLEDi Bulk Data entry identification number for C(f)</span>
<span class="sd">        6 RHO     RS Density of the fluid</span>
<span class="sd">        7 B       RS Bulk modulus of the fluid</span>
<span class="sd">        8 DELAYR  RS If DELAYI  = 0, constant value for delay</span>
<span class="sd">        9 DPHASER RS If DPHASEI = 0, constant value for phase</span>
<span class="sd">        10 TCR    RS If TCI     = 0, constant value for C(f)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">40</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">assert</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ACSRCE&#39;</span>

        <span class="n">loads</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;5i5f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">excite_id</span><span class="p">,</span> <span class="n">dphase</span><span class="p">,</span> <span class="n">delay</span><span class="p">,</span> <span class="n">tc</span><span class="p">,</span> <span class="n">rho</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">delay_float</span><span class="p">,</span> <span class="n">dphase_float</span><span class="p">,</span> <span class="n">tc_float</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">assert</span> <span class="n">sid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">sid</span>
            <span class="k">assert</span> <span class="n">rho</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">rho</span>
            <span class="k">assert</span> <span class="n">b</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">b</span>
            <span class="k">if</span> <span class="n">dphase</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">dphase</span> <span class="o">=</span> <span class="n">dphase_float</span>
            <span class="k">if</span> <span class="n">delay</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">delay</span> <span class="o">=</span> <span class="n">delay_float</span>
            <span class="k">if</span> <span class="n">tc</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">tc</span> <span class="o">=</span> <span class="n">tc_float</span>
            <span class="n">acsrce</span> <span class="o">=</span> <span class="n">ACSRCE</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">excite_id</span><span class="p">,</span> <span class="n">rho</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="n">delay</span><span class="p">,</span> <span class="n">dphase</span><span class="o">=</span><span class="n">dphase</span><span class="p">,</span> <span class="n">power</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
            <span class="n">loads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">acsrce</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">loads</span>

    <span class="k">def</span> <span class="nf">_read_darea</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        DAREA(27,17,182) - the marker for Record 2</span>

<span class="sd">        1 SID I  Load set identification number</span>
<span class="sd">        2 P   I  Grid, scalar, or extra point identification number</span>
<span class="sd">        3 C   I  Component number</span>
<span class="sd">        4 A   RS Scale factor</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">16</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;DAREA&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3if&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="c1">#(sid,p,c,a) = out</span>
            <span class="n">darea</span> <span class="o">=</span> <span class="n">DAREA</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">out</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_darea_object</span><span class="p">(</span><span class="n">darea</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_delay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        DELAY(37,18,183) - Record 3</span>

<span class="sd">        1 SID I  Set identification number</span>
<span class="sd">        2 P   I  Grid, scalar, or extra point identification number</span>
<span class="sd">        3 C   I  Component number</span>
<span class="sd">        4 T   RS Time delay</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">16</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;DELAY&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3if&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="n">sid</span><span class="p">,</span> <span class="n">nodes</span><span class="p">,</span> <span class="n">components</span><span class="p">,</span> <span class="n">delays</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  DELAY=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="n">delay</span> <span class="o">=</span> <span class="n">DELAY</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">nodes</span><span class="p">,</span> <span class="n">components</span><span class="p">,</span> <span class="n">delays</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_delay_object</span><span class="p">(</span><span class="n">delay</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_dload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        DLOAD(57,5,123) - Record 4</span>

<span class="sd">        1 SID  I Load set identification number</span>
<span class="sd">        2  S   RS Overall scale factor</span>
<span class="sd">        3  SI  RS Scale factor i</span>
<span class="sd">        4  LI  I Load set identification number i</span>
<span class="sd">        Words 3 through 4 repeat until (-1,-1) occurs</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#ndata = len(data)</span>
        <span class="c1">#nfields = (ndata - n) // 4</span>

        <span class="n">datan</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:]</span>
        <span class="n">ints</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">datan</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idtype8</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">floats</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">datan</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">istart</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">iminus1_delta</span> <span class="o">=</span> <span class="n">get_iend_from_ints</span><span class="p">(</span><span class="n">ints</span><span class="p">)</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">iend</span> <span class="ow">in</span> <span class="n">iminus1_delta</span><span class="p">:</span>
            <span class="c1">#datai = data[n+istart*4 : n+iend*4]</span>
            <span class="n">sid</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[</span><span class="n">istart</span><span class="p">]</span>
            <span class="n">global_scale</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[</span><span class="n">istart</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="c1">#print(&#39;  sid=%s global_scale=%s&#39; % (sid, global_scale))</span>
            <span class="n">deltai</span> <span class="o">=</span> <span class="n">iend</span> <span class="o">-</span> <span class="n">istart</span> <span class="o">-</span> <span class="mi">2</span> <span class="c1"># subtract 2 for sid, global scale</span>
            <span class="k">assert</span> <span class="n">deltai</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_data</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="o">+</span><span class="n">istart</span><span class="o">*</span><span class="mi">4</span> <span class="p">:</span> <span class="n">n</span><span class="o">+</span><span class="n">iend</span><span class="o">*</span><span class="mi">4</span><span class="p">],</span> <span class="s1">&#39;if&#39;</span><span class="p">))</span>
            <span class="n">out</span> <span class="o">=</span> <span class="p">[</span><span class="n">sid</span><span class="p">,</span> <span class="n">global_scale</span><span class="p">]</span>
            <span class="n">scales</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">load_ids</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">iscale</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">deltai</span> <span class="o">//</span> <span class="mi">2</span><span class="p">):</span>
                <span class="n">scale</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[</span><span class="n">istart</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">iscale</span><span class="p">]</span>
                <span class="n">load_id</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[</span><span class="n">istart</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">iscale</span><span class="p">]</span>
                <span class="n">scales</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">scale</span><span class="p">)</span>
                <span class="n">load_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">load_id</span><span class="p">)</span>
                <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">scale</span><span class="p">)</span>
                <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">load_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  DLOAD=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_dload</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">global_scale</span><span class="p">,</span> <span class="n">scales</span><span class="p">,</span> <span class="n">load_ids</span><span class="p">)</span>
            <span class="n">istart</span> <span class="o">=</span> <span class="n">iend</span> <span class="o">+</span> <span class="mi">2</span>
            <span class="n">nentries</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;DLOAD&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_read_dphase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        DPHASE(77,19,184) - Record 5</span>

<span class="sd">        1 SID I Load set identification number</span>
<span class="sd">        2 P   I Grid, scalar, or extra point identification number</span>
<span class="sd">        3 C   I Component number</span>
<span class="sd">        4 TH  RS Phase lead</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">16</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;DPHASE&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3if&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="n">sid</span><span class="p">,</span> <span class="n">nodes</span><span class="p">,</span> <span class="n">components</span><span class="p">,</span> <span class="n">delays</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  DPHASE=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="n">delay</span> <span class="o">=</span> <span class="n">DPHASE</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">nodes</span><span class="p">,</span> <span class="n">components</span><span class="p">,</span> <span class="n">delays</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_dphase_object</span><span class="p">(</span><span class="n">delay</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_dynred</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        DYNRED(4807,48,306)</span>

<span class="sd">        Word Name Type Description</span>
<span class="sd">        1 SID   I Load set identification number</span>
<span class="sd">        2 FMAX RS Highest frequency of interest</span>
<span class="sd">        3 NIRV  I Number of initial random vectors</span>
<span class="sd">        4 NIT   I Number of iterations</span>
<span class="sd">        5 IDIR  I Starting point to generate initial random vectors</span>
<span class="sd">        6 NQDES I Number of generalized degrees-of-freedom</span>
<span class="sd">        7 UNDEF(2 ) none</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#C:\NASA\m4\formats\git\examples\move_tpl\n2h39.op2</span>
        <span class="c1">#DYNRED  202     1000.</span>

        <span class="c1">#C:\NASA\m4\formats\git\examples\move_tpl\gdr20w.op2</span>
        <span class="c1">#DYNRED  24      160.            10                              YES</span>
        <span class="c1">#DYNRED  23      160.            10              75</span>
        <span class="c1">#(23, 160.0, 6, 10, 0, 75, 75, 0)</span>
        <span class="c1">#(24, 160.0, 6, 10, 0,  0,  0, YES)</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">32</span> <span class="c1"># 4*8</span>
        <span class="c1">#self.show_data(data[n:])</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">assert</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="c1">#struc = Struct(self._endian + b&#39;i f 5i 4s&#39;)</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i f 5i i&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="c1">#print(out)</span>
            <span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">fmax</span><span class="p">,</span> <span class="n">nirv</span><span class="p">,</span> <span class="n">nit</span><span class="p">,</span> <span class="n">idir</span><span class="p">,</span> <span class="n">nqdes</span><span class="p">,</span> <span class="n">unused_zero1</span><span class="p">,</span> <span class="n">zero_yes</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">if</span> <span class="n">zero_yes</span> <span class="o">==</span> <span class="mi">542328153</span><span class="p">:</span>  <span class="c1"># integer version of yes</span>
                <span class="n">zero_yes</span> <span class="o">=</span> <span class="s1">&#39;YES&#39;</span>
            <span class="c1">#print(sid, fmax, nirv, nit, idir, nqdes, unused_zero1, zero_yes)</span>
            <span class="c1">#assert unused_zero1 == 0, out</span>
            <span class="c1">#assert unused_yes == b&#39;YES &#39;, out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  DYNRED=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_dynred</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">fmax</span><span class="p">,</span> <span class="n">nirv</span><span class="p">,</span> <span class="n">nit</span><span class="p">,</span> <span class="n">idir</span><span class="p">,</span> <span class="n">nqdes</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;DYNRED&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>


    <span class="k">def</span> <span class="nf">_read_eigb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;EIGB(107,1,86) - Record 7</span>

<span class="sd">        NX</span>
<span class="sd">        Word Name Type Description</span>
<span class="sd">        1 SID           I Set identification number</span>
<span class="sd">        2 METHOD(2) CHAR4 Method of eigenvalue extraction</span>
<span class="sd">        4 L1           RS Lower bound of eigenvalue range of interest</span>
<span class="sd">        5 L2           RS Upper bound of eigenvalue range of interest</span>
<span class="sd">        6 NEP           I Estimate of number of roots in positive range</span>
<span class="sd">        7 NDP           I Desired number of positive roots</span>
<span class="sd">        8 NDN           I Desired number of negative roots</span>
<span class="sd">        9 UNDEF None</span>
<span class="sd">        10 NORM(2)  CHAR4 Method for normalizing eigenvectors</span>
<span class="sd">        12 G            I Grid or scalar point identification number</span>
<span class="sd">        13 C            I Component number</span>
<span class="sd">        14 UNDEF(5) None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;EIGB&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i 8s ff 3i i 8s 4i&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;q 16s dd 3q q 16s 4q&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="c1">#self.show_data(edata[44:])</span>
            <span class="c1"># int, 8s, 2f, 3i, i, 8s, 4i</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="n">sid</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">L1</span><span class="p">,</span> <span class="n">L2</span><span class="p">,</span> <span class="n">nep</span><span class="p">,</span> <span class="n">ndp</span><span class="p">,</span> <span class="n">ndn</span><span class="p">,</span> <span class="n">dunno</span><span class="p">,</span> <span class="n">norm</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">dunno_a</span><span class="p">,</span> <span class="n">dunno_b</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;EIGB=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="c1">#print(&#39;out = %s&#39; % str(out))</span>
            <span class="n">method</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span>
            <span class="n">norm</span> <span class="o">=</span> <span class="n">norm</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span>
            <span class="n">eigb</span> <span class="o">=</span> <span class="n">EIGB</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">L1</span><span class="p">,</span> <span class="n">L2</span><span class="p">,</span> <span class="n">nep</span><span class="p">,</span> <span class="n">ndp</span><span class="p">,</span> <span class="n">ndn</span><span class="p">,</span> <span class="n">norm</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_method_object</span><span class="p">(</span><span class="n">eigb</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_eigc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        EIGC(207,2,87) - Record 8</span>

<span class="sd">        Word Name    Type Description</span>
<span class="sd">        1 SID           I Load set identification number</span>
<span class="sd">        2 METHOD(2) CHAR4 Method of eigenvalue extraction</span>
<span class="sd">        4 NORM(2)   CHAR4 Method for normalizing eigenvectors</span>
<span class="sd">        6 G             I Grid or scalar point identification number</span>
<span class="sd">        7 C             I Component number</span>
<span class="sd">        8 E            RS Convergence criterion</span>
<span class="sd">        9 ND1           I Number of desired eigenvectors</span>
<span class="sd">        10 CONTFLG      I Continuation flag</span>
<span class="sd">        CONTFLG=0 With continuation</span>
<span class="sd">        11 AAJ         RS Location of A on real axis</span>
<span class="sd">        12 WAJ         RS Location of A on imaginary axis</span>
<span class="sd">        13 ABJ         RS Location of B on real axis</span>
<span class="sd">        14 WBJ         RS Location of B on imaginary axis</span>
<span class="sd">        15 LJ          RS Width of search region</span>
<span class="sd">        16 NEJ          I Number of estimated roots</span>
<span class="sd">        17 NDJ          I Number of desired eigenvectors</span>
<span class="sd">        Words 11 through 17 repeat until (-1,-1,-1,-1,-1,-1,-1) occ</span>
<span class="sd">        CONTFLG =-1 Without continuation</span>
<span class="sd">        End CONTFLG</span>

<span class="sd">        data  = (2, CLAN, &#39;&#39;, MAX, &#39;&#39;, 0,     0, 1e-08, 32, -1,</span>
<span class="sd">                 3, HESS, &#39;&#39;, MAX, &#39;&#39;, 0,     0, 1e-08, 32, -1)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">60</span>
            <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;EIGB&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
            <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i 4s 4s 2i f 2i&#39;</span><span class="p">)</span>
            <span class="c1">#struct2 = Struct(self._endian + b&#39;5f2i&#39;)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
                <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
                <span class="c1">#self.show_data(edata[44:])</span>
                <span class="c1"># int, 8s, 2f, 3i, i, 8s, 4i</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                <span class="n">sid</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">L1</span><span class="p">,</span> <span class="n">L2</span><span class="p">,</span> <span class="n">nep</span><span class="p">,</span> <span class="n">ndp</span><span class="p">,</span> <span class="n">ndn</span><span class="p">,</span> <span class="n">dunno</span><span class="p">,</span> <span class="n">norm</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">dunno_a</span><span class="p">,</span> <span class="n">dunno_b</span> <span class="o">=</span> <span class="n">out</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;EIGC=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
                <span class="c1">#print(&#39;out = %s&#39; % str(out))</span>
                <span class="n">method</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span>
                <span class="n">norm</span> <span class="o">=</span> <span class="n">norm</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span>
                <span class="n">eigb</span> <span class="o">=</span> <span class="n">EIGB</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">L1</span><span class="p">,</span> <span class="n">L2</span><span class="p">,</span> <span class="n">nep</span><span class="p">,</span> <span class="n">ndp</span><span class="p">,</span> <span class="n">ndn</span><span class="p">,</span> <span class="n">norm</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_add_method_object</span><span class="p">(</span><span class="n">eigb</span><span class="p">)</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
            <span class="c1">#return n</span>

        <span class="c1">#-------------------------------------------------</span>
        <span class="n">ndata</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">nfields</span> <span class="o">=</span> <span class="p">(</span><span class="n">ndata</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>
        <span class="n">datan</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">ints</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="si">%i</span><span class="s1">i&#39;</span> <span class="o">%</span> <span class="n">nfields</span><span class="p">,</span> <span class="n">datan</span><span class="p">)</span>
            <span class="n">floats</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="si">%i</span><span class="s1">f&#39;</span> <span class="o">%</span> <span class="n">nfields</span><span class="p">,</span> <span class="n">datan</span><span class="p">)</span>
            <span class="n">strings</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;4s&#39;</span><span class="o">*</span> <span class="n">nfields</span><span class="p">,</span> <span class="n">datan</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ints</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="si">%i</span><span class="s1">q&#39;</span> <span class="o">%</span> <span class="n">nfields</span><span class="p">,</span> <span class="n">datan</span><span class="p">)</span>
            <span class="n">floats</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="si">%i</span><span class="s1">d&#39;</span> <span class="o">%</span> <span class="n">nfields</span><span class="p">,</span> <span class="n">datan</span><span class="p">)</span>
            <span class="n">strings</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;8s&#39;</span><span class="o">*</span> <span class="n">nfields</span><span class="p">,</span> <span class="n">datan</span><span class="p">)</span>

        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nfields</span><span class="p">:</span>
            <span class="n">sid</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">method</span> <span class="o">=</span> <span class="p">(</span><span class="n">strings</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">strings</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span>
            <span class="n">norm</span> <span class="o">=</span> <span class="p">(</span><span class="n">strings</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="n">strings</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">4</span><span class="p">])</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span>
            <span class="n">grid</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">5</span><span class="p">]</span>
            <span class="n">component</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">6</span><span class="p">]</span>
            <span class="n">epsilon</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">7</span><span class="p">]</span>
            <span class="n">neigenvalues</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">8</span><span class="p">]</span>
            <span class="n">control_flag</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">9</span><span class="p">]</span>

            <span class="c1">#print(&#39;sid=%s method=%r norm=%r grid=%s component=%s epsilon=%g, &#39;</span>
                  <span class="c1">#&#39;neigenvalues=%s ctlflag=%s&#39; % (</span>
                      <span class="c1">#sid, method, norm, grid, component, epsilon, neigenvalues, control_flag))</span>

            <span class="n">alphaAjs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">omegaAjs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">alphaBjs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">omegaBjs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">LJs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">NEJs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">NDJs</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="c1"># dummy</span>
            <span class="n">mblkszs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">iblkszs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">ksteps</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">NJIs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="n">control_flag</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">datai</span> <span class="o">=</span> <span class="p">[</span><span class="n">sid</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">norm</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="n">component</span><span class="p">,</span> <span class="n">epsilon</span><span class="p">,</span> <span class="n">neigenvalues</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">10</span>
            <span class="k">elif</span> <span class="n">control_flag</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">intsi</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">10</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">17</span><span class="p">]</span>
                <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">intsi</span><span class="p">)</span> <span class="o">==</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;len=</span><span class="si">%s</span><span class="s1"> intsi=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">intsi</span><span class="p">),</span> <span class="n">intsi</span><span class="p">)</span>
                <span class="n">datai</span> <span class="o">=</span> <span class="p">[</span><span class="n">sid</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">norm</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="n">component</span><span class="p">,</span> <span class="n">epsilon</span><span class="p">,</span> <span class="n">neigenvalues</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
                <span class="k">while</span> <span class="n">intsi</span> <span class="o">!=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                    <span class="n">aaj</span><span class="p">,</span> <span class="n">waj</span><span class="p">,</span> <span class="n">abj</span><span class="p">,</span> <span class="n">wbj</span><span class="p">,</span> <span class="n">lj</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">10</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">15</span><span class="p">]</span>
                    <span class="c1">#print(&#39;aaj=%s waj=%s abj=%s wbj=%s lj=%s&#39;  % (</span>
                        <span class="c1">#aaj, waj, abj, wbj, lj))</span>
                    <span class="n">nej</span><span class="p">,</span> <span class="n">ndj</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">15</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">17</span><span class="p">]</span>
                    <span class="n">datai</span><span class="o">.</span><span class="n">extend</span><span class="p">([(</span><span class="n">aaj</span><span class="p">,</span> <span class="n">waj</span><span class="p">,</span> <span class="n">abj</span><span class="p">,</span> <span class="n">wbj</span><span class="p">,</span> <span class="n">lj</span><span class="p">,</span> <span class="n">nej</span><span class="p">)])</span>

                    <span class="n">alphaAjs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">aaj</span><span class="p">)</span>
                    <span class="n">omegaAjs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">waj</span><span class="p">)</span>
                    <span class="n">alphaBjs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">abj</span><span class="p">)</span>
                    <span class="n">omegaBjs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wbj</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">norm</span> <span class="o">==</span> <span class="s1">&#39;MAX&#39;</span><span class="p">:</span>
                        <span class="c1"># faked</span>
                        <span class="n">mblkszs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">0.</span><span class="p">)</span>
                        <span class="n">iblkszs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                        <span class="n">ksteps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                        <span class="n">NJIs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

                    <span class="n">LJs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lj</span><span class="p">)</span>
                    <span class="n">NEJs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nej</span><span class="p">)</span>
                    <span class="n">NDJs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ndj</span><span class="p">)</span>
                    <span class="c1">#print(&#39;aaj=%s waj=%s abj=%s wbj=%s lj=%s nej=%s ndj=%s&#39;  % (</span>
                        <span class="c1">#aaj, waj, abj, wbj, lj, nej, ndj</span>
                    <span class="c1">#))</span>
                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">7</span>
                    <span class="n">intsi</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">10</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">17</span><span class="p">]</span>
                    <span class="c1">#print(&#39;intsi = &#39;, intsi)</span>
                    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">intsi</span><span class="p">)</span> <span class="o">==</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;len=</span><span class="si">%s</span><span class="s1"> intsi=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">intsi</span><span class="p">),</span> <span class="n">intsi</span><span class="p">)</span>
                    <span class="c1">#print(&quot;intsi = &quot;, intsi)</span>
                    <span class="c1">#print()</span>
                    <span class="c1">#11 AAJ RS Location of A on real axis</span>
                    <span class="c1">#12 WAJ RS Location of A on imaginary axis</span>
                    <span class="c1">#13 ABJ RS Location of B on real axis</span>
                    <span class="c1">#14 WBJ RS Location of B on imaginary axis</span>
                    <span class="c1">#15 LJ RS Width of search region</span>
                    <span class="c1">#16 NEJ I Number of estimated roots</span>
                    <span class="c1">#17 NDJ I Number of desired eigenvectors</span>
                <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">intsi</span><span class="p">)</span> <span class="o">==</span> <span class="mi">7</span><span class="p">,</span> <span class="n">intsi</span>
                <span class="c1">#print(&#39;intsi = &#39;, intsi)</span>
                <span class="c1">#raise NotImplementedError(&#39;EIGC control_flag=%s&#39; % control_flag)</span>

                <span class="c1"># +10 is for the prefix; +7 is for the -1s</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">10</span> <span class="o">+</span> <span class="mi">7</span> <span class="c1"># 3 + 4 from (-1,-1,-1) and (sid,grid,comp,coeff)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;EIGC control_flag=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">control_flag</span><span class="p">)</span>
            <span class="n">datai</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span>  <span class="c1"># creates a +7</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  EIGC=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">datai</span><span class="p">))</span>

            <span class="k">if</span> <span class="n">grid</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">grid</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">assert</span> <span class="n">component</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">component</span>
                <span class="n">component</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="n">eigc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_eigc</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="n">component</span><span class="p">,</span> <span class="n">epsilon</span><span class="p">,</span> <span class="n">neigenvalues</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span>
                                 <span class="n">mblkszs</span><span class="o">=</span><span class="n">mblkszs</span><span class="p">,</span> <span class="n">iblkszs</span><span class="o">=</span><span class="n">iblkszs</span><span class="p">,</span> <span class="n">ksteps</span><span class="o">=</span><span class="n">ksteps</span><span class="p">,</span> <span class="n">NJIs</span><span class="o">=</span><span class="n">NJIs</span><span class="p">,</span>
                                 <span class="n">alphaAjs</span><span class="o">=</span><span class="n">alphaAjs</span><span class="p">,</span> <span class="n">omegaAjs</span><span class="o">=</span><span class="n">omegaAjs</span><span class="p">,</span>
                                 <span class="n">alphaBjs</span><span class="o">=</span><span class="n">alphaBjs</span><span class="p">,</span> <span class="n">omegaBjs</span><span class="o">=</span><span class="n">omegaBjs</span><span class="p">,</span>
                                 <span class="n">LJs</span><span class="o">=</span><span class="n">LJs</span><span class="p">,</span> <span class="n">NEJs</span><span class="o">=</span><span class="n">NEJs</span><span class="p">,</span> <span class="n">NDJs</span><span class="o">=</span><span class="n">NDJs</span><span class="p">,</span>
                                 <span class="n">shift_r1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shift_i1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">isrr_flag</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                 <span class="n">nd1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="n">eigc</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>

            <span class="c1">#while intsi != (-1, -1, -1):</span>
                <span class="c1">#gridi, compi, coeffi = ints[i+4], ints[i+5], floats[i+6]</span>
                <span class="c1">#mpc_data.extend([gridi, compi, coeffi])</span>
                <span class="c1">#nodes.append(gridi)</span>
                <span class="c1">#components.append(compi)</span>
                <span class="c1">#coefficients.append(coeffi)</span>
                <span class="c1">#i += 3</span>

            <span class="n">nentries</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="c1">#print(&#39;--------------&#39;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;EIGC&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_read_eigp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        EIGP(257,4,158) - Record 9</span>

<span class="sd">        1 SID    I Load set identification number</span>
<span class="sd">        2 ALPHA RS Location of pole on real axis</span>
<span class="sd">        3 OMEGA RS Location of pole on imaginary axis</span>
<span class="sd">        4 M      I Multiplicity of complex root at pole</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">16</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;EIGP&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="s1">&#39;i2fi&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="n">sid</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">omega</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;EIGP=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="c1">#print(&#39;out = %s&#39; % str(out))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_eigp</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">omega</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">alpha2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">omega2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">m2</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_eigr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        EIGR(307,3,85) - Record 10</span>

<span class="sd">        1 SID I Set identification number</span>
<span class="sd">        2 METHOD(2) CHAR4 Method of eigenvalue extraction</span>
<span class="sd">        4 F1 RS Lower bound of frequency range of interest</span>
<span class="sd">        5 F2 RS Upper bound of frequency range of interest</span>
<span class="sd">        6 NE  I Number of estimated roots</span>
<span class="sd">        7 ND  I Number of desired roots</span>
<span class="sd">        8 UNDEF(2 ) None</span>
<span class="sd">        10 NORM(2) CHAR4 Method for normalizing eigenvectors</span>
<span class="sd">        12 G  I Grid or scalar point identification number</span>
<span class="sd">        13 C  I Component number</span>
<span class="sd">        14 UNDEF(5 ) None</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">72</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="s1">&#39;i 8s 2f 4i 8s 7i&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="s1">&#39;q 16s 2d 4q 16s 7q&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">,</span> <span class="n">ne</span><span class="p">,</span> <span class="n">nd</span><span class="p">,</span> <span class="n">null_a</span><span class="p">,</span> <span class="n">null_b</span><span class="p">,</span> <span class="n">norm</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span>
             <span class="n">null_c</span><span class="p">,</span> <span class="n">null_d</span><span class="p">,</span> <span class="n">null_e</span><span class="p">,</span> <span class="n">null_f</span><span class="p">,</span> <span class="n">null_g</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;EIGR=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="n">method</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span>
            <span class="n">norm</span> <span class="o">=</span> <span class="n">norm</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span>
            <span class="n">eigr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_eigr</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">f1</span><span class="o">=</span><span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="o">=</span><span class="n">f2</span><span class="p">,</span> <span class="n">ne</span><span class="o">=</span><span class="n">ne</span><span class="p">,</span> <span class="n">nd</span><span class="o">=</span><span class="n">nd</span><span class="p">,</span>
                                 <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span> <span class="n">G</span><span class="o">=</span><span class="n">g</span><span class="p">,</span> <span class="n">C</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="n">eigr</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;EIGR&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_eigrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        EIGRL(308,8,348) - Record 11</span>

<span class="sd">        1 SID     I Set identification number</span>
<span class="sd">        2 V1     RS Lower bound of frequency range of interest</span>
<span class="sd">        3 V2     RS Upper bound of frequency range of interest</span>
<span class="sd">        4 ND      I Number of desired eigenvectors</span>
<span class="sd">        5 MSGLVL  I Diagnostic level</span>
<span class="sd">        6 MAXSET  I Number of vectors in block or set</span>
<span class="sd">        7 SHFSCL RS Estimate of first flexible mode</span>
<span class="sd">        8 FLAG1   I V1 specification flag - set to 1 if V1 is specified</span>
<span class="sd">        9 FLAG2   I V2 specification flag - set to 1 if V2 is specified</span>
<span class="sd">        10 NORM(2) CHAR4 Method for normalizing eigenvectors</span>
<span class="sd">        12 ALPH  RS Constant for quadratic frequency segment distribution</span>
<span class="sd">        13 NUMS   I Number of frequency segments</span>
<span class="sd">        14 FI    RS Frequency at the upper boundary of the i-th segment</span>
<span class="sd">        Word 14 repeats NUMS times</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ndata</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="s1">&#39;i 2f 3i f 2i 8s f i&#39;</span><span class="p">)</span>
            <span class="n">nbytes</span> <span class="o">=</span> <span class="mi">52</span>
            <span class="n">types</span> <span class="o">=</span> <span class="s1">&#39;if&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="s1">&#39;q 2d 3q d 2q 16s d i&#39;</span><span class="p">)</span>
            <span class="n">nbytes</span> <span class="o">=</span> <span class="mi">100</span>
            <span class="n">types</span> <span class="o">=</span> <span class="s1">&#39;qds&#39;</span>

        <span class="n">nentries</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="n">ndata</span><span class="p">:</span>
            <span class="c1">#edata = data[n:n+46] # 11*4+2 = 46</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">nbytes</span><span class="p">]</span> <span class="c1"># 13*4 = 52</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="n">sid</span><span class="p">,</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">nd</span><span class="p">,</span> <span class="n">msglvl</span><span class="p">,</span> <span class="n">maxset</span><span class="p">,</span> <span class="n">shfscl</span><span class="p">,</span> <span class="n">flag1</span><span class="p">,</span> <span class="n">flag2</span><span class="p">,</span> <span class="n">norm</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">nums</span> <span class="o">=</span> <span class="n">out</span>
            <span class="n">norm</span> <span class="o">=</span> <span class="n">norm</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\x00</span><span class="s1"> &#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nums</span> <span class="o">!=</span> <span class="mi">538976288</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;sid=</span><span class="si">{</span><span class="n">sid</span><span class="si">}</span><span class="s1"> v1=</span><span class="si">{</span><span class="n">v1</span><span class="si">}</span><span class="s1"> v2=</span><span class="si">{</span><span class="n">v2</span><span class="si">}</span><span class="s1"> nd=</span><span class="si">{</span><span class="n">nd</span><span class="si">}</span><span class="s1"> msglvl=</span><span class="si">{</span><span class="n">msglvl</span><span class="si">}</span><span class="s1"> maxset=</span><span class="si">{</span><span class="n">maxset</span><span class="si">}</span><span class="s1"> &#39;</span>
                                 <span class="sa">f</span><span class="s1">&#39;shfscl=</span><span class="si">{</span><span class="n">shfscl</span><span class="si">}</span><span class="s1"> flag1=</span><span class="si">{</span><span class="n">flag1</span><span class="si">}</span><span class="s1"> flag2=</span><span class="si">{</span><span class="n">flag2</span><span class="si">}</span><span class="s1"> norm=</span><span class="si">{</span><span class="n">norm</span><span class="si">}</span><span class="s1"> alpha=</span><span class="si">{</span><span class="n">alpha</span><span class="si">}</span><span class="s1"> nums=</span><span class="si">{</span><span class="n">nums</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">assert</span> <span class="n">nums</span> <span class="o">&lt;</span> <span class="mi">10000</span><span class="p">,</span> <span class="n">nums</span>
                <span class="c1">#edata2 = data[n+46:n+46+nums*4]</span>
                <span class="n">edata2</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="o">+</span><span class="n">nbytes</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">nbytes</span><span class="o">+</span><span class="n">nums</span><span class="o">*</span><span class="mi">4</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">show_data</span><span class="p">(</span><span class="n">edata2</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="n">types</span><span class="p">)</span>
                <span class="n">fi</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%i</span><span class="s1">f&#39;</span> <span class="o">%</span> <span class="n">nums</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">),</span> <span class="n">edata2</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">fi</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  EIGRL=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="n">options</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_eigrl</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">v1</span><span class="o">=</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="o">=</span><span class="n">v2</span><span class="p">,</span> <span class="n">nd</span><span class="o">=</span><span class="n">nd</span><span class="p">,</span> <span class="n">msglvl</span><span class="o">=</span><span class="n">msglvl</span><span class="p">,</span>
                           <span class="n">maxset</span><span class="o">=</span><span class="n">maxset</span><span class="p">,</span> <span class="n">shfscl</span><span class="o">=</span><span class="n">shfscl</span><span class="p">,</span>
                           <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">values</span><span class="p">)</span>
            <span class="c1">#print(eigrl)</span>
            <span class="k">if</span> <span class="n">nums</span> <span class="o">==</span> <span class="mi">538976288</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="n">nbytes</span> <span class="o">+</span> <span class="n">nums</span> <span class="o">*</span> <span class="mi">4</span>
            <span class="n">nentries</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;EIGRL&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_epoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;EPOINT(707,7,124) - Record 12&quot;&quot;&quot;</span>
        <span class="n">npoints</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="mi">4</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="si">%i</span><span class="s1">i&#39;</span> <span class="o">%</span> <span class="n">npoints</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="n">fmt</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;EPOINT=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">nids</span><span class="p">))</span>
        <span class="n">epoint</span> <span class="o">=</span> <span class="n">EPOINTs</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">nids</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_epoint_object</span><span class="p">(</span><span class="n">epoint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;EPOINT&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">npoints</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;EPOINT&#39;</span><span class="p">,</span> <span class="n">count_num</span><span class="o">=</span><span class="n">npoints</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_freq</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;FREQ(1307,13,126) - Record 13&quot;&quot;&quot;</span>
        <span class="n">ints</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:],</span> <span class="bp">self</span><span class="o">.</span><span class="n">idtype8</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">floats</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:],</span> <span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">iminus1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">ints</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">istart</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">iend</span> <span class="ow">in</span> <span class="n">iminus1</span><span class="p">:</span>
            <span class="n">sid</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[</span><span class="n">istart</span><span class="p">]</span>
            <span class="n">freqs</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[</span><span class="n">istart</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span><span class="n">iend</span><span class="p">]</span>
            <span class="n">istart</span> <span class="o">=</span> <span class="n">iend</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_freq</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">freqs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;FREQ&#39;</span><span class="p">,</span> <span class="n">count_num</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">iminus1</span><span class="p">))</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_read_freq1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        FREQ1(1007,10,125) - Record 14</span>

<span class="sd">        1 SID I  Set identification number</span>
<span class="sd">        2 F1  RS First frequency</span>
<span class="sd">        3 DF  RS Frequency increment</span>
<span class="sd">        4 NDF I  Number of frequency increments</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">16</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;iffi&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="n">sid</span><span class="p">,</span> <span class="n">f1</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">ndf</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;FREQ1=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="c1">#print(&#39;out = %s&#39; % str(out))</span>
            <span class="n">freq</span> <span class="o">=</span> <span class="n">FREQ1</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">f1</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">ndf</span><span class="o">=</span><span class="n">ndf</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_freq_object</span><span class="p">(</span><span class="n">freq</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;FREQ1&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_freq2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        FREQ2(1107,11,166) - Record 15</span>

<span class="sd">        1 SID  I Set identification number</span>
<span class="sd">        2 F1  RS First frequency</span>
<span class="sd">        3 F2  RS Last frequency</span>
<span class="sd">        4 NF   I Number of logarithmic intervals</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">16</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;iffi&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="n">sid</span><span class="p">,</span> <span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">,</span> <span class="n">nf</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  FREQ2=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="c1">#print(&#39;out = %s&#39; % str(out))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_freq2</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">,</span> <span class="n">nf</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;FREQ2&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_freq3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        FREQ3(1407,14,39) - Record 16</span>

<span class="sd">        1 SID      I Set identification number</span>
<span class="sd">        2 F1      RS Lower bound of modal frequency range</span>
<span class="sd">        3 F2      RS Upper bound of modal frequency range</span>
<span class="sd">        4 TYPE CHAR4 Type of interpolation: LINE or LOG</span>
<span class="sd">        5 NEF      I Number of frequencies</span>
<span class="sd">        6 BIAS    RS Clustering bias parameter</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">24</span> <span class="c1"># 4*6</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i 2f 4s if&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="n">sid</span><span class="p">,</span> <span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">,</span> <span class="n">freq_type</span><span class="p">,</span> <span class="n">nef</span><span class="p">,</span> <span class="n">bias</span> <span class="o">=</span> <span class="n">out</span>
            <span class="n">freq_type</span> <span class="o">=</span> <span class="n">freq_type</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">freq_type</span> <span class="o">==</span> <span class="s1">&#39;LINE&#39;</span><span class="p">:</span>
                <span class="n">freq_type</span> <span class="o">=</span> <span class="s1">&#39;LINEAR&#39;</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  FREQ3=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_freq3</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="o">=</span><span class="n">f2</span><span class="p">,</span> <span class="n">Type</span><span class="o">=</span><span class="n">freq_type</span><span class="p">,</span> <span class="n">nef</span><span class="o">=</span><span class="n">nef</span><span class="p">,</span> <span class="n">cluster</span><span class="o">=</span><span class="n">bias</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;FREQ3&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_freq4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        FREQ4(1507,15,40) - Record 17</span>

<span class="sd">        1 SID   I Set identification number</span>
<span class="sd">        2 F1   RS Lower bound of modal frequency range</span>
<span class="sd">        3 F2   RS Upper bound of modal frequency range</span>
<span class="sd">        4 FSPD RS Frequency spread</span>
<span class="sd">        5 NFM   I Number of evenly spaced frequencies per spread</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">20</span> <span class="c1"># 4*5</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i 3f i&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="n">sid</span><span class="p">,</span> <span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">,</span> <span class="n">fspread</span><span class="p">,</span> <span class="n">nfm</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  FREQ4=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_freq4</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">,</span> <span class="n">fspread</span><span class="o">=</span><span class="n">fspread</span><span class="p">,</span> <span class="n">nfm</span><span class="o">=</span><span class="n">nfm</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;FREQ4&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_freq5</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        FREQ5(1607,16,41) - Record 18</span>

<span class="sd">        1 SID  I Load set identification number</span>
<span class="sd">        2 F1  RS Lower bound of modal frequency range</span>
<span class="sd">        3 F2  RS Upper bound of modal frequency range</span>
<span class="sd">        4 FRI RS Fractions of natural frequencies</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ints</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">floats</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">i_minus_1s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">ints</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">i_minus_1s</span><span class="p">)</span>

        <span class="n">i0</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i_minus_1</span> <span class="ow">in</span> <span class="n">i_minus_1s</span><span class="p">:</span>
            <span class="n">sid</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[</span><span class="n">i0</span><span class="p">]</span>
            <span class="n">floatsi</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[</span><span class="n">i0</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span><span class="n">i_minus_1</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  FREQ5=(</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">floatsi</span><span class="o">.</span><span class="n">tolist</span><span class="p">()))</span>
            <span class="n">f1</span> <span class="o">=</span> <span class="n">floatsi</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">f2</span> <span class="o">=</span> <span class="n">floatsi</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">fractions</span> <span class="o">=</span> <span class="n">floatsi</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_freq5</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">fractions</span><span class="p">,</span> <span class="n">f1</span><span class="o">=</span><span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="o">=</span><span class="n">f2</span><span class="p">)</span>
            <span class="c1">#print(&#39;freq =&#39;, freq)</span>
            <span class="n">i0</span> <span class="o">=</span> <span class="n">i_minus_1</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;FREQ5&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="c1">#ntotal = 20 # 4*5</span>
        <span class="c1">#nentries = (len(data) - n) // ntotal</span>
        <span class="c1">#struc = Struct(self._endian + b&#39;i 3f&#39;)</span>
        <span class="c1">#for i in range(nentries):</span>
            <span class="c1">#edata = data[n:n+ntotal]</span>
            <span class="c1">#out = struc.unpack(edata)</span>
            <span class="c1">#sid, f1, f2, fspread, nfm = out</span>
            <span class="c1">#if self.is_debug_file:</span>
                <span class="c1">#self.binary_debug.write(&#39;  FREQ5=%s\n&#39; % str(out))</span>
            <span class="c1">#freq = self.add_freq4(sid, f1, f2, fspread=fspread, nfm=nfm)</span>
            <span class="c1">#n += ntotal</span>
        <span class="c1">#self.increase_card_count(&#39;FREQ5&#39;, nentries)</span>

    <span class="k">def</span> <span class="nf">_read_nrlgap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="c1">#C:\NASA\m4\formats\git\examples\move_tpl\nlrgap2.op2</span>
        <span class="c1">#NLRGAP  SID     GA      GB      PLANE   TABK     TABG    TABU RADIUS</span>
        <span class="c1">#nlrgap  200     9       10      XY      -961     965     967     5.0</span>
        <span class="c1">#(200, 9, 10, 101, 961, 965, 967, 5.0)</span>
        <span class="c1">#ntotal = 32</span>
        <span class="c1">#self.show_data(data[n:])</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">12</span> <span class="o">+</span> <span class="mi">32</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_read_nlrsfd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        NLRSFD(3807,38,505)</span>

<span class="sd">        Word Name Type Description</span>
<span class="sd">        1 SID          I Load set identification number</span>
<span class="sd">        2 GA           I Inner grid id</span>
<span class="sd">        3 GB           I Outer grid id</span>
<span class="sd">        4 PLANE(2) CHAR4 Radial gap orientation plan</span>
<span class="sd">        6 BDIA        RS Inner journal diameter</span>
<span class="sd">        7 BLEN        RS Damper length</span>
<span class="sd">        8 BCLR        RS Damper radial clearance</span>
<span class="sd">        9 SOLN(2)  CHAR4 Solution option</span>
<span class="sd">        11 VISCO      RS Lubricant viscosity</span>
<span class="sd">        12 PVAPCO     RS Lubricant vapor pressure</span>
<span class="sd">        13 NPORT       I Number of lubication ports</span>
<span class="sd">        14 PRES1      RS Boundary pressure for port 1</span>
<span class="sd">        15 THETA1     RS Angular position for port 1</span>
<span class="sd">        16 PRES2      RS Boundary pressure for port 2</span>
<span class="sd">        17 THETA2     RS Angular position for port 2</span>
<span class="sd">        18 NPNT        I Number of finite diff points</span>
<span class="sd">        19 OFFSET1    RS Offset in the SFD direction 1</span>
<span class="sd">        20 OFFSET2    RS Offset in the SFD direction 2</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">80</span> <span class="c1"># 4*20</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3i 8s 3f 8s 2f i 4f i 2f&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">ga</span><span class="p">,</span> <span class="n">gb</span><span class="p">,</span> <span class="n">plane</span><span class="p">,</span> <span class="n">bdia</span><span class="p">,</span> <span class="n">blen</span><span class="p">,</span> <span class="n">bclr</span><span class="p">,</span> <span class="n">soln</span><span class="p">,</span>
             <span class="n">visco</span><span class="p">,</span> <span class="n">pvapco</span><span class="p">,</span> <span class="n">nport</span><span class="p">,</span>
             <span class="n">pres1</span><span class="p">,</span> <span class="n">theta1</span><span class="p">,</span> <span class="n">pres2</span><span class="p">,</span> <span class="n">theat2</span><span class="p">,</span> <span class="n">npnt</span><span class="p">,</span>
             <span class="n">offset1</span><span class="p">,</span> <span class="n">offset2</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="n">plane</span> <span class="o">=</span> <span class="n">plane</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span>
            <span class="n">soln</span> <span class="o">=</span> <span class="n">soln</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span>
            <span class="c1">#NLRSFD SID     GA     GB    PLANE BDIA   BLEN  BCLR   SOLN</span>
            <span class="c1">#       VISCO   PVAPCO NPORT PRES1 THETA1 PRES2 THETA2 NPNT</span>
            <span class="c1">#       OFFSET1 OFFSET2</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  NLRSFD=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_nlrsfd</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">ga</span><span class="p">,</span> <span class="n">gb</span><span class="p">,</span> <span class="n">plane</span><span class="p">,</span> <span class="n">bdia</span><span class="p">,</span> <span class="n">blen</span><span class="p">,</span> <span class="n">bclr</span><span class="p">,</span> <span class="n">soln</span><span class="p">,</span>
                            <span class="n">visco</span><span class="p">,</span> <span class="n">pvapco</span><span class="p">,</span> <span class="n">nport</span><span class="p">,</span>
                            <span class="n">pres1</span><span class="p">,</span> <span class="n">theta1</span><span class="p">,</span> <span class="n">pres2</span><span class="p">,</span> <span class="n">theat2</span><span class="p">,</span> <span class="n">npnt</span><span class="p">,</span>
                            <span class="n">offset1</span><span class="p">,</span> <span class="n">offset2</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;NLRSFD&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>


    <span class="k">def</span> <span class="nf">_read_nolin1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        NOLIN1(3107,31,127)</span>

<span class="sd">        Word Name Type Description</span>
<span class="sd">        1 SID I Load set identification number</span>
<span class="sd">        2 GI  I Grid, scalar, or extra point identification number of I</span>
<span class="sd">        3 CI  I Component number for GI.</span>
<span class="sd">        4 S  RS Scale factor</span>
<span class="sd">        5 GJ  I Grid, scalar, or extra point identification number of J</span>
<span class="sd">        6 CJ  I Component number for GJ</span>
<span class="sd">        7 T   I Identification number of a TABLEDi Bulk Data entry.</span>
<span class="sd">        8 UNDEF none</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#C:\NASA\m4\formats\git\examples\move_tpl\d10903.op2</span>
        <span class="c1">#NOLIN1 SID GI CI S GJ CJ TID</span>
        <span class="c1">#NOLIN1  115     2               -1.0    2               2</span>
        <span class="c1">#NOLIN1  115     13              -1.0    13              3</span>

        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">32</span> <span class="c1"># 4*8</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3if4i&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">gi</span><span class="p">,</span> <span class="n">ci</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">gj</span><span class="p">,</span> <span class="n">cj</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">unused_zero</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">assert</span> <span class="n">unused_zero</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  NOLIN1=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_nolin1</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">gi</span><span class="p">,</span> <span class="n">ci</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">gj</span><span class="p">,</span> <span class="n">cj</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;NOLIN1&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_nolin2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        NOLIN2(3207,32,128)</span>

<span class="sd">        Word Name Type Description</span>
<span class="sd">        1 SID I Load set identification number</span>
<span class="sd">        2 GI  I Grid, scalar, or extra point identification number of I</span>
<span class="sd">        3 CI  I Component number for GI.</span>
<span class="sd">        4 S  RS Scale factor</span>
<span class="sd">        5 GJ  I Grid, scalar, or extra point identification number of J</span>
<span class="sd">        6 CJ  I Component number for GJ</span>
<span class="sd">        7 GK  I Grid, scalar, or extra point identification number of K</span>
<span class="sd">        8 CK  I Component number for GK</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#C:\NASA\m4\formats\git\examples\move_tpl\n12905b.op2</span>
        <span class="c1">#NOLIN2  SID     GI      CI         S    GJ      CJ      GK      CK</span>
        <span class="c1">#NOLIN2  400     2       1       -.01    3       0       2       1</span>
        <span class="c1">#NOLIN2  400     2       2       -.01    3       0       2       2</span>
        <span class="c1">#NOLIN2  400     3       0       -.005   2       1       2       1</span>
        <span class="c1">#NOLIN2  400     3       0       -.005   2       2       2       2</span>

        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">32</span> <span class="c1"># 4*8</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3if4i&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">ci</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">gj</span><span class="p">,</span> <span class="n">cj</span><span class="p">,</span> <span class="n">gk</span><span class="p">,</span> <span class="n">ck</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  NOLIN2=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_nolin2</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">ci</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">gj</span><span class="p">,</span> <span class="n">cj</span><span class="p">,</span> <span class="n">gk</span><span class="p">,</span> <span class="n">ck</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;NOLIN2&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_nolin3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        NOLIN3(3307,33,129)</span>

<span class="sd">        Word Name Type Description</span>
<span class="sd">        1 SID I Load set identification number</span>
<span class="sd">        2 GI  I Grid, scalar, or extra point identification number of I</span>
<span class="sd">        3 CI  I Component number for GI.</span>
<span class="sd">        4 S  RS Scale factor</span>
<span class="sd">        5 GJ  I Grid, scalar, or extra point identification number of J</span>
<span class="sd">        6 CJ  I Component number for GJ</span>
<span class="sd">        7 A  RS Exponent of the forcing function</span>
<span class="sd">        8 UNDEF none</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#C:\NASA\m4\formats\git\examples\move_tpl\d10903.op2</span>
        <span class="c1">#NOLIN3  115     4               -3.5+3  4       10      2.</span>
        <span class="c1">#NOLIN3  115     11              -3.5+3  11      10      2.</span>

        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">32</span> <span class="c1"># 4*8</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3if2ifi&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">gi</span><span class="p">,</span> <span class="n">ci</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">gj</span><span class="p">,</span> <span class="n">cj</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">zero</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">assert</span> <span class="n">zero</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  NOLIN3=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_nolin3</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">gi</span><span class="p">,</span> <span class="n">ci</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">gj</span><span class="p">,</span> <span class="n">cj</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;NOLIN3&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_nolin4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        NOLIN4(3407,34,130)</span>

<span class="sd">        Word Name Type Description</span>
<span class="sd">        1 SID I Load set identification number</span>
<span class="sd">        2 GI  I Grid, scalar, or extra point identification number of I</span>
<span class="sd">        3 CI  I Component number for GI.</span>
<span class="sd">        4 S  RS Scale factor</span>
<span class="sd">        5 GJ  I Grid, scalar, or extra point identification number of J</span>
<span class="sd">        6 CJ  I Component number for GJ</span>
<span class="sd">        7 A  RS Exponent of the forcing function</span>
<span class="sd">        8 UNDEF none</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#C:\NASA\m4\formats\git\examples\move_tpl\d10903.op2</span>
        <span class="c1">#NOLIN4  115     4               -3.5+3  4       10      2.</span>
        <span class="c1">#NOLIN4  115     11              -3.5+3  11      10      2.</span>

        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">32</span> <span class="c1"># 4*8</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3if2ifi&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">gi</span><span class="p">,</span> <span class="n">ci</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">gj</span><span class="p">,</span> <span class="n">cj</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">zero</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">assert</span> <span class="n">zero</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  NOLIN4=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_nolin4</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">gi</span><span class="p">,</span> <span class="n">ci</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">gj</span><span class="p">,</span> <span class="n">cj</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;NOLIN4&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_randps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;common method for reading NX/MSC RLOAD1&quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_dual_card</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_randps_nx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_randps_msc</span><span class="p">,</span>
                                 <span class="s1">&#39;RLOAD1&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_dload_entry</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_randps_nx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        RANDPS(2107,21,195)</span>

<span class="sd">        NX</span>
<span class="sd">        1 SID   I Set identification number</span>
<span class="sd">        2 J     I Subcase identification number of the excited set</span>
<span class="sd">        3 K     I Subcase identification number of the applied load set</span>
<span class="sd">        4 X    RS X component</span>
<span class="sd">        5 Y    RS Y component</span>
<span class="sd">        6 TIDI  I Identification number of a TABRNDi entry that defines G(f)</span>
<span class="sd">        7 TIDR RS If TIDI = 0, constant value for G(f)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">28</span>
        <span class="n">ndatai</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="n">ndatai</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">assert</span> <span class="n">ndatai</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">nentries</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3i 2f if&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="n">sid</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">tidi</span><span class="p">,</span> <span class="n">tidf</span> <span class="o">=</span> <span class="n">out</span>
            <span class="n">tid</span> <span class="o">=</span> <span class="n">tidi</span>
            <span class="k">if</span> <span class="n">tidi</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">tid</span> <span class="o">=</span> <span class="n">tidf</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  RANDPS=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="c1">#self.log.debug(&#39;  RANDPS=%s\n&#39; % str(out))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_randps</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">tid</span><span class="o">=</span><span class="n">tid</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;RANDPS&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">_read_randps_msc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        RANDPS(2107,21,195)</span>

<span class="sd">        MSC</span>
<span class="sd">        1 SID I  Set identification number</span>
<span class="sd">        2 J   I  Subcase identification number of the excited set</span>
<span class="sd">        3 K   I  Subcase identification number of the applied load set</span>
<span class="sd">        4 X   RS X component</span>
<span class="sd">        5 Y   RS Y component</span>
<span class="sd">        6 TID I  Identification number of a TABRNDi entry that defines G(F)</span>

<span class="sd">        NX</span>
<span class="sd">        1 SID I Set identification number</span>
<span class="sd">        2 J I Subcase identification number of the excited set</span>
<span class="sd">        3 K I Subcase identification number of the applied load set</span>
<span class="sd">        4 X RS X component</span>
<span class="sd">        5 Y RS Y component</span>
<span class="sd">        6 TIDI I Identification number of a TABRNDi entry that defines G(f)</span>
<span class="sd">        7 TIDR RS If TIDI = 0, constant value for G(f)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">24</span>
        <span class="n">ndatai</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="n">ndatai</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">assert</span> <span class="n">ndatai</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">nentries</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3i2fi&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="n">sid</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">tid</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  RANDPS=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="c1">#self.log.debug(&#39;  RANDPS=%s\n&#39; % str(out))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_randps</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">tid</span><span class="o">=</span><span class="n">tid</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;RANDPS&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">_read_randt1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        RANDT1(2207,22,196)</span>

<span class="sd">        Word Name Type Description</span>
<span class="sd">        1 SID  I  Set identification number</span>
<span class="sd">        2 N    I  Number of time lag intervals</span>
<span class="sd">        3 TO   RS Starting time lag</span>
<span class="sd">        4 TMAX RS Maximum time lag</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">16</span>  <span class="c1"># 4*4</span>
        <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i 2f&#39;</span><span class="p">)</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">])</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  RANDT1=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="n">sid</span><span class="p">,</span> <span class="n">nlags</span><span class="p">,</span> <span class="n">to</span><span class="p">,</span> <span class="n">tmax</span> <span class="o">=</span> <span class="n">out</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_randt1</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">nlags</span><span class="p">,</span> <span class="n">to</span><span class="p">,</span> <span class="n">tmax</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;RANDT1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nentries</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_rload1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;common method for reading NX/MSC RLOAD1&quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_dual_card</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_rload1_nx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_rload1_msc</span><span class="p">,</span>
                                 <span class="s1">&#39;RLOAD1&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_dload_entry</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_rload1_nx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        RLOAD1(5107,51,131) - Record 26</span>

<span class="sd">        NX</span>
<span class="sd">        1 SID      I Load set identification number</span>
<span class="sd">        2 DAREA    I DAREA Bulk Data entry identification number</span>
<span class="sd">        3 DELAYI   I DELAY Bulk Data entry identification number</span>
<span class="sd">        4 DPHASEI  I DPHASE Bulk Data entry identification number</span>
<span class="sd">        5 TCI      I TABLEDi Bulk Data entry identification number for C(f)</span>
<span class="sd">        6 TDI      I TABLEDi Bulk Data entry identification number for D(f)</span>
<span class="sd">        7 TYPE     I Nature of the dynamic excitation</span>
<span class="sd">        8 DELAYR  RS If DELAYI = 0, constant value for delay</span>
<span class="sd">        9 DPHASER RS If DPHASEI = 0, constant value for phase</span>
<span class="sd">        10 TCR    RS If TCI = 0, constant value for C(f)</span>
<span class="sd">        11 TDR    RS If TDI = 0, constant value for D(f)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dloads</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">44</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">assert</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;7i 4f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="n">sid</span><span class="p">,</span> <span class="n">darea</span><span class="p">,</span> <span class="n">delayi</span><span class="p">,</span> <span class="n">dphasei</span><span class="p">,</span> <span class="n">tci</span><span class="p">,</span> <span class="n">tdi</span><span class="p">,</span> <span class="n">load_type</span><span class="p">,</span> <span class="n">delayr</span><span class="p">,</span> <span class="n">dphaser</span><span class="p">,</span> <span class="n">tcr</span><span class="p">,</span> <span class="n">tdr</span> <span class="o">=</span> <span class="n">out</span> <span class="c1"># 44</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  RLOAD1=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>

            <span class="n">tc</span> <span class="o">=</span> <span class="n">tci</span>
            <span class="n">td</span> <span class="o">=</span> <span class="n">tdi</span>
            <span class="n">delay</span> <span class="o">=</span> <span class="n">delayi</span>
            <span class="n">dphase</span> <span class="o">=</span> <span class="n">dphasei</span>
            <span class="k">if</span> <span class="n">delayi</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">delay</span> <span class="o">=</span> <span class="n">delayr</span>
            <span class="k">if</span> <span class="n">dphasei</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">dphase</span> <span class="o">=</span> <span class="n">dphaser</span>
            <span class="k">if</span> <span class="n">tci</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">tc</span> <span class="o">=</span> <span class="n">tcr</span>
            <span class="k">if</span> <span class="n">tdi</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">td</span> <span class="o">=</span> <span class="n">tdr</span>
            <span class="n">dload</span> <span class="o">=</span> <span class="n">RLOAD1</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">darea</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="n">delay</span><span class="p">,</span> <span class="n">dphase</span><span class="o">=</span><span class="n">dphase</span><span class="p">,</span> <span class="n">tc</span><span class="o">=</span><span class="n">tc</span><span class="p">,</span> <span class="n">td</span><span class="o">=</span><span class="n">td</span><span class="p">,</span>
                           <span class="n">Type</span><span class="o">=</span><span class="n">load_type</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="n">dloads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dload</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">dloads</span>

    <span class="k">def</span> <span class="nf">_read_rload1_msc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        RLOAD1(5107,51,131) - Record 26</span>

<span class="sd">        MSC</span>
<span class="sd">        1 SID    I  Load set identification number</span>
<span class="sd">        2 DAREA  I  DAREA Bulk Data entry identification number</span>
<span class="sd">        3 DPHASE RS DPHASE Bulk Data entry identification number</span>
<span class="sd">        4 DELAY  RS DELAY Bulk Data entry identification number</span>
<span class="sd">        5 TC     I  TABLEDi Bulk Data entry identification number for C(f)</span>
<span class="sd">        6 TD     I  TABLEDi Bulk Data entry identification number for D(f)</span>
<span class="sd">        7 TYPE   I  Nature of the dynamic excitation</span>
<span class="sd">        8 T      RS Time delay</span>
<span class="sd">        9 PH     RS Phase lead</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dloads</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">36</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">assert</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i 2f 3i 2f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="n">sid</span><span class="p">,</span> <span class="n">darea</span><span class="p">,</span> <span class="n">dphaser</span><span class="p">,</span> <span class="n">delayr</span><span class="p">,</span> <span class="n">tci</span><span class="p">,</span> <span class="n">tdi</span><span class="p">,</span> <span class="n">load_type</span><span class="p">,</span> <span class="n">tau</span><span class="p">,</span> <span class="n">phi</span> <span class="o">=</span> <span class="n">out</span> <span class="c1"># 36</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  RLOAD1=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>

            <span class="n">tc</span> <span class="o">=</span> <span class="n">tci</span>
            <span class="n">td</span> <span class="o">=</span> <span class="n">tdi</span>
            <span class="n">delay</span> <span class="o">=</span> <span class="n">delayr</span>
            <span class="n">dphase</span> <span class="o">=</span> <span class="n">dphaser</span>
            <span class="n">dload</span> <span class="o">=</span> <span class="n">RLOAD1</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">darea</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="n">delay</span><span class="p">,</span> <span class="n">dphase</span><span class="o">=</span><span class="n">dphase</span><span class="p">,</span> <span class="n">tc</span><span class="o">=</span><span class="n">tc</span><span class="p">,</span> <span class="n">td</span><span class="o">=</span><span class="n">td</span><span class="p">,</span>
                           <span class="n">Type</span><span class="o">=</span><span class="n">load_type</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="n">dloads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dload</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">dloads</span>

    <span class="k">def</span> <span class="nf">_read_rload2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;common method for reading NX/MSC RLOAD2&quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_dual_card</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_rload2_nx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_rload2_msc</span><span class="p">,</span>
                                 <span class="s1">&#39;RLOAD2&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_dload_entry</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_rload2_nx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        RLOAD2(5207,52,132) - Record 27</span>
<span class="sd">        NX</span>
<span class="sd">        1 SID     I  Load set identification number</span>
<span class="sd">        2 DAREA   I  DAREA Bulk Data entry identification number</span>
<span class="sd">        3 DELAYI  I  DELAY Bulk Data entry identification number</span>
<span class="sd">        4 DPHASEI I  DPHASE Bulk Data entry identification number</span>
<span class="sd">        5 TBI     I  TABLEDi Bulk Data entry identification number for B(f)</span>
<span class="sd">        6 TPI     I  TABLEDi Bulk Data entry identification number for Phi(f)</span>
<span class="sd">        7 TYPE    I  Nature of the dynamic excitation</span>
<span class="sd">        8 DELAYR  RS If DELAYI = 0, constant value for delay</span>
<span class="sd">        9 DPHASER RS If DPHASEI = 0, constant value for phase</span>
<span class="sd">        10 TBR    RS If TBI = 0, constant value for B(f)</span>
<span class="sd">        11 TPR    RS If TPI = 0, constant value for PHI(f)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dloads</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">44</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="n">ndatai</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="n">ndatai</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">assert</span> <span class="n">ndatai</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">nentries</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;7i 4f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="n">sid</span><span class="p">,</span> <span class="n">darea</span><span class="p">,</span> <span class="n">delayi</span><span class="p">,</span> <span class="n">dphasei</span><span class="p">,</span> <span class="n">tbi</span><span class="p">,</span> <span class="n">tpi</span><span class="p">,</span> <span class="n">load_type</span><span class="p">,</span> <span class="n">delayr</span><span class="p">,</span> <span class="n">dphaser</span><span class="p">,</span> <span class="n">tbr</span><span class="p">,</span> <span class="n">tpr</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  RLOAD2=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
                <span class="k">assert</span> <span class="n">sid</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">darea</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;RLOAD2; sid=</span><span class="si">{</span><span class="n">sid</span><span class="si">}</span><span class="s1"> darea=</span><span class="si">{</span><span class="n">darea</span><span class="si">}</span><span class="s1"> dphasei=</span><span class="si">{</span><span class="n">dphasei</span><span class="si">}</span><span class="s1"> delayi=</span><span class="si">{</span><span class="n">delayi</span><span class="si">}</span><span class="s1"> &#39;</span>
                                               <span class="sa">f</span><span class="s1">&#39;tbi=</span><span class="si">{</span><span class="n">tbi</span><span class="si">}</span><span class="s1"> tpi=</span><span class="si">{</span><span class="n">tpi</span><span class="si">}</span><span class="s1"> load_type=</span><span class="si">{</span><span class="n">load_type</span><span class="si">}</span><span class="s1"> tau=</span><span class="si">{</span><span class="n">tau</span><span class="si">}</span><span class="s1"> phase=</span><span class="si">{</span><span class="n">phase</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="n">tb</span> <span class="o">=</span> <span class="n">tbi</span>
            <span class="n">tp</span> <span class="o">=</span> <span class="n">tpi</span>
            <span class="n">delay</span> <span class="o">=</span> <span class="n">delayi</span>
            <span class="n">dphase</span> <span class="o">=</span> <span class="n">dphasei</span>
            <span class="k">if</span> <span class="n">tbi</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">tb</span> <span class="o">=</span> <span class="n">tbr</span>
            <span class="k">if</span> <span class="n">tpi</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">tp</span> <span class="o">=</span> <span class="n">tpr</span>
            <span class="k">if</span> <span class="n">delayi</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">delay</span> <span class="o">=</span> <span class="n">delayr</span>
            <span class="k">if</span> <span class="n">dphasei</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">dphase</span> <span class="o">=</span> <span class="n">dphaser</span>
            <span class="n">dload</span> <span class="o">=</span> <span class="n">RLOAD2</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">darea</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="n">delay</span><span class="p">,</span> <span class="n">dphase</span><span class="o">=</span><span class="n">dphase</span><span class="p">,</span> <span class="n">tb</span><span class="o">=</span><span class="n">tb</span><span class="p">,</span> <span class="n">tp</span><span class="o">=</span><span class="n">tp</span><span class="p">,</span>
                           <span class="n">Type</span><span class="o">=</span><span class="n">load_type</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="n">dloads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dload</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">dloads</span>

    <span class="k">def</span> <span class="nf">_read_rload2_msc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        RLOAD2(5207,52,132) - Record 27</span>
<span class="sd">        MSC</span>
<span class="sd">        1 SID    I  Load set identification number</span>
<span class="sd">        2 DAREA  I  DAREA Bulk Data entry identification number</span>
<span class="sd">        3 DPHASE I  DPHASE Bulk Data entry identification number</span>
<span class="sd">        4 DELAY  I  DELAY Bulk Data entry identification number</span>
<span class="sd">        5 TB     I  TABLEDi Bulk Data entry identification number for B(f)</span>
<span class="sd">        6 TP     I  TABLEDi Bulk Data entry identification number for Phi(f)</span>
<span class="sd">        7 TYPE   I  Nature of the dynamic excitation</span>
<span class="sd">        8 T      RS Time delay</span>
<span class="sd">        9 PH     RS Phase lead</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dloads</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">36</span>
        <span class="n">ndatai</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="n">ndatai</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">assert</span> <span class="n">ndatai</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">nentries</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;7i 2f&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="n">sid</span><span class="p">,</span> <span class="n">darea</span><span class="p">,</span> <span class="n">dphasei</span><span class="p">,</span> <span class="n">delayi</span><span class="p">,</span> <span class="n">tbi</span><span class="p">,</span> <span class="n">tpi</span><span class="p">,</span> <span class="n">load_type</span><span class="p">,</span> <span class="n">tau</span><span class="p">,</span> <span class="n">phase</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  RLOAD2=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="k">assert</span> <span class="n">sid</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">darea</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;RLOAD2; sid=</span><span class="si">{</span><span class="n">sid</span><span class="si">}</span><span class="s1"> darea=</span><span class="si">{</span><span class="n">darea</span><span class="si">}</span><span class="s1"> dphasei=</span><span class="si">{</span><span class="n">dphasei</span><span class="si">}</span><span class="s1"> delayi=</span><span class="si">{</span><span class="n">delayi</span><span class="si">}</span><span class="s1"> &#39;</span>
                                           <span class="sa">f</span><span class="s1">&#39;tbi=</span><span class="si">{</span><span class="n">tbi</span><span class="si">}</span><span class="s1"> tpi=</span><span class="si">{</span><span class="n">tpi</span><span class="si">}</span><span class="s1"> load_type=</span><span class="si">{</span><span class="n">load_type</span><span class="si">}</span><span class="s1"> tau=</span><span class="si">{</span><span class="n">tau</span><span class="si">}</span><span class="s1"> phase=</span><span class="si">{</span><span class="n">phase</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">dload</span> <span class="o">=</span> <span class="n">RLOAD2</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">darea</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="n">delayi</span><span class="p">,</span> <span class="n">dphase</span><span class="o">=</span><span class="n">dphasei</span><span class="p">,</span> <span class="n">tb</span><span class="o">=</span><span class="n">tbi</span><span class="p">,</span> <span class="n">tp</span><span class="o">=</span><span class="n">tpi</span><span class="p">,</span>
                           <span class="n">Type</span><span class="o">=</span><span class="n">load_type</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="n">dloads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dload</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">dloads</span>

    <span class="k">def</span> <span class="nf">_read_rgyro</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        RGYRO(1507,15,40) - Record 17</span>

<span class="sd">        1 SID          I RGYRO identification number</span>
<span class="sd">        2 ATYPE(2) CHAR4 ASYNC/SYNC flag</span>
<span class="sd">        4 REFROT       I Reference rotor identification number</span>
<span class="sd">        5 UNIT(2)  CHAR4 RPM/FREQ flag for speed input</span>
<span class="sd">        7 SPDLOW      RS Lower limit of speed range</span>
<span class="sd">        8 SPDHGH      RS Upper limit of speed range</span>
<span class="sd">        9 SPEED       RS Specific speed</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">36</span> <span class="c1"># 4*9</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i 8s i 8s 3f&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="n">sid</span><span class="p">,</span> <span class="n">asynci</span><span class="p">,</span> <span class="n">refrot</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="n">speed_low</span><span class="p">,</span> <span class="n">speed_high</span><span class="p">,</span> <span class="n">speed</span> <span class="o">=</span> <span class="n">out</span>
            <span class="n">asynci</span> <span class="o">=</span> <span class="n">asynci</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span>
            <span class="n">unit</span> <span class="o">=</span> <span class="n">unit</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  RGYRO=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_rgyro</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">asynci</span><span class="p">,</span> <span class="n">refrot</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="n">speed_low</span><span class="p">,</span> <span class="n">speed_high</span><span class="p">,</span> <span class="n">speed</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;RGYRO&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_rotord</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ROTORD(8210, 82, 599)</span>

<span class="sd">        1 SID               I Set identification number</span>
<span class="sd">        2 NUMROT            I Number of rotors (i=1, NUMROT below)</span>
<span class="sd">        3 RSTART           RS Starting rotor speed (in RPM)</span>
<span class="sd">        4 RSTEP            RS Rotor speed step size (in RPM)</span>
<span class="sd">        5 NUMSTEP           I Number of steps for rotor speed</span>
<span class="sd">        6,7 REFSYS      CHAR8 Rotational reference system (YHROT,YH or YHFIX,YH</span>
<span class="sd">        8 CMOUT            RS Complex mode output request</span>
<span class="sd">        9,10 RUNIT      CHAR8 Revolution input/output units for rotor (YHRPM or YHRAD or YHCPS or YHHZ)</span>
<span class="sd">        11,12 FUNIT     CHAR8 Frequency output units (YHRPM or YHRAD or YHCPS or YHHZ)</span>
<span class="sd">        13,14 ZSTEIN    CHAR8 Flag to incorpoate Steiner inertia terms (YHYES,YH or YHNO,YH)</span>
<span class="sd">        15 ORBEPS          RS Threshold value for detection of whirl direction</span>
<span class="sd">        16 ROTPRT           I Optional printout flag</span>
<span class="sd">        17 SYNC             I Synchronous analysis selection flag</span>
<span class="sd">        18 ETYPE            I Excitation type</span>
<span class="sd">        19 EORDER          RS Excitation order</span>
<span class="sd">        20–21                 (not used)</span>
<span class="sd">        22+8*(i-1) RIDi     I Rotor ID for ith rotor</span>
<span class="sd">        23+8*(i-1) RSETi    I Set number for rotor speed for multiple rotors</span>
<span class="sd">        24+8*(i-1) RSPEEDi RS Relative rotor speed for multiple rotors</span>
<span class="sd">        25+8*(i-1) RCOORDI  I Coordinate system ID number specifying rotation axis as Z</span>
<span class="sd">        26+8*(i-1) W3i     RS Damping coefficient like PARAM,W3</span>
<span class="sd">        27+8*(i-1) W4i     RS Damping coefficient like PARAM,W4</span>
<span class="sd">        28+8*(i-1) RFORCEi I RFORCE bulk data ID number specifying rotational force to be applied</span>
<span class="sd">        29+8*(i-1) BRGSETi I CBEAR bearing set GROUP ID number</span>

<span class="sd">        verified in NX 2019</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># up to EORDER</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">84</span> <span class="c1"># 19*4</span>
        <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i 2f i 8s f 8s8s8s f 3i f 2i&#39;</span><span class="p">)</span>

        <span class="n">ntotal2</span> <span class="o">=</span> <span class="mi">32</span> <span class="c1"># 8 * 4</span>
        <span class="n">struct2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i f i 2f 2i&#39;</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="c1">#if self.is_debug_file:</span>
                <span class="c1">#self.binary_debug.write(&#39;  ROTORD=%s\n&#39; % str(out))</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">numrot</span><span class="p">,</span> <span class="n">rstart</span><span class="p">,</span> <span class="n">rstep</span><span class="p">,</span> <span class="n">numstep</span><span class="p">,</span> <span class="n">refsys</span><span class="p">,</span> <span class="n">cmout</span><span class="p">,</span> <span class="n">runit</span><span class="p">,</span> <span class="n">funit</span><span class="p">,</span>
             <span class="n">zstein</span><span class="p">,</span> <span class="n">orbeps</span><span class="p">,</span> <span class="n">rotprt</span><span class="p">,</span> <span class="n">sync</span><span class="p">,</span> <span class="n">etype</span><span class="p">,</span> <span class="n">eorder</span><span class="p">,</span> <span class="n">unused_a</span><span class="p">,</span> <span class="n">unused_b</span><span class="p">)</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="n">runit</span> <span class="o">=</span> <span class="n">runit</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">funit</span> <span class="o">=</span> <span class="n">funit</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">refsys</span> <span class="o">=</span> <span class="n">refsys</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">zstein</span> <span class="o">=</span> <span class="n">zstein</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="c1">#print(sid, numrot, rstart, rstep, numstep, refsys, cmout,</span>
                  <span class="c1">#runit, funit, zstein, orbeps, rotprt, sync, etype, eorder)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>

            <span class="n">rids</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">rsets</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">rspeeds</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">rcords</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">w3s</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">w4s</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">rforces</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">brgsets</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">while</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
                <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal2</span><span class="p">]</span>
                <span class="p">(</span><span class="n">rid</span><span class="p">,</span> <span class="n">rset</span><span class="p">,</span> <span class="n">rspeed</span><span class="p">,</span> <span class="n">rcoord</span><span class="p">,</span> <span class="n">w3</span><span class="p">,</span> <span class="n">w4</span><span class="p">,</span> <span class="n">rforce</span><span class="p">,</span> <span class="n">brgset</span><span class="p">)</span> <span class="o">=</span> <span class="n">struct2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                <span class="c1">#print((rid, rset, rspeed, rcoord, w3, w4, rforce, brgset))</span>
                <span class="n">rids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rid</span><span class="p">)</span>
                <span class="n">rsets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rset</span><span class="p">)</span>
                <span class="n">rspeeds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rspeed</span><span class="p">)</span>
                <span class="n">rcords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rcoord</span><span class="p">)</span>
                <span class="n">w3s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">w3</span><span class="p">)</span>
                <span class="n">w4s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">w4</span><span class="p">)</span>
                <span class="n">rforces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rforce</span><span class="p">)</span>
                <span class="n">brgsets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">brgset</span><span class="p">)</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal2</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_rotord</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">rstart</span><span class="p">,</span> <span class="n">rstep</span><span class="p">,</span> <span class="n">numstep</span><span class="p">,</span>
                            <span class="n">rids</span><span class="p">,</span> <span class="n">rsets</span><span class="p">,</span> <span class="n">rspeeds</span><span class="p">,</span> <span class="n">rcords</span><span class="p">,</span> <span class="n">w3s</span><span class="p">,</span> <span class="n">w4s</span><span class="p">,</span> <span class="n">rforces</span><span class="p">,</span> <span class="n">brgsets</span><span class="p">,</span>
                            <span class="n">refsys</span><span class="o">=</span><span class="n">refsys</span><span class="p">,</span> <span class="n">cmout</span><span class="o">=</span><span class="n">cmout</span><span class="p">,</span> <span class="n">runit</span><span class="o">=</span><span class="n">runit</span><span class="p">,</span> <span class="n">funit</span><span class="o">=</span><span class="n">funit</span><span class="p">,</span>
                            <span class="n">zstein</span><span class="o">=</span><span class="n">zstein</span><span class="p">,</span> <span class="n">orbeps</span><span class="o">=</span><span class="n">orbeps</span><span class="p">,</span> <span class="n">roprt</span><span class="o">=</span><span class="n">rotprt</span><span class="p">,</span> <span class="n">sync</span><span class="o">=</span><span class="n">sync</span><span class="p">,</span> <span class="n">etype</span><span class="o">=</span><span class="n">etype</span><span class="p">,</span>
                            <span class="n">eorder</span><span class="o">=</span><span class="n">eorder</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">maxiter</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="n">nentries</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;ROTORD&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_rotorg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ROTORG(8410, 84, 600)</span>

<span class="sd">        1 SID I Set identification number of rotor</span>
<span class="sd">        2 ID  I Grid or scalar point ID&#39;s which define a rotor</span>

<span class="sd">        verified in NX 2019</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">ints</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">12</span><span class="p">:],</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span>
        <span class="n">izero</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">ints</span><span class="o">==-</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">istart</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">iend</span> <span class="ow">in</span> <span class="n">izero</span><span class="p">:</span>
            <span class="n">sid</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[</span><span class="n">istart</span><span class="p">]</span>
            <span class="n">grids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[</span><span class="n">istart</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span><span class="n">iend</span><span class="p">]</span>
            <span class="k">assert</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">grids</span><span class="p">,</span> <span class="n">grids</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
            <span class="k">assert</span> <span class="n">sid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">sid</span>
            <span class="n">rotorg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_rotorg</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">grids</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
            <span class="nb">str</span><span class="p">(</span><span class="n">rotorg</span><span class="p">)</span>
            <span class="n">istart</span> <span class="o">=</span> <span class="n">iend</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">nentries</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;ROTORG&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="c1">#RSPINR</span>

    <span class="k">def</span> <span class="nf">_read_rspint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        RSPINT(11001,110,310) - Record 31</span>

<span class="sd">        1 RID         I Rotor identification number</span>
<span class="sd">        2 GRIDA       I Grid A for rotation direction vector</span>
<span class="sd">        3 GRIDB       I Grid B for rotation direction vector</span>
<span class="sd">        4 GR         RS Rotor damping coefficient</span>
<span class="sd">        5 UNIT(2) CHAR4 RPM/FREQ flag for speed input</span>
<span class="sd">        7 TABLEID     I Table identification number for speed history</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">28</span> <span class="c1"># 4*7</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3if 8s i&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="n">rid</span><span class="p">,</span> <span class="n">grida</span><span class="p">,</span> <span class="n">gridb</span><span class="p">,</span> <span class="n">gr</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="n">table_id</span> <span class="o">=</span> <span class="n">out</span>
            <span class="n">unit</span> <span class="o">=</span> <span class="n">unit</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  RSPINT=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_rspint</span><span class="p">(</span><span class="n">rid</span><span class="p">,</span> <span class="n">grida</span><span class="p">,</span> <span class="n">gridb</span><span class="p">,</span> <span class="n">gr</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="n">table_id</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;RSPINT&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

<span class="c1">#SEQEP(5707,57,135)</span>

    <span class="k">def</span> <span class="nf">_read_tf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;TF&quot;&quot;&quot;</span>
        <span class="c1"># subtract of the header (sid, nid, component, b0, b1, b2)</span>
        <span class="c1"># divide by 5 (nid1, component1, a0, a1, a2)</span>
        <span class="c1">#nrows = (nfields - 6) // 5</span>
        <span class="c1">#print(&#39;n=%s nrows=%s&#39; % (n, nrows))</span>
        <span class="c1">#print(self.show_data(data))</span>
        <span class="c1">#nid1, component1, a0, a1, a2</span>

        <span class="n">ndata</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3i3f&#39;</span><span class="p">)</span>
        <span class="n">struct2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i3f&#39;</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="n">ndata</span><span class="p">:</span>
            <span class="n">n2</span> <span class="o">=</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">24</span> <span class="c1"># 20=4*6</span>
            <span class="n">sid</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">component</span><span class="p">,</span> <span class="n">b0</span><span class="p">,</span> <span class="n">b1</span><span class="p">,</span> <span class="n">b2</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n2</span><span class="p">])</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;TF header -&gt; </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">([</span><span class="n">sid</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">component</span><span class="p">,</span> <span class="n">b0</span><span class="p">,</span> <span class="n">b1</span><span class="p">,</span> <span class="n">b2</span><span class="p">]))</span>

            <span class="n">nids</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">components</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">irow</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n3</span> <span class="o">=</span> <span class="n">n2</span> <span class="o">+</span> <span class="mi">20</span> <span class="c1"># 20=4*5</span>
                <span class="n">nid1</span><span class="p">,</span> <span class="n">component1</span><span class="p">,</span> <span class="n">a0</span><span class="p">,</span> <span class="n">a1</span><span class="p">,</span> <span class="n">a2</span> <span class="o">=</span> <span class="n">struct2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n2</span><span class="p">:</span><span class="n">n3</span><span class="p">])</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  i=</span><span class="si">%s</span><span class="s1">     -&gt; </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="n">irow</span><span class="p">,</span> <span class="p">[</span><span class="n">nid1</span><span class="p">,</span> <span class="n">component1</span><span class="p">,</span> <span class="n">a0</span><span class="p">,</span> <span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">]))</span>

                <span class="k">if</span> <span class="n">nid1</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">component1</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="k">break</span>
                <span class="k">assert</span> <span class="n">nid1</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span>
                <span class="k">assert</span> <span class="n">component1</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span>
                <span class="n">nids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nid1</span><span class="p">)</span>
                <span class="n">components</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">component1</span><span class="p">)</span>
                <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">a0</span><span class="p">,</span> <span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">])</span>
                <span class="n">n2</span> <span class="o">=</span> <span class="n">n3</span>
                <span class="n">irow</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="n">tf</span> <span class="o">=</span> <span class="n">TF</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">component</span><span class="p">,</span> <span class="n">b0</span><span class="p">,</span> <span class="n">b1</span><span class="p">,</span> <span class="n">b2</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">components</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
            <span class="c1">#if self.is_debug_file:</span>
                <span class="c1">#self.binary_debug.write(&#39;%s\n&#39; % str(tf))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_tf_object</span><span class="p">(</span><span class="n">tf</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;TF&#39;</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">n3</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_tic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        TIC(6607,66,137)</span>

<span class="sd">        1 SID I Load set identification number</span>
<span class="sd">        2 G   I Grid, scalar, or extra point identification number</span>
<span class="sd">        3 C   I Component number for point GD</span>
<span class="sd">        4 U0 RS Initial displacement</span>
<span class="sd">        5 V0 RS Initial velocity</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">20</span> <span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">factor</span>  <span class="c1"># 5*4</span>
        <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3i 2f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">])</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  TIC=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="n">sid</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">comp</span><span class="p">,</span> <span class="n">u0</span><span class="p">,</span> <span class="n">v0</span> <span class="o">=</span> <span class="n">out</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_tic</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="p">[</span><span class="n">nid</span><span class="p">],</span> <span class="p">[</span><span class="n">comp</span><span class="p">],</span> <span class="n">u0</span><span class="o">=</span><span class="n">u0</span><span class="p">,</span> <span class="n">v0</span><span class="o">=</span><span class="n">v0</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;TIC&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nentries</span>
        <span class="k">return</span> <span class="n">n</span>

<span class="c1">#TIC3</span>
    <span class="k">def</span> <span class="nf">_read_tload1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;common method for reading NX/MSC TLOAD1&quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_dual_card</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_tload1_nx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_tload1_msc</span><span class="p">,</span>
                                 <span class="s1">&#39;TLOAD1&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_dload_entry</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_tload1_nx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">TLOAD1</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Record – TLOAD1(7107,71,138)</span>

<span class="sd">        Word Name Type Description</span>
<span class="sd">        1 SID     I Load set identification number</span>
<span class="sd">        2 DAREA   I DAREA Bulk Data entry identification number</span>
<span class="sd">        3 DELAYI  I DELAY Bulk Data entry identification number</span>
<span class="sd">        4 TYPE    I Nature of the dynamic excitation</span>
<span class="sd">        5 TID     I Identification number of TABLEDi entry that gives F(t)</span>
<span class="sd">        6 DELAYR RS If DELAYI = 0, constant value for delay</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">24</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 6*4</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">assert</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">nentries</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">nentries</span>

        <span class="n">dloads</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;5i f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="n">sid</span><span class="p">,</span> <span class="n">darea</span><span class="p">,</span> <span class="n">delayi</span><span class="p">,</span> <span class="n">load_type</span><span class="p">,</span> <span class="n">tid</span><span class="p">,</span> <span class="n">delayr</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;TLOAD1=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="n">delay</span> <span class="o">=</span> <span class="n">delayi</span>
            <span class="k">if</span> <span class="n">delayi</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">delay</span> <span class="o">=</span> <span class="n">delayr</span>
            <span class="n">dload</span> <span class="o">=</span> <span class="n">TLOAD1</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">darea</span><span class="p">,</span> <span class="n">tid</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="n">delay</span><span class="p">,</span> <span class="n">Type</span><span class="o">=</span><span class="n">load_type</span><span class="p">)</span>
            <span class="n">dloads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dload</span><span class="p">)</span>
            <span class="c1">#self._add_dload_entry(dload)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="c1">#self.increase_card_count(&#39;TLOAD1&#39;, nentries)</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">dloads</span>

    <span class="k">def</span> <span class="nf">_read_tload1_msc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">TLOAD1</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        TLOAD1(7107,71,138) - Record 37</span>

<span class="sd">        1 SID    I  Load set identification number</span>
<span class="sd">        2 DAREA  I  DAREA Bulk Data entry identification number</span>
<span class="sd">        3 DELAYI I  DELAY Bulk Data entry identification number</span>
<span class="sd">        4 TYPE   I  Nature of the dynamic excitation</span>
<span class="sd">        5 TID    I  Identification number of TABLEDi entry that gives F(t)</span>
<span class="sd">        6 DELAYR RS If DELAYI = 0, constant value for delay</span>
<span class="sd">        6 U0     RS Initial displacement factor for enforced motion (MSC; NX undocumented)</span>
<span class="sd">        7 V0     RS Initial velocity factor for enforced motion (MSC; NX undocumented)</span>
<span class="sd">        8 T      RS Time delay (MSC)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">32</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 8*4</span>
        <span class="c1">#self.show_data(data[n:], &#39;if&#39;)</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">assert</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">nentries</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">nentries</span>

        <span class="n">dloads</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;5i 3f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="n">sid</span><span class="p">,</span> <span class="n">darea</span><span class="p">,</span> <span class="n">delayi</span><span class="p">,</span> <span class="n">load_type</span><span class="p">,</span> <span class="n">tid</span><span class="p">,</span> <span class="n">delayr</span><span class="p">,</span> <span class="n">us0</span><span class="p">,</span> <span class="n">vs0</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;TLOAD1=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="n">delay</span> <span class="o">=</span> <span class="n">delayi</span>
            <span class="k">if</span> <span class="n">delayi</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">delay</span> <span class="o">=</span> <span class="n">delayr</span>
            <span class="n">dload</span> <span class="o">=</span> <span class="n">TLOAD1</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">darea</span><span class="p">,</span> <span class="n">tid</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="n">delay</span><span class="p">,</span> <span class="n">Type</span><span class="o">=</span><span class="n">load_type</span><span class="p">,</span>
                           <span class="n">us0</span><span class="o">=</span><span class="n">us0</span><span class="p">,</span> <span class="n">vs0</span><span class="o">=</span><span class="n">vs0</span><span class="p">)</span>
            <span class="c1">#self._add_dload_entry(dload)</span>
            <span class="n">dloads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dload</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="c1">#self.increase_card_count(&#39;TLOAD1&#39;, nentries)</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">dloads</span>

    <span class="k">def</span> <span class="nf">_read_tload2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;common method for reading NX/MSC TLOAD2&quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_dual_card</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_tload2_nx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_tload2_msc</span><span class="p">,</span>
                                 <span class="s1">&#39;TLOAD2&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_dload_entry</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_tload2_nx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">TLOAD2</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        TLOAD2(7207,72,139) - Record 37</span>

<span class="sd">        NX 2019.2</span>
<span class="sd">        1 SID      I  Load set identification number</span>
<span class="sd">        2 DAREA    I DAREA Bulk Data entry identification number</span>
<span class="sd">        3 DELAYI   I DELAY Bulk Data entry identification number</span>
<span class="sd">        4 TYPE     I Nature of the dynamic excitation</span>
<span class="sd">        5 T1      RS Time constant 1</span>
<span class="sd">        6 T2      RS Time constant 2</span>
<span class="sd">        7 F       RS Frequency</span>
<span class="sd">        8 P       RS Phase angle</span>
<span class="sd">        9 C       RS Exponential coefficient</span>
<span class="sd">        10 B      RS Growth coefficient</span>
<span class="sd">        11 DELAYR RS If DELAYI = 0, constant value for delay</span>

<span class="sd">        My guess...</span>
<span class="sd">        1 SID      I  Load set identification number</span>
<span class="sd">        2 DAREA    I DAREA Bulk Data entry identification number</span>
<span class="sd">        3 DELAYI   I DELAY Bulk Data entry identification number</span>
<span class="sd">        4 TYPE     I Nature of the dynamic excitation</span>
<span class="sd">        5 T1      RS Time constant 1</span>
<span class="sd">        6 T2      RS Time constant 2</span>
<span class="sd">        7 F       RS Frequency</span>
<span class="sd">        8 P       RS Phase angle</span>
<span class="sd">        9 C       RS Exponential coefficient</span>
<span class="sd">        10 B      RS Growth coefficient</span>
<span class="sd">        11 DELAYR RS If DELAYI = 0, constant value for delay</span>
<span class="sd">        12 US0    RS not documented in NX</span>
<span class="sd">        13 VS0    RS not documented in NX</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">44</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">assert</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">nentries</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">nentries</span>

        <span class="n">dloads</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;4i 7f&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="n">sid</span><span class="p">,</span> <span class="n">darea</span><span class="p">,</span> <span class="n">delayi</span><span class="p">,</span> <span class="n">load_type</span><span class="p">,</span> <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">freq</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">growth</span><span class="p">,</span> <span class="n">delayr</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  TLOAD2=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="n">delay</span> <span class="o">=</span> <span class="n">delayi</span>
            <span class="k">if</span> <span class="n">delayi</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">delay</span> <span class="o">=</span> <span class="n">delayr</span>
            <span class="n">dload</span> <span class="o">=</span> <span class="n">TLOAD2</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">darea</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="n">delay</span><span class="p">,</span> <span class="n">Type</span><span class="o">=</span><span class="n">load_type</span><span class="p">,</span> <span class="n">T1</span><span class="o">=</span><span class="n">t1</span><span class="p">,</span>
                           <span class="n">T2</span><span class="o">=</span><span class="n">t2</span><span class="p">,</span> <span class="n">frequency</span><span class="o">=</span><span class="n">freq</span><span class="p">,</span>
                           <span class="n">phase</span><span class="o">=</span><span class="n">p</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">growth</span><span class="p">)</span>
            <span class="n">dloads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dload</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">dloads</span>

    <span class="k">def</span> <span class="nf">_read_tload2_msc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">TLOAD2</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        TLOAD2(7207,72,139) - Record 37</span>

<span class="sd">        MSC</span>
<span class="sd">        1 SID    I Load set identification number</span>
<span class="sd">        2 DAREA  I DAREA Bulk Data entry identification number</span>
<span class="sd">        3 DELAY  I DELAY Bulk Data entry identification number</span>
<span class="sd">        4 TYPE   I Nature of the dynamic excitation</span>
<span class="sd">        5 T1    RS Time constant 1</span>
<span class="sd">        6 T2    RS Time constant 2</span>
<span class="sd">        7 F     RS Frequency</span>
<span class="sd">        8 P     RS Phase angle</span>
<span class="sd">        9 C     RS Exponential coefficient</span>
<span class="sd">        10 B    RS Growth coefficient</span>
<span class="sd">        11 U0   RS Initial displacement factor for enforced motion</span>
<span class="sd">        12 V0   RS Initial velocity factor for enforced motion</span>
<span class="sd">        13 T    RS Time delay</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">52</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">assert</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">nentries</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">nentries</span>

        <span class="n">dloads</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;4i 7f 2f&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="n">sid</span><span class="p">,</span> <span class="n">darea</span><span class="p">,</span> <span class="n">delayi</span><span class="p">,</span> <span class="n">load_type</span><span class="p">,</span> <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">freq</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">growth</span><span class="p">,</span> <span class="n">delayr</span><span class="p">,</span> <span class="n">us0</span><span class="p">,</span> <span class="n">vs0</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  TLOAD2=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="n">delay</span> <span class="o">=</span> <span class="n">delayi</span>
            <span class="k">if</span> <span class="n">delayi</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">delay</span> <span class="o">=</span> <span class="n">delayr</span>
            <span class="n">dload</span> <span class="o">=</span> <span class="n">TLOAD2</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">darea</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="n">delay</span><span class="p">,</span> <span class="n">Type</span><span class="o">=</span><span class="n">load_type</span><span class="p">,</span> <span class="n">T1</span><span class="o">=</span><span class="n">t1</span><span class="p">,</span>
                           <span class="n">T2</span><span class="o">=</span><span class="n">t2</span><span class="p">,</span> <span class="n">frequency</span><span class="o">=</span><span class="n">freq</span><span class="p">,</span>
                           <span class="n">phase</span><span class="o">=</span><span class="n">p</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">growth</span><span class="p">,</span>
                           <span class="n">us0</span><span class="o">=</span><span class="n">us0</span><span class="p">,</span> <span class="n">vs0</span><span class="o">=</span><span class="n">vs0</span><span class="p">)</span>
            <span class="n">dloads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dload</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">dloads</span>

    <span class="k">def</span> <span class="nf">_read_tstep</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;TSTEP(8307,83,142) - Record 38</span>

<span class="sd">        Word Name Type Description</span>
<span class="sd">        1 SID  I Set identification number</span>
<span class="sd">        2 N    I Number of time steps of value DTi</span>
<span class="sd">        3 DT  RS Time increment</span>
<span class="sd">        4 NO   I Skip factor for output</span>
<span class="sd">        Words 2 through 4 repeat until (-1,-1,-1) occurs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#self.show_data(data)</span>
        <span class="n">ndata</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">nfields</span> <span class="o">=</span> <span class="p">(</span><span class="n">ndata</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>
        <span class="n">datan</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:]</span>
        <span class="c1">#ints = np.frombuffer(datan, self.idtype8).copy()</span>
        <span class="c1">#floats = np.frombuffer(datan, self.fdtype8).copy()</span>
        <span class="n">ints</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="si">%i</span><span class="s1">i&#39;</span> <span class="o">%</span> <span class="n">nfields</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">),</span> <span class="n">datan</span><span class="p">)</span>
        <span class="n">floats</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="si">%i</span><span class="s1">f&#39;</span> <span class="o">%</span> <span class="n">nfields</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">),</span> <span class="n">datan</span><span class="p">)</span>
        <span class="c1"># strings = unpack(self._endian + b&#39;4s&#39;* nfields, datan)</span>

        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#nentries = 0</span>
        <span class="n">ntimes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">no</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nfields</span><span class="p">:</span>
            <span class="n">sid</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">ntimesi</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">dti</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">noi</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">3</span><span class="p">]</span>
            <span class="n">dtf</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">4</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="mi">16</span>
            <span class="k">while</span> <span class="p">(</span><span class="n">ntimesi</span><span class="p">,</span> <span class="n">dti</span><span class="p">,</span> <span class="n">noi</span><span class="p">)</span> <span class="o">!=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">ntimes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ntimesi</span><span class="p">)</span>
                <span class="n">dt</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dtf</span><span class="p">)</span>
                <span class="n">no</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">noi</span><span class="p">)</span>
                <span class="c1">#print(&#39;sid=%s ntimes=%s dt=%s no=%s&#39; % (sid, ntimes, dt, no))</span>
                <span class="n">ntimesi</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">dti</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">noi</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span>
                <span class="n">dtf</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">3</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="mi">12</span>
            <span class="c1">#print(&#39;sid=%s ntimes=%s dt=%s no=%s&#39; % (sid, ntimes, dt, no))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_tstep</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">ntimes</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">no</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_read_tstep1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Record - TSTEP1(17500,175,618)</span>

<span class="sd">        Word Name Type Description</span>
<span class="sd">        1 SID   I Set identification number</span>
<span class="sd">        2 TEND RS End time</span>
<span class="sd">        3 NINC  I Number of load increments</span>
<span class="sd">        4 NOUT  I &gt;0, output at each NOUT; =-1, YES; =-2, END;</span>
<span class="sd">        =-3, ALL</span>
<span class="sd">        Words 2 through 4 repeat until (-1,-1,-1) occurs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;skipping TSTEP1 in DYNAMICS&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;skipping TSTEP1 in DYNAMICS</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="c1">#UNBALNC</span>

    <span class="k">def</span> <span class="nf">_read_rcross</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#C:\NASA\m4\formats\git\examples\move_tpl\rcross01.op2</span>
        <span class="c1">#RCROSS  SID    RTYPE1   ID1     COMP1   RTYPE2  ID2     COMP2   CURID</span>
        <span class="c1">#RCROSS  100     FORCE   202     167     FORCE   202     167     1202001</span>
        <span class="c1">#RCROSS  100     FORCE   3302    6               3302    6       1330201</span>
        <span class="c1">#RCROSS  100     FORCE   202     167     FORCE   3302    6       1330202</span>
        <span class="c1">#RCROSS  100     FORCE   3302    6       FORCE   202     167     1330204</span>
        <span class="c1">#RCROSS  100     FORCE   6402    6               6402    6       1640201</span>
        <span class="c1">#RCROSS  100     FORCE   6412    6               6412    6       1641201</span>
        <span class="c1">#RCROSS  100     FORCE   6402    6               6412    6       1641202</span>
        <span class="c1">#RCROSS  100     FORCE   6412    6               6402    6       1641204</span>
        <span class="c1">#RCROSS  100     FORCE   6901    17              6901    17      1690101</span>
        <span class="c1">#RCROSS  100     STRESS  201     16      STRESS  201     16      2201001</span>
        <span class="c1">#RCROSS  100     STRESS  3301    7       STRESS  3301    7       2330101</span>
        <span class="c1">#RCROSS  100     STRESS  201     16      STRESS  3301    7       2330102</span>
        <span class="c1">#RCROSS  100     STRESS  3301    7       STRESS  201     16      2330104</span>
        <span class="c1">#RCROSS  100     STRESS  6401    7               6401    7       2640101</span>
        <span class="c1">#RCROSS  100     STRESS  6411    7               6411    7       2641101</span>
        <span class="c1">#RCROSS  100     STRESS  6701    86              6701    86      2670101</span>
        <span class="c1">#RCROSS  100     STRESS  7001    12              7001    12      2700101</span>
        <span class="c1">#RCROSS  100     STRESS  7401    12              7401    12      2740101</span>
        <span class="c1">#RCROSS  100     STRESS  7501    12              7501    12      2750101</span>
        <span class="c1">#RCROSS  100     STRESS  7511    12              7511    12      2751101</span>
        <span class="c1">#RCROSS  100     STRESS  9901    7               9901    7       2990101</span>
        <span class="c1">#RCROSS  100     STRESS  7511    12              9901    7       2990102</span>
        <span class="c1">#RCROSS  100     STRESS  9901    7               7511    12      2990104</span>
        <span class="c1">#RCROSS  100     FORCE   9902    6       STRESS  9901    7       2990106</span>
        <span class="c1">#RCROSS  100     STRESS  9901    7       FORCE   9902    6       2990108</span>
        <span class="c1">#RCROSS  100     DISP    3306    3       DISP    3306    3       3330601</span>
        <span class="c1">#RCROSS  100     DISP    3306    5       DISP    3306    5       3330602</span>
        <span class="c1">#RCROSS  100     DISP    6423    1               6423    1       3642301</span>
        <span class="c1">#RCROSS  100     DISP    6423    4               6423    4       3642302</span>
        <span class="c1">#RCROSS  100     DISP    3306    3       DISP    3306    5       3330603</span>
        <span class="c1">#RCROSS  100     DISP    3306    5       DISP    3306    3       3330604</span>
        <span class="c1">#RCROSS  100     DISP    3306    3               6423    4       3642303</span>
        <span class="c1">#RCROSS  100     DISP    6423    4               3306    3       3642304</span>
        <span class="c1">#RCROSS  100     SPCF    3305    3       SPCF    3305    3       4330501</span>
        <span class="c1">#RCROSS  100     SPCF    3305    5       SPCF    3305    5       4330502</span>
        <span class="c1">#RCROSS  100     SPCF    3305    3               3305    5       4330503</span>
        <span class="c1">#RCROSS  100     SPCF    3305    5               3305    3       4330504</span>
        <span class="c1">#RCROSS  100     SPCF    6413    1       SPCF    6413    1       4641301</span>
        <span class="c1">#RCROSS  100     SPCF    6413    4       SPCF    6413    4       4641302</span>
        <span class="c1">#RCROSS  100     SPCF    3305    3               6413    4       4641303</span>
        <span class="c1">#RCROSS  100     SPCF    6413    4               3305    3       4641304</span>
        <span class="c1">#RCROSS  100     SPCF    3305    3       DISP    3306    3       4641306</span>
        <span class="c1">#RCROSS  100     DISP    3306    3       SPCF    3305    3       4641308</span>
        <span class="c1">#RCROSS  200     SPCF    4444    2       DISP    9999    1       9999999</span>

        <span class="c1">#self.show_data(data[n:])</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">32</span> <span class="c1"># 4*8</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">assert</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="n">struc</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i 4s 2i 4s 2i i&#39;</span><span class="p">)</span>

        <span class="n">allowed</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;DISP&#39;</span><span class="p">,</span> <span class="s1">&#39;VELO&#39;</span><span class="p">,</span> <span class="s1">&#39;ACCEL&#39;</span><span class="p">,</span> <span class="s1">&#39;OLOAD&#39;</span><span class="p">,</span> <span class="s1">&#39;SPCF&#39;</span><span class="p">,</span> <span class="s1">&#39;MPCF&#39;</span><span class="p">,</span> <span class="s1">&#39;STRESS&#39;</span><span class="p">,</span> <span class="s1">&#39;STRAIN&#39;</span><span class="p">,</span> <span class="s1">&#39;FORCE&#39;</span><span class="p">,</span> <span class="s1">&#39;PRESS&#39;</span><span class="p">}</span>
        <span class="c1">#DISP Displacement Vector</span>
        <span class="c1">#VELO Velocity Vector</span>
        <span class="c1">#ACCEL Acceleration Vector</span>
        <span class="c1">#OLOAD Applied Load Vector</span>
        <span class="c1">#SPCF Single-point Constraint Force Vector</span>
        <span class="c1">#MPCF Multi-point Constraint Force Vector</span>
        <span class="c1">#STRESS Element Stress</span>
        <span class="c1">#STRAIN Element Strain</span>
        <span class="c1">#FORCE Element Force</span>

        <span class="n">map_type</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;DISP&#39;</span> <span class="p">:</span> <span class="s1">&#39;DISP&#39;</span><span class="p">,</span>
            <span class="s1">&#39;VELO&#39;</span> <span class="p">:</span> <span class="s1">&#39;VELO&#39;</span><span class="p">,</span>
            <span class="s1">&#39;SPCF&#39;</span> <span class="p">:</span> <span class="s1">&#39;SPCF&#39;</span><span class="p">,</span>
            <span class="s1">&#39;MPCF&#39;</span> <span class="p">:</span> <span class="s1">&#39;MPCF&#39;</span><span class="p">,</span>

            <span class="s1">&#39;ACCE&#39;</span> <span class="p">:</span> <span class="s1">&#39;ACCEL&#39;</span><span class="p">,</span>
            <span class="s1">&#39;FORC&#39;</span> <span class="p">:</span> <span class="s1">&#39;FORCE&#39;</span><span class="p">,</span>
            <span class="s1">&#39;STRE&#39;</span> <span class="p">:</span> <span class="s1">&#39;STRESS&#39;</span><span class="p">,</span>
            <span class="s1">&#39;PRES&#39;</span> <span class="p">:</span> <span class="s1">&#39;PRESS&#39;</span><span class="p">,</span>
            <span class="s1">&#39;STRA&#39;</span> <span class="p">:</span> <span class="s1">&#39;STRAIN&#39;</span><span class="p">,</span>
            <span class="s1">&#39;OLOA&#39;</span> <span class="p">:</span> <span class="s1">&#39;OLOAD&#39;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struc</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">rtype1</span><span class="p">,</span> <span class="n">id1</span><span class="p">,</span> <span class="n">comp1</span><span class="p">,</span> <span class="n">rtype2</span><span class="p">,</span> <span class="n">id2</span><span class="p">,</span> <span class="n">comp2</span><span class="p">,</span> <span class="n">curid</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  RCROSS=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>

            <span class="n">rtype1</span> <span class="o">=</span> <span class="n">map_type</span><span class="p">[</span><span class="n">rtype1</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()]</span>
            <span class="n">rtype2</span> <span class="o">=</span> <span class="n">map_type</span><span class="p">[</span><span class="n">rtype2</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()]</span>
            <span class="k">assert</span> <span class="n">rtype1</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">,</span> <span class="n">rtype1</span>
            <span class="k">assert</span> <span class="n">rtype2</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">,</span> <span class="n">rtype2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_rcross</span><span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">rtype1</span><span class="p">,</span> <span class="n">id1</span><span class="p">,</span> <span class="n">comp1</span><span class="p">,</span> <span class="n">rtype2</span><span class="p">,</span> <span class="n">id2</span><span class="p">,</span> <span class="n">comp2</span><span class="p">,</span> <span class="n">curid</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;RCROSS&#39;</span><span class="p">,</span> <span class="n">nentries</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Steven Doyle.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>