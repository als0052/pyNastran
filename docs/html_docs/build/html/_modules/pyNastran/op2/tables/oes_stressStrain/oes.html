

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>pyNastran.op2.tables.oes_stressStrain.oes &mdash; pyNastran 1.4-dev 1.4-dev documentation</title>
  

  
  <link rel="stylesheet" href="../../../../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../index.html" class="icon icon-home"> pyNastran 1.4-dev
          

          
            
            <img src="../../../../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.4-dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../quick_start/index.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../how_to/index.html">How To: pyNastran</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../reference/pyNastran.html">pyNastran Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../manual/index.html">pyNastran Manual</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">pyNastran 1.4-dev</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../../index.html">Module code</a> &raquo;</li>
        
      <li>pyNastran.op2.tables.oes_stressStrain.oes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pyNastran.op2.tables.oes_stressStrain.oes</h1><div class="highlight"><pre>
<span></span><span class="c1">#pylint: disable=C0301,W0201,R0911,R0915,R0914,C0103,W0212</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Defines the Real/Complex Stresses/Strains created by:</span>
<span class="sd">    STRESS = ALL</span>
<span class="sd">    STRAIN = ALL</span>

<span class="sd">NX Case Control  Block         Description</span>
<span class="sd">===============  ==========    ===========</span>
<span class="sd">NLSTRESS         OESNLXR       Nonlinear static stresses</span>
<span class="sd">BOUTPUT          OESNLBR       Slideline stresses</span>
<span class="sd">STRESS           OESNLXD       Nonlinear Transient Stresses</span>
<span class="sd">STRESS           OES1C/OSTR1C  Ply stresses/strains</span>
<span class="sd">STRESS           OES1X         Element stresses with intermediate (CBAR and CBEAM)</span>
<span class="sd">                               station stresses and stresses on nonlinear elements</span>
<span class="sd">STRESS           OES/OESVM     Element stresses (linear elements only)</span>
<span class="sd">STRAIN           OSTR1         Element strains</span>
<span class="sd">STRESS/STRAIN    DOES1/DOSTR1  Scaled Response Spectra</span>
<span class="sd">MODCON           OSTRMC        Modal contributions</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">struct</span> <span class="kn">import</span> <span class="n">Struct</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Any</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">fromstring</span><span class="p">,</span> <span class="n">frombuffer</span><span class="p">,</span> <span class="n">radians</span><span class="p">,</span> <span class="n">sin</span><span class="p">,</span> <span class="n">cos</span><span class="p">,</span> <span class="n">vstack</span><span class="p">,</span> <span class="n">repeat</span><span class="p">,</span> <span class="n">array</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">pyNastran.op2.op2_interface.op2_reader</span> <span class="kn">import</span> <span class="n">mapfmt</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.op2_interface.op2_common</span> <span class="kn">import</span> <span class="n">OP2Common</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.op2_interface.utils</span> <span class="kn">import</span> <span class="n">apply_mag_phase</span><span class="p">,</span> <span class="n">build_obj</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.op2_helper</span> <span class="kn">import</span> <span class="n">polar_to_real_imag</span>

<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.utils</span> <span class="kn">import</span> <span class="n">get_eid_dt_from_eid_device</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.real.oes_bars</span> <span class="kn">import</span> <span class="n">RealBarStressArray</span><span class="p">,</span> <span class="n">RealBarStrainArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.real.oes_bars100</span> <span class="kn">import</span> <span class="n">RealBar10NodesStressArray</span><span class="p">,</span> <span class="n">RealBar10NodesStrainArray</span>

<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.real.oes_beams</span> <span class="kn">import</span> <span class="p">(</span><span class="n">RealBeamStressArray</span><span class="p">,</span> <span class="n">RealBeamStrainArray</span><span class="p">,</span>
                                                                  <span class="n">RealNonlinearBeamStressArray</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.real.oes_bush</span> <span class="kn">import</span> <span class="n">RealBushStressArray</span><span class="p">,</span> <span class="n">RealBushStrainArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.real.oes_bush1d</span> <span class="kn">import</span> <span class="n">RealBush1DStressArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.real.oes_composite_plates</span> <span class="kn">import</span> <span class="n">RealCompositePlateStressArray</span><span class="p">,</span> <span class="n">RealCompositePlateStrainArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.real.oes_gap</span> <span class="kn">import</span> <span class="n">NonlinearGapStressArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.real.oes_plates</span> <span class="kn">import</span> <span class="n">RealPlateStressArray</span><span class="p">,</span> <span class="n">RealPlateStrainArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.real.oes_plate_strain</span> <span class="kn">import</span> <span class="n">RealCPLSTRNPlateStressArray</span><span class="p">,</span> <span class="n">RealCPLSTRNPlateStrainArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.real.oes_rods</span> <span class="kn">import</span> <span class="n">RealRodStressArray</span><span class="p">,</span> <span class="n">RealRodStrainArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.real.oes_shear</span> <span class="kn">import</span> <span class="n">RealShearStrainArray</span><span class="p">,</span> <span class="n">RealShearStressArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.real.oes_solids</span> <span class="kn">import</span> <span class="n">RealSolidStrainArray</span><span class="p">,</span> <span class="n">RealSolidStressArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.real.oes_springs</span> <span class="kn">import</span> <span class="p">(</span><span class="n">RealSpringStressArray</span><span class="p">,</span> <span class="n">RealSpringStrainArray</span><span class="p">,</span>
                                                                    <span class="n">RealNonlinearSpringStressArray</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.real.oes_triax</span> <span class="kn">import</span> <span class="n">RealTriaxStressArray</span><span class="p">,</span> <span class="n">RealTriaxStrainArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.real.oes_bend</span> <span class="kn">import</span> <span class="n">RealBendStressArray</span><span class="p">,</span> <span class="n">RealBendStrainArray</span>


<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.complex.oes_bars</span> <span class="kn">import</span> <span class="n">ComplexBarStressArray</span><span class="p">,</span> <span class="n">ComplexBarStrainArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.complex.oes_beams</span> <span class="kn">import</span> <span class="n">ComplexBeamStressArray</span><span class="p">,</span> <span class="n">ComplexBeamStrainArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.complex.oes_bush</span> <span class="kn">import</span> <span class="p">(</span><span class="n">ComplexCBushStressArray</span><span class="p">,</span> <span class="n">ComplexCBushStrainArray</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.complex.oes_bush1d</span> <span class="kn">import</span> <span class="n">ComplexCBush1DStressArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.complex.oes_plates</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">ComplexPlateStressArray</span><span class="p">,</span> <span class="n">ComplexPlateStrainArray</span><span class="p">,</span> <span class="n">ComplexTriaxStressArray</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.complex.oes_rods</span> <span class="kn">import</span> <span class="n">ComplexRodStressArray</span><span class="p">,</span> <span class="n">ComplexRodStrainArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.complex.oes_shear</span> <span class="kn">import</span> <span class="n">ComplexShearStressArray</span><span class="p">,</span> <span class="n">ComplexShearStrainArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.complex.oes_solids</span> <span class="kn">import</span> <span class="n">ComplexSolidStressArray</span><span class="p">,</span> <span class="n">ComplexSolidStrainArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.complex.oes_springs</span> <span class="kn">import</span> <span class="n">ComplexSpringStressArray</span><span class="p">,</span> <span class="n">ComplexSpringStrainArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.complex.oes_bend</span> <span class="kn">import</span> <span class="n">ComplexBendStressArray</span><span class="p">,</span> <span class="n">ComplexBendStrainArray</span>

<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.random.oes_rods</span> <span class="kn">import</span> <span class="n">RandomRodStressArray</span><span class="p">,</span> <span class="n">RandomRodStrainArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.random.oes_bars</span> <span class="kn">import</span> <span class="n">RandomBarStressArray</span><span class="p">,</span> <span class="n">RandomBarStrainArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.random.oes_beams</span> <span class="kn">import</span> <span class="n">RandomBeamStressArray</span><span class="p">,</span> <span class="n">RandomBeamStrainArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.random.oes_bend</span> <span class="kn">import</span> <span class="n">RandomBendStressArray</span><span class="p">,</span> <span class="n">RandomBendStrainArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.random.oes_plates</span> <span class="kn">import</span> <span class="n">RandomPlateStressArray</span><span class="p">,</span> <span class="n">RandomPlateStrainArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.random.oes_solids</span> <span class="kn">import</span> <span class="n">RandomSolidStressArray</span><span class="p">,</span> <span class="n">RandomSolidStrainArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.random.oes_shear</span> <span class="kn">import</span> <span class="n">RandomShearStressArray</span><span class="p">,</span> <span class="n">RandomShearStrainArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.random.oes_composite_plates</span> <span class="kn">import</span> <span class="n">RandomCompositePlateStressArray</span><span class="p">,</span> <span class="n">RandomCompositePlateStrainArray</span>

<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.oes_nonlinear_rod</span> <span class="kn">import</span> <span class="n">RealNonlinearRodArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.oes_nonlinear_bush</span> <span class="kn">import</span> <span class="n">RealNonlinearBushArray</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.oes_hyperelastic</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">HyperelasticQuadArray</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oes_stressStrain.oes_nonlinear</span> <span class="kn">import</span> <span class="n">RealNonlinearPlateArray</span><span class="p">,</span> <span class="n">RealNonlinearSolidArray</span>


<div class="viewcode-block" id="OES"><a class="viewcode-back" href="../../../../../reference/op2/tables/oes_stress_strain/pyNastran.op2.tables.oes_stress_strain.oes.html#pyNastran.op2.tables.oes_stressStrain.oes.OES">[docs]</a><span class="k">class</span> <span class="nc">OES</span><span class="p">(</span><span class="n">OP2Common</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Defines  the OES class that is used to read stress/strain data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">OP2Common</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">_read_oes1_3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">unused_ndata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads OES1 subtable 3</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">words</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;aCode&#39;</span><span class="p">,</span> <span class="s1">&#39;tCode&#39;</span><span class="p">,</span> <span class="s1">&#39;element_type&#39;</span><span class="p">,</span> <span class="s1">&#39;isubcase&#39;</span><span class="p">,</span>
            <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;load_set&#39;</span>
            <span class="s1">&#39;format_code&#39;</span><span class="p">,</span> <span class="s1">&#39;num_wide&#39;</span><span class="p">,</span> <span class="s1">&#39;s_code&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span>
            <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span>
            <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span>
            <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span>
            <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;Title&#39;</span><span class="p">,</span> <span class="s1">&#39;subtitle&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parse_approach_code</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>  <span class="c1"># 3</span>

        <span class="c1">## element type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;element_type&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1">## load set ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_set</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;load_set&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1">## format code</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;format_code&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1">## number of words per entry in record</span>
        <span class="c1">## .. note:: is this needed for this table ???</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;num_wide&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1">## stress/strain codes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">s_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;s_code&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1">## thermal flag; 1 for heat ransfer, 0 otherwise</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;thermal&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1">## assuming tCode=1</span>
        <span class="n">analysis_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span>
        <span class="k">if</span> <span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>   <span class="c1"># statics / displacement / heat flux</span>
            <span class="c1">## load set number</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lsdvmn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;lsdvmn&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;lsdvmn&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setNullNonlinearFactor</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>  <span class="c1"># real eigenvalues</span>
            <span class="c1">#: mode number</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
            <span class="c1">#: eigenvalue</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">eign</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;eign&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="c1">#: mode or cycle TODO confused on the type - F1 means float/int???</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mode2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;mode2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;cycle&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_mode_cycle</span><span class="p">(</span><span class="s1">&#39;cycle&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="s1">&#39;eign&#39;</span><span class="p">,</span> <span class="s1">&#39;mode2&#39;</span><span class="p">,</span> <span class="s1">&#39;cycle&#39;</span><span class="p">])</span>
        <span class="c1">#elif analysis_code == 3: # differential stiffness</span>
            <span class="c1">#self.lsdvmn = self.get_values(data,&#39;i&#39;,5) ## load set number</span>
            <span class="c1">#self.data_code[&#39;lsdvmn&#39;] = self.lsdvmn</span>
        <span class="c1">#elif analysis_code == 4: # differential stiffness</span>
        <span class="c1">#    self.lsdvmn = self.get_values(data,&#39;i&#39;,5) ## load set number</span>
        <span class="k">elif</span> <span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>   <span class="c1"># frequency</span>
            <span class="c1">## frequency</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">freq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;freq&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;freq&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>  <span class="c1"># transient</span>
            <span class="c1">## time step</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;dt&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>  <span class="c1"># pre-buckling</span>
            <span class="c1">## load set</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lsdvmn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;lsdvmn&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;lsdvmn&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>  <span class="c1"># post-buckling</span>
            <span class="c1">## mode number</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lsdvmn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;lsdvmn&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">eigr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;eigr&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>  <span class="c1"># real eigenvalue</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;lsdvmn&#39;</span><span class="p">,</span> <span class="s1">&#39;eigr&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span>  <span class="c1"># complex eigenvalues</span>
            <span class="c1">## mode number</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
            <span class="c1">## real eigenvalue</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">eigr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;eigr&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="c1">## imaginary eigenvalue</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">eigi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;eigi&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="s1">&#39;eigr&#39;</span><span class="p">,</span> <span class="s1">&#39;eigi&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>  <span class="c1"># nonlinear statics</span>
            <span class="c1">## load step</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lftsfq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;lftsfq&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;lftsfq&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span>  <span class="c1"># old geometric nonlinear statics</span>
            <span class="c1">## load set number</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lsdvmn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;lsdvmn&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;lsdvmn&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">12</span><span class="p">:</span>  <span class="c1"># contran ? (may appear as aCode=6)  --&gt; straight from DMAP...grrr...</span>
            <span class="c1">## Time step ??? --&gt; straight from DMAP</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;dt&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;invalid analysis_code...analysis_code=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="c1"># tcode=2</span>
        <span class="c1">#if self.analysis_code==2: # sort2</span>
        <span class="c1">#    self.lsdvmn = self.get_values(data,&#39;i&#39;,5)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fix_format_code</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_oes_prefix_postfix</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parse_thermal_code</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_element_name</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  element_name   = </span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  approach_code  = </span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">approach_code</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  tCode          = </span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">tCode</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  isubcase       = </span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">isubcase</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_read_title</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>


        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_mapper</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="k">raise</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
        <span class="c1">#if self.element_type not in self.element_mapper:</span>
            <span class="c1">#return self._not_implemented_or_skip(data, ndata, self.code_information())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_parse_stress_code_to_stress_bits</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_write_debug_bits</span><span class="p">()</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">format_code</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span>
        <span class="c1">#print(&#39;self.nonlinear_factor =&#39;, self.nonlinear_factor)</span>
        <span class="c1">#assert self.num_wide != 146, self.code_information()</span>

    <span class="k">def</span> <span class="nf">_set_element_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_mapper</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="k">raise</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;element_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span>

    <span class="k">def</span> <span class="nf">_parse_stress_code_to_stress_bits</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        s_code =  0 -&gt; stress_bits = [0,0,0,0,0]</span>
<span class="sd">        s_code =  1 -&gt; stress_bits = [0,0,0,0,1]</span>
<span class="sd">        s_code =  2 -&gt; stress_bits = [0,0,0,1,0]</span>
<span class="sd">        s_code =  3 -&gt; stress_bits = [0,0,0,1,1]</span>
<span class="sd">        etc.</span>
<span class="sd">        s_code = 32 -&gt; stress_bits = [1,1,1,1,1]</span>

<span class="sd">        stress_bits[0] = 0 -&gt; is_max_shear=True       isVonMises=False</span>
<span class="sd">        stress_bits[0] = 1 -&gt; is_max_shear=False      isVonMises=True</span>

<span class="sd">        stress_bits[1] = 0 -&gt; is_stress=True        is_strain=False</span>
<span class="sd">        stress_bits[2] = 0 -&gt; isFiberCurvature=True isFiberDistance=False</span>
<span class="sd">        stress_bits[3] = 0 -&gt; duplicate of Bit[1] (stress/strain)</span>
<span class="sd">        stress_bits[4] = 0 -&gt; material coordinate system flag</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">bits</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

        <span class="n">s_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s_code</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="k">while</span> <span class="n">s_code</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">s_code</span> <span class="o">%</span> <span class="mi">2</span>
            <span class="n">s_code</span> <span class="o">=</span> <span class="p">(</span><span class="n">s_code</span> <span class="o">-</span> <span class="n">value</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
            <span class="n">bits</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="n">i</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stress_bits</span> <span class="o">=</span> <span class="n">bits</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;stress_bits&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stress_bits</span>

    <span class="k">def</span> <span class="nf">_read_oes2_4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reads the Stress Table 4</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#assert self.isubtable == -4, self.isubtable</span>
        <span class="c1">#if self.is_debug_file:</span>
            <span class="c1">#self.binary_debug.write(&#39;  element_name = %r\n&#39; % self.element_name)</span>
        <span class="c1">#print &quot;element_name =&quot;, self.element_name</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">format_code</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;is_stress_flag&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;is_strain_flag&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_setup_op2_subcase</span><span class="p">(</span><span class="s1">&#39;STRESS/STRAIN&#39;</span><span class="p">)</span>
        <span class="n">elements_to_read</span> <span class="o">=</span> <span class="p">[</span>
            <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="c1"># CROD, CTUBE, CTUBE</span>
            <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="c1"># CELAS1, CELAS2, CELAS3,</span>
            <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">74</span><span class="p">,</span> <span class="c1"># CBEAM, CSHEAR, CBAR, CQUAD4, CTRIA3,</span>
            <span class="mi">75</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">82</span><span class="p">,</span> <span class="mi">144</span><span class="p">,</span> <span class="c1"># CTRIA6, CQUAD8, CTRIAR, CQUADR, CQUAD4</span>
            <span class="mi">69</span><span class="p">,</span> <span class="c1"># CBEND</span>
            <span class="mi">67</span><span class="p">,</span> <span class="mi">68</span><span class="p">,</span> <span class="mi">95</span><span class="p">,</span> <span class="mi">102</span><span class="p">,</span> <span class="c1">#  #CHEXA, CPENTA, QUAD4-comp, CBUSH</span>
            <span class="mi">39</span><span class="p">,</span> <span class="c1">#CTETRA</span>
            <span class="mi">86</span><span class="p">,</span> <span class="c1"># GAPNL</span>
            <span class="mi">88</span><span class="p">,</span> <span class="c1"># TRIA3-nonlinear</span>
            <span class="mi">89</span><span class="p">,</span> <span class="c1"># ROD-nonlinear</span>
            <span class="mi">90</span><span class="p">,</span> <span class="c1"># QUAD4-nonlinear</span>
            <span class="mi">91</span><span class="p">,</span> <span class="c1"># PENTANL</span>
            <span class="mi">93</span><span class="p">,</span> <span class="c1"># HEXANL</span>
            <span class="mi">97</span><span class="p">,</span> <span class="c1"># CTRIA3-C</span>
            <span class="mi">96</span><span class="p">,</span> <span class="c1"># QUAD8-nonlinear</span>
            <span class="mi">98</span><span class="p">,</span> <span class="c1"># TRIA6-nonlinear</span>
            <span class="mi">100</span><span class="p">,</span> <span class="c1"># CBAR-100</span>
            <span class="mi">228</span><span class="p">,</span> <span class="c1"># CQUADR</span>
            <span class="mi">232</span><span class="p">,</span> <span class="c1"># CQUADR-composite</span>
            <span class="mi">243</span><span class="p">,</span> <span class="c1"># CQUADX4</span>
            <span class="mi">189</span><span class="p">,</span> <span class="c1"># VUQUAD</span>
            <span class="mi">190</span><span class="p">,</span> <span class="c1"># VUTRIA</span>
            <span class="mi">191</span><span class="p">,</span> <span class="c1"># VUBEAM</span>
            <span class="mi">256</span><span class="p">,</span> <span class="c1"># CPYRAM</span>
            <span class="mi">227</span><span class="p">,</span> <span class="c1"># CTRIAR</span>
            <span class="mi">275</span><span class="p">,</span> <span class="c1"># CPLSTS3</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="n">elements_to_read</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_oes_4_sort</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_oes1_4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reads the Stress Table 4</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#assert self.isubtable == -4, self.isubtable</span>
        <span class="c1">#if self.is_debug_file:</span>
            <span class="c1">#self.binary_debug.write(&#39;  element_name = %r\n&#39; % self.element_name)</span>
        <span class="c1">#print &quot;element_name =&quot;, self.element_name</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">format_code</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;is_stress_flag&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;is_strain_flag&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_setup_op2_subcase</span><span class="p">(</span><span class="s1">&#39;STRESS/STRAIN&#39;</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_oes_4_sort</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_oes2_3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">unused_ndata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads OES1 subtable 3</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">words</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;aCode&#39;</span><span class="p">,</span> <span class="s1">&#39;tCode&#39;</span><span class="p">,</span> <span class="s1">&#39;element_type&#39;</span><span class="p">,</span> <span class="s1">&#39;isubcase&#39;</span><span class="p">,</span>
            <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;load_set&#39;</span>
            <span class="s1">&#39;format_code&#39;</span><span class="p">,</span> <span class="s1">&#39;num_wide&#39;</span><span class="p">,</span> <span class="s1">&#39;s_code&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span>
            <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span>
            <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span>
            <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span>
            <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;Title&#39;</span><span class="p">,</span> <span class="s1">&#39;subtitle&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parse_approach_code</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>  <span class="c1"># 3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="c1">## element type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;element_type&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1">## load set ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_set</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;load_set&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1">## format code</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;format_code&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1">## number of words per entry in record</span>
        <span class="c1">## .. note:: is this needed for this table ???</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;num_wide&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1">## stress/strain codes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">s_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;s_code&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1">## thermal flag; 1 for heat ransfer, 0 otherwise</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;thermal&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;element_id&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">fix_device_code</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_element_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;_element_id&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">apply_nonlinear_factor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">add_to_dict</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># static...because reasons.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>  <span class="c1"># real eigenvalues</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">eign</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;eign&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mode_cycle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;mode_cycle&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>  <span class="c1"># mode or cycle .. todo:: confused on the type - F1???</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">,</span> <span class="s1">&#39;eign&#39;</span><span class="p">,</span> <span class="s1">&#39;mode_cycle&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>   <span class="c1"># frequency</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;analysis_method&#39;</span><span class="p">,</span> <span class="s1">&#39;freq&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>  <span class="c1"># transient</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;analysis_method&#39;</span><span class="p">,</span> <span class="s1">&#39;dt&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>  <span class="c1"># pre-buckling</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;analysis_method&#39;</span><span class="p">,</span> <span class="s1">&#39;lsdvmn&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>  <span class="c1"># post-buckling</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">eigr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;eigr&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">,</span> <span class="s1">&#39;eigr&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;analysis_method&#39;</span><span class="p">,</span> <span class="s1">&#39;eigr&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span>  <span class="c1"># complex eigenvalues</span>
            <span class="c1"># mode number</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">eigr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;eigr&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">eigi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;eigi&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">,</span> <span class="s1">&#39;eigr&#39;</span><span class="p">,</span> <span class="s1">&#39;eigi&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;analysis_method&#39;</span><span class="p">,</span> <span class="s1">&#39;mode&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>  <span class="c1"># nonlinear statics</span>
            <span class="c1"># load step</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;analysis_method&#39;</span><span class="p">,</span> <span class="s1">&#39;lftsfq&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span>  <span class="c1"># old geometric nonlinear statics</span>
            <span class="c1"># load set number</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">12</span><span class="p">:</span>  <span class="c1"># contran ? (may appear as aCode=6)  --&gt; straight from DMAP...grrr...</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;invalid analysis_code...analysis_code=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_parse_stress_code_to_stress_bits</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fix_oes_sort2</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_element_name</span><span class="p">()</span>
        <span class="c1">#assert isinstance(self.nonlinear_factor, int), self.nonlinear_factor</span>

        <span class="c1">#def get_format_code(is_sort2, is_complex, is_random):</span>
            <span class="c1">#format_code = 0</span>
            <span class="c1">#if is_complex:</span>
                <span class="c1">#format_code += 1</span>
            <span class="c1">#if is_sort2:</span>
                <span class="c1">#format_code += 2</span>
            <span class="c1">#if is_random:</span>
                <span class="c1">#format_code += 4</span>
            <span class="c1">#if format_code &gt; 5:</span>
                <span class="c1">#format_code = 5</span>
            <span class="c1">##print(&#39;is_complex =&#39;, is_complex)</span>
            <span class="c1">##print(&#39;is_sort2 =&#39;, is_sort2)</span>
            <span class="c1">##print(&#39;is_random =&#39;, is_random)</span>
            <span class="c1">##print(&#39;format_code =&#39;, format_code)</span>
            <span class="c1">#return format_code</span>

        <span class="c1">#is_sort2 = True</span>
        <span class="c1">#is_complex = False</span>
        <span class="c1">#is_random = True</span>
        <span class="c1">#format_code = get_format_code(is_sort2, is_complex, is_random)</span>
        <span class="c1">#self.format_code = format_code</span>
        <span class="c1">#self.data_code[&#39;format_code&#39;] = format_code</span>


    <span class="k">def</span> <span class="nf">_fix_oes_sort2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fix_format_code</span><span class="p">()</span>
        <span class="c1">#print(&#39;self.format_code_original =&#39;, self.format_code_original)</span>
        <span class="c1">#print(&#39;self.format_code =&#39;, self.format_code)</span>
            <span class="c1">#self.fix_format_code()</span>
            <span class="c1">#if self.format_code == 1:</span>
                <span class="c1">#self.format_code = 2</span>
                <span class="c1">#self.data_code[&#39;format_code&#39;] = 2</span>
            <span class="c1">#assert self.format_code in [2, 3], self.code_information()</span>

        <span class="k">if</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fix_format_code</span><span class="p">()</span>
            <span class="c1">#if self.num_wide == 8:</span>
                <span class="c1">#self.format_code = 1</span>
                <span class="c1">#self.data_code[&#39;format_code&#39;] = 1</span>
            <span class="c1">#else:</span>
                <span class="c1">##self.fix_format_code()</span>
                <span class="c1">#if self.format_code == 1:</span>
                    <span class="c1">#self.format_code = 2</span>
                    <span class="c1">#self.data_code[&#39;format_code&#39;] = 2</span>
                <span class="c1">#assert self.format_code in [2, 3], self.code_information()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_parse_thermal_code</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  </span><span class="si">%-14s</span><span class="s1"> = </span><span class="si">%r</span><span class="s1"> </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;approach_code&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">approach_code</span><span class="p">,</span>
                                                           <span class="bp">self</span><span class="o">.</span><span class="n">approach_code_str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">approach_code</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  </span><span class="si">%-14s</span><span class="s1"> = </span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;tCode&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tCode</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  </span><span class="si">%-14s</span><span class="s1"> = </span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;isubcase&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">isubcase</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_read_title</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_write_debug_bits</span><span class="p">()</span>
        <span class="c1">#assert isinstance(self.nonlinear_factor, int), self.nonlinear_factor</span>

    <span class="k">def</span> <span class="nf">_read_ostr1_4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reads the Strain Table 4</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#assert self.isubtable == -4, self.isubtable</span>
        <span class="c1">#if self.is_debug_file:</span>
            <span class="c1">#self.binary_debug.write(&#39;  element_name = %r\n&#39; % self.element_name)</span>
        <span class="c1">#print &quot;element_name =&quot;, self.element_name</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_strain</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;is_stress_flag&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;is_strain_flag&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_setup_op2_subcase</span><span class="p">(</span><span class="s1">&#39;STRESS/STRAIN&#39;</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_ostr_4_sort</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_ostr2_4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reads the Strain Table 4</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#assert self.isubtable == -4, self.isubtable</span>
        <span class="c1">#if self.is_debug_file:</span>
            <span class="c1">#self.binary_debug.write(&#39;  element_name = %r\n&#39; % self.element_name)</span>
        <span class="c1">#print(&quot;element_name =&quot;, self.element_name)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_strain</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;is_stress_flag&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;is_strain_flag&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_setup_op2_subcase</span><span class="p">(</span><span class="s1">&#39;STRESS/STRAIN&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="c1"># CROD, CTUBE, CTUBE</span>
                                 <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="c1"># CELAS1, CELAS2, CELAS3,</span>
                                 <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">74</span><span class="p">,</span> <span class="c1"># CBEAM, CSHEAR, CBAR, CQUAD4, CTRIA3,</span>
                                 <span class="mi">75</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">82</span><span class="p">,</span> <span class="mi">144</span><span class="p">,</span> <span class="c1"># CTRIA6, CQUAD8, CTRIAR, CQUADR, CQUAD4</span>
                                 <span class="mi">69</span><span class="p">,</span> <span class="c1"># CBEND</span>
                                 <span class="mi">67</span><span class="p">,</span> <span class="mi">68</span><span class="p">,</span> <span class="mi">95</span><span class="p">,</span> <span class="mi">102</span><span class="p">,</span><span class="c1">#CHEXA, CPENTA, QUAD4-comp, CBUSH</span>
                                 <span class="mi">96</span><span class="p">,</span> <span class="c1"># QUAD8-nonlinear</span>
                                 <span class="mi">98</span><span class="p">,</span> <span class="c1"># TRIA6-nonlinear</span>
                                 <span class="mi">39</span><span class="p">,</span> <span class="c1">#CTETRA</span>
                                 <span class="mi">228</span><span class="p">,</span> <span class="c1">#CQUADR</span>
                                 <span class="mi">232</span><span class="p">,</span> <span class="c1">#CQUADR-composite</span>
                                 <span class="mi">233</span><span class="p">,</span> <span class="c1">#CTRIAR-composite</span>
                                 <span class="mi">97</span><span class="p">]:</span>  <span class="c1"># CTRIA3-C</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_ostr_4_sort</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="c1">#def _autojit3(func):</span>
        <span class="c1">#&quot;&quot;&quot;</span>
        <span class="c1">#Debugging function to print the object name and an needed parameters</span>
        <span class="c1">#&quot;&quot;&quot;</span>
        <span class="c1">#def new_func(self, data):</span>
            <span class="c1">#&quot;&quot;&quot;</span>
            <span class="c1">#The actual function exec&#39;d by the decorated function.</span>
            <span class="c1">#&quot;&quot;&quot;</span>
            <span class="c1">#n = func(self, data)</span>
            <span class="c1">#return n</span>
        <span class="c1">#return new_func</span>

    <span class="k">def</span> <span class="nf">_print_obj_name_on_crash</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Debugging function to print the object name and an needed parameters&quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">new_func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;The actual function exec&#39;d by the decorated function.&quot;&quot;&quot;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">NameError</span><span class="p">:</span>
                <span class="k">raise</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">raise</span>
            <span class="c1">#except:</span>
                <span class="c1">#raise</span>
                <span class="c1">#print(&quot;----------&quot;)</span>
                <span class="c1">#print(self.obj)</span>
                <span class="c1">#print(self.data_code)</span>
                <span class="c1">#if self.obj is not None:</span>
                    <span class="c1">##from pyNastran.utils import object_attributes</span>
                    <span class="c1">##print object_attributes(self.obj)</span>
                    <span class="c1">#print(self.obj.data_code)</span>
                <span class="c1">#print(&quot;----------&quot;)</span>
                <span class="c1">#raise</span>
            <span class="k">return</span> <span class="n">n</span>
        <span class="k">return</span> <span class="n">new_func</span>

    <span class="c1">#@_print_obj_name_on_crash</span>
    <span class="k">def</span> <span class="nf">_read_oes_4_sort</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reads OES1 subtable 4 for NX/MSC/Autodesk/Optistruct&quot;&quot;&quot;</span>
        <span class="c1">#if self.num_wide == 146:</span>
            <span class="c1">#assert self.num_wide != 146</span>
            <span class="c1">#assert ndata != 146, self.code_information()</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">format_code</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_oes1_loads</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_oes1_thermal</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;thermal=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="c1">#@_print_obj_name_on_crash</span>
    <span class="k">def</span> <span class="nf">_read_ostr_4_sort</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reads OSTR1 subtable 4</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#if self.num_wide == 146:</span>
            <span class="c1">#assert self.num_wide != 146</span>
            <span class="c1">#assert ndata != 146, self.code_information()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_oes1_loads</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_oes1_thermal</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;thermal=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_oes1_thermal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unused_data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reads OES self.thermal=1 tables; uses a hackish method to just skip the table</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ndata</span>

    <span class="k">def</span> <span class="nf">_read_ostr1_thermal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unused_data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reads OSTR self.thermal=1 tables; uses a hackish method to just skip the table</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ndata</span>

<div class="viewcode-block" id="OES.get_stress_mapper"><a class="viewcode-back" href="../../../../../reference/op2/tables/oes_stress_strain/pyNastran.op2.tables.oes_stress_strain.oes.html#pyNastran.op2.tables.oes_stressStrain.oes.OES.get_stress_mapper">[docs]</a>    <span class="k">def</span> <span class="nf">get_stress_mapper</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">stress_mapper</span> <span class="o">=</span> <span class="p">{</span>
            <span class="c1"># element_type, format_code, num_wide</span>

            <span class="c1"># rods</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;crod_stress&#39;</span><span class="p">,</span> <span class="n">RealRodStressArray</span><span class="p">),</span> <span class="c1"># real</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;crod_stress&#39;</span><span class="p">,</span> <span class="n">RealRodStressArray</span><span class="p">),</span> <span class="c1"># real</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;crod_stress&#39;</span><span class="p">,</span> <span class="n">RealRodStressArray</span><span class="p">),</span> <span class="c1"># real</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;crod_stress&#39;</span><span class="p">,</span> <span class="n">ComplexRodStressArray</span><span class="p">),</span> <span class="c1"># real/imag</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;crod_stress&#39;</span><span class="p">,</span> <span class="n">ComplexRodStressArray</span><span class="p">),</span> <span class="c1"># mag/phase</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;crod_stress&#39;</span><span class="p">,</span> <span class="n">ComplexRodStressArray</span><span class="p">),</span> <span class="c1"># real/imag</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;crod_stress&#39;</span><span class="p">,</span> <span class="n">ComplexRodStressArray</span><span class="p">),</span> <span class="c1"># mag/phase</span>

            <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctube_stress&#39;</span><span class="p">,</span> <span class="n">RealRodStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctube_stress&#39;</span><span class="p">,</span> <span class="n">RealRodStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctube_stress&#39;</span><span class="p">,</span> <span class="n">ComplexRodStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctube_stress&#39;</span><span class="p">,</span> <span class="n">ComplexRodStressArray</span><span class="p">),</span>  <span class="c1"># freq nx</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctube_stress&#39;</span><span class="p">,</span> <span class="n">ComplexRodStressArray</span><span class="p">),</span>  <span class="c1"># freq nx</span>

            <span class="c1">#(3, 3, 5) : (&#39;ctube_stress&#39;, ComplexRodStressArray),</span>

            <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;conrod_stress&#39;</span><span class="p">,</span> <span class="n">RealRodStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;conrod_stress&#39;</span><span class="p">,</span> <span class="n">RealRodStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;conrod_stress&#39;</span><span class="p">,</span> <span class="n">ComplexRodStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;conrod_stress&#39;</span><span class="p">,</span> <span class="n">RealRodStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;conrod_stress&#39;</span><span class="p">,</span> <span class="n">ComplexRodStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;conrod_stress&#39;</span><span class="p">,</span> <span class="n">ComplexRodStressArray</span><span class="p">),</span>
            <span class="c1">#(10, 2, 5) : (&#39;conrod_stress&#39;, ComplexRodStressArray),</span>
            <span class="c1">#(10, 3, 5) : (&#39;conrod_stress&#39;, ComplexRodStressArray),</span>

            <span class="c1"># beams</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbeam_stress&#39;</span><span class="p">,</span> <span class="n">RealBeamStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbeam_stress&#39;</span><span class="p">,</span> <span class="n">RealBeamStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbeam_stress&#39;</span><span class="p">,</span> <span class="n">RealBeamStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbeam_stress&#39;</span><span class="p">,</span> <span class="n">ComplexBeamStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbeam_stress&#39;</span><span class="p">,</span> <span class="n">ComplexBeamStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbeam_stress&#39;</span><span class="p">,</span> <span class="n">ComplexBeamStressArray</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cshear_stress&#39;</span><span class="p">,</span> <span class="n">RealShearStressArray</span><span class="p">),</span>
            <span class="c1">#(4, 2, 5) : (&#39;cshear_stress&#39;, ComplexShearStressArray),</span>
            <span class="c1">#(4, 3, 5) : (&#39;cshear_stress&#39;, ComplexShearStressArray),</span>
            <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cshear_stress&#39;</span><span class="p">,</span> <span class="n">ComplexShearStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cshear_stress&#39;</span><span class="p">,</span> <span class="n">ComplexShearStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cshear_stress&#39;</span><span class="p">,</span> <span class="n">ComplexShearStressArray</span><span class="p">),</span>
            <span class="c1">#(4, 3, 3) : (&#39;cshear_stress&#39;, RandomShearStressArray),</span>

            <span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;celas1_stress&#39;</span><span class="p">,</span> <span class="n">RealSpringStressArray</span><span class="p">),</span> <span class="c1"># real</span>
            <span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;celas1_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSpringStressArray</span><span class="p">),</span> <span class="c1"># real/imag</span>
            <span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;celas1_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSpringStressArray</span><span class="p">),</span> <span class="c1"># mag/phase</span>
            <span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;celas1_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSpringStressArray</span><span class="p">),</span> <span class="c1"># mag/phase</span>
            <span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;celas1_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSpringStressArray</span><span class="p">),</span> <span class="c1"># mag/phase</span>

            <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;celas2_stress&#39;</span><span class="p">,</span> <span class="n">RealSpringStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;celas2_stress&#39;</span><span class="p">,</span> <span class="n">RealSpringStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;celas2_stress&#39;</span><span class="p">,</span> <span class="n">RealSpringStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;celas2_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSpringStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;celas2_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSpringStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;celas2_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSpringStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;celas2_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSpringStressArray</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;celas3_stress&#39;</span><span class="p">,</span> <span class="n">RealSpringStressArray</span><span class="p">),</span>
            <span class="c1">#(13, 2, 3) : (&#39;celas3_stress&#39;, ComplexSpringStressArray),</span>
            <span class="c1">#(13, 3, 3) : (&#39;celas3_stress&#39;, ComplexSpringStressArray),</span>
            <span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;celas3_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSpringStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;celas3_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSpringStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;celas3_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSpringStressArray</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;celas4_stress&#39;</span><span class="p">,</span> <span class="n">RealSpringStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;celas4_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSpringStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;celas4_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSpringStressArray</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbar_stress&#39;</span><span class="p">,</span> <span class="n">RealBarStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbar_stress&#39;</span><span class="p">,</span> <span class="n">RealBarStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbar_stress&#39;</span><span class="p">,</span> <span class="n">RealBarStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbar_stress&#39;</span><span class="p">,</span> <span class="n">ComplexBarStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNO1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbar_stress&#39;</span><span class="p">,</span> <span class="n">ComplexBarStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESXRMS1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbar_stress&#39;</span><span class="p">,</span> <span class="n">ComplexBarStressArray</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESRMS2&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbar_stress&#39;</span><span class="p">,</span> <span class="n">RandomBarStressArray</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESPSD2&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbar_stress&#39;</span><span class="p">,</span> <span class="n">RandomBarStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESRMS2&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbar_stress&#39;</span><span class="p">,</span> <span class="n">RandomBarStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNO2&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbar_stress&#39;</span><span class="p">,</span> <span class="n">RandomBarStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESATO2&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbar_stress&#39;</span><span class="p">,</span> <span class="n">RandomBarStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESCRM2&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbar_stress&#39;</span><span class="p">,</span> <span class="n">RandomBarStressArray</span><span class="p">),</span>

            <span class="c1"># Missing stress_mapper key for OES1 table #501</span>
            <span class="c1"># see cbarao_random_x_mini.op2 for an example with OES1 and OES1X...</span>
            <span class="c1"># it looks to be an error in MSC [2008-2012)</span>
            <span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbar_stress&#39;</span><span class="p">,</span> <span class="n">ComplexBarStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbar_stress&#39;</span><span class="p">,</span> <span class="n">ComplexBarStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbar_stress&#39;</span><span class="p">,</span> <span class="n">ComplexBarStressArray</span><span class="p">),</span>
            <span class="c1">#(34, 1, 19) : (&#39;cbar_stress&#39;, RandomBarStressArray),</span>
            <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbar_stress_10nodes&#39;</span><span class="p">,</span> <span class="n">RealBar10NodesStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbar_stress_10nodes&#39;</span><span class="p">,</span> <span class="n">RealBar10NodesStressArray</span><span class="p">),</span>

            <span class="c1"># solids</span>
            <span class="p">(</span><span class="mi">39</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">109</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctetra_stress&#39;</span><span class="p">,</span> <span class="n">RealSolidStressArray</span><span class="p">),</span> <span class="c1"># real</span>
            <span class="p">(</span><span class="mi">39</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">109</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctetra_stress&#39;</span><span class="p">,</span> <span class="n">RealSolidStressArray</span><span class="p">),</span> <span class="c1"># real</span>
            <span class="p">(</span><span class="mi">39</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">109</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctetra_stress&#39;</span><span class="p">,</span> <span class="n">RealSolidStressArray</span><span class="p">),</span> <span class="c1"># real</span>
            <span class="p">(</span><span class="mi">39</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">74</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctetra_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSolidStressArray</span><span class="p">),</span> <span class="c1"># mag/phase</span>

            <span class="p">(</span><span class="mi">67</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">193</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;chexa_stress&#39;</span><span class="p">,</span> <span class="n">RealSolidStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">67</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">193</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;chexa_stress&#39;</span><span class="p">,</span> <span class="n">RealSolidStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">67</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">193</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;chexa_stress&#39;</span><span class="p">,</span> <span class="n">RealSolidStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">67</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">193</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;RASCONS&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;chexa_stress&#39;</span><span class="p">,</span> <span class="n">RealSolidStressArray</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">68</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">151</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cpenta_stress&#39;</span><span class="p">,</span> <span class="n">RealSolidStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">68</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">151</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cpenta_stress&#39;</span><span class="p">,</span> <span class="n">RealSolidStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">68</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">151</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cpenta_stress&#39;</span><span class="p">,</span> <span class="n">RealSolidStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">68</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">102</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cpenta_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSolidStressArray</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">39</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">69</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctetra_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSolidStressArray</span><span class="p">),</span> <span class="c1"># real/imag</span>
            <span class="p">(</span><span class="mi">39</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">69</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctetra_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSolidStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">39</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">74</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctetra_stress&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span> <span class="c1"># real/imag</span>
            <span class="c1">#(39, 3, 69) : (&#39;ctetra_stress&#39;, ComplexSolidStressArray), # mag/phase</span>

            <span class="p">(</span><span class="mi">67</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">121</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;chexa_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSolidStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">67</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">121</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;chexa_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSolidStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">67</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">130</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;chexa_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSolidStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">67</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">121</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;chexa_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSolidStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">67</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">121</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;chexa_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSolidStressArray</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">68</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">95</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cpenta_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSolidStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">68</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">95</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cpenta_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSolidStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">68</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">95</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cpenta_stress&#39;</span><span class="p">,</span> <span class="n">ComplexSolidStressArray</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">33</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span>  <span class="p">(</span><span class="s1">&#39;cquad4_stress&#39;</span><span class="p">,</span> <span class="n">RealPlateStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">33</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span>  <span class="p">(</span><span class="s1">&#39;cquad4_stress&#39;</span><span class="p">,</span> <span class="n">RealPlateStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">33</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1&#39;</span><span class="p">)</span> <span class="p">:</span>  <span class="p">(</span><span class="s1">&#39;cquad4_stress&#39;</span><span class="p">,</span> <span class="n">RealPlateStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">33</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span>  <span class="p">(</span><span class="s1">&#39;cquad4_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">33</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span>  <span class="p">(</span><span class="s1">&#39;cquad4_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStressArray</span><span class="p">),</span>
            <span class="c1">#(33, 3, 0) :  (&#39;cquad4_stress&#39;, RandomPlateStressArray),</span>
            <span class="p">(</span><span class="mi">33</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNO1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad4_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">33</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESXRMS1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad4_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStressArray</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">33</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESATO2&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad4_stress&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">33</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESCRM2&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad4_stress&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">33</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESPSD2&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad4_stress&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">33</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNO2&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad4_stress&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">33</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESRMS2&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad4_stress&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">33</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESRMS2&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad4_stress&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>


            <span class="p">(</span><span class="mi">74</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria3_stress&#39;</span><span class="p">,</span> <span class="n">RealPlateStrainArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">74</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria3_stress&#39;</span><span class="p">,</span> <span class="n">RealPlateStrainArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">74</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria3_stress&#39;</span><span class="p">,</span> <span class="n">RealPlateStrainArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">74</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria3_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStrainArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">74</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria3_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStrainArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">74</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESXRMS1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria3_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStrainArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">74</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNO1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria3_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStrainArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">74</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria3_stress&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">74</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria3_stress&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">74</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESRMS2&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria3_stress&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>

            <span class="c1">#(74, 1, 9) : (&#39;ctria3_stress&#39;, RandomPlateStressArray),</span>

            <span class="p">(</span><span class="mi">82</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquadr_stress&#39;</span><span class="p">,</span> <span class="n">RealPlateStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">82</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquadr_stress&#39;</span><span class="p">,</span> <span class="n">RealPlateStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">82</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">77</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquadr_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">82</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">77</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquadr_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStressArray</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">64</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad8_stress&#39;</span><span class="p">,</span> <span class="n">RealPlateStressArray</span><span class="p">),</span> <span class="c1"># real</span>
            <span class="p">(</span><span class="mi">64</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad8_stress&#39;</span><span class="p">,</span> <span class="n">RealPlateStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">64</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad8_stress&#39;</span><span class="p">,</span> <span class="n">RealPlateStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">64</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">77</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad8_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStressArray</span><span class="p">),</span> <span class="c1"># real/imag</span>
            <span class="p">(</span><span class="mi">64</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">77</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad8_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStressArray</span><span class="p">),</span> <span class="c1"># mag/phase</span>
            <span class="p">(</span><span class="mi">64</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">77</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad8_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStressArray</span><span class="p">),</span> <span class="c1"># real/imag</span>
            <span class="p">(</span><span class="mi">64</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">77</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad8_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStressArray</span><span class="p">),</span> <span class="c1"># mag/phase</span>
            <span class="p">(</span><span class="mi">64</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad8_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStressArray</span><span class="p">),</span> <span class="c1"># real/imag</span>
            <span class="p">(</span><span class="mi">64</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad8_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStressArray</span><span class="p">),</span> <span class="c1"># mag/phase</span>

            <span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctriar_stress&#39;</span><span class="p">,</span> <span class="n">RealPlateStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctriar_stress&#39;</span><span class="p">,</span> <span class="n">RealPlateStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctriar_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctriar_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStressArray</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria6_stress&#39;</span><span class="p">,</span> <span class="n">RealPlateStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria6_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria6_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria6_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria6_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStressArray</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">144</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad4_stress&#39;</span><span class="p">,</span> <span class="n">RealPlateStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">144</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad4_stress&#39;</span><span class="p">,</span> <span class="n">RealPlateStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">144</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;RASCONS&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad4_stress&#39;</span><span class="p">,</span> <span class="n">RealPlateStressArray</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">144</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">77</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad4_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">144</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">77</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad4_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">144</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad4_stress&#39;</span><span class="p">,</span> <span class="n">ComplexPlateStressArray</span><span class="p">),</span>
            <span class="c1">#(144, 3, 77) : (&#39;cquad4_stress&#39;, ComplexPlateStressArray),</span>
            <span class="c1">#(64, 1, 47) : (&#39;cquad8_stress&#39;, RandomPlateStressArray), # random</span>
            <span class="c1">#(70, 1, 39) : (&#39;ctriar_stress&#39;, RandomPlateStressArray),</span>
            <span class="c1">#(75, 1, 39) : (&#39;ctria6_stress&#39;, RandomPlateStressArray),</span>
            <span class="c1">#(82, 1, 47) : (&#39;cquadr_stress&#39;, RandomPlateStressArray),</span>
            <span class="c1">#(144, 1, 47) : (&#39;cquad4_stress&#39;, RandomPlateStressArray),</span>

            <span class="p">(</span><span class="mi">88</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;nonlinear_ctria3_stress&#39;</span><span class="p">,</span> <span class="n">RealNonlinearPlateArray</span><span class="p">),</span> <span class="c1"># real</span>
            <span class="p">(</span><span class="mi">88</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNL1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;nonlinear_ctria3_stress&#39;</span><span class="p">,</span> <span class="n">RealNonlinearPlateArray</span><span class="p">),</span> <span class="c1"># real?</span>
            <span class="p">(</span><span class="mi">88</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;nonlinear_ctria3_stress&#39;</span><span class="p">,</span> <span class="n">RealNonlinearPlateArray</span><span class="p">),</span> <span class="c1"># real?</span>

            <span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;nonlinear_cquad4_stress&#39;</span><span class="p">,</span> <span class="n">RealNonlinearPlateArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNL1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;nonlinear_cquad4_stress&#39;</span><span class="p">,</span> <span class="n">RealNonlinearPlateArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;nonlinear_cquad4_stress&#39;</span><span class="p">,</span> <span class="n">RealNonlinearPlateArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXD&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;nonlinear_cquad4_stress&#39;</span><span class="p">,</span> <span class="n">RealNonlinearPlateArray</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">95</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1C&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad4_composite_stress&#39;</span><span class="p">,</span> <span class="n">RealCompositePlateStressArray</span><span class="p">),</span> <span class="c1"># real</span>
            <span class="p">(</span><span class="mi">95</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESCP&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad4_composite_stress&#39;</span><span class="p">,</span> <span class="n">RealCompositePlateStressArray</span><span class="p">),</span> <span class="c1"># real</span>
            <span class="p">(</span><span class="mi">95</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESRT&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad4_composite_stress&#39;</span><span class="p">,</span> <span class="s1">&#39;RandomCompositePlateStressArray&#39;</span><span class="p">),</span> <span class="c1"># real</span>
            <span class="p">(</span><span class="mi">95</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESCP&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad4_composite_stress&#39;</span><span class="p">,</span> <span class="n">RealCompositePlateStressArray</span><span class="p">),</span> <span class="c1"># real?</span>
            <span class="p">(</span><span class="mi">95</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESRT&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad4_composite_stress&#39;</span><span class="p">,</span> <span class="n">RealCompositePlateStressArray</span><span class="p">),</span> <span class="c1"># real?</span>
            <span class="c1">#(95, 2, 9) : (&#39;cquad4_composite_stress&#39;, ComplexCompositePlateStressArray), # real/imag</span>
            <span class="c1">#(95, 3, 9) : (&#39;cquad4_composite_stress&#39;, ComplexCompositePlateStressArray), # mag/phase</span>

            <span class="c1">#(96, 1, 9) : (&#39;cquad8_composite_stress&#39;, &#39;RandomCompositePlateStressArray&#39;),</span>
            <span class="p">(</span><span class="mi">96</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1C&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad8_composite_stress&#39;</span><span class="p">,</span> <span class="n">RealCompositePlateStressArray</span><span class="p">),</span>
            <span class="c1">#(96, 1, 11) : (&#39;cquad8_composite_stress&#39;, RealCompositePlateStressArray),</span>
            <span class="c1">#(96, 2, 9) : (&#39;cquad8_composite_stress&#39;, ComplexCompositePlateStressArray),</span>
            <span class="c1">#(96, 3, 9) : (&#39;cquad8_composite_stress&#39;, ComplexCompositePlateStressArray),</span>

            <span class="p">(</span><span class="mi">97</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESRT&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria3_composite_stress&#39;</span><span class="p">,</span> <span class="s1">&#39;RandomCompositePlateStressArray&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">97</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1C&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria3_composite_stress&#39;</span><span class="p">,</span> <span class="n">RealCompositePlateStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">97</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESCP&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria3_composite_stress&#39;</span><span class="p">,</span> <span class="n">RealCompositePlateStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">97</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESCP&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria3_composite_stress&#39;</span><span class="p">,</span> <span class="n">RealCompositePlateStressArray</span><span class="p">),</span>
            <span class="c1">#(97, 2, 9) : (&#39;ctria3_composite_stress&#39;, ComplexCompositePlateStressArray),</span>
            <span class="c1">#(97, 3, 9) : (&#39;ctria3_composite_stress&#39;, ComplexCompositePlateStressArray),</span>

            <span class="p">(</span><span class="mi">98</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESRT&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria6_composite_stress&#39;</span><span class="p">,</span> <span class="s1">&#39;RandomCompositePlateStressArray&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">98</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1C&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria6_composite_stress&#39;</span><span class="p">,</span> <span class="n">RealCompositePlateStressArray</span><span class="p">),</span>
            <span class="c1">#(98, 1, 11) : (&#39;ctria6_composite_stress&#39;, RealCompositePlateStressArray),</span>
            <span class="c1">#(98, 2, 9) : (&#39;ctria6_composite_stress&#39;, ComplexCompositePlateStressArray),</span>
            <span class="c1">#(98, 3, 9) : (&#39;ctria6_composite_stress&#39;, ComplexCompositePlateStressArray),</span>

            <span class="p">(</span><span class="mi">53</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctriax_stress&#39;</span><span class="p">,</span> <span class="n">RealTriaxStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">53</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctriax_stress&#39;</span><span class="p">,</span> <span class="n">RealTriaxStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">53</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctriax_stress&#39;</span><span class="p">,</span> <span class="n">ComplexTriaxStressArray</span><span class="p">),</span>
            <span class="c1">#(53, 3, 37) : (&#39;ctriax_stress&#39;, ComplexTriaxStressArray),</span>

            <span class="p">(</span><span class="mi">102</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbush_stress&#39;</span><span class="p">,</span> <span class="n">RealBushStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">102</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbush_stress&#39;</span><span class="p">,</span> <span class="n">RealBushStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">102</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbush_stress&#39;</span><span class="p">,</span> <span class="n">RealBushStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">102</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbush_stress&#39;</span><span class="p">,</span> <span class="n">ComplexCBushStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">102</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbush_stress&#39;</span><span class="p">,</span> <span class="n">ComplexCBushStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">102</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbush_stress&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">102</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1&#39;</span><span class="p">):</span> <span class="p">(</span><span class="s1">&#39;cbush_stress&#39;</span><span class="p">,</span> <span class="n">ComplexCBushStressArray</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbush1d_stress_strain&#39;</span><span class="p">,</span> <span class="n">RealBushStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXD&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbush1d_stress_strain&#39;</span><span class="p">,</span> <span class="n">RealBushStressArray</span><span class="p">),</span>
            <span class="c1">#(40, 2, 9) : (&#39;cbush1d_stress_strain&#39;, ComplexCBushStressArray),</span>
            <span class="c1">#(40, 3, 9) : (&#39;cbush1d_stress_strain&#39;, ComplexCBushStressArray),</span>

            <span class="p">(</span><span class="mi">87</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNL1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;nonlinear_ctube_stress&#39;</span><span class="p">,</span> <span class="n">RealNonlinearRodArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">87</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;nonlinear_ctube_stress&#39;</span><span class="p">,</span> <span class="n">RealNonlinearRodArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">89</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNL1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;nonlinear_crod_stress&#39;</span><span class="p">,</span> <span class="n">RealNonlinearRodArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">89</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXD&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;nonlinear_crod_stress&#39;</span><span class="p">,</span> <span class="n">RealNonlinearRodArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">89</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;nonlinear_crod_stress&#39;</span><span class="p">,</span> <span class="n">RealNonlinearRodArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">92</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNL1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;nonlinear_conrod_stress&#39;</span><span class="p">,</span> <span class="n">RealNonlinearRodArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">92</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXD&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;nonlinear_conrod_stress&#39;</span><span class="p">,</span> <span class="n">RealNonlinearRodArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">92</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;nonlinear_conrod_stress&#39;</span><span class="p">,</span> <span class="n">RealNonlinearRodArray</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">224</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXD&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;nonlinear_celas1_stress&#39;</span><span class="p">,</span> <span class="n">RealNonlinearSpringStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">224</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;nonlinear_celas1_stress&#39;</span><span class="p">,</span> <span class="n">RealNonlinearSpringStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">225</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;nonlinear_celas3_stress&#39;</span><span class="p">,</span> <span class="n">RealNonlinearSpringStressArray</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span> <span class="c1"># CCONEAX</span>
            <span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span> <span class="c1"># CCONEAX</span>

            <span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span> <span class="c1"># DUM8/CCRAC2D</span>
            <span class="p">(</span><span class="mi">61</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span> <span class="c1"># DUM8/CCRAC3D</span>

            <span class="p">(</span><span class="mi">69</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span> <span class="c1"># CBEND</span>
            <span class="p">(</span><span class="mi">69</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span> <span class="c1"># CBEND</span>
            <span class="p">(</span><span class="mi">69</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span> <span class="c1"># CBEND</span>

            <span class="p">(</span><span class="mi">86</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNL1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;nonlinear_cgap_stress&#39;</span><span class="p">,</span> <span class="n">NonlinearGapStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">86</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;nonlinear_cgap_stress&#39;</span><span class="p">,</span> <span class="n">NonlinearGapStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">86</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXD&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;nonlinear_cgap_stress&#39;</span><span class="p">,</span> <span class="n">NonlinearGapStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">94</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNL1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;nonlinear_cbeam_stress&#39;</span><span class="p">,</span> <span class="n">RealNonlinearBeamStressArray</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">94</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;nonlinear_cbeam_stress&#39;</span><span class="p">,</span> <span class="n">RealNonlinearBeamStressArray</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">85</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">82</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>  <span class="c1"># TETRANL</span>
            <span class="p">(</span><span class="mi">91</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">114</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXD&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>  <span class="c1"># PENTANL</span>
            <span class="p">(</span><span class="mi">91</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">114</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>  <span class="c1"># PENTANL</span>
            <span class="p">(</span><span class="mi">93</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">146</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNL1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>  <span class="c1"># HEXANL</span>
            <span class="p">(</span><span class="mi">93</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">146</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXD&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>  <span class="c1"># HEXANL</span>
            <span class="p">(</span><span class="mi">93</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">146</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>  <span class="c1"># HEXANL</span>

            <span class="c1"># 101-AABSF</span>
            <span class="p">(</span><span class="mi">101</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>

            <span class="c1"># 140-HEXA8FD</span>
            <span class="p">(</span><span class="mi">140</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">162</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1">#201-QUAD4FD</span>
            <span class="p">(</span><span class="mi">201</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">46</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXD&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">201</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">46</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>

            <span class="c1"># 145-VUHEXA  (8 nodes)</span>
            <span class="p">(</span><span class="mi">145</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">98</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">145</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">106</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">145</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">106</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 146-VUPENTA (6 nodes)</span>
            <span class="p">(</span><span class="mi">146</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">74</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">146</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">146</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 147-VUTETRA (4 nodes)</span>
            <span class="p">(</span><span class="mi">147</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">147</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">54</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">147</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">54</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>

            <span class="c1"># 139-QUAD4FD</span>
            <span class="c1"># self.hyperelastic_cquad4_strain, HyperelasticQuad</span>
            <span class="p">(</span><span class="mi">139</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>

            <span class="c1"># 189-VUQUAD</span>
            <span class="p">(</span><span class="mi">189</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">74</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">189</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">114</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>

            <span class="c1"># 47-AXIF2</span>
            <span class="p">(</span><span class="mi">47</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;axif2&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 48-AXIF3</span>
            <span class="p">(</span><span class="mi">48</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;axif3&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 190-VUTRIA</span>
            <span class="p">(</span><span class="mi">190</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">57</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">190</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">190</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>

            <span class="c1"># 191-VUBEAM</span>
            <span class="p">(</span><span class="mi">191</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;vubeam&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">191</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;vubeam&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">191</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;vubeam&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>

            <span class="c1"># 203-SLIF1D?</span>
            <span class="p">(</span><span class="mi">203</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLBR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;slif1d&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 50-SLOT3</span>
            <span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;slot3&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 51-SLOT4</span>
            <span class="p">(</span><span class="mi">51</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;slot4&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>

            <span class="c1"># 160-PENTA6FD</span>
            <span class="p">(</span><span class="mi">160</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">122</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cpenta&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 161-TETRA4FD</span>
            <span class="p">(</span><span class="mi">161</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctetra&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 162-TRIA3FD</span>
            <span class="p">(</span><span class="mi">162</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 163-HEXAFD</span>
            <span class="p">(</span><span class="mi">163</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">542</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;chexa&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 164-QUADFD</span>
            <span class="p">(</span><span class="mi">164</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 165-PENTAFD</span>
            <span class="p">(</span><span class="mi">165</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">422</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cpenta&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 166-TETRAFD</span>
            <span class="p">(</span><span class="mi">166</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">102</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctetra&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 167-TRIAFD</span>
            <span class="p">(</span><span class="mi">167</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 168-TRIAX3FD</span>
            <span class="p">(</span><span class="mi">168</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctriax3&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 169-TRIAXFD</span>
            <span class="p">(</span><span class="mi">169</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctriax&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 170-QUADX4FD</span>
            <span class="p">(</span><span class="mi">170</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquadx4fd&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 171-QUADXFD</span>
            <span class="p">(</span><span class="mi">171</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquadx&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 172-QUADRNL</span>
            <span class="p">(</span><span class="mi">172</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquadrnl&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 202-HEXA8FD</span>
            <span class="p">(</span><span class="mi">202</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">122</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXD&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;chexa&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">202</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">122</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;chexa&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 204-PENTA6FD</span>
            <span class="p">(</span><span class="mi">204</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">92</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cpenta&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 211-TRIAFD</span>
            <span class="p">(</span><span class="mi">211</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria3&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 213-TRIAXFD</span>
            <span class="p">(</span><span class="mi">213</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctriax&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 214-QUADX4FD</span>
            <span class="p">(</span><span class="mi">214</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">46</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquadx4&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 216-TETRA4FD</span>
            <span class="p">(</span><span class="mi">216</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXD&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">216</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 217-TRIA3FD</span>
            <span class="p">(</span><span class="mi">217</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria3&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 218-HEXAFD</span>
            <span class="p">(</span><span class="mi">218</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">122</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;chexa&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 219-QUADFD</span>
            <span class="p">(</span><span class="mi">219</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">46</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 220-PENTAFD</span>
            <span class="p">(</span><span class="mi">220</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">92</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cpenta&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 221-TETRAFD</span>
            <span class="p">(</span><span class="mi">221</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;tetrafd&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 222-TRIAX3FD</span>
            <span class="p">(</span><span class="mi">222</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctriax3fd&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 223-CQUADXFD</span>
            <span class="p">(</span><span class="mi">223</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">46</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquadx&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 226-BUSH</span>
            <span class="p">(</span><span class="mi">226</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXD&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbush&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">226</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbush&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 227-CTRIAR</span>
            <span class="p">(</span><span class="mi">227</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctriar&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">227</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctriar&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 228-CQUADR</span>
            <span class="p">(</span><span class="mi">228</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquadr&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">228</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquadr&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="c1"># 232-QUADRLC</span>
            <span class="p">(</span><span class="mi">232</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1C&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquadr&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">232</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESCP&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquadr&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">232</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1C&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquadr&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>  <span class="c1"># freq nx</span>
            <span class="p">(</span><span class="mi">232</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1C&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquadr&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>  <span class="c1"># freq nx</span>
            <span class="c1">#(234, 1, 11) : (&#39;cquadr&#39;, &#39;NA&#39;), # bad?</span>
            <span class="c1"># 233-TRIARLC</span>
            <span class="p">(</span><span class="mi">233</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1C&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctriar&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">233</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1C&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctriar&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>  <span class="c1"># freq nx</span>
            <span class="p">(</span><span class="mi">233</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1C&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctriar&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>  <span class="c1"># freq nx</span>
            <span class="c1"># 235-CQUADR</span>
            <span class="p">(</span><span class="mi">235</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">235</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>

            <span class="c1"># 242-CTRAX</span>
            <span class="c1"># 244-CTRAX6</span>
            <span class="p">(</span><span class="mi">242</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctrax&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">244</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctrax6&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>

            <span class="c1"># 243-CQUADX4</span>
            <span class="c1"># 245-CQUADX8</span>
            <span class="p">(</span><span class="mi">243</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquadx4&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">245</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquadx8&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>

            <span class="c1">#256-CPYRAM</span>
            <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">130</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cpyram&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">82</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cpyram&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">256</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">98</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXD&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cpyram&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>

            <span class="c1"># 271-CPLSTN3</span>
            <span class="c1"># 272-CPLSTN4</span>
            <span class="p">(</span><span class="mi">271</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cplstn3&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">271</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cplstn3&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">272</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cplstn4&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">272</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cplstn4&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">273</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cplstn6&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">273</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cplstn6&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">274</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cplstn3&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">274</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cplstn3&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>

            <span class="c1"># 275-CPLSTS3</span>
            <span class="c1"># 277-CPLSTS6</span>
            <span class="p">(</span><span class="mi">275</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cplsts3&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">276</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cplsts4&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">277</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cplsts6&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">278</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cplsts8&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;crod&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;conrod&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;conrod&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;celas1&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;celas2&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbeam&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cbar&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cshear&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;OES1X&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cshear&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">74</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria3&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">144</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad4&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">95</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1C&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad4&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">95</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1C&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cquad4&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">97</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1C&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria3&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">97</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1C&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctria3&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>

            <span class="p">(</span><span class="mi">39</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">74</span><span class="p">,</span> <span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;ctetra&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">67</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">130</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;chexa&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">68</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">102</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="s1">&#39;cpenta&#39;</span><span class="p">,</span> <span class="s1">&#39;NA&#39;</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">stress_mapper</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;stress_mapper (~line 850 of oes.py) does not contain the &#39;</span>
                   <span class="s1">&#39;following key and must be added</span><span class="se">\n</span><span class="s1">&#39;</span>
                   <span class="s1">&#39;key=(element_type=</span><span class="si">%r</span><span class="s1">, format_code=</span><span class="si">%r</span><span class="s1">, num_wide=</span><span class="si">%r</span><span class="s1">, table_name=</span><span class="si">%r</span><span class="s1">) &#39;</span> <span class="o">%</span> <span class="n">key</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="c1">#raise KeyError(msg)</span>
            <span class="k">raise</span></div>
            <span class="c1">#return None, None</span>

<div class="viewcode-block" id="OES.get_oes_prefix_postfix"><a class="viewcode-back" href="../../../../../reference/op2/tables/oes_stress_strain/pyNastran.op2.tables.oes_stress_strain.oes.html#pyNastran.op2.tables.oes_stressStrain.oes.OES.get_oes_prefix_postfix">[docs]</a>    <span class="k">def</span> <span class="nf">get_oes_prefix_postfix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates the prefix/postfix that splits off ATO, CRM, PSD, nonlinear,</span>
<span class="sd">        etc. results.  We also fix some of the sort bits as typing:</span>

<span class="sd">            STRESS(PLOT,SORT1,RALL) = ALL</span>

<span class="sd">        will actually create the OESRMS2 table (depending on what else</span>
<span class="sd">        is in your case control).  However, it&#39;s in an OESATO2 table, so</span>
<span class="sd">        we know it&#39;s really SORT2.</span>

<span class="sd">        Also, if you&#39;re validating the sort_bit flags, *RMS2 and *NO2 are</span>
<span class="sd">        actually SORT1 tables.</span>

<span class="sd">        NX Case Control  Block         Description</span>
<span class="sd">        ===============  ==========    ===========</span>
<span class="sd">        NLSTRESS         OESNLXR       Nonlinear static stresses</span>
<span class="sd">        BOUTPUT          OESNLBR       Slideline stresses</span>
<span class="sd">        STRESS           OESNLXD       Nonlinear Transient Stresses</span>
<span class="sd">        STRESS           OES1C/OSTR1C  Ply stresses/strains</span>
<span class="sd">        STRESS           OES1X         Element stresses with intermediate (CBAR and CBEAM)</span>
<span class="sd">                                       station stresses and stresses on nonlinear elements</span>
<span class="sd">        STRESS           OES/OESVM     Element stresses (linear elements only)</span>
<span class="sd">        STRAIN           OSTR1         Element strains</span>
<span class="sd">        STRESS/STRAIN    DOES1/DOSTR1  Scaled Response Spectra</span>
<span class="sd">        MODCON           OSTRMC        Modal contributions</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">postfix</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="n">table_name_bytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span>
        <span class="k">if</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OES1X1&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1X&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OSTR1X&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OSTR1&#39;</span><span class="p">,</span>
                               <span class="sa">b</span><span class="s1">&#39;OES1C&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OSTR1C&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES1&#39;</span><span class="p">,</span> <span class="p">]:</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OES2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OSTR2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OES2C&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OSTR2C&#39;</span><span class="p">]:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span>
        <span class="c1">#elif table_name_bytes in [&#39;OESNLXR&#39;]:</span>
            <span class="c1">#prefix = &#39;sideline_&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESNLXD&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNL1X&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNLXR&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESNL2&#39;</span><span class="p">]:</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;nonlinear_&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESNLXR2&#39;</span><span class="p">]:</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;nonlinear_&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;OESNLBR&#39;</span><span class="p">:</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;sideline_&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;OESRT&#39;</span><span class="p">:</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;strength_ratio.&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESCP&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESTRCP&#39;</span><span class="p">]:</span>
            <span class="c1"># guessing</span>
            <span class="k">pass</span>
            <span class="c1">#self.sort_bits[0] = 0 # real; ???</span>
            <span class="c1">#self.sort_bits[1] = 0 # sort1</span>
            <span class="c1">#self.sort_bits[2] = 1 # random; ???</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESVM1C&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OSTRVM1C&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OSTRVM1&#39;</span><span class="p">,</span>
                                  <span class="c1">#b&#39;OESVM1C&#39;, b&#39;OSTRVM1C&#39;,</span>
                                  <span class="sa">b</span><span class="s1">&#39;OESVM2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OSTRVM2&#39;</span><span class="p">,]:</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;modal_contribution.&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">to_nx</span><span class="p">()</span>

        <span class="c1">#----------------------------------------------------------------</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OSTRMS1C&#39;</span><span class="p">]:</span> <span class="c1">#, b&#39;OSTRMS1C&#39;]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># real</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;rms.&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESXRMS1&#39;</span><span class="p">]:</span> <span class="c1"># wrong...</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># real</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># sort1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># random</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="c1">#self.data_code[&#39;nonlinear_factor&#39;] = self._element_id</span>
            <span class="c1">#assert self.sort_method == 2, self.code_information()</span>
            <span class="c1">#self.nonlinear_factor = self.n</span>
            <span class="c1">#self.data_code[&#39;nonlinear_factor&#39;] = None</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;rms.&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESXRMS2&#39;</span><span class="p">]:</span> <span class="c1"># wrong...</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># sort2</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;rms.&#39;</span>

        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESXNO1&#39;</span><span class="p">]:</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;no.&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESXNO1C&#39;</span><span class="p">]:</span>
            <span class="c1"># - ply-by-ply Stresses including:</span>
            <span class="c1">#    - von Mises Stress for PSDF (OESPSD1C),</span>
            <span class="c1">#    - Cumulative Root Mean Square output (OESXNO1C)</span>
            <span class="c1">#    - Positive Crossing (OESCRM1C) output sets</span>
            <span class="c1"># - ply-by-ply Strains for:</span>
            <span class="c1">#    - PSDF (OSTPSD1C)</span>
            <span class="c1">#    - Cumulative Root Mean Square (OSTCRM1C) output sets</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;crm.&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESXRM1C&#39;</span><span class="p">]:</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;rms.&#39;</span>
            <span class="c1">#print(self.code_information())</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESRMS1&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OSTRRMS1&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># real</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;rms.&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESRMS2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OSTRRMS2&#39;</span><span class="p">]:</span>
            <span class="c1">#self.format_code = 1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># real</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># sort1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># random</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span>
            <span class="c1">#assert self.sort_method == 2, self.code_information()</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;rms.&#39;</span>

        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESNO1&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OSTRNO1&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OSTNO1C&#39;</span><span class="p">]:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># real</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># random</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;no.&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESNO2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OSTRNO2&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># real</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># sort1</span>
            <span class="c1">#self.sort_bits[0] = 1 # sort2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># random</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;nonlinear_factor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;no.&#39;</span>
        <span class="c1">#----------------------------------------------------------------</span>

        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESPSD1&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OSTRPSD1&#39;</span><span class="p">]:</span>
            <span class="c1">#self.format_code = 1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># real</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># sort1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># random</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;psd.&#39;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESPSD2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OSTRPSD2&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># real</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># sort2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># random</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;psd.&#39;</span>

        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESATO1&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OSTRATO1&#39;</span><span class="p">]:</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;ato.&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESATO2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OSTRATO2&#39;</span><span class="p">]:</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;ato.&#39;</span>

        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESCRM1&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OSTRCRM1&#39;</span><span class="p">]:</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;crm.&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESCRM2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OSTRCRM2&#39;</span><span class="p">]:</span>
            <span class="c1"># sort2, random</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># real</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># real</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># sort2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># random</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;crm.&#39;</span>
        <span class="c1">#elif self.table_name in [&#39;DOES1&#39;, &#39;DOSTR1&#39;]:</span>
            <span class="c1">#prefix = &#39;scaled_response_spectra_&#39;</span>
        <span class="c1">#elif self.table_name in [&#39;OESCP&#39;]:</span>

        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;RASCONS&#39;</span><span class="p">]:</span> <span class="c1">#, b&#39;OSTRMS1C&#39;]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># real</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;RASCONS.&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;RAECONS&#39;</span><span class="p">]:</span> <span class="c1">#, b&#39;OSTRMS1C&#39;]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># real</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;RAECONS.&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;RAPCONS&#39;</span><span class="p">]:</span> <span class="c1">#, b&#39;OSTRMS1C&#39;]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># real</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;RAPCONS.&#39;</span>

        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;RASEATC&#39;</span><span class="p">]:</span> <span class="c1">#, b&#39;OSTRMS1C&#39;]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># real</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;RASEATC.&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;RAEEATC&#39;</span><span class="p">]:</span> <span class="c1">#, b&#39;OSTRMS1C&#39;]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># real</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;RAEEATC.&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;RAPEATC&#39;</span><span class="p">]:</span> <span class="c1">#, b&#39;OSTRMS1C&#39;]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># real</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;RAPEATC.&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESMC1&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OSTRMC1&#39;</span><span class="p">]:</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;modal_contribution.&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;sort_bits&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;nonlinear_factor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span>
        <span class="k">return</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span></div>

    <span class="k">def</span> <span class="nf">_read_oesmc_4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">):</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_mode</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ndata</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">16</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 4*4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">fmt</span> <span class="o">=</span> <span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i3f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
            <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">ielem</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                <span class="c1">#print(out)</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;skipping </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="si">}</span><span class="s1"> with </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="si">}</span><span class="s1">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_oes1_loads_nasa95</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reads OES1 subtable 4 for NASA 95&quot;&quot;&quot;</span>
        <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_oes_prefix_postfix</span><span class="p">()</span>
        <span class="c1">#self._apply_oes_ato_crm_psd_rms_no(&#39;&#39;) # TODO: just testing</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">is_magnitude_phase</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_magnitude_phase</span><span class="p">()</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="s1">&#39;stress&#39;</span>
            <span class="n">stress_name</span> <span class="o">=</span> <span class="s1">&#39;STRESS&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="s1">&#39;strain&#39;</span>
            <span class="n">stress_name</span> <span class="o">=</span> <span class="s1">&#39;STRAIN&#39;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">]:</span>  <span class="c1"># rods</span>
            <span class="c1"># 1-CROD</span>
            <span class="c1"># 3-CTUBE</span>
            <span class="c1"># 10-CONROD</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_crod</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="c1">#elif self.element_type == 2: # CBEAM</span>
            <span class="c1">#n, nelements, ntotal = self._oes_cbeam(data, ndata, dt, is_magnitude_phase, prefix, postfix)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span> <span class="c1"># CSHEAR</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_cshear</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">]:</span>  <span class="c1"># springs</span>
            <span class="c1"># 11-CELAS1</span>
            <span class="c1"># 12-CELAS2</span>
            <span class="c1"># 13-CELAS3</span>
            <span class="c1"># 14-CELAS4</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_celas</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">34</span><span class="p">:</span> <span class="c1"># CBAR</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_cbar_34</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">83</span><span class="p">:</span>
            <span class="c1"># 83: TRIA3</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_ctria3</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="c1">#elif self.element_type in [64, 70, 75, 82, 144]:  # bilinear plates</span>
            <span class="c1"># 64-CQUAD8</span>
            <span class="c1"># 70-CTRIAR</span>
            <span class="c1"># 75-CTRIA6</span>
            <span class="c1"># 82-CQUADR</span>
            <span class="c1"># 144-CQUAD4-bilinear</span>
            <span class="c1">#n, nelements, ntotal = self._oes_cquad4_144(data, ndata, dt, is_magnitude_phase, prefix, postfix)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#msg = &#39;sort1 Type=%s num=%s&#39; % (self.element_name, self.element_type)</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">nelements</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">n</span>
        <span class="k">assert</span> <span class="n">ndata</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ndata</span>
        <span class="k">assert</span> <span class="n">nelements</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;nelements=</span><span class="si">%r</span><span class="s1"> element_type=</span><span class="si">%s</span><span class="s1"> element_name=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">)</span>
        <span class="c1">#assert ndata % ntotal == 0, &#39;%s n=%s nwide=%s len=%s ntotal=%s&#39; % (self.element_name, ndata % ntotal, ndata % self.num_wide, ndata, ntotal)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">==</span> <span class="n">ntotal</span><span class="p">,</span> <span class="s1">&#39;numwide*4=</span><span class="si">%s</span><span class="s1"> ntotal=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;thermal = </span><span class="si">%%</span><span class="s2">s&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span>
        <span class="k">assert</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;n = </span><span class="si">%s</span><span class="s2"> result_name=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">result_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_oes1_loads</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reads OES self.thermal=0 stress/strain&quot;&quot;&quot;</span>
        <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_oes_prefix_postfix</span><span class="p">()</span>
        <span class="c1">#self._apply_oes_ato_crm_psd_rms_no(&#39;&#39;) # TODO: just testing</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">is_magnitude_phase</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_magnitude_phase</span><span class="p">()</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span>

        <span class="c1">#flag = &#39;element_id&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="s1">&#39;stress&#39;</span>
            <span class="n">stress_name</span> <span class="o">=</span> <span class="s1">&#39;STRESS&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="s1">&#39;strain&#39;</span>
            <span class="n">stress_name</span> <span class="o">=</span> <span class="s1">&#39;STRAIN&#39;</span>

        <span class="c1">#if self.is_stress:</span>
            <span class="c1">#_result_name, _class_obj = self.get_stress_mapper()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name_str</span> <span class="o">==</span> <span class="s1">&#39;OESXRMS1&#39;</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">]:</span>  <span class="c1"># rods</span>
            <span class="c1"># 1-CROD</span>
            <span class="c1"># 3-CTUBE</span>
            <span class="c1"># 10-CONROD</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_crod</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span> <span class="c1"># CBEAM</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_cbeam</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span> <span class="c1"># CSHEAR</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_cshear</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">]:</span>  <span class="c1"># springs</span>
            <span class="c1"># 11-CELAS1</span>
            <span class="c1"># 12-CELAS2</span>
            <span class="c1"># 13-CELAS3</span>
            <span class="c1"># 14-CELAS4</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_celas</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">34</span><span class="p">:</span> <span class="c1"># CBAR</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_cbar_34</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">39</span><span class="p">,</span> <span class="mi">67</span><span class="p">,</span> <span class="mi">68</span><span class="p">,</span> <span class="mi">255</span><span class="p">]:</span> <span class="c1"># solid stress</span>
            <span class="c1"># 39-CTETRA</span>
            <span class="c1"># 67-CHEXA</span>
            <span class="c1"># 68-CPENTA</span>
            <span class="c1"># 255-CPYRAM</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_csolid</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">140</span><span class="p">]:</span>
            <span class="c1"># 144-CHEXAFD</span>
            <span class="c1">#TestOP2.test_bdf_op2_other_23</span>
            <span class="s1">&#39;             S T R E S S E S   I N   H Y P E R E L A S T I C   H E X A H E D R O N   E L E M E N T S  ( H E X A F D ) &#39;</span>
            <span class="s1">&#39;              GRID/    POINT               --------CAUCHY STRESSES---------              DIR.  COSINES       MEAN&#39;</span>
            <span class="s1">&#39;  ELEMENT-ID  GAUSS      ID         NORMAL              SHEAR             PRINCIPAL       -A-  -B-  -C-     PRESSURE&#39;</span>
            <span class="s1">&#39;0      211    GAUS&#39;</span>
            <span class="s1">&#39;                           1  X   2.627481E+02  XY   8.335709E+01   A   3.040629E+02  LX 0.94-0.34-0.00  -8.630411E+01&#39;</span>
            <span class="s1">&#39;                              Y  -2.599833E+00  YZ  -1.138583E+01   B  -5.463896E+01  LY 0.25 0.68 0.69&#39;</span>
            <span class="s1">&#39;                              Z  -1.235891E+00  ZX   7.851368E+01   C   9.488372E+00  LZ 0.23 0.64-0.73&#39;</span>
            <span class="s1">&#39;                           2  X   1.541617E+02  XY   4.154493E+01   A   1.964021E+02  LX 0.88-0.47-0.00  -8.630411E+01&#39;</span>
            <span class="s1">&#39;                              Y   5.412691E+01  YZ  -3.499344E+00   B   6.221669E+00  LY 0.25 0.46-0.85&#39;</span>
            <span class="s1">&#39;                              Z   5.062376E+01  ZX   6.725376E+01   C   5.628857E+01  LZ 0.40 0.75 0.53&#39;</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_csolid_linear_hyperelastic_cosine</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">160</span><span class="p">,</span> <span class="mi">163</span><span class="p">,</span> <span class="mi">166</span><span class="p">,</span>
                                   <span class="mi">161</span><span class="p">,</span> <span class="c1"># centroid</span>
                                   <span class="mi">165</span><span class="p">,]:</span>
            <span class="c1"># nonlinear hyperelastic solids</span>
            <span class="c1"># 160-CPENTAFD</span>
            <span class="c1"># 163-CHEXAFD</span>
            <span class="c1"># 166-CTETRAFD</span>

            <span class="c1"># centroid??</span>
            <span class="c1"># 161-CTETRAFD</span>

            <span class="c1"># many nodes?</span>
            <span class="c1"># 165-CPENTAFD</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_csolid_linear_hyperelastic</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">202</span><span class="p">,</span> <span class="mi">204</span><span class="p">,</span>
                                   <span class="mi">216</span><span class="p">,</span> <span class="mi">218</span><span class="p">,</span> <span class="mi">220</span><span class="p">,</span> <span class="mi">221</span><span class="p">]:</span>
            <span class="c1"># nonlinear hyperelastic solids</span>
            <span class="c1"># 202-CHEXAFD</span>
            <span class="c1"># 204-CPENTAFD</span>

            <span class="c1"># also nonlinear hyperelastic solid, but somewhat different</span>
            <span class="s1">&#39;   N O N L I N E A R   S T R E S S E S   I N   H Y P E R E L A S T I C   H E X A H E D R O N   E L E M E N T S  ( HEXA8FD )&#39;</span>
            <span class="s1">&#39; &#39;</span>
            <span class="s1">&#39;  ELEMENT GRID/   POINT                       CAUCHY STRESSES/ LOG STRAINS                        PRESSURE    VOL. STRAIN&#39;</span>
            <span class="s1">&#39;     ID   GAUSS     ID       X           Y           Z           XY          YZ          ZX&#39;</span>
            <span class="s1">&#39;0     401 GRID      401  1.9128E+03  6.2729E+02 -3.4828E+02 -7.5176E+01  7.8259E+00 -2.5001E+02  7.3060E+02  7.3060E-03&#39;</span>
            <span class="s1">&#39;                         6.8270E-01 -6.5437E-04 -1.2874E+00 -3.9645E-02 -2.9882E-03 -5.9975E-02&#39;</span>
            <span class="c1"># 216-TETRAFD</span>
            <span class="c1"># 218-HEXAFD</span>
            <span class="c1"># 220-PENTAFD</span>
            <span class="c1"># 221-TETRAFD</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_csolid_nonlinear_hyperelastic</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">300</span><span class="p">,</span> <span class="mi">301</span><span class="p">,</span> <span class="mi">302</span><span class="p">,</span> <span class="mi">303</span><span class="p">]:</span> <span class="c1"># solid stress</span>
            <span class="c1"># solids without stress eigenvectors</span>
            <span class="c1"># 300-CHEXA</span>
            <span class="c1"># 301-CPENTA</span>
            <span class="c1"># 302-CTETRA</span>
            <span class="c1"># 303-CPYRAM</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_csolid2</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">306</span><span class="p">,</span> <span class="mi">307</span><span class="p">]:</span>
            <span class="c1"># 306-CHEXALN</span>
            <span class="c1"># 307-CPENTALN</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_csolid_composite</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>
        <span class="c1">#=========================</span>
        <span class="c1"># plates</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">33</span><span class="p">,</span> <span class="mi">228</span><span class="p">]:</span>
            <span class="c1"># 33: CQUAD4-centroidal</span>
            <span class="c1"># 228: CQUADR-centroidal</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_cquad4_33</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">74</span><span class="p">,</span> <span class="mi">227</span><span class="p">,</span> <span class="p">]:</span> <span class="c1"># 229???</span>
            <span class="c1"># 74: TRIA3</span>
            <span class="c1"># 227: TRIAR</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_ctria3</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">64</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">82</span><span class="p">,</span> <span class="mi">144</span><span class="p">]:</span>  <span class="c1"># bilinear plates</span>
            <span class="c1"># 64-CQUAD8</span>
            <span class="c1"># 70-CTRIAR</span>
            <span class="c1"># 75-CTRIA6</span>
            <span class="c1"># 82-CQUADR</span>
            <span class="c1"># 144-CQUAD4-bilinear</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_cquad4_144</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">88</span><span class="p">,</span> <span class="mi">90</span><span class="p">]:</span> <span class="c1"># nonlinear shells</span>
            <span class="c1"># 88-CTRIA3NL</span>
            <span class="c1"># 90-CQUAD4NL</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_shells_nonlinear</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">95</span><span class="p">,</span> <span class="mi">96</span><span class="p">,</span> <span class="mi">97</span><span class="p">,</span> <span class="mi">98</span><span class="p">,</span> <span class="mi">232</span><span class="p">,</span> <span class="mi">233</span><span class="p">]:</span> <span class="c1"># composite shell</span>
            <span class="c1"># 95 - CQUAD4</span>
            <span class="c1"># 96 - CQUAD8</span>
            <span class="c1"># 97 - CTRIA3</span>
            <span class="c1"># 98 - CTRIA6 (composite)</span>
            <span class="c1"># 232 - QUADRLC (CQUADR-composite)</span>
            <span class="c1"># 233 - TRIARLC (CTRIAR-composite)</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_shells_composite</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">53</span><span class="p">:</span> <span class="c1"># axial plates - ctriax6</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_ctriax6</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">102</span><span class="p">:</span> <span class="c1"># cbush</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_cbush</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">40</span><span class="p">:</span>  <span class="c1"># cbush1d</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_cbush1d</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">87</span><span class="p">,</span> <span class="mi">89</span><span class="p">,</span> <span class="mi">92</span><span class="p">]:</span>  <span class="c1"># nonlinear rods</span>
            <span class="c1"># 87-CTUBENL</span>
            <span class="c1"># 89-RODNL</span>
            <span class="c1"># 92-CONRODNL</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_crod_nonlinear</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">224</span><span class="p">,</span> <span class="mi">225</span><span class="p">]:</span> <span class="c1"># nonlinear spring</span>
            <span class="c1"># 224-CELAS1</span>
            <span class="c1"># 225-CELAS3</span>
            <span class="c1"># NonlinearSpringStress</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_celas_nonlinear</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">69</span><span class="p">:</span>  <span class="c1"># cbend</span>
            <span class="c1"># 69-CBEND</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_cbend</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">86</span><span class="p">:</span>  <span class="c1"># cgap</span>
            <span class="c1"># 86-GAPNL</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_cgap_nonlinear</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">94</span><span class="p">:</span>
            <span class="c1"># 94-BEAMNL</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_cbeam_nonlinear</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">85</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">,</span> <span class="mi">256</span><span class="p">]:</span>
            <span class="c1"># 256-PYRAM</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_csolid_nonlinear</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">100</span><span class="p">:</span>  <span class="c1"># bars</span>
            <span class="c1"># 100-BARS</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_cbar_100</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span>
                                                      <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">145</span><span class="p">,</span> <span class="mi">146</span><span class="p">,</span> <span class="mi">147</span><span class="p">]:</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_vu_solid</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">stress_name</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">139</span><span class="p">:</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_hyperelastic_quad</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span>
                                                               <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">189</span><span class="p">:</span> <span class="c1"># VUQUAD</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_vu_quad</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span>
                                                     <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">226</span><span class="p">:</span>
            <span class="c1"># 226-BUSHNL</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_cbush_nonlinear</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span>
                                                             <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">271</span><span class="p">,</span> <span class="mi">275</span><span class="p">]:</span>
            <span class="c1">#271 CPLSTN3 Triangle plane strain linear format (Center Only)</span>
            <span class="c1">#272 CPLSTN4 Quadrilateral plane strain linear format (Center and Corners)</span>
            <span class="c1">#273 CPLSTN6 Triangle plane strain linear format (Center and Corners)</span>
            <span class="c1">#274 CPLSTN8 Quadrilateral plane strain linear format (Center and Corners)</span>

            <span class="c1">#275 CPLSTS3 Triangle plane stress linear Format (Center Only)</span>
            <span class="c1">#276 CPLSTS4 Quadrilateral plane stress linear format (Center and Corners)</span>
            <span class="c1">#277 CPLSTS6 Triangle plane stress linear format (Center and Corners)</span>
            <span class="c1">#278 CPLSTS8 Quadrilateral plane stress linear format (Center and Corners)</span>


            <span class="c1"># 271-CPLSTN3</span>
            <span class="c1"># 275-CPLSTS3</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_plate_stress_34</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span>
                                                             <span class="n">stress_name</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">276</span><span class="p">,</span> <span class="mi">277</span><span class="p">,</span> <span class="mi">278</span><span class="p">]:</span>
            <span class="c1"># 276-CPLSTS4</span>
            <span class="c1"># 277-CPLSTS6</span>
            <span class="c1"># 278-CPLSTS8</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oes_plate_stress_68</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span>
                                                             <span class="n">stress_name</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>


        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">35</span><span class="p">:</span> <span class="c1"># CON</span>
            <span class="k">return</span> <span class="n">ndata</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">60</span><span class="p">,</span> <span class="mi">61</span><span class="p">]:</span>
            <span class="c1"># 60-DUM8</span>
            <span class="c1"># 61-DUM9</span>
            <span class="k">return</span> <span class="n">ndata</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">101</span><span class="p">:</span> <span class="c1"># AABSF</span>
            <span class="k">return</span> <span class="n">ndata</span>

        <span class="c1">#elif self.element_type in [140, 201]:</span>
            <span class="c1">## 140-HEXA8FD, 201-QUAD4FD</span>
            <span class="c1">#return ndata</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">47</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">189</span><span class="p">,</span> <span class="mi">190</span><span class="p">]:</span>
            <span class="c1"># 47-AXIF2</span>
            <span class="c1"># 48-AXIF3</span>
            <span class="c1"># 189-???</span>
            <span class="c1"># 190-VUTRIA</span>
            <span class="k">return</span> <span class="n">ndata</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">191</span><span class="p">:</span>
            <span class="c1"># 191-VUBEAM</span>
            <span class="k">return</span> <span class="n">ndata</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">203</span><span class="p">]:</span>
            <span class="c1"># 203-SLIF1D?</span>
            <span class="c1"># 50-SLOT3</span>
            <span class="c1"># 51-SLOT4</span>
            <span class="k">return</span> <span class="n">ndata</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">162</span><span class="p">,</span> <span class="mi">164</span><span class="p">,</span> <span class="mi">167</span><span class="p">,</span> <span class="mi">168</span><span class="p">,</span>
                                   <span class="mi">169</span><span class="p">,</span> <span class="mi">170</span><span class="p">,</span> <span class="mi">171</span><span class="p">,</span> <span class="mi">172</span><span class="p">,</span>
                                   <span class="mi">218</span><span class="p">,</span> <span class="mi">211</span><span class="p">,</span> <span class="mi">213</span><span class="p">,</span> <span class="mi">214</span><span class="p">,</span>
                                   <span class="mi">217</span><span class="p">,</span> <span class="mi">219</span><span class="p">,</span> <span class="mi">222</span><span class="p">,</span> <span class="mi">223</span><span class="p">,</span>
                                   <span class="mi">232</span><span class="p">,</span> <span class="mi">235</span><span class="p">]:</span>
            <span class="c1"># 162-TRIA3FD</span>
            <span class="c1"># 164-QUADFD</span>
            <span class="c1"># 167-TRIAFD</span>
            <span class="c1"># 168-TRIAX3FD</span>
            <span class="c1"># 169-TRIAXFD</span>
            <span class="c1"># 170-QUADX4FD</span>
            <span class="c1"># 171-QUADXFD</span>
            <span class="c1"># 172-QUADRNL</span>
            <span class="c1"># 211-TRIAFD</span>
            <span class="c1"># 213-TRIAXFD</span>
            <span class="c1"># 214-QUADX4FD</span>
            <span class="c1"># 217-TRIA3FD</span>
            <span class="c1"># 219-QUADFD</span>
            <span class="c1"># 223-QUADXFD</span>
            <span class="c1"># 222-TRIAX3FD</span>
            <span class="c1"># 232-QUADRLC</span>
            <span class="c1"># 235-CQUADR</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#msg = &#39;sort1 Type=%s num=%s&#39; % (self.element_name, self.element_type)</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">nelements</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">n</span>
        <span class="k">assert</span> <span class="n">ndata</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ndata</span>
        <span class="k">assert</span> <span class="n">nelements</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;nelements=</span><span class="si">{</span><span class="n">nelements</span><span class="si">}</span><span class="s1"> element_type=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="si">}</span><span class="s1"> element_name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="si">!r}</span><span class="s1">&#39;</span>
        <span class="c1">#assert ndata % ntotal == 0, &#39;%s n=%s nwide=%s len=%s ntotal=%s&#39; % (self.element_name, ndata % ntotal, ndata % self.num_wide, ndata, ntotal)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="o">==</span> <span class="n">ntotal</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;numwide*4=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span><span class="o">*</span><span class="mi">4</span><span class="si">}</span><span class="s1"> ntotal=</span><span class="si">{</span><span class="n">ntotal</span><span class="si">}</span><span class="s1"> element_name=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="si">!r}</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;thermal = </span><span class="si">%%</span><span class="s2">s&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span>
        <span class="k">assert</span> <span class="n">n</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;n=</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s1"> result_name=</span><span class="si">{</span><span class="n">result_name</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">n</span>

<div class="viewcode-block" id="OES.oesrt_cquad4_95"><a class="viewcode-back" href="../../../../../reference/op2/tables/oes_stress_strain/pyNastran.op2.tables.oes_stress_strain.oes.html#pyNastran.op2.tables.oes_stressStrain.oes.OES.oesrt_cquad4_95">[docs]</a>    <span class="k">def</span> <span class="nf">oesrt_cquad4_95</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">ndata</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;unsupported element&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">9</span><span class="p">,</span> <span class="s2">&quot;num_wide=</span><span class="si">%s</span><span class="s2"> not 9&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">36</span>  <span class="c1"># 4*9</span>
        <span class="c1">#oesrt_cquad4_95</span>

        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;8si3fi4s&#39;</span><span class="p">)</span>
        <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="c1">#obj = self.obj</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>  <span class="c1"># num_wide=9</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;CQUAD4-95 - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="c1">#eid, failure, ply, failureIndexPly, failureIndexBonding, failureIndexMax, flag</span>
            <span class="c1"># 3,TSAIWU,1,8.5640,0.0,None</span>

            <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">failure</span><span class="p">,</span> <span class="n">ply</span><span class="p">,</span> <span class="n">strength_ratio_ply</span><span class="p">,</span> <span class="n">failure_index_bonding</span><span class="p">,</span> <span class="n">strength_ratio_bonding</span><span class="p">,</span> <span class="n">flag</span><span class="p">,</span> <span class="n">flag2</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="c1">#strength_ratio_ply</span>
            <span class="c1">#print(&quot;eid=%s failure=%r ply=%s failureIndexPly=%s  failure_index_bonding=%s strength_ratio_bonding=%s flag=%s flag2=%s&quot; % (</span>
            <span class="c1">#    eid, failure.strip(), ply, failureIndexPly, failure_index_bonding, strength_ratio_bonding, flag, flag2))</span>
            <span class="c1">#print(&quot;eid=%s strength_ratio_ply=%g failure_index_bonding=%s strength_ratio_bonding=%s&quot; % (</span>
                <span class="c1">#eid, strength_ratio_ply, failure_index_bonding, strength_ratio_bonding))</span>
            <span class="c1">#obj.add_new_eid(element_name, dt, eid, force, stress)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">return</span> <span class="n">n</span></div>

    <span class="k">def</span> <span class="nf">_create_nodes_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;same as _create_oes_object4 except it adds to the nnodes parameter&quot;&quot;&quot;</span>
        <span class="n">auto_return</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1">#is_vectorized = True</span>
        <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_vectorized</span><span class="p">(</span><span class="n">obj_vector</span><span class="p">)</span>
        <span class="c1">#print(&quot;vectorized...read_mode=%s...%s; %s&quot; % (self.read_mode, result_name, is_vectorized))</span>

        <span class="k">if</span> <span class="n">is_vectorized</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_mode</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1">#print(&#39;oes-self.nonlinear_factor =&#39;, self.nonlinear_factor)</span>
                <span class="c1">#print(self.data_code)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">create_transient_object</span><span class="p">(</span><span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector</span><span class="p">)</span>
                <span class="c1">#print(&quot;read_mode 1; ntimes=%s&quot; % self.obj.ntimes)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">result_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
                <span class="c1">#print(&#39;self.obj =&#39;, self.obj)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">nnodes</span> <span class="o">+=</span> <span class="n">nnodes</span>
                <span class="n">auto_return</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_mode</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_code</span><span class="p">()</span>
                <span class="c1">#self.log.info(&quot;code = %s&quot; % str(self.code))</span>
                <span class="c1">#print(&quot;code = %s&quot; % str(self.code))</span>

                <span class="c1"># if this is failing, you probably set obj_vector to None...</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="n">slot</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">]</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Could not find key=</span><span class="si">%s</span><span class="s1"> in result=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">result_name</span><span class="p">)</span>
                    <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;There&#39;s probably an extra check for read_mode=1...&quot;</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="k">raise</span>
                <span class="c1">#self.obj.update_data_code(self.data_code)</span>
                <span class="n">build_obj</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>  <span class="c1"># not vectorized</span>
                <span class="n">auto_return</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">auto_return</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span>

    <span class="k">def</span> <span class="nf">_create_ntotal_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;same as _create_oes_object4 except it adds to the ntotal parameter&quot;&quot;&quot;</span>
        <span class="n">auto_return</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1">#is_vectorized = True</span>
        <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_vectorized</span><span class="p">(</span><span class="n">obj_vector</span><span class="p">)</span>
        <span class="c1">#print(&quot;vectorized...read_mode=%s...%s; %s&quot; % (self.read_mode, result_name, is_vectorized))</span>

        <span class="k">if</span> <span class="n">is_vectorized</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_mode</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1">#print(&#39;oes-self.nonlinear_factor =&#39;, self.nonlinear_factor)</span>
                <span class="c1">#print(self.data_code)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">create_transient_object</span><span class="p">(</span><span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector</span><span class="p">)</span>
                <span class="c1">#print(&quot;read_mode 1; ntimes=%s&quot; % self.obj.ntimes)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">result_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
                <span class="c1">#print(&#39;self.obj =&#39;, self.obj)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">ntotal</span> <span class="o">+=</span> <span class="n">ntotal</span>
                <span class="n">auto_return</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_mode</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_code</span><span class="p">()</span>
                <span class="c1">#self.log.info(&quot;code = %s&quot; % str(self.code))</span>
                <span class="c1">#print(&quot;code = %s&quot; % str(self.code))</span>

                <span class="c1"># if this is failing, you probably set obj_vector to None...</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="n">slot</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">]</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Could not find key=</span><span class="si">%s</span><span class="s1"> in result=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">result_name</span><span class="p">)</span>
                    <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;There&#39;s probably an extra check for read_mode=1...&quot;</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="k">raise</span>
                <span class="c1">#self.obj.update_data_code(self.data_code)</span>
                <span class="n">build_obj</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>  <span class="c1"># not vectorized</span>
                <span class="n">auto_return</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">auto_return</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span>

    <span class="k">def</span> <span class="nf">_oes_celas</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 11 : CELAS1</span>
<span class="sd">         - 12 : CELAS2</span>
<span class="sd">         - 13 : CELAS3</span>
<span class="sd">         - 14 : CELAS4</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">prefix</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="ow">and</span> <span class="n">postfix</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;stress.&#39;</span>
            <span class="n">obj_real</span> <span class="o">=</span> <span class="n">RealSpringStressArray</span>
            <span class="n">obj_complex</span> <span class="o">=</span> <span class="n">ComplexSpringStressArray</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;celas1_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">12</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;celas2_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">13</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;celas3_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">14</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;celas4_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">prefix</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="ow">and</span> <span class="n">postfix</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;strain.&#39;</span>
            <span class="n">obj_real</span> <span class="o">=</span> <span class="n">RealSpringStrainArray</span>
            <span class="n">obj_complex</span> <span class="o">=</span> <span class="n">ComplexSpringStrainArray</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;celas1_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">12</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;celas2_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">13</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;celas3_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">14</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;celas4_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">8</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 2 * 4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">obj_set_element</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">itotal</span><span class="p">,</span> <span class="n">itotal2</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">nelements</span><span class="p">)</span>

                <span class="c1">#(eid_device, stress)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CELASx real SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="n">fmt1</span> <span class="o">=</span> <span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">fmt1</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">ox</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">eid</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span> <span class="c1"># pragma: no cover</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;table_name=</span><span class="si">%s</span><span class="s1"> sort_method=</span><span class="si">%s</span><span class="s1"> eid_device=</span><span class="si">%s</span><span class="s1"> nonlinear_factor=</span><span class="si">%s</span><span class="s1">&#39;</span>  <span class="o">%</span> <span class="p">(</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">table_name_str</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">,</span>
                            <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">)</span>
                        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%i</span><span class="s1"> result</span><span class="si">%i</span><span class="s1">=[</span><span class="si">%i</span><span class="s1">, </span><span class="si">%f</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">eid</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">eid_device</span><span class="p">,</span> <span class="n">ox</span><span class="p">))</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">ox</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>  <span class="c1"># imag</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">12</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_complex</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">assert</span> <span class="n">obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">obj_set_element</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">itotal</span><span class="p">,</span> <span class="n">itotal2</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">nelements</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                    <span class="n">mag</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
                    <span class="n">phase</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span>
                    <span class="n">rtheta</span> <span class="o">=</span> <span class="n">radians</span><span class="p">(</span><span class="n">phase</span><span class="p">)</span>
                    <span class="n">real_imag</span> <span class="o">=</span> <span class="n">mag</span> <span class="o">*</span> <span class="p">(</span><span class="n">cos</span><span class="p">(</span><span class="n">rtheta</span><span class="p">)</span> <span class="o">+</span> <span class="mf">1.</span><span class="n">j</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">rtheta</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">real</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
                    <span class="n">imag</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span>
                    <span class="n">real_imag</span> <span class="o">=</span> <span class="n">real</span> <span class="o">+</span> <span class="mf">1.</span><span class="n">j</span> <span class="o">*</span> <span class="n">imag</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">real_imag</span>

                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CELASx imag SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">axial_real</span><span class="p">,</span> <span class="n">axial_imag</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                        <span class="n">axial</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">axial_real</span><span class="p">,</span> <span class="n">axial_imag</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">axial</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">axial_real</span><span class="p">,</span> <span class="n">axial_imag</span><span class="p">)</span>

                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%i</span><span class="s1"> result</span><span class="si">%i</span><span class="s1">=[</span><span class="si">%i</span><span class="s1">, </span><span class="si">%f</span><span class="s1">, </span><span class="si">%f</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">eid</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">eid_device</span><span class="p">,</span> <span class="n">axial_real</span><span class="p">,</span> <span class="n">axial_imag</span><span class="p">))</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">axial</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span> <span class="c1"># random</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="c1">#msg = self.code_information()</span>
            <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_crod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 1 : CROD</span>
<span class="sd">         - 3 : CTUBE</span>
<span class="sd">         - 10 : CONROD</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealRodStressArray</span>
            <span class="n">obj_vector_complex</span> <span class="o">=</span> <span class="n">ComplexRodStressArray</span>
            <span class="n">obj_vector_random</span> <span class="o">=</span> <span class="n">RandomRodStressArray</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="c1"># CROD</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;crod_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>  <span class="c1"># CTUBE</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctube_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>  <span class="c1"># CONROD</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;conrod_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealRodStrainArray</span>
            <span class="n">obj_vector_complex</span> <span class="o">=</span> <span class="n">ComplexRodStrainArray</span>
            <span class="n">obj_vector_random</span> <span class="o">=</span> <span class="n">RandomRodStrainArray</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="c1"># CROD</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;crod_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>  <span class="c1"># CTUBE</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctube_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>  <span class="c1"># CONROD</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;conrod_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="c1">#result_name, unused_is_random = self._apply_oes_ato_crm_psd_rms_no(result_name)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">obj_set_element</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">itotal</span><span class="p">,</span> <span class="n">itotal2</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">nelements</span><span class="p">)</span>

                <span class="c1">#[axial, torsion, SMa, SMt]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CROD real SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  [cap, element1, element2, ..., cap]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  cap = </span><span class="si">%i</span><span class="s1">  # assume 1 cap when there could have been multiple</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ndata</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  #elementi = [eid_device, axial, axial_margin, torsion, torsion_margin]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  nelements=</span><span class="si">%i</span><span class="s1">; nnodes=1 # centroid</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nelements</span><span class="p">)</span>

                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;4f&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">axial</span><span class="p">,</span> <span class="n">axial_margin</span><span class="p">,</span> <span class="n">torsion</span><span class="p">,</span> <span class="n">torsion_margin</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%i</span><span class="s1">; C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">axial</span><span class="p">,</span> <span class="n">axial_margin</span><span class="p">,</span> <span class="n">torsion</span><span class="p">,</span> <span class="n">torsion_margin</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span> <span class="c1"># imag</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">20</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_complex</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">obj_set_element</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">itotal</span><span class="p">,</span> <span class="n">itotal2</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">nelements</span><span class="p">)</span>

                <span class="n">real_imag</span> <span class="o">=</span> <span class="n">apply_mag_phase</span><span class="p">(</span><span class="n">floats</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">real_imag</span>

                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CROD imag SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="n">fmt</span> <span class="o">=</span> <span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;4f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">axial_real</span><span class="p">,</span> <span class="n">axial_imag</span><span class="p">,</span> <span class="n">torsion_real</span><span class="p">,</span> <span class="n">torsion_imag</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                        <span class="n">axial</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">axial_real</span><span class="p">,</span> <span class="n">axial_imag</span><span class="p">)</span>
                        <span class="n">torsion</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">torsion_real</span><span class="p">,</span> <span class="n">torsion_imag</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">axial</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">axial_real</span><span class="p">,</span> <span class="n">axial_imag</span><span class="p">)</span>
                        <span class="n">torsion</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">torsion_real</span><span class="p">,</span> <span class="n">torsion_imag</span><span class="p">)</span>

                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">axial</span><span class="p">,</span> <span class="n">torsion</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="c1">#elif self.format_code in [2, 3] and self.num_wide == 8:  # is this imag ???</span>
            <span class="c1">#ntotal = 32</span>
            <span class="c1">#s = self.self.struct_i</span>
            <span class="c1">#nelements = ndata // ntotal</span>
            <span class="c1">#for i in range(nelements):</span>
                <span class="c1">#edata = data[n:n + 4]</span>
                <span class="c1">#eid_device, = s.unpack(edata)</span>
                <span class="c1">#assert eid &gt; 0, eid</span>
                <span class="c1">#n += ntotal</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span> <span class="c1"># random</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_random</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CROD random SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">obj_set_element</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">itotal</span><span class="p">,</span> <span class="n">itotal2</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">nelements</span><span class="p">)</span>

                <span class="c1">#[axial, torsion, SMa, SMt]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  [cap, element1, element2, ..., cap]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  cap = </span><span class="si">%i</span><span class="s1">  # assume 1 cap when there could have been multiple</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ndata</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  #elementi = [eid_device, axial, torsion]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  nelements=</span><span class="si">%i</span><span class="s1">; nnodes=1 # centroid</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nelements</span><span class="p">)</span>

                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2f&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">axial</span><span class="p">,</span> <span class="n">torsion</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%i</span><span class="s1">; C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">axial</span><span class="p">,</span> <span class="n">torsion</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_cbeam</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 2 : CBEAM</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">## TODO: fix method to follow correct pattern...regarding???</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbeam_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbeam_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">111</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="c1"># TODO: vectorize</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">444</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 44 + 10*40  (11 nodes)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
                <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealBeamStressArray</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealBeamStrainArray</span>

            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">nlayers</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">11</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nlayers</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">11</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>

            <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;CBEAM-2-real not vectorized&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CBEAM real SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">oes_cbeam_real_111</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span>
                                       <span class="n">obj</span><span class="p">,</span>
                                       <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">111</span><span class="p">:</span>  <span class="c1"># imag and random?</span>
            <span class="c1"># definitely complex results for MSC Nastran 2016.1</span>

            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">444</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 44 + 10*40  (11 nodes)</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
                <span class="n">obj_vector_complex</span> <span class="o">=</span> <span class="n">ComplexBeamStressArray</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">obj_vector_complex</span> <span class="o">=</span> <span class="n">ComplexBeamStrainArray</span>

            <span class="n">nlayers</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">11</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nlayers</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_complex</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">11</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>

            <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">10</span>  <span class="c1"># 11-1</span>
            <span class="c1">#ntotal = self.num_wide * 4</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">11</span>

                <span class="c1"># chop off eid</span>
                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">111</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">:]</span>
                <span class="n">floats2</span> <span class="o">=</span> <span class="n">floats</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">111</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">eids2</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="n">eids</span><span class="p">]</span> <span class="o">*</span> <span class="mi">11</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>

                    <span class="n">ints2</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

                    <span class="n">nids</span> <span class="o">=</span> <span class="n">ints2</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="c1">#assert nids.min() &gt; 0, nids.min()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids2</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">nids</span>

                <span class="c1">#  0    1   2  3  4  5  6   7   8   9</span>
                <span class="c1"># grid, sd, c, d, e, f, c2, d2, e2, f2</span>
                <span class="n">real_imag</span> <span class="o">=</span> <span class="n">apply_mag_phase</span><span class="p">(</span><span class="n">floats2</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">real_imag</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">sd</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats2</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>

                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="c1">#obj.ielement = ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CBEAM imag SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">oes_cbeam_complex_111</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span>
                                          <span class="n">nelements</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span>
                                          <span class="n">is_magnitude_phase</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">67</span><span class="p">:</span> <span class="c1"># random</span>
            <span class="c1"># TODO: vectorize</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">268</span> <span class="c1"># 1 + 11*6  (11 nodes)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
                <span class="n">obj_vector_random</span> <span class="o">=</span> <span class="n">RandomBeamStressArray</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">obj_vector_random</span> <span class="o">=</span> <span class="n">RandomBeamStrainArray</span>

            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">nlayers</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">11</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nlayers</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_random</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">11</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>

            <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">10</span>  <span class="c1"># 11-1</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;CBEAM-2-random not vectorized&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CBEAM random SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">oes_cbeam_random_67</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span>
                                       <span class="n">obj</span><span class="p">,</span>
                                       <span class="n">nelements</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">67</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESXNO1&#39;</span><span class="p">]:</span>  <span class="c1"># CBEAM</span>
            <span class="c1">#C:\MSC.Software\simcenter_nastran_2019.2\tpl_post2\tr1081x.op2</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;skipping random CBEAM; numwide=67&#39;</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_cshear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 4 : CSHEAR</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># 4-CSHEAR</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealShearStressArray</span>
            <span class="n">obj_vector_complex</span> <span class="o">=</span> <span class="n">ComplexShearStressArray</span>
            <span class="n">obj_vector_random</span> <span class="o">=</span> <span class="n">RandomShearStressArray</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cshear_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealShearStrainArray</span>
            <span class="n">obj_vector_complex</span> <span class="o">=</span> <span class="n">ComplexShearStrainArray</span>
            <span class="n">obj_vector_random</span> <span class="o">=</span> <span class="n">RandomShearStrainArray</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cshear_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">16</span>  <span class="c1"># 4*4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">assert</span> <span class="n">obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
                <span class="n">itime</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">obj_set_element</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">itotal</span><span class="p">,</span> <span class="n">itotal2</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">nelements</span><span class="p">)</span>

                <span class="c1">#[max_strain, avg_strain, margin]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CSHEAR real SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3f&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>  <span class="c1"># num_wide=5</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;CSHEAR-4 - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>

                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">max_strain</span><span class="p">,</span> <span class="n">avg_strain</span><span class="p">,</span> <span class="n">margin</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">max_strain</span><span class="p">,</span> <span class="n">avg_strain</span><span class="p">,</span> <span class="n">margin</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>  <span class="c1"># imag</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">20</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 4*5</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_complex</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">obj_set_element</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">itotal</span><span class="p">,</span> <span class="n">itotal2</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">nelements</span><span class="p">)</span>

                <span class="c1">#(eid_device, etmaxr, etmaxi, etavgr, etavgi)</span>
                <span class="n">real_imag</span> <span class="o">=</span> <span class="n">apply_mag_phase</span><span class="p">(</span><span class="n">floats</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">real_imag</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CSHEAR imag SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;4f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>  <span class="c1"># num_wide=5</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;CSHEAR-4 - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">etmaxr</span><span class="p">,</span> <span class="n">etmaxi</span><span class="p">,</span> <span class="n">etavgr</span><span class="p">,</span> <span class="n">etavgi</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                        <span class="n">etmax</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">etmaxr</span><span class="p">,</span> <span class="n">etmaxi</span><span class="p">)</span>
                        <span class="n">etavg</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">etavgr</span><span class="p">,</span> <span class="n">etavgi</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">etmax</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">etmaxr</span><span class="p">,</span> <span class="n">etmaxi</span><span class="p">)</span>
                        <span class="n">etavg</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">etavgr</span><span class="p">,</span> <span class="n">etavgi</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">etmax</span><span class="p">,</span> <span class="n">etavg</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span> <span class="c1"># random</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">12</span>  <span class="c1"># 3*4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_random</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">assert</span> <span class="n">obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
                <span class="n">itime</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">obj_set_element</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">itotal</span><span class="p">,</span> <span class="n">itotal2</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">nelements</span><span class="p">)</span>

                <span class="c1">#[max_strain, avg_strain, margin]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CSHEAR random SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2f&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>  <span class="c1"># num_wide=5</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;CSHEAR-4 - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>

                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">max_strain</span><span class="p">,</span> <span class="n">avg_strain</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">max_strain</span><span class="p">,</span> <span class="n">avg_strain</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_cbar_34</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 34 : CBAR</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#if isinstance(self.nonlinear_factor, float):</span>
            <span class="c1">#self.sort_bits[0] = 1 # sort2</span>
            <span class="c1">#self.sort_method = 2</span>

        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbar_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbar_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">16</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
                <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealBarStressArray</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealBarStrainArray</span>

            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">64</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>  <span class="c1"># 16*4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  [cap, element1, element2, ..., cap]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="c1">#self.binary_debug.write(&#39;  cap = %i  # assume 1 cap when there could have been multiple\n&#39; % ndata)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  #elementi = [eid_device, s1a, s2a, s3a, s4a, axial, smaxa, smina, MSt,</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;                           s1b, s2b, s3b, s4b, smaxb, sminb,        MSc]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  nelements=</span><span class="si">%i</span><span class="s1">; nnodes=1 # centroid</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nelements</span><span class="p">)</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># self.itime = 0</span>
                <span class="c1"># self.ielement = 0</span>
                <span class="c1"># self.itotal = 0</span>
                <span class="c1">#self.ntimes = 0</span>
                <span class="c1">#self.nelements = 0</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span>

                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">obj_set_element</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">ielement</span><span class="p">,</span> <span class="n">ielement2</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">nelements</span><span class="p">)</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>

                <span class="c1">#[s1a, s2a, s3a, s4a, axial, smaxa, smina, margin_tension,</span>
                <span class="c1"># s1b, s2b, s3b, s4b,        smaxb, sminb, margin_compression]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">ielement2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CBAR real SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                <span class="n">n</span> <span class="o">=</span> <span class="n">oes_cbar_real_16</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">19</span><span class="p">:</span>  <span class="c1"># imag</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
                <span class="n">obj_vector_complex</span> <span class="o">=</span> <span class="n">ComplexBarStressArray</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">obj_vector_complex</span> <span class="o">=</span> <span class="n">ComplexBarStrainArray</span>

            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">76</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_complex</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  [cap, element1, element2, ..., cap]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="c1">#self.binary_debug.write(&#39;  cap = %i  # assume 1 cap when there could have been multiple\n&#39; % ndata)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  #elementi = [eid_device, s1a, s2a, s3a, s4a, axial,</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;                           s1b, s2b, s3b, s4b]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  nelements=</span><span class="si">%i</span><span class="s1">; nnodes=1 # centroid</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nelements</span><span class="p">)</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">itotal2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">19</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">obj_set_element</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">itotal</span><span class="p">,</span> <span class="n">itotal2</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">nelements</span><span class="p">)</span>

                <span class="n">isave1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">]</span>
                <span class="n">isave2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">18</span><span class="p">]</span>
                <span class="n">real_imag</span> <span class="o">=</span> <span class="n">apply_mag_phase</span><span class="p">(</span><span class="n">floats</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">isave1</span><span class="p">,</span> <span class="n">isave2</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">real_imag</span>

                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CBAR imag SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">oes_cbar_complex_19</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">19</span><span class="p">:</span> <span class="c1"># random strain?</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>
            <span class="c1"># random stress/strain per example</span>
            <span class="c1">#</span>
            <span class="c1"># DMAP says random stress has num_wide=10 and</span>
            <span class="c1"># random strain has numwide=19, but it&#39;s wrong...maybe???</span>
            <span class="c1">#</span>
            <span class="c1"># format_code = 1 - NO/RMS (SORT1 regardless of whether this is a SORT2 table or not)</span>
            <span class="c1"># format_code = 2 - ATO/PSD/CRM (actually SORT2)</span>
            <span class="c1">#</span>
            <span class="n">element_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
                <span class="n">obj_vector_random</span> <span class="o">=</span> <span class="n">RandomBarStressArray</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">obj_vector_random</span> <span class="o">=</span> <span class="n">RandomBarStrainArray</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;nonlinear_factor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">element_id</span>

            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="mi">4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_random</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  [cap, element1, element2, ..., cap]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="c1">#self.binary_debug.write(&#39;  cap = %i  # assume 1 cap when there could have been multiple\n&#39; % ndata)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  #elementi = [eid_device, s1a, s2a, s3a, s4a, axial,</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;                           s1b, s2b, s3b, s4b]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  nelements=</span><span class="si">%i</span><span class="s1">; nnodes=1 # centroid</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nelements</span><span class="p">)</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="c1"># self.itime = 0</span>
                <span class="c1"># self.ielement = 0</span>
                <span class="c1"># self.itotal = 0</span>
                <span class="c1">#self.ntimes = 0</span>
                <span class="c1">#self.nelements = 0</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span>

                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">obj_set_element</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">itotal</span><span class="p">,</span> <span class="n">itotal2</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">nelements</span><span class="p">)</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

                <span class="c1">#[s1a, s2a, s3a, s4a, axial,</span>
                <span class="c1"># s1b, s2b, s3b, s4b]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">ielement2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CBAR random SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="c1">#print(self.code_information())</span>
                <span class="c1">#print(&#39;self._analysis_code_fmt =&#39;, self._analysis_code_fmt)</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;9f&#39;</span><span class="p">)</span>
                <span class="c1">#self.log.info(&#39;self.nonlinear_factor = %s&#39; % self.nonlinear_factor)</span>
                <span class="c1">#assert self.sort_method == 2, self.code_information()</span>
                <span class="c1">#if sort_method == 2:</span>
                    <span class="c1">#obj.node_id = 42</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
                     <span class="n">s1a</span><span class="p">,</span> <span class="n">s2a</span><span class="p">,</span> <span class="n">s3a</span><span class="p">,</span> <span class="n">s4a</span><span class="p">,</span> <span class="n">axial</span><span class="p">,</span>
                     <span class="n">s1b</span><span class="p">,</span> <span class="n">s2b</span><span class="p">,</span> <span class="n">s3b</span><span class="p">,</span> <span class="n">s4b</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>

                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="c1">#print(&#39;  eid=%i; C%i=[%s]\n&#39; % (eid, i, &#39;, &#39;.join([&#39;%r&#39; % di for di in out])))</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name_str</span> <span class="o">==</span> <span class="s1">&#39;OESXRMS1&#39;</span><span class="p">:</span>
                        <span class="c1">#assert sort_method == 2</span>
                        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>

                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%i</span><span class="s1">; C</span><span class="si">%i</span><span class="s1">=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">eid</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>

                    <span class="k">assert</span> <span class="n">eid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;dt=</span><span class="si">%s</span><span class="s2"> eid=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_new_eid_sort1</span><span class="p">(</span>
                        <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span>
                        <span class="n">s1a</span><span class="p">,</span> <span class="n">s2a</span><span class="p">,</span> <span class="n">s3a</span><span class="p">,</span> <span class="n">s4a</span><span class="p">,</span> <span class="n">axial</span><span class="p">,</span>
                        <span class="n">s1b</span><span class="p">,</span> <span class="n">s2b</span><span class="p">,</span> <span class="n">s3b</span><span class="p">,</span> <span class="n">s4b</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_csolid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 39 : CTETRA</span>
<span class="sd">         - 67 : CHEXA</span>
<span class="sd">         - 68 : CPENTA</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">prefix</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="ow">and</span> <span class="n">postfix</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;stress.&#39;</span>
            <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealSolidStressArray</span>
            <span class="n">obj_vector_complex</span> <span class="o">=</span> <span class="n">ComplexSolidStressArray</span>
            <span class="n">obj_vector_random</span> <span class="o">=</span> <span class="n">RandomSolidStressArray</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">39</span><span class="p">:</span> <span class="c1"># CTETRA</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">5</span>  <span class="c1"># 1 centroid + 4 corner points</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctetra_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CTETRA4&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">67</span><span class="p">:</span>  <span class="c1"># CHEXA</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">9</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;chexa_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CHEXA8&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">68</span><span class="p">:</span>  <span class="c1"># CPENTA</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">7</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cpenta_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CPENTA6&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">255</span><span class="p">:</span>  <span class="c1"># CPYRAM</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">6</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cpyram_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CPYRAM5&#39;</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">prefix</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="ow">and</span> <span class="n">postfix</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;strain.&#39;</span>
            <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealSolidStrainArray</span>
            <span class="n">obj_vector_complex</span> <span class="o">=</span> <span class="n">ComplexSolidStrainArray</span>
            <span class="n">obj_vector_random</span> <span class="o">=</span> <span class="n">RandomSolidStrainArray</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">39</span><span class="p">:</span> <span class="c1"># CTETRA</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">5</span>  <span class="c1"># 1 centroid + 4 corner points</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctetra_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CTETRA4&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">67</span><span class="p">:</span>  <span class="c1"># CHEXA</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">9</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;chexa_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CHEXA8&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">68</span><span class="p">:</span>  <span class="c1"># CPENTA</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">7</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cpenta_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CPENTA6&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">255</span><span class="p">:</span>  <span class="c1"># CPYRAM</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">6</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cpyram_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CPYRAM5&#39;</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
                <span class="c1">#msg = &#39;sort1 Type=%s num=%s&#39; % (self.element_name, self.element_type)</span>
                <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">numwide_real</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">+</span> <span class="mi">21</span> <span class="o">*</span> <span class="n">nnodes_expected</span>
        <span class="n">numwide_imag</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">+</span> <span class="p">(</span><span class="mi">17</span> <span class="o">-</span> <span class="mi">4</span><span class="p">)</span> <span class="o">*</span> <span class="n">nnodes_expected</span>
        <span class="n">numwide_random</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">+</span> <span class="p">(</span><span class="mi">11</span> <span class="o">-</span> <span class="mi">4</span><span class="p">)</span> <span class="o">*</span> <span class="n">nnodes_expected</span>
        <span class="n">numwide_random2</span> <span class="o">=</span> <span class="mi">18</span> <span class="o">+</span> <span class="mi">14</span> <span class="o">*</span> <span class="p">(</span><span class="n">nnodes_expected</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">preline1</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">)</span>
        <span class="n">preline2</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">preline1</span><span class="p">)</span>

        <span class="c1">#print(&#39;numwide real=%s imag=%s random=%s&#39; % (numwide_real, numwide_imag, numwide_random2))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="n">nnodes_expected</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_real</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span> <span class="o">+</span> <span class="mi">84</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">itotali</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c1"># (eid_device, cid, abcd, nnodes)</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype8</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">ints1</span> <span class="o">=</span> <span class="n">ints</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;ints.shape=</span><span class="si">%s</span><span class="s1">; size=</span><span class="si">%s</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ints</span><span class="o">.</span><span class="n">shape</span><span class="p">),</span> <span class="n">ints</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;nelements=</span><span class="si">%s</span><span class="s1"> numwide_real=</span><span class="si">%s</span><span class="s1"> nelements*numwide=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">,</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">numwide_real</span><span class="p">)</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">cids</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
                    <span class="c1">#nids = ints1[:, 4]</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">repeat</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="n">nnodes_expected</span><span class="p">)</span>
                    <span class="n">ints2</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span>
                    <span class="n">grid_device</span> <span class="o">=</span> <span class="n">ints2</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="c1">#.reshape(nelements, nnodes_expected)</span>

                    <span class="c1">#print(&#39;%s-grid_device=%s&#39; % (self.element_name, grid_device))</span>
                    <span class="n">unused_grid_device2</span> <span class="o">=</span> <span class="n">repeat</span><span class="p">(</span><span class="n">grid_device</span><span class="p">,</span> <span class="n">nnodes_expected</span><span class="p">)</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">grid_device</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">; nnodes=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="n">nnodes_expected</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;itotal=</span><span class="si">%s</span><span class="s1"> itotal2=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">itotal</span><span class="p">,</span> <span class="n">itotal2</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;grid_device.shape=</span><span class="si">%s</span><span class="s1">; size=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">grid_device</span><span class="o">.</span><span class="n">shape</span><span class="p">),</span> <span class="n">grid_device</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
                        <span class="c1">#msg += &#39;nids=%s&#39; % nids</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_cid</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotali</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_cid</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotali</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">cids</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)[:,</span> <span class="mi">4</span><span class="p">:]</span>
                <span class="c1"># 1     9    15   2    10   16  3   11  17   8</span>
                <span class="c1">#[oxx, oyy, ozz, txy, tyz, txz, o1, o2, o3, ovm]</span>
                <span class="c1">#isave = [1, 9, 15, 2, 10, 16, 3, 11, 17, 8]</span>
                <span class="c1">#(grid_device,</span>
                    <span class="c1">#sxx, sxy, s1, a1, a2, a3, pressure, svm,</span>
                    <span class="c1">#syy, syz, s2, b1, b2, b3,</span>
                    <span class="c1">#szz, sxz, s3, c1, c2, c3)</span>
                <span class="n">floats1</span> <span class="o">=</span> <span class="n">floats</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span><span class="c1">#[:, 1:] # drop grid_device</span>

                <span class="c1"># o1/o2/o3 is not max/mid/min.  They are not consistently ordered, so we force it.</span>
                <span class="n">max_mid_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span>
                    <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">],</span>
                    <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">11</span><span class="p">],</span>
                    <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">17</span><span class="p">],</span>
                <span class="p">])</span><span class="o">.</span><span class="n">T</span>
                <span class="n">max_mid_min</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">assert</span> <span class="n">max_mid_min</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">max_mid_min</span><span class="o">.</span><span class="n">shape</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_mid_min</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>

                <span class="c1">#obj.data[obj.itime, itotal:itotal2, :] = floats1[:, isave]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats1</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">16</span><span class="p">]]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">8</span><span class="p">]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">itotali</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CSolid real SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                    <span class="n">fmt1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i4si&#39;</span>
                    <span class="n">fmt2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i20f&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fmt1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;q8sq&#39;</span>
                    <span class="n">fmt2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;q20d&#39;</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">fmt1</span><span class="p">)</span>
                <span class="n">struct2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">fmt2</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-</span><span class="si">%s</span><span class="s1"> nelements=</span><span class="si">%s</span><span class="s1"> nnodes=</span><span class="si">%s</span><span class="s1">; C=[sxx, sxy, s1, a1, a2, a3, pressure, svm,</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">nnodes_expected</span><span class="p">)</span>
                    <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;                                 syy, syz, s2, b1, b2, b3,</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;                                 szz, sxz, s3, c1, c2, c3]</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

                <span class="n">n16</span> <span class="o">=</span> <span class="mi">16</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
                <span class="n">n84</span> <span class="o">=</span> <span class="mi">84</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">n16</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">cid</span><span class="p">,</span> <span class="n">unused_abcd</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> - eid=</span><span class="si">%i</span><span class="s1">; </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">preline1</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>

                    <span class="k">assert</span> <span class="n">nnodes</span> <span class="o">&lt;</span> <span class="mi">21</span><span class="p">,</span> <span class="s1">&#39;print_block(data[n:n+16])&#39;</span>  <span class="c1">#self.print_block(data[n:n+16])</span>

                    <span class="n">n</span> <span class="o">+=</span> <span class="n">n16</span>
                    <span class="k">for</span> <span class="n">inode</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes_expected</span><span class="p">):</span>  <span class="c1"># nodes pts, +1 for centroid (???)</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">struct2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">n84</span><span class="p">])</span> <span class="c1"># 4*21 = 84</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">preline2</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                        <span class="p">(</span><span class="n">grid_device</span><span class="p">,</span>
                         <span class="n">sxx</span><span class="p">,</span> <span class="n">sxy</span><span class="p">,</span> <span class="n">s1</span><span class="p">,</span> <span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">,</span> <span class="n">a3</span><span class="p">,</span> <span class="n">pressure</span><span class="p">,</span> <span class="n">svm</span><span class="p">,</span>
                         <span class="n">syy</span><span class="p">,</span> <span class="n">syz</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span> <span class="n">b1</span><span class="p">,</span> <span class="n">b2</span><span class="p">,</span> <span class="n">b3</span><span class="p">,</span>
                         <span class="n">szz</span><span class="p">,</span> <span class="n">sxz</span><span class="p">,</span> <span class="n">s3</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">c3</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>

                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%s</span><span class="s1"> inode=</span><span class="si">%i</span><span class="s1">; C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                <span class="n">eid</span><span class="p">,</span> <span class="n">grid_device</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>

                        <span class="c1">#if grid_device == 0:</span>
                            <span class="c1">#grid = &#39;CENTER&#39;</span>
                        <span class="c1">#else:</span>
                            <span class="c1">##grid = (grid_device - device_code) // 10</span>
                            <span class="c1">#grid = grid_device</span>

                        <span class="n">grid</span> <span class="o">=</span> <span class="n">grid_device</span>
                        <span class="n">a_cos</span> <span class="o">=</span> <span class="p">[</span><span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">,</span> <span class="n">a3</span><span class="p">]</span>
                        <span class="n">b_cos</span> <span class="o">=</span> <span class="p">[</span><span class="n">b1</span><span class="p">,</span> <span class="n">b2</span><span class="p">,</span> <span class="n">b3</span><span class="p">]</span>
                        <span class="n">c_cos</span> <span class="o">=</span> <span class="p">[</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">c3</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">inode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="c1">#  this is correct, but fails</span>
                            <span class="c1">#element_name = self.element_name + str(nnodes)</span>
                            <span class="n">obj</span><span class="o">.</span><span class="n">add_eid_sort1</span><span class="p">(</span><span class="n">element_name</span><span class="p">,</span> <span class="n">cid</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span>
                                              <span class="n">sxx</span><span class="p">,</span> <span class="n">syy</span><span class="p">,</span> <span class="n">szz</span><span class="p">,</span> <span class="n">sxy</span><span class="p">,</span> <span class="n">syz</span><span class="p">,</span> <span class="n">sxz</span><span class="p">,</span> <span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span> <span class="n">s3</span><span class="p">,</span>
                                              <span class="n">a_cos</span><span class="p">,</span> <span class="n">b_cos</span><span class="p">,</span> <span class="n">c_cos</span><span class="p">,</span> <span class="n">pressure</span><span class="p">,</span> <span class="n">svm</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">obj</span><span class="o">.</span><span class="n">add_node_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">inode</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span>
                                               <span class="n">sxx</span><span class="p">,</span> <span class="n">syy</span><span class="p">,</span> <span class="n">szz</span><span class="p">,</span> <span class="n">sxy</span><span class="p">,</span> <span class="n">syz</span><span class="p">,</span> <span class="n">sxz</span><span class="p">,</span> <span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span> <span class="n">s3</span><span class="p">,</span>
                                               <span class="n">a_cos</span><span class="p">,</span> <span class="n">b_cos</span><span class="p">,</span> <span class="n">c_cos</span><span class="p">,</span> <span class="n">pressure</span><span class="p">,</span> <span class="n">svm</span><span class="p">)</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="n">n84</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_imag</span><span class="p">:</span>  <span class="c1"># complex</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="n">numwide_imag</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span> <span class="o">+=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_complex</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_imag</span><span class="p">)</span>
                <span class="n">floats1</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_imag</span><span class="p">)</span>
                    <span class="n">ints1</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">cids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
                    <span class="n">nids</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
                    <span class="c1"># TODO: ctype, nodef not considered</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="k">assert</span> <span class="n">nids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">nids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">eids2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">eids</span><span class="p">]</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                    <span class="c1">#nids2 = np.vstack([nids] * nnodes_expected).T.ravel()</span>
                    <span class="c1">#print(nids2)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids2</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">nids</span>

                    <span class="n">obj</span><span class="o">.</span><span class="n">element_cid</span><span class="p">[</span><span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_cid</span><span class="p">[</span><span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">cids</span>

                <span class="c1"># 0 is nid</span>
                <span class="n">isave1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
                <span class="n">isave2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">]</span>
                <span class="n">real_imag</span> <span class="o">=</span> <span class="n">apply_mag_phase</span><span class="p">(</span><span class="n">floats1</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">isave1</span><span class="p">,</span> <span class="n">isave2</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">real_imag</span>

                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CSolid imag SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                    <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i4si&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2q8sq&#39;</span><span class="p">)</span>
                <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="n">mapfmt</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;i12f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
                <span class="n">ntotal1</span> <span class="o">=</span> <span class="mi">16</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
                <span class="n">ntotal2</span> <span class="o">=</span> <span class="mi">52</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal1</span><span class="p">]</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal1</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">cid</span><span class="p">,</span> <span class="n">ctype</span><span class="p">,</span> <span class="n">nodef</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%i</span><span class="s1"> C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>

                    <span class="c1">#element_name = self.element_name + str(nodef)  # this is correct, but has problems...</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_eid_sort1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="n">element_name</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">cid</span><span class="p">,</span> <span class="n">ctype</span><span class="p">,</span> <span class="n">nodef</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">inode</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes_expected</span><span class="p">):</span>
                        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal2</span><span class="p">]</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal2</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                        <span class="p">(</span><span class="n">grid</span><span class="p">,</span>
                         <span class="n">exr</span><span class="p">,</span> <span class="n">eyr</span><span class="p">,</span> <span class="n">ezr</span><span class="p">,</span> <span class="n">etxyr</span><span class="p">,</span> <span class="n">etyzr</span><span class="p">,</span> <span class="n">etzxr</span><span class="p">,</span>
                         <span class="n">exi</span><span class="p">,</span> <span class="n">eyi</span><span class="p">,</span> <span class="n">ezi</span><span class="p">,</span> <span class="n">etxyi</span><span class="p">,</span> <span class="n">etyzi</span><span class="p">,</span> <span class="n">etzxi</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                        <span class="c1">#if grid == 0:</span>
                            <span class="c1">#grid = &#39;CENTER&#39;</span>

                        <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                            <span class="n">ex</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">exr</span><span class="p">,</span> <span class="n">exi</span><span class="p">)</span>
                            <span class="n">ey</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">eyr</span><span class="p">,</span> <span class="n">eyi</span><span class="p">)</span>
                            <span class="n">ez</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">ezr</span><span class="p">,</span> <span class="n">ezi</span><span class="p">)</span>
                            <span class="n">etxy</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">etxyr</span><span class="p">,</span> <span class="n">etxyi</span><span class="p">)</span>
                            <span class="n">etyz</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">etyzr</span><span class="p">,</span> <span class="n">etyzi</span><span class="p">)</span>
                            <span class="n">etzx</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">etzxr</span><span class="p">,</span> <span class="n">etzxi</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">ex</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">exr</span><span class="p">,</span> <span class="n">exi</span><span class="p">)</span>
                            <span class="n">ey</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">eyr</span><span class="p">,</span> <span class="n">eyi</span><span class="p">)</span>
                            <span class="n">ez</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">ezr</span><span class="p">,</span> <span class="n">ezi</span><span class="p">)</span>
                            <span class="n">etxy</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">etxyr</span><span class="p">,</span> <span class="n">etxyi</span><span class="p">)</span>
                            <span class="n">etyz</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">etyzr</span><span class="p">,</span> <span class="n">etyzi</span><span class="p">)</span>
                            <span class="n">etzx</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">etzxr</span><span class="p">,</span> <span class="n">etzxi</span><span class="p">)</span>

                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;       node</span><span class="si">%s</span><span class="s1">=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                <span class="n">grid</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">add_node_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="n">inode</span><span class="p">,</span>
                                           <span class="n">ex</span><span class="p">,</span> <span class="n">ey</span><span class="p">,</span> <span class="n">ez</span><span class="p">,</span> <span class="n">etxy</span><span class="p">,</span> <span class="n">etyz</span><span class="p">,</span> <span class="n">etzx</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_random</span><span class="p">:</span> <span class="c1"># random</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="n">numwide_random</span> <span class="o">*</span> <span class="mi">4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="k">assert</span> <span class="n">ndata</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ndata</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_random</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">itotali</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c1"># (eid_device, cid, abcd, nnodes)</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">ints1</span> <span class="o">=</span> <span class="n">ints</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;ints.shape=</span><span class="si">%s</span><span class="s1">; size=</span><span class="si">%s</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ints</span><span class="o">.</span><span class="n">shape</span><span class="p">),</span> <span class="n">ints</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;nelements=</span><span class="si">%s</span><span class="s1"> numwide_real=</span><span class="si">%s</span><span class="s1"> nelements*numwide=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">,</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">numwide_real</span><span class="p">)</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">cids</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
                    <span class="c1">#nids = ints1[:, 4]</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">repeat</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="n">nnodes_expected</span><span class="p">)</span>
                    <span class="n">ints2</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span>
                    <span class="n">grid_device</span> <span class="o">=</span> <span class="n">ints2</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="c1">#.reshape(nelements, nnodes_expected)</span>

                    <span class="c1">#print(&#39;%s-grid_device=%s&#39; % (self.element_name, grid_device))</span>
                    <span class="n">unused_grid_device2</span> <span class="o">=</span> <span class="n">repeat</span><span class="p">(</span><span class="n">grid_device</span><span class="p">,</span> <span class="n">nnodes_expected</span><span class="p">)</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">grid_device</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">; nnodes=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="n">nnodes_expected</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;itotal=</span><span class="si">%s</span><span class="s1"> itotal2=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">itotal</span><span class="p">,</span> <span class="n">itotal2</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;grid_device.shape=</span><span class="si">%s</span><span class="s1">; size=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">grid_device</span><span class="o">.</span><span class="n">shape</span><span class="p">),</span> <span class="n">grid_device</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
                        <span class="c1">#msg += &#39;nids=%s&#39; % nids</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_cid</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotali</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_cid</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotali</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">cids</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)[:,</span> <span class="mi">4</span><span class="p">:]</span>
                <span class="c1"># 1     9    15   2    10   16  3   11  17   8</span>
                <span class="c1">#[oxx, oyy, ozz, txy, tyz, txz, o1, o2, o3, ovm]</span>
                <span class="c1">#isave = [1, 9, 15, 2, 10, 16, 3, 11, 17, 8]</span>
                <span class="c1">#(grid_device,</span>
                    <span class="c1">#sxx, sxy, s1, a1, a2, a3, pressure, svm,</span>
                    <span class="c1">#syy, syz, s2, b1, b2, b3,</span>
                    <span class="c1">#szz, sxz, s3, c1, c2, c3)</span>
                <span class="n">floats1</span> <span class="o">=</span> <span class="n">floats</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span><span class="c1">#[:, 1:] # drop grid_device</span>

                <span class="c1"># o1/o2/o3 is not max/mid/min.  They are not consistently ordered, so we force it.</span>
                <span class="n">max_mid_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span>
                    <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">],</span>
                    <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">11</span><span class="p">],</span>
                    <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">17</span><span class="p">],</span>
                <span class="p">])</span><span class="o">.</span><span class="n">T</span>
                <span class="n">max_mid_min</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">assert</span> <span class="n">max_mid_min</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">max_mid_min</span><span class="o">.</span><span class="n">shape</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_mid_min</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>

                <span class="c1">#obj.data[obj.itime, itotal:itotal2, :] = floats1[:, isave]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats1</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">16</span><span class="p">]]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">8</span><span class="p">]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">itotali</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CSolid random SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i4si&#39;</span><span class="p">)</span>
                <span class="n">struct2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i6f&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span> <span class="ow">and</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-</span><span class="si">%s</span><span class="s1"> nelements=</span><span class="si">%s</span><span class="s1"> nnodes=</span><span class="si">%s</span><span class="s1">; C=[sxx, sxy, s1, a1, a2, a3, pressure, svm,</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">nnodes_expected</span><span class="p">)</span>
                    <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;                                 syy, syz, s2, b1, b2, b3,</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;                                 szz, sxz, s3, c1, c2, c3]</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">16</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">cid</span><span class="p">,</span> <span class="n">unused_abcd</span><span class="p">,</span> <span class="n">grid</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>

                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="k">assert</span> <span class="n">eid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eid</span>

                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span> <span class="ow">and</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> - eid=</span><span class="si">%i</span><span class="s1">; </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">preline1</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>

                    <span class="c1">#assert nnodes &lt; 21, &#39;print_block(data[n:n+16])&#39;  #self.print_block(data[n:n+16])</span>

                    <span class="n">n</span> <span class="o">+=</span> <span class="mi">16</span>
                    <span class="k">for</span> <span class="n">inode</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes_expected</span><span class="p">):</span>  <span class="c1"># nodes pts, +1 for centroid (???)</span>
                        <span class="c1">#self.show_data(data[n:n+48])</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">struct2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="mi">28</span><span class="p">])</span> <span class="c1"># 4*7 = 28</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">preline2</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                        <span class="p">(</span><span class="n">grid_device</span><span class="p">,</span> <span class="n">sxx</span><span class="p">,</span> <span class="n">syy</span><span class="p">,</span> <span class="n">szz</span><span class="p">,</span> <span class="n">txy</span><span class="p">,</span> <span class="n">tyz</span><span class="p">,</span> <span class="n">txz</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>

                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%s</span><span class="s1"> inode=</span><span class="si">%i</span><span class="s1">; C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                <span class="n">eid</span><span class="p">,</span> <span class="n">grid_device</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>

                        <span class="c1">#if grid_device == 0:</span>
                            <span class="c1">#grid = &#39;CENTER&#39;</span>
                        <span class="c1">#else:</span>
                            <span class="c1">##grid = (grid_device - device_code) // 10</span>
                            <span class="c1">#grid = grid_device</span>

                        <span class="n">grid</span> <span class="o">=</span> <span class="n">grid_device</span>
                        <span class="k">if</span> <span class="n">inode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="c1">#  this is correct, but fails</span>
                            <span class="c1">#element_name = self.element_name + str(nnodes)</span>
                            <span class="n">obj</span><span class="o">.</span><span class="n">add_eid_sort1</span><span class="p">(</span><span class="n">element_name</span><span class="p">,</span> <span class="n">cid</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span>
                                              <span class="n">sxx</span><span class="p">,</span> <span class="n">syy</span><span class="p">,</span> <span class="n">szz</span><span class="p">,</span> <span class="n">txy</span><span class="p">,</span> <span class="n">tyz</span><span class="p">,</span> <span class="n">txz</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">obj</span><span class="o">.</span><span class="n">add_node_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">inode</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span>
                                               <span class="n">sxx</span><span class="p">,</span> <span class="n">syy</span><span class="p">,</span> <span class="n">szz</span><span class="p">,</span> <span class="n">txy</span><span class="p">,</span> <span class="n">tyz</span><span class="p">,</span> <span class="n">txz</span><span class="p">)</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="mi">28</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_random2</span><span class="p">:</span>
            <span class="c1">#raise RuntimeError(self.code_information())</span>
            <span class="c1">## a = 18</span>
            <span class="c1">## b = 14</span>
            <span class="c1">## a + b * nnodes = numwide_random3</span>
            <span class="c1">## a + b * 4 = 74  # CTETRA</span>
            <span class="c1">## a + b * 6 = 102 # CPENTA</span>
            <span class="c1">## a + b * 8 = 130 # CHEXA-67</span>
            <span class="c1">#msg = &#39;OES-CHEXA-random-numwide=%s numwide_real=%s numwide_imag=%s numwide_random=%s&#39; % (</span>
                <span class="c1">#self.num_wide, numwide_real, numwide_imag, numwide_random)</span>
            <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg)</span>

            <span class="c1">#print(&#39;numwide real=%s imag=%s random=%s&#39; % (numwide_real, numwide_imag, numwide_random))</span>
            <span class="n">unused_num_wide_random</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">+</span> <span class="n">nnodes_expected</span> <span class="o">*</span> <span class="p">(</span><span class="mi">17</span> <span class="o">-</span> <span class="mi">4</span><span class="p">)</span>

            <span class="c1">#print(&#39;random2=%s&#39; % num_wide_random)</span>
            <span class="c1">#print(self.code_information())</span>

            <span class="c1">#if self.num_wide ==</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_mode</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="c1">#print(&#39;numwide=%s numwide_random=%s attempt2=%s subcase=%s&#39; % (</span>
                <span class="c1">#self.num_wide, numwide_random, num_wide_random, self.isubcase))</span>
            <span class="c1">##msg = self.code_information()</span>
            <span class="c1">#ntotal = 130</span>
            <span class="c1">#nelements = ndata // ntotal</span>

            <span class="c1">## cid, coord_type, nactive_pnts,</span>
            <span class="c1">##      nid, oxx, oyy, ozz, txy, tyz, txz</span>
            <span class="c1">#struct1 = Struct(self._endian + b&#39;2i 4s&#39;)</span>
            <span class="c1">#struct2 = Struct(self._endian + b&#39;i6f&#39;)</span>
            <span class="c1">#for i in range(nelements):</span>
                <span class="c1">#edata = data[n:n+12]</span>
                <span class="c1">#out = struct1.unpack(edata)</span>
                <span class="c1">#(eid_device, cid, abcd) = out</span>
                <span class="c1">#eid, dt = get_eid_dt_from_eid_device(</span>
                    <span class="c1">#eid_device, self.nonlinear_factor, self.sort_method)</span>
                <span class="c1">#if self.is_debug_file:</span>
                    <span class="c1">#self.binary_debug.write(&#39;%s - eid=%i; %s\n&#39; % (preline1, eid, str(out)))</span>
                <span class="c1">#n += 12</span>
                <span class="c1">#for inode in range(nnodes_expected):  # nodes pts, +1 for centroid (???)</span>
                    <span class="c1">#out = struct2.unpack(data[n:n + 28]) # 4*7 = 28</span>
                    <span class="c1">#if self.is_debug_file:</span>
                        <span class="c1">#self.binary_debug.write(&#39;%s - %s\n&#39; % (preline2, str(out)))</span>
                    <span class="c1">#(grid_device, sxx, syy, sz, txy, tyz, txz) = out</span>
            <span class="c1">#msg = &#39;OES-CHEXA-random-numwide=%s numwide_real=%s numwide_imag=%s numwide_random=%s&#39; % (</span>
                <span class="c1">#self.num_wide, numwide_real, numwide_imag, numwide_random)</span>
            <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">67</span><span class="p">:</span>  <span class="c1"># CHEXA</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;skipping random CHEXA; numwide=67&#39;</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">60</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESXRMS1&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESXNO1&#39;</span><span class="p">]:</span>  <span class="c1"># CPENTA</span>
            <span class="c1">#C:\MSC.Software\simcenter_nastran_2019.2\tpl_post2\tr1081x.op2</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;skipping random CPENTA; numwide=60&#39;</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">76</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESXRMS1&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESXNO1&#39;</span><span class="p">]:</span>  <span class="c1"># CHEXA</span>
            <span class="c1"># C:\MSC.Software\simcenter_nastran_2019.2\tpl_post2\tr1081x.op2</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;skipping random CHEXA; numwide=76&#39;</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span> <span class="o">+</span>
                               <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">numwide real=</span><span class="si">%s</span><span class="s1"> imag=</span><span class="si">%s</span><span class="s1"> random=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                   <span class="n">numwide_real</span><span class="p">,</span> <span class="n">numwide_imag</span><span class="p">,</span> <span class="n">numwide_random2</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_csolid2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span>
                     <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 300 : CHEXA</span>
<span class="sd">         - 301 : CPENTA</span>
<span class="sd">         - 302 : CTETRA</span>
<span class="sd">         - 303 : CPYRAM</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="c1">#obj_vector_real = RealSolidStressArray</span>
            <span class="c1">#obj_vector_complex = ComplexSolidStressArray</span>
            <span class="c1">#obj_vector_random = RandomSolidStressArray</span>
            <span class="n">word</span> <span class="o">=</span> <span class="s1">&#39;stress&#39;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">300</span><span class="p">:</span>  <span class="c1"># CHEXA</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">8</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;chexa_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CHEXA8&#39;</span>
                <span class="c1"># real=67</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">301</span><span class="p">:</span>  <span class="c1"># CPENTA</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">6</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cpenta_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CPENTA6&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">302</span><span class="p">:</span>  <span class="c1"># CTETRA</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">4</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctetra_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CTETRA4&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">303</span><span class="p">:</span>  <span class="c1"># CPYRAM</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">5</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cpyram_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CPYRAM5&#39;</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#obj_vector_real = RealSolidStrainArray</span>
            <span class="c1">#obj_vector_complex = ComplexSolidStrainArray</span>
            <span class="c1">#obj_vector_random = RandomSolidStrainArray</span>
            <span class="n">word</span> <span class="o">=</span> <span class="s1">&#39;strain&#39;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">300</span><span class="p">:</span>  <span class="c1"># CHEXA</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">8</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;chexa_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CHEXA8&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">301</span><span class="p">:</span>  <span class="c1"># CPENTA</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">6</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cpenta_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CPENTA6&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">302</span><span class="p">:</span>  <span class="c1"># CTETRA</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">4</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctetra_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CTETRA4&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">303</span><span class="p">:</span>  <span class="c1"># CPYRAM</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">5</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cpyram_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CPYRAM5&#39;</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
                <span class="c1">#msg = &#39;sort1 Type=%s num=%s&#39; % (self.element_name, self.element_type)</span>
                <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">numwide_real</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">8</span> <span class="o">*</span> <span class="n">nnodes_expected</span>
        <span class="c1">#numwide_imag = 4 + (17 - 4) * nnodes_expected</span>
        <span class="c1">#numwide_random = 4 + (11 - 4) * nnodes_expected</span>
        <span class="c1">#numwide_random2 = 18 + 14 * (nnodes_expected - 1)</span>
        <span class="n">preline1</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">)</span>
        <span class="n">preline2</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">preline1</span><span class="p">)</span>

        <span class="c1">#print(&#39;nnodes_expected =&#39;, nnodes_expected)</span>
        <span class="c1">#print(&#39;numwide real=%s imag=%s random=%s&#39; % (numwide_real, numwide_imag, numwide_random2))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="n">nnodes_expected</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_real</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">12</span> <span class="o">+</span> <span class="mi">32</span> <span class="o">*</span> <span class="n">nnodes_expected</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="c1">#auto_return, is_vectorized = self._create_oes_object4(</span>
                <span class="c1">#nelements, result_name, slot, obj_vector_real)</span>
            <span class="n">auto_return</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_mode</span> <span class="o">==</span> <span class="mi">1</span>
            <span class="n">is_vectorized</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">itotali</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c1"># (eid_device, cid, abcd, nnodes)</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">ints1</span> <span class="o">=</span> <span class="n">ints</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;ints.shape=</span><span class="si">%s</span><span class="s1">; size=</span><span class="si">%s</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ints</span><span class="o">.</span><span class="n">shape</span><span class="p">),</span> <span class="n">ints</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;nelements=</span><span class="si">%s</span><span class="s1"> numwide_real=</span><span class="si">%s</span><span class="s1"> nelements*numwide=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">,</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">numwide_real</span><span class="p">)</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">cids</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
                    <span class="c1">#nids = ints1[:, 4]</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">repeat</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="n">nnodes_expected</span><span class="p">)</span>
                    <span class="n">ints2</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span>
                    <span class="n">grid_device</span> <span class="o">=</span> <span class="n">ints2</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="c1">#.reshape(nelements, nnodes_expected)</span>

                    <span class="c1">#print(&#39;%s-grid_device=%s&#39; % (self.element_name, grid_device))</span>
                    <span class="n">unused_grid_device2</span> <span class="o">=</span> <span class="n">repeat</span><span class="p">(</span><span class="n">grid_device</span><span class="p">,</span> <span class="n">nnodes_expected</span><span class="p">)</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">grid_device</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">; nnodes=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="n">nnodes_expected</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;itotal=</span><span class="si">%s</span><span class="s1"> itotal2=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">itotal</span><span class="p">,</span> <span class="n">itotal2</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;grid_device.shape=</span><span class="si">%s</span><span class="s1">; size=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">grid_device</span><span class="o">.</span><span class="n">shape</span><span class="p">),</span> <span class="n">grid_device</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
                        <span class="c1">#msg += &#39;nids=%s&#39; % nids</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_cid</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotali</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_cid</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotali</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">cids</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)[:,</span> <span class="mi">4</span><span class="p">:]</span>
                <span class="c1"># 1     9    15   2    10   16  3   11  17   8</span>
                <span class="c1">#[oxx, oyy, ozz, txy, tyz, txz, o1, o2, o3, ovm]</span>
                <span class="c1">#isave = [1, 9, 15, 2, 10, 16, 3, 11, 17, 8]</span>
                <span class="c1">#(grid_device,</span>
                    <span class="c1">#sxx, sxy, s1, a1, a2, a3, pressure, svm,</span>
                    <span class="c1">#syy, syz, s2, b1, b2, b3,</span>
                    <span class="c1">#szz, sxz, s3, c1, c2, c3)</span>
                <span class="n">floats1</span> <span class="o">=</span> <span class="n">floats</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span><span class="c1">#[:, 1:] # drop grid_device</span>

                <span class="c1"># o1/o2/o3 is not max/mid/min.  They are not consistently ordered, so we force it.</span>
                <span class="n">max_mid_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span>
                    <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">],</span>
                    <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">11</span><span class="p">],</span>
                    <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">17</span><span class="p">],</span>
                <span class="p">])</span><span class="o">.</span><span class="n">T</span>
                <span class="n">max_mid_min</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">assert</span> <span class="n">max_mid_min</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">max_mid_min</span><span class="o">.</span><span class="n">shape</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_mid_min</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>

                <span class="c1">#obj.data[obj.itime, itotal:itotal2, :] = floats1[:, isave]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats1</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">16</span><span class="p">]]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">8</span><span class="p">]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">itotali</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">#if is_vectorized and self.use_vector:  # pragma: no cover</span>
                    <span class="c1">#self.log.debug(&#39;vectorize CSolid real SORT%s&#39; % self.sort_method)</span>

            <span class="c1"># 2 CID I Coordinate System</span>
            <span class="c1"># 3 CTYPE CHAR4 Grid or Gauss</span>
            <span class="c1">#</span>
            <span class="c1"># 4 GRID I Corner grid ID</span>
            <span class="c1"># 5 EX RS Strain in X</span>
            <span class="c1"># 6 EY RS Strain in Y</span>
            <span class="c1"># 7 EZ RS Strain in Z</span>
            <span class="c1"># 8 EXY RS Strain in XY</span>
            <span class="c1"># 9 EYZ RS Strain in YZ</span>
            <span class="c1"># 10 EZX RS Strain in ZX</span>
            <span class="c1"># 11 EVM RS Von Mises strain</span>
            <span class="c1"># Words 4 through 11 repeat nnodes times.</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i4s&#39;</span><span class="p">)</span>
                <span class="n">struct2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i7f&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-</span><span class="si">%s</span><span class="s1"> nelements=</span><span class="si">%s</span><span class="s1"> nnodes=</span><span class="si">%s</span><span class="s1">; C=[sxx, syy, szz, txy, tyz, txz, ovm,</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">nnodes_expected</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">12</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">cid</span><span class="p">,</span> <span class="n">unused_abcd</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> - eid=</span><span class="si">%i</span><span class="s1">; </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">preline1</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>

                    <span class="c1">#assert nnodes &lt; 21, &#39;print_block(data[n:n+16])&#39;  #self.print_block(data[n:n+16])</span>

                    <span class="n">n</span> <span class="o">+=</span> <span class="mi">12</span>
                    <span class="k">for</span> <span class="n">inode</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes_expected</span><span class="p">):</span>  <span class="c1"># nodes pts, no centroid</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">struct2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="mi">32</span><span class="p">])</span> <span class="c1"># 4*8 = 32</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">preline2</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                        <span class="p">(</span><span class="n">grid_device</span><span class="p">,</span> <span class="n">sxx</span><span class="p">,</span> <span class="n">syy</span><span class="p">,</span> <span class="n">szz</span><span class="p">,</span> <span class="n">txy</span><span class="p">,</span> <span class="n">tyz</span><span class="p">,</span> <span class="n">txz</span><span class="p">,</span> <span class="n">ovm</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>

                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%s</span><span class="s1"> inode=</span><span class="si">%i</span><span class="s1">; C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                <span class="n">eid</span><span class="p">,</span> <span class="n">grid_device</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>

                        <span class="c1">#if grid_device == 0:</span>
                            <span class="c1">#grid = &#39;CENTER&#39;</span>
                        <span class="c1">#else:</span>
                            <span class="c1">##grid = (grid_device - device_code) // 10</span>
                            <span class="c1">#grid = grid_device</span>

                        <span class="n">grid</span> <span class="o">=</span> <span class="n">grid_device</span>
                        <span class="c1">#a_cos = [a1, a2, a3]</span>
                        <span class="c1">#b_cos = [b1, b2, b3]</span>
                        <span class="c1">#c_cos = [c1, c2, c3]</span>
                        <span class="k">if</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">inode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="c1">#  this is correct, but fails</span>
                                <span class="c1">#element_name = self.element_name + str(nnodes)</span>
                                <span class="n">obj</span><span class="o">.</span><span class="n">add_eid_sort1</span><span class="p">(</span><span class="n">element_name</span><span class="p">,</span> <span class="n">cid</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span>
                                                  <span class="n">sxx</span><span class="p">,</span> <span class="n">syy</span><span class="p">,</span> <span class="n">szz</span><span class="p">,</span> <span class="n">txy</span><span class="p">,</span> <span class="n">tyz</span><span class="p">,</span> <span class="n">txz</span><span class="p">,</span> <span class="n">ovm</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">obj</span><span class="o">.</span><span class="n">add_node_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">inode</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span>
                                                   <span class="n">sxx</span><span class="p">,</span> <span class="n">syy</span><span class="p">,</span> <span class="n">szz</span><span class="p">,</span> <span class="n">txy</span><span class="p">,</span> <span class="n">tyz</span><span class="p">,</span> <span class="n">txz</span><span class="p">,</span> <span class="n">ovm</span><span class="p">)</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="mi">32</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;skipping </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name_str</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="si">}</span><span class="s1">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">word</span><span class="si">}</span><span class="s1"> csolid2&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">assert</span> <span class="n">n</span> <span class="o">==</span> <span class="n">ntotal</span> <span class="o">*</span> <span class="n">nelements</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;n=</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s1"> ntotal=</span><span class="si">{</span><span class="n">ntotal</span><span class="o">*</span><span class="n">nelements</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_csolid_composite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
                              <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">postfix</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 306 : CHEXALN</span>
<span class="sd">         - 307 : CPENTA</span>
<span class="sd">         #- 302 : CTETRA</span>
<span class="sd">         #- 303 : CPYRAM</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="c1">#obj_vector_real = RealSolidStressArray</span>
            <span class="c1">#obj_vector_complex = ComplexSolidStressArray</span>
            <span class="c1">#obj_vector_random = RandomSolidStressArray</span>
            <span class="n">word</span> <span class="o">=</span> <span class="s1">&#39;stress&#39;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">306</span><span class="p">:</span>  <span class="c1"># CHEXALN</span>
                <span class="n">nedges</span> <span class="o">=</span> <span class="mi">4</span> <span class="c1"># quad</span>
                <span class="c1">#nnodes_expected = 8</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;chexa_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CHEXA8&#39;</span>
                <span class="c1"># real=67</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">307</span><span class="p">:</span>  <span class="c1"># CPENTALN</span>
                <span class="n">nedges</span> <span class="o">=</span> <span class="mi">3</span> <span class="c1"># tri</span>
                <span class="c1">#nnodes_expected = 6</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cpenta_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CPENTA6&#39;</span>
            <span class="c1">#elif self.element_type == 302:  # CTETRA</span>
                <span class="c1">#nnodes_expected = 4</span>
                <span class="c1">#result_name = prefix + &#39;ctetra_stress&#39; + postfix</span>
                <span class="c1">#element_name = &#39;CTETRA4&#39;</span>
            <span class="c1">#elif self.element_type == 303:  # CPYRAM</span>
                <span class="c1">#nnodes_expected = 5</span>
                <span class="c1">#result_name = prefix + &#39;cpyram_stress&#39; + postfix</span>
                <span class="c1">#element_name = &#39;CPYRAM5&#39;</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#obj_vector_real = RealSolidStrainArray</span>
            <span class="c1">#obj_vector_complex = ComplexSolidStrainArray</span>
            <span class="c1">#obj_vector_random = RandomSolidStrainArray</span>
            <span class="n">word</span> <span class="o">=</span> <span class="s1">&#39;strain&#39;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">306</span><span class="p">:</span>  <span class="c1"># CHEXALN</span>
                <span class="n">nedges</span> <span class="o">=</span> <span class="mi">4</span> <span class="c1"># quad</span>
                <span class="c1">#nnodes_expected = 8</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;chexa_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CHEXA8&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">307</span><span class="p">:</span>  <span class="c1"># CPENTA</span>
                <span class="n">nedges</span> <span class="o">=</span> <span class="mi">3</span> <span class="c1"># tri</span>
                <span class="c1">#nnodes_expected = 6</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cpenta_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CPENTA6&#39;</span>
            <span class="c1">#elif self.element_type == 302:  # CTETRA</span>
                <span class="c1">#nnodes_expected = 4</span>
                <span class="c1">#result_name = prefix + &#39;ctetra_strain&#39; + postfix</span>
                <span class="c1">#element_name = &#39;CTETRA4&#39;</span>
            <span class="c1">#elif self.element_type == 303:  # CPYRAM</span>
                <span class="c1">#nnodes_expected = 5</span>
                <span class="c1">#result_name = prefix + &#39;cpyram_strain&#39; + postfix</span>
                <span class="c1">#element_name = &#39;CPYRAM5&#39;</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
                <span class="c1">#msg = &#39;sort1 Type=%s num=%s&#39; % (self.element_name, self.element_type)</span>
                <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">numwide_real</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">8</span> <span class="o">*</span> <span class="n">nedges</span> <span class="c1"># 3 + 8*4 = 35</span>
        <span class="n">numwide_imag</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">7</span> <span class="o">*</span> <span class="mi">14</span> <span class="c1"># 3 + 7 * 14 = 101</span>
        <span class="c1">#print(self.code_information())</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="si">}</span><span class="s1"> numwide_real=</span><span class="si">{</span><span class="n">numwide_real</span><span class="si">}</span><span class="s1"> numwide_imag=</span><span class="si">{</span><span class="n">numwide_imag</span><span class="si">}</span><span class="s1"> -&gt; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1">#numwide_real = 3 + 8 * nnodes_expected</span>
        <span class="c1">#numwide_imag = 4 + (17 - 4) * nnodes_expected</span>
        <span class="c1">#numwide_random = 4 + (11 - 4) * nnodes_expected</span>
        <span class="c1">#numwide_random2 = 18 + 14 * (nnodes_expected - 1)</span>
        <span class="n">preline1</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">)</span>
        <span class="n">preline2</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">preline1</span><span class="p">)</span>

        <span class="c1">#print(&#39;nnodes_expected =&#39;, nnodes_expected)</span>
        <span class="c1">#print(&#39;numwide real=%s imag=%s random=%s&#39; % (numwide_real, numwide_imag, numwide_random2))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="n">nedges</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_real</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">12</span> <span class="o">+</span> <span class="mi">32</span> <span class="o">*</span> <span class="n">nedges</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="c1">#auto_return, is_vectorized = self._create_oes_object4(</span>
                <span class="c1">#nelements, result_name, slot, obj_vector_real)</span>
            <span class="n">auto_return</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_mode</span> <span class="o">==</span> <span class="mi">1</span>
            <span class="n">is_vectorized</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">itotali</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c1"># (eid_device, cid, abcd, nnodes)</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">ints1</span> <span class="o">=</span> <span class="n">ints</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;ints.shape=</span><span class="si">%s</span><span class="s1">; size=</span><span class="si">%s</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ints</span><span class="o">.</span><span class="n">shape</span><span class="p">),</span> <span class="n">ints</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;nelements=</span><span class="si">%s</span><span class="s1"> numwide_real=</span><span class="si">%s</span><span class="s1"> nelements*numwide=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">,</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">numwide_real</span><span class="p">)</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">cids</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
                    <span class="c1">#nids = ints1[:, 4]</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">repeat</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="n">nnodes_expected</span><span class="p">)</span>
                    <span class="n">ints2</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span>
                    <span class="n">grid_device</span> <span class="o">=</span> <span class="n">ints2</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="c1">#.reshape(nelements, nnodes_expected)</span>

                    <span class="c1">#print(&#39;%s-grid_device=%s&#39; % (self.element_name, grid_device))</span>
                    <span class="n">unused_grid_device2</span> <span class="o">=</span> <span class="n">repeat</span><span class="p">(</span><span class="n">grid_device</span><span class="p">,</span> <span class="n">nnodes_expected</span><span class="p">)</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">grid_device</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">; nnodes=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="n">nnodes_expected</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;itotal=</span><span class="si">%s</span><span class="s1"> itotal2=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">itotal</span><span class="p">,</span> <span class="n">itotal2</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;grid_device.shape=</span><span class="si">%s</span><span class="s1">; size=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">grid_device</span><span class="o">.</span><span class="n">shape</span><span class="p">),</span> <span class="n">grid_device</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
                        <span class="c1">#msg += &#39;nids=%s&#39; % nids</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_cid</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotali</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_cid</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotali</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">cids</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)[:,</span> <span class="mi">4</span><span class="p">:]</span>
                <span class="c1"># 1     9    15   2    10   16  3   11  17   8</span>
                <span class="c1">#[oxx, oyy, ozz, txy, tyz, txz, o1, o2, o3, ovm]</span>
                <span class="c1">#isave = [1, 9, 15, 2, 10, 16, 3, 11, 17, 8]</span>
                <span class="c1">#(grid_device,</span>
                    <span class="c1">#sxx, sxy, s1, a1, a2, a3, pressure, svm,</span>
                    <span class="c1">#syy, syz, s2, b1, b2, b3,</span>
                    <span class="c1">#szz, sxz, s3, c1, c2, c3)</span>
                <span class="n">floats1</span> <span class="o">=</span> <span class="n">floats</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span><span class="c1">#[:, 1:] # drop grid_device</span>

                <span class="c1"># o1/o2/o3 is not max/mid/min.  They are not consistently ordered, so we force it.</span>
                <span class="n">max_mid_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span>
                    <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">],</span>
                    <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">11</span><span class="p">],</span>
                    <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">17</span><span class="p">],</span>
                <span class="p">])</span><span class="o">.</span><span class="n">T</span>
                <span class="n">max_mid_min</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">assert</span> <span class="n">max_mid_min</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">max_mid_min</span><span class="o">.</span><span class="n">shape</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_mid_min</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>

                <span class="c1">#obj.data[obj.itime, itotal:itotal2, :] = floats1[:, isave]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats1</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">16</span><span class="p">]]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">8</span><span class="p">]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">itotali</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">#if is_vectorized and self.use_vector:  # pragma: no cover</span>
                    <span class="c1">#self.log.debug(&#39;vectorize CSolid real SORT%s&#39; % self.sort_method)</span>

                <span class="c1"># 1 PLY I Lamina number</span>
                <span class="c1"># 2 FLOC CHAR4 Fiber location (BOT, MID, TOP)</span>
                <span class="c1"># 3 GRID I Edge grid ID (center=0)</span>
                <span class="c1">#</span>
                <span class="c1"># 4 EX1 RS Normal strain in the 1-direction</span>
                <span class="c1"># 5 EY1 RS Normal strain in the 2-direction</span>
                <span class="c1"># 6 EZ1 RS Normal strain in the 3-direction</span>
                <span class="c1"># 7 ET1 RS Shear strain in the 12-plane</span>
                <span class="c1"># 8 EL2 RS Shear strain in the 23-plane</span>
                <span class="c1"># 9 EL1 RS Shear strain in the 13-plane</span>
                <span class="c1"># 10 ETMAX1 RS von Mises strain</span>
                <span class="c1"># For each fiber location requested (PLSLOC), words 3 through 10 repeat 4 times.</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i4s&#39;</span><span class="p">)</span>
                <span class="n">struct2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i7f&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-</span><span class="si">%s</span><span class="s1"> nelements=</span><span class="si">%s</span><span class="s1"> nnodes=</span><span class="si">%s</span><span class="s1">; C=[sxx, syy, szz, txy, tyz, txz, ovm,</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">nedges</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">12</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">ply</span><span class="p">,</span> <span class="n">fiber_location</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="c1">#print(out)</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> - eid=</span><span class="si">%i</span><span class="s1">; </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">preline1</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>

                    <span class="n">n</span> <span class="o">+=</span> <span class="mi">12</span>
                    <span class="k">for</span> <span class="n">inode</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nedges</span><span class="p">):</span>  <span class="c1"># nodes pts, no centroid</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">struct2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="mi">32</span><span class="p">])</span> <span class="c1"># 4*8 = 32</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">preline2</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                        <span class="p">(</span><span class="n">grid_device</span><span class="p">,</span> <span class="n">sxx</span><span class="p">,</span> <span class="n">syy</span><span class="p">,</span> <span class="n">szz</span><span class="p">,</span> <span class="n">txy</span><span class="p">,</span> <span class="n">tyz</span><span class="p">,</span> <span class="n">txz</span><span class="p">,</span> <span class="n">ovm</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>

                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%s</span><span class="s1"> inode=</span><span class="si">%i</span><span class="s1">; C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                <span class="n">eid</span><span class="p">,</span> <span class="n">grid_device</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>

                        <span class="c1">#if grid_device == 0:</span>
                            <span class="c1">#grid = &#39;CENTER&#39;</span>
                        <span class="c1">#else:</span>
                            <span class="c1">##grid = (grid_device - device_code) // 10</span>
                            <span class="c1">#grid = grid_device</span>

                        <span class="n">grid</span> <span class="o">=</span> <span class="n">grid_device</span>
                        <span class="c1">#a_cos = [a1, a2, a3]</span>
                        <span class="c1">#b_cos = [b1, b2, b3]</span>
                        <span class="c1">#c_cos = [c1, c2, c3]</span>
                        <span class="k">if</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">inode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="c1">#  this is correct, but fails</span>
                                <span class="c1">#element_name = self.element_name + str(nnodes)</span>
                                <span class="n">obj</span><span class="o">.</span><span class="n">add_eid_sort1</span><span class="p">(</span><span class="n">element_name</span><span class="p">,</span> <span class="n">cid</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span>
                                                  <span class="n">sxx</span><span class="p">,</span> <span class="n">syy</span><span class="p">,</span> <span class="n">szz</span><span class="p">,</span> <span class="n">txy</span><span class="p">,</span> <span class="n">tyz</span><span class="p">,</span> <span class="n">txz</span><span class="p">,</span> <span class="n">ovm</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">obj</span><span class="o">.</span><span class="n">add_node_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">inode</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span>
                                                   <span class="n">sxx</span><span class="p">,</span> <span class="n">syy</span><span class="p">,</span> <span class="n">szz</span><span class="p">,</span> <span class="n">txy</span><span class="p">,</span> <span class="n">tyz</span><span class="p">,</span> <span class="n">txz</span><span class="p">,</span> <span class="n">ovm</span><span class="p">)</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="mi">32</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;skipping </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name_str</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="si">}</span><span class="s1">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">word</span><span class="si">}</span><span class="s1"> csolid composite&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_imag</span><span class="p">:</span>  <span class="c1"># complex</span>
            <span class="c1"># 1 PLY I Lamina number</span>
            <span class="c1"># 2 FLOC I Fiber location (BOT, MID, TOP)</span>
            <span class="c1">#</span>
            <span class="c1"># 3 GRID I Edge grid ID</span>
            <span class="c1"># 4 EX1R RS Normal strain in the 1-direction</span>
            <span class="c1"># 5 EY1R RS Normal strain in the 2-direction</span>
            <span class="c1"># 6 EZ1R RS Normal strain in the 3-direction</span>
            <span class="c1"># 7 ET1R RS Shear strain in the 12-plane</span>
            <span class="c1"># 8 EL2R RS Shear strain in the 23-plane</span>
            <span class="c1"># 9 EL1R RS Shear strain in the 13-plane</span>
            <span class="c1"># 10 EX1I RS Normal strain in the 1-direction</span>
            <span class="c1"># 11 EY1I RS Normal strain in the 2-direction</span>
            <span class="c1"># 12 EZ1I RS Normal strain in the 3-direction</span>
            <span class="c1"># 13 ET1I RS Shear strain in the 12-plane</span>
            <span class="c1"># 14 EL2I RS Shear strain in the 23-plane</span>
            <span class="c1"># 15 EL1I RS Shear strain in the 13-plane</span>
            <span class="c1"># 16 ETMAX1 RS von Mises strain</span>
            <span class="c1"># For each fiber location requested (PLSLOC), words 3 through 16 repeat 4 times.</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_mode</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_data</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">4</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span><span class="p">])</span>
            <span class="n">aaa</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">assert</span> <span class="n">n</span> <span class="o">==</span> <span class="n">ntotal</span> <span class="o">*</span> <span class="n">nelements</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;n=</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s1"> ntotal=</span><span class="si">{</span><span class="n">ntotal</span><span class="o">*</span><span class="n">nelements</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_csolid_linear_hyperelastic_cosine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 140 :CHEXAFD</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="c1">#obj_vector_real = RealSolidStressArray</span>
            <span class="c1">#obj_vector_complex = ComplexSolidStressArray</span>
            <span class="c1">#obj_vector_random = RandomSolidStressArray</span>
            <span class="n">word</span> <span class="o">=</span> <span class="s1">&#39;stress&#39;</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="n">word</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">140</span><span class="p">:</span>  <span class="c1"># CHEXA</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">8</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;chexa_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CHEXA8&#39;</span>
                <span class="c1"># real=122</span>
            <span class="c1">#elif self.element_type == 160:  # CPENTA</span>
                <span class="c1">#nnodes_expected = 6</span>
                <span class="c1">#result_name = prefix + &#39;cpenta_stress&#39; + postfix</span>
                <span class="c1">#element_name = &#39;CPENTA6&#39;</span>
            <span class="c1">#elif self.element_type == 165:  # CPENTA</span>
                <span class="c1">#nnodes_expected = 21</span>
                <span class="c1">#result_name = prefix + &#39;cpenta_stress&#39; + postfix</span>
                <span class="c1">#element_name = &#39;CPENTA6&#39;</span>

            <span class="c1">#elif self.element_type == 161:  # CTETRA</span>
                <span class="c1">#nnodes_expected = 1</span>
                <span class="c1">#result_name = prefix + &#39;ctetra_stress&#39; + postfix</span>
                <span class="c1">#element_name = &#39;CTETRA4&#39;</span>
            <span class="c1">#elif self.element_type == 166:  # CTETRA</span>
                <span class="c1">#nnodes_expected = 5</span>
                <span class="c1">#result_name = prefix + &#39;ctetra_stress&#39; + postfix</span>
                <span class="c1">#element_name = &#39;CTETRA4&#39;</span>
            <span class="c1">#elif self.element_type == 303:  # CPYRAM</span>
                <span class="c1">#nnodes_expected = 5</span>
                <span class="c1">#result_name = prefix + &#39;cpyram_stress&#39; + postfix</span>
                <span class="c1">#element_name = &#39;CPYRAM5&#39;</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#obj_vector_real = RealSolidStrainArray</span>
            <span class="c1">#obj_vector_complex = ComplexSolidStrainArray</span>
            <span class="c1">#obj_vector_random = RandomSolidStrainArray</span>
            <span class="n">word</span> <span class="o">=</span> <span class="s1">&#39;strain&#39;</span>
            <span class="c1">#if self.element_type == 202:  # CHEXA</span>
                <span class="c1">#nnodes_expected = 8</span>
                <span class="c1">#result_name = prefix + &#39;chexa_strain&#39; + postfix</span>
                <span class="c1">#element_name = &#39;CHEXA8&#39;</span>
            <span class="c1">#elif self.element_type == 301:  # CPENTA</span>
                <span class="c1">#nnodes_expected = 6</span>
                <span class="c1">#result_name = prefix + &#39;cpenta_strain&#39; + postfix</span>
                <span class="c1">#element_name = &#39;CPENTA6&#39;</span>
            <span class="c1">#elif self.element_type == 302:  # CTETRA</span>
                <span class="c1">#nnodes_expected = 4</span>
                <span class="c1">#result_name = prefix + &#39;ctetra_strain&#39; + postfix</span>
                <span class="c1">#element_name = &#39;CTETRA4&#39;</span>
            <span class="c1">#elif self.element_type == 303:  # CPYRAM</span>
                <span class="c1">#nnodes_expected = 5</span>
                <span class="c1">#result_name = prefix + &#39;cpyram_strain&#39; + postfix</span>
                <span class="c1">#element_name = &#39;CPYRAM5&#39;</span>
            <span class="c1">#else:  # pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
                <span class="c1">#msg = &#39;sort1 Type=%s num=%s&#39; % (self.element_name, self.element_type)</span>
                <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">numwide_real</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">20</span> <span class="o">*</span> <span class="n">nnodes_expected</span>
        <span class="c1">#numwide_real = 162  # CHEXA</span>
        <span class="c1">#print(self.num_wide, numwide_real)</span>
        <span class="k">assert</span> <span class="n">numwide_real</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span><span class="p">,</span> <span class="n">numwide_real</span>
        <span class="c1">#numwide_imag = 4 + (17 - 4) * nnodes_expected</span>
        <span class="c1">#numwide_random = 4 + (11 - 4) * nnodes_expected</span>
        <span class="c1">#numwide_random2 = 18 + 14 * (nnodes_expected - 1)</span>
        <span class="n">preline1</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">)</span>
        <span class="n">preline2</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">preline1</span><span class="p">)</span>

        <span class="c1">#print(&#39;nnodes_expected =&#39;, nnodes_expected)</span>
        <span class="c1">#print(&#39;numwide real=%s imag=%s random=%s&#39; % (numwide_real, numwide_imag, numwide_random2))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="n">nnodes_expected</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_real</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">80</span> <span class="o">*</span> <span class="n">nnodes_expected</span>
            <span class="c1">#ntotal = numwide_real * 4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="k">assert</span> <span class="n">ndata</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>
            <span class="c1">#auto_return, is_vectorized = self._create_oes_object4(</span>
                <span class="c1">#nelements, result_name, slot, obj_vector_real)</span>
            <span class="n">auto_return</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_mode</span> <span class="o">==</span> <span class="mi">1</span>
            <span class="n">is_vectorized</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">itotali</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c1"># (eid_device, cid, abcd, nnodes)</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">ints1</span> <span class="o">=</span> <span class="n">ints</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;ints.shape=</span><span class="si">%s</span><span class="s1">; size=</span><span class="si">%s</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ints</span><span class="o">.</span><span class="n">shape</span><span class="p">),</span> <span class="n">ints</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;nelements=</span><span class="si">%s</span><span class="s1"> numwide_real=</span><span class="si">%s</span><span class="s1"> nelements*numwide=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">,</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">numwide_real</span><span class="p">)</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">cids</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
                    <span class="c1">#nids = ints1[:, 4]</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">repeat</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="n">nnodes_expected</span><span class="p">)</span>
                    <span class="n">ints2</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span>
                    <span class="n">grid_device</span> <span class="o">=</span> <span class="n">ints2</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="c1">#.reshape(nelements, nnodes_expected)</span>

                    <span class="c1">#print(&#39;%s-grid_device=%s&#39; % (self.element_name, grid_device))</span>
                    <span class="n">unused_grid_device2</span> <span class="o">=</span> <span class="n">repeat</span><span class="p">(</span><span class="n">grid_device</span><span class="p">,</span> <span class="n">nnodes_expected</span><span class="p">)</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">grid_device</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">; nnodes=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="n">nnodes_expected</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;itotal=</span><span class="si">%s</span><span class="s1"> itotal2=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">itotal</span><span class="p">,</span> <span class="n">itotal2</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;grid_device.shape=</span><span class="si">%s</span><span class="s1">; size=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">grid_device</span><span class="o">.</span><span class="n">shape</span><span class="p">),</span> <span class="n">grid_device</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
                        <span class="c1">#msg += &#39;nids=%s&#39; % nids</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_cid</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotali</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_cid</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotali</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">cids</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)[:,</span> <span class="mi">4</span><span class="p">:]</span>
                <span class="c1"># 1     9    15   2    10   16  3   11  17   8</span>
                <span class="c1">#[oxx, oyy, ozz, txy, tyz, txz, o1, o2, o3, ovm]</span>
                <span class="c1">#isave = [1, 9, 15, 2, 10, 16, 3, 11, 17, 8]</span>
                <span class="c1">#(grid_device,</span>
                    <span class="c1">#sxx, sxy, s1, a1, a2, a3, pressure, svm,</span>
                    <span class="c1">#syy, syz, s2, b1, b2, b3,</span>
                    <span class="c1">#szz, sxz, s3, c1, c2, c3)</span>
                <span class="n">floats1</span> <span class="o">=</span> <span class="n">floats</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span><span class="c1">#[:, 1:] # drop grid_device</span>

                <span class="c1"># o1/o2/o3 is not max/mid/min.  They are not consistently ordered, so we force it.</span>
                <span class="n">max_mid_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span>
                    <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">],</span>
                    <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">11</span><span class="p">],</span>
                    <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">17</span><span class="p">],</span>
                <span class="p">])</span><span class="o">.</span><span class="n">T</span>
                <span class="n">max_mid_min</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">assert</span> <span class="n">max_mid_min</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">max_mid_min</span><span class="o">.</span><span class="n">shape</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_mid_min</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>

                <span class="c1">#obj.data[obj.itime, itotal:itotal2, :] = floats1[:, isave]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats1</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">16</span><span class="p">]]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">8</span><span class="p">]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">itotali</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">#if is_vectorized and self.use_vector:  # pragma: no cover</span>
                    <span class="c1">#self.log.debug(&#39;vectorize CSolid real SORT%s&#39; % self.sort_method)</span>

                <span class="c1"># ELTYPE =140 Hyperelastic 8-noded hexahedron element linear format</span>
                <span class="c1"># (HEXAFD)</span>
                <span class="c1"># 2 TYPE CHAR4 Gaus</span>
                <span class="c1">#</span>
                <span class="c1"># 3 ID I</span>
                <span class="c1"># 4 SX RS</span>
                <span class="c1"># 5 SXY RS</span>
                <span class="c1"># 6 PA RS</span>
                <span class="c1"># 7 AX RS</span>
                <span class="c1"># 8 AY RS</span>
                <span class="c1"># 9 AZ RS</span>
                <span class="c1"># 10 PRESSURE RS</span>
                <span class="c1"># 11 SY RS</span>
                <span class="c1"># 12 SYZ RS</span>
                <span class="c1"># 13 PB RS</span>
                <span class="c1"># 14 BX RS</span>
                <span class="c1"># 15 BY RS</span>
                <span class="c1"># 16 BZ RS</span>
                <span class="c1"># 17 SZ RS</span>
                <span class="c1"># 18 SZX RS</span>
                <span class="c1"># 19 PC RS</span>
                <span class="c1"># 20 CX RS</span>
                <span class="c1"># 21 CY RS</span>
                <span class="c1"># 22 CZ RS</span>
                <span class="c1"># Words 3 through 22 repeat 008 times</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;4s&#39;</span><span class="p">)</span>
                <span class="n">struct2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i19f&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="si">}</span><span class="s1">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="si">}</span><span class="s1"> nelements=</span><span class="si">{</span><span class="n">nelements</span><span class="si">}</span><span class="s1"> &#39;</span>
                        <span class="sa">f</span><span class="s1">&#39;nnodes=</span><span class="si">{</span><span class="n">nnodes_expected</span><span class="si">}</span><span class="s1">; &#39;</span>
                        <span class="s1">&#39;C=[oxx, oxy, pa, ax, ay, az, pressure, &#39;</span>
                        <span class="s1">&#39;oyy, oyz, pb, bx, by, bz, &#39;</span>
                        <span class="s1">&#39;ozz, oxz, pc, cx, cy, cz]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">8</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">grid_gauss</span><span class="p">,</span> <span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="c1">#print(out)</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> - eid=</span><span class="si">%i</span><span class="s1">; </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">preline1</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="c1">#assert nnodes &lt; 21, &#39;print_block(data[n:n+16])&#39;  #self.print_block(data[n:n+16])</span>

                    <span class="n">n</span> <span class="o">+=</span> <span class="mi">8</span>
                    <span class="k">for</span> <span class="n">inode</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes_expected</span><span class="p">):</span>  <span class="c1"># nodes pts, no centroid</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">struct2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="mi">80</span><span class="p">])</span> <span class="c1"># 4*20 = 80</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">preline2</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                        <span class="c1"># nid, oxx, oxy, pa, ax, ay, az, pressure,</span>
                        <span class="c1">#      oyy, oyz, pb, bx, by, bz,</span>
                        <span class="c1">#      ozz, oxz, pc, cx, cy, cz</span>
                        <span class="p">(</span><span class="n">grid_device</span><span class="p">,</span>
                         <span class="n">oxx</span><span class="p">,</span> <span class="n">oxy</span><span class="p">,</span> <span class="n">pa</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">ay</span><span class="p">,</span> <span class="n">az</span><span class="p">,</span> <span class="n">pressure</span><span class="p">,</span>
                         <span class="n">oyy</span><span class="p">,</span> <span class="n">oyz</span><span class="p">,</span> <span class="n">pb</span><span class="p">,</span> <span class="n">bx</span><span class="p">,</span> <span class="n">by</span><span class="p">,</span> <span class="n">bz</span><span class="p">,</span>
                         <span class="n">ozz</span><span class="p">,</span> <span class="n">oxz</span><span class="p">,</span> <span class="n">pc</span><span class="p">,</span> <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">,</span> <span class="n">cz</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                        <span class="c1">#print(out)</span>

                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%s</span><span class="s1"> inode=</span><span class="si">%i</span><span class="s1">; C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                <span class="n">eid</span><span class="p">,</span> <span class="n">grid_device</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>

                        <span class="k">if</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">inode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="c1">#  this is correct, but fails</span>
                                <span class="c1">#element_name = self.element_name + str(nnodes)</span>
                                <span class="n">obj</span><span class="o">.</span><span class="n">add_eid_sort1</span><span class="p">(</span><span class="n">element_name</span><span class="p">,</span> <span class="n">cid</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span>
                                                  <span class="n">sxx</span><span class="p">,</span> <span class="n">syy</span><span class="p">,</span> <span class="n">szz</span><span class="p">,</span> <span class="n">txy</span><span class="p">,</span> <span class="n">tyz</span><span class="p">,</span> <span class="n">txz</span><span class="p">,</span> <span class="n">ovm</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">obj</span><span class="o">.</span><span class="n">add_node_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">inode</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span>
                                                   <span class="n">sxx</span><span class="p">,</span> <span class="n">syy</span><span class="p">,</span> <span class="n">szz</span><span class="p">,</span> <span class="n">txy</span><span class="p">,</span> <span class="n">tyz</span><span class="p">,</span> <span class="n">txz</span><span class="p">,</span> <span class="n">ovm</span><span class="p">)</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="mi">80</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;skipping </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name_str</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="si">}</span><span class="s1">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="si">}</span><span class="s1"> linear hyperelastic cosine </span><span class="si">{</span><span class="n">word</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">assert</span> <span class="n">n</span> <span class="o">==</span> <span class="n">ntotal</span> <span class="o">*</span> <span class="n">nelements</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;n=</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s1"> ntotal=</span><span class="si">{</span><span class="n">ntotal</span><span class="o">*</span><span class="n">nelements</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_csolid_linear_hyperelastic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 160 :CPENTAFD</span>
<span class="sd">         - 163 : CHEXAFD</span>
<span class="sd">         - 166 : CTETRAFD</span>

<span class="sd">        # centroid??</span>
<span class="sd">         - 161 : CTETRAFD</span>

<span class="sd">        # more nodes???</span>
<span class="sd">         - 165 : CPENTAFD</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="c1">#obj_vector_real = RealSolidStressArray</span>
            <span class="c1">#obj_vector_complex = ComplexSolidStressArray</span>
            <span class="c1">#obj_vector_random = RandomSolidStressArray</span>
            <span class="n">word</span> <span class="o">=</span> <span class="s1">&#39;stress&#39;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">163</span><span class="p">:</span>  <span class="c1"># CHEXA</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">27</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;chexa_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CHEXA8&#39;</span>
                <span class="c1"># real=122</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">160</span><span class="p">:</span>  <span class="c1"># CPENTA</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">6</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cpenta_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CPENTA6&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">165</span><span class="p">:</span>  <span class="c1"># CPENTA</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">21</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cpenta_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CPENTA6&#39;</span>

            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">161</span><span class="p">:</span>  <span class="c1"># CTETRA</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctetra_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CTETRA4&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">166</span><span class="p">:</span>  <span class="c1"># CTETRA</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">5</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctetra_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CTETRA4&#39;</span>
            <span class="c1">#elif self.element_type == 303:  # CPYRAM</span>
                <span class="c1">#nnodes_expected = 5</span>
                <span class="c1">#result_name = prefix + &#39;cpyram_stress&#39; + postfix</span>
                <span class="c1">#element_name = &#39;CPYRAM5&#39;</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#obj_vector_real = RealSolidStrainArray</span>
            <span class="c1">#obj_vector_complex = ComplexSolidStrainArray</span>
            <span class="c1">#obj_vector_random = RandomSolidStrainArray</span>
            <span class="n">word</span> <span class="o">=</span> <span class="s1">&#39;strain&#39;</span>
            <span class="c1">#if self.element_type == 202:  # CHEXA</span>
                <span class="c1">#nnodes_expected = 8</span>
                <span class="c1">#result_name = prefix + &#39;chexa_strain&#39; + postfix</span>
                <span class="c1">#element_name = &#39;CHEXA8&#39;</span>
            <span class="c1">#elif self.element_type == 301:  # CPENTA</span>
                <span class="c1">#nnodes_expected = 6</span>
                <span class="c1">#result_name = prefix + &#39;cpenta_strain&#39; + postfix</span>
                <span class="c1">#element_name = &#39;CPENTA6&#39;</span>
            <span class="c1">#elif self.element_type == 302:  # CTETRA</span>
                <span class="c1">#nnodes_expected = 4</span>
                <span class="c1">#result_name = prefix + &#39;ctetra_strain&#39; + postfix</span>
                <span class="c1">#element_name = &#39;CTETRA4&#39;</span>
            <span class="c1">#elif self.element_type == 303:  # CPYRAM</span>
                <span class="c1">#nnodes_expected = 5</span>
                <span class="c1">#result_name = prefix + &#39;cpyram_strain&#39; + postfix</span>
                <span class="c1">#element_name = &#39;CPYRAM5&#39;</span>
            <span class="c1">#else:  # pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
                <span class="c1">#msg = &#39;sort1 Type=%s num=%s&#39; % (self.element_name, self.element_type)</span>
                <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">numwide_real</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">20</span> <span class="o">*</span> <span class="n">nnodes_expected</span>
        <span class="c1">#numwide_real = 122  # CHEXA</span>
        <span class="c1">#print(self.num_wide, numwide_real)</span>
        <span class="k">assert</span> <span class="n">numwide_real</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span><span class="p">,</span> <span class="n">numwide_real</span>
        <span class="c1">#numwide_imag = 4 + (17 - 4) * nnodes_expected</span>
        <span class="c1">#numwide_random = 4 + (11 - 4) * nnodes_expected</span>
        <span class="c1">#numwide_random2 = 18 + 14 * (nnodes_expected - 1)</span>
        <span class="n">preline1</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">)</span>
        <span class="n">preline2</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">preline1</span><span class="p">)</span>

        <span class="c1">#print(&#39;nnodes_expected =&#39;, nnodes_expected)</span>
        <span class="c1">#print(&#39;numwide real=%s imag=%s random=%s&#39; % (numwide_real, numwide_imag, numwide_random2))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="n">nnodes_expected</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_real</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">80</span> <span class="o">*</span> <span class="n">nnodes_expected</span>
            <span class="c1">#ntotal = numwide_real * 4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="k">assert</span> <span class="n">ndata</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>
            <span class="c1">#auto_return, is_vectorized = self._create_oes_object4(</span>
                <span class="c1">#nelements, result_name, slot, obj_vector_real)</span>
            <span class="n">auto_return</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_mode</span> <span class="o">==</span> <span class="mi">1</span>
            <span class="n">is_vectorized</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">itotali</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c1"># (eid_device, cid, abcd, nnodes)</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">ints1</span> <span class="o">=</span> <span class="n">ints</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;ints.shape=</span><span class="si">%s</span><span class="s1">; size=</span><span class="si">%s</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ints</span><span class="o">.</span><span class="n">shape</span><span class="p">),</span> <span class="n">ints</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;nelements=</span><span class="si">%s</span><span class="s1"> numwide_real=</span><span class="si">%s</span><span class="s1"> nelements*numwide=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">,</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">numwide_real</span><span class="p">)</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">cids</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
                    <span class="c1">#nids = ints1[:, 4]</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">repeat</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="n">nnodes_expected</span><span class="p">)</span>
                    <span class="n">ints2</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span>
                    <span class="n">grid_device</span> <span class="o">=</span> <span class="n">ints2</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="c1">#.reshape(nelements, nnodes_expected)</span>

                    <span class="c1">#print(&#39;%s-grid_device=%s&#39; % (self.element_name, grid_device))</span>
                    <span class="n">unused_grid_device2</span> <span class="o">=</span> <span class="n">repeat</span><span class="p">(</span><span class="n">grid_device</span><span class="p">,</span> <span class="n">nnodes_expected</span><span class="p">)</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">grid_device</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">; nnodes=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="n">nnodes_expected</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;itotal=</span><span class="si">%s</span><span class="s1"> itotal2=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">itotal</span><span class="p">,</span> <span class="n">itotal2</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;grid_device.shape=</span><span class="si">%s</span><span class="s1">; size=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">grid_device</span><span class="o">.</span><span class="n">shape</span><span class="p">),</span> <span class="n">grid_device</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
                        <span class="c1">#msg += &#39;nids=%s&#39; % nids</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_cid</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotali</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_cid</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotali</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">cids</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)[:,</span> <span class="mi">4</span><span class="p">:]</span>
                <span class="c1"># 1     9    15   2    10   16  3   11  17   8</span>
                <span class="c1">#[oxx, oyy, ozz, txy, tyz, txz, o1, o2, o3, ovm]</span>
                <span class="c1">#isave = [1, 9, 15, 2, 10, 16, 3, 11, 17, 8]</span>
                <span class="c1">#(grid_device,</span>
                    <span class="c1">#sxx, sxy, s1, a1, a2, a3, pressure, svm,</span>
                    <span class="c1">#syy, syz, s2, b1, b2, b3,</span>
                    <span class="c1">#szz, sxz, s3, c1, c2, c3)</span>
                <span class="n">floats1</span> <span class="o">=</span> <span class="n">floats</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span><span class="c1">#[:, 1:] # drop grid_device</span>

                <span class="c1"># o1/o2/o3 is not max/mid/min.  They are not consistently ordered, so we force it.</span>
                <span class="n">max_mid_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span>
                    <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">],</span>
                    <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">11</span><span class="p">],</span>
                    <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">17</span><span class="p">],</span>
                <span class="p">])</span><span class="o">.</span><span class="n">T</span>
                <span class="n">max_mid_min</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">assert</span> <span class="n">max_mid_min</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">max_mid_min</span><span class="o">.</span><span class="n">shape</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_mid_min</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>

                <span class="c1">#obj.data[obj.itime, itotal:itotal2, :] = floats1[:, isave]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats1</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">16</span><span class="p">]]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">8</span><span class="p">]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">itotali</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">#if is_vectorized and self.use_vector:  # pragma: no cover</span>
                    <span class="c1">#self.log.debug(&#39;vectorize CSolid real SORT%s&#39; % self.sort_method)</span>

                <span class="c1">#ELTYPE =163 Linear form for hyperelastic 20 node HEXAFD</span>
                <span class="c1">#2 TYPE CHAR4 Gaus</span>
                <span class="c1">#</span>
                <span class="c1">#3 ID I</span>
                <span class="c1">#4 SX RS</span>
                <span class="c1">#5 SXY RS</span>
                <span class="c1">#6 PA RS</span>
                <span class="c1">#7 AX RS</span>
                <span class="c1">#8 AY RS</span>
                <span class="c1">#9 AZ RS</span>
                <span class="c1">#10 PRESSURE RS</span>
                <span class="c1">#11 SY RS</span>
                <span class="c1">#12 SYZ RS</span>
                <span class="c1">#13 PB RS</span>
                <span class="c1">#14 BX RS</span>
                <span class="c1">#15 BY RS</span>
                <span class="c1">#16 BZ RS</span>
                <span class="c1">#17 SZ RS</span>
                <span class="c1">#18 SZX RS</span>
                <span class="c1">#19 PC RS</span>
                <span class="c1">#20 CX RS</span>
                <span class="c1">#21 CY RS</span>
                <span class="c1">#22 CZ RS</span>
                <span class="c1">#Words 3 through 22 repeat 027 times</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;4s&#39;</span><span class="p">)</span>
                <span class="n">struct2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i19f&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                    <span class="c1">#msg = (</span>
                        <span class="c1">#f&#39;{self.element_name}-{self.element_type} nelements={nelements} &#39;</span>
                        <span class="c1">#f&#39;nnodes={nnodes_expected}; &#39;</span>
                        <span class="c1">#&#39;C=[sxx, syy, szz, txy, tyz, txz, pressure, &#39;</span>
                        <span class="c1">#&#39;evol, exx, eyy, ezz, exy, eyz, exz]\n&#39;)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">8</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">unused_abcd</span><span class="p">,</span> <span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> - eid=</span><span class="si">%i</span><span class="s1">; </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">preline1</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="c1">#assert nnodes &lt; 21, &#39;print_block(data[n:n+16])&#39;  #self.print_block(data[n:n+16])</span>

                    <span class="n">n</span> <span class="o">+=</span> <span class="mi">8</span>
                    <span class="k">for</span> <span class="n">inode</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes_expected</span><span class="p">):</span>  <span class="c1"># nodes pts, no centroid</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">struct2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="mi">80</span><span class="p">])</span> <span class="c1"># 4*20 = 80</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">preline2</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                        <span class="c1">#(grid_device, sxx, syy, szz, txy, tyz, txz, pressure,</span>
                         <span class="c1">#evol, exx, eyy, ezz, exy, eyz, exz) = out</span>
                        <span class="c1">#print(out)</span>

                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%s</span><span class="s1"> inode=</span><span class="si">%i</span><span class="s1">; C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                <span class="n">eid</span><span class="p">,</span> <span class="n">grid_device</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>

                        <span class="c1">#grid = grid_device</span>
                        <span class="k">if</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">inode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="c1">#  this is correct, but fails</span>
                                <span class="c1">#element_name = self.element_name + str(nnodes)</span>
                                <span class="n">obj</span><span class="o">.</span><span class="n">add_eid_sort1</span><span class="p">(</span><span class="n">element_name</span><span class="p">,</span> <span class="n">cid</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span>
                                                  <span class="n">sxx</span><span class="p">,</span> <span class="n">syy</span><span class="p">,</span> <span class="n">szz</span><span class="p">,</span> <span class="n">txy</span><span class="p">,</span> <span class="n">tyz</span><span class="p">,</span> <span class="n">txz</span><span class="p">,</span> <span class="n">ovm</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">obj</span><span class="o">.</span><span class="n">add_node_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">inode</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span>
                                                   <span class="n">sxx</span><span class="p">,</span> <span class="n">syy</span><span class="p">,</span> <span class="n">szz</span><span class="p">,</span> <span class="n">txy</span><span class="p">,</span> <span class="n">tyz</span><span class="p">,</span> <span class="n">txz</span><span class="p">,</span> <span class="n">ovm</span><span class="p">)</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="mi">80</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;skipping </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name_str</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="si">}</span><span class="s1">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="si">}</span><span class="s1"> linear hyperelastic </span><span class="si">{</span><span class="n">word</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span> <span class="o">+</span>
                               <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">numwide real=</span><span class="si">%s</span><span class="s1"> imag=</span><span class="si">%s</span><span class="s1"> random=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                   <span class="n">numwide_real</span><span class="p">,</span> <span class="n">numwide_imag</span><span class="p">,</span> <span class="n">numwide_random2</span><span class="p">))</span>
        <span class="k">assert</span> <span class="n">n</span> <span class="o">==</span> <span class="n">ntotal</span> <span class="o">*</span> <span class="n">nelements</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;n=</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s1"> ntotal=</span><span class="si">{</span><span class="n">ntotal</span><span class="o">*</span><span class="n">nelements</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_csolid_nonlinear_hyperelastic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 202 : CHEXAFD</span>
<span class="sd">         - 204 : PENTA6FD</span>

<span class="sd">            &#39;   N O N L I N E A R   S T R E S S E S   I N   H Y P E R E L A S T I C   H E X A H E D R O N   E L E M E N T S  ( HEXA8FD )&#39;</span>
<span class="sd">            &#39; &#39;</span>
<span class="sd">            &#39;  ELEMENT GRID/   POINT                       CAUCHY STRESSES/ LOG STRAINS                        PRESSURE    VOL. STRAIN&#39;</span>
<span class="sd">            &#39;     ID   GAUSS     ID       X           Y           Z           XY          YZ          ZX&#39;</span>
<span class="sd">            &#39;0     401 GRID      401  1.9128E+03  6.2729E+02 -3.4828E+02 -7.5176E+01  7.8259E+00 -2.5001E+02  7.3060E+02  7.3060E-03&#39;</span>
<span class="sd">            &#39;                         6.8270E-01 -6.5437E-04 -1.2874E+00 -3.9645E-02 -2.9882E-03 -5.9975E-02&#39;</span>
<span class="sd">            &#39;                    402  1.1024E+03  1.0686E+03  2.0832E+01 -1.7936E+00 -2.3656E-01 -1.1467E+02  7.3060E+02  7.3060E-03&#39;</span>
<span class="sd">            &#39;                         6.8201E-01  6.4335E-01 -1.2964E+00 -2.7195E-03 -1.0809E-02  6.3608E-02&#39;</span>
<span class="sd">            &#39;                   1402  1.1024E+03  1.0686E+03  2.0832E+01  1.7936E+00  2.3656E-01 -1.1467E+02  7.3060E+02  7.3060E-03&#39;</span>
<span class="sd">            &#39;                         6.8201E-01  6.4335E-01 -1.2964E+00 -2.7195E-03 -1.0809E-02  6.3608E-02&#39;</span>
<span class="sd">            &#39;                   1401  1.9128E+03  6.2729E+02 -3.4828E+02  7.5176E+01 -7.8259E+00 -2.5001E+02  7.3060E+02  7.3060E-03&#39;</span>
<span class="sd">            &#39;                         6.8201E-01  6.4335E-01 -1.2964E+00 -2.7195E-03 -1.0809E-02  6.3608E-02&#39;</span>
<span class="sd">            &#39;                    501  1.9159E+03  6.2332E+02 -3.4744E+02 -7.5730E+01  7.9009E+00 -2.5075E+02  7.3060E+02  7.3060E-03&#39;</span>
<span class="sd">            &#39;                         6.8201E-01  6.4335E-01 -1.2964E+00 -2.7195E-03 -1.0809E-02  6.3608E-02&#39;</span>
<span class="sd">            &#39;                    502  1.1004E+03  1.0667E+03  2.4631E+01 -1.7898E+00 -2.2971E-01 -1.1434E+02  7.3060E+02  7.3060E-03&#39;</span>
<span class="sd">            &#39;                         6.8201E-01  6.4335E-01 -1.2964E+00 -2.7195E-03 -1.0809E-02  6.3608E-02&#39;</span>
<span class="sd">            &#39;                   1502  1.1004E+03  1.0667E+03  2.4631E+01  1.7898E+00  2.2971E-01 -1.1434E+02  7.3060E+02  7.3060E-03&#39;</span>
<span class="sd">            &#39;                         6.8201E-01  6.4335E-01 -1.2964E+00 -2.7195E-03 -1.0809E-02  6.3608E-02&#39;</span>
<span class="sd">            &#39;                   1501  1.9159E+03  6.2332E+02 -3.4744E+02  7.5730E+01 -7.9009E+00 -2.5075E+02  7.3060E+02  7.3060E-03&#39;</span>
<span class="sd">            &#39;                         6.8201E-01  6.4335E-01 -1.2964E+00 -2.7195E-03 -1.0809E-02  6.3608E-02&#39;</span>

<span class="sd">          # 216 TETRAFD</span>
<span class="sd">          # 218 HEXAFD</span>
<span class="sd">          # 220 (CPENTA)</span>
<span class="sd">          # 221 (CTETRA)</span>
<span class="sd">          ELEMENT GRID/   POINT                         STRESSES/ TOTAL STRAINS                          EQUIVALENT EFF. STRAIN  EFF. CREEP</span>
<span class="sd">     ID   GAUSS     ID       X           Y           Z           XY          YZ          ZX        STRESS   PLAS/NLELAS   STRAIN</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="c1">#obj_vector_real = RealSolidStressArray</span>
            <span class="c1">#obj_vector_complex = ComplexSolidStressArray</span>
            <span class="c1">#obj_vector_random = RandomSolidStressArray</span>
            <span class="n">word</span> <span class="o">=</span> <span class="s1">&#39;stress&#39;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">202</span><span class="p">,</span> <span class="mi">218</span><span class="p">]:</span>  <span class="c1"># CHEXA</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">8</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;chexa_stress_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CHEXA8&#39;</span>
                <span class="c1"># real=122</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">204</span><span class="p">,</span> <span class="mi">220</span><span class="p">]:</span>  <span class="c1"># CPENTA</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">6</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cpenta_stress_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CPENTA6&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">216</span><span class="p">,</span> <span class="mi">221</span><span class="p">]:</span>  <span class="c1"># CTETRA</span>
                <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">4</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctetra_stress_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">element_name</span> <span class="o">=</span> <span class="s1">&#39;CTETRA4&#39;</span>
            <span class="c1">#elif self.element_type == 303:  # CPYRAM</span>
                <span class="c1">#nnodes_expected = 5</span>
                <span class="c1">#result_name = prefix + &#39;cpyram_stress&#39; + postfix</span>
                <span class="c1">#element_name = &#39;CPYRAM5&#39;</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#obj_vector_real = RealSolidStrainArray</span>
            <span class="c1">#obj_vector_complex = ComplexSolidStrainArray</span>
            <span class="c1">#obj_vector_random = RandomSolidStrainArray</span>
            <span class="n">word</span> <span class="o">=</span> <span class="s1">&#39;strain&#39;</span>
            <span class="c1">#if self.element_type == 202:  # CHEXA</span>
                <span class="c1">#nnodes_expected = 8</span>
                <span class="c1">#result_name = prefix + &#39;chexa_strain&#39; + postfix</span>
                <span class="c1">#element_name = &#39;CHEXA8&#39;</span>
            <span class="c1">#elif self.element_type == 301:  # CPENTA</span>
                <span class="c1">#nnodes_expected = 6</span>
                <span class="c1">#result_name = prefix + &#39;cpenta_strain&#39; + postfix</span>
                <span class="c1">#element_name = &#39;CPENTA6&#39;</span>
            <span class="c1">#elif self.element_type == 302:  # CTETRA</span>
                <span class="c1">#nnodes_expected = 4</span>
                <span class="c1">#result_name = prefix + &#39;ctetra_strain&#39; + postfix</span>
                <span class="c1">#element_name = &#39;CTETRA4&#39;</span>
            <span class="c1">#elif self.element_type == 303:  # CPYRAM</span>
                <span class="c1">#nnodes_expected = 5</span>
                <span class="c1">#result_name = prefix + &#39;cpyram_strain&#39; + postfix</span>
                <span class="c1">#element_name = &#39;CPYRAM5&#39;</span>
            <span class="c1">#else:  # pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
                <span class="c1">#msg = &#39;sort1 Type=%s num=%s&#39; % (self.element_name, self.element_type)</span>
                <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">numwide_real</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">15</span> <span class="o">*</span> <span class="n">nnodes_expected</span>
        <span class="c1">#numwide_real = 122  # CHEXA</span>
        <span class="k">assert</span> <span class="n">numwide_real</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span><span class="p">,</span> <span class="n">numwide_real</span>
        <span class="c1">#numwide_imag = 4 + (17 - 4) * nnodes_expected</span>
        <span class="c1">#numwide_random = 4 + (11 - 4) * nnodes_expected</span>
        <span class="c1">#numwide_random2 = 18 + 14 * (nnodes_expected - 1)</span>
        <span class="n">preline1</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">)</span>
        <span class="n">preline2</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">preline1</span><span class="p">)</span>

        <span class="c1">#print(&#39;nnodes_expected =&#39;, nnodes_expected)</span>
        <span class="c1">#print(&#39;numwide real=%s imag=%s random=%s&#39; % (numwide_real, numwide_imag, numwide_random2))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="n">nnodes_expected</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_real</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">60</span> <span class="o">*</span> <span class="n">nnodes_expected</span>
            <span class="c1">#ntotal = numwide_real * 4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="k">assert</span> <span class="n">ndata</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>
            <span class="c1">#auto_return, is_vectorized = self._create_oes_object4(</span>
                <span class="c1">#nelements, result_name, slot, obj_vector_real)</span>
            <span class="n">auto_return</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_mode</span> <span class="o">==</span> <span class="mi">1</span>
            <span class="n">is_vectorized</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">itotali</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c1"># (eid_device, cid, abcd, nnodes)</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">ints1</span> <span class="o">=</span> <span class="n">ints</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;ints.shape=</span><span class="si">%s</span><span class="s1">; size=</span><span class="si">%s</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ints</span><span class="o">.</span><span class="n">shape</span><span class="p">),</span> <span class="n">ints</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;nelements=</span><span class="si">%s</span><span class="s1"> numwide_real=</span><span class="si">%s</span><span class="s1"> nelements*numwide=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">,</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">numwide_real</span><span class="p">)</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">cids</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
                    <span class="c1">#nids = ints1[:, 4]</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">repeat</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="n">nnodes_expected</span><span class="p">)</span>
                    <span class="n">ints2</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span>
                    <span class="n">grid_device</span> <span class="o">=</span> <span class="n">ints2</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="c1">#.reshape(nelements, nnodes_expected)</span>

                    <span class="c1">#print(&#39;%s-grid_device=%s&#39; % (self.element_name, grid_device))</span>
                    <span class="n">unused_grid_device2</span> <span class="o">=</span> <span class="n">repeat</span><span class="p">(</span><span class="n">grid_device</span><span class="p">,</span> <span class="n">nnodes_expected</span><span class="p">)</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">grid_device</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">; nnodes=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="n">nnodes_expected</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;itotal=</span><span class="si">%s</span><span class="s1"> itotal2=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">itotal</span><span class="p">,</span> <span class="n">itotal2</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;grid_device.shape=</span><span class="si">%s</span><span class="s1">; size=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">grid_device</span><span class="o">.</span><span class="n">shape</span><span class="p">),</span> <span class="n">grid_device</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
                        <span class="c1">#msg += &#39;nids=%s&#39; % nids</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_cid</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotali</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_cid</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotali</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">cids</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)[:,</span> <span class="mi">4</span><span class="p">:]</span>
                <span class="c1"># 1     9    15   2    10   16  3   11  17   8</span>
                <span class="c1">#[oxx, oyy, ozz, txy, tyz, txz, o1, o2, o3, ovm]</span>
                <span class="c1">#isave = [1, 9, 15, 2, 10, 16, 3, 11, 17, 8]</span>
                <span class="c1">#(grid_device,</span>
                    <span class="c1">#sxx, sxy, s1, a1, a2, a3, pressure, svm,</span>
                    <span class="c1">#syy, syz, s2, b1, b2, b3,</span>
                    <span class="c1">#szz, sxz, s3, c1, c2, c3)</span>
                <span class="n">floats1</span> <span class="o">=</span> <span class="n">floats</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span><span class="c1">#[:, 1:] # drop grid_device</span>

                <span class="c1"># o1/o2/o3 is not max/mid/min.  They are not consistently ordered, so we force it.</span>
                <span class="n">max_mid_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span>
                    <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">],</span>
                    <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">11</span><span class="p">],</span>
                    <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">17</span><span class="p">],</span>
                <span class="p">])</span><span class="o">.</span><span class="n">T</span>
                <span class="n">max_mid_min</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">assert</span> <span class="n">max_mid_min</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">max_mid_min</span><span class="o">.</span><span class="n">shape</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_mid_min</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>

                <span class="c1">#obj.data[obj.itime, itotal:itotal2, :] = floats1[:, isave]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats1</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">16</span><span class="p">]]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">8</span><span class="p">]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">itotali</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">#if is_vectorized and self.use_vector:  # pragma: no cover</span>
                    <span class="c1">#self.log.debug(&#39;vectorize CSolid real SORT%s&#39; % self.sort_method)</span>

                <span class="c1"># 2 TYPE CHAR4 Grid or Gaus</span>
                <span class="c1">#</span>
                <span class="c1"># 3 ID I</span>
                <span class="c1"># 4 SX RS</span>
                <span class="c1"># 5 SY RS</span>
                <span class="c1"># 6 SZ RS</span>
                <span class="c1"># 7 SXY RS</span>
                <span class="c1"># 8 SYZ RS</span>
                <span class="c1"># 9 SZX RS</span>
                <span class="c1"># 10 PRESSURE RS</span>
                <span class="c1"># 11 VOLSTR RS</span>
                <span class="c1"># 12 EX RS</span>
                <span class="c1"># 13 EY RS</span>
                <span class="c1"># 14 EZ RS</span>
                <span class="c1"># 15 EXY RS</span>
                <span class="c1"># 16 EYZ RS</span>
                <span class="c1"># 17 EZX RS</span>
                <span class="c1"># Words 3 through 17 repeat 008 times</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;4s&#39;</span><span class="p">)</span>
                <span class="n">struct2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i14f&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="si">}</span><span class="s1">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="si">}</span><span class="s1"> nelements=</span><span class="si">{</span><span class="n">nelements</span><span class="si">}</span><span class="s1"> &#39;</span>
                        <span class="sa">f</span><span class="s1">&#39;nnodes=</span><span class="si">{</span><span class="n">nnodes_expected</span><span class="si">}</span><span class="s1">; &#39;</span>
                        <span class="s1">&#39;C=[sxx, syy, szz, txy, tyz, txz, pressure, &#39;</span>
                        <span class="s1">&#39;evol, exx, eyy, ezz, exy, eyz, exz]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">8</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">unused_abcd</span><span class="p">,</span> <span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> - eid=</span><span class="si">%i</span><span class="s1">; </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">preline1</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="c1">#assert nnodes &lt; 21, &#39;print_block(data[n:n+16])&#39;  #self.print_block(data[n:n+16])</span>

                    <span class="n">n</span> <span class="o">+=</span> <span class="mi">8</span>
                    <span class="k">for</span> <span class="n">inode</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes_expected</span><span class="p">):</span>  <span class="c1"># nodes pts, no centroid</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">struct2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="mi">60</span><span class="p">])</span> <span class="c1"># 4*15 = 60</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">preline2</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                        <span class="p">(</span><span class="n">grid_device</span><span class="p">,</span> <span class="n">sxx</span><span class="p">,</span> <span class="n">syy</span><span class="p">,</span> <span class="n">szz</span><span class="p">,</span> <span class="n">txy</span><span class="p">,</span> <span class="n">tyz</span><span class="p">,</span> <span class="n">txz</span><span class="p">,</span> <span class="n">pressure</span><span class="p">,</span>
                         <span class="n">evol</span><span class="p">,</span> <span class="n">exx</span><span class="p">,</span> <span class="n">eyy</span><span class="p">,</span> <span class="n">ezz</span><span class="p">,</span> <span class="n">exy</span><span class="p">,</span> <span class="n">eyz</span><span class="p">,</span> <span class="n">exz</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                        <span class="c1">#print(out)</span>

                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%s</span><span class="s1"> inode=</span><span class="si">%i</span><span class="s1">; C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                <span class="n">eid</span><span class="p">,</span> <span class="n">grid_device</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>

                        <span class="n">grid</span> <span class="o">=</span> <span class="n">grid_device</span>
                        <span class="k">if</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">inode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="c1">#  this is correct, but fails</span>
                                <span class="c1">#element_name = self.element_name + str(nnodes)</span>
                                <span class="n">obj</span><span class="o">.</span><span class="n">add_eid_sort1</span><span class="p">(</span><span class="n">element_name</span><span class="p">,</span> <span class="n">cid</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span>
                                                  <span class="n">sxx</span><span class="p">,</span> <span class="n">syy</span><span class="p">,</span> <span class="n">szz</span><span class="p">,</span> <span class="n">txy</span><span class="p">,</span> <span class="n">tyz</span><span class="p">,</span> <span class="n">txz</span><span class="p">,</span> <span class="n">ovm</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">obj</span><span class="o">.</span><span class="n">add_node_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">inode</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span>
                                                   <span class="n">sxx</span><span class="p">,</span> <span class="n">syy</span><span class="p">,</span> <span class="n">szz</span><span class="p">,</span> <span class="n">txy</span><span class="p">,</span> <span class="n">tyz</span><span class="p">,</span> <span class="n">txz</span><span class="p">,</span> <span class="n">ovm</span><span class="p">)</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="mi">60</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;skipping </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name_str</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="si">}</span><span class="s1">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="si">}</span><span class="s1"> nonlinear hyperelastic </span><span class="si">{</span><span class="n">word</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span> <span class="o">+</span>
                               <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">numwide real=</span><span class="si">%s</span><span class="s1"> imag=</span><span class="si">%s</span><span class="s1"> random=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                   <span class="n">numwide_real</span><span class="p">,</span> <span class="n">numwide_imag</span><span class="p">,</span> <span class="n">numwide_random2</span><span class="p">))</span>
        <span class="k">assert</span> <span class="n">n</span> <span class="o">==</span> <span class="n">ntotal</span> <span class="o">*</span> <span class="n">nelements</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;n=</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s1"> ntotal=</span><span class="si">{</span><span class="n">ntotal</span><span class="o">*</span><span class="n">nelements</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_csolid_nonlinear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">unused_is_magnitude_phase</span><span class="p">,</span>
                              <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">        - 85-TETRANL</span>
<span class="sd">        - 91-PENTANL</span>
<span class="sd">        - 93-HEXANL</span>
<span class="sd">        - 256-PYRAMNL</span>

<span class="sd">        2  CTYPE CHAR4</span>
<span class="sd">        3  NODEF 1 Number of active GRID points</span>

<span class="sd">        4  GRID  I Grid / Gauss</span>
<span class="sd">        5  SX    RS Stress in x</span>
<span class="sd">        6  SY    RS Stress in y</span>
<span class="sd">        7  SZ    RS Stress in z</span>
<span class="sd">        8  SXY   RS Stress in xy</span>
<span class="sd">        9  SYZ   RS Stress in yz</span>
<span class="sd">        10 SZX   RS Stress in zx</span>
<span class="sd">        11 SE    RS Equivalent stress</span>
<span class="sd">        12 EPS   RS Effective plastic strain</span>
<span class="sd">        13 ECS   RS Effective creep strain</span>
<span class="sd">        14 EX    RS Strain in x</span>
<span class="sd">        15 EY    RS Strain in y</span>
<span class="sd">        16 EZ    RS Strain in z</span>
<span class="sd">        17 EXY   RS Strain in xy</span>
<span class="sd">        18 EYZ   RS Strain in yz</span>
<span class="sd">        19 EZX   RS Strain in zx</span>
<span class="sd">        Words 3 through 19 repeat 005 times</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#real</span>
        <span class="c1">#85:  2 + (18 - 2) * 5,  # Nonlinear CTETRA</span>
        <span class="c1">#256: 4 + (18 - 2) * 6,  # Nonlinear CHEXA -&gt; ???</span>

        <span class="c1"># random</span>
        <span class="c1">#91:  4 + (25 - 4) * 7,  # Nonlinear CPENTA</span>
        <span class="c1">#93:  4 + (25 - 4) * 9,  # Nonlinear CHEXA -&gt; 584 (can cause a crash)</span>
        <span class="c1">#256: 4 + (25 - 4) * 6,  # Nonlinear CHEXA -&gt; ???</span>

        <span class="c1"># the nodes are nnodes + 1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">85</span><span class="p">:</span>
            <span class="n">etype</span> <span class="o">=</span> <span class="s1">&#39;CTETRANL&#39;</span>
            <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">5</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctetra_stress_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">91</span><span class="p">:</span>
            <span class="n">etype</span> <span class="o">=</span> <span class="s1">&#39;CPENTANL&#39;</span>
            <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">7</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cpenta_stress_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">93</span><span class="p">:</span>
            <span class="n">etype</span> <span class="o">=</span> <span class="s1">&#39;CHEXANL&#39;</span>
            <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">9</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;chexa_stress_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">256</span><span class="p">:</span>
            <span class="n">etype</span> <span class="o">=</span> <span class="s1">&#39;CPYRAMNL&#39;</span>
            <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">6</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;chexa_stress_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>

        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>

        <span class="n">numwide_real</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">+</span> <span class="p">(</span><span class="mi">25</span> <span class="o">-</span> <span class="mi">4</span><span class="p">)</span> <span class="o">*</span> <span class="n">nnodes</span>  <span class="c1"># real???</span>
        <span class="n">numwide_random</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="mi">18</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">nnodes</span>  <span class="c1"># imag???</span>
        <span class="c1">#self.log.debug(&quot;format_code=%s numwide=%s numwide_real=%s numwide_random=%s&quot; % (</span>
            <span class="c1">#self.format_code, self.num_wide, numwide_real, numwide_random))</span>

        <span class="c1">#numwide_real = 0</span>
        <span class="c1">#numwide_imag = 2 + 16 * nnodes</span>
        <span class="c1">#ntotal = 8 + 64 * nnodes</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_real</span><span class="p">:</span>
            <span class="c1">#if self.read_mode == 1:</span>
                <span class="c1">#return ndata, None, None</span>

            <span class="n">ntotal</span> <span class="o">=</span> <span class="n">numwide_real</span> <span class="o">*</span> <span class="mi">4</span>
            <span class="c1">#if self.is_stress:</span>
                <span class="c1">#self.create_transient_object(self.nonlinearPlateStress, NonlinearSolid)</span>
            <span class="c1">#else:</span>
                <span class="c1">#self.create_transient_object(self.nonlinearPlateStrain, NonlinearSolid)</span>
            <span class="c1">#self.handle_results_buffer(self.OES_CQUAD4NL_90, resultName, name)</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;OES_CSOLIDNL_90&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_random</span><span class="p">:</span>  <span class="c1"># random</span>
            <span class="c1"># 82 : CTETRA_NL (etype=85)</span>
            <span class="c1"># 146 : CHEXA_NL (etype=93)</span>
            <span class="c1">#raise RuntimeError(self.code_information())</span>
        <span class="c1">#elif self.format_code in [2, 3] and self.num_wide == numwide_imag:  # imag</span>

            <span class="n">ntotal</span> <span class="o">=</span> <span class="n">numwide_random</span> <span class="o">*</span> <span class="mi">4</span>

            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ntotal</span> <span class="o">+=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes</span>
            <span class="c1">#print(self.read_mode, RealNonlinearSolidArray)</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">RealNonlinearSolidArray</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="n">nnodes</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;4s&#39;</span><span class="p">)</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i15f&#39;</span><span class="p">)</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>  <span class="c1"># 2+16*9 = 146 -&gt; 146*4 = 584</span>
                <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">8</span><span class="p">]</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="mi">8</span>

                <span class="n">out</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-</span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">etype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>

                <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">unused_ctype</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                    <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="c1">#print(&#39;%s-%s -eid=%s dt=%s %s\n&#39; % (etype, self.element_type, eid, dt, str(out)))</span>

                <span class="k">for</span> <span class="n">unused_j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">64</span><span class="p">]</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="mi">64</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-</span><span class="si">%s</span><span class="s1">B - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">etype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="c1">#print(&#39;%s-%sB - %s\n&#39; % (etype, self.element_type, str(out)))</span>
                    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">out</span><span class="p">)</span> <span class="o">==</span> <span class="mi">16</span>

                    <span class="p">(</span><span class="n">grid</span><span class="p">,</span>
                     <span class="n">sx</span><span class="p">,</span> <span class="n">sy</span><span class="p">,</span> <span class="n">sz</span><span class="p">,</span> <span class="n">sxy</span><span class="p">,</span> <span class="n">syz</span><span class="p">,</span> <span class="n">sxz</span><span class="p">,</span> <span class="n">se</span><span class="p">,</span> <span class="n">eps</span><span class="p">,</span> <span class="n">ecs</span><span class="p">,</span>
                     <span class="n">ex</span><span class="p">,</span> <span class="n">ey</span><span class="p">,</span> <span class="n">ez</span><span class="p">,</span> <span class="n">exy</span><span class="p">,</span> <span class="n">eyz</span><span class="p">,</span> <span class="n">exz</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span>
                                  <span class="n">sx</span><span class="p">,</span> <span class="n">sy</span><span class="p">,</span> <span class="n">sz</span><span class="p">,</span> <span class="n">sxy</span><span class="p">,</span> <span class="n">syz</span><span class="p">,</span> <span class="n">sxz</span><span class="p">,</span> <span class="n">se</span><span class="p">,</span> <span class="n">eps</span><span class="p">,</span> <span class="n">ecs</span><span class="p">,</span>
                                  <span class="n">ex</span><span class="p">,</span> <span class="n">ey</span><span class="p">,</span> <span class="n">ez</span><span class="p">,</span> <span class="n">exy</span><span class="p">,</span> <span class="n">eyz</span><span class="p">,</span> <span class="n">exz</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="c1">#msg = self.code_information()</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;format_code=</span><span class="si">%s</span><span class="s2"> numwide=</span><span class="si">%s</span><span class="s2"> numwide_real=</span><span class="si">%s</span><span class="s2"> numwide_random=</span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">,</span> <span class="n">numwide_random</span><span class="p">)</span>
            <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg)</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_cquad4_33</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span>
                       <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">postfix</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 33 : CQUAD4-centroidal</span>
<span class="sd">         - 228 : CQUADR-centroidal</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#print(&#39;_oes_cquad4_33&#39;)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealPlateStressArray</span>
            <span class="n">obj_vector_complex</span> <span class="o">=</span> <span class="n">ComplexPlateStressArray</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">33</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquad4_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">228</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquadr_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">17</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealPlateStrainArray</span>
            <span class="n">obj_vector_complex</span> <span class="o">=</span> <span class="n">ComplexPlateStrainArray</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">33</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquad4_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">228</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquadr_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">17</span><span class="p">,</span> <span class="mi">15</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">numwide_real</span> <span class="o">=</span> <span class="mi">17</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">17</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">68</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>  <span class="c1"># 4*17</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">nlayers</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">2</span>
            <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">2</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nlayers</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">assert</span> <span class="n">obj</span><span class="o">.</span><span class="n">is_built</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">is_built</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype8</span><span class="p">)</span>
                    <span class="n">ints1</span> <span class="o">=</span> <span class="n">ints</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">eids</span><span class="p">,</span> <span class="n">eids</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">:]</span>

                <span class="c1">#fd, sx, sy, txy, angle, major, minor, max_shear</span>
                <span class="n">floats1</span> <span class="o">=</span> <span class="n">floats</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats1</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;vectorize </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="si">}</span><span class="s1">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="si">}</span><span class="s1"> real &#39;</span>
                                   <span class="sa">f</span><span class="s1">&#39;SORT</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fmt</span> <span class="o">=</span> <span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;16f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
                <span class="n">cen</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># CEN/4</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>

                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
                     <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span> <span class="n">angle1</span><span class="p">,</span> <span class="n">major1</span><span class="p">,</span> <span class="n">minor1</span><span class="p">,</span> <span class="n">max_shear1</span><span class="p">,</span>
                     <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,</span> <span class="n">angle2</span><span class="p">,</span> <span class="n">major2</span><span class="p">,</span> <span class="n">minor2</span><span class="p">,</span> <span class="n">max_shear2</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>

                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%i</span><span class="s1"> C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>

                    <span class="n">obj</span><span class="o">.</span><span class="n">add_new_eid_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">cen</span><span class="p">,</span> <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span>
                                          <span class="n">txy1</span><span class="p">,</span> <span class="n">angle1</span><span class="p">,</span> <span class="n">major1</span><span class="p">,</span> <span class="n">minor1</span><span class="p">,</span> <span class="n">max_shear1</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">cen</span><span class="p">,</span> <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,</span>
                                  <span class="n">angle2</span><span class="p">,</span> <span class="n">major2</span><span class="p">,</span> <span class="n">minor2</span><span class="p">,</span> <span class="n">max_shear2</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">15</span><span class="p">:</span>  <span class="c1"># imag</span>
            <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># centroid + 4 corner points</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="p">(</span><span class="mi">15</span> <span class="o">*</span> <span class="p">(</span><span class="n">nnodes</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_complex</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">nnodes_all</span> <span class="o">=</span> <span class="p">(</span><span class="n">nnodes</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">itotal</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_all</span>
                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">15</span> <span class="o">*</span> <span class="n">nnodes_all</span><span class="p">)</span>
                <span class="n">floats1</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_all</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">15</span> <span class="o">*</span> <span class="n">nnodes_all</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="n">ints1</span> <span class="o">=</span> <span class="n">ints</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_all</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
                    <span class="n">nids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">eids2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">eids</span><span class="p">,</span> <span class="n">eids</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                    <span class="n">nids2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">nids</span><span class="p">,</span> <span class="n">nids</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids2</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">nids2</span>

                <span class="c1">#[fd, sxr, sxi, syr, syi, txyr, txyi]</span>
                <span class="n">isave1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
                <span class="n">isave2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
                <span class="n">real_imag</span> <span class="o">=</span> <span class="n">apply_mag_phase</span><span class="p">(</span><span class="n">floats1</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">isave1</span><span class="p">,</span> <span class="n">isave2</span><span class="p">)</span>

                <span class="n">obj</span><span class="o">.</span><span class="n">fiber_curvature</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">real_imag</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CQUAD4-33 imag SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                <span class="n">n</span> <span class="o">=</span> <span class="n">oes_cquad4_33_complex_15</span><span class="p">(</span>
                    <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span>
                    <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">,</span>
                    <span class="n">is_magnitude_phase</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span> <span class="c1"># random msc</span>
            <span class="c1"># _oes_cquad4 is the same as _oes_ctria3</span>
            <span class="n">element_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
                <span class="n">obj_vector_random</span> <span class="o">=</span> <span class="n">RandomPlateStressArray</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">obj_vector_random</span> <span class="o">=</span> <span class="n">RandomPlateStrainArray</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;nonlinear_factor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">element_id</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
            <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">36</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>  <span class="c1"># 4*9</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">nlayers</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">2</span>
            <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nlayers</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_random</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">assert</span> <span class="n">obj</span><span class="o">.</span><span class="n">is_built</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">is_built</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">2</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                    <span class="n">ielement2</span> <span class="o">=</span> <span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>

                    <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                    <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span>
                        <span class="n">ints1</span> <span class="o">=</span> <span class="n">ints</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
                        <span class="n">eids</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                        <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>

                        <span class="c1"># TODO: what about layer 1/2?</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                    <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">9</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">:]</span>
                    <span class="c1">#fd1, sx1, sy1, txy1, fd2, fx2, fy2, txy2</span>
                    <span class="n">floats2</span> <span class="o">=</span> <span class="n">floats</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>

                    <span class="c1">#[eid_device, fd1, sx1, sy1, txy1,</span>
                    <span class="c1">#             fd2, sx2, sy2, txy2,]</span>
                    <span class="n">nf2</span> <span class="o">=</span> <span class="n">floats2</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">floats3</span> <span class="o">=</span> <span class="n">floats2</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nf2</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

                    <span class="n">obj</span><span class="o">.</span><span class="n">fiber_curvature</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats3</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats3</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">:</span>
                    <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span>
                    <span class="n">ie_upper</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">ielement</span>
                    <span class="n">ie_lower</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">ielement</span> <span class="o">+</span> <span class="mi">1</span>

                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">ie_upper</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">ie_lower</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                    <span class="c1">#obj._times[obj.itime] = dt</span>

                    <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span><span class="c1"># [:, 1:]</span>
                    <span class="c1"># itime is actually ielement</span>
                    <span class="c1"># we grab the element id from the ints for all times</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;analysis_code &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span><span class="p">)</span>
                        <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
                        <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                        <span class="c1">#nids = np.zeros(len(eids), dtype=&#39;int32&#39;)</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">eids</span><span class="p">)</span>
                        <span class="c1">#eids = np.vstack([eids, nids]).T.ravel()</span>
                        <span class="c1">#print(eids.shape)</span>
                        <span class="c1">#print(eids)</span>
                        <span class="c1">#print(obj.element)</span>
                        <span class="c1">#assert eids.min() &gt; 0, eids.min()</span>
                        <span class="c1">#obj.element[itotal:itotal2, 0] = eids</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                        <span class="n">aaa</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="c1">#print(floats[:, 0])</span>
                        <span class="c1">#print(floats[:, 0].shape, obj._times.shape)</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>

                    <span class="n">floats1</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span>
                    <span class="c1">#print(floats1)</span>
                    <span class="c1">#print(floats1.shape)</span>
                    <span class="c1">#fd, sx, sy, txy,</span>
                    <span class="n">floats2</span> <span class="o">=</span> <span class="n">floats1</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
                    <span class="n">nf2</span> <span class="o">=</span> <span class="n">floats2</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="c1"># reshape it into 2 layers</span>
                    <span class="n">floats3</span> <span class="o">=</span> <span class="n">floats2</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nf2</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
                    <span class="c1"># we only need to grab the first two fiber/curvature values</span>
                    <span class="c1"># as they&#39;re duplicated many times for the same element</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">fiber_curvature</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">:</span><span class="mi">2</span><span class="o">*</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats3</span><span class="p">[:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="c1"># we apply the data across 2 rows because we have 2 layers</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">ie_upper</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats3</span><span class="p">[::</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">ie_lower</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats3</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="c1">#obj.ielement = ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CQUAD4-33 random numwide=9 SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">oes_cquad4_33_random_9</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span> <span class="c1"># random</span>
            <span class="c1">#2 FD1 RS Z1 = Fibre Distance</span>
            <span class="c1">#3 SX1 RS Normal in x at Z1</span>
            <span class="c1">#4 SY1 RS Normal in y at Z1</span>
            <span class="c1">#5 TXY1 RS Shear in xy at Z1</span>
            <span class="c1">#6 RMSVM1 RS RMS von Mises at Z1</span>

            <span class="c1">#7 FD2 RS Z2 = Fibre Distance</span>
            <span class="c1">#8 SX2 RS Normal in x at Z2</span>
            <span class="c1">#9 SY2 RS Normal in y at Z2</span>
            <span class="c1">#10 TXY2 RS Shear in xy at Z2</span>
            <span class="c1">#11 RMSVM2 RS RMS von Mises at Z2</span>

            <span class="n">element_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
                <span class="n">obj_vector_random</span> <span class="o">=</span> <span class="n">RandomPlateStressArray</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">obj_vector_random</span> <span class="o">=</span> <span class="n">RandomPlateStrainArray</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;nonlinear_factor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">element_id</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
            <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">44</span>  <span class="c1"># 4*11</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">nlayers</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">2</span>
            <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nlayers</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_random</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">assert</span> <span class="n">obj</span><span class="o">.</span><span class="n">is_built</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">is_built</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span>
                    <span class="n">ints1</span> <span class="o">=</span> <span class="n">ints</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">eids</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">eids</span><span class="p">,</span> <span class="n">eids</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">eids</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">eids</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">)</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">11</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">:]</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">floats</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
                <span class="c1">#fd, sx, sy, txy,</span>
                <span class="n">floats1</span> <span class="o">=</span> <span class="n">floats</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats1</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">oes_cquad4_33_random_11</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">17</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OSTRVM1&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OSTRVM2&#39;</span><span class="p">]:</span> <span class="c1"># freq</span>
            <span class="c1"># Table of element stresses for frequency response analysis that includes</span>
            <span class="c1"># von Mises stress output in SORT1 format.</span>
            <span class="n">element_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>  <span class="c1"># TODO: add new complex type</span>
                <span class="n">obj_vector_complex</span> <span class="o">=</span> <span class="n">ComplexPlateStressArray</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">obj_vector_complex</span> <span class="o">=</span> <span class="n">ComplexPlateStrainArray</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;nonlinear_factor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">element_id</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
            <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">68</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>  <span class="c1"># 4*17</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">nlayers</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">2</span>
            <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nlayers</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_complex</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="c1">#self.show_data(data)</span>
            <span class="c1">#   ELEMENT      FIBER                                     - STRESSES IN ELEMENT  COORDINATE SYSTEM -</span>
            <span class="c1">#      ID.       DISTANCE              NORMAL-X                       NORMAL-Y                      SHEAR-XY               VON MISES</span>
            <span class="c1">#0     101  -5.000000E-01  -8.152692E-01 /  0.0           -1.321875E+00 /  0.0           -3.158517E+00 /  0.0            5.591334E+00</span>
            <span class="c1">#            5.000000E-01   1.728573E+00 /  0.0           -7.103837E+00 /  0.0            2.856040E+00 /  0.0            9.497519E+00</span>
                <span class="c1">#floats  = (1011,</span>
                           <span class="c1">#-0.5, -0.8152692317962646, 0.0, -1.321874737739563, 0.0, -3.1585168838500977, 0.0, 5.591334342956543,</span>
                           <span class="c1">#0.5,   1.7285730838775635, 0.0, -7.103837490081787, 0.0,  2.8560397624969482, 0.0, 9.497518539428711)</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name_str</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CQUAD4-33 complex &#39;</span>
                                   <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name_str</span><span class="si">}</span><span class="s1"> SORT</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">oes_cquad4_33_complex_17</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span>
                                             <span class="n">is_magnitude_phase</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">element_name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
        <span class="k">assert</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_ctria3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 74 : CTRIA3-centroidal</span>
<span class="sd">         - 83 : CTRIA3-centroidal  (NASA 95)</span>
<span class="sd">         - 227: TRIAR-centroidal</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#print(&#39;_oes_ctria3&#39;)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealPlateStressArray</span>
            <span class="n">obj_vector_complex</span> <span class="o">=</span> <span class="n">ComplexPlateStressArray</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">74</span><span class="p">,</span> <span class="mi">83</span><span class="p">]:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctria3_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">227</span><span class="p">]:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctriar_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealPlateStrainArray</span>
            <span class="n">obj_vector_complex</span> <span class="o">=</span> <span class="n">ComplexPlateStrainArray</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">74</span><span class="p">,</span> <span class="mi">83</span><span class="p">]:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctria3_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">227</span><span class="p">]:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctriar_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="c1">#print(result_name, self.format_code, self.num_wide)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">17</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">68</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 4*17</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">nlayers</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">2</span>  <span class="c1"># 2 layers per node</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nlayers</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  [cap, element1, element2, ..., cap]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  cap = </span><span class="si">%i</span><span class="s1">  # assume 1 cap when there could have been multiple</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ndata</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  #elementi = [eid_device, fd1, sx1, sy1, txy1, angle1, major1, minor1, vm1,</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  #                        fd2, sx2, sy2, txy2, angle2, major2, minor2, vm2,]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  nelements=</span><span class="si">%i</span><span class="s1">; nnodes=1 # centroid</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nelements</span><span class="p">)</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">nfields</span> <span class="o">=</span> <span class="mi">17</span> <span class="o">*</span> <span class="n">nelements</span>
                <span class="n">nbytes</span> <span class="o">=</span> <span class="n">nfields</span> <span class="o">*</span> <span class="mi">4</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">iend</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nlayers</span>

                <span class="n">itime</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span>
                <span class="k">if</span> <span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="c1">#ilayers = ints[:, 1]</span>
                    <span class="n">ints2</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nlayers</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">iend</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span><span class="n">iend</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                    <span class="c1">#obj.element_node[itotal:iend, 1] = 0</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>
                <span class="n">floats1</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nlayers</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">iend</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats1</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+=</span> <span class="n">nlayers</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nbytes</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CTRIA3 real SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="n">cen</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># &#39;CEN/3&#39;</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;16f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
                     <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span> <span class="n">angle1</span><span class="p">,</span> <span class="n">major1</span><span class="p">,</span> <span class="n">minor1</span><span class="p">,</span> <span class="n">vm1</span><span class="p">,</span>
                     <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,</span> <span class="n">angle2</span><span class="p">,</span> <span class="n">major2</span><span class="p">,</span> <span class="n">minor2</span><span class="p">,</span> <span class="n">vm2</span><span class="p">,)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  OES CTRIA3-74 - eid=</span><span class="si">%i</span><span class="s1">; C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>

                    <span class="n">obj</span><span class="o">.</span><span class="n">add_new_eid_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">cen</span><span class="p">,</span> <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span>
                                          <span class="n">txy1</span><span class="p">,</span> <span class="n">angle1</span><span class="p">,</span> <span class="n">major1</span><span class="p">,</span> <span class="n">minor1</span><span class="p">,</span> <span class="n">vm1</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">cen</span><span class="p">,</span> <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,</span>
                                  <span class="n">angle2</span><span class="p">,</span> <span class="n">major2</span><span class="p">,</span> <span class="n">minor2</span><span class="p">,</span> <span class="n">vm2</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">15</span><span class="p">:</span>  <span class="c1"># imag</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 4*15</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_complex</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">2</span>
                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
                <span class="n">floats1</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="n">unused_ints1</span> <span class="o">=</span> <span class="n">ints</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
                    <span class="n">nids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>

                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">eids2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">eids</span><span class="p">,</span> <span class="n">eids</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                    <span class="n">nids2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">nids</span><span class="p">,</span> <span class="n">nids</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids2</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">nids2</span>

                <span class="c1">#[fd, sxr, sxi, syr, syi, txyr, txyi]</span>
                <span class="n">isave1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
                <span class="n">isave2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
                <span class="n">real_imag</span> <span class="o">=</span> <span class="n">apply_mag_phase</span><span class="p">(</span><span class="n">floats1</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">isave1</span><span class="p">,</span> <span class="n">isave2</span><span class="p">)</span>

                <span class="n">obj</span><span class="o">.</span><span class="n">fiber_curvature</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">real_imag</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CTRIA3 imag SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;14f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
                <span class="n">cen</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># CEN/3</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
                     <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1r</span><span class="p">,</span> <span class="n">sx1i</span><span class="p">,</span> <span class="n">sy1r</span><span class="p">,</span> <span class="n">sy1i</span><span class="p">,</span> <span class="n">txy1r</span><span class="p">,</span> <span class="n">txy1i</span><span class="p">,</span>
                     <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2r</span><span class="p">,</span> <span class="n">sx2i</span><span class="p">,</span> <span class="n">sy2r</span><span class="p">,</span> <span class="n">sy2i</span><span class="p">,</span> <span class="n">txy2r</span><span class="p">,</span> <span class="n">txy2i</span><span class="p">,)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  OESC CTRIA3-74 - eid=</span><span class="si">%i</span><span class="s1">; C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>

                    <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                        <span class="n">sx1</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sx1r</span><span class="p">,</span> <span class="n">sx1i</span><span class="p">)</span>
                        <span class="n">sy1</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sy1r</span><span class="p">,</span> <span class="n">sy1i</span><span class="p">)</span>
                        <span class="n">sx2</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sx2r</span><span class="p">,</span> <span class="n">sx2i</span><span class="p">)</span>
                        <span class="n">sy2</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sy2r</span><span class="p">,</span> <span class="n">sy2i</span><span class="p">)</span>
                        <span class="n">txy1</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">txy1r</span><span class="p">,</span> <span class="n">txy1i</span><span class="p">)</span>
                        <span class="n">txy2</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">txy2r</span><span class="p">,</span> <span class="n">txy2i</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">sx1</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sx1r</span><span class="p">,</span> <span class="n">sx1i</span><span class="p">)</span>
                        <span class="n">sy1</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sy1r</span><span class="p">,</span> <span class="n">sy1i</span><span class="p">)</span>
                        <span class="n">sx2</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sx2r</span><span class="p">,</span> <span class="n">sx2i</span><span class="p">)</span>
                        <span class="n">sy2</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sy2r</span><span class="p">,</span> <span class="n">sy2i</span><span class="p">)</span>
                        <span class="n">txy1</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">txy1r</span><span class="p">,</span> <span class="n">txy1i</span><span class="p">)</span>
                        <span class="n">txy2</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">txy2r</span><span class="p">,</span> <span class="n">txy2i</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">cen</span><span class="p">,</span> <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">cen</span><span class="p">,</span> <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="c1">#elif self.format_code == 1 and self.num_wide == 9: # random?</span>
            <span class="c1">#msg = self.code_information()</span>
            <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg), None, None</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">17</span><span class="p">:</span> <span class="c1"># random; CTRIA3</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESVM1&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESVM2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OSTRVM1&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OSTRVM2&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_mode</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="c1"># C:\MSC.Software\simcenter_nastran_2019.2\tpl_post2\shlthk14.op2</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">68</span> <span class="c1"># 17*4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="k">assert</span> <span class="n">ndata</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>

            <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;16f&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal</span><span class="p">]</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">fd1</span><span class="p">,</span> <span class="n">oxx1r</span><span class="p">,</span> <span class="n">oxx1i</span><span class="p">,</span> <span class="n">oyy1r</span><span class="p">,</span> <span class="n">oyy1i</span><span class="p">,</span> <span class="n">txy1r</span><span class="p">,</span> <span class="n">txy1i</span><span class="p">,</span> <span class="n">ovm1</span><span class="p">,</span>
                      <span class="n">fd2</span><span class="p">,</span> <span class="n">oxx2r</span><span class="p">,</span> <span class="n">oxx2i</span><span class="p">,</span> <span class="n">oyy2r</span><span class="p">,</span> <span class="n">oyy2i</span><span class="p">,</span> <span class="n">txy2r</span><span class="p">,</span> <span class="n">txy2i</span><span class="p">,</span> <span class="n">ovm2</span><span class="p">,</span> <span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                <span class="c1">#print(eid, fd1, oxx1r, oxx1i, oyy1r, oyy1i, txy1r, txy1i, ovm1)</span>
                <span class="c1">#print(eid, fd2, oxx2r, oxx2i, oyy2r, oyy2i, txy2r, txy2i, ovm2)</span>

            <span class="c1">#                   C O M P L E X   S T R E S S E S   I N   T R I A N G U L A R   E L E M E N T S   ( T R I A 3 )</span>
            <span class="c1">#                                                          (REAL/IMAGINARY)</span>
            <span class="c1">#</span>
            <span class="c1">#  ELEMENT       FIBER                                     - STRESSES IN ELEMENT  COORDINATE SYSTEM -</span>
            <span class="c1">#    ID.        DISTANCE              NORMAL-X                       NORMAL-Y                      SHEAR-XY               VON MISES</span>
            <span class="c1">#0       1  -4.359080E+00  -1.391918E+00 /  2.474756E-03  -1.423926E+00 /  2.530494E-03   2.655153E-02 / -5.158625E-05   1.408948E+00</span>
            <span class="c1">#            4.359080E+00   1.391918E+00 / -2.474756E-03   1.423926E+00 / -2.530494E-03  -2.655153E-02 /  5.158625E-05   1.408948E+00</span>

            <span class="c1">#msg = self.code_information()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;  skipping </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name_str</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="c1">#msg = &#39;%s-%s&#39; % (self.table_name_str, self.element_name)</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span> <span class="c1"># random; CTRIA3</span>
            <span class="c1">#2 FD1 RS Z1 = Fibre Distance</span>
            <span class="c1">#3 SX1 RS Normal in x at Z1</span>
            <span class="c1">#4 SY1 RS Normal in y at Z1</span>
            <span class="c1">#5 TXY1 RS Shear in xy at Z1</span>
            <span class="c1">#6 RMSVM1 RS RMS von Mises at Z1</span>

            <span class="c1">#7 FD2 RS Z2 = Fibre Distance</span>
            <span class="c1">#8 SX2 RS Normal in x at Z2</span>
            <span class="c1">#9 SY2 RS Normal in y at Z2</span>
            <span class="c1">#10 TXY2 RS Shear in xy at Z2</span>
            <span class="c1">#11 RMSVM2 RS RMS von Mises at Z2</span>

            <span class="n">element_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
                <span class="n">obj_vector_random</span> <span class="o">=</span> <span class="n">RandomPlateStressArray</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">obj_vector_random</span> <span class="o">=</span> <span class="n">RandomPlateStrainArray</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;nonlinear_factor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">element_id</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
            <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">44</span>  <span class="c1"># 4*11</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">nlayers</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">2</span>
            <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nlayers</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_random</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">assert</span> <span class="n">obj</span><span class="o">.</span><span class="n">is_built</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">is_built</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span>
                    <span class="n">ints1</span> <span class="o">=</span> <span class="n">ints</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">eids</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">eids</span><span class="p">,</span> <span class="n">eids</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">eids</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">eids</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">)</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">11</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">:]</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">floats</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
                <span class="c1">#fd, sx, sy, txy,</span>
                <span class="n">floats1</span> <span class="o">=</span> <span class="n">floats</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats1</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CTRIA3 random numwide=11 SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">oes_ctria3_random_11</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span> <span class="c1"># random MSC stress/strain; CTRIA3</span>
            <span class="c1"># _oes_cquad4 is the same as _oes_ctria3</span>
            <span class="n">element_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
                <span class="n">obj_vector_random</span> <span class="o">=</span> <span class="n">RandomPlateStressArray</span>
                <span class="c1">#result_name = prefix + &#39;ctria3_stress&#39; + postfix</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">obj_vector_random</span> <span class="o">=</span> <span class="n">RandomPlateStrainArray</span>
                <span class="c1">#result_name = prefix + &#39;ctria3_strain&#39; + postfix</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;nonlinear_factor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">element_id</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
            <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">36</span>  <span class="c1"># 4*9</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">nlayers</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">2</span>
            <span class="n">nnodes_expected</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nlayers</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_random</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">assert</span> <span class="n">obj</span><span class="o">.</span><span class="n">is_built</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">is_built</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span>
                    <span class="n">ints1</span> <span class="o">=</span> <span class="n">ints</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">eids</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">eids</span><span class="p">,</span> <span class="n">eids</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">eids</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">eids</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">)</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">9</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">:]</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">floats</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
                <span class="c1">#fd, sx, sy, txy,</span>
                <span class="n">floats1</span> <span class="o">=</span> <span class="n">floats</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_expected</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats1</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CTRIA3 random2 SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">oes_ctria3_random_9</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_cquad4_144</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">ndata</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
                        <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">postfix</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 64 : CQUAD8</span>
<span class="sd">         - 70 : CTRIAR</span>
<span class="sd">         - 75 : CTRIA6</span>
<span class="sd">         - 82 : CQUADR</span>
<span class="sd">         - 144 : CQUAD4-bilinear</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealPlateStressArray</span>
            <span class="n">obj_vector_complex</span> <span class="o">=</span> <span class="n">ComplexPlateStressArray</span>
            <span class="n">obj_vector_random</span> <span class="o">=</span> <span class="n">RandomPlateStressArray</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">64</span><span class="p">:</span> <span class="c1"># CQUAD8</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquad8_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="c1">#gridC = &#39;CEN/8&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">70</span><span class="p">:</span>  <span class="c1"># CTRIAR</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctriar_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="c1">#gridC = &#39;CEN/3&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">75</span><span class="p">:</span>  <span class="c1"># CTRIA6</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctria6_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="c1">#gridC = &#39;CEN/6&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">82</span><span class="p">:</span>  <span class="c1"># CQUADR</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquadr_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="c1">#gridC = &#39;CEN/4&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">144</span><span class="p">:</span>  <span class="c1"># CQUAD4-bilinear</span>
                <span class="c1"># there&#39;s no nead to separate this with centroidal strain</span>
                <span class="c1"># because you can only have one in a given OP2</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquad4_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="c1">#gridC = &#39;CEN/4&#39;</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
                <span class="c1">#msg = &#39;sort1 Type=%s num=%s&#39; % (self.element_name, self.element_type)</span>
                <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealPlateStrainArray</span>
            <span class="n">obj_vector_complex</span> <span class="o">=</span> <span class="n">ComplexPlateStrainArray</span>
            <span class="n">obj_vector_random</span> <span class="o">=</span> <span class="n">RandomPlateStrainArray</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">64</span><span class="p">:</span> <span class="c1"># CQUAD8</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquad8_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="c1">#gridC = &#39;CEN/8&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">70</span><span class="p">:</span>  <span class="c1"># CTRIAR</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctriar_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="c1">#gridC = &#39;CEN/3&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">75</span><span class="p">:</span>  <span class="c1"># CTRIA6</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctria6_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="c1">#gridC = &#39;CEN/6&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">82</span><span class="p">:</span> <span class="c1"># CQUADR</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquadr_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="c1">#gridC = &#39;CEN/4&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">144</span><span class="p">:</span> <span class="c1"># CQUAD4-bilinear</span>
                <span class="c1"># there&#39;s no nead to separate this with centroidal strain</span>
                <span class="c1"># because you can only have one in a given OP2</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquad4_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="c1">#gridC = &#39;CEN/4&#39;</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">64</span><span class="p">,</span> <span class="mi">82</span><span class="p">,</span> <span class="mi">144</span><span class="p">]:</span>
            <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">4</span> <span class="c1"># + 1 centroid</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">70</span><span class="p">,</span> <span class="mi">75</span><span class="p">]:</span>
            <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">3</span> <span class="c1"># + 1 centroid</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="n">nnodes_all</span> <span class="o">=</span> <span class="n">nnodes</span> <span class="o">+</span> <span class="mi">1</span> <span class="c1"># adding the centroid</span>

        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">numwide_real</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">17</span> <span class="o">*</span> <span class="n">nnodes_all</span>
        <span class="n">numwide_imag</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">15</span> <span class="o">*</span> <span class="n">nnodes_all</span>
        <span class="n">numwide_random</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">9</span> <span class="o">*</span> <span class="n">nnodes_all</span>
        <span class="c1">#numwide_imag2 = 2 + 16 * nnodes_all</span>
        <span class="c1">#print(&#39;%s real=%s imag=%s imag2=%s random=%s&#39; % (</span>
            <span class="c1">#self.element_name, numwide_real, numwide_imag, numwide_imag2, numwide_random</span>
        <span class="c1">#))</span>
        <span class="c1">#etype = self.element_name</span>
        <span class="c1">#grid_center = &#39;CEN/%i&#39; % nnodes</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_real</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">17</span> <span class="o">*</span> <span class="n">nnodes_all</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="k">assert</span> <span class="n">ndata</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>
            <span class="n">nlayers</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_all</span>  <span class="c1"># 2 layers per node</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nlayers</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">nnodes_all</span>  <span class="c1"># number of &quot;layers&quot; for an element</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="c1">#print(&#39;dt=%s, itime=%s&#39; % (obj.itime, dt))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># self.itime = 0</span>
                <span class="c1"># self.ielement = 0</span>
                <span class="c1"># self.itotal = 0</span>
                <span class="c1">#self.ntimes = 0</span>
                <span class="c1">#self.nelements = 0</span>
                <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>

                <span class="n">istart</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">iend</span> <span class="o">=</span> <span class="n">istart</span> <span class="o">+</span> <span class="n">nlayers</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>

                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span>
                    <span class="n">ints1</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nlayers</span><span class="o">//</span><span class="mi">2</span><span class="p">,</span> <span class="mi">17</span><span class="p">)[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">nnodes_all</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.</span>
                    <span class="n">nids</span> <span class="o">=</span> <span class="n">ints1</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>

                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">eids2</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="n">eids</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">nnodes_all</span> <span class="o">*</span> <span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype8</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                    <span class="n">nids2</span> <span class="o">=</span> <span class="n">vstack</span><span class="p">([</span><span class="n">nids</span><span class="p">,</span> <span class="n">nids</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids2</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">nids2</span>
                    <span class="c1">#assert obj.element_node[:iend, 0].min() &gt; 0, eids2</span>
                    <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">float_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">numwide_real</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span>
                        <span class="n">float_mask1</span> <span class="o">=</span> <span class="n">float_mask</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nlayers</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">17</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nlayers</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">float_mask</span> <span class="o">=</span> <span class="n">float_mask1</span>

                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">results</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)[</span><span class="n">obj</span><span class="o">.</span><span class="n">float_mask</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span>
                    <span class="n">floats1</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nlayers</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>
                    <span class="n">results</span> <span class="o">=</span> <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nlayers</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

                <span class="c1">#[fiber_dist, oxx, oyy, txy, angle, majorP, minorP, ovm]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">results</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CQUAD4-144/CQUAD8... real SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                <span class="n">n</span> <span class="o">=</span> <span class="n">oes_cquad4_144_real</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span>
                                        <span class="n">ntotal</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_imag</span><span class="p">:</span>  <span class="c1"># imag</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="n">numwide_imag</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="c1">#assert self.num_wide * 4 == ntotal, &#39;numwide*4=%s ntotal=%s&#39; % (self.num_wide*4, ntotal)</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_complex</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="p">(</span><span class="n">nnodes_all</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_imag</span><span class="p">)</span>
                <span class="n">floats1</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_all</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
                <span class="n">floats2</span> <span class="o">=</span> <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_all</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_imag</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">ints</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># set center node to 0</span>
                    <span class="n">ints1</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_all</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">nids</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
                    <span class="n">eids2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">eids</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">nnodes_all</span> <span class="o">*</span> <span class="mi">2</span><span class="p">))</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                    <span class="n">nids2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">nids</span><span class="p">,</span> <span class="n">nids</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids2</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">nids2</span>

                <span class="c1">#[fd, sxr, sxi, syr, syi, txyr, txyi]</span>
                <span class="n">isave1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
                <span class="n">isave2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
                <span class="n">real_imag</span> <span class="o">=</span> <span class="n">apply_mag_phase</span><span class="p">(</span><span class="n">floats2</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">isave1</span><span class="p">,</span> <span class="n">isave2</span><span class="p">)</span>

                <span class="n">obj</span><span class="o">.</span><span class="n">fiber_curvature</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats2</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">real_imag</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CQUAD4-144/CQUAD8... imag SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="n">grid_center</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                    <span class="n">s1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">struct_2i</span>  <span class="c1"># 2</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">s1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">struct_2q</span>  <span class="c1"># 2</span>
                <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="n">mapfmt</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;i14f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span> <span class="c1"># 15</span>

                <span class="n">ntotal1</span> <span class="o">=</span> <span class="mi">8</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
                <span class="n">ntotal2</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>  <span class="c1"># 4*15</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal1</span><span class="p">])</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal1</span>

                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal2</span><span class="p">]</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal2</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>  <span class="c1"># len=15*4</span>

                    <span class="n">eid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_id</span><span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="s1">&#39;element&#39;</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="p">(</span><span class="n">grid</span><span class="p">,</span>
                     <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1r</span><span class="p">,</span> <span class="n">sx1i</span><span class="p">,</span> <span class="n">sy1r</span><span class="p">,</span> <span class="n">sy1i</span><span class="p">,</span> <span class="n">txy1r</span><span class="p">,</span> <span class="n">txy1i</span><span class="p">,</span>
                     <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2r</span><span class="p">,</span> <span class="n">sx2i</span><span class="p">,</span> <span class="n">sy2r</span><span class="p">,</span> <span class="n">sy2i</span><span class="p">,</span> <span class="n">txy2r</span><span class="p">,</span> <span class="n">txy2i</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="c1">#grid_center = &#39;CEN/%i&#39; % grid   # this is correct, but fails</span>

                    <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                        <span class="n">sx1</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sx1r</span><span class="p">,</span> <span class="n">sx1i</span><span class="p">)</span>
                        <span class="n">sy1</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sy1r</span><span class="p">,</span> <span class="n">sy1i</span><span class="p">)</span>
                        <span class="n">sx2</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sx2r</span><span class="p">,</span> <span class="n">sx2i</span><span class="p">)</span>
                        <span class="n">sy2</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sy2r</span><span class="p">,</span> <span class="n">sy2i</span><span class="p">)</span>
                        <span class="n">txy1</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">txy1r</span><span class="p">,</span> <span class="n">txy1i</span><span class="p">)</span>
                        <span class="n">txy2</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">txy2r</span><span class="p">,</span> <span class="n">txy2i</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">sx1</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sx1r</span><span class="p">,</span> <span class="n">sx1i</span><span class="p">)</span>
                        <span class="n">sy1</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sy1r</span><span class="p">,</span> <span class="n">sy1i</span><span class="p">)</span>
                        <span class="n">sx2</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sx2r</span><span class="p">,</span> <span class="n">sx2i</span><span class="p">)</span>
                        <span class="n">sy2</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sy2r</span><span class="p">,</span> <span class="n">sy2i</span><span class="p">)</span>
                        <span class="n">txy1</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">txy1r</span><span class="p">,</span> <span class="n">txy1i</span><span class="p">)</span>
                        <span class="n">txy2</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">txy2r</span><span class="p">,</span> <span class="n">txy2i</span><span class="p">)</span>

                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid_center</span><span class="p">,</span> <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid_center</span><span class="p">,</span> <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">)</span>

                    <span class="k">for</span> <span class="n">unused_node_id</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes</span><span class="p">):</span>  <span class="c1"># nodes pts</span>
                        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal2</span><span class="p">]</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal2</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                        <span class="p">(</span><span class="n">grid</span><span class="p">,</span>
                         <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1r</span><span class="p">,</span> <span class="n">sx1i</span><span class="p">,</span> <span class="n">sy1r</span><span class="p">,</span> <span class="n">sy1i</span><span class="p">,</span> <span class="n">txy1r</span><span class="p">,</span> <span class="n">txy1i</span><span class="p">,</span>
                         <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2r</span><span class="p">,</span> <span class="n">sx2i</span><span class="p">,</span> <span class="n">sy2r</span><span class="p">,</span> <span class="n">sy2i</span><span class="p">,</span> <span class="n">txy2r</span><span class="p">,</span> <span class="n">txy2i</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>

                        <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                            <span class="n">sx1</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sx1r</span><span class="p">,</span> <span class="n">sx1i</span><span class="p">)</span>
                            <span class="n">sx2</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sx2r</span><span class="p">,</span> <span class="n">sx2i</span><span class="p">)</span>
                            <span class="n">sy1</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sy1r</span><span class="p">,</span> <span class="n">sy1i</span><span class="p">)</span>
                            <span class="n">sy2</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sy2r</span><span class="p">,</span> <span class="n">sy2i</span><span class="p">)</span>
                            <span class="n">txy1</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">txy1r</span><span class="p">,</span> <span class="n">txy1i</span><span class="p">)</span>
                            <span class="n">txy2</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">txy2r</span><span class="p">,</span> <span class="n">txy2i</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">sx1</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sx1r</span><span class="p">,</span> <span class="n">sx1i</span><span class="p">)</span>
                            <span class="n">sx2</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sx2r</span><span class="p">,</span> <span class="n">sx2i</span><span class="p">)</span>
                            <span class="n">sy1</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sy1r</span><span class="p">,</span> <span class="n">sy1i</span><span class="p">)</span>
                            <span class="n">sy2</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sy2r</span><span class="p">,</span> <span class="n">sy2i</span><span class="p">)</span>
                            <span class="n">txy1</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">txy1r</span><span class="p">,</span> <span class="n">txy1i</span><span class="p">)</span>
                            <span class="n">txy2</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">txy2r</span><span class="p">,</span> <span class="n">txy2i</span><span class="p">)</span>

                        <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">)</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">)</span>
        <span class="c1">#elif self.format_code == 1 and self.num_wide == numwide_random: # random</span>
            <span class="c1">#msg = self.code_information()</span>
            <span class="c1">#msg += &#39;  numwide=%s numwide_real=%s numwide_imag=%s numwide_random=%s&#39; % (</span>
                <span class="c1">#self.num_wide, numwide_real, numwide_imag, numwide_random)</span>
            <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg), None, None</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_random</span><span class="p">:</span>
            <span class="c1"># 47 - CQUAD8-64</span>
            <span class="c1"># 38 - CTRIAR-70</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="k">assert</span> <span class="n">ndata</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>
            <span class="n">nlayers</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_all</span>  <span class="c1"># 2 layers per node</span>

            <span class="c1">#if self.read_mode == 1:</span>
                <span class="c1">#msg = &#39;&#39;</span>
                <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg), None, None</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nlayers</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_random</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">nnodes_all</span>  <span class="c1"># number of &quot;layers&quot; for an element</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="c1">#print(&#39;dt=%s, itime=%s&#39; % (obj.itime, dt))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1"># self.itime = 0</span>
                <span class="c1"># self.ielement = 0</span>
                <span class="c1"># self.itotal = 0</span>
                <span class="c1">#self.ntimes = 0</span>
                <span class="c1">#self.nelements = 0</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span>

                <span class="n">istart</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">iend</span> <span class="o">=</span> <span class="n">istart</span> <span class="o">+</span> <span class="n">nlayers</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>

                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span>
                    <span class="n">ints1</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nlayers</span><span class="o">//</span><span class="mi">2</span><span class="p">,</span> <span class="mi">17</span><span class="p">)[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">nnodes_all</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.</span>
                    <span class="n">nids</span> <span class="o">=</span> <span class="n">ints1</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>

                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">eids2</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="n">eids</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">nnodes_all</span> <span class="o">*</span> <span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                    <span class="n">nids2</span> <span class="o">=</span> <span class="n">vstack</span><span class="p">([</span><span class="n">nids</span><span class="p">,</span> <span class="n">nids</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids2</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">nids2</span>
                    <span class="c1">#assert obj.element_node[:iend, 0].min() &gt; 0, eids2</span>
                    <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">float_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">numwide_real</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span>
                        <span class="n">float_mask1</span> <span class="o">=</span> <span class="n">float_mask</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nlayers</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">17</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nlayers</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">float_mask</span> <span class="o">=</span> <span class="n">float_mask1</span>

                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">nonlinear_factor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">results</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)[</span><span class="n">obj</span><span class="o">.</span><span class="n">float_mask</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span>
                    <span class="n">floats1</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nlayers</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>
                    <span class="n">results</span> <span class="o">=</span> <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nlayers</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

                <span class="c1">#[fiber_dist, oxx, oyy, txy, angle, majorP, minorP, ovm]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">results</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CQUAD4-144/CQUAD8... random SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="c1">#numwide_random = 2 + 9 * nnodes_all</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">oes_cquad4_144_random</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">,</span> <span class="n">ndata</span><span class="p">)</span>

            <span class="c1">#if self.read_mode == 1:</span>
                <span class="c1">#msg = &#39;&#39;</span>
                <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg), None, None</span>
            <span class="c1">##self.show_data(data[:44])</span>
            <span class="c1">#ntotal = 44</span>
            <span class="c1">#struct1 = Struct(self._endian + b&#39;i4si 8f&#39;)</span>
            <span class="c1">#for i in ra</span>
            <span class="c1">#for i in range(20):</span>
                <span class="c1">#edata = data[n:n+ntotal]</span>
                <span class="c1">#out = struct1.unpack(edata)</span>
                <span class="c1">#self.show_data(edata)</span>
                <span class="c1">#print(out)</span>
                <span class="c1">#n += ntotal</span>

            <span class="c1">## 47 - CQUAD8-64</span>
            <span class="c1">##msg = self.code_information()</span>
            <span class="c1">#msg = &#39;%s-CQUAD4-numwide=%s format_code=%s;\n numwide_real=%s numwide_imag=%s numwide_random=%s&#39; % (</span>
                <span class="c1">#self.table_name_str, self.num_wide, self.format_code,</span>
                <span class="c1">#numwide_real, numwide_imag, numwide_random)</span>
            <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg), None, None</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">70</span><span class="p">,</span> <span class="mi">87</span><span class="p">]:</span>
            <span class="c1"># 70 - CTRIA6-75</span>
            <span class="c1"># 87 - CQUAD4-144</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-numwide=</span><span class="si">%s</span><span class="s1"> format_code=</span><span class="si">%s</span><span class="s1">;</span><span class="se">\n</span><span class="s1"> numwide_real=</span><span class="si">%s</span><span class="s1"> numwide_imag=</span><span class="si">%s</span><span class="s1"> numwide_random=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_name_str</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span><span class="p">,</span>
                <span class="n">numwide_real</span><span class="p">,</span> <span class="n">numwide_imag</span><span class="p">,</span> <span class="n">numwide_random</span><span class="p">)</span>
            <span class="c1">#print(msg)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

        <span class="c1">#elif self.format_code in [2, 3] and self.num_wide == 70:</span>
            <span class="c1">## 87 - CQUAD4-144</span>
            <span class="c1">##msg = self.code_information()</span>
            <span class="c1">#msg = &#39;%s-CTRIA6-numwide=%s numwide_real=%s numwide_imag=%s numwide_random=%s&#39; % (</span>
                <span class="c1">#self.table_name_str, self.num_wide, numwide_real, numwide_imag, numwide_random)</span>
            <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg), None, None</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">46</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESXRMS1&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESXNO1&#39;</span><span class="p">]:</span>  <span class="c1"># CTRIA6</span>
            <span class="c1">#C:\MSC.Software\simcenter_nastran_2019.2\tpl_post2\tr1081x.op2</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;skipping random CTRIA6; numwide=46&#39;</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">57</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OESXRMS1&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OESXNO1&#39;</span><span class="p">]:</span>  <span class="c1"># CQUAD8</span>
            <span class="c1">#C:\MSC.Software\simcenter_nastran_2019.2\tpl_post2\tr1081x.op2</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;skipping random CQUAD8; numwide=57&#39;</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_shells_nonlinear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 88 : CTRIA3NL</span>
<span class="sd">         - 90 : CQUAD4NL</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">88</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctria3_stress&#39;</span> <span class="c1"># + postfix  nonlinear_</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">90</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquad4_stress&#39;</span>  <span class="o">+</span> <span class="n">postfix</span> <span class="c1"># nonlinear_</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">88</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctria3_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span> <span class="c1"># nonlinear_</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">90</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquad4_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span> <span class="c1"># nonlinear_</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">)</span>

        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="c1">#print(self.code_information())</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">13</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">88</span><span class="p">,</span> <span class="mi">90</span><span class="p">]:</span>  <span class="c1"># real</span>
            <span class="c1"># single layered hyperelastic (???) ctria3, cquad4</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">52</span>  <span class="c1"># 4*13</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealNonlinearPlateArray</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span>

                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">obj_set_element</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">ielement</span><span class="p">,</span> <span class="n">ielement2</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">nelements</span><span class="p">)</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

                <span class="c1">#[fiber_distance, oxx, oyy, ozz, txy, exx, eyy, ezz, exy, es, eps, ecs]</span>
                <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CTRIA3/CQUAD4_NL real SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;12f&#39;</span><span class="p">)</span>  <span class="c1"># 1+12=13</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;CQUADNL-90 - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>

                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">fd1</span><span class="p">,</span>
                     <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">sz1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span> <span class="n">es1</span><span class="p">,</span> <span class="n">eps1</span><span class="p">,</span> <span class="n">ecs1</span><span class="p">,</span>
                     <span class="n">ex1</span><span class="p">,</span> <span class="n">ey1</span><span class="p">,</span> <span class="n">ez1</span><span class="p">,</span> <span class="n">exy1</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_new_eid_sort1</span><span class="p">(</span>
                        <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="n">fd1</span><span class="p">,</span>
                        <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">sz1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span> <span class="n">es1</span><span class="p">,</span> <span class="n">eps1</span><span class="p">,</span> <span class="n">ecs1</span><span class="p">,</span>
                        <span class="n">ex1</span><span class="p">,</span> <span class="n">ey1</span><span class="p">,</span> <span class="n">ez1</span><span class="p">,</span> <span class="n">exy1</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">25</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">88</span><span class="p">,</span> <span class="mi">90</span><span class="p">]:</span>
            <span class="c1"># TODO: vectorize</span>
            <span class="c1">#     ELEMENT      FIBER                        STRESSES/ TOTAL STRAINS                     EQUIVALENT    EFF. STRAIN     EFF. CREEP</span>
            <span class="c1">#        ID      DISTANCE           X              Y             Z               XY           STRESS    PLASTIC/NLELAST     STRAIN</span>
            <span class="c1"># 0       721  -7.500000E+00   5.262707E+02   2.589492E+02   0.000000E+00  -2.014457E-14   4.557830E+02   5.240113E-02   0.0</span>
            <span class="c1">#                              4.775555E-02  -2.775558E-17  -4.625990E-02  -7.197441E-18</span>
            <span class="c1">#               7.500000E+00   5.262707E+02   2.589492E+02   0.000000E+00   1.308169E-14   4.557830E+02   5.240113E-02   0.0</span>
            <span class="c1">#                              4.775555E-02  -1.387779E-17  -4.625990E-02   4.673947E-18</span>
            <span class="c1"># 0       722  -7.500000E+00   5.262707E+02   2.589492E+02   0.000000E+00   2.402297E-13   4.557830E+02   5.240113E-02   0.0</span>
            <span class="c1">#                              4.775555E-02  -2.081668E-17  -4.625990E-02   8.583152E-17</span>
            <span class="c1">#               7.500000E+00   5.262707E+02   2.589492E+02   0.000000E+00   2.665485E-14   4.557830E+02   5.240113E-02   0.0</span>
            <span class="c1">#                              4.775555E-02  -2.081668E-17  -4.625990E-02   9.523495E-18</span>
            <span class="c1">#</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">100</span>  <span class="c1"># 4*25</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealNonlinearPlateArray</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="c1">#return nelements * self.num_wide * 4</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="n">is_vectorized</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span>

                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="c1">#print(&#39;ielement=%s:%s&#39; % (ielement, ielement2))</span>
                <span class="c1">#print(&#39;itotal=%s:%s&#39; % (itotal, itotal2))</span>

                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">ints</span> <span class="o">=</span> <span class="n">fromstring</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                        <span class="n">unused_values</span> <span class="o">=</span> <span class="n">fromstring</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span>

                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="c1">#eids2 = vstack([eids, eids]).T.ravel()</span>
                    <span class="c1">#print(eids.tolist())</span>
                    <span class="c1">#sss</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>  <span class="c1"># 150</span>
                     <span class="c1">#print(obj.element_node[:10, :])</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">25</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">:]</span>

                <span class="c1">#[fiber_distance, oxx, oyy, ozz, txy, exx, eyy, ezz, exy, es, eps, ecs]</span>
                <span class="c1">#floats[:, 1] = 0</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="c1">#obj.data[obj.itime, ielement:ielement2, :] = floats[:, 1:]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize CTRIA3/CQUAD4_NL imag SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="n">etype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;24f&#39;</span><span class="p">)</span> <span class="c1"># 1+24=25</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="n">eid</span> <span class="o">=</span> <span class="n">out</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;CQUADNL-90 - </span><span class="si">%s</span><span class="s1"> : </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>

                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
                     <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">undef1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span> <span class="n">es1</span><span class="p">,</span> <span class="n">eps1</span><span class="p">,</span> <span class="n">ecs1</span><span class="p">,</span> <span class="n">ex1</span><span class="p">,</span> <span class="n">ey1</span><span class="p">,</span> <span class="n">undef2</span><span class="p">,</span> <span class="n">etxy1</span><span class="p">,</span>
                     <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">undef3</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,</span> <span class="n">es2</span><span class="p">,</span> <span class="n">eps2</span><span class="p">,</span> <span class="n">ecs2</span><span class="p">,</span> <span class="n">ex2</span><span class="p">,</span> <span class="n">ey2</span><span class="p">,</span> <span class="n">undef4</span><span class="p">,</span> <span class="n">etxy2</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_new_eid_sort1</span><span class="p">(</span>
                        <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">etype</span><span class="p">,</span>
                        <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">undef1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span> <span class="n">es1</span><span class="p">,</span> <span class="n">eps1</span><span class="p">,</span> <span class="n">ecs1</span><span class="p">,</span> <span class="n">ex1</span><span class="p">,</span> <span class="n">ey1</span><span class="p">,</span> <span class="n">undef2</span><span class="p">,</span> <span class="n">etxy1</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span>
                        <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">etype</span><span class="p">,</span>
                        <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">undef3</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,</span> <span class="n">es2</span><span class="p">,</span> <span class="n">eps2</span><span class="p">,</span> <span class="n">ecs2</span><span class="p">,</span> <span class="n">ex2</span><span class="p">,</span> <span class="n">ey2</span><span class="p">,</span> <span class="n">undef4</span><span class="p">,</span> <span class="n">etxy2</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c1"># random</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_shells_composite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span>
                              <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">postfix</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 95 : CQUAD4</span>
<span class="sd">         - 96 : CQUAD8</span>
<span class="sd">         - 97 : CTRIA3</span>
<span class="sd">         - 98 : CTRIA6 (composite)</span>
<span class="sd">         - 232 : QUADRLC (CQUADR-composite)</span>
<span class="sd">         - 233 : TRIARLC (CTRIAR-composite)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealCompositePlateStressArray</span>
            <span class="c1">#obj_vector_complex = ComplexCompositePlateStressArray</span>
            <span class="n">unused_obj_vector_random</span> <span class="o">=</span> <span class="n">RandomCompositePlateStressArray</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">95</span><span class="p">:</span> <span class="c1"># CQUAD4</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquad4_composite_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">96</span><span class="p">:</span>  <span class="c1"># CQUAD8</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquad8_composite_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">97</span><span class="p">:</span>  <span class="c1"># CTRIA3</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctria3_composite_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">98</span><span class="p">:</span>  <span class="c1"># CTRIA6</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctria6_composite_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">232</span><span class="p">:</span>  <span class="c1"># CQUADR</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquadr_composite_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">233</span><span class="p">:</span>  <span class="c1"># CTRIAR</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctriar_composite_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealCompositePlateStrainArray</span>
            <span class="c1">#obj_vector_complex = ComplexCompositePlateStrainArray</span>
            <span class="n">unused_obj_vector_random</span> <span class="o">=</span> <span class="n">RandomCompositePlateStrainArray</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">95</span><span class="p">:</span> <span class="c1"># CQUAD4</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquad4_composite_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">96</span><span class="p">:</span>  <span class="c1"># CQUAD8</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquad8_composite_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">97</span><span class="p">:</span>  <span class="c1"># CTRIA3</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctria3_composite_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">98</span><span class="p">:</span>  <span class="c1"># CTRIA6</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctria6_composite_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">232</span><span class="p">:</span>  <span class="c1"># CQUADR</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquadr_composite_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">233</span><span class="p">:</span>  <span class="c1"># CTRIAR</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctriar_composite_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">etype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="c1">#                    S T R E S S E S   I N   L A Y E R E D   C O M P O S I T E   E L E M E N T S   ( T R I A R )</span>
            <span class="c1">#   ELEMENT      PLY STRESSES IN FIBER AND MATRIX DIRECTIONS   INTER-LAMINAR  STRESSES  PRINCIPAL STRESSES (ZERO SHEAR)      MAX</span>
            <span class="c1">#     ID          ID   NORMAL-1     NORMAL-2     SHEAR-12    SHEAR XZ-MAT  SHEAR YZ-MAT  ANGLE    MAJOR        MINOR        SHEAR</span>
            <span class="c1">#      7070        1  7.50000E-01  3.00000E+00  9.86167E-08  -6.58903E-08  3.00000E+00   90.00  3.00000E+00  7.50000E-01  1.12500E+00</span>
            <span class="c1">#      7070        2 -7.50000E-01 -3.00000E+00 -9.86167E-08   0.0          0.0           -0.00 -7.50000E-01 -3.00000E+00  1.12500E+00</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">44</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  [cap, element1, element2, ..., cap]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  cap = </span><span class="si">%i</span><span class="s1">  # assume 1 cap when there could have been multiple</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ndata</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  element1 = [eid_device, layer, o1, o2, t12, t1z, t2z, angle, major, minor, ovm)]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  nelements=</span><span class="si">%i</span><span class="s1">; nnodes=1 # centroid</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nelements</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span>

                <span class="n">istart</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">iend</span> <span class="o">=</span> <span class="n">istart</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>

                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">nids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_layer</span><span class="p">[</span><span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_layer</span><span class="p">[</span><span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">nids</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
                <span class="c1">#[o1, o2, t12, t1z, t2z, angle, major, minor, ovm]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize COMP_SHELL real SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="n">eid_old</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i9f&#39;</span><span class="p">)</span> <span class="c1"># 11</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">44</span><span class="p">]</span>  <span class="c1"># 4*11</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">layer</span><span class="p">,</span> <span class="n">o1</span><span class="p">,</span> <span class="n">o2</span><span class="p">,</span> <span class="n">t12</span><span class="p">,</span> <span class="n">t1z</span><span class="p">,</span> <span class="n">t2z</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">major</span><span class="p">,</span> <span class="n">minor</span><span class="p">,</span> <span class="n">ovm</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%i</span><span class="s1">; layer=</span><span class="si">%i</span><span class="s1">; C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">layer</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>

                    <span class="k">if</span> <span class="n">eid</span> <span class="o">!=</span> <span class="n">eid_old</span><span class="p">:</span>
                        <span class="c1"># originally initialized to None, the buffer doesnt reset it, so it is the old value</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">add_new_eid_sort1</span><span class="p">(</span><span class="n">etype</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">layer</span><span class="p">,</span> <span class="n">o1</span><span class="p">,</span> <span class="n">o2</span><span class="p">,</span>
                                              <span class="n">t12</span><span class="p">,</span> <span class="n">t1z</span><span class="p">,</span> <span class="n">t2z</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">major</span><span class="p">,</span> <span class="n">minor</span><span class="p">,</span> <span class="n">ovm</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">layer</span><span class="p">,</span> <span class="n">o1</span><span class="p">,</span> <span class="n">o2</span><span class="p">,</span>
                                      <span class="n">t12</span><span class="p">,</span> <span class="n">t1z</span><span class="p">,</span> <span class="n">t2z</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">major</span><span class="p">,</span> <span class="n">minor</span><span class="p">,</span> <span class="n">ovm</span><span class="p">)</span>
                    <span class="n">eid_old</span> <span class="o">=</span> <span class="n">eid</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="mi">44</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span>  <span class="c1"># TODO: imag? - not done...</span>
            <span class="c1"># TODO: vectorize</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;imaginary composite stress?&#39;</span><span class="p">)</span>
            <span class="c1">#msg = self.code_information()</span>
            <span class="c1">#nelements = ndata // ntotal</span>
            <span class="c1">#obj_vector_complex = None</span>
            <span class="c1">#auto_return, is_vectorized = self._create_oes_object4(</span>
                <span class="c1">#nelements, result_name, slot, obj_vector_complex)</span>
            <span class="c1">#if auto_return:</span>
                <span class="c1">#return nelements * self.num_wide * 4, None, None</span>

            <span class="c1">## TODO: this is an OEF result???</span>
            <span class="c1">##    furthermore the actual table is calle dout as</span>
            <span class="c1">##    &#39;i8si4f4s&#39;, not &#39;i8si3fi4s&#39;</span>
            <span class="c1">#ntotal = 36</span>
            <span class="c1">#nelements = ndata // ntotal</span>
            <span class="c1">#s = self.struct_i</span>
            <span class="c1">#s2 = Struct(self._endian + b&#39;8si3fi4s&#39;)</span>
            <span class="c1">#s3 = Struct(self._endian + b&#39;8si4f4s&#39;)</span>
            <span class="c1">#for i in range(nelements):</span>
                <span class="c1">##out = s.unpack(data[n:n + ntotal])</span>
                <span class="c1">#eid_device, = s.unpack(data[n:n+4])</span>
                <span class="c1">##t, = s.unpack(data[n:n+4])</span>

                <span class="c1">#if eid_device &gt; 0:</span>
                    <span class="c1">#out = s2.unpack(data[n+4:n+ntotal])</span>
                <span class="c1">#else:</span>
                    <span class="c1">#unused_out1 = s2.unpack(data[n+4:n+ntotal])</span>
                    <span class="c1">#out = s3.unpack(data[n+4:n+ntotal])</span>
                <span class="c1">#(theory, lamid, fp, fm, fb, fmax, fflag) = out</span>

                <span class="c1">#if self.is_debug_file:</span>
                    <span class="c1">#self.binary_debug.write(&#39;%s-%s - (%s) + %s\n&#39; % (self.element_name, self.element_type, eid_device, str(out)))</span>
                <span class="c1">#obj.add_new_eid_sort1(dt, eid, theory, lamid, fp, fm, fb, fmax, fflag)</span>
                <span class="c1">#n += ntotal</span>
            <span class="c1">#raise NotImplementedError(&#39;this is a really weird case...&#39;)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;skipping </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name_str</span><span class="si">}</span><span class="s1">-PCOMP&#39;</span><span class="p">)</span>
            <span class="c1"># OESCP - STRAINS IN LAYERED COMPOSITE ELEMENTS (QUAD4)</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">44</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_mode</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i9f&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>

                <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">ply_id</span><span class="p">,</span> <span class="n">oxx</span><span class="p">,</span> <span class="n">oyy</span><span class="p">,</span> <span class="n">txy</span><span class="p">,</span> <span class="n">txz</span><span class="p">,</span> <span class="n">tyz</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">omax</span><span class="p">,</span> <span class="n">omin</span><span class="p">,</span> <span class="n">max_shear</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                    <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="c1">#print(eid, out)</span>

                <span class="c1">#if self.is_debug_file:</span>
                    <span class="c1">#self.binary_debug.write(&#39;%s-%s - (%s) + %s\n&#39; % (self.element_name, self.element_type, eid_device, str(out)))</span>
                <span class="c1">#obj.add_new_eid_sort1(dt, eid, theory, lamid, fp, fm, fb, fmax, fflag)</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">9</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span> <span class="o">==</span> <span class="s1">&#39;OESRT&#39;</span><span class="p">:</span>
            <span class="c1"># strength_ratio.cquad4_composite_stress</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">36</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_mode</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="c1"># not 100%</span>
            <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39; 8s i 3f if&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
                <span class="c1">#self.show_data(edata)</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                <span class="c1">#print(out)</span>

                <span class="c1">#(eid_device, failure_theory, ply_id, ratio_ply, ratio_bonding, ratio_element, seven, eight, nine) = out</span>
                <span class="c1">#eid, dt = get_eid_dt_from_eid_device(</span>
                    <span class="c1">#eid_device, self.nonlinear_factor, self.sort_method)</span>
                <span class="c1">#print(eid, out)</span>

                <span class="c1">#if self.is_debug_file:</span>
                    <span class="c1">#self.binary_debug.write(&#39;%s-%s - (%s) + %s\n&#39; % (self.element_name, self.element_type, eid_device, str(out)))</span>
                <span class="c1">#obj.add_new_eid_sort1(dt, eid, theory, lamid, fp, fm, fb, fmax, fflag)</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">13</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;OESVM1C&#39;</span><span class="p">,</span> <span class="s1">&#39;OSTRVM1C&#39;</span><span class="p">]:</span>
            <span class="n">is_vectorized</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vectorize COMP_SHELL random SORT</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
            <span class="c1"># OESCP - STRAINS IN LAYERED COMPOSITE ELEMENTS (QUAD4)</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">52</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_mode</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i9f ff&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>

                <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">ply_id</span><span class="p">,</span>
                 <span class="n">o1a</span><span class="p">,</span> <span class="n">o2a</span><span class="p">,</span> <span class="n">t12a</span><span class="p">,</span> <span class="n">o1za</span><span class="p">,</span> <span class="n">o2za</span><span class="p">,</span>
                 <span class="n">o1b</span><span class="p">,</span> <span class="n">o2b</span><span class="p">,</span> <span class="n">t12b</span><span class="p">,</span> <span class="n">o1zb</span><span class="p">,</span> <span class="n">e2zb</span><span class="p">,</span> <span class="n">ovm</span><span class="p">,)</span> <span class="o">=</span> <span class="n">out</span>
                <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                    <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="c1">#print(eid, out)</span>

                <span class="c1">#print(&#39;%s-%s - (%s) + %s\n&#39; % (self.element_name, self.element_type, eid_device, str(out)))</span>
                <span class="c1">#if self.is_debug_file:</span>
                    <span class="c1">#self.binary_debug.write(&#39;%s-%s - (%s) + %s\n&#39; % (self.element_name, self.element_type, eid_device, str(out)))</span>
                <span class="c1">#obj.add_new_eid_sort1(dt, eid, theory, lamid, fp, fm, fb, fmax, fflag)</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#msg = self.code_information()</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-COMP-random-numwide=</span><span class="si">%s</span><span class="s1"> numwide_real=11 numwide_imag=9&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_name_str</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_ctriax6</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span>
                     <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 53 : CTRIAX6</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctriax_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctriax_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">33</span><span class="p">:</span> <span class="c1"># real</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
                <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealTriaxStressArray</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealTriaxStrainArray</span>

            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">132</span>  <span class="c1"># (1+8*4)*4 = 33*4 = 132</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">4</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="n">nnodes_all</span> <span class="o">=</span> <span class="mi">4</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span>

                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_all</span>
                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">33</span><span class="p">)</span>
                <span class="n">floats1</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_all</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">33</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">ints1</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_all</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="n">nids</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
                    <span class="n">eids2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">eids</span><span class="p">]</span> <span class="o">*</span> <span class="n">nnodes_all</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids2</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">nids</span>

                <span class="c1">#[loc, rs, azs, As, ss, maxp, tmax, octs]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats1</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i7f&#39;</span><span class="p">)</span>  <span class="c1"># 36</span>
                <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i7f&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="mi">36</span><span class="p">])</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">loc</span><span class="p">,</span> <span class="n">rs</span><span class="p">,</span> <span class="n">azs</span><span class="p">,</span> <span class="n">As</span><span class="p">,</span> <span class="n">ss</span><span class="p">,</span> <span class="n">maxp</span><span class="p">,</span> <span class="n">tmax</span><span class="p">,</span> <span class="n">octs</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;CTRIAX6-53A - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">loc</span><span class="p">,</span> <span class="n">rs</span><span class="p">,</span> <span class="n">azs</span><span class="p">,</span> <span class="n">As</span><span class="p">,</span> <span class="n">ss</span><span class="p">,</span> <span class="n">maxp</span><span class="p">,</span> <span class="n">tmax</span><span class="p">,</span> <span class="n">octs</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="mi">36</span>
                    <span class="k">for</span> <span class="n">unused_j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="mi">32</span><span class="p">])</span>
                        <span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">rs</span><span class="p">,</span> <span class="n">azs</span><span class="p">,</span> <span class="n">As</span><span class="p">,</span> <span class="n">ss</span><span class="p">,</span> <span class="n">maxp</span><span class="p">,</span> <span class="n">tmax</span><span class="p">,</span> <span class="n">octs</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;CTRIAX6-53B - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">loc</span><span class="p">,</span> <span class="n">rs</span><span class="p">,</span> <span class="n">azs</span><span class="p">,</span> <span class="n">As</span><span class="p">,</span> <span class="n">ss</span><span class="p">,</span> <span class="n">maxp</span><span class="p">,</span> <span class="n">tmax</span><span class="p">,</span> <span class="n">octs</span><span class="p">)</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="mi">32</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">37</span><span class="p">:</span> <span class="c1"># imag</span>
            <span class="c1"># TODO: vectorize object</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
                <span class="c1">#print(&#39;self.element_type&#39;, self.element_type)</span>
                <span class="c1">#print(&#39;self.element_name&#39;, self.element_name)</span>
                <span class="c1">#raise NotImplementedError(&#39;ComplexTriaxStressArray&#39;)</span>
                <span class="n">obj_vector_complex</span> <span class="o">=</span> <span class="n">ComplexTriaxStressArray</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;ComplexTriaxStrainArray&#39;</span><span class="p">)</span>
                <span class="c1">#obj_vector_complex = ComplexTriaxStrainArray</span>

            <span class="n">num_wide</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">*</span> <span class="mi">9</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="k">assert</span> <span class="n">num_wide</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span><span class="p">,</span> <span class="n">num_wide</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>  <span class="c1"># (1+8*4)*4 = 33*4 = 132</span>
            <span class="n">leftover</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">%</span> <span class="n">ntotal</span>
            <span class="k">assert</span> <span class="n">leftover</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ntotal=</span><span class="si">%s</span><span class="s1"> nelements=</span><span class="si">%s</span><span class="s1"> leftover=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ntotal</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">leftover</span><span class="p">)</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_complex</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="n">auto_return</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">is_vectorized</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">4</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="n">nnodes_all</span> <span class="o">=</span> <span class="mi">4</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_all</span>
                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>

                <span class="n">numwide_imag</span> <span class="o">=</span> <span class="mi">37</span>
                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_imag</span><span class="p">)</span>
                <span class="n">floats1</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_all</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_imag</span><span class="p">)</span>
                    <span class="n">ints1</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_all</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="n">nids</span> <span class="o">=</span> <span class="n">ints1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
                    <span class="n">eids2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">eids</span><span class="p">]</span> <span class="o">*</span> <span class="n">nnodes_all</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids2</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">nids</span>

                <span class="c1"># [loc, rsr, rsi, azsr, azsi, Asr, Asi, ssr, ssi]</span>
                <span class="n">isave1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
                <span class="n">isave2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
                <span class="n">real_imag</span> <span class="o">=</span> <span class="n">apply_mag_phase</span><span class="p">(</span><span class="n">floats1</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">isave1</span><span class="p">,</span> <span class="n">isave2</span><span class="p">)</span>

                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">real_imag</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ntotal1</span> <span class="o">=</span> <span class="mi">40</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
                <span class="n">ntotal2</span> <span class="o">=</span> <span class="mi">36</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
                <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i8f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span> <span class="c1"># 10*4 = 40</span>
                <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="n">mapfmt</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;i8f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>  <span class="c1">#  9*4 = 36</span>

                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal1</span><span class="p">])</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">loc</span><span class="p">,</span> <span class="n">rsr</span><span class="p">,</span> <span class="n">rsi</span><span class="p">,</span> <span class="n">azsr</span><span class="p">,</span> <span class="n">azsi</span><span class="p">,</span> <span class="n">Asr</span><span class="p">,</span> <span class="n">Asi</span><span class="p">,</span> <span class="n">ssr</span><span class="p">,</span> <span class="n">ssi</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;CTRIAX6-53 eid=</span><span class="si">%i</span><span class="se">\n</span><span class="s1">    </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="c1">#print(&#39;CTRIAX6-53 eid=%i\n    %s\n&#39; % (eid, str(out)))</span>

                    <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                        <span class="n">rs</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">rsr</span><span class="p">,</span> <span class="n">rsi</span><span class="p">)</span>
                        <span class="n">azs</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">azsr</span><span class="p">,</span> <span class="n">azsi</span><span class="p">)</span>
                        <span class="n">As</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">Asr</span><span class="p">,</span> <span class="n">Asi</span><span class="p">)</span>
                        <span class="n">ss</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">ssr</span><span class="p">,</span> <span class="n">ssi</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">rs</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">rsr</span><span class="p">,</span> <span class="n">rsi</span><span class="p">)</span>
                        <span class="n">azs</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">azsr</span><span class="p">,</span> <span class="n">azsi</span><span class="p">)</span>
                        <span class="n">As</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">Asr</span><span class="p">,</span> <span class="n">Asi</span><span class="p">)</span>
                        <span class="n">ss</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">ssr</span><span class="p">,</span> <span class="n">ssi</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_new_eid_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">loc</span><span class="p">,</span> <span class="n">rs</span><span class="p">,</span> <span class="n">azs</span><span class="p">,</span> <span class="n">As</span><span class="p">,</span> <span class="n">ss</span><span class="p">)</span>

                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal1</span>
                    <span class="k">for</span> <span class="n">unused_j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal2</span><span class="p">])</span>
                        <span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">rsr</span><span class="p">,</span> <span class="n">rsi</span><span class="p">,</span> <span class="n">azsr</span><span class="p">,</span> <span class="n">azsi</span><span class="p">,</span> <span class="n">Asr</span><span class="p">,</span> <span class="n">Asi</span><span class="p">,</span> <span class="n">ssr</span><span class="p">,</span> <span class="n">ssi</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;    </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                        <span class="c1">#print(&quot;eid=%s loc=%s rs=%s azs=%s as=%s ss=%s&quot; % (</span>
                            <span class="c1">#eid, loc, rs, azs, As, ss))</span>

                        <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                            <span class="n">rs</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">rsr</span><span class="p">,</span> <span class="n">rsi</span><span class="p">)</span>
                            <span class="n">azs</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">azsr</span><span class="p">,</span> <span class="n">azsi</span><span class="p">)</span>
                            <span class="n">As</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">Asr</span><span class="p">,</span> <span class="n">Asi</span><span class="p">)</span>
                            <span class="n">ss</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">ssr</span><span class="p">,</span> <span class="n">ssi</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">rs</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">rsr</span><span class="p">,</span> <span class="n">rsi</span><span class="p">)</span>
                            <span class="n">azs</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">azsr</span><span class="p">,</span> <span class="n">azsi</span><span class="p">)</span>
                            <span class="n">As</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">Asr</span><span class="p">,</span> <span class="n">Asi</span><span class="p">)</span>
                            <span class="n">ss</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">ssr</span><span class="p">,</span> <span class="n">ssi</span><span class="p">)</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">loc</span><span class="p">,</span> <span class="n">rs</span><span class="p">,</span> <span class="n">azs</span><span class="p">,</span> <span class="n">As</span><span class="p">,</span> <span class="n">ss</span><span class="p">)</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal2</span>  <span class="c1"># 4*8</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg)</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_cbush</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span>
                   <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 102 : CBUSH</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbush_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbush_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
                <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealBushStressArray</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealBushStrainArray</span>

            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">7</span><span class="p">,</span> <span class="s2">&quot;num_wide=</span><span class="si">%s</span><span class="s2"> not 7&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">28</span>  <span class="c1"># 4*7</span>

            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span>

                <span class="n">istart</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">iend</span> <span class="o">=</span> <span class="n">istart</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">obj_set_element</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">istart</span><span class="p">,</span> <span class="n">iend</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">nelements</span><span class="p">)</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
                <span class="c1">#[tx, ty, tz, rx, ry, rz]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;6f&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>  <span class="c1"># num_wide=7</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;CBUSH-102 - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>

                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">,</span> <span class="n">tz</span><span class="p">,</span> <span class="n">rx</span><span class="p">,</span> <span class="n">ry</span><span class="p">,</span> <span class="n">rz</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">,</span> <span class="n">tz</span><span class="p">,</span> <span class="n">rx</span><span class="p">,</span> <span class="n">ry</span><span class="p">,</span> <span class="n">rz</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">13</span><span class="p">:</span>  <span class="c1"># imag</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
                <span class="n">obj_complex</span> <span class="o">=</span> <span class="n">ComplexCBushStressArray</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">obj_complex</span> <span class="o">=</span> <span class="n">ComplexCBushStrainArray</span>

            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">52</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>  <span class="c1"># 4*13</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_complex</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">obj_set_element</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">itotal</span><span class="p">,</span> <span class="n">itotal2</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">nelements</span><span class="p">)</span>

                <span class="n">isave1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
                <span class="n">isave2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">]</span>
                <span class="n">real_imag</span> <span class="o">=</span> <span class="n">apply_mag_phase</span><span class="p">(</span><span class="n">floats</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">isave1</span><span class="p">,</span> <span class="n">isave2</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">real_imag</span>

                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;12f&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>  <span class="c1"># num_wide=7</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;CBUSH-102 - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>

                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
                     <span class="n">txr</span><span class="p">,</span> <span class="n">tyr</span><span class="p">,</span> <span class="n">tzr</span><span class="p">,</span> <span class="n">rxr</span><span class="p">,</span> <span class="n">ryr</span><span class="p">,</span> <span class="n">rzr</span><span class="p">,</span>
                     <span class="n">txi</span><span class="p">,</span> <span class="n">tyi</span><span class="p">,</span> <span class="n">tzi</span><span class="p">,</span> <span class="n">rxi</span><span class="p">,</span> <span class="n">ryi</span><span class="p">,</span> <span class="n">rzi</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                        <span class="n">tx</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">txr</span><span class="p">,</span> <span class="n">txi</span><span class="p">)</span>
                        <span class="n">ty</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">tyr</span><span class="p">,</span> <span class="n">tyi</span><span class="p">)</span>
                        <span class="n">tz</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">tzr</span><span class="p">,</span> <span class="n">tzi</span><span class="p">)</span>
                        <span class="n">rx</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">rxr</span><span class="p">,</span> <span class="n">rxi</span><span class="p">)</span>
                        <span class="n">ry</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">ryr</span><span class="p">,</span> <span class="n">ryi</span><span class="p">)</span>
                        <span class="n">rz</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">rzr</span><span class="p">,</span> <span class="n">rzi</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">tx</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">txr</span><span class="p">,</span> <span class="n">txi</span><span class="p">)</span>
                        <span class="n">ty</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">tyr</span><span class="p">,</span> <span class="n">tyi</span><span class="p">)</span>
                        <span class="n">tz</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">tzr</span><span class="p">,</span> <span class="n">tzi</span><span class="p">)</span>
                        <span class="n">rx</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">rxr</span><span class="p">,</span> <span class="n">rxi</span><span class="p">)</span>
                        <span class="n">ry</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">ryr</span><span class="p">,</span> <span class="n">ryi</span><span class="p">)</span>
                        <span class="n">rz</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">rzr</span><span class="p">,</span> <span class="n">rzi</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">,</span> <span class="n">tz</span><span class="p">,</span> <span class="n">rx</span><span class="p">,</span> <span class="n">ry</span><span class="p">,</span> <span class="n">rz</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg)</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_cbush1d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span>
                     <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 40 : CBUSH1D</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbush1d_stress_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbush1d_stress_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
                <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealBush1DStressArray</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">#self.create_transient_object(self.cbush1d_stress_strain, Bush1DStrain)  # undefined</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;cbush1d_stress_strain; numwide=8&#39;</span><span class="p">)</span>

            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">32</span>  <span class="c1"># 4*8</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span>

                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itime</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>

                <span class="k">if</span> <span class="mi">1</span><span class="p">:</span> <span class="c1">#obj.itime == 0:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">fail</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">7</span><span class="p">]</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">is_failed</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">fail</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
                <span class="c1">#[xxx, fe, ue, ve, ao, ae, ep, xxx]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:</span><span class="mi">7</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;6fi&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="mi">32</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>  <span class="c1"># num_wide=25</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;CBUSH1D-40 - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">fe</span><span class="p">,</span> <span class="n">ue</span><span class="p">,</span> <span class="n">ve</span><span class="p">,</span> <span class="n">ao</span><span class="p">,</span> <span class="n">ae</span><span class="p">,</span> <span class="n">ep</span><span class="p">,</span> <span class="n">fail</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="c1"># axial_force, axial_displacement, axial_velocity, axial_stress,</span>
                    <span class="c1"># axial_strain, plastic_strain, is_failed</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">fe</span><span class="p">,</span> <span class="n">ue</span><span class="p">,</span> <span class="n">ve</span><span class="p">,</span> <span class="n">ao</span><span class="p">,</span> <span class="n">ae</span><span class="p">,</span> <span class="n">ep</span><span class="p">,</span> <span class="n">fail</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span>  <span class="c1"># imag</span>
            <span class="c1"># TODO: vectorize object</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">36</span>  <span class="c1"># 4*9</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
                <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                    <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">ComplexCBush1DStressArray</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;self.cbush1d_stress_strain; complex strain&#39;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span>

                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itime</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">obj_set_element</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">itotal</span><span class="p">,</span> <span class="n">itotal2</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">nelements</span><span class="p">)</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="c1">#[fer, uer, aor, aer,</span>
                <span class="c1"># fei, uei, aoi, aei]</span>
                <span class="n">isave1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
                <span class="n">isave2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
                <span class="n">real_imag</span> <span class="o">=</span> <span class="n">apply_mag_phase</span><span class="p">(</span><span class="n">floats</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">isave1</span><span class="p">,</span> <span class="n">isave2</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">real_imag</span>

                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;8f&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>

                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>  <span class="c1"># num_wide=25</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
                     <span class="n">fer</span><span class="p">,</span> <span class="n">uer</span><span class="p">,</span> <span class="n">aor</span><span class="p">,</span> <span class="n">aer</span><span class="p">,</span>
                     <span class="n">fei</span><span class="p">,</span> <span class="n">uei</span><span class="p">,</span> <span class="n">aoi</span><span class="p">,</span> <span class="n">aei</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                        <span class="n">fe</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">fer</span><span class="p">,</span> <span class="n">fei</span><span class="p">)</span>
                        <span class="n">ue</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">uer</span><span class="p">,</span> <span class="n">uei</span><span class="p">)</span>
                        <span class="n">ao</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">aor</span><span class="p">,</span> <span class="n">aoi</span><span class="p">)</span>
                        <span class="n">ae</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">aer</span><span class="p">,</span> <span class="n">aei</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fe</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">fer</span><span class="p">,</span> <span class="n">fei</span><span class="p">)</span>
                        <span class="n">ue</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">uer</span><span class="p">,</span> <span class="n">uei</span><span class="p">)</span>
                        <span class="n">ao</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">aor</span><span class="p">,</span> <span class="n">aoi</span><span class="p">)</span>
                        <span class="n">ae</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">aer</span><span class="p">,</span> <span class="n">aei</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_new_eid</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">fe</span><span class="p">,</span> <span class="n">ue</span><span class="p">,</span> <span class="n">ao</span><span class="p">,</span> <span class="n">ae</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg)</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_crod_nonlinear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">unused_is_magnitude_phase</span><span class="p">,</span>
                            <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 87 : CTUBENL</span>
<span class="sd">         - 89 : RODNL</span>
<span class="sd">         - 92 : CONRODNL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#prefix = &#39;nonlinear_&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">87</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctube_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;CTUBENL-87&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">89</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;crod_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;RODNL-89&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">92</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;conrod_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;CONRODNL-92&#39;</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">87</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctube_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;CTUBENL-87&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">89</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;crod_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;RODNL-89&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">92</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;conrod_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;CONRODNL-92&#39;</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">28</span>  <span class="c1">#  7*4 = 28</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">RealNonlinearRodArray</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="c1">#if self.is_debug_file:</span>
                <span class="c1">#self.binary_debug.write(&#39;  [cap, element1, element2, ..., cap]\n&#39;)</span>
                <span class="c1">#self.binary_debug.write(&#39;  cap = %i  # assume 1 cap when there could have been multiple\n&#39; % ndata)</span>
                <span class="c1">#self.binary_debug.write(&#39;  element1 = [eid_device, layer, o1, o2, t12, t1z, t2z, angle, major, minor, ovm)]\n&#39;)</span>
                <span class="c1">#self.binary_debug.write(&#39;  nelements=%i; nnodes=1 # centroid\n&#39; % nelements)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span>
                <span class="n">istart</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">iend</span> <span class="o">=</span> <span class="n">istart</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>

                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
                <span class="c1">#[axial_stress, equiv_stress, total_strain,</span>
                <span class="c1"># eff_plastic_creep_strain, eff_creep_strain, linear_torsional_stresss]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;6f&#39;</span><span class="p">)</span>  <span class="c1"># 1+6=7</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>

                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">axial_stress</span><span class="p">,</span> <span class="n">equiv_stress</span><span class="p">,</span> <span class="n">total_strain</span><span class="p">,</span>
                     <span class="n">eff_plastic_creep_strain</span><span class="p">,</span> <span class="n">eff_creep_strain</span><span class="p">,</span> <span class="n">linear_torsional_stresss</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">axial_stress</span><span class="p">,</span> <span class="n">equiv_stress</span><span class="p">,</span> <span class="n">total_strain</span><span class="p">,</span>
                                  <span class="n">eff_plastic_creep_strain</span><span class="p">,</span> <span class="n">eff_creep_strain</span><span class="p">,</span> <span class="n">linear_torsional_stresss</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_celas_nonlinear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">unused_is_magnitude_phase</span><span class="p">,</span>
                             <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 224 : CELAS1</span>
<span class="sd">         - 226 : CELAS3</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># 224-CELAS1</span>
        <span class="c1"># 225-CELAS3</span>
        <span class="c1"># NonlinearSpringStress</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">numwide_real</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">224</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;celas1_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span> <span class="c1"># nonlinear_</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">225</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;celas3_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span> <span class="c1"># nonlinear_</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;NonlinearSpringStrain&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_real</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;num_wide=</span><span class="si">%s</span><span class="s2"> not 3&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">12</span>  <span class="c1"># 4*3</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
                <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                    <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">RealNonlinearSpringStressArray</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;NonlinearSpringStrainArray&#39;</span><span class="p">)</span> <span class="c1"># undefined</span>

            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">unused_itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span>

                <span class="c1">#[force, stress]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">ielement2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2f&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>  <span class="c1"># num_wide=3</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">force</span><span class="p">,</span> <span class="n">stress</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-</span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">force</span><span class="p">,</span> <span class="n">stress</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_cbush_nonlinear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">unused_is_magnitude_phase</span><span class="p">,</span>
                             <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 226 : CBUSHNL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">226</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbush_force_stress_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;CBUSHNL-226&#39;</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">226</span><span class="p">:</span>
                <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;nonlinear_cbush_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;CBUSHNL-226&#39;</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">19</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">76</span>  <span class="c1">#  19*4 = 76</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="k">assert</span> <span class="n">ndata</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">RealNonlinearBushArray</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="c1">#if self.is_debug_file:</span>
                <span class="c1">#self.binary_debug.write(&#39;  [cap, element1, element2, ..., cap]\n&#39;)</span>
                <span class="c1">#self.binary_debug.write(&#39;  cap = %i  # assume 1 cap when there could have been multiple\n&#39; % ndata)</span>
                <span class="c1">#self.binary_debug.write(&#39;  element1 = [eid_device, layer, o1, o2, t12, t1z, t2z, angle, major, minor, ovm)]\n&#39;)</span>
                <span class="c1">#self.binary_debug.write(&#39;  nelements=%i; nnodes=1 # centroid\n&#39; % nelements)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span>
                <span class="n">istart</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">iend</span> <span class="o">=</span> <span class="n">istart</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>

                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">19</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">19</span><span class="p">)</span>
                <span class="c1">#[fx, fy, fz, otx, oty, otz, etx, ety, etz,</span>
                <span class="c1"># mx, my, mz, orx, ory, orz, erx, ery, erz]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">#             N O N L I N E A R   F O R C E S  A N D  S T R E S S E S  I N   B U S H   E L E M E N T S    ( C B U S H )</span>
                <span class="c1">#</span>
                <span class="c1">#                           F O R,C E                               S T R E S S                             S T R A I N</span>
                <span class="c1"># ELEMENT ID.   FORCE-X      FORCE-Y      FORCE-Z       STRESS-TX    STRESS-TY    STRESS-TZ     STRAIN-TX    STRAIN-TY    STRAIN-TZ</span>
                <span class="c1">#               MOMENT-X     MOMENT-Y     MOMENT-Z      STRESS-RX    STRESS-RY    STRESS-RZ     STRAIN-RX    STRAIN-RY    STRAIN-RZ</span>
                <span class="c1">#        6      0.0          0.0          0.0           0.0          0.0          0.0           0.0          0.0          0.0</span>
                <span class="c1">#               0.0          0.0          0.0           0.0          0.0          0.0           0.0          0.0          0.0</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;18f&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>

                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">fx</span><span class="p">,</span> <span class="n">fy</span><span class="p">,</span> <span class="n">fz</span><span class="p">,</span> <span class="n">otx</span><span class="p">,</span> <span class="n">oty</span><span class="p">,</span> <span class="n">otz</span><span class="p">,</span> <span class="n">etx</span><span class="p">,</span> <span class="n">ety</span><span class="p">,</span> <span class="n">etz</span><span class="p">,</span>
                                 <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mz</span><span class="p">,</span> <span class="n">orx</span><span class="p">,</span> <span class="n">ory</span><span class="p">,</span> <span class="n">orz</span><span class="p">,</span> <span class="n">erx</span><span class="p">,</span> <span class="n">ery</span><span class="p">,</span> <span class="n">erz</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">fx</span><span class="p">,</span> <span class="n">fy</span><span class="p">,</span> <span class="n">fz</span><span class="p">,</span> <span class="n">otx</span><span class="p">,</span> <span class="n">oty</span><span class="p">,</span> <span class="n">otz</span><span class="p">,</span> <span class="n">etx</span><span class="p">,</span> <span class="n">ety</span><span class="p">,</span> <span class="n">etz</span><span class="p">,</span>
                                  <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mz</span><span class="p">,</span> <span class="n">orx</span><span class="p">,</span> <span class="n">ory</span><span class="p">,</span> <span class="n">orz</span><span class="p">,</span> <span class="n">erx</span><span class="p">,</span> <span class="n">ery</span><span class="p">,</span> <span class="n">erz</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_cbend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span>
                   <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 69 : CBEND</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbend_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealBendStressArray</span>
            <span class="n">obj_vector_complex</span> <span class="o">=</span> <span class="n">ComplexBendStressArray</span>
            <span class="n">obj_vector_random</span> <span class="o">=</span> <span class="n">RandomBendStressArray</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbend_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealBendStrainArray</span>
            <span class="n">obj_vector_complex</span> <span class="o">=</span> <span class="n">ComplexBendStrainArray</span>
            <span class="n">obj_vector_random</span> <span class="o">=</span> <span class="n">RandomBendStrainArray</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="c1">#print(self.code_information())</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">21</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span><span class="c1"># real</span>
            <span class="c1">#TCODE,7 =0 Real</span>
            <span class="c1">#2 GRID I External Grid Point identification number</span>
            <span class="c1">#3 CA RS Circumferential Angle</span>
            <span class="c1">#4 EC RS Long. strain at Point C</span>
            <span class="c1">#5 ED RS Long. strain at Point D</span>
            <span class="c1">#6 EE RS Long. strain at Point E</span>
            <span class="c1">#7 EF RS Long. strain at Point F</span>
            <span class="c1">#8 EMAX RS Maximum strain</span>
            <span class="c1">#9 EMIN RS Minimum strain</span>
            <span class="c1">#10 MST RS Margin of Safety in Tension</span>
            <span class="c1">#11 MSC RS Margin of Safety in Compression</span>
            <span class="c1">#Words 2 through 11 repeat 002 times</span>
            <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">84</span>  <span class="c1"># 4*21</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="k">assert</span> <span class="n">ndata</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ndata=</span><span class="si">%s</span><span class="s1"> ntotal=</span><span class="si">%s</span><span class="s1"> nelements=</span><span class="si">%s</span><span class="s1"> error=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ndata</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ndata</span> <span class="o">%</span> <span class="n">ntotal</span><span class="p">)</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">assert</span> <span class="n">obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
                <span class="n">itime</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                <span class="c1">#[max_strain, avg_strain, margin]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ntotali</span> <span class="o">=</span> <span class="mi">40</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span><span class="p">)</span>
                <span class="n">struct2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i9f&#39;</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="mi">4</span><span class="p">]</span>
                    <span class="n">eid_device</span><span class="p">,</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="n">n</span> <span class="o">+=</span> <span class="mi">4</span>
                    <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
                        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotali</span><span class="p">]</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">struct2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;BEND-69 - eid=</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                        <span class="c1">#print(&#39;BEND-69 - eid=%s %s\n&#39; % (eid, str(out)))</span>

                        <span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">sc</span><span class="p">,</span> <span class="n">sd</span><span class="p">,</span> <span class="n">se</span><span class="p">,</span> <span class="n">sf</span><span class="p">,</span> <span class="n">omax</span><span class="p">,</span> <span class="n">omin</span><span class="p">,</span> <span class="n">mst</span><span class="p">,</span> <span class="n">msc</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>

                        <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">sc</span><span class="p">,</span> <span class="n">sd</span><span class="p">,</span> <span class="n">se</span><span class="p">,</span> <span class="n">sf</span><span class="p">,</span> <span class="n">omax</span><span class="p">,</span> <span class="n">omin</span><span class="p">,</span> <span class="n">mst</span><span class="p">,</span> <span class="n">msc</span><span class="p">)</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotali</span>

            <span class="c1">#msg = &#39;&#39;</span>
            <span class="c1">#if self.read_mode == 2:</span>
                <span class="c1">#msg = self.code_information()</span>
            <span class="c1">#n = self._not_implemented_or_skip(data, ndata, msg)</span>
            <span class="c1">#return n, None, None</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">21</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]:</span> <span class="c1"># complex</span>
            <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">84</span>  <span class="c1"># 4*21</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="k">assert</span> <span class="n">ndata</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ndata=</span><span class="si">%s</span><span class="s1"> ntotal=</span><span class="si">%s</span><span class="s1"> nelements=</span><span class="si">%s</span><span class="s1"> error=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ndata</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ndata</span> <span class="o">%</span> <span class="n">ntotal</span><span class="p">)</span>
            <span class="c1">#TCODE,7 =1 Real / Imaginary</span>
            <span class="c1">#2 GRID I External Grid Point identification number</span>
            <span class="c1">#3 CA RS Circumferential Angle</span>
            <span class="c1">#4 SCR RS Long. Stress at Point C</span>
            <span class="c1">#5 SDR RS Long. Stress at Point D</span>
            <span class="c1">#6 SER RS Long. Stress at Point E</span>
            <span class="c1">#7 SFR RS Long. Stress at Point F</span>
            <span class="c1">#8 SCI RS Long. Stress at Point C</span>
            <span class="c1">#9 SDI RS Long. Stress at Point D</span>
            <span class="c1">#10 SEI RS Long. Stress at Point E</span>
            <span class="c1">#11 SFI RS Long. Stress at Point F</span>
            <span class="c1">#Words 2 through 11 repeat 002 times</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_complex</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">assert</span> <span class="n">obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
                <span class="n">itime</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>

                <span class="k">if</span> <span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                <span class="c1">#[max_strain, avg_strain, margin]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ntotali</span> <span class="o">=</span> <span class="mi">40</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span><span class="p">)</span>
                <span class="n">struct2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i9f&#39;</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="mi">4</span><span class="p">]</span>
                    <span class="n">eid_device</span><span class="p">,</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="n">n</span> <span class="o">+=</span> <span class="mi">4</span>
                    <span class="k">for</span> <span class="n">unused_j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
                        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotali</span><span class="p">]</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">struct2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;BEND-69 - eid=</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                        <span class="c1">#print(&#39;BEND-69 - eid=%s %s\n&#39; % (eid, str(out)))</span>

                        <span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">scr</span><span class="p">,</span> <span class="n">sdr</span><span class="p">,</span> <span class="n">ser</span><span class="p">,</span> <span class="n">sfr</span><span class="p">,</span>
                         <span class="n">sci</span><span class="p">,</span> <span class="n">sdi</span><span class="p">,</span> <span class="n">sei</span><span class="p">,</span> <span class="n">sfi</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>

                        <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                            <span class="n">sc</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">scr</span><span class="p">,</span> <span class="n">sci</span><span class="p">)</span>
                            <span class="n">sd</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sdr</span><span class="p">,</span> <span class="n">sdi</span><span class="p">)</span>
                            <span class="n">se</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">ser</span><span class="p">,</span> <span class="n">sei</span><span class="p">)</span>
                            <span class="n">sf</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sfr</span><span class="p">,</span> <span class="n">sfi</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">sc</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">scr</span><span class="p">,</span> <span class="n">sci</span><span class="p">)</span>
                            <span class="n">sd</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sdr</span><span class="p">,</span> <span class="n">sdi</span><span class="p">)</span>
                            <span class="n">se</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">ser</span><span class="p">,</span> <span class="n">sei</span><span class="p">)</span>
                            <span class="n">sf</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sfr</span><span class="p">,</span> <span class="n">sfi</span><span class="p">)</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">sc</span><span class="p">,</span> <span class="n">sd</span><span class="p">,</span> <span class="n">se</span><span class="p">,</span> <span class="n">sf</span><span class="p">)</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotali</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">13</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">52</span>  <span class="c1"># 4*13</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="c1">#TCODE,7 =2 Real</span>
            <span class="c1">#2 GRID I External Grid Point identification number</span>
            <span class="c1">#3 CA RS Circumferential Angle</span>
            <span class="c1">#4 SC RS Long. Stress at Point C</span>
            <span class="c1">#5 SD RS Long. Stress at Point D</span>
            <span class="c1">#6 SE RS Long. Stress at Point E</span>
            <span class="c1">#7 SF RS Long. Stress at Point F</span>
            <span class="c1">#Words 2 through 7 repeat 002 times</span>
            <span class="c1">#if self.table_name != &quot;OESPSD2&quot;:</span>
                <span class="c1">#msg = &#39;&#39;</span>
                <span class="c1">#if self.read_mode == 2:</span>
                    <span class="c1">#msg = self.code_information()</span>
                <span class="c1">#n = self._not_implemented_or_skip(data, ndata, msg)</span>
                <span class="c1">#return n, None, None</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_random</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
                <span class="n">itime</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                <span class="c1">#[max_strain, avg_strain, margin]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ntotali</span> <span class="o">=</span> <span class="mi">24</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span><span class="p">)</span>
                <span class="n">struct2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i5f&#39;</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="mi">4</span><span class="p">]</span>
                    <span class="c1">#self.show_data(edata)</span>
                    <span class="n">eid_device</span><span class="p">,</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="n">n</span> <span class="o">+=</span> <span class="mi">4</span>
                    <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
                        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotali</span><span class="p">]</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">struct2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;BEND-69 - eid=</span><span class="si">%s</span><span class="s1"> dt=</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                        <span class="c1">#print(&#39;BEND-69 - eid=%s dt=%s %s\n&#39; % (eid, dt, str(out)))</span>

                        <span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">sc</span><span class="p">,</span> <span class="n">sd</span><span class="p">,</span> <span class="n">se</span><span class="p">,</span> <span class="n">sf</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">sc</span><span class="p">,</span> <span class="n">sd</span><span class="p">,</span> <span class="n">se</span><span class="p">,</span> <span class="n">sf</span><span class="p">)</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotali</span>

        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_cgap_nonlinear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span>
                            <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 86 : GAPNL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cgap_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span> <span class="c1"># nonlinear_</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cgap_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span> <span class="c1"># nonlinear_</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span>  <span class="c1"># real?</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
                <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">NonlinearGapStressArray</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;NonlinearGapStrain&#39;</span><span class="p">)</span>

            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">44</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 4*11</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="k">assert</span> <span class="n">ndata</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>

                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">obj_set_element</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">ielement</span><span class="p">,</span> <span class="n">ielement2</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">nelements</span><span class="p">)</span>

                <span class="c1">#if obj.itime == 0:</span>
                    <span class="c1">#ints = frombuffer(data, dtype=self.idtype).reshape(nelements, 11).copy()</span>
                    <span class="c1">#eids = ints[:, 0] // 10</span>
                    <span class="c1">#obj.element[ielement:ielement2] = eids</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
                <span class="c1"># skipping [form1, form2]</span>
                <span class="c1">#[cpx, shy, shz, au, shv, shw, slv, slp]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:</span><span class="mi">9</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                    <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;8f4s4s&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;8d8s8s&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>  <span class="c1"># num_wide=25</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">cpx</span><span class="p">,</span> <span class="n">shy</span><span class="p">,</span> <span class="n">shz</span><span class="p">,</span> <span class="n">au</span><span class="p">,</span> <span class="n">shv</span><span class="p">,</span> <span class="n">shw</span><span class="p">,</span> <span class="n">slv</span><span class="p">,</span> <span class="n">slp</span><span class="p">,</span> <span class="n">form1</span><span class="p">,</span> <span class="n">form2</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;CGAPNL-86 - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">cpx</span><span class="p">,</span> <span class="n">shy</span><span class="p">,</span> <span class="n">shz</span><span class="p">,</span> <span class="n">au</span><span class="p">,</span> <span class="n">shv</span><span class="p">,</span> <span class="n">shw</span><span class="p">,</span> <span class="n">slv</span><span class="p">,</span> <span class="n">slp</span><span class="p">,</span> <span class="n">form1</span><span class="p">,</span> <span class="n">form2</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_cbeam_nonlinear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 94 : BEAMNL</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">numwide_real</span> <span class="o">=</span> <span class="mi">51</span>
        <span class="n">numwide_random</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbeam_stress&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbeam_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_real</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">result_name</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
                <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealNonlinearBeamStressArray</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Nonlinear CBEAM Strain...this should never happen&#39;</span><span class="p">)</span>

            <span class="n">ntotal</span> <span class="o">=</span> <span class="n">numwide_real</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>  <span class="c1"># 204</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="n">nlayers</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">8</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nlayers</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">8</span>
                <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  [cap, element1, element2, ..., cap]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="c1">#self.binary_debug.write(&#39;  cap = %i  # assume 1 cap when there could have been multiple\n&#39; % ndata)</span>
                <span class="c1">#self.binary_debug.write(&#39;  #elementi = [eid_device, s1a, s2a, s3a, s4a, axial, smaxa, smina, MSt,\n&#39;)</span>
                <span class="c1">#self.binary_debug.write(&#39;                           s1b, s2b, s3b, s4b, smaxb, sminb,        MSc]\n&#39;)</span>
                <span class="c1">#self.binary_debug.write(&#39;  nelements=%i; nnodes=1 # centroid\n&#39; % nelements)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i 4s5f 4s5f 4s5f 4s5f i 4s5f 4s5f 4s5f 4s5f&#39;</span><span class="p">)</span>  <span class="c1"># 2 + 6*8 + 1 = 51</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">8</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>
                <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2q 8s5d 8s5d 8s5d 8s5d q 8s5d 8s5d 8s5d 8s5d&#39;</span><span class="p">)</span>  <span class="c1"># 2 + 6*8 + 1 = 51</span>

            <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>  <span class="c1"># num_wide=51</span>
                <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal</span><span class="p">]</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;BEAMNL-94 - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>

                <span class="c1">#gridA, CA, long_CA, eqS_CA, tE_CA, eps_CA, ecs_CA,</span>
                <span class="c1">#       DA, long_DA, eqS_DA, tE_DA, eps_DA, ecs_DA,</span>
                <span class="c1">#       EA, long_EA, eqS_EA, tE_EA, eps_EA, ecs_EA,</span>
                <span class="c1">#       FA, long_FA, eqS_FA, tE_FA, eps_FA, ecs_FA,</span>
                <span class="c1">#gridB, CB, long_CB, eqS_CB, tE_CB, eps_CB, ecs_CB,</span>
                <span class="c1">#       DB, long_DB, eqS_DB, tE_DB, eps_DB, ecs_DB,</span>
                <span class="c1">#       EB, long_EB, eqS_EB, tE_EB, eps_EB, ecs_EB,</span>
                <span class="c1">#       FB, long_FB, eqS_FB, tE_FB, eps_FB, ecs_FB,</span>
                <span class="c1"># A</span>
                <span class="k">assert</span> <span class="n">out</span><span class="p">[</span><span class="mi">3</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;   C&#39;</span><span class="p">,</span> <span class="n">out</span><span class="p">[</span><span class="mi">3</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">assert</span> <span class="n">out</span><span class="p">[</span><span class="mi">9</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;   D&#39;</span><span class="p">,</span> <span class="n">out</span><span class="p">[</span><span class="mi">9</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">assert</span> <span class="n">out</span><span class="p">[</span><span class="mi">15</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;   E&#39;</span><span class="p">,</span> <span class="n">out</span><span class="p">[</span><span class="mi">15</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">assert</span> <span class="n">out</span><span class="p">[</span><span class="mi">21</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;   F&#39;</span><span class="p">,</span> <span class="n">out</span><span class="p">[</span><span class="mi">21</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

                <span class="c1"># B</span>
                <span class="k">assert</span> <span class="n">out</span><span class="p">[</span><span class="mi">28</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;   C&#39;</span><span class="p">,</span> <span class="n">out</span><span class="p">[</span><span class="mi">28</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">assert</span> <span class="n">out</span><span class="p">[</span><span class="mi">34</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;   D&#39;</span><span class="p">,</span> <span class="n">out</span><span class="p">[</span><span class="mi">34</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">assert</span> <span class="n">out</span><span class="p">[</span><span class="mi">40</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;   E&#39;</span><span class="p">,</span> <span class="n">out</span><span class="p">[</span><span class="mi">40</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">assert</span> <span class="n">out</span><span class="p">[</span><span class="mi">46</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;   F&#39;</span><span class="p">,</span> <span class="n">out</span><span class="p">[</span><span class="mi">46</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

                <span class="n">eid_device</span> <span class="o">=</span> <span class="n">out</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                    <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">add_new_eid_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="o">*</span><span class="n">out</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_random</span><span class="p">:</span>  <span class="c1"># random</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_cbar_100</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span>
                      <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads stress/strain for element type:</span>
<span class="sd">         - 100 : BARS</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbar_stress_10nodes&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbar_strain_10nodes&#39;</span> <span class="o">+</span> <span class="n">postfix</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_stress</span><span class="p">:</span>
                <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealBar10NodesStressArray</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealBar10NodesStrainArray</span>

            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="mi">4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  [cap, element1, element2, ..., cap]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="c1">#self.binary_debug.write(&#39;  cap = %i  # assume 1 cap when there could have been multiple\n&#39; % ndata)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  #elementi = [eid_device, sd, sxc, sxd, sxe, sxf, axial, smax, smin, MS]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  nelements=</span><span class="si">%i</span><span class="s1">; nnodes=1 # centroid</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nelements</span><span class="p">)</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># self.itime = 0</span>
                <span class="c1"># self.ielement = 0</span>
                <span class="c1"># self.itotal = 0</span>
                <span class="c1">#self.ntimes = 0</span>
                <span class="c1">#self.nelements = 0</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span>

                <span class="n">istart</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">iend</span> <span class="o">=</span> <span class="n">istart</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">obj_set_element</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">istart</span><span class="p">,</span> <span class="n">iend</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">nelements</span><span class="p">)</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
                <span class="c1">#[sd, sxc, sxd, sxe, sxf, axial, smax, smin, MS]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">oes_cbar100_real_10</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_vu_solid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">unused_is_magnitude_phase</span><span class="p">,</span>
                      <span class="n">unused_stress_name</span><span class="p">,</span> <span class="n">unused_prefix</span><span class="p">,</span> <span class="n">unused_postfix</span><span class="p">):</span>
        <span class="c1"># TODO: vectorize</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_mode</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

        <span class="c1"># 145-VUHEXA  (8 nodes)</span>
        <span class="c1"># 146-VUPENTA (6 nodes)</span>
        <span class="c1"># 147-VUTETRA (4 nodes)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">147</span><span class="p">:</span>
            <span class="n">etype</span> <span class="o">=</span> <span class="s1">&#39;VUTETRA&#39;</span>
            <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">4</span>
            <span class="c1">#numwide_a = 2 + (14 - 2) * nnodes  # 50</span>
            <span class="c1">#numwide_b = 2 + (9 - 2) * nnodes  # 30</span>
            <span class="c1">#numwide_c = 2 + 13 * nnodes  # 54</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">146</span><span class="p">:</span>
            <span class="n">etype</span> <span class="o">=</span> <span class="s1">&#39;VUPENTA&#39;</span>
            <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">6</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">145</span><span class="p">:</span>
            <span class="n">etype</span> <span class="o">=</span> <span class="s1">&#39;VUHEXA&#39;</span>
            <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">8</span>
            <span class="c1"># numwide=145</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>

        <span class="c1">#num_wideA = 2 + 12 * nnodes</span>
        <span class="c1">#ntotal = 8 + 48 * nnodes</span>

        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="c1"># real</span>
            <span class="c1"># assuming TETRA...</span>
            <span class="c1"># TODO: vectorize</span>
            <span class="n">numwide_a</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="mi">14</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">nnodes</span>  <span class="c1"># 50</span>
            <span class="n">numwide_b</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="mi">9</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">nnodes</span>  <span class="c1"># 30</span>
            <span class="n">numwide_c</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">13</span> <span class="o">*</span> <span class="n">nnodes</span>  <span class="c1"># 54</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_a</span><span class="p">:</span>
                <span class="n">ntotal</span> <span class="o">=</span> <span class="n">numwide_a</span> <span class="o">*</span> <span class="mi">4</span>
                <span class="n">s1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">struct_2i</span>
                <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i11f&#39;</span><span class="p">)</span>
                <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>  <span class="c1"># 2+16*9 = 146 -&gt; 146*4 = 584</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">8</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">parent_id</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="k">for</span> <span class="n">unused_j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes</span><span class="p">):</span>
                        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">48</span><span class="p">]</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-</span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">etype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">out</span><span class="p">)</span> <span class="o">==</span> <span class="mi">12</span>
                        <span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">xnorm</span><span class="p">,</span> <span class="n">ynorm</span><span class="p">,</span> <span class="n">znorm</span><span class="p">,</span> <span class="n">txy</span><span class="p">,</span> <span class="n">tyz</span><span class="p">,</span> <span class="n">txz</span><span class="p">,</span>
                         <span class="n">prin1</span><span class="p">,</span> <span class="n">prin2</span><span class="p">,</span> <span class="n">prin3</span><span class="p">,</span> <span class="n">smean</span><span class="p">,</span> <span class="n">vono_roct</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">ndata</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_b</span><span class="p">:</span>
                <span class="n">ntotal</span> <span class="o">=</span> <span class="n">numwide_b</span> <span class="o">*</span> <span class="mi">4</span>
                <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_c</span><span class="p">:</span>
                <span class="n">ntotal</span> <span class="o">=</span> <span class="n">numwide_c</span> <span class="o">*</span> <span class="mi">4</span>
                <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;numwide=</span><span class="si">%s</span><span class="s1"> A=</span><span class="si">%s</span><span class="s1"> B=</span><span class="si">%s</span><span class="s1"> C=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span><span class="p">,</span> <span class="n">numwide_a</span><span class="p">,</span> <span class="n">numwide_b</span><span class="p">,</span> <span class="n">numwide_c</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span> <span class="o">+</span> <span class="n">msg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#raise RuntimeError(self.code_information())</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="c1">#raise RuntimeError(msg)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_hyperelastic_quad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">unused_is_magnitude_phase</span><span class="p">,</span>
                               <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        139-QUAD4FD</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#if self.is_stress:</span>
        <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;hyperelastic_cquad4_strain&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">30</span><span class="p">:</span>
            <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">HyperelasticQuadArray</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
            <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
            <span class="c1">#self.create_transient_object(result_name, slot, obj_vector_real)</span>

            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">120</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 36+28*3</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="c1">#print(self.code_information())</span>
            <span class="c1">#print(self.table_name_str)</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_real</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">4</span>  <span class="c1"># number of &quot;layers&quot; for an element</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
                <span class="c1">#return ndata, None, None</span>

            <span class="c1">#if self.is_debug_file:</span>
                <span class="c1">#self.binary_debug.write(&#39;  [cap, element1, element2, ..., cap]\n&#39;)</span>
                <span class="c1">##self.binary_debug.write(&#39;  cap = %i  # assume 1 cap when there could have been multiple\n&#39; % ndata)</span>
                <span class="c1">#self.binary_debug.write(&#39;  #elementi = [eid_device, sd, sxc, sxd, sxe, sxf, axial, smax, smin, MS]\n&#39;)</span>
                <span class="c1">#self.binary_debug.write(&#39;  nelements=%i; nnodes=1 # centroid\n&#39; % nelements)</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># self.itime = 0</span>
                <span class="c1"># self.ielement = 0</span>
                <span class="c1"># self.itotal = 0</span>
                <span class="c1">#self.ntimes = 0</span>
                <span class="c1">#self.nelements = 0</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>

                <span class="n">istart</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">iend</span> <span class="o">=</span> <span class="n">istart</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>

                <span class="c1">#if obj.itime == 0:</span>
                <span class="c1"># 30 = 2 + 28 = 2 + 7*4</span>
                <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="c1">#strs = frombuffer(data, dtype=self.sdtype)</span>
                <span class="n">ints2</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>

                <span class="c1">#strings = frombuffer(data, dtype=???)</span>
                <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                <span class="n">nids</span> <span class="o">=</span> <span class="n">ints2</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>

                <span class="n">eids2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">eids</span><span class="p">,</span> <span class="n">eids</span><span class="p">,</span> <span class="n">eids</span><span class="p">,</span> <span class="n">eids</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">nids</span>
                <span class="c1">#obj.element[istart:iend] = eids</span>

                <span class="c1"># dropping off eid and the string word (some kind of Type)</span>
                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">30</span><span class="p">)[:,</span> <span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">floats2</span> <span class="o">=</span> <span class="n">floats</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
                <span class="c1">#[oxx, oyy, txy, angle, majorp, minorp]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats2</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="c1"># (2 + 7*4)*4 = 30*4 = 120</span>
                <span class="n">ntotal1</span> <span class="o">=</span> <span class="mi">36</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>  <span class="c1"># 4*9</span>
                <span class="n">ntotal2</span> <span class="o">=</span> <span class="mi">28</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>  <span class="c1"># 4*7</span>
                <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;4s i6f&#39;</span><span class="p">)</span>  <span class="c1"># 1 + 4+1+6 = 12</span>
                <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i6f&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal1</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;CQUAD4FD-139A- </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>

                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">etype</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">sx</span><span class="p">,</span> <span class="n">sy</span><span class="p">,</span> <span class="n">sxy</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">smj</span><span class="p">,</span> <span class="n">smi</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="n">obj</span><span class="o">.</span><span class="n">_add_new_eid_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">etype</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">sx</span><span class="p">,</span> <span class="n">sy</span><span class="p">,</span> <span class="n">sxy</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">smj</span><span class="p">,</span> <span class="n">smi</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal1</span>

                    <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>  <span class="c1"># TODO: why is this not 4?</span>
                        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal2</span><span class="p">]</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;               </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                        <span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">sx</span><span class="p">,</span> <span class="n">sy</span><span class="p">,</span> <span class="n">sxy</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">smj</span><span class="p">,</span> <span class="n">smi</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">_add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">etype</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">sx</span><span class="p">,</span> <span class="n">sy</span><span class="p">,</span> <span class="n">sxy</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">smj</span><span class="p">,</span> <span class="n">smi</span><span class="p">)</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal2</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;numwide=</span><span class="si">%s</span><span class="s1"> element_num=</span><span class="si">%s</span><span class="s1"> etype=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_vu_quad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">unused_dt</span><span class="p">,</span> <span class="n">unused_is_magnitude_phase</span><span class="p">,</span>
                     <span class="n">unused_prefix</span><span class="p">,</span> <span class="n">unused_postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds an adaptive VUQUAD&quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">189</span><span class="p">:</span>  <span class="c1"># VQUAD</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_mode</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="c1">#ntotal = 440  # 6+(33-7)*4 =  -&gt; 110*4 = 440</span>
            <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">4</span>    <span class="c1"># 4 corner points + 1 centroid</span>
            <span class="n">etype</span> <span class="o">=</span> <span class="s1">&#39;VUQUAD4&#39;</span>
        <span class="c1">#elif self.element_type == 144:  # CQUAD4</span>
            <span class="c1">#ntotal = 440  # 6+(33-7)*4 =  -&gt; 110*4 = 440</span>
            <span class="c1">#nnodes = 4    # 4 corner points</span>
            <span class="c1">#etype = &#39;CQUAD4&#39;</span>
        <span class="c1">#elif self.element_type == 64:  # CQUAD8</span>
            <span class="c1">#ntotal = 348  # 2+17*5 = 87 -&gt; 87*4 = 348</span>
            <span class="c1">#nnodes = 4    # centroid + 4 corner points</span>
            <span class="c1">#etype = &#39;CQUAD8&#39;</span>
        <span class="c1">#elif self.element_type == 82:  # CQUADR</span>
            <span class="c1">#ntotal = 348  # 2+17*5 = 87 -&gt; 87*4 = 348</span>
            <span class="c1">#nnodes = 4    # centroid + 4 corner points</span>
            <span class="c1">#etype = &#39;CQUADR&#39;</span>
        <span class="c1">#elif self.element_type == 75:  # CTRIA6</span>
            <span class="c1">#ntotal = 280  # 2+17*3 = 70 -&gt; 70*4 = 280</span>
            <span class="c1">#nnodes = 3    # centroid + 3 corner points</span>
            <span class="c1">#etype = &#39;CTRIA6&#39;</span>
        <span class="c1">#elif self.element_type == 70:  # CTRIAR</span>
            <span class="c1">#ntotal = 280  # 2+17*3 = 70 -&gt; 70*4 = 280</span>
            <span class="c1">#nnodes = 3    # centroid + 3 corner points</span>
            <span class="c1">#etype = &#39;CTRIAR&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

        <span class="n">numwide_real</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">+</span> <span class="p">(</span><span class="mi">23</span> <span class="o">-</span> <span class="mi">6</span><span class="p">)</span> <span class="o">*</span> <span class="n">nnodes</span>  <span class="c1"># real???</span>
        <span class="n">numwide_imag</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">+</span> <span class="p">(</span><span class="mi">33</span> <span class="o">-</span> <span class="mi">6</span><span class="p">)</span> <span class="o">*</span> <span class="n">nnodes</span>  <span class="c1"># imag???</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_real</span><span class="p">:</span>  <span class="c1"># real???</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="n">numwide_real</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3i4s2i&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3q8s2q&#39;</span><span class="p">)</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i16f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">ntotal1</span> <span class="o">=</span> <span class="mi">24</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="n">ntotal2</span> <span class="o">=</span> <span class="mi">68</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal1</span><span class="p">])</span>
                <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">unused_parent</span><span class="p">,</span> <span class="n">coord</span><span class="p">,</span> <span class="n">icord</span><span class="p">,</span> <span class="n">unused_theta</span><span class="p">,</span> <span class="n">unused_itype</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal1</span>
                <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                    <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal2</span><span class="p">]</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">s3</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>  <span class="c1"># len=17*4</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal2</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-</span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">etype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>

                <span class="c1">#obj.add_new_node_sort1(dt, eid, parent, coord, icord, theta, itype)</span>
                <span class="c1">#obj.add_new_eid_sort1(eType, dt, eid, parent, coord, icord, theta, itype)</span>
                <span class="k">for</span> <span class="n">unused_node_id</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>  <span class="c1"># nodes pts</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal2</span><span class="p">]</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal2</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">s3</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;              </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>

                    <span class="p">(</span><span class="n">unused_vuid</span><span class="p">,</span> <span class="n">unused_dummy</span><span class="p">,</span> <span class="n">unused_dummy2</span><span class="p">,</span>
                     <span class="n">unused_msx</span><span class="p">,</span> <span class="n">unused_msy</span><span class="p">,</span> <span class="n">unused_mxy</span><span class="p">,</span>
                     <span class="n">unused_dummy3</span><span class="p">,</span> <span class="n">unused_dummy4</span><span class="p">,</span> <span class="n">unused_dummy5</span><span class="p">,</span>
                     <span class="n">unused_bcx</span><span class="p">,</span> <span class="n">unused_bcy</span><span class="p">,</span> <span class="n">unused_bcxy</span><span class="p">,</span> <span class="n">unused_tyz</span><span class="p">,</span> <span class="n">unused_tzx</span><span class="p">,</span>
                     <span class="n">unused_dummy6</span><span class="p">,</span> <span class="n">unused_dummy7</span><span class="p">,</span> <span class="n">unused_dummy8</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="c1">#obj.add_sort1(vuid, dummy, dummy2, msx, msy, mxy,</span>
                                   <span class="c1">#dummy3, dummy4, dummy5,</span>
                                   <span class="c1">#bcx, bcy, bcxy, tyz, tzx,</span>
                                   <span class="c1">#dummy6, dummy7, dummy8)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_imag</span><span class="p">:</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="p">(</span><span class="n">numwide_imag</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;numwide=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oes_plate_stress_34</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">unused_dt</span><span class="p">,</span> <span class="n">unused_is_magnitude_phase</span><span class="p">,</span>
                             <span class="n">unused_stress_name</span><span class="p">,</span> <span class="n">unused_prefix</span><span class="p">,</span> <span class="n">unused_postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        271-CPLSTN3</span>
<span class="sd">        275-CPLSTS3</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="c1">#if self.element_type == 271:</span>
            <span class="c1">#result_name = &#39;cplstn3&#39;</span>
            <span class="c1">#unused_nnodes = 1</span>
            <span class="c1">#ntotal = 4 * 6</span>
        <span class="c1">#elif self.element_type == 275:</span>
            <span class="c1">#result_name = &#39;cplsts3&#39;</span>
            <span class="c1">#unused_nnodes = 1</span>
            <span class="c1">#ntotal = 4 * 6</span>
        <span class="c1">#else:  # pragma: no cover</span>
            <span class="c1">#raise RuntimeError(self.code_information())</span>
        <span class="c1">#if self.is_stress:</span>
            <span class="c1">#obj_vector_real = RealCPLSTRNPlateStressArray</span>
            <span class="c1">#result_name += &#39;_stress&#39;</span>
        <span class="c1">#else:</span>
            <span class="c1">#obj_vector_real = RealCPLSTRNPlateStrainArray</span>
            <span class="c1">#result_name += &#39;_strain&#39;</span>

        <span class="c1">#numwide_real = ntotal // 4</span>
        <span class="c1">#if self.format_code == 1 and self.num_wide == numwide_real:</span>
            <span class="c1">##ntotal = 4 * (1 + 6 * (nnodes))</span>
            <span class="c1">#nelements = ndata // ntotal</span>

            <span class="c1">##self._data_factor = 10  # TODO: why is this 10?</span>
            <span class="c1">#if self.is_stress:</span>
                <span class="c1">#obj_vector_real = RealCPLSTRNPlateStressArray</span>
                <span class="c1">##result_name = &#39;cplstn3_stress&#39;</span>
            <span class="c1">#else:</span>
                <span class="c1">#obj_vector_real = RealCPLSTRNPlateStressArray</span>
                <span class="c1">##result_name = &#39;cplstn3_strain&#39;</span>
            <span class="c1">#slot = self.get_result(result_name)</span>

            <span class="c1">#auto_return, is_vectorized = self._create_oes_object4(</span>
                <span class="c1">#nelements, result_name, slot, obj_vector_real)</span>
            <span class="c1">#if auto_return:</span>
                <span class="c1">#return nelements * self.num_wide * 4, None, None</span>

            <span class="c1">#obj = self.obj</span>
            <span class="c1">##if self.use_vector and is_vectorized and self.sort_method == 1:</span>
            <span class="c1">##n = nelements * self.num_wide * 4</span>

            <span class="c1">#istart = obj.itotal</span>
            <span class="c1">#iend = istart + nelements</span>
            <span class="c1">#obj._times[obj.itime] = dt</span>

            <span class="c1">#self.obj_set_element(obj, istart, iend, data, nelements)</span>
            <span class="c1">#floats = frombuffer(data, dtype=self.fdtype).reshape(nelements, numwide_real)</span>
            <span class="c1">#results = floats[:, 1:].copy()</span>
            <span class="c1">##print(&#39;results.shape&#39;, results.shape)</span>

            <span class="c1">##[oxx, oyy, ozz, txy, ovm]</span>
            <span class="c1">#obj.data[obj.itime, istart:iend, :] = results</span>
        <span class="c1">#else:</span>
            <span class="c1">#msg = &#39;sort1 Type=%s num=%s&#39; % (self.element_name, self.element_type)</span>
            <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg), None, None</span>

    <span class="k">def</span> <span class="nf">_oes_plate_stress_68</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">unused_dt</span><span class="p">,</span> <span class="n">unused_is_magnitude_phase</span><span class="p">,</span>
                             <span class="n">unused_stress_name</span><span class="p">,</span> <span class="n">unused_prefix</span><span class="p">,</span> <span class="n">unused_postfix</span><span class="p">):</span>
        <span class="c1"># 276-CPLSTS4</span>
        <span class="c1"># 277-CPLSTS6</span>
        <span class="c1"># 278-CPLSTS8</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="c1">#if self.element_type == 276:</span>
            <span class="c1">#result_name = &#39;cplsts4&#39;</span>
            <span class="c1">#nnodes = 5  # 4 + 1</span>
            <span class="c1">#ntotal = 4 * 32</span>
        <span class="c1">#elif self.element_type == 277:</span>
            <span class="c1">#result_name = &#39;cplsts6&#39;</span>
            <span class="c1">#nnodes = 4</span>
            <span class="c1">#ntotal = 4 * 26</span>
        <span class="c1">#elif self.element_type == 278:</span>
            <span class="c1">#result_name = &#39;cplsts8&#39;</span>
            <span class="c1">#nnodes = 5</span>
            <span class="c1">#ntotal = 4 * 32</span>
        <span class="c1">#else:</span>
            <span class="c1">#raise RuntimeError(self.code_information())</span>

        <span class="c1">#if self.is_stress:</span>
            <span class="c1">#obj_vector_real = RealCPLSTRNPlateStressArray</span>
            <span class="c1">#result_name += &#39;_stress&#39;</span>
        <span class="c1">#else:</span>
            <span class="c1">#obj_vector_real = RealCPLSTRNPlateStrainArray</span>
            <span class="c1">#result_name += &#39;_strain&#39;</span>

        <span class="c1">#numwide_real = 2 + 6 * (nnodes)</span>
        <span class="c1">#assert ntotal // 4 == numwide_real, &#39;notal/4=%s numwide_real=%s\n%s&#39; % (</span>
            <span class="c1">#ntotal // 4, numwide_real, self.code_information())</span>

        <span class="c1">#ntotal = numwide_real * 4</span>
        <span class="c1">#if self.format_code == 1 and self.num_wide == numwide_real:</span>
            <span class="c1">#nelements = ndata // ntotal</span>

            <span class="c1">##self._data_factor = 10  # TODO: why is this 10?</span>
            <span class="c1">#if self.is_stress:</span>
                <span class="c1">#obj_vector_real = RealCPLSTRNPlateStressArray</span>
                <span class="c1">##result_name = &#39;cplstn3_stress&#39;</span>
            <span class="c1">#else:</span>
                <span class="c1">#obj_vector_real = RealCPLSTRNPlateStressArray</span>
                <span class="c1">##result_name = &#39;cplstn3_strain&#39;</span>
            <span class="c1">#slot = getattr(self, result_name)</span>

            <span class="c1">#nlayers = nelements * nnodes</span>
            <span class="c1">#auto_return, is_vectorized = self._create_oes_object4(</span>
                <span class="c1">#nlayers, result_name, slot, obj_vector_real)</span>
            <span class="c1">#if auto_return:</span>
                <span class="c1">#self._data_factor = nnodes</span>
                <span class="c1">#return nelements * self.num_wide * 4</span>

            <span class="c1">#obj = self.obj</span>
            <span class="c1">##if self.use_vector and is_vectorized and self.sort_method == 1:</span>
            <span class="c1">#n = nlayers * self.num_wide * 4</span>

            <span class="c1">#istart = obj.itotal</span>
            <span class="c1">#iend = istart + nlayers</span>
            <span class="c1">#obj._times[obj.itime] = dt</span>

            <span class="c1">#if obj.itime == 0:</span>
                <span class="c1">#print(frombuffer(data, dtype=self.idtype).size)</span>
                <span class="c1">#print(&#39;nelements=%s numwide=%s&#39; % (nelements, numwide_real))</span>
                <span class="c1">#ints = frombuffer(data, dtype=self.idtype).reshape(nelements, numwide_real)</span>
                <span class="c1">#eids = ints[:, 0] // 10</span>
                <span class="c1">##obj.element[istart:iend] = eids</span>

            <span class="c1">#floats = frombuffer(data, dtype=self.fdtype).reshape(nelements, numwide_real).copy()</span>
            <span class="c1">#print(&#39;floats[:, 2:].shape&#39;, floats[:, 2:].shape)</span>
            <span class="c1">#print(&#39;nnelements=%s nnodes=%s numwide//nodes=%s&#39; % (nelements, nnodes, (numwide_real-2) / nnodes))</span>
            <span class="c1">#results = floats[:, 2:].reshape(nelements, nnodes * 6)</span>

            <span class="c1">##[oxx, oyy, ozz, txy, ovm]</span>
            <span class="c1">#obj.data[obj.itime, istart:iend, :] = results</span>
        <span class="c1">#else:</span>
            <span class="c1">#msg = &#39;sort1 Type=%s num=%s&#39; % (self.element_name, self.element_type)</span>
            <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg)</span>

<div class="viewcode-block" id="OES.obj_set_element"><a class="viewcode-back" href="../../../../../reference/op2/tables/oes_stress_strain/pyNastran.op2.tables.oes_stress_strain.oes.html#pyNastran.op2.tables.oes_stressStrain.oes.OES.obj_set_element">[docs]</a>    <span class="k">def</span> <span class="nf">obj_set_element</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">ielement</span><span class="p">,</span> <span class="n">ielement2</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">nelements</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
            <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span></div></div>


<div class="viewcode-block" id="oes_cquad4_33_complex_17"><a class="viewcode-back" href="../../../../../reference/op2/tables/oes_stress_strain/pyNastran.op2.tables.oes_stress_strain.oes.html#pyNastran.op2.tables.oes_stressStrain.oes.oes_cquad4_33_complex_17">[docs]</a><span class="k">def</span> <span class="nf">oes_cquad4_33_complex_17</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
                             <span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ComplexPlateStressArray</span><span class="p">,</span> <span class="n">ComplexPlateStrainArray</span><span class="p">],</span>
                             <span class="n">nelements</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                             <span class="n">is_magnitude_phase</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    OESVM1/2 - Table of element stresses or strains with von Mises</span>
<span class="sd">    OSTRVM1/2  for frequency response results.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;16f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
    <span class="n">cen</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># CEN/4</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>

            <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
             <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1r</span><span class="p">,</span> <span class="n">sx1i</span><span class="p">,</span> <span class="n">sy1r</span><span class="p">,</span> <span class="n">sy1i</span><span class="p">,</span> <span class="n">txy1r</span><span class="p">,</span> <span class="n">txy1i</span><span class="p">,</span> <span class="n">von_mises1</span><span class="p">,</span>
             <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2r</span><span class="p">,</span> <span class="n">sx2i</span><span class="p">,</span> <span class="n">sy2r</span><span class="p">,</span> <span class="n">sy2i</span><span class="p">,</span> <span class="n">txy2r</span><span class="p">,</span> <span class="n">txy2i</span><span class="p">,</span> <span class="n">von_mises2</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>

            <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%i</span><span class="s1"> C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>

            <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                <span class="n">sx1</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sx1r</span><span class="p">,</span> <span class="n">sx1i</span><span class="p">)</span>
                <span class="n">sx2</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sx2r</span><span class="p">,</span> <span class="n">sx2i</span><span class="p">)</span>
                <span class="n">sy1</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sy1r</span><span class="p">,</span> <span class="n">sy1i</span><span class="p">)</span>
                <span class="n">sy2</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sy2r</span><span class="p">,</span> <span class="n">sy2i</span><span class="p">)</span>
                <span class="n">txy1</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">txy1r</span><span class="p">,</span> <span class="n">txy1i</span><span class="p">)</span>
                <span class="n">txy2</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">txy2r</span><span class="p">,</span> <span class="n">txy2i</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sx1</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sx1r</span><span class="p">,</span> <span class="n">sx1i</span><span class="p">)</span>
                <span class="n">sx2</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sx2r</span><span class="p">,</span> <span class="n">sx2i</span><span class="p">)</span>
                <span class="n">sy1</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sy1r</span><span class="p">,</span> <span class="n">sy1i</span><span class="p">)</span>
                <span class="n">sy2</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sy2r</span><span class="p">,</span> <span class="n">sy2i</span><span class="p">)</span>
                <span class="n">txy1</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">txy1r</span><span class="p">,</span> <span class="n">txy1i</span><span class="p">)</span>
                <span class="n">txy2</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">txy2r</span><span class="p">,</span> <span class="n">txy2i</span><span class="p">)</span>
            <span class="c1">#print(dt, eid, cen, sx1, sy1, txy1, max_shear1)</span>
            <span class="c1">#print(dt, eid, cen, sx2, sy2, txy2, max_shear2)</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">add_ovm_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">cen</span><span class="p">,</span> <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span> <span class="n">von_mises1</span><span class="p">)</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">add_ovm_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">cen</span><span class="p">,</span> <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,</span> <span class="n">von_mises1</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">n</span></div>

<div class="viewcode-block" id="oes_cbeam_real_111"><a class="viewcode-back" href="../../../../../reference/op2/tables/oes_stress_strain/pyNastran.op2.tables.oes_stress_strain.oes.html#pyNastran.op2.tables.oes_stressStrain.oes.oes_cbeam_real_111">[docs]</a><span class="k">def</span> <span class="nf">oes_cbeam_real_111</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
                       <span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">RealBeamStressArray</span><span class="p">,</span> <span class="n">RealBeamStrainArray</span><span class="p">],</span>
                       <span class="n">nelements</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">dt</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">10</span>  <span class="c1"># 11-1</span>
    <span class="n">n1</span> <span class="o">=</span> <span class="mi">44</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
    <span class="n">n2</span> <span class="o">=</span> <span class="mi">40</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
    <span class="n">fmt1</span> <span class="o">=</span> <span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i9f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
    <span class="n">fmt2</span> <span class="o">=</span> <span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i9f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
    <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">fmt1</span><span class="p">)</span>
    <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">fmt2</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">n1</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="n">n1</span>

        <span class="n">out</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
        <span class="n">eid_device</span> <span class="o">=</span> <span class="n">out</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
            <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;CBEAM-2 - eid=</span><span class="si">%i</span><span class="s1"> out=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>

        <span class="c1">#(grid, sd, sxc, sxd, sxe, sxf, smax, smin, mst, msc) = out</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">add_new_eid_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="o">*</span><span class="n">out</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>

        <span class="k">for</span> <span class="n">unused_inode</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">n2</span><span class="p">]</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">n2</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="c1"># (grid, sd, sxc, sxd, sxe, sxf, smax, smin, mst, msc) = out</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="o">*</span><span class="n">out</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">n</span></div>

<div class="viewcode-block" id="oes_cbar100_real_10"><a class="viewcode-back" href="../../../../../reference/op2/tables/oes_stress_strain/pyNastran.op2.tables.oes_stress_strain.oes.html#pyNastran.op2.tables.oes_stressStrain.oes.oes_cbar100_real_10">[docs]</a><span class="k">def</span> <span class="nf">oes_cbar100_real_10</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">nelements</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">dt</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;9f&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
        <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">sd</span><span class="p">,</span> <span class="n">sxc</span><span class="p">,</span> <span class="n">sxd</span><span class="p">,</span> <span class="n">sxe</span><span class="p">,</span> <span class="n">sxf</span><span class="p">,</span> <span class="n">axial</span><span class="p">,</span> <span class="n">smax</span><span class="p">,</span> <span class="n">smin</span><span class="p">,</span> <span class="n">MS</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
        <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
            <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%i</span><span class="s1">; C</span><span class="si">%i</span><span class="s1">=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">eid</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">add_new_eid_sort1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span>
                              <span class="n">sd</span><span class="p">,</span> <span class="n">sxc</span><span class="p">,</span> <span class="n">sxd</span><span class="p">,</span> <span class="n">sxe</span><span class="p">,</span> <span class="n">sxf</span><span class="p">,</span> <span class="n">axial</span><span class="p">,</span> <span class="n">smax</span><span class="p">,</span> <span class="n">smin</span><span class="p">,</span> <span class="n">MS</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">n</span></div>

<div class="viewcode-block" id="oes_cbeam_complex_111"><a class="viewcode-back" href="../../../../../reference/op2/tables/oes_stress_strain/pyNastran.op2.tables.oes_stress_strain.oes.html#pyNastran.op2.tables.oes_stressStrain.oes.oes_cbeam_complex_111">[docs]</a><span class="k">def</span> <span class="nf">oes_cbeam_complex_111</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
                          <span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ComplexBeamStressArray</span><span class="p">,</span> <span class="n">ComplexBeamStrainArray</span><span class="p">],</span>
                          <span class="n">nelements</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                          <span class="n">is_magnitude_phase</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
    <span class="n">n1</span> <span class="o">=</span> <span class="mi">44</span>
    <span class="n">n2</span> <span class="o">=</span> <span class="mi">40</span>

    <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i9f&#39;</span><span class="p">)</span>
    <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i9f&#39;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">n1</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="n">n1</span>

        <span class="n">out1</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
        <span class="n">eid_device</span> <span class="o">=</span> <span class="n">out1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
            <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;CBEAM-2 - eid=</span><span class="si">%i</span><span class="s1"> out1=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out1</span><span class="p">)))</span>

        <span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">sd</span><span class="p">,</span>
         <span class="n">excr</span><span class="p">,</span> <span class="n">exdr</span><span class="p">,</span> <span class="n">exer</span><span class="p">,</span> <span class="n">exfr</span><span class="p">,</span>
         <span class="n">exci</span><span class="p">,</span> <span class="n">exdi</span><span class="p">,</span> <span class="n">exei</span><span class="p">,</span> <span class="n">exfi</span><span class="p">)</span> <span class="o">=</span> <span class="n">out1</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

        <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
            <span class="n">exc</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">excr</span><span class="p">,</span> <span class="n">exci</span><span class="p">)</span>
            <span class="n">exd</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">exdr</span><span class="p">,</span> <span class="n">exdi</span><span class="p">)</span>
            <span class="n">exe</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">exer</span><span class="p">,</span> <span class="n">exei</span><span class="p">)</span>
            <span class="n">exf</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">exfr</span><span class="p">,</span> <span class="n">exfi</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">exc</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">excr</span><span class="p">,</span> <span class="n">exci</span><span class="p">)</span>
            <span class="n">exd</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">exdr</span><span class="p">,</span> <span class="n">exdi</span><span class="p">)</span>
            <span class="n">exe</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">exer</span><span class="p">,</span> <span class="n">exei</span><span class="p">)</span>
            <span class="n">exf</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">exfr</span><span class="p">,</span> <span class="n">exfi</span><span class="p">)</span>

        <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="n">sd</span><span class="p">,</span>
                      <span class="n">exc</span><span class="p">,</span> <span class="n">exd</span><span class="p">,</span> <span class="n">exe</span><span class="p">,</span> <span class="n">exf</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">unused_inode</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">n2</span><span class="p">]</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">n2</span>
            <span class="n">out2</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">sd</span><span class="p">,</span>
             <span class="n">excr</span><span class="p">,</span> <span class="n">exdr</span><span class="p">,</span> <span class="n">exer</span><span class="p">,</span> <span class="n">exfr</span><span class="p">,</span>
             <span class="n">exci</span><span class="p">,</span> <span class="n">exdi</span><span class="p">,</span> <span class="n">exei</span><span class="p">,</span> <span class="n">exfi</span><span class="p">)</span> <span class="o">=</span> <span class="n">out2</span>

            <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                <span class="n">exc</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">excr</span><span class="p">,</span> <span class="n">exci</span><span class="p">)</span>
                <span class="n">exd</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">exdr</span><span class="p">,</span> <span class="n">exdi</span><span class="p">)</span>
                <span class="n">exe</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">exer</span><span class="p">,</span> <span class="n">exei</span><span class="p">)</span>
                <span class="n">exf</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">exfr</span><span class="p">,</span> <span class="n">exfi</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">exc</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">excr</span><span class="p">,</span> <span class="n">exci</span><span class="p">)</span>
                <span class="n">exd</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">exdr</span><span class="p">,</span> <span class="n">exdi</span><span class="p">)</span>
                <span class="n">exe</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">exer</span><span class="p">,</span> <span class="n">exei</span><span class="p">)</span>
                <span class="n">exf</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">exfr</span><span class="p">,</span> <span class="n">exfi</span><span class="p">)</span>

            <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="n">sd</span><span class="p">,</span>
                          <span class="n">exc</span><span class="p">,</span> <span class="n">exd</span><span class="p">,</span> <span class="n">exe</span><span class="p">,</span> <span class="n">exf</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;CBEAM-2 - eid=</span><span class="si">%i</span><span class="s1"> out2=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out2</span><span class="p">)))</span>
    <span class="k">return</span> <span class="n">n</span></div>

<div class="viewcode-block" id="oes_cbeam_random_67"><a class="viewcode-back" href="../../../../../reference/op2/tables/oes_stress_strain/pyNastran.op2.tables.oes_stress_strain.oes.html#pyNastran.op2.tables.oes_stressStrain.oes.oes_cbeam_random_67">[docs]</a><span class="k">def</span> <span class="nf">oes_cbeam_random_67</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
                        <span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">RandomBeamStressArray</span><span class="p">,</span> <span class="n">RandomBeamStrainArray</span><span class="p">],</span>
                        <span class="n">nelements</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">dt</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">n1</span> <span class="o">=</span> <span class="mi">28</span>
    <span class="n">n2</span> <span class="o">=</span> <span class="mi">24</span> <span class="c1"># 6*4</span>
    <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i5f&#39;</span><span class="p">)</span>
    <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i5f&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">n1</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="n">n1</span>

        <span class="n">out</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
        <span class="n">eid_device</span> <span class="o">=</span> <span class="n">out</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
            <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;CBEAM-2 - eid=</span><span class="si">%i</span><span class="s1"> out=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>

        <span class="c1">#(grid, sd, sxc, sxd, sxe, sxf, smax, smin, mst, msc) = out</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">add_new_eid_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="o">*</span><span class="n">out</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>

        <span class="k">for</span> <span class="n">unused_inode</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">n2</span><span class="p">]</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">n2</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="c1"># (grid, sd, sxc, sxd, sxe, sxf, smax, smin, mst, msc) = out</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="o">*</span><span class="n">out</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">n</span></div>

<div class="viewcode-block" id="oes_cquad4_33_complex_15"><a class="viewcode-back" href="../../../../../reference/op2/tables/oes_stress_strain/pyNastran.op2.tables.oes_stress_strain.oes.html#pyNastran.op2.tables.oes_stressStrain.oes.oes_cquad4_33_complex_15">[docs]</a><span class="k">def</span> <span class="nf">oes_cquad4_33_complex_15</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                             <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
                             <span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ComplexPlateStressArray</span><span class="p">,</span> <span class="n">ComplexPlateStrainArray</span><span class="p">],</span>
                             <span class="n">nelements</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                             <span class="n">is_magnitude_phase</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;14f&#39;</span><span class="p">)</span>
    <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i14f&#39;</span><span class="p">)</span>
    <span class="n">cen</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># &#39;CEN/4&#39;</span>
    <span class="c1">#60</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>  <span class="c1"># 4*15=60</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>  <span class="c1"># 15</span>
            <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
             <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1r</span><span class="p">,</span> <span class="n">sx1i</span><span class="p">,</span> <span class="n">sy1r</span><span class="p">,</span> <span class="n">sy1i</span><span class="p">,</span> <span class="n">txy1r</span><span class="p">,</span> <span class="n">txy1i</span><span class="p">,</span>
             <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2r</span><span class="p">,</span> <span class="n">sx2i</span><span class="p">,</span> <span class="n">sy2r</span><span class="p">,</span> <span class="n">sy2i</span><span class="p">,</span> <span class="n">txy2r</span><span class="p">,</span> <span class="n">txy2i</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>

            <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%i</span><span class="s1"> C=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>

            <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                <span class="n">sx1</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sx1r</span><span class="p">,</span> <span class="n">sx1i</span><span class="p">)</span>
                <span class="n">sx2</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sx2r</span><span class="p">,</span> <span class="n">sx2i</span><span class="p">)</span>
                <span class="n">sy1</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sy1r</span><span class="p">,</span> <span class="n">sy1i</span><span class="p">)</span>
                <span class="n">sy2</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sy2r</span><span class="p">,</span> <span class="n">sy2i</span><span class="p">)</span>
                <span class="n">txy1</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">txy1r</span><span class="p">,</span> <span class="n">txy1i</span><span class="p">)</span>
                <span class="n">txy2</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">txy2r</span><span class="p">,</span> <span class="n">txy2i</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sx1</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sx1r</span><span class="p">,</span> <span class="n">sx1i</span><span class="p">)</span>
                <span class="n">sx2</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sx2r</span><span class="p">,</span> <span class="n">sx2i</span><span class="p">)</span>
                <span class="n">sy1</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sy1r</span><span class="p">,</span> <span class="n">sy1i</span><span class="p">)</span>
                <span class="n">sy2</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sy2r</span><span class="p">,</span> <span class="n">sy2i</span><span class="p">)</span>
                <span class="n">txy1</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">txy1r</span><span class="p">,</span> <span class="n">txy1i</span><span class="p">)</span>
                <span class="n">txy2</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">txy2r</span><span class="p">,</span> <span class="n">txy2i</span><span class="p">)</span>

            <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">cen</span><span class="p">,</span> <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">)</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">cen</span><span class="p">,</span> <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">unused_inode</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes</span><span class="p">):</span>  <span class="c1"># nodes pts</span>
                <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>  <span class="c1"># 4*15=60</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
                <span class="p">(</span><span class="n">grid</span><span class="p">,</span>
                 <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1r</span><span class="p">,</span> <span class="n">sx1i</span><span class="p">,</span> <span class="n">sy1r</span><span class="p">,</span> <span class="n">sy1i</span><span class="p">,</span> <span class="n">txy1r</span><span class="p">,</span> <span class="n">txy1i</span><span class="p">,</span>
                 <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2r</span><span class="p">,</span> <span class="n">sx2i</span><span class="p">,</span> <span class="n">sy2r</span><span class="p">,</span> <span class="n">sy2i</span><span class="p">,</span> <span class="n">txy2r</span><span class="p">,</span> <span class="n">txy2i</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>

                <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                    <span class="n">sx1</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sx1r</span><span class="p">,</span> <span class="n">sx1i</span><span class="p">)</span>
                    <span class="n">sx2</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sx2r</span><span class="p">,</span> <span class="n">sx2i</span><span class="p">)</span>
                    <span class="n">sy1</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sy1r</span><span class="p">,</span> <span class="n">sy1i</span><span class="p">)</span>
                    <span class="n">sy2</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">sy2r</span><span class="p">,</span> <span class="n">sy2i</span><span class="p">)</span>
                    <span class="n">txy1</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">txy1r</span><span class="p">,</span> <span class="n">txy1i</span><span class="p">)</span>
                    <span class="n">txy2</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">txy2r</span><span class="p">,</span> <span class="n">txy2i</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">sx1</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sx1r</span><span class="p">,</span> <span class="n">sx1i</span><span class="p">)</span>
                    <span class="n">sx2</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sx2r</span><span class="p">,</span> <span class="n">sx2i</span><span class="p">)</span>
                    <span class="n">sy1</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sy1r</span><span class="p">,</span> <span class="n">sy1i</span><span class="p">)</span>
                    <span class="n">sy2</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">sy2r</span><span class="p">,</span> <span class="n">sy2i</span><span class="p">)</span>
                    <span class="n">txy1</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">txy1r</span><span class="p">,</span> <span class="n">txy1i</span><span class="p">)</span>
                    <span class="n">txy2</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">txy2r</span><span class="p">,</span> <span class="n">txy2i</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">n</span></div>

<div class="viewcode-block" id="oes_cquad4_33_random_9"><a class="viewcode-back" href="../../../../../reference/op2/tables/oes_stress_strain/pyNastran.op2.tables.oes_stress_strain.oes.html#pyNastran.op2.tables.oes_stressStrain.oes.oes_cquad4_33_random_9">[docs]</a><span class="k">def</span> <span class="nf">oes_cquad4_33_random_9</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
                           <span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">RandomPlateStressArray</span><span class="p">,</span> <span class="n">RandomPlateStrainArray</span><span class="p">],</span>
                           <span class="n">nelements</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="c1">#print(&#39;cquad33_9 - SORT1&#39;)</span>
        <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;8f&#39;</span><span class="p">)</span>
        <span class="c1">#cen = 0 # CEN/4</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>

            <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
             <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span>
             <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,)</span> <span class="o">=</span> <span class="n">out</span>

            <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%i</span><span class="s1"> C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                          <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span>
                          <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1">#print(&#39;cquad33_9 - SORT2&#39;)</span>
        <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;8f&#39;</span><span class="p">)</span>
        <span class="c1">#cen = 0 # CEN/4</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>

            <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
             <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span>
             <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,)</span> <span class="o">=</span> <span class="n">out</span>

            <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%i</span><span class="s1"> C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>

            <span class="n">obj</span><span class="o">.</span><span class="n">add_sort2</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                          <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span>
                          <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
    <span class="k">return</span> <span class="n">n</span></div>

<div class="viewcode-block" id="oes_ctria3_random_9"><a class="viewcode-back" href="../../../../../reference/op2/tables/oes_stress_strain/pyNastran.op2.tables.oes_stress_strain.oes.html#pyNastran.op2.tables.oes_stressStrain.oes.oes_ctria3_random_9">[docs]</a><span class="k">def</span> <span class="nf">oes_ctria3_random_9</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
                        <span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">RandomPlateStressArray</span><span class="p">,</span> <span class="n">RandomPlateStrainArray</span><span class="p">],</span>
                        <span class="n">nelements</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;8f&#39;</span><span class="p">)</span>
    <span class="n">cen</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># CEN/4</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="c1">#print(&#39;ctria3_9 - SORT1&#39;)</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>

            <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
             <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span>
             <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,)</span> <span class="o">=</span> <span class="n">out</span>

            <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%i</span><span class="s1"> C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>

            <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">cen</span><span class="p">,</span>
                          <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span>
                          <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1">#print(&#39;ctria3_9 - SORT2&#39;)</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>

            <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
             <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span>
             <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,)</span> <span class="o">=</span> <span class="n">out</span>

            <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%i</span><span class="s1"> C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>

            <span class="n">obj</span><span class="o">.</span><span class="n">add_sort2</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">cen</span><span class="p">,</span>
                          <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span>
                          <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
    <span class="k">return</span> <span class="n">n</span></div>

<div class="viewcode-block" id="oes_cquad4_33_random_11"><a class="viewcode-back" href="../../../../../reference/op2/tables/oes_stress_strain/pyNastran.op2.tables.oes_stress_strain.oes.html#pyNastran.op2.tables.oes_stressStrain.oes.oes_cquad4_33_random_11">[docs]</a><span class="k">def</span> <span class="nf">oes_cquad4_33_random_11</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
                            <span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">RandomPlateStressArray</span><span class="p">,</span> <span class="n">RandomPlateStrainArray</span><span class="p">],</span>
                            <span class="n">nelements</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;10f&#39;</span><span class="p">)</span>
    <span class="n">cen</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># CEN/4</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>

            <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
             <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span> <span class="n">ovm1</span><span class="p">,</span>
             <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,</span> <span class="n">ovm2</span><span class="p">,)</span> <span class="o">=</span> <span class="n">out</span>

            <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%i</span><span class="s1"> C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>

            <span class="n">obj</span><span class="o">.</span><span class="n">add_ovm_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">cen</span><span class="p">,</span>
                              <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span> <span class="n">ovm1</span><span class="p">,</span>
                              <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,</span> <span class="n">ovm2</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>

            <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
             <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span> <span class="n">ovm1</span><span class="p">,</span>
             <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,</span> <span class="n">ovm2</span><span class="p">,)</span> <span class="o">=</span> <span class="n">out</span>

            <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%i</span><span class="s1"> C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>

            <span class="n">obj</span><span class="o">.</span><span class="n">add_ovm_sort2</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">cen</span><span class="p">,</span>
                              <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span> <span class="n">ovm1</span><span class="p">,</span>
                              <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,</span> <span class="n">ovm2</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
    <span class="k">return</span> <span class="n">n</span></div>

<div class="viewcode-block" id="oes_ctria3_random_11"><a class="viewcode-back" href="../../../../../reference/op2/tables/oes_stress_strain/pyNastran.op2.tables.oes_stress_strain.oes.html#pyNastran.op2.tables.oes_stressStrain.oes.oes_ctria3_random_11">[docs]</a><span class="k">def</span> <span class="nf">oes_ctria3_random_11</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
                         <span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">RandomPlateStressArray</span><span class="p">,</span> <span class="n">RandomPlateStrainArray</span><span class="p">],</span>
                         <span class="n">nelements</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="c1">#print(&#39;ctria3_11&#39;)</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;10f&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">cen</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># CEN/4</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>

            <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
             <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span> <span class="n">ovm1</span><span class="p">,</span>
             <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,</span> <span class="n">ovm2</span><span class="p">,)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="c1">#print(&#39;CTRIA3&#39;, out)</span>

            <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%i</span><span class="s1"> C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>

            <span class="n">obj</span><span class="o">.</span><span class="n">add_ovm_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">cen</span><span class="p">,</span>
                              <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span> <span class="n">ovm1</span><span class="p">,</span>
                              <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,</span> <span class="n">ovm2</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cen</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># CEN/4</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>

            <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
             <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span> <span class="n">ovm1</span><span class="p">,</span>
             <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,</span> <span class="n">ovm2</span><span class="p">,)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="c1">#print(&#39;CTRIA3&#39;, out)</span>

            <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%i</span><span class="s1"> C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>

            <span class="n">obj</span><span class="o">.</span><span class="n">add_ovm_sort2</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">cen</span><span class="p">,</span>
                              <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span> <span class="n">ovm1</span><span class="p">,</span>
                              <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,</span> <span class="n">ovm2</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
    <span class="k">return</span> <span class="n">n</span></div>

<div class="viewcode-block" id="oes_cquad4_144_real"><a class="viewcode-back" href="../../../../../reference/op2/tables/oes_stress_strain/pyNastran.op2.tables.oes_stress_strain.oes.html#pyNastran.op2.tables.oes_stressStrain.oes.oes_cquad4_144_real">[docs]</a><span class="k">def</span> <span class="nf">oes_cquad4_144_real</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">ndata</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                        <span class="n">obj</span><span class="p">:</span> <span class="n">RealPlateStrainArray</span><span class="p">,</span>
                        <span class="n">ntotal</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">nelements</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">dt</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">center_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;4si16f&#39;</span>
        <span class="n">node_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i16f&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">center_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;8sq16d&#39;</span>
        <span class="n">node_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;q16d&#39;</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">center_format</span><span class="p">)</span>
    <span class="n">ns</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">node_format</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
            <span class="s1">&#39;  [cap, element1, element2, ..., cap]</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;  cap = </span><span class="si">%i</span><span class="s1">  # assume 1 cap when there could have been multiple</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;  #elementi = [centeri, node1i, node2i, node3i, node4i]</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;  #centeri = [eid_device, j, grid, fd1, sx1, sy1, txy1, angle1, major1, minor1, vm1,</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;  #                                fd2, sx2, sy2, txy2, angle2, major2, minor2, vm2,)]</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;  #nodeji = [grid, fd1, sx1, sy1, txy1, angle1, major1, minor1, vm1,</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;  #                fd2, sx2, sy2, txy2, angle2, major2, minor2, vm2,)]</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;  nelements=</span><span class="si">%i</span><span class="s1">; nnodes=</span><span class="si">%i</span><span class="s1"> # +1 centroid</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ndata</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">))</span>

    <span class="n">grid_center</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">n76</span> <span class="o">=</span> <span class="mi">76</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
    <span class="n">n68</span> <span class="o">=</span> <span class="mi">68</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
    <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">n76</span><span class="p">]</span>

        <span class="n">out</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>  <span class="c1"># len=17*4</span>
        <span class="c1"># j is the number of nodes, so CQUAD4 -&gt; 4, but we don&#39;t need to save it...</span>
        <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">unused_j</span><span class="p">,</span>
         <span class="n">grid</span><span class="p">,</span>
         <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span> <span class="n">angle1</span><span class="p">,</span> <span class="n">major1</span><span class="p">,</span> <span class="n">minor1</span><span class="p">,</span> <span class="n">vm1</span><span class="p">,</span>
         <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,</span> <span class="n">angle2</span><span class="p">,</span> <span class="n">major2</span><span class="p">,</span> <span class="n">minor2</span><span class="p">,</span> <span class="n">vm2</span><span class="p">,)</span> <span class="o">=</span> <span class="n">out</span>
        <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
            <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
        <span class="c1">#print(out[:3])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%i</span><span class="s1">; C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>

        <span class="n">obj</span><span class="o">.</span><span class="n">add_new_eid_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid_center</span><span class="p">,</span> <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span>
                              <span class="n">txy1</span><span class="p">,</span> <span class="n">angle1</span><span class="p">,</span> <span class="n">major1</span><span class="p">,</span> <span class="n">minor1</span><span class="p">,</span> <span class="n">vm1</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid_center</span><span class="p">,</span> <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,</span>
                      <span class="n">angle2</span><span class="p">,</span> <span class="n">major2</span><span class="p">,</span> <span class="n">minor2</span><span class="p">,</span> <span class="n">vm2</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="n">n76</span>
        <span class="k">for</span> <span class="n">inode</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes</span><span class="p">):</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">n68</span><span class="p">])</span>
            <span class="p">(</span><span class="n">grid</span><span class="p">,</span>
             <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span> <span class="n">angle1</span><span class="p">,</span> <span class="n">major1</span><span class="p">,</span> <span class="n">minor1</span><span class="p">,</span> <span class="n">vm1</span><span class="p">,</span>
             <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,</span> <span class="n">angle2</span><span class="p">,</span> <span class="n">major2</span><span class="p">,</span> <span class="n">minor2</span><span class="p">,</span> <span class="n">vm2</span><span class="p">,)</span> <span class="o">=</span> <span class="n">out</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="n">d</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">grid</span><span class="p">,</span>
                           <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span> <span class="n">angle1</span><span class="p">,</span> <span class="n">major1</span><span class="p">,</span> <span class="n">minor1</span><span class="p">,</span> <span class="n">vm1</span><span class="p">,</span>
                           <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,</span> <span class="n">angle2</span><span class="p">,</span> <span class="n">major2</span><span class="p">,</span> <span class="n">minor2</span><span class="p">,</span> <span class="n">vm2</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  node</span><span class="si">%i</span><span class="s1"> = [</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">inode</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">d</span><span class="p">])))</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="n">grid</span>
            <span class="k">assert</span> <span class="n">grid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">grid</span>

            <span class="n">obj</span><span class="o">.</span><span class="n">add_new_node_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span>
                                   <span class="n">txy1</span><span class="p">,</span> <span class="n">angle1</span><span class="p">,</span> <span class="n">major1</span><span class="p">,</span> <span class="n">minor1</span><span class="p">,</span> <span class="n">vm1</span><span class="p">)</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span>
                          <span class="n">txy2</span><span class="p">,</span> <span class="n">angle2</span><span class="p">,</span> <span class="n">major2</span><span class="p">,</span> <span class="n">minor2</span><span class="p">,</span> <span class="n">vm2</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">n68</span>
    <span class="k">return</span> <span class="n">n</span></div>

<div class="viewcode-block" id="oes_cquad4_144_random"><a class="viewcode-back" href="../../../../../reference/op2/tables/oes_stress_strain/pyNastran.op2.tables.oes_stress_strain.oes.html#pyNastran.op2.tables.oes_stressStrain.oes.oes_cquad4_144_random">[docs]</a><span class="k">def</span> <span class="nf">oes_cquad4_144_random</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
                          <span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">RandomPlateStressArray</span><span class="p">,</span> <span class="n">RandomPlateStrainArray</span><span class="p">],</span>
                          <span class="n">nelements</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">ndata</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">center_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;4s i8f&#39;</span>
    <span class="n">node_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i8f&#39;</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">center_format</span><span class="p">)</span>
    <span class="n">ns</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">node_format</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
            <span class="s1">&#39;  [cap, element1, element2, ..., cap]</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;  cap = </span><span class="si">%i</span><span class="s1">  # assume 1 cap when there could have been multiple</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;  #elementi = [centeri, node1i, node2i, node3i, node4i]</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;  #centeri = [eid_device, j, grid, fd1, sx1, sy1, txy1,</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;  #                                fd2, sx2, sy2, txy2,)]</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;  #nodeji = [grid, fd1, sx1, sy1, txy1,</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;  #                fd2, sx2, sy2, txy2,)]</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;  nelements=</span><span class="si">%i</span><span class="s1">; nnodes=</span><span class="si">%i</span><span class="s1"> # +1 centroid</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ndata</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">))</span>

    <span class="n">grid_center</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">44</span><span class="p">]</span>
            <span class="c1">#self.show_data(edata)</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>  <span class="c1"># len=17*4</span>
            <span class="c1">#print(out)</span>
            <span class="c1"># j is the number of nodes, so CQUAD4 -&gt; 4, but we don&#39;t need to save it...</span>
            <span class="n">eid_device</span> <span class="o">=</span> <span class="n">out</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">unused_j</span><span class="p">,</span>
             <span class="n">grid</span><span class="p">,</span>
             <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span>
             <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="c1">#print(out)</span>

            <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%i</span><span class="s1">; C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>

            <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid_center</span><span class="p">,</span> <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span> <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="mi">44</span>
            <span class="k">for</span> <span class="n">inode</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes</span><span class="p">):</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="mi">36</span><span class="p">])</span>
                <span class="c1">#print(out)</span>
                <span class="p">(</span><span class="n">grid</span><span class="p">,</span>
                 <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span>
                 <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,)</span> <span class="o">=</span> <span class="n">out</span>
                <span class="c1">#print(out)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                    <span class="n">d</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">grid</span><span class="p">,</span>
                               <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span>
                               <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  node</span><span class="si">%i</span><span class="s1"> = [</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">inode</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">d</span><span class="p">])))</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="n">grid</span>
                <span class="k">assert</span> <span class="n">grid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">grid</span>

                <span class="c1"># leaving off grid</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span>
                              <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span>
                              <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">)</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="mi">36</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">44</span><span class="p">]</span>
            <span class="c1">#self.show_data(edata)</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>  <span class="c1"># len=17*4</span>
            <span class="c1">#print(out)</span>
            <span class="c1"># j is the number of nodes, so CQUAD4 -&gt; 4, but we don&#39;t need to save it...</span>
            <span class="n">eid_device</span> <span class="o">=</span> <span class="n">out</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">unused_j</span><span class="p">,</span>
             <span class="n">grid</span><span class="p">,</span>
             <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span>
             <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="c1">#print(out)</span>

            <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%i</span><span class="s1">; C=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>

            <span class="n">obj</span><span class="o">.</span><span class="n">add_sort2</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid_center</span><span class="p">,</span>
                          <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span>
                          <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="mi">44</span>
            <span class="k">for</span> <span class="n">inode</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes</span><span class="p">):</span>
                <span class="n">out</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="mi">36</span><span class="p">])</span>
                <span class="c1">#print(out)</span>
                <span class="p">(</span><span class="n">grid</span><span class="p">,</span>
                 <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span>
                 <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">,)</span> <span class="o">=</span> <span class="n">out</span>
                <span class="c1">#print(out)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                    <span class="n">d</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">grid</span><span class="p">,</span>
                               <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span>
                               <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  node</span><span class="si">%i</span><span class="s1"> = [</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">inode</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">d</span><span class="p">])))</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="n">grid</span>
                <span class="k">assert</span> <span class="n">grid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">grid</span>

                <span class="c1"># leaving off grid</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">add_sort2</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span>
                              <span class="n">fd1</span><span class="p">,</span> <span class="n">sx1</span><span class="p">,</span> <span class="n">sy1</span><span class="p">,</span> <span class="n">txy1</span><span class="p">,</span>
                              <span class="n">fd2</span><span class="p">,</span> <span class="n">sx2</span><span class="p">,</span> <span class="n">sy2</span><span class="p">,</span> <span class="n">txy2</span><span class="p">)</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="mi">36</span>
    <span class="k">return</span> <span class="n">n</span></div>

<div class="viewcode-block" id="oes_cbar_real_16"><a class="viewcode-back" href="../../../../../reference/op2/tables/oes_stress_strain/pyNastran.op2.tables.oes_stress_strain.oes.html#pyNastran.op2.tables.oes_stressStrain.oes.oes_cbar_real_16">[docs]</a><span class="k">def</span> <span class="nf">oes_cbar_real_16</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
                     <span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">RealBarStressArray</span><span class="p">,</span> <span class="n">RealBarStrainArray</span><span class="p">],</span>
                     <span class="n">nelements</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">fmt</span> <span class="o">=</span> <span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;15f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
    <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
        <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
         <span class="n">s1a</span><span class="p">,</span> <span class="n">s2a</span><span class="p">,</span> <span class="n">s3a</span><span class="p">,</span> <span class="n">s4a</span><span class="p">,</span> <span class="n">axial</span><span class="p">,</span> <span class="n">smaxa</span><span class="p">,</span> <span class="n">smina</span><span class="p">,</span> <span class="n">margin_tension</span><span class="p">,</span>
         <span class="n">s1b</span><span class="p">,</span> <span class="n">s2b</span><span class="p">,</span> <span class="n">s3b</span><span class="p">,</span> <span class="n">s4b</span><span class="p">,</span> <span class="n">smaxb</span><span class="p">,</span> <span class="n">sminb</span><span class="p">,</span> <span class="n">margin_compression</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
        <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
            <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%i</span><span class="s1">; C</span><span class="si">%i</span><span class="s1">=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">eid</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">add_new_eid_sort1</span><span class="p">(</span>
            <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span>
            <span class="n">s1a</span><span class="p">,</span> <span class="n">s2a</span><span class="p">,</span> <span class="n">s3a</span><span class="p">,</span> <span class="n">s4a</span><span class="p">,</span> <span class="n">axial</span><span class="p">,</span> <span class="n">smaxa</span><span class="p">,</span> <span class="n">smina</span><span class="p">,</span> <span class="n">margin_tension</span><span class="p">,</span>
            <span class="n">s1b</span><span class="p">,</span> <span class="n">s2b</span><span class="p">,</span> <span class="n">s3b</span><span class="p">,</span> <span class="n">s4b</span><span class="p">,</span> <span class="n">smaxb</span><span class="p">,</span> <span class="n">sminb</span><span class="p">,</span> <span class="n">margin_compression</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">n</span></div>

<div class="viewcode-block" id="oes_cbar_complex_19"><a class="viewcode-back" href="../../../../../reference/op2/tables/oes_stress_strain/pyNastran.op2.tables.oes_stress_strain.oes.html#pyNastran.op2.tables.oes_stressStrain.oes.oes_cbar_complex_19">[docs]</a><span class="k">def</span> <span class="nf">oes_cbar_complex_19</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                        <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
                        <span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ComplexBarStressArray</span><span class="p">,</span> <span class="n">ComplexBarStrainArray</span><span class="p">],</span>
                        <span class="n">nelements</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                        <span class="n">is_magnitude_phase</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;18f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
        <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
         <span class="n">s1ar</span><span class="p">,</span> <span class="n">s2ar</span><span class="p">,</span> <span class="n">s3ar</span><span class="p">,</span> <span class="n">s4ar</span><span class="p">,</span> <span class="n">axialr</span><span class="p">,</span>
         <span class="n">s1ai</span><span class="p">,</span> <span class="n">s2ai</span><span class="p">,</span> <span class="n">s3ai</span><span class="p">,</span> <span class="n">s4ai</span><span class="p">,</span> <span class="n">axiali</span><span class="p">,</span>
         <span class="n">s1br</span><span class="p">,</span> <span class="n">s2br</span><span class="p">,</span> <span class="n">s3br</span><span class="p">,</span> <span class="n">s4br</span><span class="p">,</span>
         <span class="n">s1bi</span><span class="p">,</span> <span class="n">s2bi</span><span class="p">,</span> <span class="n">s3bi</span><span class="p">,</span> <span class="n">s4bi</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>

        <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
            <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  eid=</span><span class="si">%i</span><span class="s1">; C</span><span class="si">%i</span><span class="s1">=[</span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">eid</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">di</span> <span class="k">for</span> <span class="n">di</span> <span class="ow">in</span> <span class="n">out</span><span class="p">])))</span>
        <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
            <span class="n">s1a</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">s1ar</span><span class="p">,</span> <span class="n">s1ai</span><span class="p">)</span>
            <span class="n">s1b</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">s1br</span><span class="p">,</span> <span class="n">s1bi</span><span class="p">)</span>
            <span class="n">s2a</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">s2ar</span><span class="p">,</span> <span class="n">s2ai</span><span class="p">)</span>
            <span class="n">s2b</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">s2br</span><span class="p">,</span> <span class="n">s2bi</span><span class="p">)</span>
            <span class="n">s3a</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">s3ar</span><span class="p">,</span> <span class="n">s3ai</span><span class="p">)</span>
            <span class="n">s3b</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">s3br</span><span class="p">,</span> <span class="n">s3bi</span><span class="p">)</span>
            <span class="n">s4a</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">s4ar</span><span class="p">,</span> <span class="n">s4ai</span><span class="p">)</span>
            <span class="n">s4b</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">s4br</span><span class="p">,</span> <span class="n">s4bi</span><span class="p">)</span>
            <span class="n">axial</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">axialr</span><span class="p">,</span> <span class="n">axiali</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s1a</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">s1ar</span><span class="p">,</span> <span class="n">s1ai</span><span class="p">)</span>
            <span class="n">s1b</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">s1br</span><span class="p">,</span> <span class="n">s1bi</span><span class="p">)</span>
            <span class="n">s2a</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">s2ar</span><span class="p">,</span> <span class="n">s2ai</span><span class="p">)</span>
            <span class="n">s2b</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">s2br</span><span class="p">,</span> <span class="n">s2bi</span><span class="p">)</span>
            <span class="n">s3a</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">s3ar</span><span class="p">,</span> <span class="n">s3ai</span><span class="p">)</span>
            <span class="n">s3b</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">s3br</span><span class="p">,</span> <span class="n">s3bi</span><span class="p">)</span>
            <span class="n">s4a</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">s4ar</span><span class="p">,</span> <span class="n">s4ai</span><span class="p">)</span>
            <span class="n">s4b</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">s4br</span><span class="p">,</span> <span class="n">s4bi</span><span class="p">)</span>
            <span class="n">axial</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">axialr</span><span class="p">,</span> <span class="n">axiali</span><span class="p">)</span>

        <span class="n">obj</span><span class="o">.</span><span class="n">add_new_eid_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span>
                              <span class="n">s1a</span><span class="p">,</span> <span class="n">s2a</span><span class="p">,</span> <span class="n">s3a</span><span class="p">,</span> <span class="n">s4a</span><span class="p">,</span> <span class="n">axial</span><span class="p">,</span>
                              <span class="n">s1b</span><span class="p">,</span> <span class="n">s2b</span><span class="p">,</span> <span class="n">s3b</span><span class="p">,</span> <span class="n">s4b</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">n</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Steven Doyle.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>