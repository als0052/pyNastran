

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>pyNastran.op2.tables.geom.ept &mdash; pyNastran 1.4-dev 1.4-dev documentation</title>
  

  
  <link rel="stylesheet" href="../../../../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../index.html" class="icon icon-home"> pyNastran 1.4-dev
          

          
            
            <img src="../../../../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.4-dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../quick_start/index.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../how_to/index.html">How To: pyNastran</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../reference/pyNastran.html">pyNastran Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../manual/index.html">pyNastran Manual</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">pyNastran 1.4-dev</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../../index.html">Module code</a> &raquo;</li>
        
      <li>pyNastran.op2.tables.geom.ept</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pyNastran.op2.tables.geom.ept</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">defines readers for BDF objects in the OP2 EPT/EPTS table</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c1">#pylint: disable=C0103,R0914</span>
<span class="kn">from</span> <span class="nn">struct</span> <span class="kn">import</span> <span class="n">unpack</span><span class="p">,</span> <span class="n">Struct</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">List</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1">#from pyNastran import is_release</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.cards.properties.mass</span> <span class="kn">import</span> <span class="n">PMASS</span><span class="p">,</span> <span class="n">NSM</span><span class="p">,</span> <span class="n">NSML</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.cards.properties.bars</span> <span class="kn">import</span> <span class="n">PBAR</span><span class="p">,</span> <span class="n">PBARL</span><span class="p">,</span> <span class="n">PBEND</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.cards.properties.beam</span> <span class="kn">import</span> <span class="n">PBEAM</span><span class="p">,</span> <span class="n">PBEAML</span><span class="p">,</span> <span class="n">PBCOMP</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.cards.properties.bush</span> <span class="kn">import</span> <span class="n">PBUSH</span><span class="p">,</span> <span class="n">PBUSHT</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.cards.properties.damper</span> <span class="kn">import</span> <span class="n">PDAMP</span><span class="p">,</span> <span class="n">PVISC</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.cards.properties.properties</span> <span class="kn">import</span> <span class="n">PFAST</span><span class="p">,</span> <span class="n">PGAP</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.cards.properties.rods</span> <span class="kn">import</span> <span class="n">PROD</span><span class="p">,</span> <span class="n">PTUBE</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.cards.properties.shell</span> <span class="kn">import</span> <span class="n">PSHEAR</span><span class="p">,</span> <span class="n">PSHELL</span><span class="p">,</span> <span class="n">PCOMP</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.cards.properties.solid</span> <span class="kn">import</span> <span class="n">PSOLID</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.cards.properties.springs</span> <span class="kn">import</span> <span class="n">PELAS</span><span class="p">,</span> <span class="n">PELAST</span>

<span class="kn">from</span> <span class="nn">pyNastran.bdf.cards.thermal.thermal</span> <span class="kn">import</span> <span class="n">PCONV</span><span class="p">,</span> <span class="n">PHBDY</span><span class="p">,</span> <span class="n">PCONVM</span>
<span class="c1"># PCOMPG, PBUSH1D, PBEAML, PBEAM3</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.geom.geom_common</span> <span class="kn">import</span> <span class="n">GeomCommon</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.op2_interface.op2_reader</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">mapfmt</span><span class="p">,</span> <span class="n">reshape_bytes_block</span><span class="p">,</span> <span class="n">reshape_bytes_block_size</span><span class="p">)</span>


<div class="viewcode-block" id="EPT"><a class="viewcode-back" href="../../../../../reference/op2/tables/geom/pyNastran.op2.tables.geom.ept.html#pyNastran.op2.tables.geom.ept.EPT">[docs]</a><span class="k">class</span> <span class="nc">EPT</span><span class="p">(</span><span class="n">GeomCommon</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;defines methods for reading op2 properties&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_read_ept_4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_geom_4</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ept_map</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">GeomCommon</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">big_properties</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ept_map</span> <span class="o">=</span> <span class="p">{</span>
            <span class="p">(</span><span class="mi">3201</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">55</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;NSM&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_nsm</span><span class="p">],</span>          <span class="c1"># record 2</span>
            <span class="p">(</span><span class="mi">52</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">181</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PBAR&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pbar</span><span class="p">],</span>         <span class="c1"># record 11 - buggy</span>
            <span class="p">(</span><span class="mi">9102</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">52</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PBARL&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pbarl</span><span class="p">],</span>      <span class="c1"># record 12 - almost there...</span>
            <span class="p">(</span><span class="mi">2706</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">287</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PCOMP&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pcomp</span><span class="p">],</span>     <span class="c1"># record 22 - buggy</span>
            <span class="p">(</span><span class="mi">302</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">46</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PELAS&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pelas</span><span class="p">],</span>        <span class="c1"># record 39</span>
            <span class="p">(</span><span class="mi">2102</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">121</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PGAP&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pgap</span><span class="p">],</span>       <span class="c1"># record 42</span>
            <span class="p">(</span><span class="mi">902</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">29</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PROD&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_prod</span><span class="p">],</span>          <span class="c1"># record 49</span>
            <span class="p">(</span><span class="mi">1002</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">42</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PSHEAR&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pshear</span><span class="p">],</span>    <span class="c1"># record 50</span>
            <span class="p">(</span><span class="mi">2402</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">281</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PSOLID&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_psolid</span><span class="p">],</span>   <span class="c1"># record 51</span>
            <span class="p">(</span><span class="mi">2302</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">283</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PSHELL&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pshell</span><span class="p">],</span>   <span class="c1"># record 52</span>
            <span class="p">(</span><span class="mi">1602</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">30</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PTUBE&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_ptube</span><span class="p">],</span>      <span class="c1"># record 56</span>

            <span class="p">(</span><span class="mi">5402</span><span class="p">,</span> <span class="mi">54</span><span class="p">,</span> <span class="mi">262</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PBEAM&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pbeam</span><span class="p">],</span>      <span class="c1"># record 14 - not done</span>
            <span class="p">(</span><span class="mi">9202</span><span class="p">,</span> <span class="mi">92</span><span class="p">,</span> <span class="mi">53</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PBEAML&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pbeaml</span><span class="p">],</span>     <span class="c1"># record 15</span>
            <span class="p">(</span><span class="mi">2502</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">248</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PBEND&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pbend</span><span class="p">],</span>      <span class="c1"># record 16 - not done</span>
            <span class="p">(</span><span class="mi">1402</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">37</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PBUSH&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pbush</span><span class="p">],</span>       <span class="c1"># record 19 - not done</span>
            <span class="p">(</span><span class="mi">3101</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">219</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PBUSH1D&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pbush1d</span><span class="p">],</span>  <span class="c1"># record 20 - not done</span>
            <span class="p">(</span><span class="mi">152</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">147</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PCONEAX&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pconeax</span><span class="p">],</span>   <span class="c1"># record 24 - not done</span>
            <span class="p">(</span><span class="mi">11001</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">411</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PCONV&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pconv</span><span class="p">],</span>    <span class="c1"># record 25 - not done</span>
            <span class="c1"># record 26</span>
            <span class="p">(</span><span class="mi">202</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">45</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PDAMP&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pdamp</span><span class="p">],</span>      <span class="c1"># record 27 - not done</span>
            <span class="p">(</span><span class="mi">2802</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">236</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PHBDY&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_phbdy</span><span class="p">],</span>   <span class="c1"># record 43 - not done</span>
            <span class="p">(</span><span class="mi">402</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">44</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PMASS&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pmass</span><span class="p">],</span>      <span class="c1"># record 48</span>
            <span class="p">(</span><span class="mi">1802</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">31</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PVISC&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pvisc</span><span class="p">],</span>    <span class="c1"># record 59</span>
            <span class="p">(</span><span class="mi">10201</span><span class="p">,</span> <span class="mi">102</span><span class="p">,</span> <span class="mi">400</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PVAL&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pval</span><span class="p">],</span>   <span class="c1"># record 58 - not done</span>
            <span class="p">(</span><span class="mi">2606</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">289</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;VIEW&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_view</span><span class="p">],</span>     <span class="c1"># record 62 - not done</span>
            <span class="p">(</span><span class="mi">3201</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">991</span><span class="p">)</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;NSM&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>  <span class="c1"># record</span>
            <span class="p">(</span><span class="mi">3301</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">992</span><span class="p">)</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;NSM1&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>  <span class="c1"># record</span>
            <span class="p">(</span><span class="mi">3701</span><span class="p">,</span> <span class="mi">37</span><span class="p">,</span> <span class="mi">995</span><span class="p">)</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;NSML1&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>    <span class="c1"># record</span>
            <span class="p">(</span><span class="mi">15006</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">604</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PCOMPG&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pcompg</span><span class="p">],</span>  <span class="c1"># record</span>

            <span class="p">(</span><span class="mi">702</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">38</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PBUSHT&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pbusht</span><span class="p">],</span>  <span class="c1"># record 1</span>
            <span class="p">(</span><span class="mi">3301</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">56</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;NSM1&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>  <span class="c1"># record 3</span>
            <span class="p">(</span><span class="mi">3401</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">57</span><span class="p">)</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;NSMADD&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>    <span class="c1"># record 5</span>
            <span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">58</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;NSML&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>  <span class="c1"># record 6</span>
            <span class="p">(</span><span class="mi">3501</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">994</span><span class="p">)</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;NSML&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>
            <span class="p">(</span><span class="mi">3601</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">62</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;NSML1&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>  <span class="c1"># record 7</span>
            <span class="p">(</span><span class="mi">1502</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">36</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PAABSF&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>  <span class="c1"># record 8</span>
            <span class="p">(</span><span class="mi">8300</span><span class="p">,</span> <span class="mi">83</span><span class="p">,</span> <span class="mi">382</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PACABS&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>  <span class="c1"># record 9</span>
            <span class="p">(</span><span class="mi">8500</span><span class="p">,</span> <span class="mi">85</span><span class="p">,</span> <span class="mi">384</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PACBAR&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>  <span class="c1"># record 10</span>
            <span class="p">(</span><span class="mi">5403</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">349</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PBCOMP&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pbcomp</span><span class="p">],</span>  <span class="c1"># record 13</span>
            <span class="p">(</span><span class="mi">13301</span><span class="p">,</span> <span class="mi">133</span><span class="p">,</span> <span class="mi">509</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PBMSECT&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>  <span class="c1"># record 17</span>
            <span class="p">(</span><span class="mi">2902</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">420</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PCONVM&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pconvm</span><span class="p">],</span>  <span class="c1"># record 26</span>
            <span class="p">(</span><span class="mi">1202</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">33</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PDAMPT&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pdampt</span><span class="p">],</span>  <span class="c1"># record 28</span>
            <span class="p">(</span><span class="mi">8702</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="mi">412</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PDAMP5&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pdamp5</span><span class="p">],</span>  <span class="c1"># record 29</span>
            <span class="p">(</span><span class="mi">6802</span><span class="p">,</span> <span class="mi">68</span><span class="p">,</span> <span class="mi">164</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PDUM8&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>  <span class="c1"># record 37</span>
            <span class="p">(</span><span class="mi">6902</span><span class="p">,</span> <span class="mi">69</span><span class="p">,</span> <span class="mi">165</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PDUM9&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>  <span class="c1"># record 38</span>
            <span class="p">(</span><span class="mi">1302</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">34</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PELAST&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pelast</span><span class="p">],</span>  <span class="c1"># record 41</span>
            <span class="p">(</span><span class="mi">12001</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">480</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PINTC&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>  <span class="c1"># record 44</span>
            <span class="p">(</span><span class="mi">12101</span><span class="p">,</span> <span class="mi">121</span><span class="p">,</span> <span class="mi">484</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PINTS&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>  <span class="c1"># record 45</span>
            <span class="p">(</span><span class="mi">4606</span><span class="p">,</span> <span class="mi">46</span><span class="p">,</span> <span class="mi">375</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PLPLANE&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_plplane</span><span class="p">],</span>  <span class="c1"># record 46</span>
            <span class="p">(</span><span class="mi">4706</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="mi">376</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PLSOLID&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_plsolid</span><span class="p">],</span>  <span class="c1"># record 47</span>
            <span class="p">(</span><span class="mi">10301</span><span class="p">,</span> <span class="mi">103</span><span class="p">,</span> <span class="mi">399</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;PSET&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pset</span><span class="p">],</span>  <span class="c1"># record 57</span>
            <span class="p">(</span><span class="mi">3002</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">415</span><span class="p">):</span> <span class="p">[</span><span class="s1">&#39;VIEW3D&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>  <span class="c1"># record 63</span>

            <span class="p">(</span><span class="mi">13501</span><span class="p">,</span> <span class="mi">135</span><span class="p">,</span> <span class="mi">510</span><span class="p">)</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;PFAST&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pfast_msc</span><span class="p">],</span>  <span class="c1"># MSC-specific</span>

            <span class="c1"># NX-specific</span>
            <span class="p">(</span><span class="mi">3601</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">55</span><span class="p">)</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;PFAST&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pfast_nx</span><span class="p">],</span>  <span class="c1"># NX-specific</span>
            <span class="p">(</span><span class="mi">3801</span><span class="p">,</span> <span class="mi">38</span><span class="p">,</span> <span class="mi">979</span><span class="p">)</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;PPLANE&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>
            <span class="p">(</span><span class="mi">11801</span><span class="p">,</span> <span class="mi">118</span><span class="p">,</span> <span class="mi">560</span><span class="p">)</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;PWELD&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>
            <span class="p">(</span><span class="mi">3401</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">993</span><span class="p">)</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;NSMADD&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_fake</span><span class="p">],</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">_add_op2_property</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;helper method for op2&quot;&quot;&quot;</span>
        <span class="c1">#if prop.pid &gt; 100000000:</span>
            <span class="c1">#raise RuntimeError(&#39;bad parsing; pid &gt; 100000000...%s&#39; % str(prop))</span>
        <span class="c1">#print(str(prop)[:-1])</span>
        <span class="n">ntables</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_names</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;EPT&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_names</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;EPTS&#39;</span><span class="p">)</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">prop</span><span class="o">.</span><span class="n">pid</span>
        <span class="n">allow_overwrites</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">ntables</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span>
            <span class="n">pid</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="ow">and</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="n">pid</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">prop</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_property_object</span><span class="p">(</span><span class="n">prop</span><span class="p">,</span> <span class="n">allow_overwrites</span><span class="o">=</span><span class="n">allow_overwrites</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_add_op2_property_mass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;helper method for op2&quot;&quot;&quot;</span>
        <span class="c1">#if prop.pid &gt; 100000000:</span>
            <span class="c1">#raise RuntimeError(&#39;bad parsing; pid &gt; 100000000...%s&#39; % str(prop))</span>
        <span class="c1">#print(str(prop)[:-1])</span>
        <span class="n">ntables</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_names</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;EPT&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_names</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;EPTS&#39;</span><span class="p">)</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">prop</span><span class="o">.</span><span class="n">pid</span>
        <span class="n">allow_overwrites</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">ntables</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span>
            <span class="n">pid</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties_mass</span> <span class="ow">and</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">properties_mass</span><span class="p">[</span><span class="n">pid</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">prop</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_property_mass_object</span><span class="p">(</span><span class="n">prop</span><span class="p">,</span> <span class="n">allow_overwrites</span><span class="o">=</span><span class="n">allow_overwrites</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_add_pconv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">pconid</span> <span class="o">&gt;</span> <span class="mi">100000000</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;bad parsing pconid &gt; 100000000...</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">prop</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_convection_property_object</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>

<span class="c1"># HGSUPPR</span>

    <span class="k">def</span> <span class="nf">_read_nsm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;NSM&quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_dual_card</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_nsm_nx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_nsm_msc</span><span class="p">,</span>
                                 <span class="s1">&#39;NSM&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_nsm_object</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_nsm_msc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        NSM(3201,32,55) - the marker for Record 2</span>

<span class="sd">        MSC</span>
<span class="sd">        1 SID       I Set identification number</span>
<span class="sd">        2 PROP  CHAR4 Set of property or elements</span>
<span class="sd">        3 ID        I Property or element identification number</span>
<span class="sd">        4 VALUE    RS Nonstructural mass value</span>
<span class="sd">        ORIGIN=0 NSM Bulk Data entry</span>
<span class="sd">          5 ID I Property or element ID</span>
<span class="sd">          6 VALUE RS Nonstructural mass value</span>
<span class="sd">          Words 5 through 6 repeat until End of Record</span>
<span class="sd">        ORIGIN=2 NSML Bulk Data entry</span>
<span class="sd">          5 ID I Property or element ID</span>
<span class="sd">          6 VALUE RS Nonstructural mass value</span>
<span class="sd">          Words 5 through 6 repeat until End of Record</span>
<span class="sd">        Words 3 through 4 repeat until End of Record</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">properties</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i 4s if&#39;</span><span class="p">)</span>
        <span class="n">ndelta</span> <span class="o">=</span> <span class="mi">16</span>

        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">ints</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:],</span> <span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">floats</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:],</span> <span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="k">while</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ndelta</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">prop_set</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="c1">#            538976312</span>
            <span class="k">assert</span> <span class="n">pid</span> <span class="o">&lt;</span> <span class="mi">100000000</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">4</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ndelta</span>

            <span class="n">prop_set</span> <span class="o">=</span> <span class="n">prop_set</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span> <span class="c1"># \x00</span>
            <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span><span class="p">]</span>
            <span class="c1">#print(&#39;ints[i:]=&#39;, ints[i:])</span>
            <span class="k">while</span> <span class="n">ints</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">value2</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value2</span><span class="p">)</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="mi">4</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;MSC: NSM-sid=</span><span class="si">%s</span><span class="s2"> prop_set=</span><span class="si">%s</span><span class="s2"> pid=</span><span class="si">%s</span><span class="s2"> values=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">sid</span><span class="p">,</span> <span class="n">prop_set</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">values</span><span class="p">))</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">NSM</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">([</span><span class="n">sid</span><span class="p">,</span> <span class="n">prop_set</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">value</span><span class="p">])</span>
            <span class="c1">#self._add_nsm_object(prop)</span>
            <span class="n">properties</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>

            <span class="c1"># handle the trailing -1</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="mi">4</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">properties</span>

    <span class="k">def</span> <span class="nf">_read_nsm_nx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        NSM(3201,32,55) - the marker for Record 2</span>

<span class="sd">        1 SID         I Set identification number</span>
<span class="sd">        2 PROP(2) CHAR4 Set of properties or elements</span>
<span class="sd">        4 ORIGIN      I  Entry origin</span>
<span class="sd">        5 ID          I  Property or element identification number</span>
<span class="sd">        6 VALUE      RS Nonstructural mass value</span>
<span class="sd">        Words 5 through 6 repeat until End of Record</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">properties</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1">#NX: C:\Users\sdoyle\Dropbox\move_tpl\nsmlcr2s.op2</span>
        <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i 8s ii f&#39;</span><span class="p">)</span>
        <span class="n">ndelta</span> <span class="o">=</span> <span class="mi">24</span>
        <span class="c1">#self.show_data(data[12:], &#39;ifs&#39;)</span>

        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">ints</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:],</span> <span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">floats</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:],</span> <span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="n">unused_packs</span> <span class="o">=</span> <span class="n">break_by_minus1</span><span class="p">(</span><span class="n">ints</span><span class="p">)</span>
        <span class="c1">#for pack in packs:</span>
            <span class="c1">#print(pack)</span>

        <span class="c1">#ipack = 0</span>
        <span class="k">while</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="c1">#print(&#39;ints[i:]=&#39;, ints[i:].tolist())</span>
            <span class="c1">#i1, i2 = packs[ipack]</span>
            <span class="c1">#print(&#39;idata=%s&#39; % idata[i1:i2])</span>
            <span class="c1">#print(&#39;fdata=%s&#39; % fdata[i1:i2])</span>
            <span class="c1">#print(idata[i1:i2])</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ndelta</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="p">(</span><span class="n">sid</span><span class="p">,</span> <span class="n">prop_set</span><span class="p">,</span> <span class="n">origin</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="c1">#            538976312</span>
            <span class="k">assert</span> <span class="n">pid</span> <span class="o">&lt;</span> <span class="mi">100000000</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">6</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ndelta</span>

            <span class="n">prop_set</span> <span class="o">=</span> <span class="n">prop_set</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span> <span class="c1"># \x00</span>
            <span class="n">pids</span> <span class="o">=</span> <span class="p">[</span><span class="n">pid</span><span class="p">]</span>
            <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span><span class="p">]</span>
            <span class="c1">#print(&#39;ints[i:]=&#39;, ints[i:].tolist())</span>
            <span class="k">while</span> <span class="n">ints</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">pid</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">value2</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">assert</span> <span class="n">pid</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span>
                <span class="n">pids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span>
                <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value2</span><span class="p">)</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="mi">8</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">2</span>

            <span class="k">for</span> <span class="n">pid</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">pids</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">origin</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c1">#self.log.info(&quot;NX: NSM-sid=%s prop_set=%s pid=%s values=%s&quot; % (</span>
                        <span class="c1">#sid, prop_set, pid, values))</span>
                    <span class="n">prop</span> <span class="o">=</span> <span class="n">NSM</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">([</span><span class="n">sid</span><span class="p">,</span> <span class="n">prop_set</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">value</span><span class="p">])</span>
                <span class="k">elif</span> <span class="n">origin</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="c1">#self.log.info(&quot;NX: NSML-sid=%s prop_set=%s pid=%s values=%s&quot; % (</span>
                        <span class="c1">#sid, prop_set, pid, values))</span>
                    <span class="n">prop</span> <span class="o">=</span> <span class="n">NSML</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">([</span><span class="n">sid</span><span class="p">,</span> <span class="n">prop_set</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">value</span><span class="p">])</span>

                <span class="c1">#print(prop.rstrip(), pid, value)</span>
                <span class="c1">#self._add_nsm_object(prop)</span>
                <span class="n">properties</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="c1">#print(&#39;----&#39;)</span>

            <span class="c1"># handle the trailing -1</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="mi">4</span>
            <span class="c1">#ipack += 1</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">properties</span>

<span class="c1"># NSM1</span>
<span class="c1"># NSML1</span>
<span class="c1"># NSMADD</span>
<span class="c1"># NSML</span>
<span class="c1"># NSML1</span>
<span class="c1"># PAABSF</span>
<span class="c1"># PACABS</span>
<span class="c1"># PACBAR</span>

    <span class="k">def</span> <span class="nf">_read_pbar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        PBAR(52,20,181) - the marker for Record 11</span>
<span class="sd">        .. warning:: this makes a funny property...</span>

<span class="sd">        MSC 2016/NX10</span>

<span class="sd">        Word Name Type Description</span>
<span class="sd">        1  PID  I Property identification number</span>
<span class="sd">        2  MID  I Material identification number</span>
<span class="sd">        3  A   RS Area</span>
<span class="sd">        4  I1  RS Area moment of inertia in plane 1</span>
<span class="sd">        5  I2  RS Area moment of inertia in plane 2</span>
<span class="sd">        6  J   RS Torsional constant</span>
<span class="sd">        7  NSM RS Nonstructural mass per unit length</span>
<span class="sd">        8  FE  RS</span>
<span class="sd">        9  C1  RS Stress recovery location at point C in element y-axis</span>
<span class="sd">        10 C2  RS Stress recovery location at point C in element z-axis</span>
<span class="sd">        11 D1  RS Stress recovery location at point D in element y-axis</span>
<span class="sd">        12 D2  RS Stress recovery location at point D in element z-axis</span>
<span class="sd">        13 E1  RS Stress recovery location at point E in element y-axis</span>
<span class="sd">        14 E2  RS Stress recovery location at point E in element z-axis</span>
<span class="sd">        15 F1  RS Stress recovery location at point F in element y-axis</span>
<span class="sd">        16 F2  RS Stress recovery location at point F in element z-axis</span>
<span class="sd">        17 K1  RS Area factor for shear in plane 1</span>
<span class="sd">        18 K2  RS Area factor for shear in plane 2</span>
<span class="sd">        19 I12 RS Area product of inertia for plane 1 and 2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">76</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>  <span class="c1"># 19*4</span>
        <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i17f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="c1">#(pid, mid, a, I1, I2, J, nsm, fe, c1, c2, d1, d2,</span>
             <span class="c1">#e1, e2, f1, f2, k1, k2, I12) = out</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PBAR</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_op2_property</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PBAR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nentries</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_pbarl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        PBARL(9102,91,52) - the marker for Record 12</span>
<span class="sd">        TODO: buggy</span>
<span class="sd">        It&#39;s possible to have a PBARL and a PBAR at the same time.</span>
<span class="sd">        NSM is at the end of the element.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">valid_types</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;ROD&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;TUBE&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">&quot;I&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
            <span class="s2">&quot;CHAN&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s2">&quot;T&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s2">&quot;BOX&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s2">&quot;BAR&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">&quot;CROSS&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s2">&quot;H&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s2">&quot;T1&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s2">&quot;I1&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s2">&quot;CHAN1&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s2">&quot;Z&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s2">&quot;CHAN2&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s2">&quot;T2&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s2">&quot;BOX1&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
            <span class="s2">&quot;HEXA&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s2">&quot;HAT&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s2">&quot;HAT1&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="s2">&quot;DBOX&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>  <span class="c1"># was 12</span>
            <span class="c1">#&#39;MLO TUBE&#39; : 2,</span>
        <span class="p">}</span>  <span class="c1"># for GROUP=&quot;MSCBML0&quot;</span>

        <span class="n">size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">28</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>  <span class="c1"># 7*4 - ROD - shortest entry...could be buggy... # TODO fix this</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i 8s 8s f&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2q 16s 16s d&#39;</span><span class="p">)</span>

        <span class="c1">#nentries = (len(data) - n) // ntotal</span>
        <span class="c1">#print(self.show_ndata(80))</span>
        <span class="n">ndata</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="k">while</span> <span class="n">ndata</span> <span class="o">-</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="n">ntotal</span><span class="p">:</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>

            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">beam_type</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">if</span> <span class="n">pid</span> <span class="o">&gt;</span> <span class="mi">100000000</span> <span class="ow">or</span> <span class="n">pid</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;  pid=</span><span class="si">%s</span><span class="s2"> mid=</span><span class="si">%s</span><span class="s2"> group=</span><span class="si">%r</span><span class="s2"> beam_type=</span><span class="si">%r</span><span class="s2"> value=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">pid</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">beam_type</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;bad parsing...&#39;</span><span class="p">)</span>

            <span class="n">beam_type</span> <span class="o">=</span> <span class="n">reshape_bytes_block_size</span><span class="p">(</span><span class="n">beam_type</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">)</span>
            <span class="n">group</span> <span class="o">=</span> <span class="n">reshape_bytes_block_size</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">)</span>
            <span class="n">data_in</span> <span class="o">=</span> <span class="p">[</span><span class="n">pid</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">beam_type</span><span class="p">,</span> <span class="n">value</span><span class="p">]</span>

            <span class="n">expected_length</span> <span class="o">=</span> <span class="n">valid_types</span><span class="p">[</span><span class="n">beam_type</span><span class="p">]</span>
            <span class="n">iformat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="si">%i</span><span class="s1">f&#39;</span> <span class="o">%</span> <span class="n">expected_length</span>

            <span class="n">ndelta</span> <span class="o">=</span> <span class="n">expected_length</span> <span class="o">*</span> <span class="mi">4</span>
            <span class="n">dims_nsm</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">unpack</span><span class="p">(</span><span class="n">iformat</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ndelta</span><span class="p">]))</span>
            <span class="n">data_in</span> <span class="o">+=</span> <span class="n">dims_nsm</span>
            <span class="c1">#print(&quot;  pid=%s mid=%s group=%r beam_type=%r value=%s dims_nsm=%s&quot; % (</span>
                <span class="c1">#pid, mid, group, beam_type, value, dims_nsm))</span>

            <span class="c1"># TODO why do i need the +4???</span>
            <span class="c1">#      is that for the nsm?</span>
            <span class="c1">#min_len =  expected_length * 4 + 4</span>
            <span class="c1">#if len(data)</span>
            <span class="c1">#data = data[n + expected_length * 4 + 4:]</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ndelta</span>

            <span class="c1">#prin( &quot;len(out) = &quot;,len(out)))</span>
            <span class="c1">#print(&quot;PBARL = %s&quot; % data_in)</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PBARL</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">data_in</span><span class="p">)</span>  <span class="c1"># last value is nsm</span>
            <span class="n">pid</span> <span class="o">=</span> <span class="n">prop</span><span class="o">.</span><span class="n">pid</span>
            <span class="k">if</span> <span class="n">pid</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">:</span>
                <span class="c1">#self.log.debug(&quot;removing:\n%s&quot; % self.properties[pid])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_type_to_id_map</span><span class="p">[</span><span class="s1">&#39;PBAR&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="n">pid</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_op2_property</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="c1">#self.properties[pid] = prop</span>
            <span class="c1">#print(prop.get_stats())</span>
            <span class="c1">#print(self.show_data(data[n-8:-100]))</span>

            <span class="c1"># the PBARL ends with a -1 flag</span>
            <span class="c1">#value, = unpack(self._endian + b&#39;i&#39;, data[n:n+4])</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_type_to_id_map</span><span class="p">[</span><span class="s1">&#39;PBAR&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="s1">&#39;PBAR&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_to_id_map</span><span class="p">[</span><span class="s1">&#39;PBAR&#39;</span><span class="p">]</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PBAR&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">increase_card_count</span><span class="p">(</span><span class="s1">&#39;PBARL&#39;</span><span class="p">)</span>
        <span class="c1">#assert len(data) == n</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_pbcomp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        PBCOMP(5403, 55, 349)</span>

<span class="sd">                    pid      mid  A      I1      I2         I12 J           NSM</span>
<span class="sd">        PBCOMP         3       2 2.00E-4 6.67E-9 1.67E-9    0.0 4.58E-9     0.0 +</span>
<span class="sd">                 pid mid</span>
<span class="sd">        floats = (3, 2, 0.0002, 6.67e-09, 1.67e-09, 0.0, 4.58e-09, 0.0, 1.0, 1.0,</span>
<span class="sd">        0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0)</span>
<span class="sd">        ints   = (3, 2, 0.0002, 6.67E-9, 1.67E-9, 0, 4.58E-9, 0, 1.0, 1.0,</span>
<span class="sd">        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i 12f i&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="n">struct2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3f 2i&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="n">nproperties</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">ntotal1</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>  <span class="c1"># 4*15</span>
        <span class="n">ntotal2</span> <span class="o">=</span> <span class="mi">20</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>

        <span class="n">ndata</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="c1">#print(ntotal1, ntotal2)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_data</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">12</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">factor</span><span class="p">:],</span> <span class="n">types</span><span class="o">=</span><span class="s1">&#39;qd&#39;</span><span class="p">)</span>
        <span class="c1">#print(len(data[12*self.factor:]))</span>
        <span class="k">while</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="n">ndata</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;n=</span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2"> ndata=</span><span class="si">{</span><span class="n">ndata</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal1</span><span class="p">]</span>
            <span class="c1">#if len(edata) == ntotal1:</span>
            <span class="n">data1</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="c1">#else:</span>
                <span class="c1">#self.show_data(edata, types=&#39;qdi&#39;)</span>
                <span class="c1">#n += ntotal2</span>
                <span class="c1">#continue</span>
            <span class="n">nsections</span> <span class="o">=</span> <span class="n">data1</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">,</span> <span class="n">i12</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">nsm</span><span class="p">,</span> <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span>
                 <span class="n">m1</span><span class="p">,</span> <span class="n">m2</span><span class="p">,</span> <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">unused_nsections</span><span class="p">)</span> <span class="o">=</span> <span class="n">data1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;PBCOMP pid=</span><span class="si">{</span><span class="n">pid</span><span class="si">}</span><span class="s1"> mid=</span><span class="si">{</span><span class="n">mid</span><span class="si">}</span><span class="s1"> nsections=</span><span class="si">{</span><span class="n">nsections</span><span class="si">}</span><span class="s1"> &#39;</span>
                              <span class="sa">f</span><span class="s1">&#39;k1=</span><span class="si">{</span><span class="n">k1</span><span class="si">}</span><span class="s1"> k2=</span><span class="si">{</span><span class="n">k2</span><span class="si">}</span><span class="s1"> m=(</span><span class="si">{</span><span class="n">m1</span><span class="si">}</span><span class="s1">,</span><span class="si">{</span><span class="n">m2</span><span class="si">}</span><span class="s1">) n=(</span><span class="si">{</span><span class="n">n1</span><span class="si">}</span><span class="s1">,</span><span class="si">{</span><span class="n">n2</span><span class="si">}</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="c1">#if pid &gt; 0 and nsections == 0:</span>
                <span class="c1">#print(&#39;n1&#39;)</span>
                <span class="c1">#n += ntotal1</span>
                <span class="c1">#continue</span>
            <span class="c1">#if pid == 0 and nsections == 0:</span>
                <span class="c1">#print(&#39;n2&#39;)</span>
                <span class="c1">#n += ntotal2</span>
                <span class="c1">#continue</span>

            <span class="n">data2</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal1</span>
            <span class="k">if</span> <span class="n">nsections</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">20</span><span class="p">]:</span>
                <span class="c1"># 16 Y   RS    Lumped area location along element&#39;s y-axis</span>
                <span class="c1"># 17 Z   RS    Lumped area location along element&#39;s z-axis</span>
                <span class="c1"># 18 C   RS    Fraction of the total area for the lumped area</span>
                <span class="c1"># 19 MID I     Material identification number</span>
                <span class="c1"># 20     UNDEF None</span>
                <span class="c1"># Words 16 through 20 repeat NSECT times</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nsections</span><span class="p">):</span>
                    <span class="n">datai</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal2</span><span class="p">]</span>
                    <span class="n">xi</span><span class="p">,</span> <span class="n">yi</span><span class="p">,</span> <span class="n">ci</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">unused_null</span> <span class="o">=</span> <span class="n">struct2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">datai</span><span class="p">)</span>
                    <span class="n">data2</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">xi</span><span class="p">,</span> <span class="n">yi</span><span class="p">,</span> <span class="n">ci</span><span class="p">,</span> <span class="n">mid</span><span class="p">))</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;PBCOMP nsections=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nsections</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;     PBCOMP: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">([</span><span class="n">data1</span><span class="p">,</span> <span class="n">data2</span><span class="p">]))</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s1">&#39;    i=</span><span class="si">%-2s</span><span class="s1"> so=</span><span class="si">%s</span><span class="s1"> xxb=</span><span class="si">%.1f</span><span class="s1"> a=</span><span class="si">%g</span><span class="s1"> i1=</span><span class="si">%g</span><span class="s1"> i2=</span><span class="si">%g</span><span class="s1"> i12=</span><span class="si">%g</span><span class="s1"> j=</span><span class="si">%g</span><span class="s1"> nsm=</span><span class="si">%g</span><span class="s1"> &#39;</span>
                    <span class="s1">&#39;c=[</span><span class="si">%s</span><span class="s1">,</span><span class="si">%s</span><span class="s1">] d=[</span><span class="si">%s</span><span class="s1">,</span><span class="si">%s</span><span class="s1">] e=[</span><span class="si">%s</span><span class="s1">,</span><span class="si">%s</span><span class="s1">] f=[</span><span class="si">%s</span><span class="s1">,</span><span class="si">%s</span><span class="s1">]&#39;</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="n">nsections</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="o">-</span><span class="mf">9999.</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">,</span> <span class="n">i12</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">nsm</span><span class="p">,</span>
                        <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,)</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">data1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">data2</span><span class="p">)</span>

            <span class="n">data_in</span> <span class="o">=</span> <span class="p">[</span><span class="n">data1</span><span class="p">,</span> <span class="n">data2</span><span class="p">]</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PBCOMP</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">data_in</span><span class="p">)</span>
            <span class="n">pid</span> <span class="o">=</span> <span class="n">data1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">pid</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_type_to_id_map</span><span class="p">[</span><span class="s1">&#39;PBEAM&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="n">pid</span><span class="p">]</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_add_op2_property</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="n">nproperties</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="c1">#print(f&quot;n={n} ndata={ndata}&quot;)</span>
        <span class="k">assert</span> <span class="n">nproperties</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;PBCOMP nproperties=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nproperties</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_type_to_id_map</span><span class="p">[</span><span class="s1">&#39;PBEAM&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="s1">&#39;PBEAM&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type_to_id_map</span><span class="p">[</span><span class="s1">&#39;PBEAM&#39;</span><span class="p">]</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PBEAM&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PBCOMP&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nproperties</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_pbeam</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        PBEAM(5402,54,262) - the marker for Record 14</span>
<span class="sd">        .. todo:: add object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cross_section_type_map</span> <span class="o">=</span> <span class="p">{</span>
            <span class="mi">0</span> <span class="p">:</span> <span class="s1">&#39;variable&#39;</span><span class="p">,</span>
            <span class="mi">1</span> <span class="p">:</span> <span class="s1">&#39;constant&#39;</span><span class="p">,</span>
            <span class="mi">2</span> <span class="p">:</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;4if&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="n">struct2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;16f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="n">struct3</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;16f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="n">unused_ntotal</span> <span class="o">=</span> <span class="mi">768</span> <span class="c1"># 4*(5+16*12)</span>
        <span class="c1">#nproperties = (len(data) - n) // ntotal</span>
        <span class="c1">#assert nproperties &gt; 0, &#39;ndata-n=%s n=%s datai\n%s&#39; % (len(data)-n, n, self.show_data(data[n:100+n]))</span>
        <span class="n">ndata</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="c1">#self.show_data(data[12:], &#39;if&#39;)</span>
        <span class="c1">#assert ndata % ntotal == 0, &#39;ndata-n=%s n=%s ndata%%ntotal=%s&#39; % (len(data)-n, n, ndata % ntotal)</span>
        <span class="n">nproperties</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">ntotal1</span> <span class="o">=</span> <span class="mi">20</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="n">ntotal2</span> <span class="o">=</span> <span class="mi">64</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="k">while</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="n">ndata</span><span class="p">:</span>
        <span class="c1">#while 1: #for i in range(nproperties):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal1</span><span class="p">]</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal1</span>
            <span class="n">data_in</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">))</span>
            <span class="c1">#if self.is_debug_file:</span>
                <span class="c1">#self.log.info(&#39;PBEAM pid=%s mid=%s nsegments=%s ccf=%s x=%s\n&#39; % tuple(data_in))</span>
            <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">unused_mid</span><span class="p">,</span> <span class="n">unused_nsegments</span><span class="p">,</span> <span class="n">ccf</span><span class="p">,</span> <span class="n">unused_x</span><span class="p">)</span> <span class="o">=</span> <span class="n">data_in</span>
            <span class="c1">#self.log.info(&#39;PBEAM pid=%s mid=%s nsegments=%s ccf=%s x=%s&#39; % tuple(data_in))</span>

            <span class="c1"># Constant cross-section flag: 1=yes and 0=no</span>
            <span class="c1"># what is 2?</span>
            <span class="k">if</span> <span class="n">ccf</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;  PBEAM pid=</span><span class="si">%s</span><span class="s1"> mid=</span><span class="si">%s</span><span class="s1"> nsegments=</span><span class="si">%s</span><span class="s1"> ccf=</span><span class="si">%s</span><span class="s1"> x=</span><span class="si">%s</span><span class="s1">; &#39;</span>
                       <span class="s1">&#39;ccf must be in [0, 1, 2]</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">data_in</span><span class="p">))</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

            <span class="n">cross_section_type</span> <span class="o">=</span> <span class="n">cross_section_type_map</span><span class="p">[</span><span class="n">ccf</span><span class="p">]</span>
            <span class="c1">#print(&#39;cross_section_type = %s&#39; % cross_section_type)</span>

            <span class="n">is_pbcomp</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">):</span>
                <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal2</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span> <span class="o">!=</span> <span class="n">ntotal2</span><span class="p">:</span>
                    <span class="n">endpack</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;PBEAM unexpected length i=</span><span class="si">%s</span><span class="s1">...&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal2</span>
                <span class="n">pack</span> <span class="o">=</span> <span class="n">struct2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                <span class="p">(</span><span class="n">soi</span><span class="p">,</span> <span class="n">xxb</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">,</span> <span class="n">i12</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">nsm</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span>
                 <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">,</span> <span class="n">e1</span><span class="p">,</span> <span class="n">e2</span><span class="p">,</span> <span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">)</span> <span class="o">=</span> <span class="n">pack</span>

                <span class="k">if</span> <span class="n">soi</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
                    <span class="n">so_str</span> <span class="o">=</span> <span class="s1">&#39;NO&#39;</span>
                <span class="k">elif</span> <span class="n">soi</span> <span class="o">==</span> <span class="mf">1.0</span><span class="p">:</span>
                    <span class="n">so_str</span> <span class="o">=</span> <span class="s1">&#39;YES&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">soi</span> <span class="o">&lt;</span> <span class="mf">0.</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;PBEAM pid=</span><span class="si">%s</span><span class="s1"> i=</span><span class="si">%s</span><span class="s1"> x/xb=</span><span class="si">%s</span><span class="s1"> soi=</span><span class="si">%s</span><span class="s1">; soi not in 0.0 or 1.0; assuming PBCOMP &amp; dropping&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">pid</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">xxb</span><span class="p">,</span> <span class="n">soi</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                        <span class="n">is_pbcomp</span> <span class="o">=</span> <span class="kc">True</span>

                    <span class="n">so_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">soi</span><span class="p">)</span>
                    <span class="c1">#msg = &#39;PBEAM pid=%s i=%s x/xb=%s soi=%s; soi not in 0.0 or 1.0&#39; % (</span>
                        <span class="c1">#pid, i, xxb, soi)</span>
                    <span class="c1">#raise NotImplementedError(msg)</span>

                <span class="c1">#if xxb != 0.0:</span>
                    <span class="c1">#msg = &#39;PBEAM pid=%s i=%s x/xb=%s soi=%s; xxb not in 0.0 or 1.0&#39; % (</span>
                        <span class="c1">#pid, i, xxb, soi)</span>
                    <span class="c1">#raise NotImplementedError(msg)</span>

                <span class="n">pack2</span> <span class="o">=</span> <span class="p">(</span><span class="n">so_str</span><span class="p">,</span> <span class="n">xxb</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">,</span> <span class="n">i12</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">nsm</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span>
                         <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">,</span> <span class="n">e1</span><span class="p">,</span> <span class="n">e2</span><span class="p">,</span> <span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">)</span>
                <span class="n">data_in</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pack2</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;     </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">pack</span><span class="p">))</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="s1">&#39;    i=</span><span class="si">%-2s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">i</span> <span class="o">+</span> <span class="s1">&#39; so=</span><span class="si">%s</span><span class="s1"> xxb=</span><span class="si">%.1f</span><span class="s1"> a=</span><span class="si">%g</span><span class="s1"> i1=</span><span class="si">%g</span><span class="s1"> i2=</span><span class="si">%g</span><span class="s1"> i12=</span><span class="si">%g</span><span class="s1"> j=</span><span class="si">%g</span><span class="s1"> nsm=</span><span class="si">%g</span><span class="s1"> &#39;</span>
                        <span class="s1">&#39;c=[</span><span class="si">%s</span><span class="s1">,</span><span class="si">%s</span><span class="s1">] d=[</span><span class="si">%s</span><span class="s1">,</span><span class="si">%s</span><span class="s1">] e=[</span><span class="si">%s</span><span class="s1">,</span><span class="si">%s</span><span class="s1">] f=[</span><span class="si">%s</span><span class="s1">,</span><span class="si">%s</span><span class="s1">]&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">pack2</span><span class="p">))</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="c1">#msg = (</span>
                    <span class="c1">#&#39;    i=%-2s&#39; % i + &#39; so=%s xxb=%.1f a=%g i1=%g i2=%g i12=%g j=%g nsm=%g &#39;</span>
                    <span class="c1">#&#39;c=[%s,%s] d=[%s,%s] e=[%s,%s] f=[%s,%s]&#39; % (tuple(pack2))</span>
                <span class="c1">#)</span>
                <span class="c1">#print(msg)</span>

            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal2</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span> <span class="o">!=</span> <span class="n">ntotal2</span><span class="p">:</span>
                <span class="n">endpack</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;PBEAM unexpected length 2...&#39;</span><span class="p">)</span>
            <span class="n">endpack</span> <span class="o">=</span> <span class="n">struct3</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal2</span>

            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">endpack</span><span class="p">)</span> <span class="o">==</span> <span class="mi">16</span><span class="p">,</span> <span class="n">endpack</span>
            <span class="c1">#(k1, k2, s1, s2, nsia, nsib, cwa, cwb, # 8</span>
             <span class="c1">#m1a, m2a, m1b, m2b, n1a, n2a, n1b, n2b) = endpack # 8 -&gt; 16</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;    k=[</span><span class="si">%s</span><span class="s1">,</span><span class="si">%s</span><span class="s1">] s=[</span><span class="si">%s</span><span class="s1">,</span><span class="si">%s</span><span class="s1">] nsi=[</span><span class="si">%s</span><span class="s1">,</span><span class="si">%s</span><span class="s1">] cw=[</span><span class="si">%s</span><span class="s1">,</span><span class="si">%s</span><span class="s1">] &#39;</span>
                                        <span class="s1">&#39;ma=[</span><span class="si">%s</span><span class="s1">,</span><span class="si">%s</span><span class="s1">] mb=[</span><span class="si">%s</span><span class="s1">,</span><span class="si">%s</span><span class="s1">] na=[</span><span class="si">%s</span><span class="s1">,</span><span class="si">%s</span><span class="s1">] nb=[</span><span class="si">%s</span><span class="s1">,</span><span class="si">%s</span><span class="s1">]&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                            <span class="nb">tuple</span><span class="p">(</span><span class="n">endpack</span><span class="p">)))</span>
            <span class="n">data_in</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">endpack</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">is_pbcomp</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">pid</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="n">pid</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">&#39;PBCOMP&#39;</span><span class="p">:</span>
                    <span class="k">continue</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PBEAM</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">data_in</span><span class="p">)</span>
            <span class="n">nproperties</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_op2_property</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">nproperties</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PBEAM&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nproperties</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_pbeaml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        PBEAML(9202,92,53)</span>

<span class="sd">        Word Name Type Description</span>
<span class="sd">        1 PID        I   Property identification number</span>
<span class="sd">        2 MID        I   Material identification number</span>
<span class="sd">        3 GROUP(2) CHAR4 Cross-section group name</span>
<span class="sd">        5 TYPE(2)  CHAR4 Cross section type</span>
<span class="sd">        7 VALUE      RS  Cross section values for XXB, SO, NSM, and dimensions</span>
<span class="sd">        Word 7 repeats until (-1) occurs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#strs = numpy.core.defchararray.reshapesplit(data, sep=&quot;,&quot;)</span>
        <span class="c1">#ints = np.frombuffer(data[n:], self._uendian + &#39;i&#39;).copy()</span>
        <span class="c1">#floats = np.frombuffer(data[n:], self._uendian + &#39;f&#39;).copy()</span>
        <span class="n">ints</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:],</span> <span class="bp">self</span><span class="o">.</span><span class="n">idtype8</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">floats</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:],</span> <span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">iminus1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">ints</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">istart</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">iminus1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">iend</span> <span class="o">=</span> <span class="n">iminus1</span>

        <span class="n">size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>
        <span class="n">nproperties</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">istart</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i 8s 8s&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2q 16s 16s&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">unused_i</span><span class="p">,</span> <span class="p">(</span><span class="n">istarti</span><span class="p">,</span> <span class="n">iendi</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">istart</span><span class="p">,</span> <span class="n">iend</span><span class="p">)):</span>
            <span class="n">idata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="o">+</span><span class="n">istarti</span><span class="o">*</span><span class="n">size</span> <span class="p">:</span> <span class="n">n</span><span class="o">+</span><span class="p">(</span><span class="n">istarti</span><span class="o">+</span><span class="mi">6</span><span class="p">)</span><span class="o">*</span><span class="n">size</span><span class="p">]</span>
            <span class="n">pid</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">beam_type</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">idata</span><span class="p">)</span>
            <span class="n">group</span> <span class="o">=</span> <span class="n">group</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">beam_type</span> <span class="o">=</span> <span class="n">beam_type</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">fvalues</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[</span><span class="n">istarti</span><span class="o">+</span><span class="mi">6</span><span class="p">:</span> <span class="n">iendi</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;     </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">fvalues</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;pid=</span><span class="si">{</span><span class="n">pid</span><span class="si">:</span><span class="s1">d</span><span class="si">}</span><span class="s1"> mid=</span><span class="si">{</span><span class="n">mid</span><span class="si">:</span><span class="s1">d</span><span class="si">}</span><span class="s1"> group=</span><span class="si">{</span><span class="n">group</span><span class="si">}</span><span class="s1"> beam_type=</span><span class="si">{</span><span class="n">beam_type</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">fvalues</span><span class="p">)</span>
            <span class="c1">#self.log.debug(f&#39;pid={pid:d} mid={mid:d} group={group} beam_type={beam_type}&#39;)</span>
            <span class="n">data_in</span> <span class="o">=</span> <span class="p">[</span><span class="n">pid</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">beam_type</span><span class="p">,</span> <span class="n">fvalues</span><span class="p">]</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PBEAML</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">data_in</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pid</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">:</span>
                <span class="c1"># this is a fake PSHELL</span>
                <span class="n">propi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="n">pid</span><span class="p">]</span>
                <span class="k">assert</span> <span class="n">propi</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;PBEAM&#39;</span><span class="p">],</span> <span class="n">propi</span><span class="o">.</span><span class="n">get_stats</span><span class="p">()</span>
                <span class="n">nproperties</span> <span class="o">-=</span> <span class="mi">1</span>
                <span class="k">continue</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_op2_property</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">nproperties</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PBEAML&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nproperties</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_read_pbend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;PBEND&quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_dual_card</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pbend_nx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pbend_msc</span><span class="p">,</span>
                                 <span class="s1">&#39;PBEND&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_property_object</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_pbend_msc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        PBEND</span>

<span class="sd">        1 PID     I  Property identification number</span>
<span class="sd">        2 MID     I  Material identification number</span>
<span class="sd">        3 A       RS Area</span>
<span class="sd">        4 I1      RS Area moment of inertia in plane 1</span>
<span class="sd">        5 I2      RS Area moment of inertia in plane 2</span>
<span class="sd">        6 J       RS Torsional constant</span>
<span class="sd">        7 FSI     I  flexibility and stress intensification factors</span>
<span class="sd">        8 RM      RS Mean cross-sectional radius of the curved pipe</span>
<span class="sd">        9 T       RS Wall thickness of the curved pipe</span>
<span class="sd">        10 P      RS Internal pressure</span>
<span class="sd">        11 RB     RS Bend radius of the line of centroids</span>
<span class="sd">        12 THETAB RS Arc angle of element</span>
<span class="sd">        13 C1     RS Stress recovery location at point C in element y-axis</span>
<span class="sd">        14 C2     RS Stress recovery location at point C in element z-axis</span>
<span class="sd">        15 D1     RS Stress recovery location at point D in element y-axis</span>
<span class="sd">        16 D2     RS Stress recovery location at point D in element z-axis</span>
<span class="sd">        17 E1     RS Stress recovery location at point E in element y-axis</span>
<span class="sd">        18 E2     RS Stress recovery location at point E in element z-axis</span>
<span class="sd">        19 F1     RS Stress recovery location at point F in element y-axis</span>
<span class="sd">        20 F2     RS Stress recovery location at point F in element z-axis</span>
<span class="sd">        21 K1     RS Area factor for shear in plane 1</span>
<span class="sd">        22 K2     RS Area factor for shear in plane 2</span>
<span class="sd">        23 NSM    RS Nonstructural mass per unit length</span>
<span class="sd">        24 RC     RS Radial offset of the geometric centroid</span>
<span class="sd">        25 ZC     RS Offset of the geometric centroid</span>
<span class="sd">        26 DELTAN  I Radial offset of the neutral axis from the geometric</span>
<span class="sd">                     centroid</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">104</span>  <span class="c1"># 26*4</span>
        <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i 4f i 18f f&#39;</span><span class="p">)</span>  <span class="c1"># delta_n is a float, not an integer</span>
        <span class="n">nproperties</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">assert</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">nproperties</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;table=</span><span class="si">%r</span><span class="s1"> len=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span>
        <span class="n">properties</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nproperties</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">104</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">area</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">fsi</span><span class="p">,</span> <span class="n">rm</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">rb</span><span class="p">,</span> <span class="n">theta_b</span><span class="p">,</span>
             <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">,</span> <span class="n">e1</span><span class="p">,</span> <span class="n">e2</span><span class="p">,</span> <span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">,</span> <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">nsm</span><span class="p">,</span> <span class="n">rc</span><span class="p">,</span> <span class="n">zc</span><span class="p">,</span>
             <span class="n">delta_n</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="n">beam_type</span> <span class="o">=</span> <span class="n">fsi</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">area</span><span class="p">,</span> <span class="n">rm</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">):</span>
                <span class="n">area</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">rm</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">t</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">delta_n</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">beam_type</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="k">if</span> <span class="n">delta_n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1">#: Radial offset of the neutral axis from the geometric</span>
                <span class="c1">#: centroid, positive is toward the center of curvature</span>
                <span class="n">delta_n</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">pbend</span> <span class="o">=</span> <span class="n">PBEND</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">beam_type</span><span class="p">,</span> <span class="n">area</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span>
                          <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">,</span> <span class="n">e1</span><span class="p">,</span> <span class="n">e2</span><span class="p">,</span> <span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">,</span> <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span>
                          <span class="n">nsm</span><span class="p">,</span> <span class="n">rc</span><span class="p">,</span> <span class="n">zc</span><span class="p">,</span> <span class="n">delta_n</span><span class="p">,</span> <span class="n">fsi</span><span class="p">,</span> <span class="n">rm</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">rb</span><span class="p">,</span> <span class="n">theta_b</span><span class="p">)</span>
            <span class="c1">#print(pbend)</span>
            <span class="n">pbend</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>

            <span class="n">properties</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pbend</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">properties</span>

    <span class="k">def</span> <span class="nf">_read_pbend_nx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        PBEND</span>

<span class="sd">        1 PID     I  Property identification number</span>
<span class="sd">        2 MID     I  Material identification number</span>
<span class="sd">        3 A       RS Area</span>
<span class="sd">        4 I1      RS Area moment of inertia in plane 1</span>
<span class="sd">        5 I2      RS Area moment of inertia in plane 2</span>
<span class="sd">        6 J       RS Torsional constant</span>
<span class="sd">        7 FSI     I  Flexibility and stress intensification factors</span>
<span class="sd">        8 RM      RS Mean cross-sectional radius of the curved pipe</span>
<span class="sd">        9 T       RS Wall thickness of the curved pipe</span>
<span class="sd">        10 P      RS Internal pressure</span>
<span class="sd">        11 RB     RS Bend radius of the line of centroids</span>
<span class="sd">        12 THETAB RS Arc angle of element</span>
<span class="sd">        13 C1     RS Stress recovery location at point C in element y-axis</span>
<span class="sd">        14 C2     RS Stress recovery location at point C in element z-axis</span>
<span class="sd">        15 D1     RS Stress recovery location at point D in element y-axis</span>
<span class="sd">        16 D2     RS Stress recovery location at point D in element z-axis</span>
<span class="sd">        17 E1     RS Stress recovery location at point E in element y-axis</span>
<span class="sd">        18 E2     RS Stress recovery location at point E in element z-axis</span>
<span class="sd">        19 F1     RS Stress recovery location at point F in element y-axis</span>
<span class="sd">        20 F2     RS Stress recovery location at point F in element z-axis</span>
<span class="sd">        21 K1     RS Area factor for shear in plane 1</span>
<span class="sd">        22 K2     RS Area factor for shear in plane 2</span>
<span class="sd">        23 NSM    RS Nonstructural mass per unit length</span>
<span class="sd">        24 RC     RS Radial offset of the geometric centroid</span>
<span class="sd">        25 ZC     RS Offset of the geometric centroid</span>
<span class="sd">        26 DELTAN RS Radial offset of the neutral axis from the geometric</span>
<span class="sd">                     centroid</span>
<span class="sd">        27 SACL   RS Miter spacing at center line.</span>
<span class="sd">        28 ALPHA  RS One-half angle between the adjacent miter axis</span>
<span class="sd">                     (Degrees).</span>
<span class="sd">        29 FLANGE I  For FSI=5, defines the number of flanges attached.</span>
<span class="sd">        30 KX     RS For FSI=6, the user defined flexibility factor for the</span>
<span class="sd">                  torsional moment.</span>
<span class="sd">        31 KY     RS For FSI=6, the user defined flexibility factor for the</span>
<span class="sd">                  out-of-plane bending moment.</span>
<span class="sd">        32 KZ     RS For FSI=6, the user defined flexbility factor for the</span>
<span class="sd">                  in-plane bending moment.</span>
<span class="sd">        33 Not used</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#self.log.info(&#39;skipping PBEND in EPT&#39;)</span>
        <span class="c1">#return len(data)</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">132</span>  <span class="c1"># 33*4</span>
        <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i 4f i 21f i 4f&#39;</span><span class="p">)</span>
        <span class="n">nproperties</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">assert</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">nproperties</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;table=</span><span class="si">%r</span><span class="s1"> len=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span>
        <span class="n">properties</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nproperties</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">132</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">area</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">fsi</span><span class="p">,</span> <span class="n">rm</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">rb</span><span class="p">,</span> <span class="n">theta_b</span><span class="p">,</span>
             <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">,</span> <span class="n">e1</span><span class="p">,</span> <span class="n">e2</span><span class="p">,</span> <span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">,</span> <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">nsm</span><span class="p">,</span> <span class="n">rc</span><span class="p">,</span> <span class="n">zc</span><span class="p">,</span>
             <span class="n">delta_n</span><span class="p">,</span> <span class="n">unused_sacl</span><span class="p">,</span> <span class="n">unused_alpha</span><span class="p">,</span> <span class="n">unused_flange</span><span class="p">,</span>
             <span class="n">unused_kx</span><span class="p">,</span> <span class="n">unused_ky</span><span class="p">,</span> <span class="n">unused_kz</span><span class="p">,</span> <span class="n">unused_junk</span><span class="p">,)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="n">beam_type</span> <span class="o">=</span> <span class="n">fsi</span>

            <span class="n">pbend</span> <span class="o">=</span> <span class="n">PBEND</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">beam_type</span><span class="p">,</span> <span class="n">area</span><span class="p">,</span> <span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span>
                          <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">,</span> <span class="n">e1</span><span class="p">,</span> <span class="n">e2</span><span class="p">,</span> <span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">,</span> <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span>
                          <span class="n">nsm</span><span class="p">,</span> <span class="n">rc</span><span class="p">,</span> <span class="n">zc</span><span class="p">,</span> <span class="n">delta_n</span><span class="p">,</span> <span class="n">fsi</span><span class="p">,</span> <span class="n">rm</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">rb</span><span class="p">,</span> <span class="n">theta_b</span><span class="p">)</span>
            <span class="n">pbend</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>
            <span class="n">properties</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pbend</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">properties</span>

<span class="c1"># PBMSECT</span>
<span class="c1"># PBRSECT</span>

    <span class="k">def</span> <span class="nf">_read_pbush</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The PBUSH card is different between MSC and NX Nastran.</span>

<span class="sd">        DMAP NX 11</span>
<span class="sd">        ----------</span>
<span class="sd">        NX has 23 fields in NX 11 (supported)</span>
<span class="sd">        NX has 18 fields in the pre-2001 format (supported)</span>

<span class="sd">        DMAP MSC 2005</span>
<span class="sd">        -------------</span>
<span class="sd">        MSC has 23 fields in 2005 (supported)</span>
<span class="sd">        MSC has 18 fields in the pre-2001 format (supported)</span>

<span class="sd">        DMAP MSC 2016</span>
<span class="sd">        -------------</span>
<span class="sd">        TODO: MSC has 24 fields in 2016.1 (not supported)</span>
<span class="sd">        MSC has 18 fields in the pre-2001 format (supported)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># we&#39;re listing nx twice because NX/MSC used to be consistent</span>
        <span class="c1"># the new form for MSC is not supported</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_dual_card</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pbush_nx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pbush_msc</span><span class="p">,</span>
                                 <span class="s1">&#39;PBUSH&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_op2_property</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_pbush_nx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;PBUSH(1402,14,37) - 18 fields&quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">72</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i17f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="n">ndata</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">assert</span> <span class="n">nentries</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;table=</span><span class="si">{self.table_name}</span><span class="s1"> len=</span><span class="si">{ndata}</span><span class="s1">&#39;</span>
        <span class="k">assert</span> <span class="n">ndata</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;table=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="si">}</span><span class="s1"> leftover = </span><span class="si">{</span><span class="n">ndata</span><span class="si">}</span><span class="s1"> % </span><span class="si">{</span><span class="n">ntotal</span><span class="si">}</span><span class="s1"> = </span><span class="si">{</span><span class="n">ndata</span> <span class="o">%</span> <span class="n">ntotal</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="n">props</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">k3</span><span class="p">,</span> <span class="n">k4</span><span class="p">,</span> <span class="n">k5</span><span class="p">,</span> <span class="n">k6</span><span class="p">,</span> <span class="n">b1</span><span class="p">,</span> <span class="n">b2</span><span class="p">,</span> <span class="n">b3</span><span class="p">,</span> <span class="n">b4</span><span class="p">,</span> <span class="n">b5</span><span class="p">,</span> <span class="n">b6</span><span class="p">,</span>
             <span class="n">g1</span><span class="p">,</span> <span class="n">sa</span><span class="p">,</span> <span class="n">st</span><span class="p">,</span> <span class="n">ea</span><span class="p">,</span> <span class="n">et</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="c1">#self.log.debug(out)</span>
            <span class="n">g2</span> <span class="o">=</span> <span class="n">g3</span> <span class="o">=</span> <span class="n">g4</span> <span class="o">=</span> <span class="n">g5</span> <span class="o">=</span> <span class="n">g6</span> <span class="o">=</span> <span class="n">g1</span>
            <span class="n">data_in</span> <span class="o">=</span> <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">k3</span><span class="p">,</span> <span class="n">k4</span><span class="p">,</span> <span class="n">k5</span><span class="p">,</span> <span class="n">k6</span><span class="p">,</span> <span class="n">b1</span><span class="p">,</span> <span class="n">b2</span><span class="p">,</span> <span class="n">b3</span><span class="p">,</span> <span class="n">b4</span><span class="p">,</span> <span class="n">b5</span><span class="p">,</span> <span class="n">b6</span><span class="p">,</span>
                       <span class="n">g1</span><span class="p">,</span> <span class="n">g2</span><span class="p">,</span> <span class="n">g3</span><span class="p">,</span> <span class="n">g4</span><span class="p">,</span> <span class="n">g5</span><span class="p">,</span> <span class="n">g6</span><span class="p">,</span> <span class="n">sa</span><span class="p">,</span> <span class="n">st</span><span class="p">,</span> <span class="n">ea</span><span class="p">,</span> <span class="n">et</span><span class="p">)</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PBUSH</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">data_in</span><span class="p">)</span>
            <span class="n">props</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">props</span>

    <span class="k">def</span> <span class="nf">_read_pbush_msc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;PBUSH(1402,14,37) - 23 fields&quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">92</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 23*4</span>
        <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i22f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>

        <span class="n">ndata</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">assert</span> <span class="n">nentries</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;table=</span><span class="si">{self.table_name}</span><span class="s1"> len=</span><span class="si">{ndata}</span><span class="s1">&#39;</span>
        <span class="k">assert</span> <span class="n">ndata</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;table=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="si">}</span><span class="s1"> leftover = </span><span class="si">{</span><span class="n">ndata</span><span class="si">}</span><span class="s1"> % </span><span class="si">{</span><span class="n">ntotal</span><span class="si">}</span><span class="s1"> = </span><span class="si">{</span><span class="n">ndata</span> <span class="o">%</span> <span class="n">ntotal</span><span class="si">}</span><span class="s1">&#39;</span>

        <span class="n">props</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="c1">#(pid, k1, k2, k3, k4, k5, k6, b1, b2, b3, b4, b5, b6,</span>
             <span class="c1">#g1, g2, g3, g4, g5, g6, sa, st, ea, et) = out</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PBUSH</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
            <span class="n">props</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">props</span>

    <span class="k">def</span> <span class="nf">_read_pbush1d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Record 18 -- PBUSH1D(3101,31,219)</span>

<span class="sd">        1  PID    I  Property identification number</span>
<span class="sd">        2  K      RS Stiffness</span>
<span class="sd">        3  C      RS Viscous Damping</span>
<span class="sd">        4  M      RS Mass</span>
<span class="sd">        5  ALPHA  RS Temperature coefficient</span>
<span class="sd">        6  SA     RS Stress recovery coefficient</span>
<span class="sd">        7  EA/SE  RS Strain recovery coefficient</span>

<span class="sd">        8  TYPEA  I  Shock data type:0=Null, 1=Table, 2=Equation</span>
<span class="sd">        9  CVT    RS Coefficient of translation velocity tension</span>
<span class="sd">        10 CVC    RS Coefficient of translation velocity compression</span>
<span class="sd">        11 EXPVT  RS Exponent of velocity tension</span>
<span class="sd">        12 EXPVC  RS Exponent of velocity compression</span>
<span class="sd">        13 IDTSU  I  TABLEDi or DEQATN entry identification number for scale factor vs displacement</span>
<span class="sd">        14 IDTCU  I  DEQATN entry identification number for scale factor vs displacement</span>
<span class="sd">        15 IDTSUD I  DEQATN entry identification number for derivative tension</span>
<span class="sd">        16 IDCSUD I  DEQATN entry identification number for derivative compression</span>

<span class="sd">        17 TYPES  I  Spring data type: 0=Null, 1=Table, 2=Equation</span>
<span class="sd">        18 IDTS   I  TABLEDi or DEQATN entry identification number for tension compression</span>
<span class="sd">        19 IDCS   I  DEQATN entry identification number for compression</span>
<span class="sd">        20 IDTDU  I  DEQATN entry identification number for scale factor vs displacement</span>
<span class="sd">        21 IDCDU  I  DEQATN entry identification number for force vs displacement</span>

<span class="sd">        22 TYPED  I  Damper data type: 0=Null, 1=Table, 2=Equation</span>
<span class="sd">        23 IDTD   I  TABLEDi or DEQATN entry identification number for tension compression</span>
<span class="sd">        24 IDCD   I  DEQATN entry identification number for compression</span>
<span class="sd">        25 IDTDV  I  DEQATN entry identification number for scale factor versus velocity</span>
<span class="sd">        26 IDCDV  I  DEQATN entry identification number for force versus velocity</span>

<span class="sd">        27 TYPEG  I  General data type: 0=Null, 1=Table, 2=Equation</span>
<span class="sd">        28 IDTG   I  TABLEDi or DEQATN entry identification number for tension compression</span>
<span class="sd">        29 IDCG   I  DEQATN entry identification number for compression</span>
<span class="sd">        30 IDTDU  I  DEQATN entry identification number for scale factor versus displacement</span>
<span class="sd">        31 IDCDU  I  DEQATN entry identification number for force versus displacement</span>
<span class="sd">        32 IDTDV  I  DEQATN entry identification number for scale factor versus velocity</span>
<span class="sd">        33 IDCDV  I  DEQATN entry identification number for force vs velocity</span>

<span class="sd">        34 TYPEF  I  Fuse data type: 0=Null, 1=Table</span>
<span class="sd">        35 IDTF   I  TABLEDi entry identification number for tension</span>
<span class="sd">        36 IDCF   I  TABLEDi entry identification number for compression</span>

<span class="sd">        37 UT     RS Ultimate tension</span>
<span class="sd">        38 UC     RS Ultimate compression</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">type_map</span> <span class="o">=</span> <span class="p">{</span>
            <span class="mi">0</span> <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># NULL</span>
            <span class="mi">1</span> <span class="p">:</span> <span class="s1">&#39;EQUAT&#39;</span><span class="p">,</span>
            <span class="mi">2</span> <span class="p">:</span> <span class="s1">&#39;TABLE&#39;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">152</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>  <span class="c1"># 38*4</span>
        <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i 6f i 4f 24i 2f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">unused_alpha</span><span class="p">,</span> <span class="n">sa</span><span class="p">,</span> <span class="n">se</span><span class="p">,</span>
             <span class="n">typea</span><span class="p">,</span> <span class="n">cvt</span><span class="p">,</span> <span class="n">cvc</span><span class="p">,</span> <span class="n">expvt</span><span class="p">,</span> <span class="n">expvc</span><span class="p">,</span> <span class="n">idtsu</span><span class="p">,</span> <span class="n">idtcu</span><span class="p">,</span> <span class="n">idtsud</span><span class="p">,</span> <span class="n">idcsud</span><span class="p">,</span>
             <span class="n">types</span><span class="p">,</span> <span class="n">idts</span><span class="p">,</span> <span class="n">idcs</span><span class="p">,</span> <span class="n">idtdus</span><span class="p">,</span> <span class="n">idcdus</span><span class="p">,</span>
             <span class="n">typed</span><span class="p">,</span> <span class="n">idtd</span><span class="p">,</span> <span class="n">idcd</span><span class="p">,</span> <span class="n">idtdvd</span><span class="p">,</span> <span class="n">idcdvd</span><span class="p">,</span>
             <span class="n">typeg</span><span class="p">,</span> <span class="n">idtg</span><span class="p">,</span> <span class="n">idcg</span><span class="p">,</span> <span class="n">idtdug</span><span class="p">,</span> <span class="n">idcdug</span><span class="p">,</span> <span class="n">idtdvg</span><span class="p">,</span> <span class="n">idcdvg</span><span class="p">,</span>
             <span class="n">typef</span><span class="p">,</span> <span class="n">idtf</span><span class="p">,</span> <span class="n">idcf</span><span class="p">,</span>
             <span class="n">unused_ut</span><span class="p">,</span> <span class="n">unused_uc</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="c1">#  test_op2_other_05</span>
            <span class="c1">#pbush1d, 204, 1.e+5, 1000., , , , , , +pb1</span>
            <span class="c1">#+pb1, spring, table, 205, , , , , , +pb2</span>
            <span class="c1">#+pb2, damper, table, 206</span>
            <span class="c1">#pid=204 k=100000.0 c=1000.0 m=0.0 sa=nan se=nan</span>


            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;PBUSH1D pid=</span><span class="si">{</span><span class="n">pid</span><span class="si">}</span><span class="s1"> k=</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s1"> c=</span><span class="si">{</span><span class="n">c</span><span class="si">}</span><span class="s1"> m=</span><span class="si">{</span><span class="n">m</span><span class="si">}</span><span class="s1"> sa=</span><span class="si">{</span><span class="n">sa</span><span class="si">}</span><span class="s1"> se=</span><span class="si">{</span><span class="n">se</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="n">optional_vars</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">typea_str</span> <span class="o">=</span> <span class="n">type_map</span><span class="p">[</span><span class="n">typea</span><span class="p">]</span>
            <span class="n">types_str</span> <span class="o">=</span> <span class="n">type_map</span><span class="p">[</span><span class="n">types</span><span class="p">]</span>
            <span class="n">typed_str</span> <span class="o">=</span> <span class="n">type_map</span><span class="p">[</span><span class="n">typed</span><span class="p">]</span>
            <span class="n">unused_typeg_str</span> <span class="o">=</span> <span class="n">type_map</span><span class="p">[</span><span class="n">typeg</span><span class="p">]</span>
            <span class="n">unused_typef_str</span> <span class="o">=</span> <span class="n">type_map</span><span class="p">[</span><span class="n">typef</span><span class="p">]</span>

            <span class="k">if</span> <span class="nb">min</span><span class="p">([</span><span class="n">typea</span><span class="p">,</span> <span class="n">types</span><span class="p">,</span> <span class="n">typed</span><span class="p">,</span> <span class="n">typeg</span><span class="p">,</span> <span class="n">typef</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;typea=</span><span class="si">{</span><span class="n">typea</span><span class="si">}</span><span class="s1"> types=</span><span class="si">{</span><span class="n">types</span><span class="si">}</span><span class="s1"> typed=</span><span class="si">{</span><span class="n">typed</span><span class="si">}</span><span class="s1"> typeg=</span><span class="si">{</span><span class="n">typeg</span><span class="si">}</span><span class="s1"> typef=</span><span class="si">{</span><span class="n">typef</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">typea</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span>  <span class="c1"># SHOCKA?</span>
                <span class="c1">#pbush1d, 204, 1.e+5, 1000., , , , , , +pb4</span>
                <span class="c1">#+pb4, shocka, table, 1000., , 1., , 214, , +pb41</span>
                <span class="c1">#+pb41, spring, table, 205</span>

                <span class="n">idts</span> <span class="o">=</span> <span class="n">idtsu</span> <span class="k">if</span> <span class="n">typea_str</span> <span class="o">==</span> <span class="s1">&#39;TABLE&#39;</span> <span class="k">else</span> <span class="mi">0</span>
                <span class="n">idets</span> <span class="o">=</span> <span class="n">idtsu</span> <span class="k">if</span> <span class="n">typea_str</span> <span class="o">==</span> <span class="s1">&#39;EQUAT&#39;</span> <span class="k">else</span> <span class="mi">0</span>
                <span class="n">optional_vars</span><span class="p">[</span><span class="s1">&#39;SHOCKA&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">typea_str</span><span class="p">,</span> <span class="n">cvt</span><span class="p">,</span> <span class="n">cvc</span><span class="p">,</span> <span class="n">expvt</span><span class="p">,</span> <span class="n">expvc</span><span class="p">,</span>
                                           <span class="n">idts</span><span class="p">,</span> <span class="n">idets</span><span class="p">,</span> <span class="n">idtcu</span><span class="p">,</span> <span class="n">idtsud</span><span class="p">,</span> <span class="n">idcsud</span><span class="p">]</span>
                <span class="c1">#(shock_type, shock_cvt, shock_cvc, shock_exp_vt, shock_exp_vc,</span>
                 <span class="c1">#shock_idts, shock_idets, shock_idecs, shock_idetsd, shock_idecsd</span>
                <span class="c1">#)</span>
                <span class="c1">#print(&#39;shock_idts, shock_idets&#39;, typea_str, idtsu, idtsu)</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s1">&#39;  SHOCKA type=</span><span class="si">{</span><span class="n">typea</span><span class="si">}</span><span class="s1"> cvt=</span><span class="si">{</span><span class="n">cvt</span><span class="si">}</span><span class="s1"> cvc=</span><span class="si">{</span><span class="n">cvc</span><span class="si">}</span><span class="s1"> expvt=</span><span class="si">{</span><span class="n">expvt</span><span class="si">}</span><span class="s1"> expvc=</span><span class="si">{</span><span class="n">expvc</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="sa">f</span><span class="s1">&#39;    idtsu=</span><span class="si">{</span><span class="n">idtsu</span><span class="si">}</span><span class="s1"> (idts=</span><span class="si">{</span><span class="n">idts</span><span class="si">}</span><span class="s1"> idets=</span><span class="si">{</span><span class="n">idets</span><span class="si">}</span><span class="s1">) idtcu=</span><span class="si">{</span><span class="n">idtcu</span><span class="si">}</span><span class="s1"> idtsud=</span><span class="si">{</span><span class="n">idtsud</span><span class="si">}</span><span class="s1"> idcsud=</span><span class="si">{</span><span class="n">idcsud</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">types</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span> <span class="c1"># SPRING: Spring data type: 0=Null, 1=Table, 2=Equation</span>
                <span class="c1">#(spring_type, spring_idt, spring_idc, spring_idtdu, spring_idcdu) = values</span>
                <span class="c1"># SPRING, TYPE IDT IDC IDTDU IDCDU</span>
                <span class="n">optional_vars</span><span class="p">[</span><span class="s1">&#39;SPRING&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">types_str</span><span class="p">,</span> <span class="n">idts</span><span class="p">,</span> <span class="n">idcs</span><span class="p">,</span> <span class="n">idtdus</span><span class="p">,</span> <span class="n">idcdus</span><span class="p">]</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;  SPRING type=</span><span class="si">{</span><span class="n">types</span><span class="si">}</span><span class="s1"> idt=</span><span class="si">{</span><span class="n">idts</span><span class="si">}</span><span class="s1"> idc=</span><span class="si">{</span><span class="n">idcs</span><span class="si">}</span><span class="s1"> idtdu=</span><span class="si">{</span><span class="n">idtdus</span><span class="si">}</span><span class="s1"> idcdu=</span><span class="si">{</span><span class="n">idcdus</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="k">if</span> <span class="n">typed</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span> <span class="c1"># Damper data type: 0=Null, 1=Table, 2=Equation</span>
                <span class="n">optional_vars</span><span class="p">[</span><span class="s1">&#39;DAMPER&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">typed_str</span><span class="p">,</span> <span class="n">idtd</span><span class="p">,</span> <span class="n">idcd</span><span class="p">,</span> <span class="n">idtdvd</span><span class="p">,</span> <span class="n">idcdvd</span><span class="p">]</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;  DAMPER type=</span><span class="si">{</span><span class="n">typed</span><span class="si">}</span><span class="s1"> idt=</span><span class="si">{</span><span class="n">idtd</span><span class="si">}</span><span class="s1"> idc=</span><span class="si">{</span><span class="n">idtd</span><span class="si">}</span><span class="s1"> idtdv=</span><span class="si">{</span><span class="n">idtdvd</span><span class="si">}</span><span class="s1"> idcdv=</span><span class="si">{</span><span class="n">idcdvd</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="k">if</span> <span class="n">typeg</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span> <span class="c1"># general, GENER?: 0=Null, 1=Table 2=Equation</span>
                <span class="c1"># C:\NASA\m4\formats\git\examples\move_tpl\ar29scbt.bdf</span>
                <span class="c1">#pbush1d, 206, 1.e+3, 10., , , , , , +pb6</span>
                <span class="c1">#+pb6, gener, equat, 315, , 3015, , 3016</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;  GENER  type=</span><span class="si">{</span><span class="n">typeg</span><span class="si">}</span><span class="s1"> idt=</span><span class="si">{</span><span class="n">idtg</span><span class="si">}</span><span class="s1"> idc=</span><span class="si">{</span><span class="n">idcg</span><span class="si">}</span><span class="s1"> idtdu=</span><span class="si">{</span><span class="n">idtdug</span><span class="si">}</span><span class="s1"> idcdu=</span><span class="si">{</span><span class="n">idcdug</span><span class="si">}</span><span class="s1"> idtdv=</span><span class="si">{</span><span class="n">idtdvg</span><span class="si">}</span><span class="s1"> idcdv=</span><span class="si">{</span><span class="n">idcdvg</span><span class="si">}</span><span class="s1">&#39;</span>
                <span class="n">optional_vars</span><span class="p">[</span><span class="s1">&#39;GENER&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">idtg</span><span class="p">,</span> <span class="n">idcg</span><span class="p">,</span> <span class="n">idtdug</span><span class="p">,</span> <span class="n">idcdug</span><span class="p">,</span> <span class="n">idtdvg</span><span class="p">,</span> <span class="n">idcdvg</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">typef</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span> <span class="c1"># Fuse data type: 0=Null, 1=Table</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;typef=</span><span class="si">{</span><span class="n">typef</span><span class="si">}</span><span class="s1"> idtf=</span><span class="si">{</span><span class="n">idtf</span><span class="si">}</span><span class="s1"> idcf=</span><span class="si">{</span><span class="n">idcf</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_pbush1d</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">k</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">m</span><span class="o">=</span><span class="n">m</span><span class="p">,</span> <span class="n">sa</span><span class="o">=</span><span class="n">sa</span><span class="p">,</span> <span class="n">se</span><span class="o">=</span><span class="n">se</span><span class="p">,</span>
                             <span class="n">optional_vars</span><span class="o">=</span><span class="n">optional_vars</span><span class="p">,)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PBUSH1D&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nentries</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_pbusht</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;reads the PBUSHT&quot;&quot;&quot;</span>
        <span class="n">n</span><span class="p">,</span> <span class="n">props</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pbusht_nx</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">props</span><span class="p">:</span>
            <span class="c1">#print(prop)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_pbusht_object</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_pbusht_nx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        NX 12 / MSC 2005</span>
<span class="sd">        Word Name Type Description</span>
<span class="sd">        1 PID       I Property identification number</span>
<span class="sd">        2 TKID(6)   I TABLEDi entry identification numbers for stiffness</span>
<span class="sd">        8 TBID(6)   I TABLEDi entry identification numbers for viscous damping</span>
<span class="sd">        14 TGEID(6) I TABLEDi entry identification number for structural damping</span>
<span class="sd">        20 TKNID(6) I TABLEDi entry identification numbers for force versus deflection</span>

<span class="sd">        old style</span>
<span class="sd">        Word Name Type Description</span>
<span class="sd">        1 PID       I Property identification number</span>
<span class="sd">        2 TKID(6)   I TABLEDi entry identification numbers for stiffness</span>
<span class="sd">        8 TBID(6)   I TABLEDi entry identification numbers for viscous damping</span>
<span class="sd">        14 TGEID    I TABLEDi entry identification number for structural damping</span>
<span class="sd">        15 TKNID(6) I TABLEDi entry IDs for force versus deflection</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#self.show_data(data[12:])</span>
        <span class="n">ndata</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>

        <span class="k">if</span> <span class="n">ndata</span> <span class="o">%</span> <span class="mi">100</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">ndata</span> <span class="o">%</span> <span class="mi">80</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;skipping PBUSHT in EPT because nfields=</span><span class="si">{</span><span class="n">ndata</span><span class="o">//</span><span class="mi">4</span><span class="si">}</span><span class="s2">, which is &quot;</span>
                             <span class="s1">&#39;nproperties*25 or nproperties*20&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">ndata</span> <span class="o">%</span> <span class="mi">100</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">props</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pbusht_100</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">ndata</span> <span class="o">%</span> <span class="mi">80</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">props</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pbusht_80</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">props</span>

    <span class="k">def</span> <span class="nf">_read_pbusht_80</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">80</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;20i&#39;</span><span class="p">)</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">assert</span> <span class="n">nentries</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;table=</span><span class="si">%r</span><span class="s1"> len=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span>

        <span class="n">props</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="c1">#(pid,</span>
             <span class="c1">#k1, k2, k3, k4, k5, k6,</span>
             <span class="c1">#b1, b2, b3, b4, b5, b6,</span>
             <span class="c1">#g1, sa, st, ea, et) = out</span>
            <span class="p">(</span><span class="n">pid</span><span class="p">,</span>
             <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">k3</span><span class="p">,</span> <span class="n">k4</span><span class="p">,</span> <span class="n">k5</span><span class="p">,</span> <span class="n">k6</span><span class="p">,</span>
             <span class="n">b1</span><span class="p">,</span> <span class="n">b2</span><span class="p">,</span> <span class="n">b3</span><span class="p">,</span> <span class="n">b4</span><span class="p">,</span> <span class="n">b5</span><span class="p">,</span> <span class="n">b6</span><span class="p">,</span>
             <span class="n">g1</span><span class="p">,</span>
             <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n5</span><span class="p">,</span> <span class="n">n6</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="n">g2</span> <span class="o">=</span> <span class="n">g3</span> <span class="o">=</span> <span class="n">g4</span> <span class="o">=</span> <span class="n">g5</span> <span class="o">=</span> <span class="n">g6</span> <span class="o">=</span> <span class="n">g1</span>
            <span class="n">k_tables</span> <span class="o">=</span> <span class="p">[</span><span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">k3</span><span class="p">,</span> <span class="n">k4</span><span class="p">,</span> <span class="n">k5</span><span class="p">,</span> <span class="n">k6</span><span class="p">]</span>
            <span class="n">b_tables</span> <span class="o">=</span> <span class="p">[</span><span class="n">b1</span><span class="p">,</span> <span class="n">b2</span><span class="p">,</span> <span class="n">b3</span><span class="p">,</span> <span class="n">b4</span><span class="p">,</span> <span class="n">b5</span><span class="p">,</span> <span class="n">b6</span><span class="p">]</span>
            <span class="n">ge_tables</span> <span class="o">=</span> <span class="p">[</span><span class="n">g1</span><span class="p">,</span> <span class="n">g2</span><span class="p">,</span> <span class="n">g3</span><span class="p">,</span> <span class="n">g4</span><span class="p">,</span> <span class="n">g5</span><span class="p">,</span> <span class="n">g6</span><span class="p">]</span>
            <span class="n">kn_tables</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n5</span><span class="p">,</span> <span class="n">n6</span><span class="p">]</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PBUSHT</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">k_tables</span><span class="p">,</span> <span class="n">b_tables</span><span class="p">,</span> <span class="n">ge_tables</span><span class="p">,</span> <span class="n">kn_tables</span><span class="p">)</span>
            <span class="n">props</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">props</span>

    <span class="k">def</span> <span class="nf">_read_pbusht_100</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">props</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;25i&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">assert</span> <span class="n">nentries</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;table=</span><span class="si">%r</span><span class="s1"> len=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="p">(</span><span class="n">pid</span><span class="p">,</span>
             <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">k3</span><span class="p">,</span> <span class="n">k4</span><span class="p">,</span> <span class="n">k5</span><span class="p">,</span> <span class="n">k6</span><span class="p">,</span>
             <span class="n">b1</span><span class="p">,</span> <span class="n">b2</span><span class="p">,</span> <span class="n">b3</span><span class="p">,</span> <span class="n">b4</span><span class="p">,</span> <span class="n">b5</span><span class="p">,</span> <span class="n">b6</span><span class="p">,</span>
             <span class="n">g1</span><span class="p">,</span> <span class="n">g2</span><span class="p">,</span> <span class="n">g3</span><span class="p">,</span> <span class="n">g4</span><span class="p">,</span> <span class="n">g5</span><span class="p">,</span> <span class="n">g6</span><span class="p">,</span>
             <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n5</span><span class="p">,</span> <span class="n">n6</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="n">k_tables</span> <span class="o">=</span> <span class="p">[</span><span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">k3</span><span class="p">,</span> <span class="n">k4</span><span class="p">,</span> <span class="n">k5</span><span class="p">,</span> <span class="n">k6</span><span class="p">]</span>
            <span class="n">b_tables</span> <span class="o">=</span> <span class="p">[</span><span class="n">b1</span><span class="p">,</span> <span class="n">b2</span><span class="p">,</span> <span class="n">b3</span><span class="p">,</span> <span class="n">b4</span><span class="p">,</span> <span class="n">b5</span><span class="p">,</span> <span class="n">b6</span><span class="p">]</span>
            <span class="n">ge_tables</span> <span class="o">=</span> <span class="p">[</span><span class="n">g1</span><span class="p">,</span> <span class="n">g2</span><span class="p">,</span> <span class="n">g3</span><span class="p">,</span> <span class="n">g4</span><span class="p">,</span> <span class="n">g5</span><span class="p">,</span> <span class="n">g6</span><span class="p">]</span>
            <span class="n">kn_tables</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n5</span><span class="p">,</span> <span class="n">n6</span><span class="p">]</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PBUSHT</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">k_tables</span><span class="p">,</span> <span class="n">b_tables</span><span class="p">,</span> <span class="n">ge_tables</span><span class="p">,</span> <span class="n">kn_tables</span><span class="p">)</span>
            <span class="n">props</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">props</span>

    <span class="k">def</span> <span class="nf">_read_pcomp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;PCOMP(2706,27,287) - the marker for Record 22</span>

<span class="sd">        standard:</span>
<span class="sd">          EPTS; 64-bit: C:\MSC.Software\simcenter_nastran_2019.2\tpl_post1\cqrdbxdra3lg.op2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">n2</span><span class="p">,</span> <span class="n">props</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pcomp_32_bit</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
            <span class="n">nproperties</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">props</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">props</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_add_op2_property</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PCOMP&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nproperties</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">n2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_dual_card</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pcomp_32_bit</span><span class="p">,</span>
                                      <span class="bp">self</span><span class="o">.</span><span class="n">_read_pcomp_64_bit</span><span class="p">,</span>
                                      <span class="s1">&#39;PCOMP&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_op2_property</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n2</span>

    <span class="k">def</span> <span class="nf">_read_pcomp_64_bit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">PCOMP</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        PCOMP(2706,27,287) - the marker for Record 22</span>

<span class="sd">        1  PID   I  Property identification number</span>
<span class="sd">        2  N(C)  I  Number of plies</span>
<span class="sd">        3  Z0    RS Distance from the reference plane to the bottom surface</span>
<span class="sd">        4  NSM   RS Nonstructural mass per unit area</span>
<span class="sd">        5  SB    RS Allowable shear stress of the bonding material</span>
<span class="sd">        6  FT    I  Failure theory</span>
<span class="sd">        7  TREF  RS Reference temperature</span>
<span class="sd">        8  GE    RS Damping coefficient</span>

<span class="sd">        9  MID   I  Material identification number</span>
<span class="sd">        10 T     RS Thicknesses of the ply</span>
<span class="sd">        11 THETA RS Orientation angle of the longitudinal direction of the ply</span>
<span class="sd">        12 SOUT  I Stress or strain output request of the ply</span>
<span class="sd">        Words 9 through 12 repeat N times</span>

<span class="sd">        TODO:</span>
<span class="sd">           64-bit bug: why is the number of plies 0???</span>

<span class="sd">          doubles (float64) = (</span>
<span class="sd">          1, 0.0, 1.7368e-18, 0.0, 1.0, 1.5e-323, 0.0, 0.0,</span>
<span class="sd">            1, 0.11, 0, 1,</span>
<span class="sd">            1, 0.11, 0, 1,</span>
<span class="sd">            1, 0.11, 0, 1,</span>
<span class="sd">          -1, -1, -1, -1,</span>
<span class="sd">          21, 0.0, 1.7368e-18, 0.0, 1.0, 1.5e-323, 0.0, 0.0,</span>
<span class="sd">            1, 0.11, 0, 1,</span>
<span class="sd">            1, 0.11, 0, 1,</span>
<span class="sd">            1, 0.11, 0, 1,</span>
<span class="sd">            1, 0.11, 0, 1,</span>
<span class="sd">          -1, -1, -1, -1)</span>
<span class="sd">          long long (int64) = (</span>
<span class="sd">          1, 0,   1.7368e-18, 0,   1.0, 3, 0, 0, 1, 4592590756007337001, 0, 1,</span>
<span class="sd">            1, 0.11, 0, 1,</span>
<span class="sd">            1, 0.11, 0, 1,</span>
<span class="sd">            1, 0.11, 0, 1,</span>
<span class="sd">          -1, -1, -1, -1,</span>
<span class="sd">          21, 0, 4341475431749739292, 0, 4607182418800017408, 3, 0, 0,</span>
<span class="sd">            1, 0.11, 0, 1,</span>
<span class="sd">            1, 0.11, 0, 1,</span>
<span class="sd">            1, 0.11, 0, 1,</span>
<span class="sd">            1, 0.11, 0, 1,</span>
<span class="sd">          -1, -1, -1, -1)</span>

<span class="sd">          doubles (float64) = (5e-324, 0.0, -0.005, 0.0, 0.0, 0.0, 0.0, 0.0,</span>
<span class="sd">                               4e-323, 0.005, 0.0, 5e-324,</span>
<span class="sd">                               4e-323, 0.005, 0.0, 5e-324,</span>
<span class="sd">                               nan, nan, nan, nan)</span>
<span class="sd">          long long (int64) = (1, 0, -4650957407178058629, 0, 0, 0, 0, 0,</span>
<span class="sd">                                  8, 4572414629676717179, 0, 1,</span>
<span class="sd">                                  8, 4572414629676717179, 0, 1,</span>
<span class="sd">                               -1, -1, -1, -1)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">to_nx</span><span class="p">()</span>
        <span class="n">nproperties</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i3fi2f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="n">ntotal1</span> <span class="o">=</span> <span class="mi">32</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i2fi&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>

        <span class="n">four_minus1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;4i&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="n">ndata</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">ntotal2</span> <span class="o">=</span> <span class="mi">16</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="n">props</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">ndata</span> <span class="o">-</span> <span class="n">ntotal1</span><span class="p">):</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal1</span><span class="p">])</span>
            <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">nlayers</span><span class="p">,</span> <span class="n">z0</span><span class="p">,</span> <span class="n">nsm</span><span class="p">,</span> <span class="n">sb</span><span class="p">,</span> <span class="n">ft</span><span class="p">,</span> <span class="n">tref</span><span class="p">,</span> <span class="n">ge</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">assert</span> <span class="n">pid</span> <span class="o">&gt;</span> <span class="mi">0</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;PCOMP pid=</span><span class="si">{</span><span class="n">pid</span><span class="si">}</span><span class="s1"> nlayers=</span><span class="si">{</span><span class="n">nlayers</span><span class="si">}</span><span class="s1"> z0=</span><span class="si">{</span><span class="n">z0</span><span class="si">}</span><span class="s1"> nsm=</span><span class="si">{</span><span class="n">nsm</span><span class="si">}</span><span class="s1"> &#39;</span>
                                        <span class="sa">f</span><span class="s1">&#39;sb=</span><span class="si">{</span><span class="n">sb</span><span class="si">}</span><span class="s1"> ft=</span><span class="si">{</span><span class="n">ft</span><span class="si">}</span><span class="s1"> Tref=</span><span class="si">{</span><span class="n">tref</span><span class="si">}</span><span class="s1"> ge=</span><span class="si">{</span><span class="n">ge</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nlayers</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="n">out</span>
            <span class="c1">#print(f&#39;PCOMP pid={pid} nlayers={nlayers} z0={z0} nsm={nsm} &#39;</span>
                  <span class="c1">#f&#39;sb={sb} ft={ft} Tref={tref} ge={ge}&#39;)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal1</span>

            <span class="c1"># None, &#39;SYM&#39;, &#39;MEM&#39;, &#39;BEND&#39;, &#39;SMEAR&#39;, &#39;SMCORE&#39;, &#39;NO&#39;</span>
            <span class="n">is_symmetrical</span> <span class="o">=</span> <span class="s1">&#39;NO&#39;</span>
            <span class="c1">#if nlayers &lt; 0:</span>
                <span class="c1">#is_symmetrical = &#39;SYM&#39;</span>
                <span class="c1">#nlayers = abs(nlayers)</span>

            <span class="n">mids</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">T</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">thetas</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">souts</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">edata2</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal2</span><span class="p">]</span>
            <span class="n">idata</span> <span class="o">=</span> <span class="n">four_minus1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata2</span><span class="p">)</span>
            <span class="k">while</span> <span class="n">idata</span> <span class="o">!=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                <span class="p">(</span><span class="n">mid</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">sout</span><span class="p">)</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata2</span><span class="p">)</span>
                <span class="n">mids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mid</span><span class="p">)</span>
                <span class="n">T</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
                <span class="n">thetas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
                <span class="n">souts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sout</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;      mid=</span><span class="si">{</span><span class="n">mid</span><span class="si">}</span><span class="s1"> t=</span><span class="si">{</span><span class="n">t</span><span class="si">}</span><span class="s1"> theta=</span><span class="si">{</span><span class="n">theta</span><span class="si">}</span><span class="s1"> sout=</span><span class="si">{</span><span class="n">sout</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal2</span>
                <span class="c1">#print(f&#39;      mid={mid} t={t} theta={theta} sout={sout}&#39;)</span>
                <span class="n">edata2</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal2</span><span class="p">]</span>
                <span class="n">idata</span> <span class="o">=</span> <span class="n">four_minus1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata2</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">nlayers</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;pid=</span><span class="si">%s</span><span class="s1"> nlayers=</span><span class="si">%s</span><span class="s1"> z0=</span><span class="si">%s</span><span class="s1"> nms=</span><span class="si">%s</span><span class="s1"> sb=</span><span class="si">%s</span><span class="s1"> ft=</span><span class="si">%s</span><span class="s1"> Tref=</span><span class="si">%s</span><span class="s1"> ge=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">pid</span><span class="p">,</span> <span class="n">nlayers</span><span class="p">,</span> <span class="n">z0</span><span class="p">,</span> <span class="n">nsm</span><span class="p">,</span> <span class="n">sb</span><span class="p">,</span> <span class="n">ft</span><span class="p">,</span> <span class="n">tref</span><span class="p">,</span> <span class="n">ge</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="n">nlayers</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">nlayers</span>
                <span class="n">nlayers</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">mids</span><span class="p">)</span>

            <span class="n">data_in</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">pid</span><span class="p">,</span> <span class="n">z0</span><span class="p">,</span> <span class="n">nsm</span><span class="p">,</span> <span class="n">sb</span><span class="p">,</span> <span class="n">ft</span><span class="p">,</span> <span class="n">tref</span><span class="p">,</span> <span class="n">ge</span><span class="p">,</span>
                <span class="n">is_symmetrical</span><span class="p">,</span> <span class="n">mids</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="n">thetas</span><span class="p">,</span> <span class="n">souts</span><span class="p">]</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PCOMP</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">data_in</span><span class="p">)</span>
            <span class="n">nproperties</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal2</span>
            <span class="n">props</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">props</span>

    <span class="k">def</span> <span class="nf">_read_pcomp_32_bit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">PCOMP</span><span class="p">]]:</span>  <span class="c1"># pragma: no cover</span>
        <span class="sd">&quot;&quot;&quot;PCOMP(2706,27,287) - the marker for Record 22&quot;&quot;&quot;</span>
        <span class="n">nproperties</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i3fi2f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="n">ntotal1</span> <span class="o">=</span> <span class="mi">32</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i2fi&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>

        <span class="n">ndata</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">ntotal2</span> <span class="o">=</span> <span class="mi">16</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="n">props</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">ndata</span> <span class="o">-</span> <span class="n">ntotal1</span><span class="p">):</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal1</span><span class="p">])</span>
            <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">nlayers</span><span class="p">,</span> <span class="n">z0</span><span class="p">,</span> <span class="n">nsm</span><span class="p">,</span> <span class="n">sb</span><span class="p">,</span> <span class="n">ft</span><span class="p">,</span> <span class="n">tref</span><span class="p">,</span> <span class="n">ge</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">assert</span> <span class="n">pid</span> <span class="o">&gt;</span> <span class="mi">0</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;PCOMP pid=</span><span class="si">{</span><span class="n">pid</span><span class="si">}</span><span class="s1"> nlayers=</span><span class="si">{</span><span class="n">nlayers</span><span class="si">}</span><span class="s1"> z0=</span><span class="si">{</span><span class="n">z0</span><span class="si">}</span><span class="s1"> nsm=</span><span class="si">{</span><span class="n">nsm</span><span class="si">}</span><span class="s1"> &#39;</span>
                                        <span class="sa">f</span><span class="s1">&#39;sb=</span><span class="si">{</span><span class="n">sb</span><span class="si">}</span><span class="s1"> ft=</span><span class="si">{</span><span class="n">ft</span><span class="si">}</span><span class="s1"> Tref=</span><span class="si">{</span><span class="n">tref</span><span class="si">}</span><span class="s1"> ge=</span><span class="si">{</span><span class="n">ge</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nlayers</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="n">out</span>
            <span class="c1">#print(f&#39;PCOMP pid={pid} nlayers={nlayers} z0={z0} nsm={nsm} &#39;</span>
                  <span class="c1">#f&#39;sb={sb} ft={ft} Tref={tref} ge={ge}&#39;)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal1</span>

            <span class="n">mids</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">T</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">thetas</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">souts</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="c1"># None, &#39;SYM&#39;, &#39;MEM&#39;, &#39;BEND&#39;, &#39;SMEAR&#39;, &#39;SMCORE&#39;, &#39;NO&#39;</span>
            <span class="n">is_symmetrical</span> <span class="o">=</span> <span class="s1">&#39;NO&#39;</span>
            <span class="k">if</span> <span class="n">nlayers</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">is_symmetrical</span> <span class="o">=</span> <span class="s1">&#39;SYM&#39;</span>
                <span class="n">nlayers</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">nlayers</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">nlayers</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">out</span>

            <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">nlayers</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;pid=</span><span class="si">%s</span><span class="s1"> nlayers=</span><span class="si">%s</span><span class="s1"> z0=</span><span class="si">%s</span><span class="s1"> nms=</span><span class="si">%s</span><span class="s1"> sb=</span><span class="si">%s</span><span class="s1"> ft=</span><span class="si">%s</span><span class="s1"> Tref=</span><span class="si">%s</span><span class="s1"> ge=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">pid</span><span class="p">,</span> <span class="n">nlayers</span><span class="p">,</span> <span class="n">z0</span><span class="p">,</span> <span class="n">nsm</span><span class="p">,</span> <span class="n">sb</span><span class="p">,</span> <span class="n">ft</span><span class="p">,</span> <span class="n">tref</span><span class="p">,</span> <span class="n">ge</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;    pid=</span><span class="si">%s</span><span class="s1"> nlayers=</span><span class="si">%s</span><span class="s1"> z0=</span><span class="si">%s</span><span class="s1"> nms=</span><span class="si">%s</span><span class="s1"> sb=</span><span class="si">%s</span><span class="s1"> ft=</span><span class="si">%s</span><span class="s1"> Tref=</span><span class="si">%s</span><span class="s1"> ge=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">pid</span><span class="p">,</span> <span class="n">nlayers</span><span class="p">,</span> <span class="n">z0</span><span class="p">,</span> <span class="n">nsm</span><span class="p">,</span> <span class="n">sb</span><span class="p">,</span> <span class="n">ft</span><span class="p">,</span> <span class="n">tref</span><span class="p">,</span> <span class="n">ge</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">unused_ilayer</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nlayers</span><span class="p">):</span>
                <span class="p">(</span><span class="n">mid</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">sout</span><span class="p">)</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal2</span><span class="p">])</span>
                <span class="n">mids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mid</span><span class="p">)</span>
                <span class="k">assert</span> <span class="n">mid</span> <span class="o">&gt;</span> <span class="mi">0</span>

                <span class="n">T</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
                <span class="n">thetas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
                <span class="n">souts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sout</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;      mid=</span><span class="si">{</span><span class="n">mid</span><span class="si">}</span><span class="s1"> t=</span><span class="si">{</span><span class="n">t</span><span class="si">}</span><span class="s1"> theta=</span><span class="si">{</span><span class="n">theta</span><span class="si">}</span><span class="s1"> sout=</span><span class="si">{</span><span class="n">sout</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal2</span>
                <span class="c1">#print(f&#39;      mid={mid} t={t} theta={theta} sout={sout}\n&#39;)</span>

            <span class="n">data_in</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">pid</span><span class="p">,</span> <span class="n">z0</span><span class="p">,</span> <span class="n">nsm</span><span class="p">,</span> <span class="n">sb</span><span class="p">,</span> <span class="n">ft</span><span class="p">,</span> <span class="n">tref</span><span class="p">,</span> <span class="n">ge</span><span class="p">,</span>
                <span class="n">is_symmetrical</span><span class="p">,</span> <span class="n">mids</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="n">thetas</span><span class="p">,</span> <span class="n">souts</span><span class="p">]</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PCOMP</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">data_in</span><span class="p">)</span>
            <span class="n">props</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="n">nproperties</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">props</span>

    <span class="k">def</span> <span class="nf">_read_pcompg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        PCOMP(2706,27,287)</span>

<span class="sd">        1 PID      I  Property identification number</span>
<span class="sd">        2 LAMOPT   I  Laminate option</span>
<span class="sd">        3 Z0       RS Distance from the reference plane to the bottom surface</span>
<span class="sd">        4 NSM      RS Nonstructural mass per unit area</span>
<span class="sd">        5 SB       RS Allowable shear stress of the bonding material</span>
<span class="sd">        6 FT       I  Failure theory</span>
<span class="sd">        7 TREF     RS Reference temperature</span>
<span class="sd">        8 GE       RS Damping coefficient</span>

<span class="sd">        9  GPLYIDi I  Global ply IDs.</span>
<span class="sd">        10 MID     I  Material identification number</span>
<span class="sd">        11 T       RS Thicknesses of the ply</span>
<span class="sd">        12 THETA   RS Orientation angle of the longitudinal direction of the ply</span>
<span class="sd">        13 SOUT    I  Stress or strain output request of the ply</span>
<span class="sd">        Words 9 through 13 repeat N times (until -1, -1, -1, -1, -1 as Nplies doesn&#39;t exist...)</span>

<span class="sd">        float = (15006, 150, 604,</span>
<span class="sd">                 5, 0.0, 1.7368e-18, 0.0, 0.0, 0.0, 20.0, 0.0,</span>
<span class="sd">                     5e-324, 5e-324, 2.0, 0.0, 0.0,</span>
<span class="sd">                     1e-323, 1e-323, 3.0, 0.0, 0.0,</span>
<span class="sd">                     1.5e-323, 1e-323, 3.0, 0.0, 0.0,</span>
<span class="sd">                     2e-323, 5e-324, 2.0, 0.0, 0.0,</span>
<span class="sd">                     nan, nan, nan, nan, nan)</span>
<span class="sd">        int   = (15006, 150, 604,</span>
<span class="sd">                 5, 0,   1.7368e-18, 0,   0,   0,   20.0, 0,</span>
<span class="sd">                     1, 1, 4611686018427387904, 0, 0,</span>
<span class="sd">                     2, 2, 4613937818241073152, 0, 0,</span>
<span class="sd">                     3, 2, 4613937818241073152, 0, 0,</span>
<span class="sd">                     4, 1, 4611686018427387904, 0, 0,</span>
<span class="sd">                     -1, -1, -1, -1, -1)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nproperties</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i 3f i 2f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i 2f i&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="n">struct_i5</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;5i&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>

        <span class="c1"># lam - SYM, MEM, BEND, SMEAR, SMCORE, None</span>
        <span class="n">lam_map</span> <span class="o">=</span> <span class="p">{</span>
            <span class="mi">0</span> <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="c1"># MEM</span>
            <span class="c1"># BEND</span>
            <span class="c1"># SMEAR</span>
            <span class="c1"># SMCORE</span>
        <span class="p">}</span>

        <span class="c1"># ft - HILL, HOFF, TSAI, STRN, None</span>
        <span class="n">ft_map</span> <span class="o">=</span> <span class="p">{</span>
            <span class="mi">0</span> <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="c1"># HILL</span>
            <span class="c1"># HOFF</span>
            <span class="mi">3</span> <span class="p">:</span> <span class="s1">&#39;TSAI&#39;</span><span class="p">,</span>
            <span class="c1"># STRN</span>
        <span class="p">}</span>
        <span class="c1"># sout - YES, NO</span>
        <span class="n">sout_map</span> <span class="o">=</span> <span class="p">{</span>
            <span class="mi">0</span> <span class="p">:</span> <span class="s1">&#39;NO&#39;</span><span class="p">,</span>
            <span class="mi">1</span> <span class="p">:</span> <span class="s1">&#39;YES&#39;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">ndata</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="c1">#self.show_data(data, types=&#39;qd&#39;)</span>
        <span class="n">ntotal1</span> <span class="o">=</span> <span class="mi">32</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="n">ntotal2</span> <span class="o">=</span> <span class="mi">20</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="k">while</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">ndata</span> <span class="o">-</span> <span class="n">ntotal1</span><span class="p">):</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal1</span><span class="p">])</span>
            <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">lam_int</span><span class="p">,</span> <span class="n">z0</span><span class="p">,</span> <span class="n">nsm</span><span class="p">,</span> <span class="n">sb</span><span class="p">,</span> <span class="n">ft_int</span><span class="p">,</span> <span class="n">tref</span><span class="p">,</span> <span class="n">ge</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;PCOMPG pid=</span><span class="si">{</span><span class="n">pid</span><span class="si">}</span><span class="s1"> lam_int=</span><span class="si">{</span><span class="n">lam_int</span><span class="si">}</span><span class="s1"> z0=</span><span class="si">{</span><span class="n">z0</span><span class="si">}</span><span class="s1"> nsm=</span><span class="si">{</span><span class="n">nsm</span><span class="si">}</span><span class="s1"> &#39;</span>
                                        <span class="sa">f</span><span class="s1">&#39;sb=</span><span class="si">{</span><span class="n">sb</span><span class="si">}</span><span class="s1"> ft_int=</span><span class="si">{</span><span class="n">ft_int</span><span class="si">}</span><span class="s1"> tref=</span><span class="si">{</span><span class="n">tref</span><span class="si">}</span><span class="s1"> ge=</span><span class="si">{</span><span class="n">ge</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="c1">#print(f&#39;PCOMPG pid={pid} lam_int={lam_int} z0={z0} nsm={nsm} sb={sb} &#39;</span>
                  <span class="c1">#f&#39;ft_int={ft_int} tref={tref} ge={ge}&#39;)</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lam_int</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="n">out</span>
            <span class="k">assert</span> <span class="n">pid</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">out</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal1</span>

            <span class="n">mids</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">thicknesses</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">thetas</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">souts</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">global_ply_ids</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="c1"># None, &#39;SYM&#39;, &#39;MEM&#39;, &#39;BEND&#39;, &#39;SMEAR&#39;, &#39;SMCORE&#39;, &#39;NO&#39;</span>
            <span class="c1">#is_symmetrical = &#39;NO&#39;</span>
            <span class="c1">#if nlayers &lt; 0:</span>
                <span class="c1">#is_symmetrical = &#39;SYM&#39;</span>
                <span class="c1">#nlayers = abs(nlayers)</span>
            <span class="c1">#assert nlayers &gt; 0, out</span>

            <span class="c1">#assert 0 &lt; nlayers &lt; 100, &#39;pid=%s nlayers=%s z0=%s nms=%s sb=%s ft=%s tref=%s ge=%s&#39; % (</span>
                <span class="c1">#pid, nlayers, z0, nsm, sb, ft, tref, ge)</span>

            <span class="c1">#if self.is_debug_file:</span>
                <span class="c1">#self.binary_debug.write(&#39;    pid=%s nlayers=%s z0=%s nms=%s sb=%s ft=%s tref=%s ge=%s\n&#39; % (</span>
                    <span class="c1">#pid, nlayers, z0, nsm, sb, ft, tref, ge))</span>
            <span class="n">ilayer</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">while</span> <span class="n">ilayer</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">:</span>
                <span class="n">ints5</span> <span class="o">=</span> <span class="n">struct_i5</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal2</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">ints5</span> <span class="o">==</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;      global_ply=%-1 mid=%-1 t=%-1 theta=%-1 sout=-1</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">break</span>
                <span class="p">(</span><span class="n">global_ply</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">sout_int</span><span class="p">)</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal2</span><span class="p">])</span>
                <span class="c1">#print(&#39;  &#39;, (global_ply, mid, t, theta, sout_int))</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">sout</span> <span class="o">=</span> <span class="n">sout_map</span><span class="p">[</span><span class="n">sout_int</span><span class="p">]</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;cant parse global_ply=</span><span class="si">%s</span><span class="s1"> sout=</span><span class="si">%s</span><span class="s1">; assuming 0=NO&#39;</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="n">global_ply</span><span class="p">,</span> <span class="n">sout_int</span><span class="p">))</span>
                    <span class="n">sout</span> <span class="o">=</span> <span class="s1">&#39;NO&#39;</span>

                <span class="n">global_ply_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">global_ply</span><span class="p">)</span>
                <span class="n">mids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mid</span><span class="p">)</span>
                <span class="n">thicknesses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
                <span class="n">thetas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
                <span class="n">souts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sout</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;      global_ply=</span><span class="si">%s</span><span class="s1"> mid=</span><span class="si">%s</span><span class="s1"> t=</span><span class="si">%s</span><span class="s1"> theta=</span><span class="si">%s</span><span class="s1"> sout_int=</span><span class="si">%s</span><span class="s1"> sout=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="n">global_ply</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">sout_int</span><span class="p">,</span> <span class="n">sout</span><span class="p">))</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal2</span>
                <span class="n">ilayer</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal2</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">ft</span> <span class="o">=</span> <span class="n">ft_map</span><span class="p">[</span><span class="n">ft_int</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;pid=</span><span class="si">%s</span><span class="s1"> cant parse ft=</span><span class="si">%s</span><span class="s1">; should be HILL, HOFF, TSAI, STRN&#39;</span>
                               <span class="s1">&#39;...skipping&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">ft_int</span><span class="p">))</span>
                <span class="k">continue</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">lam</span> <span class="o">=</span> <span class="n">lam_map</span><span class="p">[</span><span class="n">lam_int</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;pid=</span><span class="si">%s</span><span class="s1"> cant parse lam=</span><span class="si">%s</span><span class="s1">; should be HILL, HOFF, TSAI, STRN&#39;</span>
                               <span class="s1">&#39;...skipping&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">lam_int</span><span class="p">))</span>
                <span class="k">continue</span>

            <span class="c1"># apparently Nastran makes duplicate property ids...</span>
            <span class="k">if</span> <span class="n">pid</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="n">pid</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s1">&#39;PCOMP&#39;</span><span class="p">:</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="n">pid</span><span class="p">]</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_pcompg</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">global_ply_ids</span><span class="p">,</span> <span class="n">mids</span><span class="p">,</span> <span class="n">thicknesses</span><span class="p">,</span> <span class="n">thetas</span><span class="o">=</span><span class="n">thetas</span><span class="p">,</span> <span class="n">souts</span><span class="o">=</span><span class="n">souts</span><span class="p">,</span>
                            <span class="n">nsm</span><span class="o">=</span><span class="n">nsm</span><span class="p">,</span> <span class="n">sb</span><span class="o">=</span><span class="n">sb</span><span class="p">,</span> <span class="n">ft</span><span class="o">=</span><span class="n">ft</span><span class="p">,</span> <span class="n">tref</span><span class="o">=</span><span class="n">tref</span><span class="p">,</span> <span class="n">ge</span><span class="o">=</span><span class="n">ge</span><span class="p">,</span> <span class="n">lam</span><span class="o">=</span><span class="n">lam</span><span class="p">,</span> <span class="n">z0</span><span class="o">=</span><span class="n">z0</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="n">nproperties</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PCOMPG&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nproperties</span>
        <span class="k">return</span> <span class="n">n</span>

<span class="c1"># PCOMPA</span>

    <span class="k">def</span> <span class="nf">_read_pconeax</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        (152,19,147) - Record 24</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;skipping PCONEAX in EPT&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_read_pconv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;common method for reading PCONVs&quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_dual_card</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pconv_nx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_pconv_msc</span><span class="p">,</span>
                                 <span class="s1">&#39;PCONV&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_pconv</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_pconv_nx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        (11001,110,411)- NX version</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">16</span>  <span class="c1"># 4*4</span>
        <span class="n">struct_3if</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3if&#39;</span><span class="p">)</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">assert</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="n">props</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct_3if</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">])</span>
            <span class="p">(</span><span class="n">pconid</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">form</span><span class="p">,</span> <span class="n">expf</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="n">ftype</span> <span class="o">=</span> <span class="n">tid</span> <span class="o">=</span> <span class="n">chlen</span> <span class="o">=</span> <span class="n">gidin</span> <span class="o">=</span> <span class="n">ce</span> <span class="o">=</span> <span class="n">e1</span> <span class="o">=</span> <span class="n">e2</span> <span class="o">=</span> <span class="n">e3</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">data_in</span> <span class="o">=</span> <span class="p">(</span><span class="n">pconid</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">form</span><span class="p">,</span> <span class="n">expf</span><span class="p">,</span> <span class="n">ftype</span><span class="p">,</span> <span class="n">tid</span><span class="p">,</span> <span class="n">chlen</span><span class="p">,</span>
                       <span class="n">gidin</span><span class="p">,</span> <span class="n">ce</span><span class="p">,</span> <span class="n">e1</span><span class="p">,</span> <span class="n">e2</span><span class="p">,</span> <span class="n">e3</span><span class="p">)</span>

            <span class="n">prop</span> <span class="o">=</span> <span class="n">PCONV</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">data_in</span><span class="p">)</span>
            <span class="n">props</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">props</span>

    <span class="k">def</span> <span class="nf">_read_pconv_msc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        (11001,110,411)- MSC version - Record 25</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">56</span>  <span class="c1"># 14*4</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3if 4i fii 3f&#39;</span><span class="p">)</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">assert</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="n">props</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">])</span>
            <span class="p">(</span><span class="n">pconid</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">form</span><span class="p">,</span> <span class="n">expf</span><span class="p">,</span> <span class="n">ftype</span><span class="p">,</span> <span class="n">tid</span><span class="p">,</span> <span class="n">unused_undef1</span><span class="p">,</span> <span class="n">unused_undef2</span><span class="p">,</span> <span class="n">chlen</span><span class="p">,</span>
             <span class="n">gidin</span><span class="p">,</span> <span class="n">ce</span><span class="p">,</span> <span class="n">e1</span><span class="p">,</span> <span class="n">e2</span><span class="p">,</span> <span class="n">e3</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="n">data_in</span> <span class="o">=</span> <span class="p">(</span><span class="n">pconid</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">form</span><span class="p">,</span> <span class="n">expf</span><span class="p">,</span> <span class="n">ftype</span><span class="p">,</span> <span class="n">tid</span><span class="p">,</span> <span class="n">chlen</span><span class="p">,</span>
                       <span class="n">gidin</span><span class="p">,</span> <span class="n">ce</span><span class="p">,</span> <span class="n">e1</span><span class="p">,</span> <span class="n">e2</span><span class="p">,</span> <span class="n">e3</span><span class="p">)</span>

            <span class="n">prop</span> <span class="o">=</span> <span class="n">PCONV</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">data_in</span><span class="p">)</span>
            <span class="n">props</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">props</span>

    <span class="k">def</span> <span class="nf">_read_pconvm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Record 24 -- PCONVM(2902,29,420)</span>

<span class="sd">        1 PID    I Property identification number</span>
<span class="sd">        2 MID    I Material identification number</span>
<span class="sd">        3 FORM   I Type of formula used for free convection</span>
<span class="sd">        4 FLAG   I Flag for mass flow convection</span>
<span class="sd">        5 COEF  RS Constant coefficient used for forced convection</span>
<span class="sd">        6 EXPR  RS Reynolds number convection exponent</span>
<span class="sd">        7 EXPPI RS Prandtl number convection exponent into the working fluid</span>
<span class="sd">        8 EXPPO RS Prandtl number convection exponent out of the working fluid</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">32</span>  <span class="c1"># 8*4</span>
        <span class="n">structi</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;4i 4f&#39;</span><span class="p">)</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">structi</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">out</span> <span class="o">!=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">):</span>
                <span class="p">(</span><span class="n">pconid</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">form</span><span class="p">,</span> <span class="n">flag</span><span class="p">,</span> <span class="n">coeff</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">expri</span><span class="p">,</span> <span class="n">exppo</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                <span class="c1">#print(out)</span>
                <span class="n">prop</span> <span class="o">=</span> <span class="n">PCONVM</span><span class="p">(</span><span class="n">pconid</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">coeff</span><span class="p">,</span> <span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">,</span> <span class="n">flag</span><span class="o">=</span><span class="n">flag</span><span class="p">,</span>
                              <span class="n">expr</span><span class="o">=</span><span class="n">expr</span><span class="p">,</span> <span class="n">exppi</span><span class="o">=</span><span class="n">expri</span><span class="p">,</span> <span class="n">exppo</span><span class="o">=</span><span class="n">exppo</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_add_convection_property_object</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PCONVM&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nentries</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_pdamp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        PDAMP(202,2,45) - the marker for Record ???</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">8</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 2*4</span>
        <span class="n">struct_if</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;if&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct_if</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">])</span>
            <span class="c1">#(pid, b) = out</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PDAMP</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_op2_property</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PDAMP&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nentries</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_pdampt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>  <span class="c1"># 26</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;skipping PDAMPT in EPT&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_read_pdamp5</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>  <span class="c1"># 26</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;skipping PDAMP5 in EPT&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="c1"># PDUM1</span>
<span class="c1"># PDUM2</span>
<span class="c1"># PDUM3</span>
<span class="c1"># PDUM4</span>
<span class="c1"># PDUM5</span>
<span class="c1"># PDUM6</span>
<span class="c1"># PDUM7</span>
<span class="c1"># PDUM8</span>
<span class="c1"># PDUM9</span>

    <span class="k">def</span> <span class="nf">_read_pelas</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;PELAS(302,3,46) - the marker for Record 39&quot;&quot;&quot;</span>
        <span class="n">struct_i3f</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i3f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">16</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 4*4</span>
        <span class="n">nproperties</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nproperties</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct_i3f</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="c1">#(pid, k, ge, s) = out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  PELAS=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PELAS</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_op2_property</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PELAS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nproperties</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_pfast_msc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">92</span> <span class="c1"># 23*4</span>
        <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;ifii 4f&#39;</span><span class="p">)</span>
        <span class="n">nproperties</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nproperties</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  PFAST=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">mcid</span><span class="p">,</span> <span class="n">unused_connbeh</span><span class="p">,</span> <span class="n">unused_conntype</span><span class="p">,</span> <span class="n">unused_extcon</span><span class="p">,</span>
             <span class="n">unused_condtype</span><span class="p">,</span> <span class="n">unused_weldtype</span><span class="p">,</span> <span class="n">unused_minlen</span><span class="p">,</span> <span class="n">unused_maxlen</span><span class="p">,</span>
             <span class="n">unused_gmcheck</span><span class="p">,</span> <span class="n">unused_spcgs</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">ge</span><span class="p">,</span>
             <span class="n">unused_aa</span><span class="p">,</span> <span class="n">unused_bb</span><span class="p">,</span> <span class="n">unused_cc</span><span class="p">,</span> <span class="n">mcid</span><span class="p">,</span> <span class="n">mflag</span><span class="p">,</span>
             <span class="n">kt1</span><span class="p">,</span> <span class="n">kt2</span><span class="p">,</span> <span class="n">kt3</span><span class="p">,</span> <span class="n">kr1</span><span class="p">,</span> <span class="n">kr2</span><span class="p">,</span> <span class="n">kr3</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>

            <span class="n">data_in</span> <span class="o">=</span> <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">mcid</span><span class="p">,</span> <span class="n">mflag</span><span class="p">,</span> <span class="n">kt1</span><span class="p">,</span> <span class="n">kt2</span><span class="p">,</span> <span class="n">kt3</span><span class="p">,</span>
                       <span class="n">kr1</span><span class="p">,</span> <span class="n">kr2</span><span class="p">,</span> <span class="n">kr3</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">ge</span><span class="p">)</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PFAST</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">data_in</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_op2_property</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PFAST&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nproperties</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_pfast_nx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        PFAST(3601,36,55)</span>
<span class="sd">        NX only</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">to_nx</span><span class="p">()</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">48</span>
        <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;ifii 8f&#39;</span><span class="p">)</span>
        <span class="n">nproperties</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="n">ntotal</span>
        <span class="k">assert</span> <span class="n">delta</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;len(data)-n=</span><span class="si">%s</span><span class="s1"> n=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">,</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">/</span> <span class="mf">48.</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nproperties</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  PFAST=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">mcid</span><span class="p">,</span> <span class="n">mflag</span><span class="p">,</span> <span class="n">kt1</span><span class="p">,</span> <span class="n">kt2</span><span class="p">,</span> <span class="n">kt3</span><span class="p">,</span> <span class="n">kr1</span><span class="p">,</span> <span class="n">kr2</span><span class="p">,</span> <span class="n">kr3</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">ge</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>

            <span class="n">data_in</span> <span class="o">=</span> <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">mcid</span><span class="p">,</span> <span class="n">mflag</span><span class="p">,</span> <span class="n">kt1</span><span class="p">,</span> <span class="n">kt2</span><span class="p">,</span> <span class="n">kt3</span><span class="p">,</span>
                       <span class="n">kr1</span><span class="p">,</span> <span class="n">kr2</span><span class="p">,</span> <span class="n">kr3</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">ge</span><span class="p">)</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PFAST</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">data_in</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_op2_property</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PFAST&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nproperties</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_pelast</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Record 41 -- PELAST(1302,13,34)</span>

<span class="sd">        1 PID   I Property identification number</span>
<span class="sd">        2 TKID  I TABLEDi entry identification number for stiffness</span>
<span class="sd">        3 TGEID I TABLEDi entry identification number for structural</span>
<span class="sd">                  damping</span>
<span class="sd">        4 TKNID I TABLEDi entry</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">16</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="n">struct_4i</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;4i&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="n">nproperties</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nproperties</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct_4i</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  PELAST=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="c1">#(pid, tkid, tgeid, tknid) = out</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PELAST</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_pelast_object</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PELAST&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nproperties</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_pgap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        PGAP(2102,21,121) - the marker for Record 42</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">44</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="n">struct_i10f</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i10f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="n">nproperties</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nproperties</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct_i10f</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  PGAP=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="c1">#(pid,u0,f0,ka,kb,kt,mu1,mu2,tmax,mar,trmin) = out</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PGAP</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_op2_property</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PGAP&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nproperties</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_phbdy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        PHBDY(2802,28,236) - the marker for Record 43</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">struct_i3f</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;ifff&#39;</span><span class="p">)</span>
        <span class="n">nproperties</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="mi">16</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nproperties</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">16</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct_i3f</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  PHBDY=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="c1">#(pid, af, d1, d2) = out</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PHBDY</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_phbdy_object</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="mi">16</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PHBDY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nproperties</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_pintc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;skipping PINTC in EPT&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_read_pints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;skipping PINTS in EPT&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_read_plplane</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        PLPLANE(4606,46,375)</span>

<span class="sd">        NX 10</span>
<span class="sd">        1 PID     I Property identification number</span>
<span class="sd">        2 MID     I Material identification number</span>
<span class="sd">        3 CID     I Coordinate system identification number</span>
<span class="sd">        4 STR CHAR4 Location of stress and strain output</span>
<span class="sd">        5 T      RS Default membrane thickness for Ti on the connection entry</span>
<span class="sd">        6 CSOPT  I  Reserved for coordinate system definition of plane</span>
<span class="sd">        7 UNDEF(5) None</span>

<span class="sd">        MSC 2016</span>
<span class="sd">        PID       I Property identification number</span>
<span class="sd">        2 MID     I Material identification number</span>
<span class="sd">        3 CID     I Coordinate system identification number</span>
<span class="sd">        4 STR CHAR4 Location of stress and strain output</span>
<span class="sd">        5 UNDEF(7 ) none Not used</span>

<span class="sd">        .. warning:: CSOPT ad T are not supported</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">44</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>  <span class="c1"># 4*11</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3i 4s f 6i&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3q 8s d 6q&#39;</span><span class="p">)</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">])</span>
            <span class="n">pid</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">cid</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">unused_t</span><span class="p">,</span> <span class="n">unused_csopt</span> <span class="o">=</span> <span class="n">out</span><span class="p">[:</span><span class="mi">6</span><span class="p">]</span>
            <span class="n">location</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span>
            <span class="c1">#self.show_data(data[n:n+ntotal], &#39;ifs&#39;)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_plplane</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">cid</span><span class="o">=</span><span class="n">cid</span><span class="p">,</span> <span class="n">stress_strain_output_location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PLPLANE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nentries</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_plsolid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        MSC 2016</span>
<span class="sd">        1 PID I Property identification number</span>
<span class="sd">        2 MID I Material identification number</span>
<span class="sd">        3 STR CHAR4 Location of stress and strain output</span>
<span class="sd">        4 UNDEF(4 ) none Not used</span>

<span class="sd">        NX 10</span>
<span class="sd">        1 PID I Property identification number</span>
<span class="sd">        2 MID I Material identification number</span>
<span class="sd">        3 STR CHAR4 Location of stress and strain output</span>
<span class="sd">        4 CSOPT I Reserved for coordinate system definition of plane</span>
<span class="sd">        5 UNDEF(3) None</span>

<span class="sd">        .. warning:: CSOPT is not supported</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">28</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>  <span class="c1"># 4*7</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i 4s 4i&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">struct1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2q 8s 4q&#39;</span><span class="p">)</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">])</span>
            <span class="n">pid</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="n">unused_csopt</span><span class="p">,</span> <span class="n">unused_null_a</span><span class="p">,</span> <span class="n">unused_null_b</span><span class="p">,</span> <span class="n">unused_null_c</span> <span class="o">=</span> <span class="n">out</span>
            <span class="n">location</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span>
            <span class="c1">#self.show_data(data[n:n+ntotal], &#39;ifs&#39;)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_plsolid</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">stress_strain</span><span class="o">=</span><span class="n">location</span><span class="p">,</span> <span class="n">ge</span><span class="o">=</span><span class="mf">0.</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PLSOLID&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nentries</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_pmass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        PMASS(402,4,44) - the marker for Record 48</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">8</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 2*4</span>
        <span class="n">struct_if</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;if&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nentries</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct_if</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="c1">#out = (pid, mass)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  PMASS=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PMASS</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_op2_property_mass</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_prod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        PROD(902,9,29) - the marker for Record 49</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">24</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>  <span class="c1"># 6*4</span>
        <span class="n">struct_2i4f</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i4f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="n">nproperties</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nproperties</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct_2i4f</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="c1">#(pid, mid, a, j, c, nsm) = out</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PROD</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  PROD=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_op2_property</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PROD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nproperties</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_pshear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        PSHEAR(1002,10,42) - the marker for Record 50</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">24</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="n">struct_2i4f</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i4f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="n">nproperties</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nproperties</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct_2i4f</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="c1">#(pid, mid, t, nsm, f1, f2) = out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  PSHEAR=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PSHEAR</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_op2_property</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PSHEAR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nproperties</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_pshell</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        PSHELL(2302,23,283) - the marker for Record 51</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">44</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>  <span class="c1"># 11*4</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;iififi4fi&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="n">nproperties</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nproperties</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">mid1</span><span class="p">,</span> <span class="n">unused_t</span><span class="p">,</span> <span class="n">mid2</span><span class="p">,</span> <span class="n">unused_bk</span><span class="p">,</span> <span class="n">mid3</span><span class="p">,</span> <span class="n">unused_ts</span><span class="p">,</span>
             <span class="n">unused_nsm</span><span class="p">,</span> <span class="n">unused_z1</span><span class="p">,</span> <span class="n">unused_z2</span><span class="p">,</span> <span class="n">mid4</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  PSHELL=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PSHELL</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>

            <span class="k">if</span> <span class="n">pid</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">:</span>
                <span class="c1"># this is a fake PSHELL</span>
                <span class="n">propi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="n">pid</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">prop</span> <span class="o">==</span> <span class="n">propi</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Fake PSHELL (skipping):</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">propi</span><span class="p">)</span>
                    <span class="n">nproperties</span> <span class="o">-=</span> <span class="mi">1</span>
                    <span class="k">continue</span>
                <span class="k">assert</span> <span class="n">propi</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;PCOMP&#39;</span><span class="p">,</span> <span class="s1">&#39;PCOMPG&#39;</span><span class="p">],</span> <span class="n">propi</span><span class="o">.</span><span class="n">get_stats</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;PSHELL is also PCOMP (skipping PSHELL):</span><span class="se">\n</span><span class="si">{</span><span class="n">propi</span><span class="si">}{</span><span class="n">prop</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">nproperties</span> <span class="o">-=</span> <span class="mi">1</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="nb">max</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">mid1</span><span class="p">,</span> <span class="n">mid2</span><span class="p">,</span> <span class="n">mid3</span><span class="p">,</span> <span class="n">mid4</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1e8</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">big_properties</span><span class="p">[</span><span class="n">pid</span><span class="p">]</span> <span class="o">=</span> <span class="n">prop</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_add_op2_property</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">nproperties</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PSHELL&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nproperties</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_psolid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        PSOLID(2402,24,281) - the marker for Record 52</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#print(&quot;reading PSOLID&quot;)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">28</span>  <span class="c1"># 7*4</span>
            <span class="n">struct_6i4s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;6i4s&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">28</span> <span class="o">*</span> <span class="mi">2</span>
            <span class="n">struct_6i4s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;6q8s&#39;</span><span class="p">)</span>

        <span class="n">nproperties</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="n">ntotal</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nproperties</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct_6i4s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="c1">#(pid, mid, cid, inp, stress, isop, fctn) = out</span>
            <span class="c1">#data_in = [pid, mid, cid, inp, stress, isop, fctn]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  PSOLID=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PSOLID</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_op2_property</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PSOLID&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nproperties</span>
        <span class="k">return</span> <span class="n">n</span>

<span class="c1"># PSOLIDL</span>
<span class="c1"># PTRIA6</span>
<span class="c1"># PTSHELL</span>

    <span class="k">def</span> <span class="nf">_read_ptube</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        PTUBE(1602,16,30) - the marker for Record 56</span>

<span class="sd">        .. todo:: OD2 only exists for heat transfer...</span>
<span class="sd">                  how do i know if there&#39;s heat transfer at this point?</span>
<span class="sd">                  I could store all the tubes and add them later,</span>
<span class="sd">                  but what about themal/non-thermal subcases?</span>

<span class="sd">        .. warning:: assuming OD2 is not written (only done for thermal)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">struct_2i3f</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2i3f&#39;</span><span class="p">)</span>
        <span class="n">nproperties</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="mi">20</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nproperties</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">20</span><span class="p">]</span>  <span class="c1"># or 24???</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct_2i3f</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">OD</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">nsm</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="n">data_in</span> <span class="o">=</span> <span class="p">[</span><span class="n">pid</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">OD</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">nsm</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  PTUBE=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PTUBE</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">data_in</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_op2_property</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="mi">20</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PTUBE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nproperties</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_pset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">struct_5i4si</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;5i4si&#39;</span><span class="p">)</span>
        <span class="n">nentries</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span>  <span class="n">n</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">28</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct_5i4si</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="c1">#print(out)</span>
            <span class="n">idi</span><span class="p">,</span> <span class="n">poly1</span><span class="p">,</span> <span class="n">poly2</span><span class="p">,</span> <span class="n">poly3</span><span class="p">,</span> <span class="n">cid</span><span class="p">,</span> <span class="n">typei</span><span class="p">,</span> <span class="n">typeid</span> <span class="o">=</span> <span class="n">out</span>
            <span class="n">typei</span> <span class="o">=</span> <span class="n">typei</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">typei</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;SET&#39;</span><span class="p">,</span> <span class="s1">&#39;ELID&#39;</span><span class="p">],</span> <span class="p">(</span><span class="n">idi</span><span class="p">,</span> <span class="n">poly1</span><span class="p">,</span> <span class="n">poly2</span><span class="p">,</span> <span class="n">poly3</span><span class="p">,</span> <span class="n">cid</span><span class="p">,</span> <span class="n">typei</span><span class="p">,</span> <span class="n">typeid</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  PVAL=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="c1">#print(idi, poly1, poly2, poly3, cid, typei, typeid)</span>
            <span class="n">typeids</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="mi">28</span>
            <span class="k">while</span> <span class="n">typeid</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">typeids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">typeid</span><span class="p">)</span>
                <span class="n">typeid</span><span class="p">,</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">struct_i</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">4</span><span class="p">])</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="mi">4</span>
                <span class="c1">#print(val)</span>
            <span class="c1">#print(typeids)</span>
            <span class="c1"># PSET ID POLY1 POLY2 POLY3 CID SETTYP ID</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_pset</span><span class="p">(</span><span class="n">idi</span><span class="p">,</span> <span class="n">poly1</span><span class="p">,</span> <span class="n">poly2</span><span class="p">,</span> <span class="n">poly3</span><span class="p">,</span> <span class="n">cid</span><span class="p">,</span> <span class="n">typei</span><span class="p">,</span> <span class="n">typeids</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PSET&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nentries</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_pval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        PVAL(10201,102,400)</span>

<span class="sd">        Word Name Type Description</span>
<span class="sd">        1 ID       I p-value set identification number</span>
<span class="sd">        2 POLY1    I Polynomial order in 1 direction of the CID system</span>
<span class="sd">        3 POLY2    I Polynomial order in 2 direction of the CID system</span>
<span class="sd">        4 POLY3    I Polynomial order in 2 direction of the CID system</span>
<span class="sd">        5 CID      I Coordinate system identification number</span>
<span class="sd">        6 TYPE CHAR4 Type of set provided: &quot;SET&quot; or &quot;ELID&quot;</span>
<span class="sd">        7 TYPEID   I SET identification number or element identification</span>
<span class="sd">                     number with this p-value specification.</span>
<span class="sd">        Words 1 through 7 repeat until End of Record</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#self.show_data(data[n:])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">struct_5i4si</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;5i 4s i&#39;</span><span class="p">)</span>
            <span class="n">struct_i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">struct_i</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">struct_5i4si</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;5q 8s q&#39;</span><span class="p">)</span>
            <span class="n">struct_i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">struct_q</span>

        <span class="n">nentries</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">28</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
        <span class="n">size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>
        <span class="k">while</span>  <span class="n">n</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct_5i4si</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="c1">#print(out)</span>
            <span class="n">idi</span><span class="p">,</span> <span class="n">poly1</span><span class="p">,</span> <span class="n">poly2</span><span class="p">,</span> <span class="n">poly3</span><span class="p">,</span> <span class="n">cid</span><span class="p">,</span> <span class="n">typei</span><span class="p">,</span> <span class="n">typeid</span> <span class="o">=</span> <span class="n">out</span>
            <span class="n">typei</span> <span class="o">=</span> <span class="n">typei</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;latin1&#39;</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">typei</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;SET&#39;</span><span class="p">,</span> <span class="s1">&#39;ELID&#39;</span><span class="p">],</span> <span class="sa">f</span><span class="s1">&#39;idi=</span><span class="si">{</span><span class="n">idi</span><span class="si">}</span><span class="s1"> poly1=</span><span class="si">{</span><span class="n">poly1</span><span class="si">}</span><span class="s1"> poly2=</span><span class="si">{</span><span class="n">poly2</span><span class="si">}</span><span class="s1"> poly3=</span><span class="si">{</span><span class="n">poly3</span><span class="si">}</span><span class="s1"> cid=</span><span class="si">{</span><span class="n">cid</span><span class="si">}</span><span class="s1"> typei=</span><span class="si">{</span><span class="n">typei</span><span class="si">}</span><span class="s1"> typeid=</span><span class="si">{</span><span class="n">typeid</span><span class="si">}</span><span class="s1">&#39;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  PVAL=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="c1">#print(idi, poly1, poly2, poly3, cid, typei, typeid)</span>
            <span class="n">typeids</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
            <span class="k">while</span> <span class="n">typeid</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">typeids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">typeid</span><span class="p">)</span>
                <span class="n">typeid</span><span class="p">,</span> <span class="o">=</span> <span class="n">struct_i</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">size</span><span class="p">])</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="n">size</span>
                <span class="c1">#print(val)</span>
            <span class="c1">#print(typeids)</span>
            <span class="c1"># PVAL ID POLY1 POLY2 POLY3 CID SETTYP ID</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_pval</span><span class="p">(</span><span class="n">idi</span><span class="p">,</span> <span class="n">poly1</span><span class="p">,</span> <span class="n">poly2</span><span class="p">,</span> <span class="n">poly3</span><span class="p">,</span> <span class="n">cid</span><span class="p">,</span> <span class="n">typei</span><span class="p">,</span> <span class="n">typeids</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PVAL&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nentries</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_pvisc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;PVISC(1802,18,31) - the marker for Record 39&quot;&quot;&quot;</span>
        <span class="n">struct_i2f</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i2f&#39;</span><span class="p">)</span>
        <span class="n">nproperties</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">//</span> <span class="mi">12</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nproperties</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">12</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">struct_i2f</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  PVISC=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
            <span class="c1">#(pid, ce, cr) = out</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="n">PVISC</span><span class="o">.</span><span class="n">add_op2_data</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_op2_property</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="mi">12</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">card_count</span><span class="p">[</span><span class="s1">&#39;PVISC&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nproperties</span>
        <span class="k">return</span> <span class="n">n</span>

<span class="c1"># PWELD</span>
<span class="c1"># PWSEAM</span>
    <span class="k">def</span> <span class="nf">_read_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;skipping VIEW in EPT&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_read_view3d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;skipping VIEW3D in EPT&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></div>

<div class="viewcode-block" id="break_by_minus1"><a class="viewcode-back" href="../../../../../reference/op2/tables/geom/pyNastran.op2.tables.geom.ept.html#pyNastran.op2.tables.geom.ept.break_by_minus1">[docs]</a><span class="k">def</span> <span class="nf">break_by_minus1</span><span class="p">(</span><span class="n">idata</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;helper for ``read_nsm_nx``&quot;&quot;&quot;</span>
    <span class="n">i1</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">i2</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">packs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">idatai</span> <span class="ow">in</span> <span class="n">idata</span><span class="p">:</span>
        <span class="c1">#print(&#39;data[i:] = &#39;, data[i:])</span>
        <span class="k">if</span> <span class="n">idatai</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">i2</span> <span class="o">=</span> <span class="n">i</span>
            <span class="n">packs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i1</span><span class="p">,</span> <span class="n">i2</span><span class="p">))</span>
            <span class="n">i1</span> <span class="o">=</span> <span class="n">i2</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">continue</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="c1">#print(packs)</span>
    <span class="k">return</span> <span class="n">packs</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Steven Doyle.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>