

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>pyNastran.op2.tables.oef_forces.oef &mdash; pyNastran 1.4-dev 1.4-dev documentation</title>
  

  
  <link rel="stylesheet" href="../../../../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../index.html" class="icon icon-home"> pyNastran 1.4-dev
          

          
            
            <img src="../../../../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.4-dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../quick_start/index.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../how_to/index.html">How To: pyNastran</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../reference/pyNastran.html">pyNastran Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../manual/index.html">pyNastran Manual</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">pyNastran 1.4-dev</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../../index.html">Module code</a> &raquo;</li>
        
      <li>pyNastran.op2.tables.oef_forces.oef</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pyNastran.op2.tables.oef_forces.oef</h1><div class="highlight"><pre>
<span></span><span class="c1">#pylint: disable=C0301,W0212,C0103,W0201</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Defines the Real/Complex Forces created by:</span>
<span class="sd">    FORCE = ALL</span>

<span class="sd">NX Case Control  Block         Description</span>
<span class="sd">===============  ==========    ===========</span>
<span class="sd">FORCE            OEF1          Element forces or heat flux (linear elements only)</span>
<span class="sd">FORCE            OEF1X         Element forces (nonlinear elements only)</span>
<span class="sd">????             HOEF1         ???</span>
<span class="sd">FORCE            DOEF1         Scaled Response Spectra</span>
<span class="sd">MODCON           OEFMC         Modal contributions</span>
<span class="sd">FORCE            OEF1X         Element forces with intermediate (CBAR and CBEAM)</span>
<span class="sd">                               station forces and forces on nonlinear elements</span>
<span class="sd">FLUX             HOEF1         Element heat flux</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">struct</span> <span class="kn">import</span> <span class="n">Struct</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">frombuffer</span><span class="p">,</span> <span class="n">vstack</span><span class="p">,</span> <span class="n">sin</span><span class="p">,</span> <span class="n">cos</span><span class="p">,</span> <span class="n">radians</span><span class="p">,</span> <span class="n">array</span><span class="p">,</span> <span class="n">hstack</span><span class="p">,</span> <span class="n">zeros</span>

<span class="kn">from</span> <span class="nn">pyNastran.op2.op2_interface.op2_reader</span> <span class="kn">import</span> <span class="n">mapfmt</span><span class="p">,</span> <span class="n">reshape_bytes_block_strip</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.utils</span> <span class="kn">import</span> <span class="n">get_eid_dt_from_eid_device</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.op2_helper</span> <span class="kn">import</span> <span class="n">polar_to_real_imag</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.op2_interface.op2_common</span> <span class="kn">import</span> <span class="n">OP2Common</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.op2_interface.utils</span> <span class="kn">import</span> <span class="n">apply_mag_phase</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.op2_interface.msc_tables</span> <span class="kn">import</span> <span class="n">MSC_OEF_REAL_MAPPER</span><span class="p">,</span> <span class="n">MSC_OEF_IMAG_MAPPER</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.op2_interface.nx_tables</span> <span class="kn">import</span> <span class="n">NX_OEF_REAL_MAPPER</span><span class="p">,</span> <span class="n">NX_OEF_IMAG_MAPPER</span>


<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oef_forces.oef_thermal_objects</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">Real1DHeatFluxArray</span><span class="p">,</span>
    <span class="n">RealHeatFlux_2D_3DArray</span><span class="p">,</span>
    <span class="n">RealChbdyHeatFluxArray</span><span class="p">,</span>
    <span class="n">RealConvHeatFluxArray</span><span class="p">,</span>

    <span class="n">RealHeatFluxVUBeamArray</span><span class="p">,</span>
    <span class="n">RealHeatFluxVU3DArray</span><span class="p">,</span>
    <span class="n">RealHeatFluxVUShellArray</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oef_forces.oef_force_objects</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">FailureIndicesArray</span><span class="p">,</span>
    <span class="n">RealRodForceArray</span><span class="p">,</span> <span class="n">RealViscForceArray</span><span class="p">,</span>
    <span class="n">RealCBarForceArray</span><span class="p">,</span> <span class="n">RealCBar100ForceArray</span><span class="p">,</span>
    <span class="n">RealCFastForceArrayNX</span><span class="p">,</span> <span class="n">RealCWeldForceArray</span><span class="p">,</span>
    <span class="n">RealCFastForceArrayMSC</span><span class="p">,</span> <span class="n">RealCBushForceArray</span><span class="p">,</span> <span class="n">RealCBearForceArray</span><span class="p">,</span>
    <span class="n">RealPlateForceArray</span><span class="p">,</span>
    <span class="n">RealPlateBilinearForceArray</span><span class="p">,</span>
    <span class="n">RealSpringForceArray</span><span class="p">,</span> <span class="n">RealDamperForceArray</span><span class="p">,</span>
    <span class="n">RealCShearForceArray</span><span class="p">,</span>
    <span class="n">RealCGapForceArray</span><span class="p">,</span>
    <span class="n">RealConeAxForceArray</span><span class="p">,</span>
    <span class="n">RealSolidPressureForceArray</span><span class="p">,</span>
    <span class="n">RealCBeamForceArray</span><span class="p">,</span>
    <span class="n">RealBendForceArray</span><span class="p">,</span>
    <span class="n">RealForceVU2DArray</span><span class="p">,</span>
    <span class="n">RealCBeamForceVUArray</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">pyNastran.op2.tables.oef_forces.oef_complex_force_objects</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">ComplexRodForceArray</span><span class="p">,</span>
    <span class="n">ComplexCBarForceArray</span><span class="p">,</span> <span class="n">ComplexCWeldForceArray</span><span class="p">,</span>
    <span class="n">ComplexCBeamForceArray</span><span class="p">,</span>
    <span class="n">ComplexCBushForceArray</span><span class="p">,</span>
    <span class="n">ComplexCBearForceArray</span><span class="p">,</span>
    <span class="n">ComplexCShearForceArray</span><span class="p">,</span>
    <span class="n">ComplexSpringForceArray</span><span class="p">,</span>
    <span class="n">ComplexDamperForceArray</span><span class="p">,</span>
    <span class="n">ComplexViscForceArray</span><span class="p">,</span>
    <span class="n">ComplexPlateForceArray</span><span class="p">,</span>
    <span class="n">ComplexPlate2ForceArray</span><span class="p">,</span>
    <span class="n">ComplexSolidPressureForceArray</span><span class="p">,</span>
    <span class="n">ComplexCBendForceArray</span><span class="p">,</span>
    <span class="n">ComplexForceVU_2DArray</span><span class="p">,</span>
    <span class="n">ComplexCBeamForceVUArray</span><span class="p">,</span>
<span class="p">)</span>


<div class="viewcode-block" id="OEF"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.oef.html#pyNastran.op2.tables.oef_forces.oef.OEF">[docs]</a><span class="k">class</span> <span class="nc">OEF</span><span class="p">(</span><span class="n">OP2Common</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Defines OEFx table reading for element forces/heat flux&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">OP2Common</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="OEF.get_oef_prefix_postfix"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.oef.html#pyNastran.op2.tables.oef_forces.oef.OEF.get_oef_prefix_postfix">[docs]</a>    <span class="k">def</span> <span class="nf">get_oef_prefix_postfix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        NX Case Control  Block         Description</span>
<span class="sd">        ===============  ==========    ===========</span>
<span class="sd">        NLSTRESS         OESNLXR       Nonlinear static stresses</span>
<span class="sd">        BOUTPUT          OESNLBR       Slideline stresses</span>
<span class="sd">        STRESS           OESNLXD       Nonlinear Transient Stresses</span>
<span class="sd">        STRESS           OES1C/OSTR1C  Ply stresses/strains</span>
<span class="sd">        STRESS           OES1X         Element stresses with intermediate (CBAR and CBEAM)</span>
<span class="sd">                                       station stresses and stresses on nonlinear elements</span>
<span class="sd">        STRESS           OES/OESVM     Element stresses (linear elements only)</span>
<span class="sd">        STRAIN           OSTR1         Element strains</span>
<span class="sd">        STRESS/STRAIN    DOES1/DOSTR1  Scaled Response Spectra</span>
<span class="sd">        MODCON           OSTRMC        Modal contributions</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">postfix</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">table_name_bytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span>
        <span class="k">if</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OEF1X&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OEF1&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OEF2&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;force.&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;thermal_load.&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;HOEF1&#39;</span><span class="p">]:</span>
            <span class="n">postfix</span> <span class="o">=</span> <span class="s1">&#39;_flux&#39;</span>
        <span class="c1">#elif self.table_name in [&#39;OESNLXR&#39;]:</span>
            <span class="c1">#prefix = &#39;sideline_&#39;</span>
        <span class="c1">#elif self.table_name in [&#39;OESNLXD&#39;, &#39;OESNL1X&#39;, &#39;OESNLXR&#39;]:</span>
            <span class="c1">#prefix = &#39;nonlinear_&#39;</span>
        <span class="c1">#elif self.table_name == &#39;OESNLBR&#39;:</span>
            <span class="c1">#prefix = &#39;sideline_&#39;</span>
        <span class="c1">#elif self.table_name == &#39;OESRT&#39;:</span>
            <span class="c1">#prefix = &#39;strength_ratio.&#39;</span>
        <span class="c1">#elif self.table_name in [&#39;OESCP&#39;, &#39;OESTRCP&#39;]:</span>
            <span class="c1">#pass # TODO: update</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OEFCRM1&#39;</span><span class="p">]:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">504</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;crm.&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OEFCRM2&#39;</span><span class="p">]:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">504</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="c1"># sort2, random</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># real</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># real</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># sort2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># random</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;crm.&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OEFPSD1&#39;</span><span class="p">]:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">604</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;psd.&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OEFPSD2&#39;</span><span class="p">]:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">604</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># real</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># sort2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># random</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;psd.&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OEFRMS1&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OEFRMS2&#39;</span><span class="p">]:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">804</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="c1">#self.format_code = 1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># real</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># sort1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># random</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;rms.&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OEFNO1&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OEFNO2&#39;</span><span class="p">]:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">904</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># real</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># sort1</span>
            <span class="c1">#self.sort_bits[0] = 1 # sort2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_bits</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># random</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;nonlinear_factor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;no.&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OEFATO1&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;OEFATO2&#39;</span><span class="p">]:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;ato.&#39;</span>

        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;RAFCONS&#39;</span><span class="p">]:</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;RAFCONS.&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;RAFEATC&#39;</span><span class="p">]:</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;RAFEATC.&#39;</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;DOEF1&#39;</span><span class="p">]:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">postfix</span> <span class="o">=</span> <span class="s1">&#39;_abs&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">postfix</span> <span class="o">=</span> <span class="s1">&#39;_abs&#39;</span>  <span class="c1"># Scaled response spectra ABS</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                <span class="c1">#C:\NASA\m4\formats\git\examples\move_tpl\ms103.op2</span>
                <span class="n">postfix</span> <span class="o">=</span> <span class="s1">&#39;_srss&#39;</span> <span class="c1">#   # Scaled response spectra SRSS</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
                <span class="n">postfix</span> <span class="o">=</span> <span class="s1">&#39;_nrl&#39;</span>  <span class="c1"># Scaled response spectra NRL</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span> <span class="c1"># abs</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OEFIT&#39;</span><span class="p">]:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">25</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;failure_indices.&#39;</span>
            <span class="c1">#raise NotImplementedError(self.code_information())</span>
        <span class="k">elif</span> <span class="n">table_name_bytes</span> <span class="ow">in</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;OEFITSTN&#39;</span><span class="p">]:</span> <span class="c1"># composite failure indicies</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">25</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;failure_indices.&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span></div>

    <span class="k">def</span> <span class="nf">_oef_force_code</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the numwide codes for the element to determine if</span>
<span class="sd">        the real or complex result should be found.</span>
<span class="sd">        The format and sort codes do not always give the right answer...</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_nx</span><span class="p">:</span>
            <span class="n">real_mapper</span> <span class="o">=</span> <span class="n">NX_OEF_REAL_MAPPER</span>
            <span class="n">imag_mapper</span> <span class="o">=</span> <span class="n">NX_OEF_IMAG_MAPPER</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">real_mapper</span> <span class="o">=</span> <span class="n">MSC_OEF_REAL_MAPPER</span>
            <span class="n">imag_mapper</span> <span class="o">=</span> <span class="n">MSC_OEF_IMAG_MAPPER</span>


        <span class="k">try</span><span class="p">:</span>
            <span class="n">real</span> <span class="o">=</span> <span class="n">real_mapper</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">real</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">imag</span> <span class="o">=</span> <span class="n">imag_mapper</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">imag</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">real</span><span class="p">,</span> <span class="n">imag</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_read_oef1_3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Table 3 parser for OEF1 table&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">words</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;aCode&#39;</span><span class="p">,</span> <span class="s1">&#39;tCode&#39;</span><span class="p">,</span> <span class="s1">&#39;element_type&#39;</span><span class="p">,</span> <span class="s1">&#39;isubcase&#39;</span><span class="p">,</span>
            <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span>
            <span class="s1">&#39;format_code&#39;</span><span class="p">,</span> <span class="s1">&#39;num_wide&#39;</span><span class="p">,</span> <span class="s1">&#39;o_code&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span>
            <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span>
            <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span>
            <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span>
            <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;Title&#39;</span><span class="p">,</span> <span class="s1">&#39;subtitle&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parse_approach_code</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="c1">#: element type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;element_type&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1"># dynamic load set ID/random code</span>
        <span class="c1">#self.dLoadID = self.add_data_parameter(data, &#39;dLoadID&#39;, b&#39;i&#39;, 8, False)</span>

        <span class="c1">#: format code</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;format_code&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1">#: number of words per entry in record</span>
        <span class="c1">#: .. note: is this needed for this table ???</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;num_wide&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1">#: undefined in DMAP...</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">o_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;o_code&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1">#: thermal flag; 1 for heat ransfer, 0 otherwise</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;thermal&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1">## assuming tCode=1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>   <span class="c1"># statics</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loadID</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;loadID&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>  <span class="c1"># load set ID number</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;loadID&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setNullNonlinearFactor</span><span class="p">()</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>  <span class="c1"># normal modes/buckling (real eigenvalues)</span>
            <span class="c1">#: mode number</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
            <span class="c1">#: eigenvalue</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">eign</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;eign&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cycle</span> <span class="o">=</span> <span class="mf">0.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_mode_cycle</span><span class="p">(</span><span class="s1">&#39;cycle&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="s1">&#39;eign&#39;</span><span class="p">,</span> <span class="s1">&#39;cycle&#39;</span><span class="p">])</span>
            <span class="c1"># TODO: mode_cycle is not defined?</span>
            <span class="c1">#self.data_names = self.apply_data_code_value(&#39;data_names&#39;, [&#39;mode&#39;, &#39;eign&#39;, &#39;mode_cycle&#39;])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>  <span class="c1"># differential stiffness 0</span>
            <span class="c1">#: load set ID number</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loadID</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;loadID&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;loadID&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>  <span class="c1"># differential stiffness 1</span>
            <span class="c1">#: load set ID number</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loadID</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;loadID&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;loadID&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>   <span class="c1"># frequency</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">freq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;freq&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>  <span class="c1"># frequency</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;freq&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>  <span class="c1"># transient</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>  <span class="c1"># time step</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>  <span class="c1"># pre-buckling</span>
            <span class="c1">#: load set ID number</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loadID</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;loadID&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
            <span class="c1">#self.apply_data_code_value(&#39;data_names&#39;,[&#39;lsdvmn&#39;])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;loadID&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>  <span class="c1"># post-buckling</span>
            <span class="c1">#: load set ID number</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loadID</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;loadID&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
            <span class="c1">#: real eigenvalue</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">eigr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;eigr&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;loadID&#39;</span><span class="p">,</span> <span class="s1">&#39;eigr&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span>  <span class="c1"># complex eigenvalues</span>
            <span class="c1">#: mode number</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
            <span class="c1">#: real eigenvalue</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">eigr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;eigr&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="c1">#: imaginary eigenvalue</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">eigi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;eigi&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="s1">&#39;eigr&#39;</span><span class="p">,</span> <span class="s1">&#39;eigi&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>  <span class="c1"># nonlinear statics</span>
            <span class="c1">#: load step</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_step</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;load_step&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;load_step&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span>  <span class="c1"># geometric nonlinear statics</span>
            <span class="c1">#: load set ID number</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loadID</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;loadID&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;loadID&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;invalid analysis_code...analysis_code=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fix_format_code</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parse_thermal_code</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_mapper</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="k">raise</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>

        <span class="c1">#self.element_name = self.element_mapper[self.element_type]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_code</span><span class="p">[</span><span class="s1">&#39;element_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  </span><span class="si">%-14s</span><span class="s1"> = </span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;element_name&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  </span><span class="si">%-14s</span><span class="s1"> = </span><span class="si">%r</span><span class="s1"> </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;approach_code&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">approach_code</span><span class="p">,</span>
                                                           <span class="bp">self</span><span class="o">.</span><span class="n">approach_code_str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">approach_code</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  </span><span class="si">%-14s</span><span class="s1"> = </span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;tCode&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tCode</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  </span><span class="si">%-14s</span><span class="s1"> = </span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;isubcase&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">isubcase</span><span class="p">))</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">_read_title</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_mapper</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;element_type = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_write_debug_bits</span><span class="p">()</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">!=</span> <span class="mi">146</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
        <span class="c1">#print(&#39;OEF-%s&#39; % self.element_name)</span>

    <span class="k">def</span> <span class="nf">_read_oef2_3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">unused_ndata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Table 3 parser for OEF2 table&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">words</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;aCode&#39;</span><span class="p">,</span> <span class="s1">&#39;tCode&#39;</span><span class="p">,</span> <span class="s1">&#39;element_type&#39;</span><span class="p">,</span> <span class="s1">&#39;isubcase&#39;</span><span class="p">,</span>
            <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span>
            <span class="s1">&#39;format_code&#39;</span><span class="p">,</span> <span class="s1">&#39;num_wide&#39;</span><span class="p">,</span> <span class="s1">&#39;o_code&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span>
            <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span>
            <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span>
            <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">,</span>
            <span class="s1">&#39;???&#39;</span><span class="p">,</span> <span class="s1">&#39;Title&#39;</span><span class="p">,</span> <span class="s1">&#39;subtitle&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parse_approach_code</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>  <span class="c1"># 3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="c1">#: element type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;element_type&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1"># dynamic load set ID/random code</span>
        <span class="c1">#self.dLoadID = self.add_data_parameter(data, &#39;dLoadID&#39;, b&#39;i&#39;, 8, False)</span>

        <span class="c1">#: format code</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;format_code&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1">#: number of words per entry in record</span>
        <span class="c1">#: .. note: is this needed for this table ???</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;num_wide&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1">#: undefined in DMAP...</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">o_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;o_code&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="c1">#: thermal flag; 1 for heat ransfer, 0 otherwise</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;thermal&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">element_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;element_id&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">fix_device_code</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_element_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;_element_id&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">apply_nonlinear_factor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">add_to_dict</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># static...because reasons.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>  <span class="c1"># real eigenvalues</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">eign</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;eign&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mode_cycle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;mode_cycle&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>  <span class="c1"># mode or cycle .. todo:: confused on the type - F1???</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">,</span> <span class="s1">&#39;eign&#39;</span><span class="p">,</span> <span class="s1">&#39;mode_cycle&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>   <span class="c1"># frequency</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;analysis_method&#39;</span><span class="p">,</span> <span class="s1">&#39;freq&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>  <span class="c1"># transient</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;analysis_method&#39;</span><span class="p">,</span> <span class="s1">&#39;time&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>  <span class="c1"># pre-buckling</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;analysis_method&#39;</span><span class="p">,</span> <span class="s1">&#39;lsdvmn&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>  <span class="c1"># post-buckling</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">eigr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;eigr&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">,</span> <span class="s1">&#39;eigr&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;analysis_method&#39;</span><span class="p">,</span> <span class="s1">&#39;eigr&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span>  <span class="c1"># complex eigenvalues</span>
            <span class="c1"># mode number</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">eigr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;eigr&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">eigi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_data_parameter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;eigi&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">,</span> <span class="s1">&#39;eigr&#39;</span><span class="p">,</span> <span class="s1">&#39;eigi&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;analysis_method&#39;</span><span class="p">,</span> <span class="s1">&#39;mode&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>  <span class="c1"># nonlinear statics</span>
            <span class="c1"># load step</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;analysis_method&#39;</span><span class="p">,</span> <span class="s1">&#39;lftsfq&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span>  <span class="c1"># old geometric nonlinear statics</span>
            <span class="c1"># load set number</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span> <span class="o">==</span> <span class="mi">12</span><span class="p">:</span>  <span class="c1"># contran ? (may appear as aCode=6)  --&gt; straight from DMAP...grrr...</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">data_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_data_code_value</span><span class="p">(</span><span class="s1">&#39;data_names&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;element_id&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;invalid analysis_code...analysis_code=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_code</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_fix_oes_sort2</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_element_name</span><span class="p">()</span>
        <span class="c1">#assert isinstance(self.nonlinear_factor, int), self.nonlinear_factor</span>

    <span class="k">def</span> <span class="nf">_read_oef1_4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Table 4 parser for OEF1 table&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setup_op2_subcase</span><span class="p">(</span><span class="s1">&#39;FORCE&#39;</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_oef1_loads</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_oef1_thermal</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">]:</span> <span class="c1"># 2=ABS, 4=SRSS, 8=NRL</span>
            <span class="c1">#C:\NASA\m4\formats\git\examples\move_tpl\ms103.op2 # SRSS</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_oef1_loads</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="s1">&#39;thermal=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_oef2_4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c1"># and self.element_type not in [77]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setup_op2_subcase</span><span class="p">(</span><span class="s1">&#39;FORCE&#39;</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_oef1_loads</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="s1">&#39;thermal=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_read_oef1_thermal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Table 4 parser for OEF1 thermal table&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="s1">&#39;element_forces&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span>
        <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_oef_prefix_postfix</span><span class="p">()</span>

        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#thermal</span>
        <span class="c1">#is_magnitude_phase = self.is_magnitude_phase()</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span>

        <span class="c1">#flag = &#39;element_id&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">69</span><span class="p">]:</span>  <span class="c1"># ROD,BEAM,TUBE,CONROD,BAR,BEND</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thermal_1d_heat_flux</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nelements</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">n</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">33</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">74</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span>  <span class="c1"># CQUAD4, CTRIAX6, CQUAD8, CTRIA3, CTRIA6</span>
                                   <span class="mi">39</span><span class="p">,</span> <span class="mi">67</span><span class="p">,</span> <span class="mi">68</span><span class="p">]:</span>  <span class="c1"># TETRA, HEXA, PENTA</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thermal_2d_3d_heat_flux</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">107</span><span class="p">,</span> <span class="mi">108</span><span class="p">,</span> <span class="mi">109</span><span class="p">]:</span>  <span class="c1"># CHBDYE, CHBDYG, CHBDYP</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thermal_chbdy</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">110</span><span class="p">:</span>  <span class="c1"># CONV</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thermal_conv</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">145</span><span class="p">,</span> <span class="mi">146</span><span class="p">,</span> <span class="mi">147</span><span class="p">]:</span>  <span class="c1"># VUHEXA,VUPENTA,VUTETRA</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thermal_vu_solid</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">189</span><span class="p">,</span> <span class="mi">190</span><span class="p">]:</span>  <span class="c1"># VUQUAD,VUTRIA</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thermal_vu_shell</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">191</span><span class="p">:</span>  <span class="c1"># VUBEAM</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thermal_vu_beam</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;OEF sort1 thermal Type=</span><span class="si">%s</span><span class="s1"> num=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">nelements</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">n</span>


        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal</span>
        <span class="k">assert</span> <span class="n">ndata</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ndata</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">nelements</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;nelements=</span><span class="si">%r</span><span class="s1"> element_type=</span><span class="si">%s</span><span class="s1"> element_name=</span><span class="si">%r</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">UnboundLocalError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">UnboundLocalError</span><span class="p">(</span><span class="s1">&#39;element_name=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">)</span>
        <span class="c1">#assert ndata % ntotal == 0, &#39;%s n=%s nwide=%s len=%s ntotal=%s&#39; % (self.element_name, ndata % ntotal, ndata % self.num_wide, ndata, ntotal)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">==</span> <span class="n">ntotal</span><span class="p">,</span> <span class="s1">&#39;numwide*4=</span><span class="si">%s</span><span class="s1"> ntotal=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span><span class="o">*</span><span class="mi">4</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;n=</span><span class="si">%s</span><span class="s1"> element_type=</span><span class="si">%s</span><span class="s1"> element_name=</span><span class="si">%s</span><span class="s1"> numwide=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_thermal_1d_heat_flux</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        1-CROD</span>
<span class="sd">        2-CBEAM</span>
<span class="sd">        3-CTUBE</span>
<span class="sd">        10-CONROD</span>
<span class="sd">        34-CBAR</span>
<span class="sd">        69-CBEND</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">Real1DHeatFluxArray</span>
        <span class="c1">#if self.element_type == 1: # CROD</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;crod_thermal_load&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbeam_thermal_load&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctube_thermal_load&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;conrod_thermal_load&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">34</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbar_thermal_load&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">69</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbend_thermal_load&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;element_type=</span><span class="si">%s</span><span class="s1"> element_name=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">36</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="c1">#if self.is_debug_file:</span>
                <span class="c1">#self.binary_debug.write(&#39;  [cap, element1, element2, ..., cap]\n&#39;)</span>
                <span class="c1">#self.binary_debug.write(&#39;  cap = %i  # assume 1 cap when there could have been multiple\n&#39; % ndata)</span>
                <span class="c1">#self.binary_debug.write(&#39;  #elementi = [eid_device, axial, torque]\n&#39;)</span>
                <span class="c1">#self.binary_debug.write(&#39;  nelements=%i; nnodes=1 # centroid\n&#39; % nelements)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>

                <span class="n">strings</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_uendian</span> <span class="o">+</span> <span class="s1">&#39;S4&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="n">s1</span><span class="o">+</span><span class="n">s2</span> <span class="k">for</span> <span class="n">s1</span><span class="p">,</span> <span class="n">s2</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">strings</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">strings</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">])])</span>
                <span class="c1">#print(s)</span>
                <span class="c1">#print(&#39;itime = &#39;, obj.itime)</span>
                <span class="c1">#print(&#39;---------&#39;)</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_data_type</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span>
                    <span class="c1">#obj.element_type[obj.itime, itotal:itotal2, :] = strings[:, 3:]</span>

                <span class="c1">#[etype, xgrad, ygrad, zgrad, xflux, yflux, zflux]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;8s6f&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">eType</span><span class="p">,</span> <span class="n">xgrad</span><span class="p">,</span> <span class="n">ygrad</span><span class="p">,</span> <span class="n">zgrad</span><span class="p">,</span> <span class="n">xflux</span><span class="p">,</span> <span class="n">yflux</span><span class="p">,</span> <span class="n">zflux</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">eType</span><span class="p">,</span> <span class="n">xgrad</span><span class="p">,</span> <span class="n">ygrad</span><span class="p">,</span> <span class="n">zgrad</span><span class="p">,</span> <span class="n">xflux</span><span class="p">,</span> <span class="n">yflux</span><span class="p">,</span> <span class="n">zflux</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_thermal_2d_3d_heat_flux</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        33-QUAD4-centroidal</span>
<span class="sd">        53-TRIAX6</span>
<span class="sd">        64-QUAD8</span>
<span class="sd">        74-TRIA3</span>
<span class="sd">        75-TRIA6</span>

<span class="sd">        39-TETRA</span>
<span class="sd">        67-HEXA</span>
<span class="sd">        68-PENTA</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">33</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquad4_thermal_load&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">53</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctriax6_thermal_load&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">64</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquad8_thermal_load&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">74</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctria3_thermal_load&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">75</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctria6_thermal_load&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">39</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctetra_thermal_load&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">67</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;chexa_thermal_load&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">68</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cpenta_thermal_load&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;element_type=</span><span class="si">%s</span><span class="s1"> element_name=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

        <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealHeatFlux_2D_3DArray</span>
        <span class="c1">#if self.element_type == 1: # CROD</span>
        <span class="c1">#result_name = &#39;thermalLoad_2D_3D&#39;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span>  <span class="c1"># real - 2D</span>
            <span class="c1"># [33, 53, 64, 74, 75]</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">36</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="c1">#if self.is_debug_file:</span>
                <span class="c1">#self.binary_debug.write(&#39;  [cap, element1, element2, ..., cap]\n&#39;)</span>
                <span class="c1">#self.binary_debug.write(&#39;  cap = %i  # assume 1 cap when there could have been multiple\n&#39; % ndata)</span>
                <span class="c1">#self.binary_debug.write(&#39;  #elementi = [eid_device, axial, torque]\n&#39;)</span>
                <span class="c1">#self.binary_debug.write(&#39;  nelements=%i; nnodes=1 # centroid\n&#39; % nelements)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="c1">#if obj.itime == 0:</span>
                <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
                <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                <span class="n">strings</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_uendian</span> <span class="o">+</span> <span class="s1">&#39;S4&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">element_data_type</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="n">s1</span><span class="o">+</span><span class="n">s2</span> <span class="k">for</span> <span class="n">s1</span><span class="p">,</span> <span class="n">s2</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">strings</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">strings</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">])])</span>

                <span class="c1">#[etype, xgrad, ygrad, zgrad, xflux, yflux, zflux]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># no zed on this element for some reason...</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                    <span class="n">fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;8s 6f&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;16s 6d&#39;</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">etype</span><span class="p">,</span> <span class="n">xgrad</span><span class="p">,</span> <span class="n">ygrad</span><span class="p">,</span> <span class="n">zgrad</span><span class="p">,</span> <span class="n">xflux</span><span class="p">,</span> <span class="n">yflux</span><span class="p">,</span> <span class="n">zflux</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">etype</span><span class="p">,</span> <span class="n">xgrad</span><span class="p">,</span> <span class="n">ygrad</span><span class="p">,</span> <span class="n">zgrad</span><span class="p">,</span> <span class="n">xflux</span><span class="p">,</span> <span class="n">yflux</span><span class="p">,</span> <span class="n">zflux</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>  <span class="c1"># real - 3D</span>
            <span class="c1"># [39, 67, 68]:  # HEXA,PENTA</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">40</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">assert</span> <span class="n">nelements</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ndata=</span><span class="si">%s</span><span class="s1"> ntotal=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ndata</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                    <span class="n">strings</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_uendian</span> <span class="o">+</span> <span class="s1">&#39;S4&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_data_type</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="n">s1</span><span class="o">+</span><span class="n">s2</span> <span class="k">for</span> <span class="n">s1</span><span class="p">,</span> <span class="n">s2</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">strings</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">strings</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">])])</span>

                <span class="c1">#[etype, xgrad, ygrad, zgrad, xflux, yflux, zflux, zed]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;8s6fi&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">etype</span><span class="p">,</span> <span class="n">xgrad</span><span class="p">,</span> <span class="n">ygrad</span><span class="p">,</span> <span class="n">zgrad</span><span class="p">,</span> <span class="n">xflux</span><span class="p">,</span> <span class="n">yflux</span><span class="p">,</span> <span class="n">zflux</span><span class="p">,</span> <span class="n">unused_zed</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">etype</span><span class="p">,</span> <span class="n">xgrad</span><span class="p">,</span> <span class="n">ygrad</span><span class="p">,</span> <span class="n">zgrad</span><span class="p">,</span> <span class="n">xflux</span><span class="p">,</span> <span class="n">yflux</span><span class="p">,</span> <span class="n">zflux</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_thermal_chbdy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        107-CHBDYE</span>
<span class="sd">        108-CHBDYG</span>
<span class="sd">        109-CHBDYP</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#if self.table_name in [&#39;OEF1X&#39;]:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">107</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;chbdye_thermal_load&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">108</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;chbdyg_thermal_load&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">109</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;chbdyp_thermal_load&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;element_type=</span><span class="si">%s</span><span class="s1"> element_name=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

        <span class="c1">#elif self.table_name in [&#39;HOEF1&#39;]:</span>
            <span class="c1">#if self.element_type == 107:</span>
                <span class="c1">#result_name = &#39;chbdye_thermal_flux&#39;</span>
            <span class="c1">#elif self.element_type == 108:</span>
                <span class="c1">#result_name = &#39;chbdyg_thermal_flux&#39;</span>
            <span class="c1">#elif self.element_type == 109:</span>
                <span class="c1">#result_name = &#39;chbdyp_thermal_flux&#39;</span>
            <span class="c1">#else:</span>
                <span class="c1">#raise NotImplementedError(&#39;element_type=%s element_name=%s&#39; % (</span>
                    <span class="c1">#self.element_type, self.element_name))</span>
        <span class="c1">#else:</span>
            <span class="c1">#raise NotImplementedError(msg)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="c1">#result_name = &#39;thermalLoad_CHBDY&#39;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
            <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>  <span class="c1"># real</span>
                <span class="n">obj_vector_real</span> <span class="o">=</span> <span class="n">RealChbdyHeatFluxArray</span>
                <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">32</span>
                <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
                <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                    <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_vector_real</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
                <span class="c1">#if self.is_debug_file:</span>
                    <span class="c1">#self.binary_debug.write(&#39;  [cap, element1, element2, ..., cap]\n&#39;)</span>
                    <span class="c1">#self.binary_debug.write(&#39;  cap = %i  # assume 1 cap when there could have been multiple\n&#39; % ndata)</span>
                    <span class="c1">#self.binary_debug.write(&#39;  #elementi = [eid_device, etype, fapplied, free_conv, force_conv, frad, ftotal]\n&#39;)</span>
                    <span class="c1">#self.binary_debug.write(&#39;  nelements=%i; nnodes=1 # centroid\n&#39; % nelements)</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                    <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                    <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                    <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                    <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                    <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
                        <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                        <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                        <span class="c1">#obj.element_type[obj.itime, itotal:itotal2, :] = strings[:, 3:]</span>

                    <span class="c1">#[fapplied, free_conv, force_conv, frad, ftotal]</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;8s5f&#39;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">32</span><span class="p">]</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                        <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">etype</span><span class="p">,</span> <span class="n">fapplied</span><span class="p">,</span> <span class="n">free_conv</span><span class="p">,</span> <span class="n">force_conv</span><span class="p">,</span> <span class="n">frad</span><span class="p">,</span> <span class="n">ftotal</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                        <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                            <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  </span><span class="si">%s</span><span class="s1"> -&gt; [</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span>
                                                    <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">eid_device</span><span class="p">,</span> <span class="n">etype</span><span class="p">,</span> <span class="n">fapplied</span><span class="p">,</span> <span class="n">free_conv</span><span class="p">,</span> <span class="n">force_conv</span><span class="p">,</span> <span class="n">frad</span><span class="p">,</span> <span class="n">ftotal</span><span class="p">))</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">etype</span><span class="p">,</span> <span class="n">fapplied</span><span class="p">,</span> <span class="n">free_conv</span><span class="p">,</span> <span class="n">force_conv</span><span class="p">,</span> <span class="n">frad</span><span class="p">,</span> <span class="n">ftotal</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_thermal_conv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># 110-CONV</span>
        <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;conv_thermal_load&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">16</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">RealConvHeatFluxArray</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="c1">#if self.is_debug_file:</span>
                <span class="c1">#self.binary_debug.write(&#39;  [cap, element1, element2, ..., cap]\n&#39;)</span>
                <span class="c1">#self.binary_debug.write(&#39;  cap = %i  # assume 1 cap when there could have been multiple\n&#39; % ndata)</span>
                <span class="c1">#self.binary_debug.write(&#39;  #elementi = [eid_device, etype, fapplied, free_conv, force_conv, frad, ftotal]\n&#39;)</span>
                <span class="c1">#self.binary_debug.write(&#39;  nelements=%i; nnodes=1 # centroid\n&#39; % nelements)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">nids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="k">assert</span> <span class="n">nids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">nids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">nids</span>

                <span class="c1">#[eid, free_conv, cntl_node, free_conv_k]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">ielement2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;fif&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">16</span><span class="p">]</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="mi">16</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">free_conv</span><span class="p">,</span> <span class="n">cntl_node</span><span class="p">,</span> <span class="n">free_conv_k</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="k">assert</span> <span class="n">cntl_node</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">cntl_node</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">cntl_node</span><span class="p">,</span> <span class="n">free_conv</span><span class="p">,</span> <span class="n">free_conv_k</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_thermal_vu_shell</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        189-VUQUAD</span>
<span class="sd">        190-VUTRIA</span>

<span class="sd">        TODO: vectorize</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">27</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;thermalLoad_VU&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
            <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">189</span><span class="p">:</span>
                <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">4</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">190</span><span class="p">:</span>
                <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">3</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">191</span><span class="p">:</span>
                <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>

            <span class="n">numwide</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">+</span> <span class="mi">7</span> <span class="o">*</span> <span class="n">nnodes</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="p">(</span><span class="mi">24</span> <span class="o">+</span> <span class="mi">28</span> <span class="o">*</span> <span class="n">nnodes</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="k">assert</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="n">numwide</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">RealHeatFluxVUShellArray</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="n">nnodes</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes</span>
                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>

                <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">parent</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
                    <span class="n">coord</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span>
                    <span class="c1"># icord - 4s</span>
                    <span class="n">theta</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">]</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_parent_coord_icord</span><span class="p">[</span><span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_parent_coord_icord</span><span class="p">[</span><span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">parent</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_parent_coord_icord</span><span class="p">[</span><span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">coord</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_parent_coord_icord</span><span class="p">[</span><span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">theta</span>
                <span class="c1">#obj.data[itotal:itotal2, 0] = floats[:, 4]</span>

                <span class="c1">#ints2 = ints[:, 6:].reshape(nelements * nnodes, 7)</span>
                <span class="n">floats2</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">6</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>

                <span class="c1">#[vugrid]</span>
                <span class="c1">#[xgrad, ygrad, zgrad, xflux, yflux, zflux]</span>
                <span class="c1">#obj.int_data[obj.itime, itotal:itotal2, 0] = ints2[:, 0]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats2</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3i4s2i&#39;</span><span class="p">)</span>
                <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i6f&#39;</span><span class="p">)</span>
                <span class="n">ntotal1</span> <span class="o">=</span> <span class="mi">24</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 6*4</span>
                <span class="n">ntotal2</span> <span class="o">=</span> <span class="mi">28</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 7*4</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal1</span><span class="p">]</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal1</span>

                    <span class="n">out</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">coord</span><span class="p">,</span> <span class="n">icord</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">unused_null</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="c1">#self.log.debug(&#39;RealHeatFluxVUArray = %s&#39; % str(out))</span>

                    <span class="k">for</span> <span class="n">unused_j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes</span><span class="p">):</span>
                        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal2</span><span class="p">]</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal2</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                        <span class="c1">#print(out)</span>
                        <span class="n">vugrid</span><span class="p">,</span> <span class="n">xgrad</span><span class="p">,</span> <span class="n">ygrad</span><span class="p">,</span> <span class="n">zgrad</span><span class="p">,</span> <span class="n">xflux</span><span class="p">,</span> <span class="n">yflux</span><span class="p">,</span> <span class="n">zflux</span> <span class="o">=</span> <span class="n">out</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">coord</span><span class="p">,</span> <span class="n">icord</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span>
                                      <span class="n">xgrad</span><span class="p">,</span> <span class="n">ygrad</span><span class="p">,</span> <span class="n">zgrad</span><span class="p">,</span> <span class="n">xflux</span><span class="p">,</span> <span class="n">yflux</span><span class="p">,</span> <span class="n">zflux</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_thermal_vu_solid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        145-VUHEXA</span>
<span class="sd">        146-VUPENTA</span>
<span class="sd">        147-VUTETRA</span>

<span class="sd">        TODO: vectorize</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">147</span><span class="p">:</span>  <span class="c1"># VUTETRA</span>
            <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">146</span><span class="p">:</span>  <span class="c1"># VUPENTA</span>
            <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">6</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">145</span><span class="p">:</span>  <span class="c1"># VUHEXA</span>
            <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">8</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="c1">#msg = self.code_information()</span>
            <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg), None, None</span>

        <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;thermalLoad_VU_3D&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">numwide_real</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">7</span> <span class="o">*</span> <span class="n">nnodes</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_real</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">28</span> <span class="o">*</span> <span class="n">nnodes</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="c1">#self.create_transient_object(result_name, self.thermalLoad_VU_3D, HeatFluxVU_3DArray)</span>
            <span class="c1">#is_vectorized = False</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">RealHeatFluxVU3DArray</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="n">nnodes</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span>
                <span class="n">floats2</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="c1">#if obj.itime == 0:</span>
                <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">ints2</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
                <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                <span class="n">parent</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
                <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">element_parent</span><span class="p">[</span><span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">element_parent</span><span class="p">[</span><span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">parent</span>

                <span class="c1">#[vugrid, xgrad, ygrad, zgrad, xflux, yflux, zflux]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">vugrid</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">ints2</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats2</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">struct_2i</span>
                <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;6f&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">8</span><span class="p">])</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="mi">8</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="n">grad_fluxes</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">unused_j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes</span><span class="p">):</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">28</span><span class="p">])</span>
                        <span class="n">grad_fluxes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="mi">28</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">grad_fluxes</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_thermal_vu_beam</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;191-VUBEAM&quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># TODO: vectorize</span>
        <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="n">numwide_real</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">+</span> <span class="mi">7</span> <span class="o">*</span> <span class="n">nnodes</span>

        <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;vu_beam_thermal_load&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_real</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">16</span> <span class="o">+</span> <span class="mi">28</span> <span class="o">*</span> <span class="n">nnodes</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">RealHeatFluxVUBeamArray</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="n">nnodes</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes</span>
                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>

                <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">parent</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
                    <span class="n">coord</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span>
                    <span class="c1"># icord - 4s</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_parent_coord</span><span class="p">[</span><span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_parent_coord</span><span class="p">[</span><span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">parent</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_parent_coord</span><span class="p">[</span><span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">coord</span>
                <span class="c1">#obj.data[itotal:itotal2, 0] = floats[:, 4]</span>

                <span class="n">ints2</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
                <span class="n">floats2</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>

                <span class="c1">#[vugrid]</span>
                <span class="c1">#[xgrad, ygrad, zgrad, xflux, yflux, zflux]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">vugrid</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ints2</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats2</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;iii4s&#39;</span><span class="p">)</span>
                <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i6f&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">16</span><span class="p">]</span>  <span class="c1"># 4*4</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="mi">16</span>

                    <span class="n">out</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">coord</span><span class="p">,</span> <span class="n">icord</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="n">data_in</span> <span class="o">=</span> <span class="p">[</span><span class="n">eid</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">coord</span><span class="p">,</span> <span class="n">icord</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;VUBeam </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">data_in</span><span class="p">)</span>

                    <span class="n">grad_fluxes</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">unused_j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes</span><span class="p">):</span>
                        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">28</span><span class="p">]</span>  <span class="c1"># 7*4</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="mi">28</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                        <span class="n">grad_fluxes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
                    <span class="n">data_in</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">grad_fluxes</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">coord</span><span class="p">,</span> <span class="n">icord</span><span class="p">,</span> <span class="n">grad_fluxes</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">118</span><span class="p">:</span>  <span class="c1"># CWELDP</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;OEF sort1 thermal Type=</span><span class="si">%s</span><span class="s1"> num=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;OEF sort1 thermal Type=</span><span class="si">%s</span><span class="s1"> num=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_print_obj_name_on_crash</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decorator debugging function to print the object name and an needed parameters</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">new_func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            The actual function exec&#39;d by the decorated function.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">raise</span>
                <span class="c1">#print(&quot;----------&quot;)</span>
                <span class="c1">#try:</span>
                    <span class="c1">#print(self.obj)</span>
                <span class="c1">#except:</span>
                    <span class="c1">#print(&quot;error printing %r&quot; % self.obj.__class__.__name__)</span>
                <span class="c1">#print(self.data_code)</span>
                <span class="c1">#if self.obj is not None:</span>
                    <span class="c1">##from pyNastran.utils import object_attributes</span>
                    <span class="c1">##print object_attributes(self.obj)</span>
                    <span class="c1">#print(self.obj.data_code)</span>
                <span class="c1">#print(&quot;----------&quot;)</span>
                <span class="c1">#raise</span>
            <span class="k">return</span> <span class="n">n</span>
        <span class="k">return</span> <span class="n">new_func</span>

    <span class="k">def</span> <span class="nf">_read_oef1_loads_nasa95</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reads the OEF1 table for NASA 95 Nastran&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="s1">&#39;element_forces&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span>
        <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_oef_prefix_postfix</span><span class="p">()</span>
        <span class="c1">#print(&#39;prefix=%r postfix=%s element_name=%s&#39; % (prefix, postfix, self.element_name))</span>
        <span class="p">(</span><span class="n">num_wide_real</span><span class="p">,</span> <span class="n">num_wide_imag</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_force_code</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  num_wide_real = </span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">num_wide_real</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  num_wide_imag = </span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">num_wide_imag</span><span class="p">)</span>

        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">is_magnitude_phase</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_magnitude_phase</span><span class="p">()</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">]:</span>  <span class="c1"># rods</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_crod</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>  <span class="c1"># cbeam</span>
            <span class="c1">#2-CBEAM</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_cbeam</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span>   <span class="c1"># springs</span>
                                   <span class="mi">20</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">23</span><span class="p">]:</span>  <span class="c1"># dampers</span>
            <span class="c1"># 11-CELAS1</span>
            <span class="c1"># 12-CELAS2</span>
            <span class="c1"># 13-CELAS3</span>
            <span class="c1"># 14-CELAS4</span>

            <span class="c1"># 20-CDAMP1</span>
            <span class="c1"># 21-CDAMP2</span>
            <span class="c1"># 22-CDAMP3</span>
            <span class="c1"># 23-CDAMP4</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_celas_cdamp</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">24</span><span class="p">:</span>  <span class="c1"># CVISC</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_cvisc</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">34</span><span class="p">:</span>  <span class="c1"># cbar</span>
            <span class="c1"># 34-CBAR</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_cbar_34</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">83</span><span class="p">]:</span> <span class="c1"># centroidal shells</span>
            <span class="c1"># 33-CQUAD4???</span>
            <span class="c1"># 83-CTRIA3</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_shells_centroidal</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>  <span class="c1"># cshear</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_cshear</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">35</span><span class="p">:</span>  <span class="c1"># cconeax</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_cconeax</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">nelements</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">n</span>

        <span class="c1">#assert self.thermal == 0, self.thermal</span>
        <span class="k">assert</span> <span class="n">ndata</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ndata</span>
        <span class="k">assert</span> <span class="n">nelements</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;nelements=</span><span class="si">%r</span><span class="s1"> element_type=</span><span class="si">%s</span><span class="s1"> element_name=</span><span class="si">%r</span><span class="s1"> num_wide=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span><span class="p">)</span>
        <span class="c1">#assert ndata % ntotal == 0, &#39;%s n=%s nwide=%s len=%s ntotal=%s&#39; % (self.element_name, ndata % ntotal, ndata % self.num_wide, ndata, ntotal)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">==</span> <span class="n">ntotal</span><span class="p">,</span> <span class="s1">&#39;numwide*4=</span><span class="si">%s</span><span class="s1"> ntotal=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span><span class="o">*</span><span class="mi">4</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">n</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="c1"># @_print_obj_name_on_crash</span>
    <span class="k">def</span> <span class="nf">_read_oef1_loads</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reads the OEF1 table; stores the element forces/heat flux.&quot;&quot;&quot;</span>
        <span class="c1">#self._apply_oef_ato_crm_psd_rms_no(&#39;&#39;) # TODO: just testing</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="s1">&#39;element_forces&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span>
        <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_oef_prefix_postfix</span><span class="p">()</span>
        <span class="c1">#print(&#39;prefix=%r postfix=%s element_name=%s&#39; % (prefix, postfix, self.element_name))</span>
        <span class="n">unused_flag</span> <span class="o">=</span> <span class="s1">&#39;element_id&#39;</span>
        <span class="p">(</span><span class="n">num_wide_real</span><span class="p">,</span> <span class="n">num_wide_imag</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_force_code</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  num_wide_real = </span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">num_wide_real</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  num_wide_imag = </span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">num_wide_imag</span><span class="p">)</span>

        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">is_magnitude_phase</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_magnitude_phase</span><span class="p">()</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">]:</span>  <span class="c1"># rods</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_crod</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>  <span class="c1"># cbeam</span>
            <span class="c1">#2-CBEAM</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_cbeam</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span>   <span class="c1"># springs</span>
                                   <span class="mi">20</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">23</span><span class="p">]:</span>  <span class="c1"># dampers</span>
            <span class="c1"># 11-CELAS1</span>
            <span class="c1"># 12-CELAS2</span>
            <span class="c1"># 13-CELAS3</span>
            <span class="c1"># 14-CELAS4</span>

            <span class="c1"># 20-CDAMP1</span>
            <span class="c1"># 21-CDAMP2</span>
            <span class="c1"># 22-CDAMP3</span>
            <span class="c1"># 23-CDAMP4</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_celas_cdamp</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">24</span><span class="p">:</span>  <span class="c1"># CVISC</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_cvisc</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">34</span><span class="p">:</span>  <span class="c1"># cbar</span>
            <span class="c1"># 34-CBAR</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_cbar_34</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">100</span><span class="p">:</span>  <span class="c1"># cbar</span>
            <span class="c1">#100-BARS</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_cbar_100</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">33</span><span class="p">,</span> <span class="mi">74</span><span class="p">,</span> <span class="mi">227</span><span class="p">,</span> <span class="mi">228</span><span class="p">]:</span> <span class="c1"># centroidal shells</span>
            <span class="c1"># 33-CQUAD4</span>
            <span class="c1"># 74-CTRIA3</span>
            <span class="c1"># 227-CTRIAR? (C:\MSC.Software\simcenter_nastran_2019.2\tpl_post1\cqrdbx102.op2)</span>
            <span class="c1"># 228-CQUADR</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_shells_centroidal</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">64</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">82</span><span class="p">,</span> <span class="mi">144</span><span class="p">]:</span> <span class="c1"># bilinear shells</span>
            <span class="c1"># 64-CQUAD8</span>
            <span class="c1"># 70-CTRIAR</span>
            <span class="c1"># 75-CTRIA6</span>
            <span class="c1"># 82-CQUADR</span>
            <span class="c1"># 144-CQUAD4-bilinear</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_shells_nodal</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">95</span><span class="p">,</span> <span class="mi">96</span><span class="p">,</span> <span class="mi">97</span><span class="p">,</span> <span class="mi">98</span><span class="p">,</span> <span class="mi">232</span><span class="p">,</span> <span class="mi">233</span><span class="p">]:</span> <span class="c1"># composites</span>
            <span class="c1"># 95 - CQUAD4</span>
            <span class="c1"># 96 - CQUAD8</span>
            <span class="c1"># 97 - CTRIA3</span>
            <span class="c1"># 98 - CTRIA6 (composite)</span>
            <span class="c1"># 232 - CQUADR</span>
            <span class="c1"># 233 - CTRIAR</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_shells_composite</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span>
                                                              <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">39</span><span class="p">,</span> <span class="mi">67</span><span class="p">,</span> <span class="mi">68</span><span class="p">]:</span> <span class="c1"># solids</span>
            <span class="c1"># 39-CTETRA</span>
            <span class="c1"># 67-CHEXA</span>
            <span class="c1"># 68-CPENTA</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_mode</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">ndata</span>
            <span class="c1">#self._results._found_result(&#39;solid_forces&#39;)</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="c1">#if self.format_code == 1 and self.num_wide == 0:  # real</span>
                <span class="c1">##self.create_transient_object(result_name, self.solidForces, RealCSolidForce)</span>
                <span class="c1">#raise RuntimeError(self.code_information())</span>
            <span class="c1">#else:</span>
                <span class="c1">#msg = self.code_information()</span>
                <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">53</span><span class="p">:</span>  <span class="c1"># ctriax6</span>
            <span class="c1"># 53-CTRIAX6</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="s1">&#39;ctriax_force&#39;</span><span class="p">)</span>
            <span class="c1">#if self.format_code == 1 and self.num_wide == 0:  # real</span>
                <span class="c1">#pass</span>
                <span class="c1">#self.create_transient_object(self.ctriax_force, RealCTriaxForce)  # undefined</span>
            <span class="c1">#else:  # pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
                <span class="c1">#msg = self.code_information()</span>
                <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg)</span>
            <span class="c1">#return ndata</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>  <span class="c1"># cshear</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_cshear</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">35</span><span class="p">:</span>  <span class="c1"># coneax</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_cconeax</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">38</span><span class="p">:</span>  <span class="c1"># cgap</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_cgap</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">69</span><span class="p">:</span>  <span class="c1"># cbend</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_cbend</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">76</span><span class="p">,</span> <span class="mi">77</span><span class="p">,</span> <span class="mi">78</span><span class="p">,</span> <span class="mi">79</span><span class="p">]:</span>
            <span class="c1"># 76-HEXPR</span>
            <span class="c1"># 77-PENPR</span>
            <span class="c1"># 78-TETPR</span>
            <span class="c1"># 79-CPYRAM</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_csolid_pressure</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">102</span><span class="p">,</span> <span class="mi">280</span><span class="p">]:</span>
            <span class="c1"># 102: cbush</span>
            <span class="c1"># 280: cbear</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_cbush</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">145</span><span class="p">,</span> <span class="mi">146</span><span class="p">,</span> <span class="mi">147</span><span class="p">]:</span>
            <span class="c1"># 145-VUHEXA</span>
            <span class="c1"># 146-VUPENTA</span>
            <span class="c1"># 147-VUTETRA</span>
            <span class="c1">#if self.read_mode == 1:</span>
                <span class="c1">#return ndata</span>
            <span class="k">return</span> <span class="n">ndata</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">189</span><span class="p">,</span> <span class="mi">190</span><span class="p">]:</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_vu_shell</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">191</span><span class="p">:</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_vu_beam</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">126</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_msc</span><span class="p">:</span>
            <span class="c1"># 119-CFAST-MSC</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_cbush</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">119</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_nx</span><span class="p">:</span>
            <span class="c1"># 119-CFAST-NX</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_cbar_34</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span>
                                                     <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">117</span><span class="p">,</span> <span class="mi">200</span><span class="p">]:</span>
            <span class="c1"># 117-CWELDC</span>
            <span class="c1"># 200-CWELD</span>
            <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_oef_cbar_34</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span>
                                                     <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">)</span>
        <span class="c1">#elif self.element_type == 119 and self.is_msc:</span>
            <span class="c1">#raise NotImplementedError(self.code_information())</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">235</span><span class="p">:</span>
            <span class="c1"># 235-CQUADR</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_nx</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">118</span><span class="p">,</span> <span class="mi">343</span><span class="p">,</span> <span class="mi">344</span><span class="p">,</span> <span class="mi">345</span><span class="p">,</span> <span class="mi">346</span><span class="p">,</span> <span class="mi">347</span><span class="p">,</span> <span class="mi">348</span><span class="p">,</span> <span class="mi">349</span><span class="p">,</span> <span class="mi">350</span><span class="p">,</span> <span class="mi">351</span><span class="p">,</span> <span class="mi">352</span><span class="p">,</span>
                                     <span class="mi">356</span><span class="p">,</span> <span class="mi">357</span><span class="p">,</span> <span class="mi">363</span><span class="p">]:</span>
                <span class="c1"># 118 CWELDP</span>
                <span class="c1"># 343 CTRIA6 SOL 401</span>
                <span class="c1">#344 CQUAD8 SOL 401</span>
                <span class="c1">#345 CTRIAR SOL 401</span>
                <span class="c1"># 347 CBAR SOL 401</span>
                <span class="c1"># 348 CBEAM SOL 401</span>
                <span class="c1">#346 CQUADR SOL 401</span>
                <span class="c1"># 349 CBUSH1D SOL 401</span>
                <span class="c1"># 350 CELAS1 SOL 401</span>
                <span class="c1"># 351 CELAS2 SOL 401</span>
                <span class="c1"># 352 CBUSH SOL 401</span>
                <span class="c1">#356 Composite quadrilateral shell element (CQUAD8); SOL 402?</span>
                <span class="c1">#357 Composite triangular shell element (CTRIAR); SOL 402?</span>
                <span class="c1"># 363 CROD SOL 402</span>
                <span class="c1">#print(self.code_information())</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="c1">#print(self.code_information())</span>
            <span class="c1">#nx_missing</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#print(self.code_information())</span>
            <span class="c1">#msc_missing</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">nelements</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">n</span>

        <span class="c1">#assert self.thermal == 0, self.thermal</span>
        <span class="k">assert</span> <span class="n">ndata</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ndata</span>
        <span class="k">assert</span> <span class="n">nelements</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;nelements=</span><span class="si">%r</span><span class="s1"> element_type=</span><span class="si">%s</span><span class="s1"> element_name=</span><span class="si">%r</span><span class="s1"> num_wide=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">nelements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span><span class="p">)</span>
        <span class="c1">#assert ndata % ntotal == 0, &#39;%s n=%s nwide=%s len=%s ntotal=%s&#39; % (self.element_name, ndata % ntotal, ndata % self.num_wide, ndata, ntotal)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="o">==</span> <span class="n">ntotal</span><span class="p">,</span> <span class="s1">&#39;numwide*4=</span><span class="si">%s</span><span class="s1"> ntotal=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span><span class="o">*</span><span class="mi">4</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">n</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">_oef_crod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        1-CROD</span>
<span class="sd">        3-CTUBE</span>
<span class="sd">        10-CONROD</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">obj_real</span> <span class="o">=</span> <span class="n">RealRodForceArray</span>
        <span class="n">obj_complex</span> <span class="o">=</span> <span class="n">ComplexRodForceArray</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="c1"># CROD</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;crod_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>  <span class="c1"># CTUBE</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctube_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>  <span class="c1"># CONROD</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;conrod_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="c1">#msg = &#39;sort1 Type=%s num=%s&#39; % (self.element_name, self.element_type)</span>
            <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span> <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  [cap, element1, element2, ..., cap]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  cap = </span><span class="si">%i</span><span class="s1">  # assume 1 cap when there could have been multiple</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ndata</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  #elementi = [eid_device, axial, torque]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  nelements=</span><span class="si">%i</span><span class="s1">; nnodes=1 # centroid</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nelements</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                <span class="c1">#[axial, torsion]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fmt</span> <span class="o">=</span> <span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;ff&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>  <span class="c1"># 3</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">axial</span><span class="p">,</span> <span class="n">torque</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_Rod - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">axial</span><span class="p">,</span> <span class="n">torque</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span> <span class="c1"># imag</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">20</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>  <span class="c1"># 5*4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_complex</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  [cap, element1, element2, ..., cap]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  cap = </span><span class="si">%i</span><span class="s1">  # assume 1 cap when there could have been multiple</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ndata</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  #elementi = [eid_device, axial, torque]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  nelements=</span><span class="si">%i</span><span class="s1">; nnodes=1 # centroid</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nelements</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                <span class="c1">#[axial_force, torque]</span>
                <span class="c1">#(eid_device, axial_real, torque_real, axial_imag, torque_imag) = out</span>
                <span class="n">real_imag</span> <span class="o">=</span> <span class="n">apply_mag_phase</span><span class="p">(</span><span class="n">floats</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">real_imag</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fmt</span> <span class="o">=</span> <span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;4f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>

                    <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_CRod - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">axial_real</span><span class="p">,</span> <span class="n">torque_real</span><span class="p">,</span> <span class="n">axial_imag</span><span class="p">,</span> <span class="n">torque_imag</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                        <span class="n">axial</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">axial_real</span><span class="p">,</span> <span class="n">axial_imag</span><span class="p">)</span>
                        <span class="n">torque</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">torque_real</span><span class="p">,</span> <span class="n">torque_imag</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">axial</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">axial_real</span><span class="p">,</span> <span class="n">axial_imag</span><span class="p">)</span>
                        <span class="n">torque</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">torque_real</span><span class="p">,</span> <span class="n">torque_imag</span><span class="p">)</span>

                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">axial</span><span class="p">,</span> <span class="n">torque</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oef_cbeam</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;2-CBEAM&quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbeam_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span>  <span class="c1"># real centroid ???</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;is this used?&#39;</span><span class="p">)</span>
            <span class="c1">#auto_return, is_vectorized = self._create_oes_object4(</span>
                <span class="c1">#nelements, result_name, slot, RealCBeamForceArray)</span>
            <span class="c1">#if auto_return:</span>
                <span class="c1">#return nelements * self.num_wide * 4</span>

            <span class="c1">#obj = self.obj</span>
            <span class="c1">##is_vectorized = False</span>
            <span class="c1">#if self.use_vector and is_vectorized and self.sort_method == 1:</span>
                <span class="c1">#n = nelements * 4 * self.num_wide</span>
                <span class="c1">#itotal = obj.itotal</span>
                <span class="c1">#itotal2 = obj.itotal + nelements</span>
                <span class="c1">#ielement2 = obj.ielement + nelements</span>

                <span class="c1">#floats = frombuffer(data, dtype=self.fdtype).reshape(nelements, 9)[:, 1:]</span>
                <span class="c1">#obj._times[obj.itime] = dt</span>
                <span class="c1">#if obj.itime == 0:</span>
                    <span class="c1">#ints = frombuffer(data, dtype=self.idtype).reshape(nelements, 9)</span>
                    <span class="c1">#eids = ints[:, 0] // 10</span>
                    <span class="c1">#assert eids.min() &gt; 0, eids.min()</span>
                    <span class="c1">#assert 0 not in eids, eids</span>

                    <span class="c1">#obj.element[itotal:itotal2] = eids</span>
                    <span class="c1">#obj.element_node[itotal:itotal2, 0] = eids</span>
                    <span class="c1">##obj.element_node[itotal:itotal2, 1] = nids</span>

                <span class="c1">##[sd, bm1, bm2, ts1, ts2, af, ttrq, wtrq]</span>
                <span class="c1">#obj.data[obj.itime, itotal:itotal2, :] = floats.copy()</span>
                <span class="c1">#obj.itotal = itotal2</span>
                <span class="c1">#obj.ielement = ielement2</span>
            <span class="c1">#else:</span>
                <span class="c1">#s = Struct(self._endian + b&#39;i8f&#39;)  # 36</span>
                <span class="c1">#ntotal = 36</span>
                <span class="c1">#nelements = ndata // ntotal</span>
                <span class="c1">#obj = self.obj</span>
                <span class="c1">#for i in range(nelements):</span>
                    <span class="c1">#edata = data[n:n+36]</span>
                    <span class="c1">#out = s.unpack(edata)</span>
                    <span class="c1">#if self.is_debug_file:</span>
                        <span class="c1">#self.binary_debug.write(&#39;OEF_Beam - %s\n&#39; % (str(out)))</span>
                    <span class="c1">#(eid_device, sd, bm1, bm2, ts1, ts2, af, ttrq, wtrq) = out</span>
                    <span class="c1">#eid, dt = get_eid_dt_from_eid_device(</span>
                        <span class="c1">#eid_device, self.nonlinear_factor, self.sort_method)</span>
                    <span class="c1">#n += 36</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">100</span><span class="p">:</span>  <span class="c1"># real/random</span>
            <span class="c1"># real - format_code == 1</span>
            <span class="c1"># random - format_code == 2</span>
            <span class="c1">#result_name, is_random = self._apply_oef_ato_crm_psd_rms_no(result_name)</span>
            <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">400</span>  <span class="c1"># 1+(10-1)*11=100 -&gt;100*4 = 400</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">RealCBeamForceArray</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">11</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">11</span>
                <span class="c1">#ielement = obj.ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">100</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">:]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="k">assert</span> <span class="mi">0</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">eids</span><span class="p">,</span> <span class="n">eids</span>
                    <span class="n">eids2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>

                    <span class="n">ints2</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
                    <span class="n">nids</span> <span class="o">=</span> <span class="n">ints2</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>

                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids2</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids2</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">nids</span>

                <span class="c1">#[nid, sd, bm1, bm2, ts1, ts2, af, ttrq, wtrq]</span>
                <span class="n">floats2</span> <span class="o">=</span> <span class="n">floats</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">9</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="c1">#sd = floats2[:, 0]</span>
                <span class="c1">#obj.data[obj.itime, itotal:itotal2, :] = sd</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats2</span>

                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">oef_cbeam_real_100</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span>
                                       <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">177</span><span class="p">:</span> <span class="c1"># imag</span>
            <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">708</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 177*4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">ComplexCBeamForceArray</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">11</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">11</span>
                <span class="c1">#ielement = obj.ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">177</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">:]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">177</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="k">assert</span> <span class="mi">0</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">eids</span><span class="p">,</span> <span class="n">eids</span>
                    <span class="n">eids2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>

                    <span class="n">ints2</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
                    <span class="n">nids</span> <span class="o">=</span> <span class="n">ints2</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids2</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids2</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">nids</span>

                <span class="c1">#[nid, sd, bm1r, bm2r, ts1r, ts2r, afr, ttrqr, wtrqr,</span>
                <span class="c1">#          bm1i, bm2i, ts1i, ts2i, afi, ttrqi, wtrqi]</span>
                <span class="n">floats2</span> <span class="o">=</span> <span class="n">floats</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">16</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">isave1</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
                <span class="n">isave2</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="n">real_imag</span> <span class="o">=</span> <span class="n">apply_mag_phase</span><span class="p">(</span><span class="n">floats2</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">isave1</span><span class="p">,</span> <span class="n">isave2</span><span class="p">)</span>

                <span class="n">sd</span> <span class="o">=</span> <span class="n">floats2</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">sd</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">1</span><span class="p">:]</span> <span class="o">=</span> <span class="n">real_imag</span>

                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  [cap, element1, element2, ..., cap]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  cap = </span><span class="si">%i</span><span class="s1">  # assume 1 cap when there could have been multiple</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ndata</span><span class="p">)</span>
                    <span class="c1">#self.binary_debug.write(&#39;  #elementi = [eid_device, force]\n&#39;)</span>
                    <span class="c1">#self.binary_debug.write(&#39;  nelements=%i; nnodes=1 # centroid\n&#39; % nelements)</span>

                <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">708</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># (16*11+1)*4 = 177*4</span>
                <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">oef_cbeam_imag_177</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oef_celas_cdamp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        11-CELAS1</span>
<span class="sd">        12-CELAS2</span>
<span class="sd">        13-CELAS3</span>
<span class="sd">        14-CELAS4</span>

<span class="sd">        20-CDAMP1</span>
<span class="sd">        21-CDAMP2</span>
<span class="sd">        22-CDAMP3</span>
<span class="sd">        23-CDAMP4</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;celas1_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="n">obj_real</span> <span class="o">=</span> <span class="n">RealSpringForceArray</span>
            <span class="n">obj_complex</span> <span class="o">=</span> <span class="n">ComplexSpringForceArray</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">12</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;celas2_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="n">obj_real</span> <span class="o">=</span> <span class="n">RealSpringForceArray</span>
            <span class="n">obj_complex</span> <span class="o">=</span> <span class="n">ComplexSpringForceArray</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">13</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;celas3_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="n">obj_real</span> <span class="o">=</span> <span class="n">RealSpringForceArray</span>
            <span class="n">obj_complex</span> <span class="o">=</span> <span class="n">ComplexSpringForceArray</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">14</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;celas4_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="n">obj_real</span> <span class="o">=</span> <span class="n">RealSpringForceArray</span>
            <span class="n">obj_complex</span> <span class="o">=</span> <span class="n">ComplexSpringForceArray</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">20</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cdamp1_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="n">obj_real</span> <span class="o">=</span> <span class="n">RealDamperForceArray</span>
            <span class="n">obj_complex</span> <span class="o">=</span> <span class="n">ComplexDamperForceArray</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">21</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cdamp2_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="n">obj_real</span> <span class="o">=</span> <span class="n">RealDamperForceArray</span>
            <span class="n">obj_complex</span> <span class="o">=</span> <span class="n">ComplexDamperForceArray</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">22</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cdamp3_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="n">obj_real</span> <span class="o">=</span> <span class="n">RealDamperForceArray</span>
            <span class="n">obj_complex</span> <span class="o">=</span> <span class="n">ComplexDamperForceArray</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">23</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cdamp4_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="n">obj_real</span> <span class="o">=</span> <span class="n">RealDamperForceArray</span>
            <span class="n">obj_complex</span> <span class="o">=</span> <span class="n">ComplexDamperForceArray</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">8</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 2 * 4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                <span class="c1">#(eid_device, force)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fmt</span> <span class="o">=</span> <span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>  <span class="c1"># 2</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_SpringDamper - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">force</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">force</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>  <span class="c1"># imag</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">12</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>  <span class="c1"># 3*4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_complex</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  [cap, element1, element2, ..., cap]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  cap = </span><span class="si">%i</span><span class="s1">  # assume 1 cap when there could have been multiple</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ndata</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  #elementi = [eid_device, force]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  nelements=</span><span class="si">%i</span><span class="s1">; nnodes=1 # centroid</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nelements</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                <span class="c1">#[spring_force]</span>
                <span class="n">real_imag</span> <span class="o">=</span> <span class="n">apply_mag_phase</span><span class="p">(</span><span class="n">floats</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">real_imag</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fmt</span> <span class="o">=</span> <span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;2f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_SpringDamper - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">force_real</span><span class="p">,</span> <span class="n">force_imag</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                        <span class="n">force</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">force_real</span><span class="p">,</span> <span class="n">force_imag</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">force</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">force_real</span><span class="p">,</span> <span class="n">force_imag</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">force</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#msg = &#39;OEF: element_name=%s element_type=%s&#39; % (self.element_name, self.element_type)</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oef_cvisc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cvisc_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">obj_real</span> <span class="o">=</span> <span class="n">RealViscForceArray</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span> <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">12</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 3 * 4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                <span class="c1">#(eid_device, axial, torque)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fmt</span> <span class="o">=</span> <span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;ff&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>

                    <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_CVisc - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">axial</span><span class="p">,</span> <span class="n">torque</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">axial</span><span class="p">,</span> <span class="n">torque</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span> <span class="c1"># complex</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">20</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 5*4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">ComplexViscForceArray</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  [cap, element1, element2, ..., cap]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  cap = </span><span class="si">%i</span><span class="s1">  # assume 1 cap when there could have been multiple</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ndata</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  #elementi = [eid_device, axial, torque]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;  nelements=</span><span class="si">%i</span><span class="s1">; nnodes=1 # centroid</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nelements</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                <span class="c1">#[axial_force, torque]</span>
                <span class="c1">#(eid_device, axial_real, torque_real, axial_imag, torque_imag) = out</span>
                <span class="n">real_imag</span> <span class="o">=</span> <span class="n">apply_mag_phase</span><span class="p">(</span><span class="n">floats</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">real_imag</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;4f&#39;</span><span class="p">)</span>  <span class="c1"># 5</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">20</span><span class="p">]</span>

                    <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_CVisc - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">axial_real</span><span class="p">,</span> <span class="n">torque_real</span><span class="p">,</span> <span class="n">axial_imag</span><span class="p">,</span> <span class="n">torque_imag</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                        <span class="n">axial</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">axial_real</span><span class="p">,</span> <span class="n">axial_imag</span><span class="p">)</span>
                        <span class="n">torque</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">torque_real</span><span class="p">,</span> <span class="n">torque_imag</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">axial</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">axial_real</span><span class="p">,</span> <span class="n">axial_imag</span><span class="p">)</span>
                        <span class="n">torque</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">torque_real</span><span class="p">,</span> <span class="n">torque_imag</span><span class="p">)</span>

                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">axial</span><span class="p">,</span> <span class="n">torque</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oef_cbar_34</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        34-CBAR</span>
<span class="sd">        117-CWELDC</span>
<span class="sd">        119-CFAST-NX  (126-CFAST-MSC is like the CBUSH)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">34</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbar_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="n">obj_real</span> <span class="o">=</span> <span class="n">RealCBarForceArray</span>
            <span class="n">obj_complex</span> <span class="o">=</span> <span class="n">ComplexCBarForceArray</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">117</span><span class="p">,</span> <span class="mi">200</span><span class="p">]:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cweld_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="n">obj_real</span> <span class="o">=</span> <span class="n">RealCWeldForceArray</span>
            <span class="n">obj_complex</span> <span class="o">=</span> <span class="n">ComplexCWeldForceArray</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">17</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">119</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cfast_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="n">obj_real</span> <span class="o">=</span> <span class="n">RealCFastForceArrayNX</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">9</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span>
            <span class="c1"># real - format_code == 1</span>
            <span class="c1"># random - format_code == 2</span>
            <span class="c1">#result_name, is_random = self._apply_oef_ato_crm_psd_rms_no(result_name)</span>
            <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">36</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>  <span class="c1"># 9*4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="c1">#return nelements * self.num_wide * 4</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                <span class="c1">#[bm1a, bm2a, bm1b, bm2b, ts1, ts2, af, trq]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="c1"># elif self.use_vector and is_vectorized and self.sort_method == 1:</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">oef_cbar_real</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">17</span><span class="p">:</span> <span class="c1"># imag</span>
            <span class="c1"># TODO: vectorize</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">68</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>  <span class="c1"># 17*4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="k">assert</span> <span class="n">ndata</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_complex</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">oef_cbar_imag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
        <span class="c1">#print self.barForces</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oef_cbar_100</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">unused_is_magnitude_phase</span><span class="p">,</span>
                      <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#100-BARS</span>
        <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbar_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>  <span class="c1"># _10nodes</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">32</span>  <span class="c1"># 8*4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">RealCBar100ForceArray</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                <span class="c1">#[axial, torsion, SMa, SMt]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;7f&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">32</span><span class="p">]</span>

                    <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_CBar100 - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">sd</span><span class="p">,</span> <span class="n">bm1</span><span class="p">,</span> <span class="n">bm2</span><span class="p">,</span> <span class="n">ts1</span><span class="p">,</span> <span class="n">ts2</span><span class="p">,</span> <span class="n">af</span><span class="p">,</span> <span class="n">trq</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">sd</span><span class="p">,</span> <span class="n">bm1</span><span class="p">,</span> <span class="n">bm2</span><span class="p">,</span> <span class="n">ts1</span><span class="p">,</span> <span class="n">ts2</span><span class="p">,</span> <span class="n">af</span><span class="p">,</span> <span class="n">trq</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="mi">32</span>
        <span class="c1">#elif self.format_code in [2, 3] and self.num_wide == 14:  # imag</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oef_shells_centroidal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        33-CQUAD4</span>
<span class="sd">        74-CTRIA3</span>
<span class="sd">        227-CTRIAR</span>
<span class="sd">        228-CQUADR</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">33</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquad4_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">74</span><span class="p">,</span> <span class="mi">83</span><span class="p">]:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctria3_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">227</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctriar_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">228</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquadr_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#msg = &#39;sort1 Type=%s num=%s&#39; % (self.element_name, self.element_type)</span>
            <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg)</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="c1">#result_name, is_random = self._apply_oef_ato_crm_psd_rms_no(result_name)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span>
            <span class="c1"># real - format_code == 1</span>
            <span class="c1"># random - format_code == 2</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">36</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 9*4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">RealPlateForceArray</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                <span class="c1">#[mx, my, mxy, bmx, bmy, bmxy, tx, ty]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">ielement2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;8f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;real_OEF_Plate-</span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mxy</span><span class="p">,</span> <span class="n">bmx</span><span class="p">,</span> <span class="n">bmy</span><span class="p">,</span> <span class="n">bmxy</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mxy</span><span class="p">,</span> <span class="n">bmx</span><span class="p">,</span> <span class="n">bmy</span><span class="p">,</span> <span class="n">bmxy</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">17</span><span class="p">:</span>  <span class="c1"># imag</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">68</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">ComplexPlateForceArray</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                <span class="c1">#[mx, my, mxy, bmx, bmy, bmxy, tx, ty]</span>
                <span class="n">isave1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
                <span class="n">isave2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">]</span>
                <span class="n">real_imag</span> <span class="o">=</span> <span class="n">apply_mag_phase</span><span class="p">(</span><span class="n">floats</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">isave1</span><span class="p">,</span> <span class="n">isave2</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">real_imag</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;16f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
                     <span class="n">mxr</span><span class="p">,</span> <span class="n">myr</span><span class="p">,</span> <span class="n">mxyr</span><span class="p">,</span> <span class="n">bmxr</span><span class="p">,</span> <span class="n">bmyr</span><span class="p">,</span> <span class="n">bmxyr</span><span class="p">,</span> <span class="n">txr</span><span class="p">,</span> <span class="n">tyr</span><span class="p">,</span>
                     <span class="n">mxi</span><span class="p">,</span> <span class="n">myi</span><span class="p">,</span> <span class="n">mxyi</span><span class="p">,</span> <span class="n">bmxi</span><span class="p">,</span> <span class="n">bmyi</span><span class="p">,</span> <span class="n">bmxyi</span><span class="p">,</span> <span class="n">txi</span><span class="p">,</span> <span class="n">tyi</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;complex_OEF_Plate-</span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>

                    <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                        <span class="n">mx</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">mxr</span><span class="p">,</span> <span class="n">mxi</span><span class="p">)</span>
                        <span class="n">my</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">myr</span><span class="p">,</span> <span class="n">myi</span><span class="p">)</span>
                        <span class="n">mxy</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">mxyr</span><span class="p">,</span> <span class="n">mxyi</span><span class="p">)</span>
                        <span class="n">bmx</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">bmxr</span><span class="p">,</span> <span class="n">bmxi</span><span class="p">)</span>
                        <span class="n">bmy</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">bmyr</span><span class="p">,</span> <span class="n">bmyi</span><span class="p">)</span>
                        <span class="n">bmxy</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">bmxyr</span><span class="p">,</span> <span class="n">bmxyi</span><span class="p">)</span>
                        <span class="n">tx</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">txr</span><span class="p">,</span> <span class="n">txi</span><span class="p">)</span>
                        <span class="n">ty</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">tyr</span><span class="p">,</span> <span class="n">tyi</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">mx</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">mxr</span><span class="p">,</span> <span class="n">mxi</span><span class="p">)</span>
                        <span class="n">my</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">myr</span><span class="p">,</span> <span class="n">myi</span><span class="p">)</span>
                        <span class="n">mxy</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">mxyr</span><span class="p">,</span> <span class="n">mxyi</span><span class="p">)</span>
                        <span class="n">bmx</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">bmxr</span><span class="p">,</span> <span class="n">bmxi</span><span class="p">)</span>
                        <span class="n">bmy</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">bmyr</span><span class="p">,</span> <span class="n">bmyi</span><span class="p">)</span>
                        <span class="n">bmxy</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">bmxyr</span><span class="p">,</span> <span class="n">bmxyi</span><span class="p">)</span>
                        <span class="n">tx</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">txr</span><span class="p">,</span> <span class="n">txi</span><span class="p">)</span>
                        <span class="n">ty</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">tyr</span><span class="p">,</span> <span class="n">tyi</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mxy</span><span class="p">,</span> <span class="n">bmx</span><span class="p">,</span> <span class="n">bmy</span><span class="p">,</span> <span class="n">bmxy</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oef_shells_nodal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        64-CQUAD8</span>
<span class="sd">        70-CTRIAR</span>
<span class="sd">        75-CTRIA6</span>
<span class="sd">        82-CQUADR</span>
<span class="sd">        144-CQUAD4-bilinear</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">64</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquad8_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">70</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctriar_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">75</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctria6_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">82</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquadr_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">144</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquad4_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="c1">#msg = self.code_information()</span>
            <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">70</span><span class="p">,</span> <span class="mi">75</span><span class="p">]:</span>  <span class="c1"># CTRIAR,CTRIA6</span>
            <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">64</span><span class="p">,</span> <span class="mi">82</span><span class="p">,</span> <span class="mi">144</span><span class="p">]:</span>  <span class="c1"># CQUAD8,CQUADR,CQUAD4-bilinear</span>
            <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
            <span class="c1">#msg = &#39;name=%r type=%r&#39; % (self.element_name, self.element_type)</span>
            <span class="c1">#return self._not_implemented_or_skip(data, ndata, msg), None, None</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">nnodes_all</span> <span class="o">=</span> <span class="n">nnodes</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">numwide_real</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">nnodes_all</span> <span class="o">*</span> <span class="mi">9</span> <span class="c1"># centroidal node is the + 1</span>
        <span class="n">numwide_imag</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">nnodes_all</span> <span class="o">*</span> <span class="mi">17</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_real</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">obj_real</span> <span class="o">=</span> <span class="n">RealPlateBilinearForceArray</span>

            <span class="n">ntotal</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span> <span class="o">+</span> <span class="n">nnodes_all</span> <span class="o">*</span> <span class="mi">36</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># centroidal node is the + 1</span>
            <span class="k">assert</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span><span class="p">,</span> <span class="s1">&#39;ntotal=</span><span class="si">%s</span><span class="s1"> numwide=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ntotal</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span>

            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="n">nnodes_all</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">nlayers</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_all</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span>

                <span class="n">istart</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">iend</span> <span class="o">=</span> <span class="n">istart</span> <span class="o">+</span> <span class="n">nlayers</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>

                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="c1"># Nastran makes this a 4 for CQUAD4s instead</span>
                    <span class="c1"># of 0 like the bilinear stress element...</span>
                    <span class="n">ints</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

                    <span class="n">nids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nlayers</span><span class="p">,</span> <span class="mi">9</span><span class="p">)[:,</span> <span class="mi">0</span><span class="p">]</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">eids2</span> <span class="o">=</span> <span class="n">vstack</span><span class="p">([</span><span class="n">eids</span><span class="p">]</span> <span class="o">*</span> <span class="n">nnodes_all</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids2</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">nids</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span>
                <span class="n">results</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nlayers</span><span class="p">,</span> <span class="mi">9</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="c1">#[mx, my, mxy, bmx, bmy, bmxy, tx, ty]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">results</span>
            <span class="k">else</span><span class="p">:</span>

                <span class="n">n44</span> <span class="o">=</span> <span class="mi">44</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
                <span class="n">n36</span> <span class="o">=</span> <span class="mi">36</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                    <span class="n">fmt1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i4si8f&#39;</span>  <span class="c1"># 8+36</span>
                    <span class="n">fmt2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i8f&#39;</span> <span class="c1"># 36</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fmt1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;q8sq8d&#39;</span>
                    <span class="n">fmt2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;q8d&#39;</span>
                <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">fmt1</span><span class="p">)</span>
                <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">fmt2</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">n44</span><span class="p">]</span>

                    <span class="n">out</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_Plate2-</span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">term</span><span class="p">,</span> <span class="n">_nid</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mxy</span><span class="p">,</span> <span class="n">bmx</span><span class="p">,</span> <span class="n">bmy</span><span class="p">,</span> <span class="n">bmxy</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="c1">#term= &#39;CEN\&#39;</span>
                    <span class="c1">#_nid = 4</span>
                    <span class="c1"># -&gt; CEN/4</span>
                    <span class="n">nid</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">term</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mxy</span><span class="p">,</span> <span class="n">bmx</span><span class="p">,</span> <span class="n">bmy</span><span class="p">,</span> <span class="n">bmxy</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">n44</span>
                    <span class="k">for</span> <span class="n">unused_j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes</span><span class="p">):</span>
                        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span> <span class="p">:</span> <span class="n">n</span> <span class="o">+</span> <span class="n">n36</span><span class="p">]</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;    </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                        <span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mxy</span><span class="p">,</span> <span class="n">bmx</span><span class="p">,</span> <span class="n">bmy</span><span class="p">,</span> <span class="n">bmxy</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                        <span class="k">assert</span> <span class="n">nid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;nid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nid</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">term</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mxy</span><span class="p">,</span> <span class="n">bmx</span><span class="p">,</span> <span class="n">bmy</span><span class="p">,</span> <span class="n">bmxy</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">)</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="n">n36</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_imag</span><span class="p">:</span> <span class="c1"># complex</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="n">numwide_imag</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">ComplexPlate2ForceArray</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="n">nnodes_all</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_all</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_imag</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_imag</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">ints</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="n">ints2</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_all</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>

                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">nids</span> <span class="o">=</span> <span class="n">ints2</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">eids2</span> <span class="o">=</span> <span class="n">vstack</span><span class="p">([</span><span class="n">eids</span><span class="p">]</span> <span class="o">*</span> <span class="n">nnodes_all</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids2</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">nids</span>

                <span class="c1">#[mx, my, mxy, bmx, bmy, bmxy, tx, ty]</span>
                <span class="n">floats2</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes_all</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">isave1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
                <span class="n">isave2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">]</span>
                <span class="n">real_imag</span> <span class="o">=</span> <span class="n">apply_mag_phase</span><span class="p">(</span><span class="n">floats2</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">isave1</span><span class="p">,</span> <span class="n">isave2</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">real_imag</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                    <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i4s17f&#39;</span><span class="p">)</span>  <span class="c1"># 2+17=19 * 4 = 76</span>
                    <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i16f&#39;</span><span class="p">)</span>  <span class="c1"># 17 * 4 = 68</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;q8s17d&#39;</span><span class="p">)</span>  <span class="c1"># 2+17=19 * 4 = 768</span>
                    <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;q16d&#39;</span><span class="p">)</span>  <span class="c1"># 17 * 4 = 68</span>
                <span class="n">ntotal</span> <span class="o">=</span> <span class="p">(</span><span class="mi">8</span> <span class="o">+</span> <span class="p">(</span><span class="n">nnodes</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">68</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
                <span class="n">ntotal1</span> <span class="o">=</span> <span class="mi">76</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
                <span class="n">ntotal2</span> <span class="o">=</span> <span class="mi">68</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>

                <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal1</span><span class="p">]</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal1</span>

                    <span class="n">out</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_Plate2-</span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">term</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span>
                     <span class="n">mxr</span><span class="p">,</span> <span class="n">myr</span><span class="p">,</span> <span class="n">mxyr</span><span class="p">,</span> <span class="n">bmxr</span><span class="p">,</span> <span class="n">bmyr</span><span class="p">,</span> <span class="n">bmxyr</span><span class="p">,</span> <span class="n">txr</span><span class="p">,</span> <span class="n">tyr</span><span class="p">,</span>
                     <span class="n">mxi</span><span class="p">,</span> <span class="n">myi</span><span class="p">,</span> <span class="n">mxyi</span><span class="p">,</span> <span class="n">bmxi</span><span class="p">,</span> <span class="n">bmyi</span><span class="p">,</span> <span class="n">bmxyi</span><span class="p">,</span> <span class="n">txi</span><span class="p">,</span> <span class="n">tyi</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="c1">#term = &#39;CEN\&#39;</span>

                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                        <span class="n">mx</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">mxr</span><span class="p">,</span> <span class="n">mxi</span><span class="p">)</span>
                        <span class="n">my</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">myr</span><span class="p">,</span> <span class="n">myi</span><span class="p">)</span>
                        <span class="n">mxy</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">mxyr</span><span class="p">,</span> <span class="n">mxyi</span><span class="p">)</span>
                        <span class="n">bmx</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">bmxr</span><span class="p">,</span> <span class="n">bmxi</span><span class="p">)</span>
                        <span class="n">bmy</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">bmyr</span><span class="p">,</span> <span class="n">bmyi</span><span class="p">)</span>
                        <span class="n">bmxy</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">bmxyr</span><span class="p">,</span> <span class="n">bmxyi</span><span class="p">)</span>
                        <span class="n">tx</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">txr</span><span class="p">,</span> <span class="n">txi</span><span class="p">)</span>
                        <span class="n">ty</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">tyr</span><span class="p">,</span> <span class="n">tyi</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">mx</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">mxr</span><span class="p">,</span> <span class="n">mxi</span><span class="p">)</span>
                        <span class="n">my</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">myr</span><span class="p">,</span> <span class="n">myi</span><span class="p">)</span>
                        <span class="n">mxy</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">mxyr</span><span class="p">,</span> <span class="n">mxyi</span><span class="p">)</span>
                        <span class="n">bmx</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">bmxr</span><span class="p">,</span> <span class="n">bmxi</span><span class="p">)</span>
                        <span class="n">bmy</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">bmyr</span><span class="p">,</span> <span class="n">bmyi</span><span class="p">)</span>
                        <span class="n">bmxy</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">bmxyr</span><span class="p">,</span> <span class="n">bmxyi</span><span class="p">)</span>
                        <span class="n">tx</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">txr</span><span class="p">,</span> <span class="n">txi</span><span class="p">)</span>
                        <span class="n">ty</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">tyr</span><span class="p">,</span> <span class="n">tyi</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_new_element_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">term</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mxy</span><span class="p">,</span>
                                              <span class="n">bmx</span><span class="p">,</span> <span class="n">bmy</span><span class="p">,</span> <span class="n">bmxy</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">)</span>

                    <span class="k">for</span> <span class="n">unused_j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes</span><span class="p">):</span>  <span class="c1"># .. todo:: fix crash...</span>
                        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal2</span><span class="p">]</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal2</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                        <span class="p">(</span><span class="n">nid</span><span class="p">,</span>
                         <span class="n">mxr</span><span class="p">,</span> <span class="n">myr</span><span class="p">,</span> <span class="n">mxyr</span><span class="p">,</span> <span class="n">bmxr</span><span class="p">,</span> <span class="n">bmyr</span><span class="p">,</span> <span class="n">bmxyr</span><span class="p">,</span> <span class="n">txr</span><span class="p">,</span> <span class="n">tyr</span><span class="p">,</span>
                         <span class="n">mxi</span><span class="p">,</span> <span class="n">myi</span><span class="p">,</span> <span class="n">mxyi</span><span class="p">,</span> <span class="n">bmxi</span><span class="p">,</span> <span class="n">bmyi</span><span class="p">,</span> <span class="n">bmxyi</span><span class="p">,</span> <span class="n">txi</span><span class="p">,</span> <span class="n">tyi</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                        <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                            <span class="n">mx</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">mxr</span><span class="p">,</span> <span class="n">mxi</span><span class="p">)</span>
                            <span class="n">my</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">myr</span><span class="p">,</span> <span class="n">myi</span><span class="p">)</span>
                            <span class="n">mxy</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">mxyr</span><span class="p">,</span> <span class="n">mxyi</span><span class="p">)</span>
                            <span class="n">bmx</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">bmxr</span><span class="p">,</span> <span class="n">bmxi</span><span class="p">)</span>
                            <span class="n">bmy</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">bmyr</span><span class="p">,</span> <span class="n">bmyi</span><span class="p">)</span>
                            <span class="n">bmxy</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">bmxyr</span><span class="p">,</span> <span class="n">bmxyi</span><span class="p">)</span>
                            <span class="n">tx</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">txr</span><span class="p">,</span> <span class="n">txi</span><span class="p">)</span>
                            <span class="n">ty</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">tyr</span><span class="p">,</span> <span class="n">tyi</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">mx</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">mxr</span><span class="p">,</span> <span class="n">mxi</span><span class="p">)</span>
                            <span class="n">my</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">myr</span><span class="p">,</span> <span class="n">myi</span><span class="p">)</span>
                            <span class="n">mxy</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">mxyr</span><span class="p">,</span> <span class="n">mxyi</span><span class="p">)</span>
                            <span class="n">bmx</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">bmxr</span><span class="p">,</span> <span class="n">bmxi</span><span class="p">)</span>
                            <span class="n">bmy</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">bmyr</span><span class="p">,</span> <span class="n">bmyi</span><span class="p">)</span>
                            <span class="n">bmxy</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">bmxyr</span><span class="p">,</span> <span class="n">bmxyi</span><span class="p">)</span>
                            <span class="n">tx</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">txr</span><span class="p">,</span> <span class="n">txi</span><span class="p">)</span>
                            <span class="n">ty</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">tyr</span><span class="p">,</span> <span class="n">tyi</span><span class="p">)</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_Plate2 - eid=</span><span class="si">%i</span><span class="s1"> nid=</span><span class="si">%s</span><span class="s1"> out=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                <span class="n">eid</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mxy</span><span class="p">,</span> <span class="n">bmx</span><span class="p">,</span> <span class="n">bmy</span><span class="p">,</span> <span class="n">bmxy</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">ty</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oef_shells_composite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">unused_is_magnitude_phase</span><span class="p">,</span>
                              <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        95 - CQUAD4</span>
<span class="sd">        96 - CQUAD8</span>
<span class="sd">        97 - CTRIA3</span>
<span class="sd">        98 - CTRIA6 (composite)</span>
<span class="sd">        232 - CQUADR</span>
<span class="sd">        233 - CTRIAR</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">95</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquad4_composite_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">96</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquad8_composite_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">97</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctria3_composite_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">98</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctria6_composite_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">232</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cquadr_composite_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">233</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctriar_composite_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">36</span> <span class="c1"># 9 * 4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>


            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">FailureIndicesArray</span><span class="p">)</span>
            <span class="c1">#print(&#39;read_mode &#39;, self.read_mode, auto_return, is_vectorized)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="c1">#self._data_factor = nnodes_all</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>


            <span class="c1">## TODO: add</span>
            <span class="c1">#if self.is_debug_file:</span>
                <span class="c1">#self.binary_debug.write(&#39;  [cap, element1, element2, ..., cap]\n&#39;)</span>
                <span class="c1">#self.binary_debug.write(&#39;  cap = %i  # assume 1 cap when there could have been multiple\n&#39; % ndata)</span>
                <span class="c1">##self.binary_debug.write(&#39;  #centeri = [eid_device, j, grid, fd1, sx1, sy1, txy1, angle1, major1, minor1, vm1,\n&#39;)</span>
                <span class="c1">##self.binary_debug.write(&#39;  #                                fd2, sx2, sy2, txy2, angle2, major2, minor2, vm2,)]\n&#39;)</span>
                <span class="c1">##self.binary_debug.write(&#39;  #nodeji = [eid, ilayer, o1, o2, t12, t1z, t2z, angle, major, minor, ovm)]\n&#39;)</span>
                <span class="c1">#self.binary_debug.write(&#39;  nelements=%i; nnodes=1 # centroid\n&#39; % nelements)</span>

            <span class="n">n</span> <span class="o">=</span> <span class="n">oef_shells_composite_real_9</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oef_cshear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;4-CSHEAR&quot;&quot;&quot;</span>
        <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cshear_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">17</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">68</span>  <span class="c1"># 17*4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="n">obj_real</span> <span class="o">=</span> <span class="n">RealCShearForceArray</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                <span class="c1"># [f41, f21, f12, f32, f23, f43, f34, f14, kf1,</span>
                <span class="c1">#  s12, kf2, s23, kf3, s34, kf4, s41]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;16f&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">68</span><span class="p">]</span>

                    <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_Shear - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
                     <span class="n">f41</span><span class="p">,</span> <span class="n">f21</span><span class="p">,</span> <span class="n">f12</span><span class="p">,</span> <span class="n">f32</span><span class="p">,</span> <span class="n">f23</span><span class="p">,</span> <span class="n">f43</span><span class="p">,</span> <span class="n">f34</span><span class="p">,</span> <span class="n">f14</span><span class="p">,</span> <span class="n">kf1</span><span class="p">,</span>
                     <span class="n">s12</span><span class="p">,</span> <span class="n">kf2</span><span class="p">,</span> <span class="n">s23</span><span class="p">,</span> <span class="n">kf3</span><span class="p">,</span> <span class="n">s34</span><span class="p">,</span> <span class="n">kf4</span><span class="p">,</span> <span class="n">s41</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="c1">#data_in = [eid,</span>
                               <span class="c1">#f41, f21, f12, f32, f23, f43, f34,</span>
                               <span class="c1">#f14, kf1, s12, kf2, s23, kf3, s34, kf4, s41]</span>
                    <span class="c1">#print &quot;%s&quot; % (self.get_element_type(self.element_type)), data_in</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span>
                                  <span class="n">f41</span><span class="p">,</span> <span class="n">f21</span><span class="p">,</span> <span class="n">f12</span><span class="p">,</span> <span class="n">f32</span><span class="p">,</span> <span class="n">f23</span><span class="p">,</span> <span class="n">f43</span><span class="p">,</span> <span class="n">f34</span><span class="p">,</span>
                                  <span class="n">f14</span><span class="p">,</span> <span class="n">kf1</span><span class="p">,</span> <span class="n">s12</span><span class="p">,</span> <span class="n">kf2</span><span class="p">,</span> <span class="n">s23</span><span class="p">,</span> <span class="n">kf3</span><span class="p">,</span> <span class="n">s34</span><span class="p">,</span> <span class="n">kf4</span><span class="p">,</span> <span class="n">s41</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">33</span><span class="p">:</span>  <span class="c1"># imag</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">132</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 33*4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="n">obj_complex</span> <span class="o">=</span> <span class="n">ComplexCShearForceArray</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_complex</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="c1">#if self.is_debug_file:</span>
                <span class="c1">#self.binary_debug.write(&#39;  [cap, element1, element2, ..., cap]\n&#39;)</span>
                <span class="c1">#self.binary_debug.write(&#39;  cap = %i  # assume 1 cap when there could have been multiple\n&#39; % ndata)</span>
                <span class="c1">#self.binary_debug.write(&#39;  #elementi = [eid_device, axial, torque]\n&#39;)</span>
                <span class="c1">#self.binary_debug.write(&#39;  nelements=%i; nnodes=1 # centroid\n&#39; % nelements)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">33</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">33</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                <span class="c1">#[f41r, f21r, f12r, f32r, f23r, f43r, f34r, f14r</span>
                <span class="c1"># kf1r, s12r, kf2r, s23r, kf3r, s34r, kf4r, s41r</span>
                <span class="c1"># f41i, f21i, f12i, f32i, f23i, f43i, f34i, f14i</span>
                <span class="c1"># kf1i, s12i, kf2i, s23i, kf3i, s34i, kf4i, s41i]</span>
                <span class="n">isave1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">]</span>
                <span class="n">isave2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">17</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">32</span><span class="p">]</span>
                <span class="n">real_imag</span> <span class="o">=</span> <span class="n">apply_mag_phase</span><span class="p">(</span><span class="n">floats</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">isave1</span><span class="p">,</span> <span class="n">isave2</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">real_imag</span>

                <span class="c1">#obj.data[obj.itime, itotal:itotal2, :] = floats[:, 1:]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">#self.create_transient_object(self.cshear_force, ComplexCShearForce)</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;32f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
                <span class="c1">#ntotal1 = 132 * self.factor</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_Shear - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
                     <span class="n">f41r</span><span class="p">,</span> <span class="n">f21r</span><span class="p">,</span> <span class="n">f12r</span><span class="p">,</span> <span class="n">f32r</span><span class="p">,</span> <span class="n">f23r</span><span class="p">,</span> <span class="n">f43r</span><span class="p">,</span> <span class="n">f34r</span><span class="p">,</span> <span class="n">f14r</span><span class="p">,</span> <span class="c1"># 8</span>
                     <span class="n">kf1r</span><span class="p">,</span> <span class="n">s12r</span><span class="p">,</span> <span class="n">kf2r</span><span class="p">,</span> <span class="n">s23r</span><span class="p">,</span> <span class="n">kf3r</span><span class="p">,</span> <span class="n">s34r</span><span class="p">,</span> <span class="n">kf4r</span><span class="p">,</span> <span class="n">s41r</span><span class="p">,</span> <span class="c1"># 16</span>
                     <span class="n">f41i</span><span class="p">,</span> <span class="n">f21i</span><span class="p">,</span> <span class="n">f12i</span><span class="p">,</span> <span class="n">f32i</span><span class="p">,</span> <span class="n">f23i</span><span class="p">,</span> <span class="n">f43i</span><span class="p">,</span> <span class="n">f34i</span><span class="p">,</span> <span class="n">f14i</span><span class="p">,</span>
                     <span class="n">kf1i</span><span class="p">,</span> <span class="n">s12i</span><span class="p">,</span> <span class="n">kf2i</span><span class="p">,</span> <span class="n">s23i</span><span class="p">,</span> <span class="n">kf3i</span><span class="p">,</span> <span class="n">s34i</span><span class="p">,</span> <span class="n">kf4i</span><span class="p">,</span> <span class="n">s41i</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                        <span class="n">f41</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">f41r</span><span class="p">,</span> <span class="n">f41i</span><span class="p">)</span>
                        <span class="n">kf1</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">kf1r</span><span class="p">,</span> <span class="n">kf1i</span><span class="p">)</span>
                        <span class="n">f21</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">f21r</span><span class="p">,</span> <span class="n">f21i</span><span class="p">)</span>
                        <span class="n">kf2</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">kf2r</span><span class="p">,</span> <span class="n">kf2i</span><span class="p">)</span>
                        <span class="n">f12</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">f12r</span><span class="p">,</span> <span class="n">f12i</span><span class="p">)</span>
                        <span class="n">kf3</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">kf3r</span><span class="p">,</span> <span class="n">kf3i</span><span class="p">)</span>
                        <span class="n">f23</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">f23r</span><span class="p">,</span> <span class="n">f23i</span><span class="p">)</span>
                        <span class="n">kf4</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">kf4r</span><span class="p">,</span> <span class="n">kf4i</span><span class="p">)</span>
                        <span class="n">f32</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">f32r</span><span class="p">,</span> <span class="n">f32i</span><span class="p">)</span>
                        <span class="n">s12</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">s12r</span><span class="p">,</span> <span class="n">s12i</span><span class="p">)</span>
                        <span class="n">f43</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">f43r</span><span class="p">,</span> <span class="n">f43i</span><span class="p">)</span>
                        <span class="n">s23</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">s23r</span><span class="p">,</span> <span class="n">s23i</span><span class="p">)</span>
                        <span class="n">f34</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">f34r</span><span class="p">,</span> <span class="n">f34i</span><span class="p">)</span>
                        <span class="n">s34</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">s34r</span><span class="p">,</span> <span class="n">s34i</span><span class="p">)</span>
                        <span class="n">f14</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">f14r</span><span class="p">,</span> <span class="n">f14i</span><span class="p">)</span>
                        <span class="n">s41</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">s41r</span><span class="p">,</span> <span class="n">s41i</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">f41</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">f41r</span><span class="p">,</span> <span class="n">f41i</span><span class="p">)</span>
                        <span class="n">kf1</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">kf1r</span><span class="p">,</span> <span class="n">kf1i</span><span class="p">)</span>
                        <span class="n">f21</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">f21r</span><span class="p">,</span> <span class="n">f21i</span><span class="p">)</span>
                        <span class="n">kf2</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">kf2r</span><span class="p">,</span> <span class="n">kf2i</span><span class="p">)</span>
                        <span class="n">f12</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">f12r</span><span class="p">,</span> <span class="n">f12i</span><span class="p">)</span>
                        <span class="n">kf3</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">kf3r</span><span class="p">,</span> <span class="n">kf3i</span><span class="p">)</span>
                        <span class="n">f23</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">f23r</span><span class="p">,</span> <span class="n">f23i</span><span class="p">)</span>
                        <span class="n">kf4</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">kf4r</span><span class="p">,</span> <span class="n">kf4i</span><span class="p">)</span>
                        <span class="n">f32</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">f32r</span><span class="p">,</span> <span class="n">f32i</span><span class="p">)</span>
                        <span class="n">s12</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">s12r</span><span class="p">,</span> <span class="n">s12i</span><span class="p">)</span>
                        <span class="n">f43</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">f43r</span><span class="p">,</span> <span class="n">f43i</span><span class="p">)</span>
                        <span class="n">s23</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">s23r</span><span class="p">,</span> <span class="n">s23i</span><span class="p">)</span>
                        <span class="n">f34</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">f34r</span><span class="p">,</span> <span class="n">f34i</span><span class="p">)</span>
                        <span class="n">s34</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">s34r</span><span class="p">,</span> <span class="n">s34i</span><span class="p">)</span>
                        <span class="n">f14</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">f14r</span><span class="p">,</span> <span class="n">f14i</span><span class="p">)</span>
                        <span class="n">s41</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">s41r</span><span class="p">,</span> <span class="n">s41i</span><span class="p">)</span>

                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span>
                                  <span class="n">f41</span><span class="p">,</span> <span class="n">f21</span><span class="p">,</span> <span class="n">f12</span><span class="p">,</span> <span class="n">f32</span><span class="p">,</span> <span class="n">f23</span><span class="p">,</span> <span class="n">f43</span><span class="p">,</span> <span class="n">f34</span><span class="p">,</span> <span class="n">f14</span><span class="p">,</span>
                                  <span class="n">kf1</span><span class="p">,</span> <span class="n">s12</span><span class="p">,</span> <span class="n">kf2</span><span class="p">,</span> <span class="n">s23</span><span class="p">,</span> <span class="n">kf3</span><span class="p">,</span> <span class="n">s34</span><span class="p">,</span> <span class="n">kf4</span><span class="p">,</span> <span class="n">s41</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oef_cconeax</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">unused_is_magnitude_phase</span><span class="p">,</span>
                     <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;35-CONEAX&quot;&quot;&quot;</span>
        <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cconeax_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">28</span>  <span class="c1"># 7*4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">RealConeAxForceArray</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                <span class="c1"># [hopa, bmu, bmv, tm, su, sv]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;6f&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_CONEAX-35 - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">hopa</span><span class="p">,</span> <span class="n">bmu</span><span class="p">,</span> <span class="n">bmv</span><span class="p">,</span> <span class="n">tm</span><span class="p">,</span> <span class="n">su</span><span class="p">,</span> <span class="n">sv</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">hopa</span><span class="p">,</span> <span class="n">bmu</span><span class="p">,</span> <span class="n">bmv</span><span class="p">,</span> <span class="n">tm</span><span class="p">,</span> <span class="n">su</span><span class="p">,</span> <span class="n">sv</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oef_cgap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">unused_is_magnitude_phase</span><span class="p">,</span>
                  <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;38-GAP&quot;&quot;&quot;</span>
        <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cgap_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">36</span> <span class="c1"># 9*4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">RealCGapForceArray</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                <span class="c1"># [fx, sfy, sfz, u, v, w, sv, sw]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;8f&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">36</span><span class="p">]</span>

                    <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_CGAP-38 - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">fx</span><span class="p">,</span> <span class="n">sfy</span><span class="p">,</span> <span class="n">sfz</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">sv</span><span class="p">,</span> <span class="n">sw</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="c1">#data_in = [eid, fx, sfy, sfz, u, v, w, sv, sw]</span>
                    <span class="c1">#print &quot;%s&quot; %(self.get_element_type(self.element_type)), data_in</span>
                    <span class="c1">#eid = obj.add_new_eid_sort1(out)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">fx</span><span class="p">,</span> <span class="n">sfy</span><span class="p">,</span> <span class="n">sfz</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">sv</span><span class="p">,</span> <span class="n">sw</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oef_cbend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;69-CBEND&quot;&quot;&quot;</span>
        <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbend_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">15</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">60</span>  <span class="c1"># 15*4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">RealBendForceArray</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">nids_a</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
                    <span class="n">nids_b</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">8</span><span class="p">]</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">nids_a</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">nids_b</span>

                <span class="c1"># [nid_a, bm1_a, bm2_a, ts1_a, ts2_a, af_a, trq_a,</span>
                <span class="c1">#  nid_b, bm1_b, bm2_b, ts1_b, ts2_b, af_b, trq_b]</span>
                <span class="k">assert</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">6</span><span class="p">,</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
                <span class="k">assert</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">9</span><span class="p">:]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">6</span><span class="p">,</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">9</span><span class="p">:]</span><span class="o">.</span><span class="n">shape</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">6</span><span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">9</span><span class="p">:]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39; i6fi6f&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>

                    <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_BEND-69 - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
                     <span class="n">nid_a</span><span class="p">,</span> <span class="n">bm1_a</span><span class="p">,</span> <span class="n">bm2_a</span><span class="p">,</span> <span class="n">ts1_a</span><span class="p">,</span> <span class="n">ts2_a</span><span class="p">,</span> <span class="n">af_a</span><span class="p">,</span> <span class="n">trq_a</span><span class="p">,</span>
                     <span class="n">nid_b</span><span class="p">,</span> <span class="n">bm1_b</span><span class="p">,</span> <span class="n">bm2_b</span><span class="p">,</span> <span class="n">ts1_b</span><span class="p">,</span> <span class="n">ts2_b</span><span class="p">,</span> <span class="n">af_b</span><span class="p">,</span> <span class="n">trq_b</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span>
                        <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span>
                        <span class="n">nid_a</span><span class="p">,</span> <span class="n">bm1_a</span><span class="p">,</span> <span class="n">bm2_a</span><span class="p">,</span> <span class="n">ts1_a</span><span class="p">,</span> <span class="n">ts2_a</span><span class="p">,</span> <span class="n">af_a</span><span class="p">,</span> <span class="n">trq_a</span><span class="p">,</span>
                        <span class="n">nid_b</span><span class="p">,</span> <span class="n">bm1_b</span><span class="p">,</span> <span class="n">bm2_b</span><span class="p">,</span> <span class="n">ts1_b</span><span class="p">,</span> <span class="n">ts2_b</span><span class="p">,</span> <span class="n">af_b</span><span class="p">,</span> <span class="n">trq_b</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">27</span><span class="p">:</span>  <span class="c1"># imag</span>
            <span class="c1"># TODO: vectorize</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">108</span>  <span class="c1"># 27*4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">ComplexCBendForceArray</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">ireal</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">20</span><span class="p">]</span>
                <span class="n">iimag</span> <span class="o">=</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">26</span><span class="p">]</span>
                <span class="c1"># 0    1</span>
                <span class="c1"># eid, nidA,</span>
                <span class="c1"># 2      3      4       5     6     7</span>
                <span class="c1"># 8      9      10      11    12    13</span>
                <span class="c1"># bm1Ar, bm2Ar, ts1Ar, ts2Ar, afAr, trqAr,</span>
                <span class="c1"># bm1Ai, bm2Ai, ts1Ai, ts2Ai, afAi, trqAi,</span>
                <span class="c1"># 14</span>
                <span class="c1"># nidB</span>
                <span class="c1"># 15     16     17     18     19    20</span>
                <span class="c1"># 21     22     23     24     25    26</span>
                <span class="c1"># bm1Br, bm2Br, ts1Br, ts2Br, afBr, trqBr,</span>
                <span class="c1"># bm1Bi, bm2Bi, ts1Bi, ts2Bi, afBi, trqBi</span>
                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">27</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">27</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">nids_a</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
                    <span class="n">nids_b</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">14</span><span class="p">]</span>
                    <span class="k">assert</span> <span class="n">nids_a</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">nids_a</span>
                    <span class="k">assert</span> <span class="n">nids_b</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">nids_b</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="c1">#print(nids_b)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">nids_a</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">nids_b</span>

                <span class="n">real_imag</span> <span class="o">=</span> <span class="n">apply_mag_phase</span><span class="p">(</span><span class="n">floats</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">ireal</span><span class="p">,</span> <span class="n">iimag</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">real_imag</span>
                <span class="c1">#assert floats[:, 1:6].shape[1] == 12, floats[:, 1:6].shape</span>
                <span class="c1">#assert floats[:, 7:].shape[1] == 6, floats[:, 7:].shape</span>
                <span class="c1">#obj.data[obj.itime, itotal:itotal2, :6] = floats[:, 1:6]</span>
                <span class="c1">#obj.data[obj.itime, itotal:itotal2, 6:] = floats[:, 7:]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39; i12f i12f&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">108</span><span class="p">]</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_BEND-69 - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">nid_a</span><span class="p">,</span>
                     <span class="n">bm1_ar</span><span class="p">,</span> <span class="n">bm2_ar</span><span class="p">,</span> <span class="n">ts1_ar</span><span class="p">,</span> <span class="n">ts2_ar</span><span class="p">,</span> <span class="n">af_ar</span><span class="p">,</span> <span class="n">trq_ar</span><span class="p">,</span>
                     <span class="n">bm1_ai</span><span class="p">,</span> <span class="n">bm2_ai</span><span class="p">,</span> <span class="n">ts1_ai</span><span class="p">,</span> <span class="n">ts2_ai</span><span class="p">,</span> <span class="n">af_ai</span><span class="p">,</span> <span class="n">trq_ai</span><span class="p">,</span>
                     <span class="n">nid_b</span><span class="p">,</span>
                     <span class="n">bm1_br</span><span class="p">,</span> <span class="n">bm2_br</span><span class="p">,</span> <span class="n">ts1_br</span><span class="p">,</span> <span class="n">ts2_br</span><span class="p">,</span> <span class="n">af_br</span><span class="p">,</span> <span class="n">trq_br</span><span class="p">,</span>
                     <span class="n">bm1_bi</span><span class="p">,</span> <span class="n">bm2_bi</span><span class="p">,</span> <span class="n">ts1_bi</span><span class="p">,</span> <span class="n">ts2_bi</span><span class="p">,</span> <span class="n">af_bi</span><span class="p">,</span> <span class="n">trq_bi</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                        <span class="n">bm1_a</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">bm1_ar</span><span class="p">,</span> <span class="n">bm1_ai</span><span class="p">)</span>
                        <span class="n">bm1_b</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">bm1_br</span><span class="p">,</span> <span class="n">bm1_bi</span><span class="p">)</span>
                        <span class="n">bm2_a</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">bm2_ar</span><span class="p">,</span> <span class="n">bm2_ai</span><span class="p">)</span>
                        <span class="n">bm2_b</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">bm2_br</span><span class="p">,</span> <span class="n">bm2_bi</span><span class="p">)</span>
                        <span class="n">ts1_a</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">ts1_ar</span><span class="p">,</span> <span class="n">ts1_ai</span><span class="p">)</span>
                        <span class="n">ts1_b</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">ts1_br</span><span class="p">,</span> <span class="n">ts1_bi</span><span class="p">)</span>
                        <span class="n">ts2_a</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">ts2_ar</span><span class="p">,</span> <span class="n">ts2_ai</span><span class="p">)</span>
                        <span class="n">ts2_b</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">ts2_br</span><span class="p">,</span> <span class="n">ts2_bi</span><span class="p">)</span>
                        <span class="n">af_a</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">af_ar</span><span class="p">,</span> <span class="n">af_ai</span><span class="p">)</span>
                        <span class="n">af_b</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">af_br</span><span class="p">,</span> <span class="n">af_bi</span><span class="p">)</span>
                        <span class="n">trq_a</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">trq_ar</span><span class="p">,</span> <span class="n">trq_ai</span><span class="p">)</span>
                        <span class="n">trq_b</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">trq_br</span><span class="p">,</span> <span class="n">trq_bi</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">bm1_a</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">bm1_ar</span><span class="p">,</span> <span class="n">bm1_ai</span><span class="p">)</span>
                        <span class="n">bm1_b</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">bm1_br</span><span class="p">,</span> <span class="n">bm1_bi</span><span class="p">)</span>
                        <span class="n">bm2_a</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">bm2_ar</span><span class="p">,</span> <span class="n">bm2_ai</span><span class="p">)</span>
                        <span class="n">bm2_b</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">bm2_br</span><span class="p">,</span> <span class="n">bm2_bi</span><span class="p">)</span>
                        <span class="n">ts1_a</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">ts1_ar</span><span class="p">,</span> <span class="n">ts1_ai</span><span class="p">)</span>
                        <span class="n">ts1_b</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">ts1_br</span><span class="p">,</span> <span class="n">ts1_bi</span><span class="p">)</span>
                        <span class="n">ts2_a</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">ts2_ar</span><span class="p">,</span> <span class="n">ts2_ai</span><span class="p">)</span>
                        <span class="n">ts2_b</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">ts2_br</span><span class="p">,</span> <span class="n">ts2_bi</span><span class="p">)</span>
                        <span class="n">af_a</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">af_ar</span><span class="p">,</span> <span class="n">af_ai</span><span class="p">)</span>
                        <span class="n">af_b</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">af_br</span><span class="p">,</span> <span class="n">af_bi</span><span class="p">)</span>
                        <span class="n">trq_a</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">trq_ar</span><span class="p">,</span> <span class="n">trq_ai</span><span class="p">)</span>
                        <span class="n">trq_b</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">trq_br</span><span class="p">,</span> <span class="n">trq_bi</span><span class="p">)</span>

                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span>
                                  <span class="n">nid_a</span><span class="p">,</span> <span class="n">bm1_a</span><span class="p">,</span> <span class="n">bm2_a</span><span class="p">,</span> <span class="n">ts1_a</span><span class="p">,</span> <span class="n">ts2_a</span><span class="p">,</span> <span class="n">af_a</span><span class="p">,</span> <span class="n">trq_a</span><span class="p">,</span>
                                  <span class="n">nid_b</span><span class="p">,</span> <span class="n">bm1_b</span><span class="p">,</span> <span class="n">bm2_b</span><span class="p">,</span> <span class="n">ts1_b</span><span class="p">,</span> <span class="n">ts2_b</span><span class="p">,</span> <span class="n">af_b</span><span class="p">,</span> <span class="n">trq_b</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oef_csolid_pressure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        76-HEXPR</span>
<span class="sd">        77-PENPR</span>
<span class="sd">        78-TETPR</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">76</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;chexa_pressure_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">77</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cpenta_pressure_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">78</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;ctetra_pressure_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">79</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cpyram_pressure_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">40</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="c1">#nelements = ndata // ntotal</span>

            <span class="n">obj_real</span> <span class="o">=</span> <span class="n">RealSolidPressureForceArray</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">obj_real</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="c1">#if self.is_debug_file:</span>
                <span class="c1">#self.binary_debug.write(&#39;  [cap, element1, element2, ..., cap]\n&#39;)</span>
                <span class="c1">#self.binary_debug.write(&#39;  cap = %i  # assume 1 cap when there could have been multiple\n&#39; % ndata)</span>
                <span class="c1">#self.binary_debug.write(&#39;  #elementi = [eid_device, axial, torque]\n&#39;)</span>
                <span class="c1">#self.binary_debug.write(&#39;  nelements=%i; nnodes=1 # centroid\n&#39; % nelements)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># self.itime = 0</span>
                <span class="c1"># self.ielement = 0</span>
                <span class="c1"># self.itotal = 0</span>
                <span class="c1">#self.ntimes = 0</span>
                <span class="c1">#self.nelements = 0</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                <span class="c1">#[axial_force, torque]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                    <span class="n">fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;8s7f&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;16s7d&#39;</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span> <span class="p">:</span> <span class="n">n</span> <span class="o">+</span> <span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_PentaPressure-</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">ename</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">ay</span><span class="p">,</span> <span class="n">az</span><span class="p">,</span> <span class="n">vx</span><span class="p">,</span> <span class="n">vy</span><span class="p">,</span> <span class="n">vz</span><span class="p">,</span> <span class="n">pressure</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">ename</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">ay</span><span class="p">,</span> <span class="n">az</span><span class="p">,</span> <span class="n">vx</span><span class="p">,</span> <span class="n">vy</span><span class="p">,</span> <span class="n">vz</span><span class="p">,</span> <span class="n">pressure</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">16</span><span class="p">:</span>  <span class="c1"># imag</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">64</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">ComplexSolidPressureForceArray</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="c1">#if self.is_debug_file:</span>
                <span class="c1">#self.binary_debug.write(&#39;  [cap, element1, element2, ..., cap]\n&#39;)</span>
                <span class="c1">#self.binary_debug.write(&#39;  cap = %i  # assume 1 cap when there could have been multiple\n&#39; % ndata)</span>
                <span class="c1">#self.binary_debug.write(&#39;  #elementi = [eid_device, axial, torque]\n&#39;)</span>
                <span class="c1">#self.binary_debug.write(&#39;  nelements=%i; nnodes=1 # centroid\n&#39; % nelements)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">ielement2</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>

                <span class="c1">#[xaccr, yaccr, zaccr, xvelr, yvelr, zvelr, pressure,</span>
                <span class="c1"># xacci, yacci, zacci, xveli, yveli, zveli]</span>
                <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                    <span class="n">mag</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]]</span>
                    <span class="n">phase</span> <span class="o">=</span> <span class="n">hstack</span><span class="p">([</span>
                        <span class="n">floats</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">]],</span>
                        <span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">floats</span><span class="p">),</span> <span class="mi">1</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span>
                    <span class="p">])</span>
                    <span class="n">rtheta</span> <span class="o">=</span> <span class="n">radians</span><span class="p">(</span><span class="n">phase</span><span class="p">)</span>
                    <span class="n">real_imag</span> <span class="o">=</span> <span class="n">mag</span> <span class="o">*</span> <span class="p">(</span><span class="n">cos</span><span class="p">(</span><span class="n">rtheta</span><span class="p">)</span> <span class="o">+</span> <span class="mf">1.</span><span class="n">j</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">rtheta</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">real</span> <span class="o">=</span> <span class="n">floats</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]]</span>
                    <span class="n">imag</span> <span class="o">=</span> <span class="n">hstack</span><span class="p">([</span>
                        <span class="n">floats</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">]],</span>
                        <span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">floats</span><span class="p">),</span> <span class="mi">1</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span>
                    <span class="p">])</span>
                    <span class="n">real_imag</span> <span class="o">=</span> <span class="n">real</span> <span class="o">+</span> <span class="mf">1.</span><span class="n">j</span> <span class="o">*</span> <span class="n">imag</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">real_imag</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                    <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;8s 13f&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;16s 13d&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>

                    <span class="c1">#print(len(edata))</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;_oef_csolid_pressure-</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">ename</span><span class="p">,</span>
                     <span class="n">axr</span><span class="p">,</span> <span class="n">ayr</span><span class="p">,</span> <span class="n">azr</span><span class="p">,</span> <span class="n">vxr</span><span class="p">,</span> <span class="n">vyr</span><span class="p">,</span> <span class="n">vzr</span><span class="p">,</span> <span class="n">pressure</span><span class="p">,</span>
                     <span class="n">axi</span><span class="p">,</span> <span class="n">ayi</span><span class="p">,</span> <span class="n">azi</span><span class="p">,</span> <span class="n">vxi</span><span class="p">,</span> <span class="n">vyi</span><span class="p">,</span> <span class="n">vzi</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="n">ename</span> <span class="o">=</span> <span class="n">ename</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

                    <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                        <span class="n">ax</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">axr</span><span class="p">,</span> <span class="n">axi</span><span class="p">)</span>
                        <span class="n">vx</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">vxr</span><span class="p">,</span> <span class="n">vxi</span><span class="p">)</span>
                        <span class="n">ay</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">ayr</span><span class="p">,</span> <span class="n">ayi</span><span class="p">)</span>
                        <span class="n">vy</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">vyr</span><span class="p">,</span> <span class="n">vyi</span><span class="p">)</span>
                        <span class="n">az</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">azr</span><span class="p">,</span> <span class="n">azi</span><span class="p">)</span>
                        <span class="n">vz</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">vzr</span><span class="p">,</span> <span class="n">vzi</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">ax</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">axr</span><span class="p">,</span> <span class="n">axi</span><span class="p">)</span>
                        <span class="n">vx</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">vxr</span><span class="p">,</span> <span class="n">vxi</span><span class="p">)</span>
                        <span class="n">ay</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">ayr</span><span class="p">,</span> <span class="n">ayi</span><span class="p">)</span>
                        <span class="n">vy</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">vyr</span><span class="p">,</span> <span class="n">vyi</span><span class="p">)</span>
                        <span class="n">az</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">azr</span><span class="p">,</span> <span class="n">azi</span><span class="p">)</span>
                        <span class="n">vz</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">vzr</span><span class="p">,</span> <span class="n">vzi</span><span class="p">)</span>
                    <span class="n">cpressure</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">pressure</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">ename</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">ay</span><span class="p">,</span> <span class="n">az</span><span class="p">,</span> <span class="n">vx</span><span class="p">,</span> <span class="n">vy</span><span class="p">,</span> <span class="n">vz</span><span class="p">,</span> <span class="n">cpressure</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oef_cbush</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        102-CBUSH</span>
<span class="sd">        126-CFAST-MSC</span>
<span class="sd">        280-CBEAR</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">102</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbush_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="n">real_obj</span> <span class="o">=</span> <span class="n">RealCBushForceArray</span>
            <span class="n">complex_obj</span> <span class="o">=</span> <span class="n">ComplexCBushForceArray</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">126</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cfast_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="n">real_obj</span> <span class="o">=</span> <span class="n">RealCFastForceArrayMSC</span>
            <span class="n">complex_obj</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">280</span><span class="p">:</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbear_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">13</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="n">real_obj</span> <span class="o">=</span> <span class="n">RealCBearForceArray</span>
            <span class="n">complex_obj</span> <span class="o">=</span> <span class="n">ComplexCBearForceArray</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="c1">#result_name, is_random = self._apply_oef_ato_crm_psd_rms_no(result_name)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">numwide_real</span> <span class="o">=</span> <span class="mi">7</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>  <span class="c1"># real/random</span>
            <span class="c1"># real - format_code == 1</span>
            <span class="c1"># random - format_code == 2</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">28</span> <span class="c1"># 7*4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">real_obj</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># self.itime = 0</span>
                <span class="c1"># self.ielement = 0</span>
                <span class="c1"># self.itotal = 0</span>
                <span class="c1">#self.ntimes = 0</span>
                <span class="c1">#self.nelements = 0</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span>

                <span class="n">istart</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">iend</span> <span class="o">=</span> <span class="n">istart</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>

                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element</span><span class="p">[</span><span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids</span>
                <span class="n">results</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span>

                <span class="c1">#[fx, fy, fz, mx, my, mz]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">results</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;6f&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">28</span><span class="p">]</span>
                    <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_CBUSH-102 - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">fx</span><span class="p">,</span> <span class="n">fy</span><span class="p">,</span> <span class="n">fz</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mz</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">fx</span><span class="p">,</span> <span class="n">fy</span><span class="p">,</span> <span class="n">fz</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mz</span><span class="p">)</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">13</span><span class="p">:</span>  <span class="c1"># imag</span>
            <span class="c1"># TODO: vectorize</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="mi">52</span>  <span class="c1"># 13*4</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="c1">#result_name = prefix + &#39;cbush_force&#39; + postfix</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">complex_obj</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;12f&#39;</span><span class="p">)</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="mi">52</span><span class="p">]</span>

                <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_CBUSH-102 - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
                 <span class="n">fxr</span><span class="p">,</span> <span class="n">fyr</span><span class="p">,</span> <span class="n">fzr</span><span class="p">,</span> <span class="n">mxr</span><span class="p">,</span> <span class="n">myr</span><span class="p">,</span> <span class="n">mzr</span><span class="p">,</span>
                 <span class="n">fxi</span><span class="p">,</span> <span class="n">fyi</span><span class="p">,</span> <span class="n">fzi</span><span class="p">,</span> <span class="n">mxi</span><span class="p">,</span> <span class="n">myi</span><span class="p">,</span> <span class="n">mzi</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                    <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                    <span class="n">fx</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">fxr</span><span class="p">,</span> <span class="n">fxi</span><span class="p">)</span>
                    <span class="n">mx</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">mxr</span><span class="p">,</span> <span class="n">mxi</span><span class="p">)</span>
                    <span class="n">fy</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">fyr</span><span class="p">,</span> <span class="n">fyi</span><span class="p">)</span>
                    <span class="n">my</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">myr</span><span class="p">,</span> <span class="n">myi</span><span class="p">)</span>
                    <span class="n">fz</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">fzr</span><span class="p">,</span> <span class="n">fzi</span><span class="p">)</span>
                    <span class="n">mz</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">mzr</span><span class="p">,</span> <span class="n">mzi</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fx</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">fxr</span><span class="p">,</span> <span class="n">fxi</span><span class="p">)</span>
                    <span class="n">mx</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">mxr</span><span class="p">,</span> <span class="n">mxi</span><span class="p">)</span>
                    <span class="n">fy</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">fyr</span><span class="p">,</span> <span class="n">fyi</span><span class="p">)</span>
                    <span class="n">my</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">myr</span><span class="p">,</span> <span class="n">myi</span><span class="p">)</span>
                    <span class="n">fz</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">fzr</span><span class="p">,</span> <span class="n">fzi</span><span class="p">)</span>
                    <span class="n">mz</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">mzr</span><span class="p">,</span> <span class="n">mzi</span><span class="p">)</span>

                <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">fx</span><span class="p">,</span> <span class="n">fy</span><span class="p">,</span> <span class="n">fz</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mz</span><span class="p">)</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
        <span class="c1">#elif self.format_code == 2 and self.num_wide == 7:</span>
            <span class="c1">#self.log.warning(self.code_information())</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oef_vu_shell</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        189-VUQUAD</span>
<span class="sd">        190-VUTRIA</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">189</span><span class="p">:</span>  <span class="c1"># VUQUAD</span>
            <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">4</span>
            <span class="n">etype</span> <span class="o">=</span> <span class="s1">&#39;VUQUAD4&#39;</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;vu_quad_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span> <span class="o">==</span> <span class="mi">190</span><span class="p">:</span>  <span class="c1"># VUTRIA</span>
            <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">3</span>
            <span class="n">etype</span> <span class="o">=</span> <span class="s1">&#39;VUTRIA3&#39;</span>
            <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;vu_tria_force&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">())</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">numwide_real</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">+</span> <span class="mi">13</span> <span class="o">*</span> <span class="n">nnodes</span>
        <span class="n">numwide_imag</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">+</span> <span class="mi">25</span> <span class="o">*</span> <span class="n">nnodes</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_real</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="c1"># real - format_code == 1</span>
            <span class="c1"># random - format_code == 2</span>

            <span class="c1">#ntotal = (6 + nnodes * 13) * 4 # 6+n*13</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="p">(</span><span class="mi">24</span> <span class="o">+</span> <span class="mi">52</span> <span class="o">*</span> <span class="n">nnodes</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">nlayers</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes</span>
            <span class="c1">#result_name = &#39;force_VU_2D&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nlayers</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">RealForceVU2DArray</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="n">nnodes</span>  <span class="c1"># number of &quot;layers&quot; for an element</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="mi">0</span><span class="p">:</span> <span class="c1">## TODO: vectorize</span>
                <span class="c1"># self.itime = 0</span>
                <span class="c1"># self.ielement = 0</span>
                <span class="c1"># self.itotal = 0</span>
                <span class="c1">#self.ntimes = 0</span>
                <span class="c1">#self.nelements = 0</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">ntotal</span>

                <span class="n">istart</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">iend</span> <span class="o">=</span> <span class="n">istart</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>

                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span>
                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids_nids</span>
                <span class="n">results</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">numwide_real</span><span class="p">)</span>

                <span class="c1">#[fx, fy, fz, mx, my, mz]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">istart</span><span class="p">:</span><span class="n">iend</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">results</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># 6+n*13</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                    <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3i4s2i&#39;</span><span class="p">)</span> <span class="c1"># 6</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3q8s2q&#39;</span><span class="p">)</span> <span class="c1"># 6</span>
                <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i3f3i5fi&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span> <span class="c1"># 13</span>
                <span class="n">ntotal1</span> <span class="o">=</span> <span class="mi">24</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 6*4</span>
                <span class="n">ntotal2</span> <span class="o">=</span> <span class="mi">52</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 13*4</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal1</span><span class="p">]</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal1</span>

                    <span class="n">out</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_Force_</span><span class="si">%s</span><span class="s1">-</span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">etype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">coord</span><span class="p">,</span> <span class="n">icord</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>

                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="c1">#vugrids = []</span>
                    <span class="c1">#forces = []</span>
                    <span class="k">for</span> <span class="n">unused_j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes</span><span class="p">):</span>
                        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal2</span><span class="p">]</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal2</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                        <span class="p">(</span><span class="n">vugrid</span><span class="p">,</span> <span class="n">mfx</span><span class="p">,</span> <span class="n">mfy</span><span class="p">,</span> <span class="n">mfxy</span><span class="p">,</span> <span class="n">unused_ai</span><span class="p">,</span> <span class="n">unused_bi</span><span class="p">,</span> <span class="n">unused_ci</span><span class="p">,</span> <span class="n">bmx</span><span class="p">,</span> <span class="n">bmy</span><span class="p">,</span>
                         <span class="n">bmxy</span><span class="p">,</span> <span class="n">syz</span><span class="p">,</span> <span class="n">szx</span><span class="p">,</span> <span class="n">unused_di</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
                        <span class="c1">#out2 = (vugrid, mfx, mfy, mfxy, bmx, bmy, bmxy, syz, szx)</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">coord</span><span class="p">,</span> <span class="n">icord</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span>
                                      <span class="n">vugrid</span><span class="p">,</span> <span class="n">mfx</span><span class="p">,</span> <span class="n">mfy</span><span class="p">,</span> <span class="n">mfxy</span><span class="p">,</span> <span class="n">bmx</span><span class="p">,</span> <span class="n">bmy</span><span class="p">,</span> <span class="n">bmxy</span><span class="p">,</span> <span class="n">syz</span><span class="p">,</span> <span class="n">szx</span><span class="p">)</span>
                        <span class="c1">#vugrids.append(vugrid)</span>
                        <span class="c1">#forces.append(out2)</span>
                    <span class="c1">#data_in = [vugrid,mfx,mfy,mfxy,a,b,c,bmx,bmy,bmxy,syz,szx,d]</span>
                    <span class="c1">#obj.add_sort1(dt, eid, parent, coord, icord, theta, vugrids, forces)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="n">numwide_imag</span><span class="p">:</span>  <span class="c1"># imag</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

            <span class="n">ntotal</span> <span class="o">=</span> <span class="n">numwide_imag</span> <span class="c1">#6 + 25 * nnodes; nnodes=[3, 4]</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="k">assert</span> <span class="n">ndata</span> <span class="o">%</span> <span class="n">ntotal</span> <span class="o">==</span> <span class="mi">0</span>

            <span class="n">nlayers</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="n">nnodes</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nlayers</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">ComplexForceVU_2DArray</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="n">nnodes</span>  <span class="c1"># number of &quot;layers&quot; for an element</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="c1">#print(&#39;dt=%s, itime=%s&#39; % (obj.itime, dt))</span>
            <span class="n">is_vectorized</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ntotal</span> <span class="o">=</span> <span class="p">(</span><span class="mi">24</span> <span class="o">+</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">nnodes</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                    <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;iii4sii&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;qqq8sqq&#39;</span><span class="p">)</span>
                <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i3f3i5fi3f3i5fi&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
                <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
                <span class="n">ntotal1</span> <span class="o">=</span> <span class="mi">24</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 6*4</span>
                <span class="n">ntotal2</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span> <span class="c1"># 13*4</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal1</span><span class="p">]</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal1</span>

                    <span class="n">out</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_Force_</span><span class="si">%s</span><span class="s1">-</span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">etype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">coord</span><span class="p">,</span> <span class="n">icord</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>

                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="n">vugrids</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="n">forces</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">unused_j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes</span><span class="p">):</span>
                        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal2</span><span class="p">]</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal2</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_Force_</span><span class="si">%s</span><span class="s1">-</span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                <span class="n">etype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                        <span class="p">[</span><span class="n">vugrid</span><span class="p">,</span> <span class="n">mfxr</span><span class="p">,</span> <span class="n">mfyr</span><span class="p">,</span> <span class="n">mfxyr</span><span class="p">,</span> <span class="n">unused_ai1</span><span class="p">,</span> <span class="n">unused_bi1</span><span class="p">,</span> <span class="n">unused_ci1</span><span class="p">,</span>
                         <span class="n">bmxr</span><span class="p">,</span> <span class="n">bmyr</span><span class="p">,</span> <span class="n">bmxyr</span><span class="p">,</span> <span class="n">syzr</span><span class="p">,</span> <span class="n">szxr</span><span class="p">,</span> <span class="n">unused_di1</span><span class="p">,</span>
                         <span class="n">mfxi</span><span class="p">,</span> <span class="n">mfyi</span><span class="p">,</span> <span class="n">mfxyi</span><span class="p">,</span> <span class="n">unused_ai2</span><span class="p">,</span> <span class="n">unused_bi2</span><span class="p">,</span> <span class="n">unused_ci2</span><span class="p">,</span>
                         <span class="n">bmxi</span><span class="p">,</span> <span class="n">bmyi</span><span class="p">,</span> <span class="n">bmxyi</span><span class="p">,</span> <span class="n">syzi</span><span class="p">,</span> <span class="n">szxi</span><span class="p">,</span> <span class="n">unused_di2</span><span class="p">]</span> <span class="o">=</span> <span class="n">out</span>

                        <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                            <span class="n">mfx</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">mfxr</span><span class="p">,</span> <span class="n">mfxi</span><span class="p">)</span>
                            <span class="n">mfy</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">mfyr</span><span class="p">,</span> <span class="n">mfyi</span><span class="p">)</span>
                            <span class="n">mfxy</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">mfxyr</span><span class="p">,</span> <span class="n">mfxyi</span><span class="p">)</span>
                            <span class="n">bmx</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">bmxr</span><span class="p">,</span> <span class="n">bmxi</span><span class="p">)</span>
                            <span class="n">bmy</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">bmyr</span><span class="p">,</span> <span class="n">bmyi</span><span class="p">)</span>
                            <span class="n">bmxy</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">bmxyr</span><span class="p">,</span> <span class="n">bmxyi</span><span class="p">)</span>
                            <span class="n">syz</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">syzr</span><span class="p">,</span> <span class="n">syzi</span><span class="p">)</span>
                            <span class="n">szx</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">szxr</span><span class="p">,</span> <span class="n">szxi</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">mfx</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">mfxr</span><span class="p">,</span> <span class="n">mfxi</span><span class="p">)</span>
                            <span class="n">mfy</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">mfyr</span><span class="p">,</span> <span class="n">mfyi</span><span class="p">)</span>
                            <span class="n">mfxy</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">mfxyr</span><span class="p">,</span> <span class="n">mfxyi</span><span class="p">)</span>
                            <span class="n">bmx</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">bmxr</span><span class="p">,</span> <span class="n">bmxi</span><span class="p">)</span>
                            <span class="n">bmy</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">bmyr</span><span class="p">,</span> <span class="n">bmyi</span><span class="p">)</span>
                            <span class="n">bmxy</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">bmxyr</span><span class="p">,</span> <span class="n">bmxyi</span><span class="p">)</span>
                            <span class="n">syz</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">syzr</span><span class="p">,</span> <span class="n">syzi</span><span class="p">)</span>
                            <span class="n">szx</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">szxr</span><span class="p">,</span> <span class="n">szxi</span><span class="p">)</span>
                        <span class="n">vugrids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vugrid</span><span class="p">)</span>
                        <span class="n">forcei</span> <span class="o">=</span> <span class="p">[</span><span class="n">mfx</span><span class="p">,</span> <span class="n">mfy</span><span class="p">,</span> <span class="n">mfxy</span><span class="p">,</span> <span class="n">bmx</span><span class="p">,</span> <span class="n">bmy</span><span class="p">,</span> <span class="n">bmxy</span><span class="p">,</span> <span class="n">syz</span><span class="p">,</span> <span class="n">szx</span><span class="p">]</span>
                        <span class="n">forces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">forcei</span><span class="p">)</span>

                    <span class="c1">#data_in = [vugrid,mfxr,mfyr,mfxyr,bmxr,bmyr,bmxyr,syzr,szxr,</span>
                                     <span class="c1">#mfxi,mfyi,mfxyi,bmxi,bmyi,bmxyi,syzi,szxi]</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">nnodes</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">coord</span><span class="p">,</span> <span class="n">icord</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">vugrids</span><span class="p">,</span> <span class="n">forces</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span>

    <span class="k">def</span> <span class="nf">_oef_vu_beam</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">postfix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;191-VUBEAM&quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">result_name</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;cbeam_force_vu&#39;</span> <span class="o">+</span> <span class="n">postfix</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">is_not_saved</span><span class="p">(</span><span class="n">result_name</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="o">.</span><span class="n">_found_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>
        <span class="n">slot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_result</span><span class="p">(</span><span class="n">result_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">20</span><span class="p">:</span>  <span class="c1"># real</span>
            <span class="c1">#ELTYPE = 191 Beam view element (VUBEAM)</span>
            <span class="c1">#---------------------------------------</span>
            <span class="c1">#2 PARENT I     Parent p-element identification number</span>
            <span class="c1">#3 COORD  I     Coordinate system identification number</span>
            <span class="c1">#4 ICORD  CHAR4 Flat/curved and so on</span>

            <span class="c1">#TCODE,7 = 0 Real</span>
            <span class="c1">#5 VUGRID   I  VU grid ID for output grid</span>
            <span class="c1">#6 POSIT    RS x/L position of VU grid identification number</span>
            <span class="c1">#7 FORCEX   RS Force x</span>
            <span class="c1">#8 SHEARY   RS Shear force y</span>
            <span class="c1">#9 SHEARZ   RS Shear force z</span>
            <span class="c1">#10 TORSION RS Torsional moment x</span>
            <span class="c1">#11 BENDY   RS Bending moment y</span>
            <span class="c1">#12 BENDZ   RS Bending moment z</span>

            <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span> <span class="c1"># 80</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">RealCBeamForceVUArray</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="k">return</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># self.itime = 0</span>
                <span class="c1"># self.ielement = 0</span>
                <span class="c1"># self.itotal = 0</span>
                <span class="c1">#self.ntimes = 0</span>
                <span class="c1">#self.nelements = 0</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span>
                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span> <span class="o">*</span> <span class="mi">2</span>

                <span class="c1"># 20 values</span>
                <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">20</span><span class="p">)[:,</span> <span class="mi">4</span><span class="p">:]</span>
                <span class="n">ints2</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
                <span class="k">assert</span> <span class="n">floats</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">16</span><span class="p">,</span> <span class="n">floats</span><span class="o">.</span><span class="n">shape</span>

                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="c1">#if obj.itime == 0:</span>
                <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                <span class="n">parent</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">coord</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span>
                <span class="c1">#icord = ints[:, 3]</span>

                <span class="n">ints2</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
                <span class="n">nids</span> <span class="o">=</span> <span class="n">ints2</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
                <span class="n">eids2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

                <span class="c1">#icord = ints[:, 3]  is this a string?</span>
                <span class="k">assert</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">eids</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">nids</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">parent_coord</span><span class="p">[</span><span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">parent</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">parent_coord</span><span class="p">[</span><span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">coord</span>

                <span class="n">floats2</span> <span class="o">=</span> <span class="n">floats</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
                <span class="c1">#[xxb, fx. fy, fz, mx, my, mz]</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">floats2</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span> <span class="o">=</span> <span class="n">itotal2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span> <span class="o">=</span> <span class="n">ielement2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;3i 4s&#39;</span><span class="p">)</span>
                <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i7f&#39;</span><span class="p">)</span>
                <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">16</span><span class="p">]</span>  <span class="c1"># 8*4</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="mi">16</span>

                    <span class="n">out</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_Force_VU-191 - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">coord</span><span class="p">,</span> <span class="n">icord</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>

                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
                    <span class="c1">#data_in = [eid, parent, coord, icord]</span>

                    <span class="c1">#forces = []</span>
                    <span class="k">for</span> <span class="n">unused_j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes</span><span class="p">):</span>
                        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">32</span><span class="p">]</span>  <span class="c1"># 8*4</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="mi">32</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
                        <span class="n">nid</span><span class="p">,</span> <span class="n">xxb</span><span class="p">,</span> <span class="n">fx</span><span class="p">,</span> <span class="n">fy</span><span class="p">,</span> <span class="n">fz</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mz</span> <span class="o">=</span> <span class="n">out</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">_add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">coord</span><span class="p">,</span> <span class="n">icord</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">xxb</span><span class="p">,</span> <span class="n">fx</span><span class="p">,</span> <span class="n">fy</span><span class="p">,</span> <span class="n">fz</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="n">mz</span><span class="p">)</span>
                    <span class="c1">#data_in = [vugrid, posit, forceX, shearY, shearZ, torsion, bendY, bendZ]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">32</span><span class="p">:</span>  <span class="c1"># random</span>
            <span class="c1"># TODO: vectorize</span>
            <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_code</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">==</span> <span class="mi">32</span><span class="p">:</span>  <span class="c1"># imag</span>
            <span class="c1">#TCODE,7 = 1 Real/imaginary or magnitude/phase</span>
            <span class="c1">#5 VUGRID   I  VU grid identification number for output grid</span>
            <span class="c1">#6 POSIT    RS x/L position of VU grid identification number</span>

            <span class="c1">#7 FORCEXR  RS Force x real/mag.</span>
            <span class="c1">#8 SHEARYR  RS Shear force y real/mag.</span>
            <span class="c1">#9 SHEARZR  RS Shear force z real/mag.</span>
            <span class="c1">#10 TORSINR RS Torsional moment x real/mag.</span>
            <span class="c1">#11 BENDYR  RS Bending moment y real/mag.</span>
            <span class="c1">#12 BENDZR  RS Bending moment z real/mag.</span>

            <span class="c1">#13 FORCEXI RS Force x imag./phase</span>
            <span class="c1">#14 SHEARYI RS Shear force y imag./phase</span>
            <span class="c1">#15 SHEARZI RS Shear force z imag./phase</span>
            <span class="c1">#16 TORSINI RS Torsional moment x imag./phase</span>
            <span class="c1">#17 BENDYI  RS Bending moment y imag./phase</span>
            <span class="c1">#18 BENDZI  RS Bending moment z imag./phase</span>
            <span class="c1">#Words 5 through max repeat 2 times</span>

            <span class="c1"># 32 = 4 + 56/4 * 2 = 4 + 14 * 2 = 4 + 28</span>
            <span class="c1">#nnodes = 2</span>
            <span class="c1">#ntotal = 16 + 56 * nnodes</span>
            <span class="n">ntotal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
            <span class="n">nelements</span> <span class="o">=</span> <span class="n">ndata</span> <span class="o">//</span> <span class="n">ntotal</span>

            <span class="c1"># TODO: vectorize</span>
            <span class="n">auto_return</span><span class="p">,</span> <span class="n">is_vectorized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_oes_object4</span><span class="p">(</span>
                <span class="n">nelements</span><span class="p">,</span> <span class="n">result_name</span><span class="p">,</span> <span class="n">slot</span><span class="p">,</span> <span class="n">ComplexCBeamForceVUArray</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">auto_return</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data_factor</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="k">return</span> <span class="n">ndata</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span>

            <span class="c1">#is_vectorized = False</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_vector</span> <span class="ow">and</span> <span class="n">is_vectorized</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1">#ntotal = nelements * 2</span>
                <span class="c1">#raise NotImplementedError(&#39;ComplexBeamForceVUArray&#39;)</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">nelements</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_wide</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>

                <span class="n">ielement</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">ielement</span>
                <span class="n">ielement2</span> <span class="o">=</span> <span class="n">ielement</span> <span class="o">+</span> <span class="n">nelements</span>

                <span class="n">itotal</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">itotal</span>
                <span class="n">itotal2</span> <span class="o">=</span> <span class="n">itotal</span> <span class="o">+</span> <span class="n">nelements</span><span class="o">*</span><span class="mi">2</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>

                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">itime</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">ints</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">idtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

                    <span class="n">eids</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="mi">10</span>
                    <span class="n">eids2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">eids</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
                    <span class="n">parent</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
                    <span class="n">coord</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span>
                    <span class="c1">#parent = ints[:, 3]</span>

                    <span class="n">ints2</span> <span class="o">=</span> <span class="n">ints</span><span class="p">[:,</span> <span class="mi">4</span><span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="mi">14</span><span class="p">)</span>
                    <span class="n">nids</span> <span class="o">=</span> <span class="n">ints2</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eids2</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">element_node</span><span class="p">[</span><span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">nids</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">parent_coord</span><span class="p">[</span><span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">parent</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">parent_coord</span><span class="p">[</span><span class="n">ielement</span><span class="p">:</span><span class="n">ielement2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">coord</span>

                <span class="n">floats</span> <span class="o">=</span> <span class="n">frombuffer</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fdtype</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">32</span><span class="p">)[:,</span> <span class="mi">4</span><span class="p">:]</span>
                <span class="k">assert</span> <span class="n">floats</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">28</span><span class="p">,</span> <span class="n">floats</span><span class="o">.</span><span class="n">shape</span>
                <span class="c1"># skipping [form1, form2]</span>
                <span class="n">floats2</span> <span class="o">=</span> <span class="n">floats</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="mi">14</span><span class="p">)</span>
                <span class="n">isave1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
                <span class="n">isave2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">]</span>
                <span class="c1">#[xxb, force_x, shear_y, shear_z, torsion, bending_y, bending_z]</span>
                <span class="n">real_imag</span> <span class="o">=</span> <span class="n">apply_mag_phase</span><span class="p">(</span><span class="n">floats2</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">,</span> <span class="n">isave1</span><span class="p">,</span> <span class="n">isave2</span><span class="p">)</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">floats2</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">,</span> <span class="n">itotal</span><span class="p">:</span><span class="n">itotal2</span><span class="p">,</span> <span class="mi">1</span><span class="p">:]</span> <span class="o">=</span> <span class="n">real_imag</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                    <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i2i4s&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;q2q8s&#39;</span><span class="p">)</span>
                <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i13f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
                <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">_times</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">itime</span><span class="p">]</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="n">ntotal1</span> <span class="o">=</span> <span class="mi">16</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>  <span class="c1"># 4*4</span>
                <span class="n">ntotal2</span> <span class="o">=</span> <span class="mi">56</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>  <span class="c1"># 14*4</span>
                <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
                    <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal1</span><span class="p">]</span>
                    <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal1</span>

                    <span class="n">out</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_Force_191-</span><span class="si">%s</span><span class="s1"> - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">element_type</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
                    <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">coord</span><span class="p">,</span> <span class="n">icord</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>

                    <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                        <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

                    <span class="n">unused_forces</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes</span><span class="p">):</span>
                        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal2</span><span class="p">]</span>
                        <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal2</span>
                        <span class="n">out</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
                        <span class="p">[</span><span class="n">vugrid</span><span class="p">,</span> <span class="n">posit</span><span class="p">,</span>
                         <span class="n">force_xr</span><span class="p">,</span> <span class="n">shear_yr</span><span class="p">,</span> <span class="n">shear_zr</span><span class="p">,</span> <span class="n">torsionr</span><span class="p">,</span> <span class="n">bending_yr</span><span class="p">,</span> <span class="n">bending_zr</span><span class="p">,</span>
                         <span class="n">force_xi</span><span class="p">,</span> <span class="n">shear_yi</span><span class="p">,</span> <span class="n">shear_zi</span><span class="p">,</span> <span class="n">torsioni</span><span class="p">,</span> <span class="n">bending_yi</span><span class="p">,</span> <span class="n">bending_zi</span><span class="p">]</span> <span class="o">=</span> <span class="n">out</span>

                        <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                            <span class="n">force_x</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">force_xr</span><span class="p">,</span> <span class="n">force_xi</span><span class="p">)</span>
                            <span class="n">shear_y</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">shear_yr</span><span class="p">,</span> <span class="n">shear_yi</span><span class="p">)</span>
                            <span class="n">shear_z</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">shear_zr</span><span class="p">,</span> <span class="n">shear_zi</span><span class="p">)</span>
                            <span class="n">torsion</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">torsionr</span><span class="p">,</span> <span class="n">torsioni</span><span class="p">)</span>
                            <span class="n">bending_y</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">bending_yr</span><span class="p">,</span> <span class="n">bending_yi</span><span class="p">)</span>
                            <span class="n">bending_z</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">bending_zr</span><span class="p">,</span> <span class="n">bending_zi</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">force_x</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">force_xr</span><span class="p">,</span> <span class="n">force_xi</span><span class="p">)</span>
                            <span class="n">shear_y</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">shear_yr</span><span class="p">,</span> <span class="n">shear_yi</span><span class="p">)</span>
                            <span class="n">shear_z</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">shear_zr</span><span class="p">,</span> <span class="n">shear_zi</span><span class="p">)</span>
                            <span class="n">torsion</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">torsionr</span><span class="p">,</span> <span class="n">torsioni</span><span class="p">)</span>
                            <span class="n">bending_y</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">bending_yr</span><span class="p">,</span> <span class="n">bending_yi</span><span class="p">)</span>
                            <span class="n">bending_z</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">bending_zr</span><span class="p">,</span> <span class="n">bending_zi</span><span class="p">)</span>

                        <span class="n">obj</span><span class="o">.</span><span class="n">_add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">coord</span><span class="p">,</span> <span class="n">icord</span><span class="p">,</span>
                                       <span class="n">vugrid</span><span class="p">,</span> <span class="n">posit</span><span class="p">,</span> <span class="n">force_x</span><span class="p">,</span> <span class="n">shear_y</span><span class="p">,</span> <span class="n">shear_z</span><span class="p">,</span> <span class="n">torsion</span><span class="p">,</span> <span class="n">bending_y</span><span class="p">,</span> <span class="n">bending_z</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">code_information</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_not_implemented_or_skip</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ndata</span><span class="p">,</span> <span class="n">msg</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span></div>

<div class="viewcode-block" id="oef_cbar_real"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.oef.html#pyNastran.op2.tables.oef_forces.oef.oef_cbar_real">[docs]</a><span class="k">def</span> <span class="nf">oef_cbar_real</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">RealCBarForceArray</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">fmt</span> <span class="o">=</span> <span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;8f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_sort1</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal</span><span class="p">]</span>

            <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_CBar - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
            <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">bm1a</span><span class="p">,</span> <span class="n">bm2a</span><span class="p">,</span> <span class="n">bm1b</span><span class="p">,</span> <span class="n">bm2b</span><span class="p">,</span> <span class="n">ts1</span><span class="p">,</span> <span class="n">ts2</span><span class="p">,</span> <span class="n">af</span><span class="p">,</span> <span class="n">trq</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
            <span class="c1">#data_in = [eid, bm1a, bm2a, bm1b, bm2b, ts1, ts2, af, trq]</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">bm1a</span><span class="p">,</span> <span class="n">bm2a</span><span class="p">,</span> <span class="n">bm1b</span><span class="p">,</span> <span class="n">bm2b</span><span class="p">,</span> <span class="n">ts1</span><span class="p">,</span> <span class="n">ts2</span><span class="p">,</span> <span class="n">af</span><span class="p">,</span> <span class="n">trq</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal</span><span class="p">]</span>

            <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_CBar - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
            <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span> <span class="n">bm1a</span><span class="p">,</span> <span class="n">bm2a</span><span class="p">,</span> <span class="n">bm1b</span><span class="p">,</span> <span class="n">bm2b</span><span class="p">,</span> <span class="n">ts1</span><span class="p">,</span> <span class="n">ts2</span><span class="p">,</span> <span class="n">af</span><span class="p">,</span> <span class="n">trq</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
            <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
                <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>
            <span class="c1">#data_in = [eid, bm1a, bm2a, bm1b, bm2b, ts1, ts2, af, trq]</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">add_sort2</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">bm1a</span><span class="p">,</span> <span class="n">bm2a</span><span class="p">,</span> <span class="n">bm1b</span><span class="p">,</span> <span class="n">bm2b</span><span class="p">,</span> <span class="n">ts1</span><span class="p">,</span> <span class="n">ts2</span><span class="p">,</span> <span class="n">af</span><span class="p">,</span> <span class="n">trq</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
    <span class="k">return</span> <span class="n">n</span></div>

<div class="viewcode-block" id="oef_cbar_imag"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.oef.html#pyNastran.op2.tables.oef_forces.oef.oef_cbar_imag">[docs]</a><span class="k">def</span> <span class="nf">oef_cbar_imag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">ComplexCBarForceArray</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="n">fmt</span> <span class="o">=</span> <span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_analysis_code_fmt</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;16f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal</span><span class="p">]</span>

        <span class="n">out</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
        <span class="p">(</span><span class="n">eid_device</span><span class="p">,</span>
         <span class="n">bm1ar</span><span class="p">,</span> <span class="n">bm2ar</span><span class="p">,</span> <span class="n">bm1br</span><span class="p">,</span> <span class="n">bm2br</span><span class="p">,</span> <span class="n">ts1r</span><span class="p">,</span> <span class="n">ts2r</span><span class="p">,</span> <span class="n">afr</span><span class="p">,</span> <span class="n">trqr</span><span class="p">,</span>
         <span class="n">bm1ai</span><span class="p">,</span> <span class="n">bm2ai</span><span class="p">,</span> <span class="n">bm1bi</span><span class="p">,</span> <span class="n">bm2bi</span><span class="p">,</span> <span class="n">ts1i</span><span class="p">,</span> <span class="n">ts2i</span><span class="p">,</span> <span class="n">afi</span><span class="p">,</span> <span class="n">trqi</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_CBar - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
        <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
            <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
            <span class="n">bm1a</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">bm1ar</span><span class="p">,</span> <span class="n">bm1ai</span><span class="p">)</span>
            <span class="n">bm2a</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">bm2ar</span><span class="p">,</span> <span class="n">bm2ai</span><span class="p">)</span>
            <span class="n">bm1b</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">bm1br</span><span class="p">,</span> <span class="n">bm1bi</span><span class="p">)</span>
            <span class="n">bm2b</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">bm2br</span><span class="p">,</span> <span class="n">bm2bi</span><span class="p">)</span>
            <span class="n">ts1</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">ts1r</span><span class="p">,</span> <span class="n">ts1i</span><span class="p">)</span>
            <span class="n">ts2</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">ts2r</span><span class="p">,</span> <span class="n">ts2i</span><span class="p">)</span>
            <span class="n">af</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">afr</span><span class="p">,</span> <span class="n">afi</span><span class="p">)</span>
            <span class="n">trq</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">trqr</span><span class="p">,</span> <span class="n">trqi</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">bm1a</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">bm1ar</span><span class="p">,</span> <span class="n">bm1ai</span><span class="p">)</span>
            <span class="n">bm2a</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">bm2ar</span><span class="p">,</span> <span class="n">bm2ai</span><span class="p">)</span>
            <span class="n">bm1b</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">bm1br</span><span class="p">,</span> <span class="n">bm1bi</span><span class="p">)</span>
            <span class="n">bm2b</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">bm2br</span><span class="p">,</span> <span class="n">bm2bi</span><span class="p">)</span>
            <span class="n">ts1</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">ts1r</span><span class="p">,</span> <span class="n">ts1i</span><span class="p">)</span>
            <span class="n">ts2</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">ts2r</span><span class="p">,</span> <span class="n">ts2i</span><span class="p">)</span>
            <span class="n">af</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">afr</span><span class="p">,</span> <span class="n">afi</span><span class="p">)</span>
            <span class="n">trq</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">trqr</span><span class="p">,</span> <span class="n">trqi</span><span class="p">)</span>

        <span class="c1">#data_in = [bm1a, bm2a, bm1b, bm2b, ts1, ts2, af, trq]</span>
        <span class="c1">#print(&quot;eid_device=%s eid=%s dt=%s %s&quot; % (</span>
            <span class="c1">#eid_device, eid, dt, self.get_element_type(self.element_type)), data_in)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">bm1a</span><span class="p">,</span> <span class="n">bm2a</span><span class="p">,</span> <span class="n">bm1b</span><span class="p">,</span> <span class="n">bm2b</span><span class="p">,</span> <span class="n">ts1</span><span class="p">,</span> <span class="n">ts2</span><span class="p">,</span> <span class="n">af</span><span class="p">,</span> <span class="n">trq</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>
    <span class="k">return</span> <span class="n">n</span></div>

<div class="viewcode-block" id="oef_cbeam_real_100"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.oef.html#pyNastran.op2.tables.oef_forces.oef.oef_cbeam_real_100">[docs]</a><span class="k">def</span> <span class="nf">oef_cbeam_real_100</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">RealCBeamForceArray</span><span class="p">,</span>
                       <span class="n">nelements</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">dt</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">ntotal1</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">ntotal2</span> <span class="o">=</span> <span class="mi">36</span>
    <span class="n">s1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">struct_i</span>
    <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i8f&#39;</span><span class="p">)</span>  <span class="c1"># 36</span>
    <span class="n">sort_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span>
    <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal1</span><span class="p">]</span>
        <span class="n">eid_device</span><span class="p">,</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
        <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
            <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="n">sort_method</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal1</span>

        <span class="k">for</span> <span class="n">istation</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal2</span><span class="p">]</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_Beam - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
            <span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">sd</span><span class="p">,</span> <span class="n">bm1</span><span class="p">,</span> <span class="n">bm2</span><span class="p">,</span> <span class="n">ts1</span><span class="p">,</span> <span class="n">ts2</span><span class="p">,</span> <span class="n">af</span><span class="p">,</span> <span class="n">ttrq</span><span class="p">,</span> <span class="n">wtrq</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>

            <span class="k">if</span> <span class="n">istation</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># isNewElement</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">add_new_element_sort1</span><span class="p">(</span>
                    <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">sd</span><span class="p">,</span> <span class="n">bm1</span><span class="p">,</span> <span class="n">bm2</span><span class="p">,</span> <span class="n">ts1</span><span class="p">,</span> <span class="n">ts2</span><span class="p">,</span> <span class="n">af</span><span class="p">,</span> <span class="n">ttrq</span><span class="p">,</span> <span class="n">wtrq</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">sd</span> <span class="o">&gt;</span> <span class="mf">0.</span><span class="p">:</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span>
                    <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">sd</span><span class="p">,</span> <span class="n">bm1</span><span class="p">,</span> <span class="n">bm2</span><span class="p">,</span> <span class="n">ts1</span><span class="p">,</span> <span class="n">ts2</span><span class="p">,</span> <span class="n">af</span><span class="p">,</span> <span class="n">ttrq</span><span class="p">,</span> <span class="n">wtrq</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal2</span>
    <span class="k">return</span> <span class="n">n</span></div>

<div class="viewcode-block" id="oef_cbeam_imag_177"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.oef.html#pyNastran.op2.tables.oef_forces.oef.oef_cbeam_imag_177">[docs]</a><span class="k">def</span> <span class="nf">oef_cbeam_imag_177</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">ComplexCBeamForceArray</span><span class="p">,</span>
                       <span class="n">nelements</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">,</span> <span class="n">is_magnitude_phase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1">#s1 = self.struct_i</span>
    <span class="n">ntotal1</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
    <span class="n">ntotal2</span> <span class="o">=</span> <span class="mi">64</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">factor</span>
    <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span> <span class="c1"># self.struct_i</span>
    <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="n">mapfmt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i15f&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntotal1</span><span class="p">]</span>
        <span class="n">eid_device</span><span class="p">,</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
        <span class="n">eid</span><span class="p">,</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">get_eid_dt_from_eid_device</span><span class="p">(</span>
            <span class="n">eid_device</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nonlinear_factor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort_method</span><span class="p">)</span>

        <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal1</span>
        <span class="k">for</span> <span class="n">istation</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">):</span>
            <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal2</span><span class="p">]</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal2</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_debug_file</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">binary_debug</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;OEF_Beam - </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)))</span>
            <span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">sd</span><span class="p">,</span>
             <span class="n">bm1r</span><span class="p">,</span> <span class="n">bm2r</span><span class="p">,</span> <span class="n">ts1r</span><span class="p">,</span> <span class="n">ts2r</span><span class="p">,</span> <span class="n">afr</span><span class="p">,</span> <span class="n">ttrqr</span><span class="p">,</span> <span class="n">wtrqr</span><span class="p">,</span>
             <span class="n">bm1i</span><span class="p">,</span> <span class="n">bm2i</span><span class="p">,</span> <span class="n">ts1i</span><span class="p">,</span> <span class="n">ts2i</span><span class="p">,</span> <span class="n">afi</span><span class="p">,</span> <span class="n">ttrqi</span><span class="p">,</span> <span class="n">wtrqi</span><span class="p">)</span> <span class="o">=</span> <span class="n">out</span>

            <span class="k">if</span> <span class="n">is_magnitude_phase</span><span class="p">:</span>
                <span class="n">bm1</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">bm1r</span><span class="p">,</span> <span class="n">bm1i</span><span class="p">)</span>
                <span class="n">bm2</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">bm2r</span><span class="p">,</span> <span class="n">bm2i</span><span class="p">)</span>
                <span class="n">ts1</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">ts1r</span><span class="p">,</span> <span class="n">ts1i</span><span class="p">)</span>
                <span class="n">ts2</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">ts2r</span><span class="p">,</span> <span class="n">ts2i</span><span class="p">)</span>
                <span class="n">af</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">afr</span><span class="p">,</span> <span class="n">afi</span><span class="p">)</span>
                <span class="n">ttrq</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">ttrqr</span><span class="p">,</span> <span class="n">ttrqi</span><span class="p">)</span>
                <span class="n">wtrq</span> <span class="o">=</span> <span class="n">polar_to_real_imag</span><span class="p">(</span><span class="n">wtrqr</span><span class="p">,</span> <span class="n">wtrqi</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">bm1</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">bm1r</span><span class="p">,</span> <span class="n">bm1i</span><span class="p">)</span>
                <span class="n">bm2</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">bm2r</span><span class="p">,</span> <span class="n">bm2i</span><span class="p">)</span>
                <span class="n">ts1</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">ts1r</span><span class="p">,</span> <span class="n">ts1i</span><span class="p">)</span>
                <span class="n">ts2</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">ts2r</span><span class="p">,</span> <span class="n">ts2i</span><span class="p">)</span>
                <span class="n">af</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">afr</span><span class="p">,</span> <span class="n">afi</span><span class="p">)</span>
                <span class="n">ttrq</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">ttrqr</span><span class="p">,</span> <span class="n">ttrqi</span><span class="p">)</span>
                <span class="n">wtrq</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">wtrqr</span><span class="p">,</span> <span class="n">wtrqi</span><span class="p">)</span>

            <span class="c1">#if i == 0:</span>
                <span class="c1">#obj.add_new_element_sort1(</span>
                    <span class="c1">#dt, eid, nid, sd, bm1, bm2, ts1, ts2,</span>
                    <span class="c1">#af, ttrq, wtrq)</span>
            <span class="c1">#elif sd &gt; 0.:</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span>
                <span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">sd</span><span class="p">,</span> <span class="n">bm1</span><span class="p">,</span> <span class="n">bm2</span><span class="p">,</span> <span class="n">ts1</span><span class="p">,</span> <span class="n">ts2</span><span class="p">,</span>
                <span class="n">af</span><span class="p">,</span> <span class="n">ttrq</span><span class="p">,</span> <span class="n">wtrq</span><span class="p">)</span>
            <span class="c1">#else:</span>
                <span class="c1">## don&#39;t add this field</span>
                <span class="c1">#pass</span>
                <span class="c1">#raise RuntimeError(&#39;CBEAM error; i=%s sd=%s&#39; % (i, sd))</span>
    <span class="k">return</span> <span class="n">n</span></div>

<div class="viewcode-block" id="oef_shells_composite_real_9"><a class="viewcode-back" href="../../../../../reference/op2/tables/oef_forces/pyNastran.op2.tables.oef_forces.oef.html#pyNastran.op2.tables.oef_forces.oef.oef_shells_composite_real_9">[docs]</a><span class="k">def</span> <span class="nf">oef_shells_composite_real_9</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
                                <span class="n">obj</span><span class="p">:</span> <span class="n">FailureIndicesArray</span><span class="p">,</span>
                                <span class="n">nelements</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">ntotal</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                                <span class="n">dt</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>
    <span class="c1">#                                5 6  7 8-i/f 9</span>
    <span class="n">s1</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i8sif 4s f i     4s&#39;</span><span class="p">)</span>
    <span class="n">s2</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i8sif 4s f f     4s&#39;</span><span class="p">)</span>
    <span class="n">eid_old</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">unused_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
        <span class="c1">#2 THEORY(2) CHAR4 Theory</span>
        <span class="c1">#4 LAMID     I Lamina number</span>
        <span class="c1">#5 FP       RS Failure index for direct stresses</span>
        <span class="c1">#6 FM       RS Failure mode for maximum strain theory</span>
        <span class="c1">#7 FB       RS Failure index for interlaminar shear stress or -1</span>
        <span class="c1">#8 FMAX     RS Maximum of FP and FB or -1.</span>
        <span class="c1">#9 FFLAG CHAR4 Failure flag</span>
        <span class="n">edata</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="n">ntotal</span><span class="p">]</span>  <span class="c1"># 4*9</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">s1</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)</span>

        <span class="c1"># failure_stress_for_ply = failure_strain_for_ply = failure_index_for_ply???</span>
        <span class="c1"># i    8s               i      f</span>
        <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">failure_theoryb</span><span class="p">,</span> <span class="n">ply_id</span><span class="p">,</span> <span class="n">failure_stress_for_ply</span><span class="p">,</span>
         <span class="c1"># 4s   7-f/i                8-f/i      9-4s</span>
         <span class="n">flagb</span><span class="p">,</span> <span class="n">interlaminar_stress</span><span class="p">,</span> <span class="n">max_value</span><span class="p">,</span> <span class="n">failure_flagb</span><span class="p">,</span>
         <span class="c1">#failure_index_for_bonding,</span>
         <span class="c1">#failure_index_for_element,</span>
         <span class="c1">#flag,</span>
         <span class="c1">#direct_stress_or_strain,</span>
         <span class="c1">#interlaminar_stress,</span>
         <span class="c1">#max_of_fb_fp_for_all_plies</span>
        <span class="p">)</span> <span class="o">=</span> <span class="n">out</span>

        <span class="n">failure_theory</span> <span class="o">=</span> <span class="n">reshape_bytes_block_strip</span><span class="p">(</span><span class="n">failure_theoryb</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">)</span>
        <span class="n">flag</span> <span class="o">=</span> <span class="n">reshape_bytes_block_strip</span><span class="p">(</span><span class="n">flagb</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">)</span>
        <span class="n">failure_flag</span> <span class="o">=</span> <span class="n">reshape_bytes_block_strip</span><span class="p">(</span><span class="n">failure_flagb</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">max_value</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">max_value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">max_value</span> <span class="o">=</span> <span class="n">s2</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">edata</span><span class="p">)[</span><span class="mi">6</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">eid</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="c1">#print(f&#39;  ply_id={ply_id} failure_stress_for_ply={failure_stress_for_ply} &#39;</span>
                  <span class="c1">#f&#39;flag={flag} interlaminar_stress={interlaminar_stress} max_value={max_value} failure_flag={failure_flag}&#39;)</span>
            <span class="n">eid</span> <span class="o">=</span> <span class="n">eid_old</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#print(f&quot;eid={eid} ft=&#39;{failure_theory}&#39;\n&quot;</span>
                  <span class="c1">#f&#39;  ply_id={ply_id} failure_stress_for_ply={failure_stress_for_ply} &#39;</span>
                  <span class="c1">#f&#39;flag={flag} interlaminar_stress={interlaminar_stress} max_value={max_value} failure_flag={failure_flag}&#39;)</span>
            <span class="n">eid_old</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="k">assert</span> <span class="n">flag</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;-1&#39;</span><span class="p">,</span> <span class="s1">&#39;-2&#39;</span><span class="p">,</span> <span class="s1">&#39;-12&#39;</span><span class="p">,</span> <span class="s1">&#39;IN&#39;</span><span class="p">],</span> <span class="sa">f</span><span class="s1">&#39;flag=</span><span class="si">{</span><span class="n">flag</span><span class="si">!r}</span><span class="s1"> flagb=</span><span class="si">{</span><span class="n">flagb</span><span class="si">!r}</span><span class="s1">&#39;</span>
        <span class="k">assert</span> <span class="n">failure_theory</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;TSAI-WU&#39;</span><span class="p">,</span> <span class="s1">&#39;STRAIN&#39;</span><span class="p">,</span> <span class="s1">&#39;HILL&#39;</span><span class="p">,</span> <span class="s1">&#39;HOFFMAN&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">],</span> <span class="s1">&#39;failure_theory=</span><span class="si">{failure_theory!r}</span><span class="s1">&#39;</span>
        <span class="k">assert</span>  <span class="n">failure_flag</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;***&#39;</span><span class="p">],</span> <span class="s1">&#39;failure_flag=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">failure_flag</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">add_sort1</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">failure_theory</span><span class="p">,</span> <span class="n">ply_id</span><span class="p">,</span> <span class="n">failure_stress_for_ply</span><span class="p">,</span> <span class="n">flag</span><span class="p">,</span>
                      <span class="n">interlaminar_stress</span><span class="p">,</span> <span class="n">max_value</span><span class="p">,</span> <span class="n">failure_flag</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="n">ntotal</span>

    <span class="c1">#s = Struct(self._endian + b&#39;i8si4f4s&#39;)</span>
    <span class="c1">#for i in range(nelements):</span>
        <span class="c1">#if i % 10000 == 0:</span>
            <span class="c1">#print &#39;i = &#39;, i</span>
        <span class="c1">#edata = data[n:n+ntotal]  # 4*9</span>
        <span class="c1">#out = s.unpack(edata)</span>
        <span class="c1">#(eid_device, theory, lamid, failure_index_direct_stress, failure_mode_max_shear,</span>
                 <span class="c1">#failure_index_interlaminar_shear, fmax, failure_flag) = out</span>
        <span class="c1">#eid, dt = get_eid_dt_from_eid_device(</span>
            <span class="c1">#eid_device, self.nonlinear_factor, self.sort_method)</span>
        <span class="c1">#if self.is_debug_file:</span>
            <span class="c1">#if eid &gt; 0:</span>
                <span class="c1">#self.binary_debug.write(&#39;  eid=%i; C=[%s]\n&#39; % (&#39;, &#39;.join([&#39;%r&#39; % di for di in out]) ))</span>
            <span class="c1">#else:</span>
                <span class="c1">#self.binary_debug.write(&#39;      %s  C=[%s]\n&#39; % (&#39; &#39; * len(str(eid)), &#39;, &#39;.join([&#39;%r&#39; % di for di in out]) ))</span>

        <span class="c1">#if eid &gt; 0:</span>
            <span class="c1">#obj.add_new_eid_sort1(eType, dt, eid, o1, o2, t12, t1z, t2z, angle, major, minor, ovm)</span>
        <span class="c1">#else:</span>
            <span class="c1">#obj.add_sort1(dt, eid, o1, o2, t12, t1z, t2z, angle, major, minor, ovm)</span>
        <span class="c1">#n += ntotal</span>
    <span class="k">return</span> <span class="n">n</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Steven Doyle.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>