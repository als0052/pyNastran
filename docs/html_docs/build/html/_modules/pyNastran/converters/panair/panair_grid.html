

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>pyNastran.converters.panair.panair_grid &mdash; pyNastran 1.4-dev 1.4-dev documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> pyNastran 1.4-dev
          

          
            
            <img src="../../../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.4-dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../quick_start/index.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../how_to/index.html">How To: pyNastran</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference/pyNastran.html">pyNastran Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../manual/index.html">pyNastran Manual</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">pyNastran 1.4-dev</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
        
      <li>pyNastran.converters.panair.panair_grid</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pyNastran.converters.panair.panair_grid</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">defines:</span>
<span class="sd"> - PanairGrid(log=None, debug=False)</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">count</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">ceil</span><span class="p">,</span> <span class="n">sin</span><span class="p">,</span> <span class="n">cos</span><span class="p">,</span> <span class="n">radians</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>


<span class="kn">from</span> <span class="nn">pyNastran.converters.panair.panair_grid_patch</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">PanairPatch</span><span class="p">,</span> <span class="n">PanairWakePatch</span><span class="p">,</span> <span class="n">print_float</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">pyNastran.converters.panair.assign_type</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">integer</span><span class="p">,</span> <span class="n">double</span><span class="p">,</span> <span class="n">integer_or_blank</span><span class="p">,</span> <span class="n">double_or_blank</span><span class="p">,</span> <span class="n">fortran_value</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">cpylog</span> <span class="kn">import</span> <span class="n">get_logger2</span>
<span class="kn">from</span> <span class="nn">pyNastran.utils</span> <span class="kn">import</span> <span class="n">check_path</span>

<span class="c1">#from pyNastran.utils import list_print</span>

<span class="c1">#CL = -Fx*sin(alpha)*cos(beta) + Fy*sin(alpha)*sin(beta) +Fz*cos(alpha)</span>
<span class="c1">#CD =  Fx*cos(alpha)*cos(beta) - Fy*cos(alpha)*sin(beta) +Fz*sin(alpha)</span>
<span class="c1">#CY =  Fx*sin(beta) +Fy*cos(beta)</span>


<div class="viewcode-block" id="PanairGrid"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid">[docs]</a><span class="k">class</span> <span class="nc">PanairGrid</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;defines the PanairGrid class&quot;&quot;&quot;</span>
    <span class="n">model_type</span> <span class="o">=</span> <span class="s1">&#39;panair&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">log</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the PanairGrid object</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        debug : bool/None; default=True</span>
<span class="sd">            used to set the logger if no logger is passed in</span>
<span class="sd">                True:  logs debug/info/error messages</span>
<span class="sd">                False: logs info/error messages</span>
<span class="sd">                None:  logs error messages</span>
<span class="sd">        log : logging module object / None</span>
<span class="sd">            if log is set, debug is ignored and uses the</span>
<span class="sd">            settings the logging object has</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infilename</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title_lines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xz_symmetry</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xy_symmetry</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nsymmetry_planes</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">nnetworks</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patches</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">alphas</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ncases</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">betas</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha_compressibility</span> <span class="o">=</span> <span class="mf">0.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">beta_compressibility</span> <span class="o">=</span> <span class="mf">0.</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sref</span> <span class="o">=</span> <span class="mf">1.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bref</span> <span class="o">=</span> <span class="mf">1.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cref</span> <span class="o">=</span> <span class="mf">1.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dref</span> <span class="o">=</span> <span class="mf">1.</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">xref</span> <span class="o">=</span> <span class="mf">0.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yref</span> <span class="o">=</span> <span class="mf">0.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zref</span> <span class="o">=</span> <span class="mf">0.</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">isings</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">isingp</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">igeomp</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">icontp</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ibconp</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iedgep</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ipraic</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nexdgn</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ioutpr</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ifmcpr</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">icostp</span> <span class="o">=</span> <span class="mf">0.0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">epsgeo</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">igeoin</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">igeout</span> <span class="o">=</span> <span class="mf">0.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nwxref</span> <span class="o">=</span> <span class="mf">0.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">triint</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iabsum</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_end</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pea_section</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mach</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_check</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">noff_body_points</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nstreamlines</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">title_section</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xyz_section</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">streamline_section</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">flow_section</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sectional_prop_section</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid_section</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_section</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">get_logger2</span><span class="p">(</span><span class="n">log</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>

<div class="viewcode-block" id="PanairGrid.write_plot3d"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.write_plot3d">[docs]</a>    <span class="k">def</span> <span class="nf">write_plot3d</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p3dname</span><span class="p">,</span> <span class="n">is_binary</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">is_iblank</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">assert</span> <span class="ow">not</span> <span class="n">is_binary</span><span class="p">,</span> <span class="n">is_binary</span>
        <span class="k">assert</span> <span class="ow">not</span> <span class="n">is_iblank</span><span class="p">,</span> <span class="n">is_iblank</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">p3dname</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">p3d_file</span><span class="p">:</span>
            <span class="n">npatches</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="p">)</span>
            <span class="n">npatches</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">npatches</span>
            <span class="k">for</span> <span class="n">patch_id</span><span class="p">,</span> <span class="n">patch</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
                <span class="c1">#if patchID == 1:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;patch_id = </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">patch_id</span><span class="p">)</span>
                <span class="n">ni</span><span class="p">,</span> <span class="n">nj</span> <span class="o">=</span> <span class="n">patch</span><span class="o">.</span><span class="n">xyz</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
                <span class="c1">#nr = patch.nrows</span>
                <span class="c1">#nc = patch.ncols</span>
                <span class="c1">#msg += &#39;%i %i 1\n&#39; % (nc, nr)</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%i</span><span class="s1"> </span><span class="si">%i</span><span class="s1"> 1</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ni</span><span class="p">,</span> <span class="n">nj</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">break</span>

            <span class="n">p3d_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">patch_id</span><span class="p">,</span> <span class="n">patch</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
                <span class="c1">#if patch_id == 1:</span>
                <span class="n">patch</span><span class="o">.</span><span class="n">write_plot3d</span><span class="p">(</span><span class="n">p3d_file</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c1"># x</span>
                <span class="n">patch</span><span class="o">.</span><span class="n">write_plot3d</span><span class="p">(</span><span class="n">p3d_file</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c1"># y</span>
                <span class="n">patch</span><span class="o">.</span><span class="n">write_plot3d</span><span class="p">(</span><span class="n">p3d_file</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c1"># z</span>
                <span class="n">p3d_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">break</span></div>

<div class="viewcode-block" id="PanairGrid.print_file"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.print_file">[docs]</a>    <span class="k">def</span> <span class="nf">print_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">%6s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;                                      record of input processing</span><span class="se">\n\n\n</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">msg</span></div>

    <span class="c1">#def get_panel_points(self, ipanel):</span>
        <span class="c1">#r = ipanel % (self.nrows - 1)</span>
        <span class="c1">#c = ipanel / (self.nrows - 1)</span>

        <span class="c1">##print &quot;r=%s c=%s&quot; %(r, c)</span>
        <span class="c1">#p1 = self.get_point(r, c)</span>
        <span class="c1">#p2 = self.get_point(r, c + 1)</span>
        <span class="c1">#p3 = self.get_point(r + 1, c + 1)</span>
        <span class="c1">#p4 = self.get_point(r + 1, c)</span>
        <span class="c1">#return (p1, p2, p3, p4)</span>

    <span class="c1">#def get_panel_point_IDs(self, ipanel):</span>
        <span class="c1">#r = ipanel % (self.nrows - 1)</span>
        <span class="c1">#c = ipanel / (self.nrows - 1)</span>

        <span class="c1">##print &quot;r=%s c=%s&quot; %(r, c)</span>
        <span class="c1">#p1 = self.get_point_ID(r, c)</span>
        <span class="c1">#p2 = self.get_point_ID(r, c + 1)</span>
        <span class="c1">#p3 = self.get_point_ID(r + 1, c + 1)</span>
        <span class="c1">#p4 = self.get_point_ID(r + 1, c)</span>
        <span class="c1">#return (p1, p2, p3, p4)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">npanels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">total_npanels</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">patch_id</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">npatches</span><span class="p">):</span>
            <span class="n">patch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_patch</span><span class="p">(</span><span class="n">patch_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">patch</span><span class="o">.</span><span class="n">kt</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">total_npanels</span> <span class="o">+=</span> <span class="n">patch</span><span class="o">.</span><span class="n">npanels</span>
                <span class="c1">#self.log.debug(&quot;nPanels = %s&quot; % (total_npanels))</span>
        <span class="k">return</span> <span class="n">total_npanels</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">npatches</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="p">)</span>

<div class="viewcode-block" id="PanairGrid.get_patch"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.get_patch">[docs]</a>    <span class="k">def</span> <span class="nf">get_patch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">patch_id</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="p">[</span><span class="n">patch_id</span><span class="p">]</span></div>

<div class="viewcode-block" id="PanairGrid.update_cases"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.update_cases">[docs]</a>    <span class="k">def</span> <span class="nf">update_cases</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reduces confusion by only printing cases that will run</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncases</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;ncases=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncases</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alphas</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncases</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">alphas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alphas</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">ncases</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">betas</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncases</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">betas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alphas</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">ncases</span><span class="p">]</span></div>

<div class="viewcode-block" id="PanairGrid.write_panair"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.write_panair">[docs]</a>    <span class="k">def</span> <span class="nf">write_panair</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out_filename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;writes the panair file&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_cases</span><span class="p">()</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_filename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">panair_file</span><span class="p">:</span>
            <span class="n">panair_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title_section</span><span class="p">)</span>
            <span class="n">panair_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">write_data_check</span><span class="p">())</span>
            <span class="n">panair_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">symmetry_section</span><span class="p">)</span>

            <span class="n">panair_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">write_mach</span><span class="p">())</span>
            <span class="n">panair_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">write_cases</span><span class="p">())</span>
            <span class="n">panair_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">write_alphas</span><span class="p">())</span>
            <span class="n">panair_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">write_reference_quantities</span><span class="p">())</span>

            <span class="c1">#panair_file.write(self.alphaSection)</span>
            <span class="c1">#panair_file.write(self.caseSection)</span>
            <span class="k">for</span> <span class="n">unused_patch_name</span><span class="p">,</span> <span class="n">patch</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
                <span class="n">panair_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">patch</span><span class="p">))</span>

            <span class="n">panair_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xyz_section</span><span class="p">)</span>
            <span class="n">panair_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">streamline_section</span><span class="p">)</span>
            <span class="n">panair_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flow_section</span><span class="p">)</span>
            <span class="n">panair_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sectional_prop_section</span><span class="p">)</span>
            <span class="n">panair_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid_section</span><span class="p">)</span>
            <span class="n">panair_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">write_printout</span><span class="p">())</span>

            <span class="n">panair_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pea_section</span><span class="p">)</span>
            <span class="n">panair_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">write_liberalized_abutments</span><span class="p">())</span>
            <span class="n">panair_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">write_end</span><span class="p">())</span></div>

    <span class="k">def</span> <span class="nf">_read_title</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">):</span>
        <span class="c1">#self.title = section[1:]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title_section</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">section</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title_lines</span> <span class="o">=</span> <span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_read_data_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_check</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">],</span> <span class="s1">&#39;data_check&#39;</span><span class="p">)</span>
        <span class="c1">#self.data_check = 2</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_read_symmetry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        .. code-block:: console</span>

<span class="sd">          $symmetry - xz plane of symmetry</span>
<span class="sd">          =misymm   mjsymm</span>
<span class="sd">          1.        0.</span>

<span class="sd">        .. warning::</span>

<span class="sd">            doesnt consider antisymmetryic</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># doesnt consider antisymmetric</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xz_symmetry</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">],</span> <span class="s1">&#39;xz_symmetry&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xy_symmetry</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">10</span><span class="p">:</span><span class="mi">20</span><span class="p">],</span> <span class="s1">&#39;xy_symmetry&#39;</span><span class="p">)</span>

        <span class="c1"># doesnt consider antisymmetric</span>
        <span class="c1">#self.xy_symmetry = integer(section[1][10:20], &#39;xy_symmetry&#39;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nsymmetry_planes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xz_symmetry</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">xy_symmetry</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symmetry_section</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">section</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;xz_symmetry=</span><span class="si">%s</span><span class="s2"> xy_symmetry=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xz_symmetry</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xy_symmetry</span><span class="p">))</span>
        <span class="k">return</span> <span class="kc">True</span>

<div class="viewcode-block" id="PanairGrid.split_points"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.split_points">[docs]</a>    <span class="k">def</span> <span class="nf">split_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines</span><span class="p">,</span> <span class="n">nfull_lines</span><span class="p">,</span> <span class="n">npartial_lines</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads the points</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ipoint</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">nrows</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">nfull_lines</span> <span class="o">+</span> <span class="n">npartial_lines</span>
        <span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nrows</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nfull_lines</span><span class="p">):</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
            <span class="n">x1</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">],</span> <span class="s1">&#39;x</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ipoint</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">y1</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">20</span><span class="p">],</span> <span class="s1">&#39;y</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ipoint</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">z1</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">20</span><span class="p">:</span><span class="mi">30</span><span class="p">],</span> <span class="s1">&#39;z</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ipoint</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">points</span><span class="p">[</span><span class="n">ipoint</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">z1</span><span class="p">]</span>
            <span class="n">ipoint</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="n">x2</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">30</span><span class="p">:</span><span class="mi">40</span><span class="p">],</span> <span class="s1">&#39;x</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ipoint</span> <span class="o">+</span> <span class="mi">2</span><span class="p">))</span>
            <span class="n">y2</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">40</span><span class="p">:</span><span class="mi">50</span><span class="p">],</span> <span class="s1">&#39;y</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ipoint</span> <span class="o">+</span> <span class="mi">2</span><span class="p">))</span>
            <span class="n">z2</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">50</span><span class="p">:</span><span class="mi">60</span><span class="p">],</span> <span class="s1">&#39;z</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ipoint</span> <span class="o">+</span> <span class="mi">2</span><span class="p">))</span>
            <span class="n">points</span><span class="p">[</span><span class="n">ipoint</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">z2</span><span class="p">]</span>
            <span class="n">ipoint</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="n">npartial_lines</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
            <span class="n">x1</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">],</span> <span class="s1">&#39;x</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ipoint</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">y1</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">20</span><span class="p">],</span> <span class="s1">&#39;y</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ipoint</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">z1</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">20</span><span class="p">:</span><span class="mi">30</span><span class="p">],</span> <span class="s1">&#39;z</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ipoint</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">points</span><span class="p">[</span><span class="n">ipoint</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">z1</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">points</span></div>

<div class="viewcode-block" id="PanairGrid.add_wake_patch"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.add_wake_patch">[docs]</a>    <span class="k">def</span> <span class="nf">add_wake_patch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network_name</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">xyz</span><span class="p">):</span>
        <span class="n">patch</span> <span class="o">=</span> <span class="n">PanairWakePatch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nnetworks</span><span class="p">,</span> <span class="n">network_name</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">xyz</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">+=</span> <span class="n">patch</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="p">[</span><span class="n">patch</span><span class="o">.</span><span class="n">inetwork</span><span class="p">]</span> <span class="o">=</span> <span class="n">patch</span>  <span class="c1"># deepcopy?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nnetworks</span> <span class="o">+=</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="PanairGrid.add_patch"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.add_patch">[docs]</a>    <span class="k">def</span> <span class="nf">add_patch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network_name</span><span class="p">,</span> <span class="n">kt</span><span class="p">,</span> <span class="n">cp_norm</span><span class="p">,</span> <span class="n">xyz</span><span class="p">):</span>
        <span class="n">patch</span> <span class="o">=</span> <span class="n">PanairPatch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nnetworks</span><span class="p">,</span> <span class="n">network_name</span><span class="p">,</span> <span class="n">kt</span><span class="p">,</span> <span class="n">cp_norm</span><span class="p">,</span> <span class="n">xyz</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">+=</span> <span class="n">patch</span><span class="o">.</span><span class="n">process</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="p">[</span><span class="n">patch</span><span class="o">.</span><span class="n">inetwork</span><span class="p">]</span> <span class="o">=</span> <span class="n">patch</span>  <span class="c1"># deepcopy?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nnetworks</span> <span class="o">+=</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="PanairGrid.find_patch_by_name"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.find_patch_by_name">[docs]</a>    <span class="k">def</span> <span class="nf">find_patch_by_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">network_name</span><span class="p">):</span>
        <span class="n">names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">unused_patch_id</span><span class="p">,</span> <span class="n">patch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1">#self.log.debug(&quot;patch_id=%s&quot; % (patch_id))</span>
            <span class="c1">#self.log.debug(&quot;*get_patch = %s&quot; %(get_patch))</span>
            <span class="c1">#self.log.debug(&quot;get_patch.network_name=%s&quot; % (get_patch.network_name))</span>
            <span class="k">if</span> <span class="n">patch</span><span class="o">.</span><span class="n">network_name</span> <span class="o">==</span> <span class="n">network_name</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">patch</span>
            <span class="n">names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">patch</span><span class="o">.</span><span class="n">network_name</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;couldn&#39;t find_patch_by_name name=</span><span class="si">%r</span><span class="s2"> names=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">network_name</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_read_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        .. code-block:: console</span>

<span class="sd">          $points - wing-body  with composite panels</span>
<span class="sd">          =kn                                               cpnorm</span>
<span class="sd">          4.                                                2.</span>
<span class="sd">          =kt</span>
<span class="sd">          1.</span>
<span class="sd">          =nm       nn                                                          netname</span>
<span class="sd">          11.       3.                                                          winga</span>
<span class="sd">          =x(1,1)   y(1,1)    z(1,1)    x(*,*)    y(*,*)    z(*,*)</span>
<span class="sd">             69.4737    9.2105    0.0000   63.7818    9.5807    0.7831</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nnetworks</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">],</span> <span class="s1">&#39;nnetworks&#39;</span><span class="p">)</span>
        <span class="n">cp_norm</span> <span class="o">=</span> <span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">50</span><span class="p">:</span><span class="mi">60</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="c1">#cp_norm = double(section[1][50:60], &#39;cp_norm&#39;)</span>

        <span class="n">kt</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">],</span> <span class="s1">&#39;kt&#39;</span><span class="p">)</span>
        <span class="c1">#if cp_norm:</span>
            <span class="c1">#self.log.debug(&quot;nnetworks=%s cp_norm=%s&quot; % (nnetworks, cp_norm))</span>
        <span class="c1">#else:</span>
            <span class="c1">#self.log.debug(&quot;nnetworks=%s&quot; % (nnetworks))</span>

        <span class="n">n</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;      kn,kt            </span><span class="si">%i</span><span class="s1">          </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nnetworks</span><span class="p">,</span> <span class="n">kt</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">unused_inetwork</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnetworks</span><span class="p">):</span>
            <span class="c1">#self.log.debug(&quot;lines[* %s] = %s&quot; % (n - 1, section[n - 1]))</span>
            <span class="n">nm</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">],</span> <span class="s1">&#39;nm&#39;</span><span class="p">)</span>
            <span class="n">nn</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="mi">10</span><span class="p">:</span><span class="mi">20</span><span class="p">],</span> <span class="s1">&#39;nn&#39;</span><span class="p">)</span>
            <span class="n">network_name</span> <span class="o">=</span> <span class="n">section</span><span class="p">[</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="mi">70</span><span class="p">:</span><span class="mi">80</span><span class="p">]</span>
            <span class="c1">#self.log.debug(&quot;kt=%s nm=%s nn=%s netname=%s&quot; % (</span>
                <span class="c1">#kt, nm, nn, network_name))</span>

            <span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="n">nm</span><span class="p">,</span> <span class="n">nn</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span>
            <span class="c1">#y = zeros([nm, nn])</span>
            <span class="c1">#z = zeros([nm, nn])</span>
            <span class="n">nfull_lines</span> <span class="o">=</span> <span class="n">nm</span> <span class="o">//</span> <span class="mi">2</span>
            <span class="n">npartial_lines</span> <span class="o">=</span> <span class="n">nm</span> <span class="o">%</span> <span class="mi">2</span>
            <span class="n">nlines</span> <span class="o">=</span> <span class="n">nfull_lines</span> <span class="o">+</span> <span class="n">npartial_lines</span>
            <span class="c1">#print &quot;nfull_lines=%s npartial_lines=%s nlines=%s&quot; % (</span>
                <span class="c1">#nfull_lines, npartial_lines, nlines)</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nn</span><span class="p">):</span>
                <span class="n">lines</span> <span class="o">=</span> <span class="n">section</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">nlines</span><span class="p">]</span>
                <span class="n">n</span> <span class="o">+=</span> <span class="n">nlines</span>
                <span class="c1">#print &#39;\n&#39;.join(lines)</span>
                <span class="n">points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">split_points</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">nfull_lines</span><span class="p">,</span> <span class="n">npartial_lines</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">points</span><span class="p">):</span>
                    <span class="n">xyz</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">point</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">point</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">network_name</span><span class="p">,</span> <span class="n">kt</span><span class="p">,</span> <span class="n">cp_norm</span><span class="p">,</span> <span class="n">xyz</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_read_circular_section</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        .. code-block:: console</span>
<span class="sd">          $circular sections - nacelle with composite panels</span>
<span class="sd">          =kn</span>
<span class="sd">          2.</span>
<span class="sd">          =kt</span>
<span class="sd">          1.</span>
<span class="sd">          =nopt                                                                 netname</span>
<span class="sd">          0.                                                                    cowlu</span>
<span class="sd">          =nm</span>
<span class="sd">          20.</span>
<span class="sd">          =xs(1)    ri(1)     xs(2)     ri(2)     xs(*)     ri(*)</span>
<span class="sd">              2.0000    2.3000    1.5756    2.3000    1.1486    2.3000</span>
<span class="sd">              0.7460    2.3030    0.4069    2.3286    0.1624    2.3790</span>
<span class="sd">              0.0214    2.4542   -0.0200    2.5485    0.0388    2.6522 # 18</span>
<span class="sd">              0.2056    2.7554    0.4869    2.8522    0.8883    2.9413</span>
<span class="sd">              1.4250    3.0178    2.1188    3.0656    2.9586    3.0658 # 36</span>
<span class="sd">              3.8551    3.0175    4.6715    2.9439    5.3492    2.8700 # 42</span>
<span class="sd">              6.0000    2.7842    6.4687    2.7442 # 46 -&gt;23</span>
<span class="sd">          =nn</span>
<span class="sd">          5.</span>
<span class="sd">          =th(1)    th(2)     th(3)     th(4)     th(5)</span>
<span class="sd">          -90.      -45.      0.        45.       90.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nnetworks</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">],</span> <span class="s1">&#39;nnetworks&#39;</span><span class="p">)</span>
        <span class="n">cp_norm</span> <span class="o">=</span> <span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">50</span><span class="p">:</span><span class="mi">60</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="n">kt</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">],</span> <span class="s1">&#39;kt&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">cp_norm</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;nnetworks=</span><span class="si">%s</span><span class="s2"> cp_norm=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nnetworks</span><span class="p">,</span> <span class="n">cp_norm</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;nnetworks=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nnetworks</span><span class="p">))</span>
        <span class="c1">#print(&quot;nnetworks=%s cp_norm=%s&quot; % (nnetworks, cp_norm))</span>

        <span class="n">n</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;      kn,kt            </span><span class="si">%i</span><span class="s1">          </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nnetworks</span><span class="p">,</span> <span class="n">kt</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">unused_inetwork</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnetworks</span><span class="p">):</span>
            <span class="c1">#self.log.debug(&quot;lines[%s] = %s&quot; % (n, section[n]))</span>
            <span class="c1"># 0-noDisplacement; 1-Specify</span>
            <span class="n">ndisplacement</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">],</span> <span class="s1">&#39;ndisplacement&#39;</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">ndisplacement</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">section</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="c1">#print(&quot;\nsection[n] = &quot;, section[n].strip())</span>
            <span class="n">nx_nr</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">],</span> <span class="s1">&#39;nx_nr&#39;</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">nx_nr</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">section</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
            <span class="c1">#print(&quot;nxr = %s&quot; % nxr)</span>
            <span class="n">network_name</span> <span class="o">=</span> <span class="n">section</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="mi">70</span><span class="p">:</span><span class="mi">80</span><span class="p">]</span>
            <span class="c1">#self.log.debug(&quot;kt=%s nx_nr=%s ndisplacement=%s network_name=%s&quot; %</span>
                           <span class="c1">#(kt, nx_nr, ndisplacement, network_name))</span>

            <span class="n">nfull_lines</span> <span class="o">=</span> <span class="n">nx_nr</span> <span class="o">//</span> <span class="mi">3</span>
            <span class="n">npartial_lines</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ceil</span><span class="p">(</span><span class="n">nx_nr</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">/</span> <span class="mf">3.</span><span class="p">))</span>
            <span class="n">nx_nr_lines</span> <span class="o">=</span> <span class="n">nfull_lines</span> <span class="o">+</span> <span class="n">npartial_lines</span>
            <span class="c1">#print(&quot;X,Rad - nfull_lines=%s npartial_lines=%s nx_nr_lines=%s\n&quot; % (</span>
                <span class="c1">#nfull_lines, npartial_lines, nx_nr_lines))</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="n">Xin</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">R</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">lines_full</span> <span class="o">=</span> <span class="n">section</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">nx_nr_lines</span><span class="p">]</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">nx_nr_lines</span>

            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines_full</span><span class="p">)</span> <span class="o">==</span> <span class="mi">7</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines_full</span><span class="p">)</span>

            <span class="n">ipoint</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines_full</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">60</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">x1</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">],</span> <span class="s1">&#39;x</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ipoint</span><span class="p">)</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">20</span><span class="p">],</span> <span class="s1">&#39;r</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ipoint</span><span class="p">)</span>
                    <span class="n">Xin</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x1</span><span class="p">)</span>
                    <span class="n">R</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r1</span><span class="p">)</span>
                    <span class="n">ipoint</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">())</span>

                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">20</span><span class="p">:</span><span class="mi">60</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">x2</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">20</span><span class="p">:</span><span class="mi">30</span><span class="p">],</span> <span class="s1">&#39;x</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ipoint</span><span class="p">)</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">30</span><span class="p">:</span><span class="mi">40</span><span class="p">],</span> <span class="s1">&#39;r</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ipoint</span><span class="p">)</span>
                    <span class="n">Xin</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x2</span><span class="p">)</span>
                    <span class="n">R</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r2</span><span class="p">)</span>
                    <span class="n">ipoint</span> <span class="o">+=</span> <span class="mi">1</span>

                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">40</span><span class="p">:</span><span class="mi">60</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">x3</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">40</span><span class="p">:</span><span class="mi">50</span><span class="p">],</span> <span class="s1">&#39;x</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ipoint</span><span class="p">)</span>
                    <span class="n">r3</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">50</span><span class="p">:</span><span class="mi">60</span><span class="p">],</span> <span class="s1">&#39;r</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ipoint</span><span class="p">)</span>
                    <span class="n">Xin</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x3</span><span class="p">)</span>
                    <span class="n">R</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r3</span><span class="p">)</span>
                    <span class="n">ipoint</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">assert</span> <span class="n">nx_nr</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">Xin</span><span class="p">),</span> <span class="s1">&#39;nx,nr=</span><span class="si">%s</span><span class="s1"> Xin=</span><span class="si">%s</span><span class="s1"> len(Xin)=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nx_nr</span><span class="p">,</span> <span class="n">Xin</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">Xin</span><span class="p">))</span>

            <span class="c1">#----------------------------------------------------</span>
            <span class="c1">#print(&quot;section[n] = &quot;, section[n].strip())</span>
            <span class="n">ntheta</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">],</span> <span class="s1">&#39;ntheta&#39;</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">ntheta</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">section</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
            <span class="c1">#print(&quot;ntheta = %s&quot; % ntheta)</span>
            <span class="n">nfull_lines</span> <span class="o">=</span> <span class="n">ntheta</span> <span class="o">//</span> <span class="mi">6</span>
            <span class="n">npartial_lines</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ceil</span><span class="p">(</span><span class="n">ntheta</span> <span class="o">%</span> <span class="mi">6</span> <span class="o">/</span> <span class="mf">6.</span><span class="p">))</span>
            <span class="n">ntheta_lines</span> <span class="o">=</span> <span class="n">nfull_lines</span> <span class="o">+</span> <span class="n">npartial_lines</span>
            <span class="c1">#print(&quot;Theta - nfull_lines=%s npartial_lines=%s nlines=%s&quot; % (</span>
            <span class="c1">#    nfull_lines, npartial_lines, ntheta_lines))</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="n">lines</span> <span class="o">=</span> <span class="n">section</span><span class="p">[</span><span class="n">n</span><span class="p">:</span><span class="n">n</span> <span class="o">+</span> <span class="n">ntheta_lines</span><span class="p">]</span>
            <span class="n">theta</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="n">ipoint</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
                <span class="c1">#print(line)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">60</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">theta1</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">],</span> <span class="s1">&#39;theta</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ipoint</span><span class="p">)</span>
                    <span class="n">theta</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">theta1</span><span class="p">)</span>
                    <span class="n">ipoint</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">())</span>

                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">60</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">theta2</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">20</span><span class="p">],</span> <span class="s1">&#39;theta</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ipoint</span><span class="p">)</span>
                    <span class="n">theta</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">theta2</span><span class="p">)</span>
                    <span class="n">ipoint</span> <span class="o">+=</span> <span class="mi">1</span>

                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">20</span><span class="p">:</span><span class="mi">60</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">theta3</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">20</span><span class="p">:</span><span class="mi">30</span><span class="p">],</span> <span class="s1">&#39;theta</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ipoint</span><span class="p">)</span>
                    <span class="n">theta</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">theta3</span><span class="p">)</span>
                    <span class="n">ipoint</span> <span class="o">+=</span> <span class="mi">1</span>

                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">30</span><span class="p">:</span><span class="mi">60</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">theta4</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">30</span><span class="p">:</span><span class="mi">40</span><span class="p">],</span> <span class="s1">&#39;theta</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ipoint</span><span class="p">)</span>
                    <span class="n">theta</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">theta4</span><span class="p">)</span>
                    <span class="n">ipoint</span> <span class="o">+=</span> <span class="mi">1</span>

                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">40</span><span class="p">:</span><span class="mi">60</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">theta5</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">40</span><span class="p">:</span><span class="mi">50</span><span class="p">],</span> <span class="s1">&#39;theta</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ipoint</span><span class="p">)</span>
                    <span class="n">theta</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">theta5</span><span class="p">)</span>
                    <span class="n">ipoint</span> <span class="o">+=</span> <span class="mi">1</span>

                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">50</span><span class="p">:</span><span class="mi">60</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">theta6</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">50</span><span class="p">:</span><span class="mi">60</span><span class="p">],</span> <span class="s1">&#39;theta</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ipoint</span><span class="p">)</span>
                    <span class="n">theta</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">theta6</span><span class="p">)</span>
                    <span class="n">ipoint</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">ntheta_lines</span>

            <span class="k">assert</span> <span class="n">ntheta</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
            <span class="n">sin_theta_r</span> <span class="o">=</span> <span class="p">[</span><span class="n">sin</span><span class="p">(</span><span class="n">radians</span><span class="p">(</span><span class="n">thetai</span><span class="p">))</span> <span class="k">for</span> <span class="n">thetai</span> <span class="ow">in</span> <span class="n">theta</span><span class="p">]</span>
            <span class="n">cos_theta_r</span> <span class="o">=</span> <span class="p">[</span><span class="n">cos</span><span class="p">(</span><span class="n">radians</span><span class="p">(</span><span class="n">thetai</span><span class="p">))</span> <span class="k">for</span> <span class="n">thetai</span> <span class="ow">in</span> <span class="n">theta</span><span class="p">]</span>

            <span class="n">zi</span> <span class="o">=</span> <span class="mf">0.</span>
            <span class="c1"># TODO: can&#39;t we use numpy meshgrid?</span>
            <span class="n">XYZ</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="n">nx_nr</span><span class="p">,</span> <span class="n">ntheta</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span>
            <span class="c1">#print(&quot;Xin=%s \nR=%s&quot; % (Xin, R))</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">count</span><span class="p">(),</span> <span class="n">Xin</span><span class="p">,</span> <span class="n">R</span><span class="p">):</span>
                <span class="k">for</span> <span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">sin_theta</span><span class="p">,</span> <span class="n">cos_theta</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">count</span><span class="p">(),</span> <span class="n">sin_theta_r</span><span class="p">,</span> <span class="n">cos_theta_r</span><span class="p">):</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">sin_theta</span>
                    <span class="n">z</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">cos_theta</span> <span class="o">+</span> <span class="n">zi</span>
                    <span class="c1">#print(&quot;x=%s y=%s z=%s&quot; % (x, y, z))</span>
                    <span class="n">XYZ</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">]</span>

            <span class="c1">#print(&quot;--XYZ--&quot;)</span>
            <span class="c1">#print(xyz)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">network_name</span><span class="p">,</span> <span class="n">kt</span><span class="p">,</span> <span class="n">cp_norm</span><span class="p">,</span> <span class="n">XYZ</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_read_grid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid_section</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">section</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_read_xyz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xyz_section</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">section</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_read_streamlines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">streamline_section</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">section</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_read_printout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        .. code-block:: console</span>

<span class="sd">          isings  igeomp  isingp  icontp  ibconp  iedgep</span>
<span class="sd">          ipraic  nexdgn  ioutpr  ifmcpr  icostp</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#self.printoutSection = &#39;\n&#39;.join(section)+&#39;\n&#39;</span>

        <span class="c1">#  ROW 1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">isings</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">],</span> <span class="s1">&#39;isings&#39;</span><span class="p">)</span>
        <span class="c1">#self.isings = 5.</span>
        <span class="c1">#2.0 output wake singularity grid-singularity strength and gradients at 9 pts/panel</span>
        <span class="c1">#3.0 add table of singularity parameter values</span>
        <span class="c1">#4.0 add network array of singularity values</span>
        <span class="c1">#5.0 add singularity grid for all network</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">igeomp</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">10</span><span class="p">:</span><span class="mi">20</span><span class="p">],</span> <span class="s1">&#39;igeomp&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">igeomp</span> <span class="o">=</span> <span class="mf">1.</span>
        <span class="c1"># 1.0 outputs panel data - geometry diagnostic data</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">isingp</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">20</span><span class="p">:</span><span class="mi">30</span><span class="p">],</span> <span class="s1">&#39;isingp&#39;</span><span class="p">)</span>
        <span class="c1">#self.isignp = 1.  # ???</span>
        <span class="c1"># 1.0 outputs singularity spline data</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">icontp</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">30</span><span class="p">:</span><span class="mi">40</span><span class="p">],</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">icontp</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="c1"># 1.0 outputs control pt location, upper surface unit normals, control point</span>
        <span class="c1">#     diagnositc data, control pt maps and singularity parameter maps</span>
        <span class="c1"># 2.0 add additional control point map for each network</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ibconp</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">40</span><span class="p">:</span><span class="mi">50</span><span class="p">],</span> <span class="s1">&#39;ibconp&#39;</span><span class="p">)</span>
        <span class="c1">#self.ibconp = 0.0</span>
        <span class="c1"># 1.0 outputs boundary condition coeffs, diagnositc data,</span>
        <span class="c1">#     boundary condition maps, control point maps,</span>
        <span class="c1">#     and singularity paramter maps</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">iedgep</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">50</span><span class="p">:</span><span class="mi">60</span><span class="p">],</span> <span class="s1">&#39;iedgep&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iedgep</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="c1"># 1.0 outputs edge-matching diagnositic data</span>
        <span class="c1">#print(&quot;igeomp=%r isingp=%r icontp=%r ibconp=%r iedgep=%r&quot; % (</span>
            <span class="c1">#igeomp, isingp, icontp, ibconp, iedgep))</span>

        <span class="c1">#  ROW 2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ipraic</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">],</span> <span class="s1">&#39;ipraic&#39;</span><span class="p">)</span>
        <span class="c1">#self.ipraic = 3.</span>
        <span class="c1"># xxx inputs control point sequence number for</span>
        <span class="c1">#     which AIC values are to be pritned (rarely used)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">nexdgn</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">10</span><span class="p">:</span><span class="mi">20</span><span class="p">],</span> <span class="s1">&#39;nexdgn&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nexdgn</span> <span class="o">=</span> <span class="mf">0.</span>
        <span class="c1"># 1.0 outputs edge and extra control point data</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ioutpr</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">20</span><span class="p">:</span><span class="mi">30</span><span class="p">],</span> <span class="s1">&#39;ioutpr&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ioutpr</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span>
        <span class="c1"># -1.0 omits flow parameter output</span>
        <span class="c1">#  0.0 outputs 49 flow parameters</span>
        <span class="c1">#  1.0 outputs 13 flow parameters</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ifmcpr</span> <span class="o">=</span> <span class="n">section</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">30</span><span class="p">:</span><span class="mi">40</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ifmcpr</span> <span class="o">=</span> <span class="mf">0.</span>
        <span class="c1"># 0.0 omits network force and moment output</span>
        <span class="c1"># 1.0 outputs network forces and moments summary per column,</span>
        <span class="c1">#     per network, and accumulation over all previous networks</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">icostp</span> <span class="o">=</span> <span class="n">section</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">40</span><span class="p">:</span><span class="mi">50</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">icostp</span> <span class="o">=</span> <span class="mf">0.</span>
        <span class="c1">#self.icostp = 1.0</span>
        <span class="c1">#print(&quot;ipraic=%r nexdgn=%r ioutpr=%r ifmcpr=%r ifmcpr=%r&quot;</span>
              <span class="c1">#% (ipraic, nexdgn, ioutpr, ifmcpr, iedgep))</span>
        <span class="c1"># 1.0 outputs detailed job cost for different segments of the</span>
        <span class="c1">#     program (rarely used)</span>

        <span class="c1">#$printout options</span>
        <span class="c1">#=isings   igeomp    isingp    icontp    ibconp    iedgep</span>
        <span class="c1">#4.        0.        0.        1.        1.        0.</span>
        <span class="c1">#=ipraic   nexdgn    ioutpr    ifmcpr</span>
        <span class="c1">#.0        .0        1.        0.                  3.</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_read_trailing_wakes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        .. code-block:: console</span>

<span class="sd">          $trailing wakes from body</span>
<span class="sd">          =kn                                               cpnorm</span>
<span class="sd">          2.</span>
<span class="sd">          =kt       matcw</span>
<span class="sd">          18.       1.</span>
<span class="sd">          =inat     insd      xwake     twake                                   netname</span>
<span class="sd">          bodyl     3.        100.      .0                                      bodylwk</span>
<span class="sd">          bodyu     3.        100.      .0                                      bodyuwk</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#return True  # disable wakes</span>
        <span class="n">nnetworks</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">],</span> <span class="s1">&#39;nnetworks&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="n">cp_norm</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">50</span><span class="p">:</span><span class="mi">60</span><span class="p">],</span> <span class="s1">&#39;cp_norm&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1">#print &quot;section[2] = &quot;,section[2]</span>
        <span class="n">kt</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">],</span> <span class="s1">&#39;kt&#39;</span><span class="p">)</span>

        <span class="n">matchw</span> <span class="o">=</span> <span class="n">section</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">10</span><span class="p">:</span><span class="mi">20</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">matchw</span><span class="p">:</span>
            <span class="n">matchw</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">matchw</span><span class="p">)</span>
        <span class="c1">#if cp_norm:</span>
            <span class="c1">#print &quot;nnetworks=%s cp_norm=%s&quot; % (nnetworks, cp_norm)</span>
        <span class="c1">#else:</span>
            <span class="c1">#print &quot;nnetworks=%s&quot; % (nnetworks)</span>
        <span class="c1">#print &quot;&quot;</span>
        <span class="c1">#matcw = integer(section[2][10:20], &#39;matcw)</span>

        <span class="n">n</span> <span class="o">=</span> <span class="mi">3</span>  <span class="c1"># line number</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;      kn,kt            </span><span class="si">%i</span><span class="s1">          </span><span class="si">%i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nnetworks</span><span class="p">,</span> <span class="n">kt</span><span class="p">)</span>
        <span class="c1">#self.log.debug(&#39;kt=%s cp_norm=%s matchw=%s&#39; % (kt, cp_norm, matchw))</span>
        <span class="k">for</span> <span class="n">unused_inetwork</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnetworks</span><span class="p">):</span>
            <span class="c1">#self.log.debug(&quot;lines[* %s] = %s&quot; % (n, section[n]))</span>

            <span class="n">trailed_panel</span> <span class="o">=</span> <span class="n">section</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">edge_number</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="mi">10</span><span class="p">:</span><span class="mi">20</span><span class="p">],</span> <span class="s1">&#39;edge_number&#39;</span><span class="p">)</span>
            <span class="n">xwake</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="mi">20</span><span class="p">:</span><span class="mi">30</span><span class="p">],</span> <span class="s1">&#39;xwake&#39;</span><span class="p">)</span>  <span class="c1"># x distance</span>

            <span class="c1"># 0-wake parallel to x axis</span>
            <span class="c1">#1-wake in direction of compressibility</span>
            <span class="n">twake</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="mi">30</span><span class="p">:</span><span class="mi">40</span><span class="p">],</span> <span class="s1">&#39;twake&#39;</span><span class="p">)</span>
            <span class="n">network_name</span> <span class="o">=</span> <span class="n">section</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="mi">70</span><span class="p">:</span><span class="mi">80</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;trailed_panel=</span><span class="si">%s</span><span class="s1"> edge_number=</span><span class="si">%s</span><span class="s1"> xwake=</span><span class="si">%s</span><span class="s1"> twake=</span><span class="si">%s</span><span class="s1"> network_name=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">trailed_panel</span><span class="p">,</span> <span class="n">edge_number</span><span class="p">,</span> <span class="n">xwake</span><span class="p">,</span> <span class="n">twake</span><span class="p">,</span> <span class="n">network_name</span><span class="p">))</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">patch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_patch_by_name</span><span class="p">(</span><span class="n">trailed_panel</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;trailed_panel isnt defined...trailed_panel=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">trailed_panel</span><span class="p">))</span>
                <span class="k">raise</span>

            <span class="p">(</span><span class="n">unused_p1</span><span class="p">,</span> <span class="n">xyz1</span><span class="p">)</span> <span class="o">=</span> <span class="n">patch</span><span class="o">.</span><span class="n">get_edge</span><span class="p">(</span><span class="n">edge_number</span><span class="p">)</span>

            <span class="n">npoints</span> <span class="o">=</span> <span class="n">xyz1</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="n">npoints</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

            <span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">xyz1</span>
            <span class="k">if</span> <span class="n">twake</span> <span class="o">==</span> <span class="mf">0.</span><span class="p">:</span>
                <span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">([</span><span class="n">npoints</span><span class="p">])</span> <span class="o">*</span> <span class="n">xwake</span>
                <span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">xyz1</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">xyz1</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1">#alphaC, betaC</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;twake isnt supported&#39;</span><span class="p">)</span>
            <span class="c1">#self.log.debug(&quot;--xyz---&quot;)</span>
            <span class="c1">#self.log.debug(xyz)</span>
            <span class="c1">#nm = integer(section[n-1][0 :10], &#39;nm&#39;)</span>
            <span class="c1">#nn = integer(section[n-1][10:20], &#39;nn&#39;)</span>
            <span class="n">options</span> <span class="o">=</span> <span class="p">[</span><span class="n">kt</span><span class="p">,</span> <span class="n">cp_norm</span><span class="p">,</span> <span class="n">matchw</span><span class="p">,</span> <span class="n">trailed_panel</span><span class="p">,</span> <span class="n">edge_number</span><span class="p">,</span> <span class="n">xwake</span><span class="p">,</span>
                       <span class="n">twake</span><span class="p">]</span>
            <span class="n">patch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_wake_patch</span><span class="p">(</span><span class="n">network_name</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">xyz</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;----------------------------&#39;</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_read_partial_edge_abutments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pea_section</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">section</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="kc">True</span>

<div class="viewcode-block" id="PanairGrid.write_liberalized_abutments"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.write_liberalized_abutments">[docs]</a>    <span class="k">def</span> <span class="nf">write_liberalized_abutments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;$eat - liberalized abutments</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%10s</span><span class="s1">&#39;</span> <span class="o">*</span> <span class="mi">6</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">epsgeo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">igeoin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">igeout</span><span class="p">,</span>
                             <span class="bp">self</span><span class="o">.</span><span class="n">nwxref</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">triint</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">iabsum</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">msg</span></div>

    <span class="k">def</span> <span class="nf">_read_liberalized_abutments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">):</span>
        <span class="c1">#self.log.debug(&quot;section[1] = %s&quot; % (section[1]))</span>

        <span class="c1"># absolute value of tolerance used to establith equivalent network</span>
        <span class="c1"># edge points; minimum panel diagonal times 0.001 &lt;= espgeo &lt;= minimum</span>
        <span class="c1"># panel diagonal times 0.03; to not be restricted use negative numbers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">epsgeo</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="s1">&#39;epsgeo&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

        <span class="c1"># prints network geometry before $EAT</span>
        <span class="c1">#  0.0 prints geometry</span>
        <span class="c1"># -1.0 omits printout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">igeoin</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">10</span><span class="p">:</span><span class="mi">20</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="s1">&#39;igeoin&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">)</span>

        <span class="c1"># prints network geometry after $EAT</span>
        <span class="c1"># 0.0 omits printout</span>
        <span class="c1"># 1.0 prints geometry</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">igeout</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">20</span><span class="p">:</span><span class="mi">30</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="s1">&#39;igeout&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>

        <span class="c1"># prints abutment cross-reference; for each network, all abutments and</span>
        <span class="c1"># abutment intersections are described in a format similar to that</span>
        <span class="c1"># used in the abutment summary and abutment intersection summary output sections</span>
        <span class="c1"># 0.0 omits printout</span>
        <span class="c1"># 1.0 prints geometry</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nwxref</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">30</span><span class="p">:</span><span class="mi">40</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="s1">&#39;nwxref&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>

        <span class="c1"># optionally checks for intersection of network edges through other panels</span>
        <span class="c1"># for final geometry; used only if needed on complex configurations; can</span>
        <span class="c1"># increase the cost of a computer run by 1 or 2 times that of a datachek (2.) run</span>
        <span class="c1"># 0.0 omits intersection checking</span>
        <span class="c1"># 1.0 checks intersection</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">triint</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">40</span><span class="p">:</span><span class="mi">50</span><span class="p">],</span> <span class="s1">&#39;triint&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>

        <span class="c1">#  0.0 abutment summary</span>
        <span class="c1">#  1.0 plus intersection summary</span>
        <span class="c1">#  2.0 plus complete list of each network and associated abutments</span>
        <span class="c1">#  3.0 plus diagnostic data for program developer</span>
        <span class="c1"># -1.0 no abutment printout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iabsum</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">50</span><span class="p">:</span><span class="mi">60</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="s1">&#39;iabsum&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_read_sectional_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sectional_prop_section</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">section</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_read_flowfield_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">flow_section</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">section</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="kc">True</span>

<div class="viewcode-block" id="PanairGrid.group_sections"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.group_sections">[docs]</a>    <span class="k">def</span> <span class="nf">group_sections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sections</span><span class="p">,</span> <span class="n">section_names</span><span class="p">):</span>
        <span class="c1">#self.Points = []</span>
        <span class="c1">#self.Streamlines = []</span>
        <span class="c1">#self.Trailing = []</span>

        <span class="c1">#self.title = None</span>
        <span class="c1">#self.dataCheck = None</span>
        <span class="c1">#self.symmetry = None</span>
        <span class="c1">#self.mach = None</span>
        <span class="c1">#self.cases = None</span>
        <span class="c1">#self.alphas = None</span>

        <span class="c1">#self.pea = None</span>
        <span class="c1">#self.eat = None</span>

        <span class="c1">#self.printout = None</span>
        <span class="c1">#self.end = None</span>

        <span class="c1">#self.Grid = []</span>

        <span class="n">section_map</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;tit&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_title</span><span class="p">,</span>
            <span class="s1">&#39;ref&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_reference_quantities</span><span class="p">,</span>
            <span class="s1">&#39;dat&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_data_check</span><span class="p">,</span>
            <span class="s1">&#39;sym&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_symmetry</span><span class="p">,</span>
            <span class="s1">&#39;mac&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_mach</span><span class="p">,</span>
            <span class="s1">&#39;cas&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_cases</span><span class="p">,</span>

            <span class="s1">&#39;ang&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_alphas</span><span class="p">,</span>
            <span class="s1">&#39;yaw&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_betas</span><span class="p">,</span>
            <span class="s1">&#39;pri&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_printout</span><span class="p">,</span>
            <span class="s1">&#39;poi&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_points</span><span class="p">,</span>
            <span class="s1">&#39;cir&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_circular_section</span><span class="p">,</span>
            <span class="s1">&#39;tra&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_trailing_wakes</span><span class="p">,</span>
            <span class="s1">&#39;pea&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_partial_edge_abutments</span><span class="p">,</span>
            <span class="s1">&#39;eat&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_liberalized_abutments</span><span class="p">,</span>
            <span class="s1">&#39;sec&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_sectional_properties</span><span class="p">,</span>
            <span class="s1">&#39;flo&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_flowfield_properties</span><span class="p">,</span>
            <span class="s1">&#39;xyz&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_xyz</span><span class="p">,</span>
            <span class="s1">&#39;gri&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_grid</span><span class="p">,</span>
            <span class="s1">&#39;str&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_streamlines</span><span class="p">,</span>
            <span class="s1">&#39;end&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_end</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="c1">#valid_maps = [&#39;tit&#39;,&#39;ref&#39;,&#39;dat&#39;,&#39;sym&#39;,&#39;mac&#39;,&#39;cas&#39;,&#39;ang&#39;,&#39;poi&#39;,&#39;tra&#39;,&#39;end&#39;]</span>
        <span class="c1">#valid_maps += [&#39;xyz&#39;,&#39;str&#39;,&#39;flo&#39;,&#39;sec&#39;,&#39;pri&#39;,&#39;pea&#39;,&#39;eat&#39;,&#39;gri&#39;]</span>
        <span class="c1">#valid_maps = [&#39;yaw&#39;,&#39;poi&#39;,&#39;tra&#39;]</span>
        <span class="n">valid_maps</span> <span class="o">=</span> <span class="n">section_map</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">section</span><span class="p">,</span> <span class="n">section_name</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">sections</span><span class="p">,</span> <span class="n">section_names</span><span class="p">):</span>  <span class="c1"># 1st line</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;  $</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">section_name</span><span class="p">)</span>
            <span class="c1">#print &quot;section = &quot;, len(section)</span>
            <span class="c1">#self.log.debug(&quot;section_name=%s&quot; % (section_name))</span>
            <span class="k">if</span> <span class="n">section_name</span> <span class="ow">in</span> <span class="n">valid_maps</span><span class="p">:</span>
                <span class="c1">#self.log.debug(&quot;section[0] = %s&quot; % (section[0]))</span>
                <span class="n">function_map</span> <span class="o">=</span> <span class="n">section_map</span><span class="p">[</span><span class="n">section_name</span><span class="p">]</span>
                <span class="n">ran</span> <span class="o">=</span> <span class="n">function_map</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
                <span class="k">assert</span> <span class="n">ran</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> didnt run&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">section_name</span><span class="p">)</span>
                <span class="c1">#self.log.debug(&quot;&quot;)</span>
            <span class="k">if</span> <span class="n">section_name</span> <span class="o">==</span> <span class="s1">&#39;end&#39;</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">return</span> <span class="n">sections</span></div>

<div class="viewcode-block" id="PanairGrid.read_panair"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.read_panair">[docs]</a>    <span class="k">def</span> <span class="nf">read_panair</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">infilename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;reads a panair input file&quot;&quot;&quot;</span>
        <span class="n">check_path</span><span class="p">(</span><span class="n">infilename</span><span class="p">,</span> <span class="s1">&#39;panair_input_Filename&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">infilename</span> <span class="o">=</span> <span class="n">infilename</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">infilename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="n">infile</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>

        <span class="n">lines</span> <span class="o">=</span> <span class="n">remove_comments</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">)</span>
        <span class="p">(</span><span class="n">sections</span><span class="p">,</span> <span class="n">section_names</span><span class="p">)</span> <span class="o">=</span> <span class="n">split_into_sections</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
        <span class="n">unused_groups</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">group_sections</span><span class="p">(</span><span class="n">sections</span><span class="p">,</span> <span class="n">section_names</span><span class="p">)</span></div>
        <span class="c1">#self.log.debug(&quot;nPatches = %s&quot; % (self.npatches))</span>
        <span class="c1"># split into headings</span>
        <span class="c1">#for panel in panels:</span>
        <span class="c1">#    points = readPoints()</span>
        <span class="c1">#print &quot;self.msg = &quot;,self.msg</span>

<div class="viewcode-block" id="PanairGrid.get_points_elements_regions"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.get_points_elements_regions">[docs]</a>    <span class="k">def</span> <span class="nf">get_points_elements_regions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">get_wakes</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">points</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">elements</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">regions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">kt</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">cp_norm</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">npoints</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">unused_name</span><span class="p">,</span> <span class="n">panel</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">get_wakes</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">panel</span><span class="o">.</span><span class="n">is_wake</span><span class="p">():</span>
                    <span class="k">continue</span>

            <span class="c1">#self.log.debug(&quot;size(xyz) = %s&quot; % ( str(panel.xyz.shape) ))</span>
            <span class="n">patch_points</span><span class="p">,</span> <span class="n">npointsi</span> <span class="o">=</span> <span class="n">panel</span><span class="o">.</span><span class="n">get_points</span><span class="p">()</span>
            <span class="n">patch_elements</span> <span class="o">=</span> <span class="n">panel</span><span class="o">.</span><span class="n">get_elements</span><span class="p">(</span><span class="n">npoints</span><span class="p">)</span> <span class="o">+</span> <span class="n">npoints</span>
            <span class="n">npatch_elements</span> <span class="o">=</span> <span class="n">patch_elements</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">regions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">npatch_elements</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">panel</span><span class="o">.</span><span class="n">inetwork</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">kt</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">npatch_elements</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">panel</span><span class="o">.</span><span class="n">kt</span><span class="p">)</span>
            <span class="c1">#print(&#39;panel.cp_norm = %r&#39; % panel.cp_norm)</span>
            <span class="n">cp_norm</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">npatch_elements</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">panel</span><span class="o">.</span><span class="n">cp_norm</span><span class="p">)</span>

            <span class="n">points</span> <span class="o">+=</span> <span class="n">patch_points</span>
            <span class="n">elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">patch_elements</span><span class="p">)</span>
            <span class="n">npoints</span> <span class="o">+=</span> <span class="n">npointsi</span>
            <span class="c1">#print &quot;name=%r npointsi=%s len(elements)=%s len(points)=%s&quot; %(</span>
                <span class="c1">#name, npointsi, len(elements), len(points))</span>

            <span class="c1">#if npoints != 0 and False:</span>
                <span class="c1">#if panel.network_name in [&#39;bodylwk&#39;, &#39;awbw&#39;]:</span>
                    <span class="c1">#for point in patch_points:</span>
                        <span class="c1">#print(point)</span>
                    <span class="c1">#for element in patch_elements:</span>
                        <span class="c1">#(n1, n2, n3, n4) = element</span>
                        <span class="c1">#print(element)</span>
                        <span class="c1">#print(points[n1], points[n2], points[n3], points[n4])</span>
                        <span class="c1">#print(&quot;&quot;)</span>
        <span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span>
        <span class="n">elements</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span>
        <span class="n">regions</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="n">regions</span><span class="p">)</span>
        <span class="n">kt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="n">kt</span><span class="p">)</span>
        <span class="n">cp_norm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="n">cp_norm</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">points</span><span class="p">,</span> <span class="n">elements</span><span class="p">,</span> <span class="n">regions</span><span class="p">,</span> <span class="n">kt</span><span class="p">,</span> <span class="n">cp_norm</span></div>

    <span class="k">def</span> <span class="nf">_read_cases</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        $cases - no. of solutions</span>
<span class="sd">        =nacase</span>
<span class="sd">        1.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ncases</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">],</span> <span class="s1">&#39;ncases&#39;</span><span class="p">)</span>
        <span class="c1">#self.log.debug(&quot;ncases = %s&quot; % (self.ncases))</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_read_mach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        $mach number</span>
<span class="sd">        =amach</span>
<span class="sd">        .6</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mach</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">])</span>
        <span class="k">return</span> <span class="kc">True</span>

<div class="viewcode-block" id="PanairGrid.set_mach"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.set_mach">[docs]</a>    <span class="k">def</span> <span class="nf">set_mach</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mach</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mach</span> <span class="o">=</span> <span class="n">mach</span></div>

<div class="viewcode-block" id="PanairGrid.write_mach"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.write_mach">[docs]</a>    <span class="k">def</span> <span class="nf">write_mach</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="s1">&#39;$mach number</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">out</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%-10s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">mach</span>
        <span class="k">return</span> <span class="n">out</span></div>

<div class="viewcode-block" id="PanairGrid.write_cases"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.write_cases">[docs]</a>    <span class="k">def</span> <span class="nf">write_cases</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncases</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="s1">&#39;$cases - number of solutions</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">out</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%-10s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">print_float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ncases</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">out</span></div>

    <span class="k">def</span> <span class="nf">_read_alphas</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        $angles-of-attack</span>
<span class="sd">        =alpc</span>
<span class="sd">        4.</span>
<span class="sd">        =alpha(1) alpha(2)  alpha(3)</span>
<span class="sd">        4.        10.       0.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alphas</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha_compressibility</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">])</span>
        <span class="n">sline</span> <span class="o">=</span> <span class="n">section</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alphas</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">slot</span><span class="p">)</span> <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="n">sline</span><span class="p">]</span>
        <span class="c1">#self.log.debug(&quot;alpha_compressibility=%s alphas=%s&quot; % (</span>
            <span class="c1">#self.alpha_compressibility, self.alphas))</span>
        <span class="k">return</span> <span class="kc">True</span>

<div class="viewcode-block" id="PanairGrid.set_alphas"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.set_alphas">[docs]</a>    <span class="k">def</span> <span class="nf">set_alphas</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alphas</span><span class="p">,</span> <span class="n">alpha_compressibility</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha_compressibility</span> <span class="o">=</span> <span class="n">alpha_compressibility</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alphas</span> <span class="o">=</span> <span class="n">alphas</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ncases</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">alphas</span><span class="p">)</span></div>

<div class="viewcode-block" id="PanairGrid.write_title"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.write_title">[docs]</a>    <span class="k">def</span> <span class="nf">write_title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="s1">&#39;$title</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">out</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">out</span></div>

<div class="viewcode-block" id="PanairGrid.write_alphas"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.write_alphas">[docs]</a>    <span class="k">def</span> <span class="nf">write_alphas</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="s1">&#39;$angles-of-attack</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">out</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%-s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha_compressibility</span>
        <span class="n">out</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%-10s</span><span class="s1">&#39;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alphas</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alphas</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">out</span></div>

    <span class="k">def</span> <span class="nf">_read_betas</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        $angles-of-attack</span>
<span class="sd">        =alpc</span>
<span class="sd">        4.</span>
<span class="sd">        =alpha(1) alpha(2)  alpha(3)</span>
<span class="sd">        4.        10.       0.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">betas</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">beta_compressibility</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">])</span>
        <span class="n">sline</span> <span class="o">=</span> <span class="n">section</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">betas</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">slot</span><span class="p">)</span> <span class="k">for</span> <span class="n">slot</span> <span class="ow">in</span> <span class="n">sline</span><span class="p">]</span>
        <span class="c1">#self.log.debug(&quot;beta_compressibility=%s betas=%s&quot; % (</span>
            <span class="c1">#self.beta_compressibility, self.betas))</span>
        <span class="k">return</span> <span class="kc">True</span>

<div class="viewcode-block" id="PanairGrid.set_betas"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.set_betas">[docs]</a>    <span class="k">def</span> <span class="nf">set_betas</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">betas</span><span class="p">,</span> <span class="n">beta_compressibility</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">beta_compressibility</span> <span class="o">=</span> <span class="n">beta_compressibility</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">betas</span> <span class="o">=</span> <span class="n">betas</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ncases</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">betas</span><span class="p">)</span></div>

<div class="viewcode-block" id="PanairGrid.write_betas"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.write_betas">[docs]</a>    <span class="k">def</span> <span class="nf">write_betas</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="s1">&#39;$yaw</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">out</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">beta_compressibility</span>
        <span class="n">out</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%-10s</span><span class="s1">&#39;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">betas</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">betas</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">out</span></div>

    <span class="k">def</span> <span class="nf">_read_reference_quantities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">section</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        $references for accumulated forces and moments</span>
<span class="sd">        =xref     yref      zref      nref</span>
<span class="sd">        46.       0.        0.</span>
<span class="sd">        =sref     bref      cref      dref</span>
<span class="sd">        2400.     60.       40.       90.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xref</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">])</span>  <span class="c1"># 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yref</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">10</span><span class="p">:</span><span class="mi">20</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zref</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">20</span><span class="p">:</span><span class="mi">30</span><span class="p">])</span>
       <span class="c1">#self.nref = float(section[1][30:40])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sref</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">])</span>  <span class="c1"># 0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bref</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">10</span><span class="p">:</span><span class="mi">20</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cref</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">20</span><span class="p">:</span><span class="mi">30</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dref</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">section</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">30</span><span class="p">:</span><span class="mi">40</span><span class="p">])</span>
        <span class="c1">#self.log.debug(&quot;xref=%s yref=%s zref=%s&quot; % (self.xref,</span>
        <span class="c1">#                                            self.yref, self.zref))</span>
        <span class="c1">#self.log.debug(&quot;sref=%s bref=%s cref=%s dref=%s &quot; % (</span>
        <span class="c1">#    self.sref, self.bref, self.cref, self.dref))</span>
        <span class="k">return</span> <span class="kc">True</span>

<div class="viewcode-block" id="PanairGrid.write_reference_quantities"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.write_reference_quantities">[docs]</a>    <span class="k">def</span> <span class="nf">write_reference_quantities</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">out</span> <span class="o">=</span> <span class="s1">&#39;$references for accumulated forces and moments</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">out</span> <span class="o">+=</span> <span class="s1">&#39;=</span><span class="si">%-10s%-10s%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Xref&#39;</span><span class="p">,</span> <span class="s1">&#39;Yref&#39;</span><span class="p">,</span> <span class="s1">&#39;Zref&#39;</span><span class="p">)</span>
        <span class="n">out</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%-10s%-10s%-s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xref</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yref</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">zref</span><span class="p">)</span>
        <span class="n">out</span> <span class="o">+=</span> <span class="s1">&#39;=</span><span class="si">%-10s%-10s%-10s%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Sref&#39;</span><span class="p">,</span> <span class="s1">&#39;Bref&#39;</span><span class="p">,</span> <span class="s1">&#39;Cref&#39;</span><span class="p">,</span> <span class="s1">&#39;Dref&#39;</span><span class="p">)</span>
        <span class="n">out</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%-10s%-10s%-10s%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sref</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bref</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cref</span><span class="p">,</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">dref</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">out</span></div>

    <span class="k">def</span> <span class="nf">_read_end</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unused_section</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_end</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1">#self.log.debug(&quot;end...&quot;)</span>
        <span class="k">return</span> <span class="kc">True</span>

<div class="viewcode-block" id="PanairGrid.write_end"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.write_end">[docs]</a>    <span class="k">def</span> <span class="nf">write_end</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_end</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;$end of panair inputs</span><span class="se">\n</span><span class="s1"> &#39;</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span></div>

<div class="viewcode-block" id="PanairGrid.write_data_check"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.write_data_check">[docs]</a>    <span class="k">def</span> <span class="nf">write_data_check</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;$datacheck</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_check</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="PanairGrid.write_printout"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.write_printout">[docs]</a>    <span class="k">def</span> <span class="nf">write_printout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;$printout options</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">%-10s%-10s%-10s%-10s%-10s%-10s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">isings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">igeomp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">isingp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">icontp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ibconp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">iedgep</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">%-10s%-10s%-10s%-10s%-10s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ipraic</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nexdgn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ioutpr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ifmcpr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">icostp</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="PanairGrid.print_abutments"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.print_abutments">[docs]</a>    <span class="k">def</span> <span class="nf">print_abutments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;               SUMMARY OF FACING SURFACES (+:upper, -:lower)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39; abutment   nw-ident  ntd  knet.edge    nw-ident  ntd  knet.edge</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;        1   winga      12     1.3+      wingwk     18     7.1+</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;            wingwk     18     7.1-      winga      12     1.1+</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;            winga      12     1.1-      winga      12     1.3-</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;        9   1st p-o-s   0    -1.0       bodyl      12     3.4+</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;            bodyl      12     3.4-      1st p-o-s   0    -1.0</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="k">for</span> <span class="n">patch_id</span><span class="p">,</span> <span class="n">patch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">patches</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">unused_xyz1</span><span class="p">)</span> <span class="o">=</span> <span class="n">patch</span><span class="o">.</span><span class="n">get_edges</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;p[</span><span class="si">%s</span><span class="s2">] = </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">patch_id</span><span class="p">,</span> <span class="n">p1</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="PanairGrid.print_options"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.print_options">[docs]</a>    <span class="k">def</span> <span class="nf">print_options</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s1">&#39;0            options</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            </span><span class="si">%i</span><span class="s1"> = singularity grid print flag</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            </span><span class="si">%i</span><span class="s1"> = panel geometry print flag</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            </span><span class="si">%i</span><span class="s1"> = spline data flag  ( 0 ==&gt; off, nonzero ==&gt; on )</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            </span><span class="si">%i</span><span class="s1"> = control point information print flag</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            </span><span class="si">%i</span><span class="s1"> = boundary condition data print flag </span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            </span><span class="si">%i</span><span class="s1"> = edge matching information print flag</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            </span><span class="si">%i</span><span class="s1"> = index of control point for which aic-s are printed</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            </span><span class="si">%i</span><span class="s1"> = edge control point flow properties print flag</span><span class="se">\n</span><span class="s1">&#39;</span>

            <span class="c1"># self.ioutpr, self.ifmcpr, self.icostp, fortran_value(self.epsgeo),</span>
            <span class="s1">&#39;            </span><span class="si">%i</span><span class="s1"> = output control flag (-1 ==&gt; no surface flow properties, &#39;</span>
            <span class="s1">&#39;0 ==&gt; standard output, 1 ==&gt; short form output )</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            </span><span class="si">%s</span><span class="s1"> = force/moment control flag (-1 ==&gt; no force and moment data, &#39;</span>
            <span class="s1">&#39;0 ==&gt; standard output, 1 ==&gt; nw totals only )</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            </span><span class="si">%i</span><span class="s1"> = print flag for detailed cost information during execution of job</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            1 = print flag for singularity parameter maps</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;0               abutment processing options</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;   </span><span class="si">%10s</span><span class="s1"> = global edge abutment tolerance specified by user.  &#39;</span>
            <span class="s1">&#39;if this value is zero, a default value will be calculated</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;                later.   this default value is taken as:  &#39;</span>
            <span class="s1">&#39;.001  * (minimum panel diameter)</span><span class="se">\n</span><span class="s1">&#39;</span>

            <span class="c1"># self.igeoin, self.igeout, self.nwxref,</span>
            <span class="s1">&#39;            </span><span class="si">%i</span><span class="s1"> = print flag controlling geometry printout  b e f o r e  &#39;</span>
            <span class="s1">&#39;the abutment processing.&#39;&#39;  ( nonzero ==&gt; do print )</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            </span><span class="si">%i</span><span class="s1"> = print flag controlling geometry printout  a f t e r    &#39;</span>
            <span class="s1">&#39;the abutment processing.  ( nonzero ==&gt; do print )</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            </span><span class="si">%i</span><span class="s1"> = network/abutment/abutment-intersection print flag.  &#39;</span>
            <span class="s1">&#39;( nonzero ==&gt; generate the cross referenced abutment listing</span><span class="se">\n</span><span class="s1">&#39;</span>

            <span class="c1"># self.triint, 2</span>
            <span class="s1">&#39;            </span><span class="si">%i</span><span class="s1"> = control index for panel intersection checking.  &#39;</span>
            <span class="s1">&#39;( nonzero ==&gt; do perform the check. )</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            </span><span class="si">%i</span><span class="s1"> = abutment/abutment-intersection (short listing) print flag &#39;</span>
            <span class="s1">&#39;( 0 ==&gt; suppress, nonzero ==&gt; generate usual print )</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39; </span><span class="se">\n</span><span class="s1">&#39;</span>

            <span class="s1">&#39;                force and moment reference parameters</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;   </span><span class="si">%10s</span><span class="s1"> = reference area for force and moment calculations.    (sref)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;   </span><span class="si">%10s</span><span class="s1"> = rolling moment reference length  (bref)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;   </span><span class="si">%10s</span><span class="s1"> = pitching moment reference length (cref)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;   </span><span class="si">%10s</span><span class="s1"> = yawing moment reference length   (dref)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;   </span><span class="si">%10s</span><span class="s1"> = x - coordinate for the point about which moments will be calculated  (xref)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;   </span><span class="si">%10s</span><span class="s1"> = y - coordinate for the point about which moments will be calculated  (yref)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;   </span><span class="si">%10s</span><span class="s1"> = z - coordinate for the point about which moments will be calculated  (zref)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            3 = pressure coefficient index (nprcof) &#39;</span>

            <span class="s1">&#39;(1=linear, 2=slenderbody, 3=2nd, 4=isentropic)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;1</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">isings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">igeomp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">isingp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">icontp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ibconp</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">iedgep</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ipraic</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nexdgn</span><span class="p">,</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">ioutpr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ifmcpr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">icostp</span><span class="p">,</span> <span class="n">fortran_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">epsgeo</span><span class="p">),</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">igeoin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">igeout</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nwxref</span><span class="p">,</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">triint</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span>

                <span class="n">fortran_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sref</span><span class="p">),</span> <span class="n">fortran_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bref</span><span class="p">),</span> <span class="n">fortran_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cref</span><span class="p">),</span>
                <span class="n">fortran_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dref</span><span class="p">),</span>
                <span class="n">fortran_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xref</span><span class="p">),</span> <span class="n">fortran_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yref</span><span class="p">),</span> <span class="n">fortran_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zref</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="PanairGrid.print_out_header"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.print_out_header">[docs]</a>    <span class="k">def</span> <span class="nf">print_out_header</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span><span class="se">\n</span><span class="s2"></span>
<span class="s2">         ****************************************************************************************************</span>

<span class="s2">          dynamic memory management initialization</span>

<span class="s2">          max no. levels         15   max no. arrays        200   maximum scratch storage     900000   total storage provided  900000</span>
<span class="s2">             addr(maplev)          0     addr(maplws)          0     addr(scratch storage)          1</span>

<span class="s2">        ****************************************************************************************************</span>
<span class="s2">          wopen call on unit    1  blocks:    10   status:     0</span>
<span class="s2">          wopen call on unit    2  blocks:    10   status:     0</span>
<span class="s2">          wopen call on unit    3  blocks:    10   status:     0</span>
<span class="s2">        1</span>


<span class="s2">        *****************************************************************************</span>
<span class="s2">         *                                                                           *</span>
<span class="s2">         *                     a502 - pan-air technology program                     *</span>
<span class="s2">         *                                                                           *</span>
<span class="s2">         *               potential flow about arbitrary configurations               *</span>
<span class="s2">         *               version id = ht2 (12 feb 92) boeing ver i00                 *</span>
<span class="s2">         *                                                                           *</span>
<span class="s2">         *                                   02/12/92                                *</span>
<span class="s2">         *                                                                           *</span>
<span class="s2">         *                                                                           *</span>
<span class="s2">         * simple wing-body with composite panel. (run with a502i)</span>
<span class="s2">         * saaris  865-6209  m/s 7c-36</span>
<span class="s2">         *                                                                           *</span>
<span class="s2">         *                                                                           *</span>
<span class="s2">         *                                                                           *</span>
<span class="s2">         *****************************************************************************</span>
<span class="s2">        1</span>
<span class="s2">        0*b*input-da - list of a502 input data cards -</span><span class="se">\n</span><span class="s2">&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="PanairGrid.print_grid_summary"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.PanairGrid.print_grid_summary">[docs]</a>    <span class="k">def</span> <span class="nf">print_grid_summary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">msg2</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">msg3</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;        1               ***  quick summary of a502 input  ***</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">title_line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title_lines</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;title</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">title_line</span><span class="p">)</span>

        <span class="n">msg</span> <span class="o">+=</span> <span class="p">(</span>
            <span class="s1">&#39;0               processing options</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            </span><span class="si">%i</span><span class="s1"> = datacheck.   (0=regular run,1=full datacheck,2=short datacheck)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            0 = s.p. flag.   (0 ==&gt; no s.p. file (ft09) provided, 1 ==&gt; &#39;</span>
            <span class="s1">&#39;local file ft09 with singularity values is provided)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            0 = aic flag.    (0 ==&gt;  no aic file (ft04) provided, 1 ==&gt; &#39;</span>
            <span class="s1">&#39;local file ft04 with aic-s is provided by the user)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            0 = b.l. flag    (0 ==&gt; no boundary layer file requested, 1 ==&gt; &#39;</span>
            <span class="s1">&#39;boundary layer data will be written to file ft17)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            0 = velocity correction index.  (0 ==&gt; no correction, 1 ==&gt; &#39;</span>
            <span class="s1">&#39;mclean correction, 2 ==&gt;  boctor correction)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            0 = flow visualization flag.  (nonzero ==&gt; &#39;</span>
            <span class="s1">&#39;off-body and streamline processing will be performed)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            0 = off-body calculation type. (0 ==&gt; mass flux, nonzero ==&gt; velocity)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            0 = streamline calculation type. (0 ==&gt; mass flux, nonzero ==&gt; velocity)</span><span class="se">\n</span><span class="s1">&#39;</span>

            <span class="s1">&#39;           </span><span class="si">%2i</span><span class="s1"> = number of off-body points.</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;           </span><span class="si">%2i</span><span class="s1"> = number of streamlines to be traced.</span><span class="se">\n</span><span class="s1">&#39;</span>

            <span class="s1">&#39;0               case summary</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;           </span><span class="si">%2i</span><span class="s1"> = number of cases</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;     </span><span class="si">%f</span><span class="s1"> = mach number</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;     </span><span class="si">%f</span><span class="s1"> = compressibility axis angle of attack (alpc)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;     </span><span class="si">%f</span><span class="s1"> = compressibliity axis angle of sideslip (betc)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data_check</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">noff_body_points</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nstreamlines</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ncases</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mach</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha_compressibility</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">beta_compressibility</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="n">msg3</span> <span class="o">+=</span> <span class="s1">&#39;0network id&amp;index   #rows   #cols  kt  src  dblt  nlopt1  nropt1  nlopt2  nropt2    ipot   # pts  # pans  cpnorm  cum pt  cum pn</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">msg3</span> <span class="o">+=</span> <span class="s1">&#39;---------- -----   -----   -----  --  ---  ----  ------  ------  ------  ------    ----    ----    ----  ------  ------  ------</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="n">total_points</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">total_panels</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">patch_id</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">npatches</span><span class="p">):</span>
            <span class="n">patch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_patch</span><span class="p">(</span><span class="n">patch_id</span><span class="p">)</span>
            <span class="n">msg3</span> <span class="o">+=</span> <span class="n">patch</span><span class="o">.</span><span class="n">quick_summary</span><span class="p">(</span><span class="n">total_points</span><span class="p">,</span> <span class="n">total_panels</span><span class="p">)</span>
            <span class="n">total_panels</span> <span class="o">+=</span> <span class="n">patch</span><span class="o">.</span><span class="n">npanels</span>
            <span class="n">total_points</span> <span class="o">+=</span> <span class="n">patch</span><span class="o">.</span><span class="n">npoints</span>

        <span class="n">msg2</span> <span class="o">+=</span> <span class="s1">&#39;0  case       alpha          beta      mag(f-s-v)</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">msg2</span> <span class="o">+=</span> <span class="s1">&#39; ------    ----------    ----------   -----------</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">icase</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ncases</span><span class="p">):</span>
            <span class="n">alpha</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alphas</span><span class="p">[</span><span class="n">icase</span><span class="p">]</span>
            <span class="n">beta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">betas</span><span class="p">[</span><span class="n">icase</span><span class="p">]</span>
            <span class="n">msg2</span> <span class="o">+=</span> <span class="s1">&#39;     </span><span class="si">%2s</span><span class="s1">      </span><span class="si">%f</span><span class="s1">      </span><span class="si">%f</span><span class="s1">      1.000000</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">icase</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span><span class="p">)</span>

        <span class="n">msg2</span> <span class="o">+=</span> <span class="p">(</span>
            <span class="s1">&#39;0               symmetry options</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            </span><span class="si">%s</span><span class="s1"> = number of planes of symmetry</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            </span><span class="si">%s</span><span class="s1"> = x-z plane of symmetry flag (0 ==&gt; no symmetry, &#39;</span>
            <span class="s1">&#39;1==&gt; flow symmetry, -1 ==&gt; flow antisymmetry)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;            </span><span class="si">%s</span><span class="s1"> = x-y plane of symmetry flag (0 ==&gt; no symmetry, &#39;</span>
            <span class="s1">&#39;1==&gt; flow symmetry, -1 ==&gt; flow antisymmetry)</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;0               configuration summary</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;          </span><span class="si">%3s</span><span class="s1"> = total number of networks read in</span><span class="se">\n</span><span class="s1">&#39;</span>

            <span class="s1">&#39;         </span><span class="si">%4s</span><span class="s1"> = total number of mesh points</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;         </span><span class="si">%4s</span><span class="s1"> = total number of panels</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="s1">&#39;&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">nsymmetry_planes</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xz_symmetry</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xy_symmetry</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">nnetworks</span><span class="p">,</span>
                <span class="n">total_points</span><span class="p">,</span> <span class="n">total_panels</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">msg</span> <span class="o">+</span> <span class="n">msg2</span> <span class="o">+</span> <span class="n">msg3</span></div></div>



<div class="viewcode-block" id="split_into_sections"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.split_into_sections">[docs]</a><span class="k">def</span> <span class="nf">split_into_sections</span><span class="p">(</span><span class="n">lines</span><span class="p">):</span>
    <span class="n">sections</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">section_names</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">section</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">section_name</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;lines=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">lines</span>
    <span class="n">line</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;$&#39;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
            <span class="n">sections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
            <span class="n">section_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">section_name</span><span class="p">)</span>
            <span class="n">section</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">section_name</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">section_name</span> <span class="o">==</span> <span class="s1">&#39;end&#39;</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="c1">#print &quot;new section...name=%s line - %s&quot; %(section_name, line)</span>
        <span class="n">section</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

    <span class="c1"># end section</span>
    <span class="n">section</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="n">sections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">section</span><span class="p">)</span>
    <span class="n">section_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">section_name</span><span class="p">)</span>

    <span class="c1"># get rid of first dummy section</span>
    <span class="n">sections</span> <span class="o">=</span> <span class="n">sections</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="n">section_names</span> <span class="o">=</span> <span class="n">section_names</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">sections</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">section_names</span><span class="p">),</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
        <span class="nb">len</span><span class="p">(</span><span class="n">sections</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">section_names</span><span class="p">))</span>

    <span class="c1">#for section in sections: # 1st line</span>
        <span class="c1">#print &quot;section = &quot;,len(section)</span>
        <span class="c1">#print &quot;section[0] = &quot;,section[0]</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">sections</span><span class="p">,</span> <span class="n">section_names</span><span class="p">)</span></div>

<div class="viewcode-block" id="remove_comments"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.panair.html#pyNastran.converters.panair.panair_grid.remove_comments">[docs]</a><span class="k">def</span> <span class="nf">remove_comments</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">log</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Comment lines in Panair begin with an equal (=) sign.</span>
<span class="sd">    The file is easier to parse if we remove them.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">lines2</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="s1">&#39;=&#39;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
            <span class="c1">#print &quot;line -&gt; %r&quot; % (line)</span>
            <span class="k">if</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;=&#39;</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;line[0] -&gt; </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="c1">#log.debug(&quot;******&quot;)</span>
                <span class="n">lines2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="c1"># else: skip</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lines2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">lines2</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Steven Doyle.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>