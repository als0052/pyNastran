

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>pyNastran.converters.tecplot.tecplot &mdash; pyNastran 1.4-dev 1.4-dev documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> pyNastran 1.4-dev
          

          
            
            <img src="../../../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.4-dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../quick_start/index.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../how_to/index.html">How To: pyNastran</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference/pyNastran.html">pyNastran Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../manual/index.html">pyNastran Manual</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">pyNastran 1.4-dev</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
        
      <li>pyNastran.converters.tecplot.tecplot</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pyNastran.converters.tecplot.tecplot</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">models from:</span>
<span class="sd">    http://people.sc.fsu.edu/~jburkardt/data/tec/tec.html</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">struct</span> <span class="kn">import</span> <span class="n">unpack</span>
<span class="kn">import</span> <span class="nn">itertools</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">cpylog</span> <span class="kn">import</span> <span class="n">get_logger2</span>

<span class="kn">from</span> <span class="nn">pyNastran.utils</span> <span class="kn">import</span> <span class="n">is_binary_file</span>
<span class="kn">from</span> <span class="nn">pyNastran.converters.tecplot.zone</span> <span class="kn">import</span> <span class="n">Zone</span><span class="p">,</span> <span class="n">CaseInsensitiveDict</span><span class="p">,</span> <span class="n">is_3d</span>

<div class="viewcode-block" id="read_tecplot"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.read_tecplot">[docs]</a><span class="k">def</span> <span class="nf">read_tecplot</span><span class="p">(</span><span class="n">tecplot_filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">use_cols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">log</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;loads a tecplot file&quot;&quot;&quot;</span>
    <span class="n">tecplot</span> <span class="o">=</span> <span class="n">Tecplot</span><span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="n">log</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">use_cols</span><span class="p">:</span>
        <span class="n">tecplot</span><span class="o">.</span><span class="n">use_cols</span> <span class="o">=</span> <span class="n">use_cols</span>
        <span class="n">tecplot</span><span class="o">.</span><span class="n">dtype</span> <span class="o">=</span> <span class="n">dtype</span>
    <span class="n">tecplot</span><span class="o">.</span><span class="n">read_tecplot</span><span class="p">(</span><span class="n">tecplot_filename</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">tecplot</span></div>


<div class="viewcode-block" id="Tecplot"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.Tecplot">[docs]</a><span class="k">class</span> <span class="nc">Tecplot</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parses a hexa binary/ASCII Tecplot 360 file.</span>
<span class="sd">    Writes an ASCII Tecplot 10 file.</span>

<span class="sd">    Supports:</span>
<span class="sd">     - title</span>
<span class="sd">     - single zone only?</span>
<span class="sd">     - unstructured:</span>
<span class="sd">       - nodal results</span>
<span class="sd">       - single element type; ZONETYPE = [FETRIANGLE, FEQUADRILATERAL, FETETRAHEDRON, FEBRICK]</span>
<span class="sd">       - DATAPACKING = [POINT, ELEMENT] writing</span>
<span class="sd">       - 2D/3D</span>
<span class="sd">       - full support for writing</span>
<span class="sd">     - structured:</span>
<span class="sd">       - nodal results</span>
<span class="sd">       - F=POINT</span>
<span class="sd">       - 2d/3d (POINT, I/J/K)</span>
<span class="sd">       - full support for writing</span>
<span class="sd">       - no reshaping of xyz to make slicing easier!</span>

<span class="sd">    Doesn&#39;t support:</span>
<span class="sd">     - text</span>
<span class="sd">     - geometry</span>
<span class="sd">     - transient writing</span>
<span class="sd">     - centroidal results</span>
<span class="sd">     - non-sequential node ids</span>
<span class="sd">     - data lists (100*0.0)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">for</span> <span class="n">zone</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">zones</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">zone</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">msg</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">log</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># defines binary file specific features</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_endian</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;&lt;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_n</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tecplot_filename</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">get_logger2</span><span class="p">(</span><span class="n">log</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>

        <span class="c1"># mesh = None : model hasn&#39;t been read</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_mesh</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;tecplot geometry and solution file&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variables</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">zones</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># mesh = True : this is a structured/unstructured grid</span>

        <span class="c1"># mesh = False : this is a plot file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_cols</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dtype</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_uendian</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nzones</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;gets the number of zones&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zones</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">headers_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;this data member has been removed&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">xy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;this data member has been removed&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">xyz</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;this data member has been removed&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tri_elements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;this data member has been removed&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">quad_elements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;this data member has been removed&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tet_elements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;this data member has been removed&#39;</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">hexa_elements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;this data member has been removed&#39;</span><span class="p">)</span>

    <span class="nd">@headers_dict</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">headers_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unused_x</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;this data member has been removed&#39;</span><span class="p">)</span>
    <span class="nd">@xy</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">xy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unused_x</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;this data member has been removed&#39;</span><span class="p">)</span>
    <span class="nd">@xyz</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">xyz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unused_x</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;this data member has been removed&#39;</span><span class="p">)</span>
    <span class="nd">@tri_elements</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">tri_elements</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unused_x</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;this data member has been removed&#39;</span><span class="p">)</span>
    <span class="nd">@quad_elements</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">quad_elements</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unused_x</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;this data member has been removed&#39;</span><span class="p">)</span>
    <span class="nd">@tet_elements</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">tet_elements</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unused_x</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;this data member has been removed&#39;</span><span class="p">)</span>
    <span class="nd">@hexa_elements</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">hexa_elements</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unused_x</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;this data member has been removed&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="Tecplot.read_tecplot"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.Tecplot.read_tecplot">[docs]</a>    <span class="k">def</span> <span class="nf">read_tecplot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tecplot_filename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reads an ASCII/binary Tecplot file.</span>

<span class="sd">        The binary file reader must have ONLY CHEXAs and be Tecplot 360 with</span>
<span class="sd">        `rho`, `u`, `v`, `w`, and `p`.</span>
<span class="sd">        The ASCII file reader has only been tested with Tecplot 10, but will</span>
<span class="sd">        probably work on Tecplot360.  It **should** work with any set of</span>
<span class="sd">        variables.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">is_binary_file</span><span class="p">(</span><span class="n">tecplot_filename</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_tecplot_binary</span><span class="p">(</span><span class="n">tecplot_filename</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_tecplot_ascii</span><span class="p">(</span><span class="n">tecplot_filename</span><span class="p">)</span></div>

<div class="viewcode-block" id="Tecplot.read_tecplot_ascii"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.Tecplot.read_tecplot_ascii">[docs]</a>    <span class="k">def</span> <span class="nf">read_tecplot_ascii</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tecplot_filename</span><span class="p">,</span> <span class="n">nnodes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nelements</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reads a Tecplot ASCII file.</span>

<span class="sd">        Supports:</span>
<span class="sd">         - CTRIA3</span>
<span class="sd">         - CQUAD4</span>
<span class="sd">         - CTETRA</span>
<span class="sd">         - CHEXA</span>

<span class="sd">        .. note :: assumes single typed results</span>
<span class="sd">        .. warning:: BLOCK option doesn&#39;t work if line length isn&#39;t the same...</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tecplot_filename</span> <span class="o">=</span> <span class="n">tecplot_filename</span>
        <span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">tecplot_filename</span><span class="p">),</span> <span class="n">tecplot_filename</span>

        <span class="n">iline</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">nnodes</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">nelements</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">tecplot_filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">tecplot_file</span><span class="p">:</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="n">tecplot_file</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="k">del</span> <span class="n">tecplot_file</span>

        <span class="n">quads_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">hexas_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">tris_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">tets_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">xyz_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">results_list</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">line</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="n">iline</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">iline</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">iblock</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1">#print(&#39;start...&#39;)</span>
            <span class="n">iline</span><span class="p">,</span> <span class="n">title_line</span><span class="p">,</span> <span class="n">header_lines</span><span class="p">,</span> <span class="n">line</span> <span class="o">=</span> <span class="n">_read_header_lines</span><span class="p">(</span>
                <span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">)</span>
            <span class="c1">#print(&#39;header_lines&#39;, header_lines)</span>
            <span class="n">headers_dict</span> <span class="o">=</span> <span class="n">_header_lines_to_header_dict</span><span class="p">(</span><span class="n">title_line</span><span class="p">,</span> <span class="n">header_lines</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">headers_dict</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">zone</span> <span class="o">=</span> <span class="n">Zone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">)</span>
            <span class="n">zone</span><span class="o">.</span><span class="n">headers_dict</span> <span class="o">=</span> <span class="n">headers_dict</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">variables</span> <span class="o">=</span> <span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;VARIABLES&#39;</span><span class="p">]</span>
            <span class="c1">#print(&#39;self.variables&#39;, self.variables)</span>

            <span class="c1">#print(headers_dict.keys())</span>
            <span class="k">if</span> <span class="s1">&#39;ZONETYPE&#39;</span> <span class="ow">in</span> <span class="n">headers_dict</span><span class="p">:</span>
                <span class="n">zone_type</span> <span class="o">=</span> <span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;ZONETYPE&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="c1"># FEBrick</span>
                <span class="n">data_packing</span> <span class="o">=</span> <span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;DATAPACKING&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="c1"># block</span>
                <span class="n">iline</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_zonetype</span><span class="p">(</span>
                    <span class="n">zone</span><span class="p">,</span> <span class="n">zone_type</span><span class="p">,</span> <span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">,</span> <span class="n">iblock</span><span class="p">,</span> <span class="n">headers_dict</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span>
                    <span class="n">nnodes</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span>
                    <span class="n">xyz_list</span><span class="p">,</span> <span class="n">hexas_list</span><span class="p">,</span> <span class="n">tets_list</span><span class="p">,</span> <span class="n">quads_list</span><span class="p">,</span> <span class="n">tris_list</span><span class="p">,</span>
                    <span class="n">results_list</span><span class="p">,</span>
                    <span class="n">data_packing</span><span class="o">=</span><span class="n">data_packing</span><span class="p">)</span>
            <span class="k">elif</span> <span class="s1">&#39;F&#39;</span> <span class="ow">in</span> <span class="n">headers_dict</span><span class="p">:</span>
                <span class="n">fe</span> <span class="o">=</span> <span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;F&#39;</span><span class="p">]</span> <span class="c1"># FEPoint</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fe</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span> <span class="n">headers_dict</span>
                <span class="n">zone_type</span> <span class="o">=</span> <span class="n">fe</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="c1"># FEPoint</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;zone_type = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">zone_type</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">iline</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_read_zonetype</span><span class="p">(</span>
                    <span class="n">zone</span><span class="p">,</span> <span class="n">zone_type</span><span class="p">,</span> <span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">,</span> <span class="n">iblock</span><span class="p">,</span> <span class="n">headers_dict</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span>
                    <span class="n">nnodes</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span>
                    <span class="n">xyz_list</span><span class="p">,</span> <span class="n">hexas_list</span><span class="p">,</span> <span class="n">tets_list</span><span class="p">,</span> <span class="n">quads_list</span><span class="p">,</span> <span class="n">tris_list</span><span class="p">,</span>
                    <span class="n">results_list</span><span class="p">,</span>
                    <span class="n">fe</span><span class="o">=</span><span class="n">fe</span><span class="p">)</span>
                <span class="n">iline</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">elif</span> <span class="p">((</span><span class="s1">&#39;ZONE&#39;</span> <span class="ow">in</span> <span class="n">headers_dict</span><span class="p">)</span> <span class="ow">and</span>
                  <span class="p">(</span><span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;ZONE&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span>
                  <span class="p">(</span><span class="s1">&#39;T&#39;</span> <span class="ow">in</span> <span class="n">headers_dict</span><span class="p">)):</span>
                <span class="n">A</span><span class="p">,</span> <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">,</span> <span class="n">iblock</span><span class="p">,</span> <span class="n">headers_dict</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">A</span> <span class="o">=</span> <span class="n">A</span>
                <span class="c1">#print(&#39;read_table...&#39;)</span>
                <span class="k">return</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;headers=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">headers_dict</span><span class="p">)</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;line = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">zones</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">zone</span><span class="p">)</span>

            <span class="c1">#sline = line.split()</span>
            <span class="c1">#print(&#39;stack...&#39;)</span>
            <span class="n">_stack</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="n">xyz_list</span><span class="p">,</span> <span class="n">quads_list</span><span class="p">,</span> <span class="n">tris_list</span><span class="p">,</span> <span class="n">tets_list</span><span class="p">,</span> <span class="n">hexas_list</span><span class="p">,</span> <span class="n">results_list</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">)</span>
            <span class="c1">#print(zone)</span>
            <span class="k">if</span> <span class="n">line</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="n">iline</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">quads_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">hexas_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">tris_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">tets_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">xyz_list</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">results_list</span> <span class="o">=</span> <span class="p">[]</span></div>

<div class="viewcode-block" id="Tecplot.read_table"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.Tecplot.read_table">[docs]</a>    <span class="k">def</span> <span class="nf">read_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tecplot_file</span><span class="p">,</span> <span class="n">unused_iblock</span><span class="p">,</span> <span class="n">headers_dict</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        reads a space-separated tabular data block</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">variables</span> <span class="o">=</span> <span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;&quot; &#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;VARIABLES&#39;</span><span class="p">]]</span>
        <span class="c1">#print(&#39;variables = %s&#39; % variables)</span>
        <span class="c1">#self.dtype[]</span>
        <span class="n">use_cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">variables</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">var</span><span class="p">)</span> <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_cols</span><span class="p">]</span>

        <span class="c1"># add on the preceding line to the line &quot;list&quot;</span>
        <span class="c1"># that&#39;s not a hack at all...</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">((</span><span class="n">line</span><span class="p">,</span> <span class="p">),</span> <span class="nb">iter</span><span class="p">(</span><span class="n">tecplot_file</span><span class="p">))</span>
        <span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="n">comments</span><span class="o">=</span><span class="s1">&#39;#&#39;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                       <span class="n">converters</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                       <span class="n">usecols</span><span class="o">=</span><span class="n">use_cols</span><span class="p">,</span> <span class="n">unpack</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ndmin</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">A</span><span class="p">,</span> <span class="kc">None</span></div>

    <span class="k">def</span> <span class="nf">_read_zonetype</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">,</span> <span class="n">zone_type</span><span class="p">,</span> <span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">,</span> <span class="n">iblock</span><span class="p">,</span> <span class="n">headers_dict</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span>
                       <span class="n">nnodes</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span>
                       <span class="n">xyz_list</span><span class="p">,</span> <span class="n">hexas_list</span><span class="p">,</span> <span class="n">tets_list</span><span class="p">,</span> <span class="n">quads_list</span><span class="p">,</span> <span class="n">tris_list</span><span class="p">,</span>
                       <span class="n">results_list</span><span class="p">,</span>
                       <span class="n">data_packing</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fe</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        zone_type : str</span>

<span class="sd">        fe : str</span>
<span class="sd">          - a zone_type.upper() string???</span>
<span class="sd">          - FEPOINT</span>

<span class="sd">        reads:</span>
<span class="sd">          - ZONE E</span>
<span class="sd">          - ZONE T</span>

<span class="sd">        ZONE is a flag, T is title, E is number of elements</span>

<span class="sd">        -------------  ---------  ----------  ----------------------------------------------</span>
<span class="sd">        Parameter      Ordered    Finite      Description</span>
<span class="sd">                       Data       Element</span>
<span class="sd">        -------------  ---------  ----------  ----------------------------------------------</span>
<span class="sd">        T=&quot;title&quot;      Yes        Yes         Zone title.</span>
<span class="sd">        I=imax         Yes        No          Number of points in 1st dimension.</span>
<span class="sd">        J=jmax         Yes        No          Number of points in 2nd dimension.</span>
<span class="sd">        K=kmax         Yes        No          Number of points in 3rd dimension.</span>
<span class="sd">        C=colour       Yes        Yes         Colour from WHITE, BLACK, RED, GREEN,</span>
<span class="sd">                                                          BLUE, CYAN, YELLOW, PURPLE,</span>
<span class="sd">                                                          CUST1, CUST2,....CUST8.</span>
<span class="sd">        F=format       Yes        Yes         POINT or BLOCK for ordered data.</span>
<span class="sd">                                              FEPOINT or FEBLOCK for finite element.</span>
<span class="sd">        D=(list)       Yes        Yes         A list of variable names to to include</span>
<span class="sd">                                              from the last zone.</span>
<span class="sd">        DT=(list)      Yes        Yes         A list of datatypes for each variable.</span>
<span class="sd">                                              SINGLE, DOUBLE, LONGINT, SHORTINT, BYTE, BIT.</span>
<span class="sd">        N=num          No         Yes         Number of nodes.</span>
<span class="sd">        E=num          No         Yes         Number of elements.</span>
<span class="sd">        ET=type        No         Yes         Element type from TRIANGLE, BRICK,</span>
<span class="sd">                                                                QUADRILATERAL, TETRAHEDRON.</span>
<span class="sd">        NV=variable    No         Yes         Variable for node value.</span>
<span class="sd">        -------------  ---------  ----------  ----------------------------------------------</span>
<span class="sd">        http://paulbourke.net/dataformats/tp/</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#print(&#39;self.variables&#39;, self.variables)</span>
        <span class="c1">#ndim = zone.ndim</span>
        <span class="c1">#print(&#39;iblock =&#39;, iblock)</span>
        <span class="k">if</span> <span class="n">iblock</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">variables</span> <span class="o">=</span> <span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;VARIABLES&#39;</span><span class="p">]</span>
            <span class="n">zone</span><span class="o">.</span><span class="n">variables</span> <span class="o">=</span> <span class="p">[</span><span class="n">variable</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39; </span><span class="se">\r\n\t</span><span class="s1">&quot;</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">variable</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;zone.variables = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">zone</span><span class="o">.</span><span class="n">variables</span><span class="p">)</span>
            <span class="n">nresults</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span> <span class="o">-</span> <span class="mi">3</span> <span class="c1"># x, y, z, rho, u, v, w, p</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;nresults = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nresults</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">headers_dict</span><span class="p">))</span>
        <span class="n">is_unstructured</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">is_structured</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">zone_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;FETRIANGLE&#39;</span><span class="p">,</span> <span class="s1">&#39;FEQUADRILATERAL&#39;</span><span class="p">,</span> <span class="s1">&#39;FETETRAHEDRON&#39;</span><span class="p">,</span> <span class="s1">&#39;FEBRICK&#39;</span><span class="p">]:</span>
            <span class="n">nnodesi</span> <span class="o">=</span> <span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;N&#39;</span><span class="p">]</span>
            <span class="n">nelementsi</span> <span class="o">=</span> <span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;E&#39;</span><span class="p">]</span>
            <span class="n">is_unstructured</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">zone_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;POINT&#39;</span><span class="p">,</span> <span class="s1">&#39;BLOCK&#39;</span><span class="p">]:</span> <span class="c1">#  structured</span>
            <span class="n">ni</span> <span class="o">=</span> <span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;I&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s1">&#39;J&#39;</span> <span class="ow">in</span> <span class="n">headers_dict</span><span class="p">:</span>
                <span class="n">nj</span> <span class="o">=</span> <span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;J&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="s1">&#39;K&#39;</span> <span class="ow">in</span> <span class="n">headers_dict</span><span class="p">:</span>
                    <span class="c1"># 3d</span>
                    <span class="n">nk</span> <span class="o">=</span> <span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;K&#39;</span><span class="p">]</span>
                    <span class="n">nnodesi</span> <span class="o">=</span> <span class="n">ni</span> <span class="o">*</span> <span class="n">nj</span> <span class="o">*</span> <span class="n">nk</span>
                    <span class="n">nelementsi</span> <span class="o">=</span> <span class="p">(</span><span class="n">ni</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">nj</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">nk</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># 2d</span>
                    <span class="n">nnodesi</span> <span class="o">=</span> <span class="n">ni</span> <span class="o">*</span> <span class="n">nj</span>
                    <span class="n">nelementsi</span> <span class="o">=</span> <span class="p">(</span><span class="n">ni</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">nj</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="s1">&#39;K&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">headers_dict</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">headers_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                <span class="n">nnodesi</span> <span class="o">=</span> <span class="n">ni</span>
                <span class="n">nelementsi</span> <span class="o">=</span> <span class="p">(</span><span class="n">ni</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">nelementsi</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">nelementsi</span>
            <span class="c1">#nelementsi = 0</span>
            <span class="n">elements</span> <span class="o">=</span> <span class="kc">None</span> <span class="c1"># np.zeros((nelementsi, 8), dtype=&#39;int32&#39;)</span>
            <span class="n">is_structured</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;zone_type = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">zone_type</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;zone_type=</span><span class="si">{</span><span class="n">zone_type</span><span class="si">}</span><span class="s1"> data_packing=</span><span class="si">{</span><span class="n">data_packing</span><span class="si">}</span><span class="s1"> &#39;</span>
                      <span class="sa">f</span><span class="s1">&#39;nnodes=</span><span class="si">{</span><span class="n">nnodesi</span><span class="si">}</span><span class="s1"> nelements=</span><span class="si">{</span><span class="n">nelementsi</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="k">assert</span> <span class="n">nnodesi</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">nnodesi</span>
        <span class="k">assert</span> <span class="n">nresults</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;nresults=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nresults</span>
        <span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nnodesi</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nnodesi</span><span class="p">,</span> <span class="n">nresults</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">zone_type</span> <span class="o">==</span> <span class="s1">&#39;FEBRICK&#39;</span><span class="p">:</span>
            <span class="c1"># hex</span>
            <span class="n">elements</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nelementsi</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">zone_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;FEPOINT&#39;</span><span class="p">,</span> <span class="s1">&#39;FEQUADRILATERAL&#39;</span><span class="p">,</span> <span class="s1">&#39;FETETRAHEDRON&#39;</span><span class="p">):</span>
            <span class="c1"># quads / tets</span>
            <span class="n">elements</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nelementsi</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">zone_type</span> <span class="o">==</span> <span class="s1">&#39;FETRIANGLE&#39;</span><span class="p">:</span>
            <span class="c1"># tris</span>
            <span class="n">elements</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nelementsi</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span>
        <span class="c1">#elif zone_type == &#39;FEBLOCK&#39;:</span>
            <span class="c1">#pass</span>
        <span class="k">elif</span>  <span class="n">zone_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;POINT&#39;</span><span class="p">,</span> <span class="s1">&#39;BLOCK&#39;</span><span class="p">]:</span>
            <span class="c1"># already handled</span>
            <span class="c1">#print(&#39;data&#39;)</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#if isinstance(zone_type, list):</span>
                <span class="c1">#raise NotImplementedError(zone_type[0])</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">zone_type</span><span class="p">)</span>

        <span class="n">sline</span> <span class="o">=</span> <span class="n">split_line</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">zone_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;FEBRICK&#39;</span><span class="p">,</span> <span class="s1">&#39;FETETRAHEDRON&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">data_packing</span> <span class="o">==</span> <span class="s1">&#39;POINT&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">inode</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodesi</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">inode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;zone_type=</span><span class="si">%s</span><span class="s1"> sline=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">zone_type</span><span class="p">,</span> <span class="n">sline</span><span class="p">))</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">sline</span><span class="p">[</span><span class="mi">3</span><span class="p">:])</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="n">inode</span><span class="p">,</span> <span class="p">:]):</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;sline[3:]=</span><span class="si">%s</span><span class="s1"> results[inode, :]=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sline</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span> <span class="n">results</span><span class="p">[</span><span class="n">inode</span><span class="p">,</span> <span class="p">:])</span>
                        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">xyz</span><span class="p">[</span><span class="n">inode</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sline</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
                        <span class="n">results</span><span class="p">[</span><span class="n">inode</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sline</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;i=</span><span class="si">%s</span><span class="s1"> line=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">inode</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
                        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;sline = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">sline</span><span class="p">)</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                        <span class="k">raise</span>

                    <span class="n">iline</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">sline</span> <span class="o">=</span> <span class="n">get_next_sline</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">data_packing</span> <span class="o">==</span> <span class="s1">&#39;BLOCK&#39;</span><span class="p">:</span>
                <span class="n">iline</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">sline</span> <span class="o">=</span> <span class="n">read_zone_block</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">,</span> <span class="n">xyz</span><span class="p">,</span> <span class="n">results</span><span class="p">,</span> <span class="n">nresults</span><span class="p">,</span> <span class="n">zone_type</span><span class="p">,</span>
                                                     <span class="n">sline</span><span class="p">,</span> <span class="n">nnodesi</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">)</span>
                <span class="c1">#print(&#39;sline =&#39;, sline)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">data_packing</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">zone_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;FEPOINT&#39;</span><span class="p">,</span> <span class="s1">&#39;FEQUADRILATERAL&#39;</span><span class="p">,</span> <span class="s1">&#39;FETRIANGLE&#39;</span><span class="p">):</span>
            <span class="n">sline</span> <span class="o">=</span> <span class="n">split_line</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
            <span class="k">for</span> <span class="n">inode</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodesi</span><span class="p">):</span>
                <span class="c1">#print(iline, inode, sline)</span>
                <span class="n">xyz</span><span class="p">[</span><span class="n">inode</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sline</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
                <span class="c1">#if abs(xyz[inode, 1]) &lt;= 5.0:</span>
                    <span class="c1">#msg = &#39;inode=%s xyz=%s&#39;  % (inode, xyz[inode, :])</span>
                    <span class="c1">#raise RuntimeError(msg)</span>

                <span class="n">results</span><span class="p">[</span><span class="n">inode</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sline</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
                <span class="n">iline</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">sline</span> <span class="o">=</span> <span class="n">get_next_sline</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">zone_type</span> <span class="o">==</span> <span class="s1">&#39;POINT&#39;</span><span class="p">:</span>
            <span class="n">nvars</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">zone</span><span class="o">.</span><span class="n">variables</span><span class="p">)</span>
            <span class="n">iline</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">sline</span> <span class="o">=</span> <span class="n">read_point</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">,</span> <span class="n">xyz</span><span class="p">,</span> <span class="n">results</span><span class="p">,</span> <span class="n">zone_type</span><span class="p">,</span>
                                            <span class="n">line</span><span class="p">,</span> <span class="n">sline</span><span class="p">,</span> <span class="n">nnodesi</span><span class="p">,</span> <span class="n">nvars</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">zone_type</span> <span class="o">==</span> <span class="s1">&#39;BLOCK&#39;</span><span class="p">:</span>
            <span class="n">nvars</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">zone</span><span class="o">.</span><span class="n">variables</span><span class="p">)</span>
            <span class="n">iline</span> <span class="o">=</span> <span class="n">read_block</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">,</span> <span class="n">xyz</span><span class="p">,</span> <span class="n">results</span><span class="p">,</span> <span class="n">zone_type</span><span class="p">,</span>
                               <span class="n">line</span><span class="p">,</span> <span class="n">sline</span><span class="p">,</span> <span class="n">nnodesi</span><span class="p">,</span> <span class="n">nvars</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">zone_type</span><span class="p">)</span>

        <span class="c1">#print(elements.shape)</span>
        <span class="c1">#print(&#39;xyz[0 , :]&#39;, xyz[0, :])</span>
        <span class="c1">#print(&#39;xyz[-1, :]&#39;, xyz[-1, :])</span>
        <span class="c1">#print(sline)</span>
        <span class="k">if</span> <span class="n">is_structured</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="n">is_unstructured</span><span class="p">:</span>
            <span class="n">iline</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">sline</span> <span class="o">=</span> <span class="n">read_unstructured_elements</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">,</span> <span class="n">sline</span><span class="p">,</span> <span class="n">elements</span><span class="p">,</span> <span class="n">nelementsi</span><span class="p">)</span>

            <span class="c1">#print(f.readline())</span>

            <span class="k">if</span> <span class="n">zone_type</span> <span class="o">==</span> <span class="s1">&#39;FEBRICK&#39;</span><span class="p">:</span>
                <span class="n">hexas_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elements</span> <span class="o">+</span> <span class="n">nnodes</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">zone_type</span> <span class="o">==</span> <span class="s1">&#39;FETETRAHEDRON&#39;</span><span class="p">:</span>
                <span class="n">tets_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elements</span> <span class="o">+</span> <span class="n">nnodes</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">zone_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;FEPOINT&#39;</span><span class="p">,</span> <span class="s1">&#39;FEQUADRILATERAL&#39;</span><span class="p">):</span>
                <span class="c1"># TODO: why are points stuck in the quads?</span>
                <span class="n">quads_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elements</span> <span class="o">+</span> <span class="n">nnodes</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">zone_type</span> <span class="o">==</span> <span class="s1">&#39;FETRIANGLE&#39;</span><span class="p">:</span>
                <span class="n">tris_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elements</span> <span class="o">+</span> <span class="n">nnodes</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">zone_type</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">()</span>
        <span class="n">xyz_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xyz</span><span class="p">)</span>
        <span class="n">results_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
        <span class="n">nnodes</span> <span class="o">+=</span> <span class="n">nnodesi</span>
        <span class="n">nelements</span> <span class="o">+=</span> <span class="n">nelementsi</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;nnodes=</span><span class="si">%s</span><span class="s1"> nelements=</span><span class="si">%s</span><span class="s1"> (0-based)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nnodes</span><span class="p">,</span> <span class="n">nelements</span><span class="p">))</span>
        <span class="k">del</span> <span class="n">headers_dict</span>
        <span class="n">iblock</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">iblock</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;final sline=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">sline</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">iline</span>

<div class="viewcode-block" id="Tecplot.read_tecplot_binary"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.Tecplot.read_tecplot_binary">[docs]</a>    <span class="k">def</span> <span class="nf">read_tecplot_binary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tecplot_filename</span><span class="p">,</span> <span class="n">nnodes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">nelements</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The binary file reader must have ONLY CHEXAs and be Tecplot 360</span>
<span class="sd">        with:</span>
<span class="sd">        `rho`, `u`, `v`, `w`, and `p`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tecplot_filename</span> <span class="o">=</span> <span class="n">tecplot_filename</span>
        <span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">tecplot_filename</span><span class="p">),</span> <span class="n">tecplot_filename</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">tecplot_filename</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">tecplot_file</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="n">tecplot_file</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_uendian</span> <span class="o">=</span> <span class="s1">&#39;&lt;&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">variables</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;rho&#39;</span><span class="p">,</span> <span class="s1">&#39;u&#39;</span><span class="p">,</span> <span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">]</span>

            <span class="n">data</span> <span class="o">=</span> <span class="n">tecplot_file</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">+=</span> <span class="mi">8</span>
            <span class="n">word</span><span class="p">,</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;8s&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;word = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">word</span><span class="p">)</span>

            <span class="c1">#self.show(100, endian=&#39;&lt;&#39;)</span>

            <span class="c1"># http://home.ustc.edu.cn/~cbq/360_data_format_guide.pdf</span>
            <span class="c1"># page 151</span>
            <span class="k">if</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">ii</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
                    <span class="n">datai</span> <span class="o">=</span> <span class="n">tecplot_file</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
                    <span class="n">vali</span><span class="p">,</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="n">datai</span><span class="p">)</span>
                    <span class="n">valf</span><span class="p">,</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="n">datai</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">+=</span> <span class="mi">4</span>
                    <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">vali</span><span class="p">,</span> <span class="n">valf</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">vali</span> <span class="o">==</span> <span class="mi">9999</span><span class="p">:</span>
                        <span class="c1">#print(&#39;breaking...&#39;)</span>
                        <span class="k">break</span>
                <span class="c1">#for j, vals in enumerate(values):</span>
                    <span class="c1">#print(&#39;  &#39;, j, vals)</span>
                <span class="k">assert</span> <span class="n">ii</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">,</span> <span class="n">ii</span>

                <span class="n">nbytes</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="mi">4</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">tecplot_file</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">nbytes</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">+=</span> <span class="n">nbytes</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">show_data</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="s1">&#39;if&#39;</span><span class="p">,</span> <span class="n">endian</span><span class="o">=</span><span class="s1">&#39;&lt;&#39;</span><span class="p">)</span>

            <span class="n">nbytes</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="mi">4</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">tecplot_file</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">nbytes</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">+=</span> <span class="n">nbytes</span>
            <span class="n">zone_type</span><span class="p">,</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;zone_type = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">zone_type</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="s1">&#39;if&#39;</span><span class="p">,</span> <span class="n">endian</span><span class="o">=</span><span class="s1">&#39;&lt;&#39;</span><span class="p">)</span>

            <span class="n">nbytes</span> <span class="o">=</span> <span class="mi">11</span> <span class="o">*</span> <span class="mi">4</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">tecplot_file</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">nbytes</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">+=</span> <span class="n">nbytes</span>
            <span class="c1">#self.show_data(data, types=&#39;if&#39;, endian=&#39;&lt;&#39;) # &#39;if&#39;?</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;2f 9i&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
            <span class="c1">#assert self.n == 360, self.n</span>
            <span class="c1">#print(&#39;----------&#39;)</span>

            <span class="n">nbytes</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">4</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">tecplot_file</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">nbytes</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">+=</span> <span class="n">nbytes</span>
            <span class="n">nnodes2</span><span class="p">,</span> <span class="n">nelements2</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;2i&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">nnodes2</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">nnodes2</span>
            <span class="k">assert</span> <span class="n">nelements2</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">nelements2</span>
            <span class="c1">#self.show_data(data, types=&#39;if&#39;, endian=&#39;&lt;&#39;) # &#39;if&#39;?</span>
            <span class="k">if</span> <span class="n">nnodes</span> <span class="ow">and</span> <span class="n">nelements</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;nnodes=</span><span class="si">%s</span><span class="s1"> nelements=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nnodes</span><span class="p">,</span> <span class="n">nelements</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;nnodes2=</span><span class="si">%s</span><span class="s1"> nelements2=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nnodes2</span><span class="p">,</span> <span class="n">nelements2</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">nnodes</span> <span class="o">=</span> <span class="n">nnodes2</span>
                <span class="n">nelements</span> <span class="o">=</span> <span class="n">nelements2</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;nnodes=</span><span class="si">%s</span><span class="s1"> nelements=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nnodes</span><span class="p">,</span> <span class="n">nelements</span><span class="p">))</span>
            <span class="k">assert</span> <span class="n">nnodes</span> <span class="o">==</span> <span class="n">nnodes2</span>
            <span class="k">assert</span> <span class="n">nelements</span> <span class="o">==</span> <span class="n">nelements2</span>
            <span class="c1">#assert nnodes2 &lt; 10000, nnodes</span>
            <span class="c1">#assert nelements2 &lt; 10000, nelements</span>

            <span class="n">nbytes</span> <span class="o">=</span> <span class="mi">35</span> <span class="o">*</span> <span class="mi">4</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">tecplot_file</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">nbytes</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">+=</span> <span class="n">nbytes</span>
            <span class="c1">#self.show_data(data, types=&#39;if&#39;, endian=&#39;&lt;&#39;)</span>
            <span class="c1">#print(&#39;----------&#39;)</span>

            <span class="n">nbytes</span> <span class="o">=</span> <span class="mi">30</span> <span class="o">*</span> <span class="mi">4</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">tecplot_file</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">nbytes</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">+=</span> <span class="n">nbytes</span>

            <span class="c1">#print(&#39;----------------------&#39;)</span>
            <span class="c1">#self.show_data(data, types=&#39;if&#39;, endian=&#39;&lt;&#39;)</span>
            <span class="c1">#print(&#39;----------------------&#39;)</span>

            <span class="c1"># 0 - ORDERED (meaning?)</span>
            <span class="c1"># 1 - FELINESEG (meaning?)</span>
            <span class="c1"># 2 - FETRIANGLE</span>
            <span class="c1"># 3 - FEQUADRILATERAL</span>
            <span class="c1"># 4 - FETETRAHEDRON</span>
            <span class="c1"># 5 - FEBRICK</span>
            <span class="k">assert</span> <span class="n">zone_type</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="n">zone_type</span>

            <span class="c1"># p.93</span>
            <span class="c1"># zone_title</span>
            <span class="c1"># zone_type</span>
            <span class="c1">#   0 = ORDERED</span>
            <span class="c1">#   1 = FELINESEG</span>
            <span class="c1">#   2 = FETRIANGLE</span>
            <span class="c1">#   3 = FEQUADRILATERAL</span>
            <span class="c1">#   4 = FETETRAHEDRON</span>
            <span class="c1">#   5 = FEBRICK</span>
            <span class="c1"># i_max_or_num_points</span>
            <span class="c1"># j_max_or_num_elements</span>
            <span class="c1"># k_max</span>
            <span class="c1"># i_cell_max</span>
            <span class="c1"># j_cell_max</span>
            <span class="c1"># k_cell_max</span>
            <span class="c1"># solution_time</span>
            <span class="c1"># strand_id</span>
            <span class="c1"># parent_zone</span>
            <span class="c1"># is_block (0=POINT, 1=BLOCK)</span>
            <span class="c1"># num_face_connections</span>
            <span class="c1"># face_neighbor_mode</span>
            <span class="c1"># passive_var_list</span>
            <span class="c1"># value_location (0=cell-centered; 1=node-centered)</span>
            <span class="c1"># share_var_from_zone</span>
            <span class="c1"># share_connectivity_from_zone</span>

            <span class="c1"># http://www.hgs.k12.va.us/tecplot/documentation/tp_data_format_guide.pdf</span>

            <span class="c1"># 0=POINT</span>
            <span class="c1"># 1=BLOCK</span>
            <span class="n">is_block</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="c1"># value_location:</span>
            <span class="c1">#   0=cell-centered</span>
            <span class="c1">#   1=node-centered</span>
            <span class="c1">#value_location = None</span>
            <span class="k">if</span> <span class="n">is_block</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;is_block=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">is_block</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># is_point</span>
                <span class="c1">#print(&#39;----------&#39;)</span>
                <span class="c1"># the variables: [x, y, z]</span>
                <span class="n">nvars</span> <span class="o">=</span> <span class="mi">3</span>
                <span class="c1">#nnodes = 3807</span>

                <span class="n">ni</span> <span class="o">=</span> <span class="n">nnodes</span> <span class="o">*</span> <span class="n">nvars</span>
                <span class="n">nbytes</span> <span class="o">=</span> <span class="n">ni</span> <span class="o">*</span> <span class="mi">4</span>
                <span class="c1">#print(&#39;nbytes =&#39;, nbytes)</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">tecplot_file</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">nbytes</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">+=</span> <span class="n">nbytes</span>
                <span class="n">xyzvals</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%i</span><span class="s1">f&#39;</span> <span class="o">%</span> <span class="n">ni</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
                <span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">xyzvals</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>

                <span class="c1"># the variables: [rho, u, v, w, p]</span>
                <span class="n">nvars</span> <span class="o">=</span> <span class="mi">5</span>
                <span class="n">dunno</span> <span class="o">=</span> <span class="mi">0</span>    <span class="c1"># what&#39;s with this...</span>
                <span class="n">ni</span> <span class="o">=</span> <span class="n">nnodes</span> <span class="o">*</span> <span class="n">nvars</span> <span class="o">+</span> <span class="n">dunno</span>
                <span class="n">nbytes</span> <span class="o">=</span> <span class="n">ni</span> <span class="o">*</span> <span class="mi">4</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">tecplot_file</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">nbytes</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">+=</span> <span class="n">nbytes</span>
                <span class="n">resvals</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%i</span><span class="s1">f&#39;</span> <span class="o">%</span> <span class="n">ni</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
                <span class="n">nodal_results</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">resvals</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nvars</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>


                <span class="c1"># 7443 elements</span>
                <span class="k">if</span> <span class="n">zone_type</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
                    <span class="c1"># CHEXA</span>
                    <span class="n">nnodes_per_element</span> <span class="o">=</span> <span class="mi">8</span> <span class="c1"># 8 nodes/elements</span>
                    <span class="n">nvals</span> <span class="o">=</span> <span class="n">nnodes_per_element</span> <span class="o">*</span> <span class="n">nelements</span>
                <span class="c1">#elif zone_type == 1:</span>
                    <span class="c1">#asdf</span>
                <span class="k">elif</span> <span class="n">zone_type</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c1"># CQUAD4</span>
                    <span class="n">nnodes_per_element</span> <span class="o">=</span> <span class="mi">4</span>
                    <span class="n">nvals</span> <span class="o">=</span> <span class="n">nnodes_per_element</span> <span class="o">*</span> <span class="n">nelements</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;nvals = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nvals</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;zone_type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">zone_type</span><span class="p">)</span>

                <span class="n">nbytes</span> <span class="o">=</span> <span class="n">nvals</span> <span class="o">*</span> <span class="mi">4</span>
                <span class="n">node_ids</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="si">%i</span><span class="s1">i&#39;</span> <span class="o">%</span> <span class="n">nvals</span><span class="p">,</span> <span class="n">tecplot_file</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">nbytes</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">+=</span> <span class="n">nbytes</span>

                <span class="n">elements</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">node_ids</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nelements</span><span class="p">,</span> <span class="n">nnodes_per_element</span><span class="p">)</span>
                <span class="c1">#print(elements)</span>

                <span class="c1">#self.show_data(data, types=&#39;ifs&#39;, endian=&#39;&lt;&#39;)</span>
                <span class="c1">#print(vals)</span>

                <span class="c1">#self.show(100, endian=&#39;&lt;&#39;)</span>
                <span class="n">zone</span> <span class="o">=</span> <span class="n">Zone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">zone_type</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
                    <span class="n">zone</span><span class="o">.</span><span class="n">hexa_elements</span> <span class="o">=</span> <span class="n">elements</span>
                <span class="k">elif</span> <span class="n">zone_type</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">zone</span><span class="o">.</span><span class="n">quad_elements</span> <span class="o">=</span> <span class="n">elements</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">zone_type</span><span class="p">)</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span>

        <span class="n">zone</span><span class="o">.</span><span class="n">xyz</span> <span class="o">=</span> <span class="n">xyz</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">nodal_results</span> <span class="o">=</span> <span class="n">nodal_results</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zones</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">zone</span><span class="p">)</span></div>
        <span class="c1">#self.log.debug(&#39;done...&#39;)</span>

<div class="viewcode-block" id="Tecplot.show"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.Tecplot.show">[docs]</a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="s1">&#39;ifs&#39;</span><span class="p">,</span> <span class="n">endian</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span>
        <span class="n">nints</span> <span class="o">=</span> <span class="n">n</span> <span class="o">//</span> <span class="mi">4</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">nints</span><span class="p">)</span>
        <span class="n">strings</span><span class="p">,</span> <span class="n">ints</span><span class="p">,</span> <span class="n">floats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_data</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="n">types</span><span class="p">,</span> <span class="n">endian</span><span class="o">=</span><span class="n">endian</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">strings</span><span class="p">,</span> <span class="n">ints</span><span class="p">,</span> <span class="n">floats</span></div>

<div class="viewcode-block" id="Tecplot.show_data"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.Tecplot.show_data">[docs]</a>    <span class="k">def</span> <span class="nf">show_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="s1">&#39;ifs&#39;</span><span class="p">,</span> <span class="n">endian</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Shows a data block as various types</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        data : bytes</span>
<span class="sd">            the binary string bytes</span>
<span class="sd">        types : str; default=&#39;ifs&#39;</span>
<span class="sd">            i - int</span>
<span class="sd">            f - float</span>
<span class="sd">            s - string</span>
<span class="sd">            d - double (float64; 8 bytes)</span>
<span class="sd">            q - long long (int64; 8 bytes)</span>

<span class="sd">            l - long (int; 4 bytes)</span>
<span class="sd">            I - unsigned int (int; 4 bytes)</span>
<span class="sd">            L - unsigned long (int; 4 bytes)</span>
<span class="sd">            Q - unsigned long long (int; 8 bytes)</span>
<span class="sd">        endian : str; default=None -&gt; auto determined somewhere else in the code</span>
<span class="sd">            the big/little endian {&gt;, &lt;}</span>

<span class="sd">        .. warning:: &#39;s&#39; is apparently not Python 3 friendly</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_data</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="n">types</span><span class="p">,</span> <span class="n">endian</span><span class="o">=</span><span class="n">endian</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_write_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="s1">&#39;ifs&#39;</span><span class="p">,</span> <span class="n">endian</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Useful function for seeing what&#39;s going on locally when debugging.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        data : bytes</span>
<span class="sd">            the binary string bytes</span>
<span class="sd">        types : str; default=&#39;ifs&#39;</span>
<span class="sd">            i - int</span>
<span class="sd">            f - float</span>
<span class="sd">            s - string</span>
<span class="sd">            d - double (float64; 8 bytes)</span>
<span class="sd">            q - long long (int64; 8 bytes)</span>

<span class="sd">            l - long (int; 4 bytes)</span>
<span class="sd">            I - unsigned int (int; 4 bytes)</span>
<span class="sd">            L - unsigned long (int; 4 bytes)</span>
<span class="sd">            Q - unsigned long long (int; 8 bytes)</span>
<span class="sd">        endian : str; default=None -&gt; auto determined somewhere else in the code</span>
<span class="sd">            the big/little endian {&gt;, &lt;}</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">nints</span> <span class="o">=</span> <span class="n">n</span> <span class="o">//</span> <span class="mi">4</span>
        <span class="n">ndoubles</span> <span class="o">=</span> <span class="n">n</span> <span class="o">//</span> <span class="mi">8</span>
        <span class="n">strings</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">ints</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">floats</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">longs</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">endian</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">endian</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_uendian</span>
            <span class="k">assert</span> <span class="n">endian</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="n">endian</span>

        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">ndata = </span><span class="si">%s</span><span class="s1">:</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">n</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">typei</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">typei</span> <span class="ow">in</span> <span class="s1">&#39;sifdq lIL&#39;</span><span class="p">,</span> <span class="s1">&#39;type=</span><span class="si">%r</span><span class="s1"> is invalid&#39;</span> <span class="o">%</span> <span class="n">typei</span>

        <span class="k">if</span> <span class="s1">&#39;s&#39;</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>
            <span class="n">strings</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s%i</span><span class="s1">s&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">endian</span><span class="p">,</span> <span class="n">n</span><span class="p">),</span> <span class="n">data</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;  strings = </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">strings</span><span class="p">))</span>
        <span class="k">if</span> <span class="s1">&#39;i&#39;</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>
            <span class="n">ints</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s%i</span><span class="s1">i&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">endian</span><span class="p">,</span> <span class="n">nints</span><span class="p">),</span> <span class="n">data</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;  ints    = </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">ints</span><span class="p">))</span>
        <span class="k">if</span> <span class="s1">&#39;f&#39;</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>
            <span class="n">floats</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s%i</span><span class="s1">f&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">endian</span><span class="p">,</span> <span class="n">nints</span><span class="p">),</span> <span class="n">data</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;  floats  = </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">floats</span><span class="p">))</span>
        <span class="k">if</span> <span class="s1">&#39;d&#39;</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>
            <span class="n">doubles</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s%i</span><span class="s1">d&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">endian</span><span class="p">,</span> <span class="n">ndoubles</span><span class="p">),</span> <span class="n">data</span><span class="p">[:</span><span class="n">ndoubles</span><span class="o">*</span><span class="mi">8</span><span class="p">])</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;  doubles (float64) = </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">doubles</span><span class="p">))</span>

        <span class="k">if</span> <span class="s1">&#39;l&#39;</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>
            <span class="n">longs</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s%i</span><span class="s1">l&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">endian</span><span class="p">,</span> <span class="n">nints</span><span class="p">),</span> <span class="n">data</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;  long  = </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">longs</span><span class="p">))</span>
        <span class="k">if</span> <span class="s1">&#39;I&#39;</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>
            <span class="n">ints2</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s%i</span><span class="s1">I&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">endian</span><span class="p">,</span> <span class="n">nints</span><span class="p">),</span> <span class="n">data</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;  unsigned int = </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">ints2</span><span class="p">))</span>
        <span class="k">if</span> <span class="s1">&#39;L&#39;</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>
            <span class="n">longs2</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s%i</span><span class="s1">L&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">endian</span><span class="p">,</span> <span class="n">nints</span><span class="p">),</span> <span class="n">data</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;  unsigned long = </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">longs2</span><span class="p">))</span>
        <span class="k">if</span> <span class="s1">&#39;q&#39;</span> <span class="ow">in</span> <span class="n">types</span><span class="p">:</span>
            <span class="n">longs</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s%i</span><span class="s1">q&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">endian</span><span class="p">,</span> <span class="n">ndoubles</span><span class="p">),</span> <span class="n">data</span><span class="p">[:</span><span class="n">ndoubles</span><span class="o">*</span><span class="mi">8</span><span class="p">])</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;  long long (int64) = </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">longs</span><span class="p">))</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">strings</span><span class="p">,</span> <span class="n">ints</span><span class="p">,</span> <span class="n">floats</span>

<div class="viewcode-block" id="Tecplot.show_ndata"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.Tecplot.show_ndata">[docs]</a>    <span class="k">def</span> <span class="nf">show_ndata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="s1">&#39;ifs&#39;</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_ndata</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="n">types</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_write_ndata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="s1">&#39;ifs&#39;</span><span class="p">):</span>  <span class="c1"># pragma: no cover</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Useful function for seeing what&#39;s going on locally when debugging.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nold</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">nold</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_data</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="n">types</span><span class="p">)</span>

<div class="viewcode-block" id="Tecplot.slice_x"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.Tecplot.slice_x">[docs]</a>    <span class="k">def</span> <span class="nf">slice_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xslice</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;TODO: doesn&#39;t remove unused nodes/renumber elements&quot;&quot;&quot;</span>
        <span class="n">zone</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zones</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">zone</span><span class="o">.</span><span class="n">xyz</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_slice_plane</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">xslice</span><span class="p">)</span></div>

<div class="viewcode-block" id="Tecplot.slice_y"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.Tecplot.slice_y">[docs]</a>    <span class="k">def</span> <span class="nf">slice_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">yslice</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;TODO: doesn&#39;t remove unused nodes/renumber elements&quot;&quot;&quot;</span>
        <span class="n">zone</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zones</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">zone</span><span class="o">.</span><span class="n">xyz</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_slice_plane</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">yslice</span><span class="p">)</span></div>

<div class="viewcode-block" id="Tecplot.slice_z"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.Tecplot.slice_z">[docs]</a>    <span class="k">def</span> <span class="nf">slice_z</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zslice</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;TODO: doesn&#39;t remove unused nodes/renumber elements&quot;&quot;&quot;</span>
        <span class="n">zone</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zones</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">zone</span><span class="o">.</span><span class="n">xyz</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_slice_plane</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">zslice</span><span class="p">)</span></div>

<div class="viewcode-block" id="Tecplot.slice_xyz"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.Tecplot.slice_xyz">[docs]</a>    <span class="k">def</span> <span class="nf">slice_xyz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xslice</span><span class="p">,</span> <span class="n">yslice</span><span class="p">,</span> <span class="n">zslice</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;TODO: doesn&#39;t remove unused nodes/renumber elements&quot;&quot;&quot;</span>
        <span class="n">zone</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zones</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">zone</span><span class="o">.</span><span class="n">xyz</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">zone</span><span class="o">.</span><span class="n">xyz</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">zone</span><span class="o">.</span><span class="n">xyz</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span>

        <span class="n">inodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">xslice</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">xslice</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">xslice</span><span class="p">)</span>
            <span class="n">inodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">xslice</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">yslice</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">yslice</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">yslice</span><span class="p">)</span>
            <span class="n">inodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">yslice</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">zslice</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">zslice</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">zslice</span><span class="p">)</span>
            <span class="n">inodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">z</span> <span class="o">&lt;</span> <span class="n">zslice</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>

        <span class="n">nodes</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">inodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">nodes</span> <span class="o">=</span> <span class="n">inodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">inodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">nodes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">intersect1d</span><span class="p">(</span><span class="n">inodes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">inodes</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">assume_unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">inodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">nodes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">intersect1d</span><span class="p">(</span>
                <span class="n">np</span><span class="o">.</span><span class="n">intersect1d</span><span class="p">(</span><span class="n">inodes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">inodes</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">assume_unique</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                <span class="n">inodes</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">assume_unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="c1">#inodes = arange(self.nodes.shape[0])</span>
            <span class="c1"># nodes = unique(hstack(inodes))</span>
        <span class="k">if</span> <span class="n">nodes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">zone</span><span class="o">.</span><span class="n">_slice_plane_inodes</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_slice_plane</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zone</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">slice_value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        - Only works for CHEXA</span>
<span class="sd">        - Doesn&#39;t remove unused nodes/renumber elements</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">slice_value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">slice_value</span><span class="p">)</span>
        <span class="n">inodes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">slice_value</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">_slice_plane_inodes</span><span class="p">(</span><span class="n">inodes</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_write_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res_types</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;gets the tecplot header&quot;&quot;&quot;</span>
        <span class="n">is_y</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">is_z</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="c1">#is_results = False</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">nzones</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nzones</span>
        <span class="k">for</span> <span class="n">zone</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">zones</span><span class="p">:</span>
            <span class="n">variables</span> <span class="o">=</span> <span class="n">zone</span><span class="o">.</span><span class="n">variables</span>
            <span class="n">is_y</span> <span class="o">=</span> <span class="s1">&#39;Y&#39;</span> <span class="ow">in</span> <span class="n">zone</span><span class="o">.</span><span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;VARIABLES&#39;</span><span class="p">]</span>
            <span class="n">is_z</span> <span class="o">=</span> <span class="s1">&#39;Z&#39;</span> <span class="ow">in</span> <span class="n">zone</span><span class="o">.</span><span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;VARIABLES&#39;</span><span class="p">]</span>
            <span class="n">is_results</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">zone</span><span class="o">.</span><span class="n">nodal_results</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">res_types</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">res_types</span> <span class="o">=</span> <span class="n">zone</span><span class="o">.</span><span class="n">variables</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">res_types</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">res_types</span> <span class="o">=</span> <span class="p">[</span><span class="n">res_types</span><span class="p">]</span>
            <span class="k">break</span>

        <span class="c1">#&quot;tecplot geometry and solution file&quot;</span>
        <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span>
        <span class="k">if</span> <span class="s1">&#39;&quot;&#39;</span> <span class="ow">in</span> <span class="n">title</span> <span class="ow">or</span> <span class="s2">&quot;&#39;&quot;</span> <span class="ow">in</span> <span class="n">title</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;TITLE = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;TITLE = &quot;</span><span class="si">%s</span><span class="s1">&quot;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;VARIABLES = &quot;X&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">is_y</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;&quot;Y&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">is_z</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;&quot;Z&quot;</span><span class="se">\n</span><span class="s1">&#39;</span>

        <span class="n">result_indices_to_write</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">is_results</span><span class="p">:</span>
            <span class="c1">#msg += &#39;&quot;rho&quot;\n&#39;</span>
            <span class="c1">#msg += &#39;&quot;u&quot;\n&#39;</span>
            <span class="c1">#msg += &#39;&quot;v&quot;\n&#39;</span>
            <span class="c1">#msg += &#39;&quot;w&quot;\n&#39;</span>
            <span class="c1">#msg += &#39;&quot;p&quot;\n&#39;</span>
            <span class="c1">#msg += &#39;ZONE T=&quot;%s&quot;\n&#39; % r&#39;\&quot;processor 1\&quot;&#39;</span>
            <span class="c1">#print(&#39;res_types =&#39;, res_types)</span>
            <span class="c1">#print(&#39;vars =&#39;, variables)</span>
            <span class="k">for</span> <span class="n">ivar</span><span class="p">,</span> <span class="n">var</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">res_types</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">var</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;var=</span><span class="si">%r</span><span class="s1"> not in variables=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">variables</span><span class="p">))</span>
                <span class="c1">#print(&#39;adding %s&#39; % var)</span>
                <span class="n">result_indices_to_write</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">variables</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">var</span><span class="p">))</span>
            <span class="n">ivars</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">result_indices_to_write</span><span class="p">)</span>
            <span class="n">ivars</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">ivar</span> <span class="ow">in</span> <span class="n">ivars</span><span class="p">:</span>
                <span class="n">var</span> <span class="o">=</span> <span class="n">variables</span><span class="p">[</span><span class="n">ivar</span><span class="p">]</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">var</span>
            <span class="c1">#print(&#39;ivars =&#39;, ivars)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#if res_types is None:</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">res_types</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">res_types</span><span class="p">)</span>
            <span class="n">ivars</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">return</span> <span class="n">msg</span><span class="p">,</span> <span class="n">ivars</span>

<div class="viewcode-block" id="Tecplot.write_tecplot"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.Tecplot.write_tecplot">[docs]</a>    <span class="k">def</span> <span class="nf">write_tecplot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tecplot_filename</span><span class="p">,</span> <span class="n">res_types</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">adjust_nids</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Only handles single type writing</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        tecplot_filename : str</span>
<span class="sd">            the path to the output file</span>
<span class="sd">        res_types : str; List[str, str, ...]; default=None -&gt; all</span>
<span class="sd">            the results that will be written (must be consistent with</span>
<span class="sd">            self.variables)</span>
<span class="sd">        adjust_nids : bool; default=True</span>
<span class="sd">            element_ids are 0-based in binary and must be switched to</span>
<span class="sd">            1-based in ASCII</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;writing tecplot </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">tecplot_filename</span><span class="p">)</span>
        <span class="n">msg</span><span class="p">,</span> <span class="n">ivars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_write_header</span><span class="p">(</span><span class="n">res_types</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">tecplot_filename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">tecplot_file</span><span class="p">:</span>
            <span class="n">tecplot_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">zone</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">zones</span><span class="p">:</span>
                <span class="n">nnodes</span> <span class="o">=</span> <span class="n">zone</span><span class="o">.</span><span class="n">nnodes</span>
                <span class="n">nelements</span> <span class="o">=</span> <span class="n">zone</span><span class="o">.</span><span class="n">nelements</span>
                <span class="p">(</span><span class="n">is_structured</span><span class="p">,</span> <span class="n">is_unstructured</span><span class="p">,</span> <span class="n">is_points</span><span class="p">,</span> <span class="n">zone_type</span><span class="p">,</span>
                 <span class="n">is_tris</span><span class="p">,</span> <span class="n">is_quads</span><span class="p">,</span> <span class="n">is_tets</span><span class="p">,</span> <span class="n">is_hexas</span><span class="p">)</span> <span class="o">=</span> <span class="n">zone</span><span class="o">.</span><span class="n">determine_element_type</span><span class="p">()</span>
                <span class="c1">#print(is_structured, is_unstructured, is_points, zone_type)</span>
                <span class="c1">#print(is_tris, is_quads, is_tets, is_hexas)</span>

                <span class="k">if</span> <span class="n">is_unstructured</span><span class="p">:</span>
                    <span class="n">zone</span><span class="o">.</span><span class="n">write_unstructured_zone</span><span class="p">(</span><span class="n">tecplot_file</span><span class="p">,</span> <span class="n">ivars</span><span class="p">,</span> <span class="n">is_points</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">,</span> <span class="n">nelements</span><span class="p">,</span> <span class="n">zone_type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">,</span>
                                                 <span class="n">is_tris</span><span class="p">,</span> <span class="n">is_quads</span><span class="p">,</span> <span class="n">is_tets</span><span class="p">,</span> <span class="n">is_hexas</span><span class="p">,</span> <span class="n">adjust_nids</span><span class="o">=</span><span class="n">adjust_nids</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">is_structured</span><span class="p">:</span>
                    <span class="n">zone</span><span class="o">.</span><span class="n">write_structured_zone</span><span class="p">(</span><span class="n">tecplot_file</span><span class="p">,</span> <span class="n">ivars</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">,</span> <span class="n">zone</span><span class="o">.</span><span class="n">headers_dict</span><span class="p">,</span> <span class="n">adjust_nids</span><span class="o">=</span><span class="n">adjust_nids</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;only structured/unstructured&#39;</span><span class="p">)</span></div>

    <span class="c1">#def skin_elements(self):</span>
        <span class="c1">#sss</span>
        <span class="c1">#return tris, quads</span>

    <span class="c1">#def get_free_faces(self):</span>
        <span class="c1">#&quot;&quot;&quot;get the free faces for hexa elements&quot;&quot;&quot;</span>
        <span class="c1">#sss</span>
        <span class="c1">#return free_faces</span>

<div class="viewcode-block" id="Tecplot.extract_y_slice"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.Tecplot.extract_y_slice">[docs]</a>    <span class="k">def</span> <span class="nf">extract_y_slice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">tol</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">slice_filename</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        doesn&#39;t work...</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;slicing...&#39;</span><span class="p">)</span>
        <span class="n">zone</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">zones</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span>
        <span class="k">assert</span> <span class="n">tol</span> <span class="o">&gt;</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">tol</span>
        <span class="n">elements</span> <span class="o">=</span> <span class="n">zone</span><span class="o">.</span><span class="n">hexa_elements</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">zone</span><span class="o">.</span><span class="n">nodal_results</span>

        <span class="n">iy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">((</span><span class="n">y0</span> <span class="o">-</span> <span class="n">tol</span> <span class="o">&lt;=</span> <span class="n">y</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">y</span> <span class="o">&lt;=</span> <span class="n">y0</span> <span class="o">+</span> <span class="n">tol</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="n">iy</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">nodes</span><span class="p">[</span><span class="n">iy</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">nodes</span><span class="p">[</span><span class="n">iy</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
        <span class="c1">#iy = np.where(y &lt;= y0 + tol)[0]</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">iy</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">iy</span>
        <span class="c1">#inode = iy + 1</span>


        <span class="c1"># find all elements that have iy within tolerance</span>
        <span class="c1">#slots = np.where(elements == iy)</span>
        <span class="c1">#slots = np.where(element for element in elements</span>
                          <span class="c1">#if any(iy in element))</span>
        <span class="c1">#slots = where(iy == elements.ravel())[0]</span>
        <span class="n">ielements</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">([</span><span class="n">ie</span> <span class="k">for</span> <span class="n">ie</span><span class="p">,</span> <span class="n">unused_elem</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span>
                               <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
                               <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">iy</span><span class="p">])</span>
        <span class="c1">#print(slots)</span>
        <span class="c1">#ri, ci = slots</span>
        <span class="c1">#ri = unique(hstack([where(element == iy)[0] for element in elements]))</span>
        <span class="c1">#ri = [ie for ie, element in enumerate(elements)</span>
              <span class="c1">#if [n for n in element</span>
                  <span class="c1">#if n in iy]]</span>
        <span class="c1">#ri = [np.where(element == iy)[0] for element in elements if np.where(element == iy)[0]]</span>
        <span class="c1">#print(ri)</span>
        <span class="c1">#ielements = np.unique(ri)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">ielements</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">ielements</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ielements</span>

        <span class="c1"># find nodes</span>
        <span class="n">elements2</span> <span class="o">=</span> <span class="n">elements</span><span class="p">[</span><span class="n">ielements</span><span class="p">,</span> <span class="p">:]</span>
        <span class="n">inodes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">elements2</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">inodes</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">inodes</span>

        <span class="c1"># renumber the nodes</span>
        <span class="n">nidmap</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">inode</span><span class="p">,</span> <span class="n">nid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">inodes</span><span class="p">):</span>
            <span class="n">nidmap</span><span class="p">[</span><span class="n">nid</span><span class="p">]</span> <span class="o">=</span> <span class="n">inode</span>
        <span class="n">elements3</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="p">[[</span><span class="n">nidmap</span><span class="p">[</span><span class="n">nid</span><span class="p">]</span> <span class="k">for</span> <span class="n">nid</span> <span class="ow">in</span> <span class="n">element</span><span class="p">]</span>
             <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">elements2</span><span class="p">],</span>
            <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">inodes</span><span class="p">)</span>
        <span class="n">nodes2</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">inodes</span><span class="p">,</span> <span class="p">:]</span>
        <span class="n">nodal_results2</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="n">inodes</span><span class="p">,</span> <span class="p">:]</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Tecplot</span><span class="p">()</span>
        <span class="n">zone</span> <span class="o">=</span> <span class="n">Zone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">)</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">xyz</span> <span class="o">=</span> <span class="n">nodes2</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">nodal_results</span> <span class="o">=</span> <span class="n">nodal_results2</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">hexa_elements</span> <span class="o">=</span> <span class="n">elements3</span>
        <span class="n">model</span><span class="o">.</span><span class="n">zones</span> <span class="o">=</span> <span class="p">[</span><span class="n">zone</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">slice_filename</span><span class="p">:</span>
            <span class="n">model</span><span class="o">.</span><span class="n">write_tecplot</span><span class="p">(</span><span class="n">slice_filename</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span></div></div>


<div class="viewcode-block" id="split_headers"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.split_headers">[docs]</a><span class="k">def</span> <span class="nf">split_headers</span><span class="p">(</span><span class="n">header_in</span><span class="p">):</span>
    <span class="c1">#allowed_keys = [&#39;TITLE&#39;, &#39;VARIABLES&#39;, &#39;T&#39;, &#39;ZONETYPE&#39;, &#39;DATAPACKING&#39;,</span>
                    <span class="c1">#&#39;N&#39;, &#39;E&#39;, &#39;F&#39;, &#39;DT&#39;, &#39;SOLUTIONTIME&#39;, &#39;STRANDID&#39;,</span>
                    <span class="c1">#&#39;I&#39;, &#39;J&#39;, &#39;K&#39;</span>
                    <span class="c1">#]</span>
    <span class="c1">#print(f&#39;header1 = {header_in}&#39;)</span>
    <span class="n">header</span> <span class="o">=</span> <span class="n">header_in</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&quot;&#39;</span><span class="p">,</span> <span class="s1">&#39;&quot;,&quot;&#39;</span><span class="p">)</span>
    <span class="c1">#print(f&#39;header2 = {header}&#39;)</span>
    <span class="n">cheaders</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>

    <span class="c1">#print(header)</span>
    <span class="c1">#print(cheaders)</span>
    <span class="c1">#header = cheaders[0]</span>
    <span class="c1">#headers = [header]</span>
    <span class="c1">#i = 1</span>
    <span class="c1">#while i &lt; len(cheaders):</span>
        <span class="c1">#headeri = cheaders[i]</span>
        <span class="c1">#uheaderi = headeri.upper().replace(&#39; &#39;, &#39;&#39;)</span>
        <span class="c1">#is_key = [uheaderi.startswith(key+&#39;=&#39;) for key in allowed_keys]</span>
        <span class="c1">#if any(is_key):</span>
            <span class="c1">#print(&#39;key!&#39;, headeri)</span>
            <span class="c1">#header = headeri</span>
            <span class="c1">#headers.append(header.lstrip())</span>
        <span class="c1">#else:</span>
            <span class="c1">#headers[-1] += &#39;,&#39; + headeri</span>
        <span class="c1">#i += 1</span>
    <span class="c1">#print(&#39;headers&#39;)</span>
    <span class="c1">#for headeri in headers:</span>
        <span class="c1">#print(&#39;  &#39;, headeri)</span>

    <span class="c1">#print(headers)</span>
    <span class="c1">#print(header.replace(&#39;&quot;&quot;&#39;, &#39;&quot;,&quot;&#39;))</span>
    <span class="c1">#if &#39;&#39;</span>
    <span class="c1">#headers = header.replace(&#39;&quot;&quot;&#39;, &#39;&quot;,&quot;&#39;).split(&#39;,&#39;)</span>
    <span class="k">return</span> <span class="n">cheaders</span></div>

<span class="k">def</span> <span class="nf">_header_lines_to_header_dict</span><span class="p">(</span><span class="n">title_line</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">header_lines</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">variables</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;parses the parsed header lines&quot;&quot;&quot;</span>
    <span class="c1">#print(&#39;header_lines&#39;, header_lines)</span>
    <span class="c1">#headers_dict = {}</span>
    <span class="n">headers_dict</span> <span class="o">=</span> <span class="n">CaseInsensitiveDict</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">title_line</span><span class="p">:</span>
        <span class="n">title_sline</span> <span class="o">=</span> <span class="n">title_line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">title</span> <span class="o">=</span> <span class="n">title_sline</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;tecplot geometry and solution file&#39;</span>
    <span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;TITLE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">title</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">header_lines</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1">#raise RuntimeError(header_lines)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="n">header</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">header_lines</span><span class="p">)</span>

    <span class="c1"># this is so overly complicataed and probably not even enough...</span>
    <span class="c1"># what about the following &#39;quote&#39; style?</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">split_headers</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
    <span class="c1">#headers = header.replace(&#39;&quot;&quot;&#39;, &#39;&quot;,&quot;&#39;).split(&#39;,&#39;)</span>

    <span class="c1">#TITLE = &quot;Weights=1/6,6,1&quot;</span>
    <span class="c1">#Variables = &quot;x&quot;,&quot;y&quot;,&quot;z&quot;,&quot;psi&quot;</span>
    <span class="c1">#Zone N = 125, E = 64, DATAPACKING = POINT, ZONETYPE = FEBRICK</span>

    <span class="n">nheaders</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">iheader</span><span class="p">,</span> <span class="n">header</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">headers</span><span class="p">):</span>
        <span class="n">header</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="c1">#print(f&#39;{iheader} {header!r}&#39;)</span>

    <span class="k">for</span> <span class="n">iheader</span><span class="p">,</span> <span class="n">header</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">headers</span><span class="p">):</span>
        <span class="n">header</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="c1">#print(&#39;%2i %s&#39; % (iheader, header))</span>
        <span class="c1">#print(&#39;iheader=%s header=%r&#39; % (iheader, header))</span>
        <span class="k">if</span> <span class="s1">&#39;=&#39;</span> <span class="ow">in</span> <span class="n">header</span><span class="p">:</span>
            <span class="n">sline</span> <span class="o">=</span> <span class="n">header</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">parse</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="c1">#print(&#39;iheader=%s nheaders=%s&#39; % (iheader, nheaders))</span>
            <span class="k">if</span> <span class="n">iheader</span> <span class="o">==</span> <span class="n">nheaders</span><span class="p">:</span>
                <span class="n">parse</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="s1">&#39;=&#39;</span> <span class="ow">in</span> <span class="n">headers</span><span class="p">[</span><span class="n">iheader</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]:</span>
                <span class="n">parse</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">header</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;ZONE&#39;</span><span class="p">:</span>
            <span class="c1"># apparently the null key is also a thing...</span>
            <span class="c1"># we&#39;ll use &#39;ZONE&#39; because...</span>
            <span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;ZONE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">parse</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="c1">#continue</span>
        <span class="k">elif</span> <span class="s1">&#39;&quot;&#39;</span> <span class="ow">in</span> <span class="n">header</span><span class="p">:</span>
            <span class="n">sline</span> <span class="o">+=</span> <span class="p">[</span><span class="n">header</span><span class="p">]</span>
            <span class="n">parse</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">iheader</span> <span class="o">==</span> <span class="n">nheaders</span><span class="p">:</span>
                <span class="n">parse</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="s1">&#39;=&#39;</span> <span class="ow">in</span> <span class="n">headers</span><span class="p">[</span><span class="n">iheader</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]:</span>
                <span class="n">parse</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;header=</span><span class="si">%r</span><span class="s1"> headers=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">header</span><span class="p">,</span> <span class="n">headers</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">parse</span><span class="p">:</span>
            <span class="c1">#print(&#39;  parsing&#39;)</span>
            <span class="c1">#print(&#39;sline =&#39;, sline)</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">sline</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;ZONE &#39;</span><span class="p">):</span>
                <span class="c1"># the key is not &quot;ZONE T&quot; or &quot;ZONE E&quot;</span>
                <span class="c1"># ZONE is a flag, T is title, E is number of elements</span>
                <span class="n">key</span> <span class="o">=</span> <span class="n">key</span><span class="p">[</span><span class="mi">5</span><span class="p">:]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

            <span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="n">val</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">sline</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="c1">#assert not isinstance(value, list), value</span>
            <span class="n">headers_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="c1">#print(&#39;  &#39;, value)</span>
            <span class="c1">#value = value.strip()</span>

            <span class="c1"># &#39;T&#39;, &#39;ZONE T&#39;,  ???</span>
            <span class="c1">#   &#39;DT&#39;, &#39;SOLUTIONTIME&#39;, &#39;STRANDID&#39;, # tecplot 360 specific things not supported</span>
            <span class="n">allowed_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;VARIABLES&#39;</span><span class="p">,</span> <span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="s1">&#39;ZONETYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;DATAPACKING&#39;</span><span class="p">,</span> <span class="c1"># &#39;TITLE&#39;,</span>
                            <span class="s1">&#39;N&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="s1">&#39;DT&#39;</span><span class="p">,</span> <span class="s1">&#39;SOLUTIONTIME&#39;</span><span class="p">,</span> <span class="s1">&#39;STRANDID&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;J&#39;</span><span class="p">,</span> <span class="s1">&#39;K&#39;</span><span class="p">]</span>
            <span class="k">assert</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">allowed_keys</span><span class="p">,</span> <span class="s1">&#39;key=</span><span class="si">%r</span><span class="s1">; allowed=[</span><span class="si">%s</span><span class="s1">]&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_keys</span><span class="p">))</span>
            <span class="n">parse</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="c1">#print(&#39;headers_dict&#39;, headers_dict)</span>
    <span class="c1">#print(headers_dict.keys())</span>

    <span class="n">_simplify_header</span><span class="p">(</span><span class="n">headers_dict</span><span class="p">,</span> <span class="n">variables</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">headers_dict</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">headers_dict</span>
    <span class="k">return</span> <span class="n">headers_dict</span>

<span class="k">def</span> <span class="nf">_simplify_header</span><span class="p">(</span><span class="n">headers_dict</span><span class="p">,</span> <span class="n">variables</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;cast the integer headers adn sets the variables&quot;&quot;&quot;</span>
    <span class="c1"># unstructured</span>
    <span class="k">if</span> <span class="s1">&#39;N&#39;</span> <span class="ow">in</span> <span class="n">headers_dict</span><span class="p">:</span> <span class="c1"># nnodes</span>
        <span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;N&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;N&#39;</span><span class="p">])</span>
    <span class="k">if</span> <span class="s1">&#39;E&#39;</span> <span class="ow">in</span> <span class="n">headers_dict</span><span class="p">:</span> <span class="c1"># nelements</span>
        <span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;E&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;E&#39;</span><span class="p">])</span>

    <span class="c1"># structured</span>
    <span class="k">if</span> <span class="s1">&#39;I&#39;</span> <span class="ow">in</span> <span class="n">headers_dict</span><span class="p">:</span>
        <span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;I&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;I&#39;</span><span class="p">])</span>
    <span class="k">if</span> <span class="s1">&#39;J&#39;</span> <span class="ow">in</span> <span class="n">headers_dict</span><span class="p">:</span>
        <span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;J&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;J&#39;</span><span class="p">])</span>
    <span class="k">if</span> <span class="s1">&#39;K&#39;</span> <span class="ow">in</span> <span class="n">headers_dict</span><span class="p">:</span>
        <span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;K&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;K&#39;</span><span class="p">])</span>

    <span class="c1">#print(&#39;_simplify_header&#39;, variables, headers_dict)</span>
    <span class="k">if</span> <span class="s1">&#39;TITLE&#39;</span> <span class="ow">not</span>  <span class="ow">in</span> <span class="n">headers_dict</span><span class="p">:</span>
        <span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;TITLE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;tecplot geometry and solution file&#39;</span>

    <span class="k">if</span> <span class="s1">&#39;VARIABLES&#39;</span> <span class="ow">in</span> <span class="n">headers_dict</span> <span class="ow">and</span> <span class="n">variables</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1">#print(&#39;VARIABLES&#39; in headers_dict, variables is None)</span>
        <span class="n">_simplify_variables</span><span class="p">(</span><span class="n">headers_dict</span><span class="p">)</span>
    <span class="k">elif</span> <span class="s1">&#39;VARIABLES&#39;</span> <span class="ow">in</span> <span class="n">headers_dict</span><span class="p">:</span>
        <span class="n">_simplify_variables</span><span class="p">(</span><span class="n">headers_dict</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">variables</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;VARIABLES&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">variables</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;no variables...&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_simplify_variables</span><span class="p">(</span><span class="n">headers_dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">variables</span> <span class="o">=</span> <span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;VARIABLES&#39;</span><span class="p">]</span>
    <span class="n">headers_dict</span><span class="p">[</span><span class="s1">&#39;VARIABLES&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">_stack</span><span class="p">(</span><span class="n">zone</span><span class="p">,</span> <span class="n">xyz_list</span><span class="p">,</span> <span class="n">quads_list</span><span class="p">,</span> <span class="n">tris_list</span><span class="p">,</span> <span class="n">tets_list</span><span class="p">,</span> <span class="n">hexas_list</span><span class="p">,</span> <span class="n">results_list</span><span class="p">,</span> <span class="n">log</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    elements are read as a list of lines, so we need to stack them</span>
<span class="sd">    and cast them while we&#39;re at it.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;stacking elements&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">hexas_list</span><span class="p">):</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">hexa_elements</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span><span class="n">hexas_list</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tets_list</span><span class="p">):</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">tet_elements</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span><span class="n">tets_list</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">quads_list</span><span class="p">):</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">quad_elements</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span><span class="n">quads_list</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">tris_list</span><span class="p">):</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">tri_elements</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span><span class="n">tris_list</span><span class="p">)</span>

    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;stacking nodes&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">xyz_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">xyz</span> <span class="o">=</span> <span class="n">xyz_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span><span class="n">xyz_list</span><span class="p">)</span>

    <span class="c1">#self.elements = elements - 1</span>
    <span class="c1">#print(self.elements)</span>

    <span class="k">if</span> <span class="n">is_3d</span><span class="p">(</span><span class="n">zone</span><span class="o">.</span><span class="n">headers_dict</span><span class="p">):</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">xyz</span> <span class="o">=</span> <span class="n">xyz</span>

        <span class="n">nresults</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">results_list</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">nresults</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">results</span> <span class="o">=</span> <span class="n">results_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">results</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span><span class="n">results_list</span><span class="p">)</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">nodal_results</span> <span class="o">=</span> <span class="n">results</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">zone</span><span class="o">.</span><span class="n">xy</span> <span class="o">=</span> <span class="n">xyz</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">nresults</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">results_list</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">nnodes_temp</span> <span class="o">=</span> <span class="n">xyz</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">nresults</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">zone</span><span class="o">.</span><span class="n">nodal_results</span> <span class="o">=</span> <span class="n">xyz</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nnodes_temp</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span><span class="n">xyz</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">nnodes_temp</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="o">*</span><span class="n">results_list</span><span class="p">]</span>
            <span class="n">zone</span><span class="o">.</span><span class="n">nodal_results</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>
        <span class="k">del</span> <span class="n">nnodes_temp</span>

    <span class="n">zone</span><span class="o">.</span><span class="n">variables</span> <span class="o">=</span> <span class="p">[</span><span class="n">var</span> <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">zone</span><span class="o">.</span><span class="n">variables</span> <span class="k">if</span> <span class="n">var</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="s1">&#39;Y&#39;</span><span class="p">,</span> <span class="s1">&#39;Z&#39;</span><span class="p">]]</span>

<div class="viewcode-block" id="read_zone_block"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.read_zone_block">[docs]</a><span class="k">def</span> <span class="nf">read_zone_block</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">,</span> <span class="n">xyz</span><span class="p">,</span> <span class="n">results</span><span class="p">,</span> <span class="n">nresults</span><span class="p">,</span> <span class="n">zone_type</span><span class="p">,</span>
                    <span class="n">sline</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">,</span> <span class="n">log</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;a zone can be structured or unstructred&quot;&quot;&quot;</span>
    <span class="c1">#print(&#39;***&#39;, iline, sline)</span>

    <span class="c1"># read all data</span>
    <span class="c1">#result = sline</span>
    <span class="c1">#iresult = len(sline)</span>
    <span class="c1">#nresult = len(sline)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">iresult</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">nresult</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">nnodes_max</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span> <span class="o">+</span> <span class="n">nresults</span><span class="p">)</span> <span class="o">*</span> <span class="n">nnodes</span>
    <span class="c1">#print(&#39;nnodes_max =&#39;, nnodes_max)</span>
    <span class="k">while</span> <span class="n">nresult</span> <span class="o">&lt;</span> <span class="n">nnodes_max</span><span class="p">:</span> <span class="c1">#  changed from iresult to nresult</span>
        <span class="c1">#print(&#39;zb&#39;, iline, sline, len(sline))</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="n">sline</span>
        <span class="n">nresult</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sline</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">iresult</span> <span class="o">&gt;=</span> <span class="n">nnodes_max</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;breaking...&#39;</span><span class="p">)</span>
            <span class="c1">#break</span>
        <span class="n">iline</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">sline</span> <span class="o">=</span> <span class="n">get_next_sline</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">iresult</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;zone_type=</span><span class="si">%s</span><span class="s1"> sline=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">zone_type</span><span class="p">,</span> <span class="n">sline</span><span class="p">))</span>
        <span class="n">iresult</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sline</span><span class="p">)</span>
        <span class="c1">#print(&#39;len&#39;, iresult, nresult, len(result))</span>
    <span class="c1">#print(result, len(result))</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">result</span><span class="p">):</span>
        <span class="k">assert</span> <span class="s1">&#39;.&#39;</span> <span class="ow">in</span> <span class="n">value</span><span class="p">,</span> <span class="s1">&#39;i=</span><span class="si">%i</span><span class="s1"> value=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">==</span> <span class="n">nnodes_max</span><span class="p">,</span> <span class="s1">&#39;len(result)=</span><span class="si">%s</span><span class="s1"> expected=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="n">nnodes_max</span><span class="p">)</span>
    <span class="c1">#-----------------</span>

    <span class="c1"># pack data</span>
    <span class="k">for</span> <span class="n">ires</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span> <span class="o">+</span> <span class="n">nresults</span><span class="p">):</span>
        <span class="n">i0</span> <span class="o">=</span> <span class="n">ires</span> <span class="o">*</span> <span class="n">nnodes</span>
        <span class="n">i1</span> <span class="o">=</span> <span class="p">(</span><span class="n">ires</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">nnodes</span> <span class="c1">#+ 1</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="n">i0</span><span class="p">:</span><span class="n">i1</span><span class="p">])</span> <span class="o">!=</span> <span class="n">nnodes</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;ires=</span><span class="si">%s</span><span class="s1"> len=</span><span class="si">%s</span><span class="s1"> nnodes=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">ires</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="n">i0</span><span class="p">:</span><span class="n">i1</span><span class="p">]),</span> <span class="n">nnodes</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ires</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;ires=</span><span class="si">%s</span><span class="s1"> nnodes=</span><span class="si">%s</span><span class="s1"> len(result)=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ires</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)))</span>
            <span class="n">xyz</span><span class="p">[:,</span> <span class="n">ires</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="n">i0</span><span class="p">:</span><span class="n">i1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">results</span><span class="p">[:,</span> <span class="n">ires</span> <span class="o">-</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="n">i0</span><span class="p">:</span><span class="n">i1</span><span class="p">]</span>

    <span class="c1"># setup</span>
    <span class="c1">#iline, line, sline = get_next_sline(lines, iline)</span>
    <span class="k">return</span> <span class="n">iline</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">sline</span></div>

<div class="viewcode-block" id="read_unstructured_elements"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.read_unstructured_elements">[docs]</a><span class="k">def</span> <span class="nf">read_unstructured_elements</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">,</span> <span class="n">sline</span><span class="p">,</span> <span class="n">elements</span><span class="p">,</span> <span class="n">nelements</span><span class="p">):</span>
    <span class="k">assert</span> <span class="s1">&#39;.&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sline</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">sline</span>

    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1">#print(&#39;nelements =&#39;, nelements)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nelements</span><span class="p">):</span>
        <span class="c1">#print(iline, i, sline)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">elements</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sline</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;i=</span><span class="si">%s</span><span class="s1"> sline=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">sline</span><span class="p">)))</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;i=</span><span class="si">%s</span><span class="s1"> sline=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">sline</span><span class="p">)))</span>

        <span class="n">iline</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">sline</span> <span class="o">=</span> <span class="n">get_next_sline</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">)</span>
        <span class="c1">#line = lines.readline()</span>
        <span class="c1">#iline += 1</span>
        <span class="c1">#sline = line.strip().split()</span>
    <span class="k">return</span> <span class="n">iline</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">sline</span></div>

<div class="viewcode-block" id="read_point"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.read_point">[docs]</a><span class="k">def</span> <span class="nf">read_point</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">,</span> <span class="n">xyz</span><span class="p">,</span> <span class="n">results</span><span class="p">,</span> <span class="n">zone_type</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">sline</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">,</span> <span class="n">nvars</span><span class="p">,</span> <span class="n">log</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;a POINT grid is a structured grid&quot;&quot;&quot;</span>
    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;start of POINT (structured); nnodes=</span><span class="si">{</span><span class="n">nnodes</span><span class="si">}</span><span class="s1"> nvars=</span><span class="si">{</span><span class="n">nvars</span><span class="si">}</span><span class="s1"> zone_type=</span><span class="si">{</span><span class="n">zone_type</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">inode</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nnodes</span><span class="p">):</span>
        <span class="n">iline</span><span class="p">,</span> <span class="n">sline</span> <span class="o">=</span> <span class="n">get_next_nsline</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">,</span> <span class="n">sline</span><span class="p">,</span> <span class="n">nvars</span><span class="p">)</span>
        <span class="c1">#print(iline, inode, sline)</span>

        <span class="c1">#if inode == 0:</span>
            <span class="c1">#log.debug(&#39;zone_type=%s sline=%s&#39; %(zone_type, sline))</span>


        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">sline</span><span class="p">[</span><span class="mi">3</span><span class="p">:])</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="n">inode</span><span class="p">,</span> <span class="p">:]):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;sline[3:]=</span><span class="si">%s</span><span class="s1"> results[inode, :]=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sline</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span> <span class="n">results</span><span class="p">[</span><span class="n">inode</span><span class="p">,</span> <span class="p">:])</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">xyz</span><span class="p">[</span><span class="n">inode</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sline</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
            <span class="n">results</span><span class="p">[</span><span class="n">inode</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">sline</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;i=</span><span class="si">%s</span><span class="s1"> line=</span><span class="si">%r</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">inode</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;sline = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">sline</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">raise</span>
        <span class="n">iline</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">sline</span> <span class="o">=</span> <span class="n">get_next_sline</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">)</span>
        <span class="c1">#log.debug(sline)</span>
    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;end of POINT&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">iline</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">sline</span></div>

<div class="viewcode-block" id="read_block"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.read_block">[docs]</a><span class="k">def</span> <span class="nf">read_block</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">,</span> <span class="n">xyz</span><span class="p">,</span> <span class="n">results</span><span class="p">,</span> <span class="n">zone_type</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">sline</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">,</span> <span class="n">nvars</span><span class="p">,</span> <span class="n">log</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    BLOCK format is similar to PLOT3D in that you read all the X values before the Ys,</span>
<span class="sd">    Zs, and results.  The alternative format is POINT, which reads them on a per node</span>
<span class="sd">    basis.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;start of BLOCK&#39;</span><span class="p">)</span>
    <span class="c1">#print(&#39;nnodes =&#39;, nnodes)</span>
    <span class="c1">#print(&#39;nvars =&#39;, nvars)</span>
    <span class="n">ndata</span> <span class="o">=</span> <span class="n">nnodes</span> <span class="o">*</span> <span class="n">nvars</span>
    <span class="c1">#print(&#39;ndata =&#39;, ndata)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">ndata</span><span class="p">:</span>
        <span class="n">sline</span> <span class="o">=</span> <span class="n">split_line</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="n">results</span> <span class="o">+=</span> <span class="n">sline</span>
        <span class="c1">#print(&#39;block:&#39;, iline, sline, len(results))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sline</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span>
        <span class="n">iline</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">sline</span> <span class="o">=</span> <span class="n">get_next_sline</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">)</span>
        <span class="c1">#log.debug(sline)</span>
    <span class="c1">#print(len(results))</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)</span> <span class="o">==</span> <span class="n">ndata</span><span class="p">,</span> <span class="s1">&#39;len(results)=</span><span class="si">%s</span><span class="s1"> expected=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">),</span> <span class="n">ndata</span><span class="p">)</span>
    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;end of BLOCK&#39;</span><span class="p">)</span>

    <span class="c1">#TODO: save results</span>
    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;not done...save results&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">iline</span></div>

<div class="viewcode-block" id="get_next_line"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.get_next_line">[docs]</a><span class="k">def</span> <span class="nf">get_next_line</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Read the next line from the file.  Handles comments.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="n">iline</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
        <span class="n">line</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">iline</span><span class="p">,</span> <span class="n">line</span>

    <span class="n">iline</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">igap</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">ngap_max</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;#&#39;</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="n">iline</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="n">line</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">return</span> <span class="n">iline</span><span class="p">,</span> <span class="n">line</span>
        <span class="n">iline</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">igap</span> <span class="o">&gt;</span> <span class="n">ngap_max</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="n">igap</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">iline</span><span class="p">,</span> <span class="n">line</span></div>

<div class="viewcode-block" id="split_line"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.split_line">[docs]</a><span class="k">def</span> <span class="nf">split_line</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;splits a comma or space separated line&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s1">&#39;,&#39;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
        <span class="n">line2</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="n">sline</span> <span class="o">=</span> <span class="n">line2</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">sline</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">sline</span></div>

<div class="viewcode-block" id="get_next_sline"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.get_next_sline">[docs]</a><span class="k">def</span> <span class="nf">get_next_sline</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Read the next split line from the file.  Handles comments.&quot;&quot;&quot;</span>
    <span class="n">iline</span><span class="p">,</span> <span class="n">line</span> <span class="o">=</span> <span class="n">get_next_line</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">line</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">iline</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
    <span class="n">sline</span> <span class="o">=</span> <span class="n">split_line</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">iline</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">sline</span></div>


<div class="viewcode-block" id="get_next_nsline"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.get_next_nsline">[docs]</a><span class="k">def</span> <span class="nf">get_next_nsline</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">,</span> <span class="n">sline</span><span class="p">,</span> <span class="n">nvars</span><span class="p">):</span>
    <span class="c1">#print(iline, sline)</span>
    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">sline</span><span class="p">)</span> <span class="o">!=</span> <span class="n">nvars</span><span class="p">:</span>  <span class="c1"># long line was split</span>
        <span class="c1">#print(sline, nvars)</span>
        <span class="n">iline</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">slinei</span> <span class="o">=</span> <span class="n">get_next_sline</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">)</span>
        <span class="c1">#print(iline, line, slinei, nvars)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">slinei</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">slinei</span>
        <span class="n">sline</span> <span class="o">+=</span> <span class="n">slinei</span>
        <span class="c1">#print(sline, &#39;\n&#39;)</span>
        <span class="c1">#iline += 1</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">sline</span><span class="p">)</span> <span class="o">==</span> <span class="n">nvars</span><span class="p">,</span> <span class="s1">&#39;iline=</span><span class="si">%i</span><span class="s1"> sline=</span><span class="si">%s</span><span class="s1"> nvars=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">iline</span><span class="p">,</span> <span class="n">sline</span><span class="p">,</span> <span class="n">nvars</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">iline</span><span class="p">,</span> <span class="n">sline</span></div>

<span class="k">def</span> <span class="nf">_read_header_lines</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">iline</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">log</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    reads a tecplot header</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    **Example 1**</span>

<span class="sd">    TITLE     = &quot;tecplot geometry and solution file&quot;</span>
<span class="sd">    VARIABLES = &quot;x&quot;</span>
<span class="sd">    &quot;y&quot;</span>
<span class="sd">    &quot;z&quot;</span>
<span class="sd">    &quot;rho&quot;</span>
<span class="sd">    &quot;u&quot;</span>
<span class="sd">    &quot;v&quot;</span>
<span class="sd">    &quot;w&quot;</span>
<span class="sd">    &quot;p&quot;</span>
<span class="sd">    ZONE T=&quot;\&quot;processor 1\&quot;&quot;</span>
<span class="sd">    n=522437, e=1000503, ZONETYPE=FEBrick</span>
<span class="sd">    DATAPACKING=BLOCK</span>

<span class="sd">    **Example 2**</span>

<span class="sd">    title=&quot;Force and Momment Data for forces&quot;</span>
<span class="sd">    variables=&quot;Iteration&quot;</span>
<span class="sd">    &quot;C_L&quot;,&quot;C_D&quot;,&quot;C_M_x&quot;,&quot;C_M_y&quot;,&quot;C_M_z&quot;&quot;C_x&quot;,&quot;C_y&quot;,&quot;C_z&quot;,&quot;C_Lp&quot;,&quot;C_Dp&quot;, &quot;C_Lv&quot;, &quot;C_Dv&quot;&quot;C_M_xp&quot;</span>
<span class="sd">    &quot;C_M_yp&quot;,&quot;C_M_zp&quot;,&quot;C_M_xv&quot;,&quot;C_M_yv&quot;&quot;C_M_zv&quot;,&quot;C_xp&quot;,&quot;C_yp&quot;,&quot;C_zp&quot;,&quot;C_xv&quot;,&quot;C_yv&quot;&quot;C_zv</span>
<span class="sd">    &quot;Mass flow&quot;,&quot;&lt;greek&gt;r&lt;/greek&gt;&quot;,&quot;u&quot;</span>
<span class="sd">    &quot;p/p&lt;sub&gt;0&lt;/sub&gt;&quot;,&quot;T&quot;,&quot;p&lt;sub&gt;t&lt;/sub&gt;/p&lt;sub&gt;0&lt;/sub&gt;&quot;</span>
<span class="sd">    &quot;T&lt;sub&gt;t&lt;/sub&gt;&quot;,&quot;Mach&quot;</span>
<span class="sd">    &quot;Simulation Time&quot;</span>
<span class="sd">    zone,t=&quot;forces&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">title_line</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="c1">#variables_line = &#39;&#39;</span>
    <span class="n">active_key</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">vars_found</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">header_lines</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1">#print(&#39;-----------------------------&#39;)</span>
    <span class="c1">#for iii, linei in enumerate(lines):</span>
        <span class="c1">#if iii &gt; 10:</span>
            <span class="c1">#break</span>
        <span class="c1">#print(linei)</span>
    <span class="c1">#print(&#39;-----------------------------&#39;)</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">30</span><span class="p">:</span>
        <span class="c1">#print(iline, i, line.strip())</span>
        <span class="c1">#self.n = 0</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;#&#39;</span><span class="p">:</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="n">iline</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">iline</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="ow">or</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;-&#39;</span><span class="p">:</span>
            <span class="c1">#print(line)</span>
            <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;breaking...&#39;</span><span class="p">)</span>
            <span class="k">break</span>

        <span class="n">uline</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="n">uline2</span> <span class="o">=</span> <span class="n">uline</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;TITLE=&#39;</span> <span class="ow">in</span> <span class="n">uline2</span><span class="p">:</span>
            <span class="n">title_line</span> <span class="o">+=</span> <span class="n">line</span>
            <span class="n">vars_found</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;TITLE&#39;</span><span class="p">)</span>
            <span class="n">active_key</span> <span class="o">=</span> <span class="s1">&#39;TITLE&#39;</span>
        <span class="k">elif</span> <span class="s1">&#39;VARIABLES&#39;</span> <span class="ow">in</span> <span class="n">uline2</span><span class="p">:</span>
            <span class="n">vars_found</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;VARIABLES&#39;</span><span class="p">)</span>
            <span class="c1">#variables_line += line</span>
            <span class="n">active_key</span> <span class="o">=</span> <span class="s1">&#39;VARIABLES&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#if &#39;ZONE T&#39; in line:</span>
                <span class="c1">#vars_found.append(&#39;ZONE T&#39;)</span>
            <span class="k">if</span> <span class="s1">&#39;ZONE&#39;</span> <span class="ow">in</span> <span class="n">uline2</span><span class="p">:</span>
                <span class="n">vars_found</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;ZONE&#39;</span><span class="p">)</span>
                <span class="n">active_key</span> <span class="o">=</span> <span class="s1">&#39;ZONE&#39;</span>
            <span class="c1">#if &#39;ZONE N&#39; in uline:</span>
                <span class="c1">#vars_found.append(&#39;N&#39;)</span>
            <span class="k">if</span> <span class="s1">&#39;ZONETYPE&#39;</span> <span class="ow">in</span> <span class="n">uline2</span><span class="p">:</span>
                <span class="n">vars_found</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;ZONETYPE&#39;</span><span class="p">)</span>
                <span class="n">active_key</span> <span class="o">=</span> <span class="s1">&#39;ZONE&#39;</span>
            <span class="k">if</span> <span class="s1">&#39;DATAPACKING&#39;</span> <span class="ow">in</span> <span class="n">uline2</span><span class="p">:</span>
                <span class="n">vars_found</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;DATAPACKING&#39;</span><span class="p">)</span>
                <span class="n">active_key</span> <span class="o">=</span> <span class="s1">&#39;ZONE&#39;</span>

        <span class="c1">#print(active_key, line)</span>
        <span class="k">if</span> <span class="n">active_key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;ZONE&#39;</span><span class="p">,</span> <span class="s1">&#39;VARIABLES&#39;</span><span class="p">]:</span>
            <span class="n">header_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="c1">#if len(vars_found) == 5:</span>
            <span class="c1">#break</span>

        <span class="c1">#if active_key</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="n">iline</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">iline</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;vars_found = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">vars_found</span><span class="p">)</span>
    <span class="c1">#print(&#39;header_lines&#39;, header_lines)</span>
    <span class="c1">#print(&quot;title = %r&quot; % title_line)</span>
    <span class="c1">#print(&quot;variables_line = %r&quot; % variables_line)</span>

    <span class="k">return</span> <span class="n">iline</span><span class="p">,</span> <span class="n">title_line</span><span class="p">,</span> <span class="n">header_lines</span><span class="p">,</span> <span class="n">line</span>

<div class="viewcode-block" id="main"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.main">[docs]</a><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>  <span class="c1"># pragma: no cover</span>
    <span class="c1">#plt = Tecplot()</span>
    <span class="n">fnames</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;Z:\Temporary_Transfers\steve\output\time20000&#39;</span><span class="p">)</span>

    <span class="c1">#datai = [</span>
        <span class="c1">#&#39;n=3807, e=7443&#39;,</span>
        <span class="c1">#&#39;n=3633, e=7106&#39;,</span>
        <span class="c1">#&#39;n=3847, e=7332&#39;,</span>
        <span class="c1">#&#39;n=3873, e=6947&#39;,</span>
        <span class="c1">#&#39;n=4594, e=8131&#39;,</span>
        <span class="c1">#&#39;n=4341, e=7160&#39;,</span>
        <span class="c1">#&#39;n=4116, e=8061&#39;,</span>
        <span class="c1">#&#39;n=4441, e=8105&#39;,</span>
        <span class="c1">#&#39;n=4141, e=8126&#39;,</span>
        <span class="c1">#&#39;n=4085, e=8053&#39;,</span>
        <span class="c1">#&#39;n=4047, e=8215&#39;,</span>
        <span class="c1">#&#39;n=4143, e=8123&#39;,</span>
        <span class="c1">#&#39;n=4242, e=7758&#39;,</span>
        <span class="c1">#&#39;n=3830, e=7535&#39;,</span>
        <span class="c1">#&#39;n=3847, e=7936&#39;,</span>
        <span class="c1">#&#39;n=3981, e=7807&#39;,</span>
        <span class="c1">#&#39;n=3688, e=7415&#39;,</span>
        <span class="c1">#&#39;n=4222, e=8073&#39;,</span>
        <span class="c1">#&#39;n=4164, e=7327&#39;,</span>
        <span class="c1">#&#39;n=3845, e=8354&#39;,</span>
        <span class="c1">#&#39;n=4037, e=6786&#39;,</span>
        <span class="c1">#&#39;n=3941, e=8942&#39;,</span>
        <span class="c1">#&#39;n=4069, e=7345&#39;,</span>
        <span class="c1">#&#39;n=4443, e=8001&#39;,</span>
        <span class="c1">#&#39;n=3895, e=7459&#39;,</span>
        <span class="c1">#&#39;n=4145, e=7754&#39;,</span>
        <span class="c1">#&#39;n=4224, e=8152&#39;,</span>
        <span class="c1">#&#39;n=4172, e=7878&#39;,</span>
        <span class="c1">#&#39;n=4138, e=8864&#39;,</span>
        <span class="c1">#&#39;n=3801, e=7431&#39;,</span>
        <span class="c1">#&#39;n=3984, e=6992&#39;,</span>
        <span class="c1">#&#39;n=4195, e=7967&#39;,</span>
        <span class="c1">#&#39;n=4132, e=7992&#39;,</span>
        <span class="c1">#&#39;n=4259, e=7396&#39;,</span>
        <span class="c1">#&#39;n=4118, e=7520&#39;,</span>
        <span class="c1">#&#39;n=4176, e=7933&#39;,</span>
        <span class="c1">#&#39;n=4047, e=8098&#39;,</span>
        <span class="c1">#&#39;n=4064, e=8540&#39;,</span>
        <span class="c1">#&#39;n=4144, e=8402&#39;,</span>
        <span class="c1">#&#39;n=4144, e=7979&#39;,</span>
        <span class="c1">#&#39;n=3991, e=6984&#39;,</span>
        <span class="c1">#&#39;n=4080, e=8465&#39;,</span>
        <span class="c1">#&#39;n=3900, e=7981&#39;,</span>
        <span class="c1">#&#39;n=3709, e=8838&#39;,</span>
        <span class="c1">#&#39;n=4693, e=8055&#39;,</span>
        <span class="c1">#&#39;n=4022, e=7240&#39;,</span>
        <span class="c1">#&#39;n=4028, e=8227&#39;,</span>
        <span class="c1">#&#39;n=3780, e=7551&#39;,</span>
        <span class="c1">#&#39;n=3993, e=8671&#39;,</span>
        <span class="c1">#&#39;n=4241, e=7277&#39;,</span>
        <span class="c1">#&#39;n=4084, e=6495&#39;,</span>
        <span class="c1">#&#39;n=4103, e=8165&#39;,</span>
        <span class="c1">#&#39;n=4496, e=5967&#39;,</span>
        <span class="c1">#&#39;n=3548, e=8561&#39;,</span>
        <span class="c1">#&#39;n=4143, e=7749&#39;,</span>
        <span class="c1">#&#39;n=4136, e=8358&#39;,</span>
        <span class="c1">#&#39;n=4096, e=7319&#39;,</span>
        <span class="c1">#&#39;n=4209, e=8036&#39;,</span>
        <span class="c1">#&#39;n=3885, e=7814&#39;,</span>
        <span class="c1">#&#39;n=3800, e=8232&#39;,</span>
        <span class="c1">#&#39;n=3841, e=7837&#39;,</span>
        <span class="c1">#&#39;n=3874, e=7571&#39;,</span>
        <span class="c1">#&#39;n=3887, e=8079&#39;,</span>
        <span class="c1">#&#39;n=3980, e=7834&#39;,</span>
        <span class="c1">#&#39;n=3763, e=7039&#39;,</span>
        <span class="c1">#&#39;n=4287, e=7130&#39;,</span>
        <span class="c1">#&#39;n=4110, e=8336&#39;,</span>
        <span class="c1">#&#39;n=3958, e=7195&#39;,</span>
        <span class="c1">#&#39;n=4730, e=7628&#39;,</span>
        <span class="c1">#&#39;n=4087, e=8149&#39;,</span>
        <span class="c1">#&#39;n=4045, e=8561&#39;,</span>
        <span class="c1">#&#39;n=3960, e=7320&#39;,</span>
        <span class="c1">#&#39;n=3901, e=8286&#39;,</span>
        <span class="c1">#&#39;n=4065, e=7013&#39;,</span>
        <span class="c1">#&#39;n=4160, e=7906&#39;,</span>
        <span class="c1">#&#39;n=3628, e=7140&#39;,</span>
        <span class="c1">#&#39;n=4256, e=8168&#39;,</span>
        <span class="c1">#&#39;n=3972, e=8296&#39;,</span>
        <span class="c1">#&#39;n=3661, e=7879&#39;,</span>
        <span class="c1">#&#39;n=3922, e=8093&#39;,</span>
        <span class="c1">#&#39;n=3972, e=6997&#39;,</span>
        <span class="c1">#&#39;n=3884, e=7603&#39;,</span>
        <span class="c1">#&#39;n=3609, e=6856&#39;,</span>
        <span class="c1">#&#39;n=4168, e=7147&#39;,</span>
        <span class="c1">#&#39;n=4206, e=8232&#39;,</span>
        <span class="c1">#&#39;n=4631, e=8222&#39;,</span>
        <span class="c1">#&#39;n=3970, e=7569&#39;,</span>
        <span class="c1">#&#39;n=3998, e=7617&#39;,</span>
        <span class="c1">#&#39;n=3855, e=7971&#39;,</span>
        <span class="c1">#&#39;n=4092, e=7486&#39;,</span>
        <span class="c1">#&#39;n=4407, e=7847&#39;,</span>
        <span class="c1">#&#39;n=3976, e=7627&#39;,</span>
        <span class="c1">#&#39;n=3911, e=8483&#39;,</span>
        <span class="c1">#&#39;n=4144, e=7919&#39;,</span>
        <span class="c1">#&#39;n=4033, e=8129&#39;,</span>
        <span class="c1">#&#39;n=3976, e=7495&#39;,</span>
        <span class="c1">#&#39;n=3912, e=7739&#39;,</span>
        <span class="c1">#&#39;n=4278, e=8522&#39;,</span>
        <span class="c1">#&#39;n=4703, e=8186&#39;,</span>
        <span class="c1">#&#39;n=4230, e=7811&#39;,</span>
        <span class="c1">#&#39;n=3971, e=7699&#39;,</span>
        <span class="c1">#&#39;n=4081, e=8242&#39;,</span>
        <span class="c1">#&#39;n=4045, e=7524&#39;,</span>
        <span class="c1">#&#39;n=4532, e=5728&#39;,</span>
        <span class="c1">#&#39;n=4299, e=8560&#39;,</span>
        <span class="c1">#&#39;n=3885, e=7531&#39;,</span>
        <span class="c1">#&#39;n=4452, e=8405&#39;,</span>
        <span class="c1">#&#39;n=4090, e=7661&#39;,</span>
        <span class="c1">#&#39;n=3937, e=7739&#39;,</span>
        <span class="c1">#&#39;n=4336, e=7612&#39;,</span>
        <span class="c1">#&#39;n=4101, e=7461&#39;,</span>
        <span class="c1">#&#39;n=3980, e=8632&#39;,</span>
        <span class="c1">#&#39;n=4523, e=7761&#39;,</span>
        <span class="c1">#&#39;n=4237, e=8463&#39;,</span>
        <span class="c1">#&#39;n=4013, e=7856&#39;,</span>
        <span class="c1">#&#39;n=4219, e=8013&#39;,</span>
        <span class="c1">#&#39;n=4248, e=8328&#39;,</span>
        <span class="c1">#&#39;n=4529, e=8757&#39;,</span>
        <span class="c1">#&#39;n=4109, e=7496&#39;,</span>
        <span class="c1">#&#39;n=3969, e=8026&#39;,</span>
        <span class="c1">#&#39;n=4093, e=8506&#39;,</span>
        <span class="c1">#&#39;n=3635, e=7965&#39;,</span>
        <span class="c1">#&#39;n=4347, e=8123&#39;,</span>
        <span class="c1">#&#39;n=4703, e=7752&#39;,</span>
        <span class="c1">#&#39;n=3867, e=8124&#39;,</span>
        <span class="c1">#&#39;n=3930, e=7919&#39;,</span>
        <span class="c1">#&#39;n=4247, e=7154&#39;,</span>
        <span class="c1">#&#39;n=4065, e=8125&#39;,</span>
    <span class="c1">#]</span>
    <span class="n">fnames</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;Z:\Temporary_Transfers\steve\output\time20000&#39;</span><span class="p">,</span> <span class="n">fname</span><span class="p">)</span>
              <span class="k">for</span> <span class="n">fname</span> <span class="ow">in</span> <span class="n">fnames</span><span class="p">]</span>
    <span class="n">tecplot_filename_out</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1">#tecplot_filename_out = &#39;tecplot_joined.plt&#39;</span>
    <span class="kn">from</span> <span class="nn">pyNastran.converters.tecplot.utils</span> <span class="kn">import</span> <span class="n">merge_tecplot_files</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">merge_tecplot_files</span><span class="p">(</span><span class="n">fnames</span><span class="p">,</span> <span class="n">tecplot_filename_out</span><span class="p">)</span>

    <span class="n">y0</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">model</span><span class="o">.</span><span class="n">extract_y_slice</span><span class="p">(</span><span class="n">y0</span><span class="p">,</span> <span class="n">tol</span><span class="o">=</span><span class="mf">0.014</span><span class="p">,</span> <span class="n">slice_filename</span><span class="o">=</span><span class="s1">&#39;slice.plt&#39;</span><span class="p">)</span>

    <span class="k">return</span></div>
    <span class="c1">#for iprocessor, fname in enumerate(fnames):</span>
        <span class="c1">#nnodes, nelements = datai[iprocessor].split(&#39;,&#39;)</span>
        <span class="c1">#nnodes = int(nnodes.split(&#39;=&#39;)[1])</span>
        <span class="c1">#nelements = int(nelements.split(&#39;=&#39;)[1])</span>

        <span class="c1">#ip = iprocessor + 1</span>
        <span class="c1">#tecplot_filename = &#39;model_final_meters_part%i_tec_volume_timestep20000.plt&#39; % ip</span>
        <span class="c1">#print(tecplot_filename)</span>
        <span class="c1">#try:</span>
            <span class="c1">#plt.read_tecplot_binary(tecplot_filename, nnodes=nnodes, nelements=nelements)</span>
            <span class="c1">#plt.write_tecplot(&#39;processor%i.plt&#39; % ip)</span>
        <span class="c1">#except:</span>
            <span class="c1">#raise</span>
        <span class="c1">##break</span>

<div class="viewcode-block" id="main2"><a class="viewcode-back" href="../../../../reference/converters/pyNastran.converters.tecplot.html#pyNastran.converters.tecplot.tecplot.main2">[docs]</a><span class="k">def</span> <span class="nf">main2</span><span class="p">():</span>  <span class="c1"># pragma: no cover</span>
    <span class="sd">&quot;&quot;&quot;tests slicing&quot;&quot;&quot;</span>
    <span class="n">plt</span> <span class="o">=</span> <span class="n">Tecplot</span><span class="p">()</span>
    <span class="c1">#fnames = os.listdir(r&#39;Z:\Temporary_Transfers\steve\output\time20000&#39;)</span>
    <span class="c1">#fnames = [os.path.join(r&#39;Z:\Temporary_Transfers\steve\output\time20000&#39;, fname)</span>
    <span class="c1">#          for fname in fnames]</span>
    <span class="n">fnames</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;slice.plt&#39;</span><span class="p">]</span>
    <span class="c1"># tecplot_filename_out = None</span>
    <span class="c1">#tecplot_filename_out = &#39;tecplot_joined.plt&#39;</span>
    <span class="c1">#model = merge_tecplot_files(fnames, tecplot_filename_out)</span>

    <span class="k">for</span> <span class="n">iprocessor</span><span class="p">,</span> <span class="n">tecplot_filename</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">fnames</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">read_tecplot</span><span class="p">(</span><span class="n">tecplot_filename</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">write_tecplot</span><span class="p">(</span><span class="s1">&#39;processor_</span><span class="si">%i</span><span class="s1">.plt&#39;</span> <span class="o">%</span> <span class="n">iprocessor</span><span class="p">)</span></div>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>   <span class="c1"># pragma: no cover</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Steven Doyle.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>