

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>pyNastran.bdf.cards.elements.bars &mdash; pyNastran 1.4-dev 1.4-dev documentation</title>
  

  
  <link rel="stylesheet" href="../../../../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../index.html" class="icon icon-home"> pyNastran 1.4-dev
          

          
            
            <img src="../../../../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.4-dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../quick_start/index.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../how_to/index.html">How To: pyNastran</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../reference/pyNastran.html">pyNastran Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../manual/index.html">pyNastran Manual</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">pyNastran 1.4-dev</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../../index.html">Module code</a> &raquo;</li>
        
      <li>pyNastran.bdf.cards.elements.bars</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pyNastran.bdf.cards.elements.bars</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">defines:</span>
<span class="sd"> - CBAR</span>
<span class="sd"> - CBARAO</span>
<span class="sd"> - BAROR</span>
<span class="sd"> - CBEAM3</span>
<span class="sd"> - CBEND</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="c1"># pylint: disable=R0904,R0902,E1101,E1103,C0111,C0302,C0103,W0101</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">TYPE_CHECKING</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">numpy.linalg</span> <span class="kn">import</span> <span class="n">norm</span>

<span class="kn">from</span> <span class="nn">pyNastran.utils.numpy_utils</span> <span class="kn">import</span> <span class="n">integer_types</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.field_writer_8</span> <span class="kn">import</span> <span class="n">set_blank_if_default</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.cards.base_card</span> <span class="kn">import</span> <span class="n">BaseCard</span><span class="p">,</span> <span class="n">Element</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.bdf_interface.assign_type</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">integer</span><span class="p">,</span> <span class="n">integer_or_blank</span><span class="p">,</span> <span class="n">integer_double_or_blank</span><span class="p">,</span> <span class="n">double_or_blank</span><span class="p">,</span>
    <span class="n">integer_string_or_blank</span><span class="p">,</span> <span class="n">string</span><span class="p">,</span> <span class="n">integer_or_double</span><span class="p">,</span>
    <span class="n">double</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.field_writer_8</span> <span class="kn">import</span> <span class="n">print_card_8</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.field_writer_16</span> <span class="kn">import</span> <span class="n">print_card_16</span>
<span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
    <span class="kn">from</span> <span class="nn">pyNastran.nptyping</span> <span class="kn">import</span> <span class="n">NDArray3float</span><span class="p">,</span> <span class="n">NDArray33float</span>
    <span class="kn">from</span> <span class="nn">cpylog</span> <span class="kn">import</span> <span class="n">SimpleLogger</span>
    <span class="kn">from</span> <span class="nn">pyNastran.bdf.bdf</span> <span class="kn">import</span> <span class="n">BDF</span>


<div class="viewcode-block" id="LineElement"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.LineElement">[docs]</a><span class="k">class</span> <span class="nc">LineElement</span><span class="p">(</span><span class="n">Element</span><span class="p">):</span>  <span class="c1"># CBAR, CBEAM, CBEAM3, CBEND</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">Element</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: Optional[Any]</span>
        <span class="c1">#self.nodes_ref = None</span>

<div class="viewcode-block" id="LineElement.C"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.LineElement.C">[docs]</a>    <span class="k">def</span> <span class="nf">C</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;torsional constant&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Element eid=</span><span class="si">%i</span><span class="s1"> has not been &#39;</span>
                               <span class="s1">&#39;cross referenced.</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">C</span><span class="p">()</span></div>

<div class="viewcode-block" id="LineElement.Area"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.LineElement.Area">[docs]</a>    <span class="k">def</span> <span class="nf">Area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the area of the element face&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;implement self.Area() for </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></div>

<div class="viewcode-block" id="LineElement.E"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.LineElement.E">[docs]</a>    <span class="k">def</span> <span class="nf">E</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the Young&#39;s Modulus, :math:`E`&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Element eid=</span><span class="si">%i</span><span class="s1"> has not been &#39;</span>
                               <span class="s1">&#39;cross referenced.</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">mid_ref</span><span class="o">.</span><span class="n">E</span><span class="p">()</span></div>

<div class="viewcode-block" id="LineElement.G"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.LineElement.G">[docs]</a>    <span class="k">def</span> <span class="nf">G</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the Shear Modulus, :math:`G`&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Element eid=</span><span class="si">%i</span><span class="s1"> has not been &#39;</span>
                               <span class="s1">&#39;cross referenced.</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">mid_ref</span><span class="o">.</span><span class="n">G</span><span class="p">()</span></div>

<div class="viewcode-block" id="LineElement.J"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.LineElement.J">[docs]</a>    <span class="k">def</span> <span class="nf">J</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the Polar Moment of Inertia, :math:`J`&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Element eid=</span><span class="si">%i</span><span class="s1"> has not been &#39;</span>
                               <span class="s1">&#39;cross referenced.</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">J</span><span class="p">()</span></div>

<div class="viewcode-block" id="LineElement.I11"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.LineElement.I11">[docs]</a>    <span class="k">def</span> <span class="nf">I11</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the Moment of Inertia, :math:`I_{11}`&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Element eid=</span><span class="si">%i</span><span class="s1"> has not been &#39;</span>
                               <span class="s1">&#39;cross referenced.</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">I11</span><span class="p">()</span></div>

<div class="viewcode-block" id="LineElement.I22"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.LineElement.I22">[docs]</a>    <span class="k">def</span> <span class="nf">I22</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the Moment of Inertia, :math:`I_{22}`&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Element eid=</span><span class="si">%i</span><span class="s1"> has not been &#39;</span>
                               <span class="s1">&#39;cross referenced.</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">I22</span><span class="p">()</span></div>

<div class="viewcode-block" id="LineElement.I12"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.LineElement.I12">[docs]</a>    <span class="k">def</span> <span class="nf">I12</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the Moment of Inertia, :math:`I_{12}`&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Element eid=</span><span class="si">%i</span><span class="s1"> has not been &#39;</span>
                               <span class="s1">&#39;cross referenced.</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">I12</span><span class="p">()</span></div>

<div class="viewcode-block" id="LineElement.Nu"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.LineElement.Nu">[docs]</a>    <span class="k">def</span> <span class="nf">Nu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get Poisson&#39;s Ratio, :math:`\nu`&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Element eid=</span><span class="si">%i</span><span class="s1"> has not been &#39;</span>
                               <span class="s1">&#39;cross referenced.</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">mid_ref</span><span class="o">.</span><span class="n">nu</span></div>

<div class="viewcode-block" id="LineElement.Rho"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.LineElement.Rho">[docs]</a>    <span class="k">def</span> <span class="nf">Rho</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the material density, :math:`\rho`&quot;&quot;&quot;</span>
        <span class="c1">#print(str(self.pid), type(self.pid))</span>
        <span class="c1">#raise NotImplementedError(&#39;implement self.Rho() for %s&#39; % self.type)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Element eid=</span><span class="si">%i</span><span class="s1"> has not been &#39;</span>
                               <span class="s1">&#39;cross referenced.</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">mid_ref</span><span class="o">.</span><span class="n">rho</span></div>

<div class="viewcode-block" id="LineElement.Nsm"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.LineElement.Nsm">[docs]</a>    <span class="k">def</span> <span class="nf">Nsm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Placeholder method for the non-structural mass, :math:`nsm`&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;implement self.Area() for </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span></div>

<div class="viewcode-block" id="LineElement.MassPerLength"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.LineElement.MassPerLength">[docs]</a>    <span class="k">def</span> <span class="nf">MassPerLength</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the mass per unit length, :math:`\frac{m}{L}`&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Element eid=</span><span class="si">%i</span><span class="s1"> has not been &#39;</span>
                               <span class="s1">&#39;cross referenced.</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">MassPerLength</span><span class="p">()</span></div>

<div class="viewcode-block" id="LineElement.Mass"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.LineElement.Mass">[docs]</a>    <span class="k">def</span> <span class="nf">Mass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the mass of the element.</span>

<span class="sd">        .. math:: m = \left( \rho A + nsm \right) L</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">L</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Length</span><span class="p">()</span>
        <span class="n">mass</span> <span class="o">=</span> <span class="n">L</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">MassPerLength</span><span class="p">()</span>
        <span class="c1">#try:</span>
            <span class="c1">#mass = (self.Rho() * self.Area() + self.Nsm()) * L</span>
        <span class="c1">#except TypeError:</span>
            <span class="c1">#msg = &#39;TypeError on eid=%s pid=%s:\n&#39; % (self.eid, self.Pid())</span>
            <span class="c1">#msg += &#39;rho = %s\narea = %s\nnsm = %s\nL = %s&#39; % (self.Rho(),</span>
            <span class="c1">#                                                  self.Area(),</span>
            <span class="c1">#                                                  self.Nsm(), L)</span>
            <span class="c1">#raise TypeError(msg)</span>

        <span class="k">return</span> <span class="n">mass</span></div>

<div class="viewcode-block" id="LineElement.uncross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.LineElement.uncross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">uncross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes cross-reference links&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="LineElement.Length"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.LineElement.Length">[docs]</a>    <span class="k">def</span> <span class="nf">Length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the length, :math:`L`, of the element.</span>

<span class="sd">        .. math:: L = \sqrt{  (n_{x2}-n_{x1})^2+(n_{y2}-n_{y1})^2+(n_{z2}-n_{z1})^2  }</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">L</span> <span class="o">=</span> <span class="n">norm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_position</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">L</span></div>

<div class="viewcode-block" id="LineElement.get_edge_ids"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.LineElement.get_edge_ids">[docs]</a>    <span class="k">def</span> <span class="nf">get_edge_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the edge IDs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">node_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="k">return</span> <span class="p">[(</span><span class="n">node_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">node_ids</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span></div></div>


<div class="viewcode-block" id="BAROR"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.BAROR">[docs]</a><span class="k">class</span> <span class="nc">BAROR</span><span class="p">(</span><span class="n">BaseCard</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    +-------+---+-----+---+---+-------+-----+-------+------+</span>
<span class="sd">    |   1   | 2 |  3  | 4 | 5 |   6   |  7  |   8   |  9   |</span>
<span class="sd">    +=======+===+=====+===+===+=======+=====+=======+======+</span>
<span class="sd">    | BAROR |   | PID |   |   | G0/X1 |  X2 |  X3   | OFFT |</span>
<span class="sd">    +-------+---+-----+---+---+-------+-----+-------+------+</span>
<span class="sd">    | BAROR |   | 39  |   |   |  0.6  | 2.9 | -5.87 | GOG  |</span>
<span class="sd">    +-------+---+-----+---+---+-------+-----+-------+------+</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;BAROR&#39;</span>

<div class="viewcode-block" id="BAROR._init_from_empty"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.BAROR._init_from_empty">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_init_from_empty</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">is_g0</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">g0</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">x</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">BAROR</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">is_g0</span><span class="p">,</span> <span class="n">g0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">offt</span><span class="o">=</span><span class="s1">&#39;GGG&#39;</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">is_g0</span><span class="p">,</span> <span class="n">g0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">offt</span><span class="o">=</span><span class="s1">&#39;GGG&#39;</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="n">BaseCard</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="n">pid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_g0</span> <span class="o">=</span> <span class="n">is_g0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">g0</span> <span class="o">=</span> <span class="n">g0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">offt</span> <span class="o">=</span> <span class="n">offt</span>
        <span class="c1">#if isinstance(offt, integer_types):</span>
            <span class="c1">#raise NotImplementedError(&#39;the integer form of offt is not supported; offt=%s&#39; % offt)</span>

<div class="viewcode-block" id="BAROR.add_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.BAROR.add_card">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;pid&#39;</span><span class="p">)</span>

        <span class="c1"># x / g0</span>
        <span class="n">field5</span> <span class="o">=</span> <span class="n">integer_double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;g0_x1&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field5</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="n">is_g0</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">g0</span> <span class="o">=</span> <span class="n">field5</span>
            <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field5</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
            <span class="n">is_g0</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">g0</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">field5</span><span class="p">,</span>
                          <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;x2&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">),</span>
                          <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;x3&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)],</span>
                         <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;BAROR field5 = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">field5</span><span class="p">)</span>
        <span class="n">offt</span> <span class="o">=</span> <span class="n">integer_string_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;offt&#39;</span><span class="p">,</span> <span class="s1">&#39;GGG&#39;</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;len(BAROR card) = </span><span class="si">%i</span><span class="se">\n</span><span class="s1">card=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">),</span> <span class="n">card</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">BAROR</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">is_g0</span><span class="p">,</span> <span class="n">g0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">offt</span><span class="o">=</span><span class="n">offt</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span></div>

<div class="viewcode-block" id="BAROR.raw_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.BAROR.raw_fields">[docs]</a>    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the fields of the card in their full form</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;BAROR&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="o">+</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">offt</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="BAROR.write_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.BAROR.write_card">[docs]</a>    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">card</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repr_fields</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_8</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_16</span><span class="p">(</span><span class="n">card</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="CBARAO"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBARAO">[docs]</a><span class="k">class</span> <span class="nc">CBARAO</span><span class="p">(</span><span class="n">BaseCard</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Per MSC 2016.1</span>
<span class="sd">    +--------+------+-------+------+-----+--------+-----+----+----+</span>
<span class="sd">    |   1    |  2   |   3   |  4   |  5  |    6   |  7  | 8  |  9 |</span>
<span class="sd">    +========+======+=======+======+=====+========+=====+====+====+</span>
<span class="sd">    | CBARAO | EID  | SCALE |  X1  | X2  |  X3    | X4  | X5 | X6 |</span>
<span class="sd">    +--------+------+-------+------+-----+--------+-----+----+----+</span>
<span class="sd">    | CBARAO | 1065 |  FR   | 0.2  | 0.4 |  0.6   | 0.8 |    |    |</span>
<span class="sd">    +--------+------+-------+------+-----+--------+-----+----+----+</span>

<span class="sd">    Alternate form (not supported):</span>
<span class="sd">    +--------+------+-------+------+-----+--------+-----+----+----+</span>
<span class="sd">    |   1    |  2   |   3   |  4   |  5  |    6   |  7  | 8  |  9 |</span>
<span class="sd">    +========+======+=======+======+=====+========+=====+====+====+</span>
<span class="sd">    | CBARAO | EID  | SCALE | NPTS | X1  | DELTAX |     |    |    |</span>
<span class="sd">    +--------+------+-------+------+-----+--------+-----+----+----+</span>
<span class="sd">    | CBARAO | 1065 |  FR   |  4   | 0.2 |  0.2   |     |    |    |</span>
<span class="sd">    +--------+------+-------+------+-----+--------+-----+----+----+</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;CBARAO&#39;</span>

<div class="viewcode-block" id="CBARAO._init_from_empty"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBARAO._init_from_empty">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_init_from_empty</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="s1">&#39;FR&#39;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">CBARAO</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a CBARAO card, which defines additional output locations</span>
<span class="sd">        for the CBAR card.</span>

<span class="sd">        It also changes the OP2 element type from a CBAR-34 to a CBAR-100.</span>
<span class="sd">        However, it is ignored if there are no PLOAD1s in the model.</span>
<span class="sd">        Furthermore, the type is changed for the whole deck, regardless of</span>
<span class="sd">        whether there are PLOAD1s in the other load cases.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        eid : int</span>
<span class="sd">            element id</span>
<span class="sd">        scale : str</span>
<span class="sd">            defines what x means</span>
<span class="sd">            LE : x is in absolute coordinates along the bar</span>
<span class="sd">            FR : x is in fractional</span>
<span class="sd">        x : List[float]</span>
<span class="sd">            the additional output locations (doesn&#39;t include the end points)</span>
<span class="sd">            len(x) &lt;= 6</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        MSC only</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eid</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">scale</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<div class="viewcode-block" id="CBARAO.add_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBARAO.add_card">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CBARAO card from ``BDF.add_card(...)``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        card : BDFCard()</span>
<span class="sd">            a BDFCard object</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;eid&#39;</span><span class="p">)</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">string</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;scale&#39;</span><span class="p">)</span>
        <span class="n">x1_npoints</span> <span class="o">=</span> <span class="n">integer_or_double</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;x1/npoints&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x1_npoints</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="n">npoints</span> <span class="o">=</span> <span class="n">x1_npoints</span>
            <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">npoints</span> <span class="o">&lt;</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;CBARAO npoints=</span><span class="si">%r</span><span class="s1"> must be 1-6&#39;</span> <span class="o">%</span> <span class="n">npoints</span>
            <span class="n">x1</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;x1&#39;</span><span class="p">)</span>
            <span class="n">delta_x</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;delta_x&#39;</span><span class="p">)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x1</span> <span class="o">+</span> <span class="n">delta_x</span> <span class="o">*</span> <span class="p">(</span><span class="n">npoints</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">num</span><span class="o">=</span><span class="n">npoints</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="n">npoints</span><span class="p">,</span> <span class="n">x</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">x1_npoints</span><span class="p">,</span>
                <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;x2&#39;</span><span class="p">),</span>
                <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;x3&#39;</span><span class="p">),</span>
                <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;x4&#39;</span><span class="p">),</span>
                <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;x5&#39;</span><span class="p">),</span>
                <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;x6&#39;</span><span class="p">),</span>
            <span class="p">]</span>
            <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">xi</span> <span class="k">for</span> <span class="n">xi</span> <span class="ow">in</span> <span class="n">x</span> <span class="k">if</span> <span class="n">xi</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;len(CBARAO card) = </span><span class="si">%i</span><span class="se">\n</span><span class="s1">card=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">),</span> <span class="n">card</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">CBARAO</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xref</span><span class="p">):</span>
        <span class="k">pass</span>

<div class="viewcode-block" id="CBARAO.raw_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBARAO.raw_fields">[docs]</a>    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;CBARAO&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="CBARAO.repr_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBARAO.repr_fields">[docs]</a>    <span class="k">def</span> <span class="nf">repr_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_fields</span><span class="p">()</span></div>

<div class="viewcode-block" id="CBARAO.write_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBARAO.write_card">[docs]</a>    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">card</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repr_fields</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_8</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_16</span><span class="p">(</span><span class="n">card</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="CBAR"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR">[docs]</a><span class="k">class</span> <span class="nc">CBAR</span><span class="p">(</span><span class="n">LineElement</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    +-------+-----+-----+-----+-----+-----+-----+-----+------+</span>
<span class="sd">    |   1   |  2  |  3  |  4  |  5  |  6  |  7  |  8  |   9  |</span>
<span class="sd">    +=======+=====+=====+=====+=====+=====+=====+=====+======+</span>
<span class="sd">    | CBAR  | EID | PID | GA  | GB  | X1  | X2  | X3  | OFFT |</span>
<span class="sd">    +-------+-----+-----+-----+-----+-----+-----+-----+------+</span>
<span class="sd">    |       | PA  | PB  | W1A | W2A | W3A | W1B | W2B | W3B  |</span>
<span class="sd">    +-------+-----+-----+-----+-----+-----+-----+-----+------+</span>

<span class="sd">    or</span>

<span class="sd">    +-------+-----+-----+-----+-----+-----+-----+-----+------+</span>
<span class="sd">    |   1   |  2  |  3  |  4  |  5  |  6  |  7  |  8  |   9  |</span>
<span class="sd">    +=======+=====+=====+=====+=====+=====+=====+=====+======+</span>
<span class="sd">    | CBAR  | EID | PID | GA  | GB  | G0  |     |     | OFFT |</span>
<span class="sd">    +-------+-----+-----+-----+-----+-----+-----+-----+------+</span>
<span class="sd">    |       | PA  | PB  | W1A | W2A | W3A | W1B | W2B | W3B  |</span>
<span class="sd">    +-------+-----+-----+-----+-----+-----+-----+-----+------+</span>

<span class="sd">    +-------+-------+-----+-------+-------+--------+-------+-------+-------+</span>
<span class="sd">    |   1   |   2   |  3  |   4   |   5   |    6   |   7   |   8   |   9   |</span>
<span class="sd">    +=======+=======+=====+=======+=======+========+=======+=======+=======+</span>
<span class="sd">    |  CBAR |   2   |  39 |   7   |   6   |  105   |       |       |  GGG  |</span>
<span class="sd">    +-------+-------+-----+-------+-------+--------+-------+-------+-------+</span>
<span class="sd">    |       |       | 513 |  0.0  |  0.0  |    -9. |  0.0  |  0.0  |   -9. |</span>
<span class="sd">    +-------+-------+-----+-------+-------+--------+-------+-------+-------+</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;CBAR&#39;</span>
    <span class="n">_field_map</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;eid&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="s1">&#39;ga&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span><span class="s1">&#39;gb&#39;</span><span class="p">,</span>
        <span class="mi">8</span><span class="p">:</span><span class="s1">&#39;offt&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span><span class="s1">&#39;pa&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span><span class="s1">&#39;pb&#39;</span><span class="p">,</span>
        <span class="c1">#, &#39;W1A&#39;, &#39;W2A&#39;, &#39;W3A&#39;, &#39;W1B&#39;, &#39;W2B&#39;, &#39;W3B&#39;</span>
    <span class="p">}</span>
<div class="viewcode-block" id="CBAR.update_by_cp_name"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.update_by_cp_name">[docs]</a>    <span class="k">def</span> <span class="nf">update_by_cp_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cp_name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">cp_name</span> <span class="o">==</span> <span class="s1">&#39;W1A&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wa</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">cp_name</span> <span class="o">==</span> <span class="s1">&#39;W2A&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wa</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">cp_name</span> <span class="o">==</span> <span class="s1">&#39;W3A&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wa</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">cp_name</span> <span class="o">==</span> <span class="s1">&#39;W1B&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">cp_name</span> <span class="o">==</span> <span class="s1">&#39;W2B&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wb</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">cp_name</span> <span class="o">==</span> <span class="s1">&#39;W3B&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wb</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">cp_name</span> <span class="o">==</span> <span class="s1">&#39;X1&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">cp_name</span> <span class="o">==</span> <span class="s1">&#39;X2&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">cp_name</span> <span class="o">==</span> <span class="s1">&#39;X3&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;CBAR: cp_name=</span><span class="si">%r</span><span class="s1"> must be added to update_by_cp_name&#39;</span> <span class="o">%</span> <span class="n">cp_name</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_update_field_helper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wa</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">12</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wa</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">13</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wa</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">14</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">15</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wb</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">16</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wb</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">g0</span> <span class="o">=</span> <span class="n">value</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Field </span><span class="si">%r</span><span class="s1">=</span><span class="si">%r</span><span class="s1"> is an invalid </span><span class="si">%s</span><span class="s1"> entry.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Field </span><span class="si">%r</span><span class="s1">=</span><span class="si">%r</span><span class="s1"> is an invalid </span><span class="si">%s</span><span class="s1"> entry.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">))</span>

<div class="viewcode-block" id="CBAR.export_to_hdf5"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.export_to_hdf5">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">export_to_hdf5</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">h5_file</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">eids</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;exports the elements in a vectorized way&quot;&quot;&quot;</span>
        <span class="c1">#comments = []</span>
        <span class="n">pids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">g0</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">offt</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">unused_bit</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">pa</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">pb</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">wa</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">wb</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">nan</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
        <span class="n">encoding</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">_encoding</span>
        <span class="k">for</span> <span class="n">eid</span> <span class="ow">in</span> <span class="n">eids</span><span class="p">:</span>
            <span class="n">element</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">eid</span><span class="p">]</span>
            <span class="c1">#comments.append(element.comment)</span>
            <span class="n">pids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">pid</span><span class="p">)</span>
            <span class="n">nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">element</span><span class="o">.</span><span class="n">g0</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
                <span class="n">g0</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nan</span><span class="p">)</span>
                <span class="n">g0</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">g0</span><span class="p">)</span>

            <span class="n">offti</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">offt</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">offti</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
                <span class="n">offti</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">offti</span><span class="p">)</span>
            <span class="n">offt</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">offti</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">encoding</span><span class="p">))</span>
            <span class="n">pa</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">pa</span><span class="p">)</span>
            <span class="n">pb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">pb</span><span class="p">)</span>
            <span class="n">wa</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">wa</span><span class="p">)</span>
            <span class="n">wb</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">wb</span><span class="p">)</span>
        <span class="c1">#h5_file.create_dataset(&#39;_comment&#39;, data=comments)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;eid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">eids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;nodes&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">nodes</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">pids</span><span class="p">)</span>
        <span class="c1">#print(&#39;x =&#39;, x)</span>
        <span class="c1">#print(&#39;g0 =&#39;, g0)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;g0&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">g0</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;offt&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">offt</span><span class="p">)</span>

        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;pa&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">pa</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;pb&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">pb</span><span class="p">)</span>

        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;wa&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">wa</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;wb&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">wb</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span>
                 <span class="n">x</span><span class="p">,</span> <span class="n">g0</span><span class="p">,</span> <span class="n">offt</span><span class="o">=</span><span class="s1">&#39;GGG&#39;</span><span class="p">,</span>
                 <span class="n">pa</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pb</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">wa</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CBAR card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        pid : int</span>
<span class="sd">            property id</span>
<span class="sd">        mid : int</span>
<span class="sd">            material id</span>
<span class="sd">        nids : List[int, int]</span>
<span class="sd">            node ids; connected grid points at ends A and B</span>
<span class="sd">        x : List[float, float, float]</span>
<span class="sd">            Components of orientation vector, from GA, in the displacement</span>
<span class="sd">            coordinate system at GA (default), or in the basic coordinate system</span>
<span class="sd">        g0 : int</span>
<span class="sd">            Alternate method to supply the orientation vector using grid</span>
<span class="sd">            point G0. Direction of is from GA to G0. is then transferred</span>
<span class="sd">            to End A</span>
<span class="sd">        offt : str; default=&#39;GGG&#39;</span>
<span class="sd">            Offset vector interpretation flag</span>
<span class="sd">        pa / pb : int; default=0</span>
<span class="sd">            Pin Flag at End A/B.  Releases the specified DOFs</span>
<span class="sd">        wa / wb : List[float, float, float]</span>
<span class="sd">            Components of offset vectors from the grid points to the end</span>
<span class="sd">            points of the axis of the shear center</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">LineElement</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="k">if</span> <span class="n">wa</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">wa</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">wa</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">wa</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">wb</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">wb</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">wb</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">wb</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">offt</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">offt</span> <span class="o">=</span> <span class="n">offt</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">)</span>
            <span class="n">offt</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">offt</span><span class="p">)</span> <span class="k">if</span> <span class="n">offt</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="k">else</span> <span class="n">offt</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">eid</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="n">pid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">g0</span> <span class="o">=</span> <span class="n">g0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ga</span> <span class="o">=</span> <span class="n">nids</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gb</span> <span class="o">=</span> <span class="n">nids</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">offt</span> <span class="o">=</span> <span class="n">offt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pa</span> <span class="o">=</span> <span class="n">pa</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pb</span> <span class="o">=</span> <span class="n">pb</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wa</span> <span class="o">=</span> <span class="n">wa</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wb</span> <span class="o">=</span> <span class="n">wb</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">g0_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">g0_vector</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="CBAR.validate"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.validate">[docs]</a>    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">g0</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;CBAR eid=</span><span class="si">%s</span><span class="s1">: x is None, so g0=</span><span class="si">%s</span><span class="s1"> must be an integer&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)):</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;CBAR eid=</span><span class="si">%s</span><span class="s1">: x=</span><span class="si">%s</span><span class="s1"> and g0=</span><span class="si">%s</span><span class="s1">, so x must be a list; type(x)=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">msg</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ga</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb</span><span class="p">]:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;G0=</span><span class="si">%s</span><span class="s1"> cannot be GA=</span><span class="si">%s</span><span class="s1"> or GB=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">g0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ga</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">offt</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">offt</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">42</span><span class="p">],</span> <span class="s1">&#39;invalid offt; offt=</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">offt</span>
            <span class="c1">#raise NotImplementedError(&#39;invalid offt; offt=%i&#39; % self.offt)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">offt</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">SyntaxError</span><span class="p">(</span><span class="s1">&#39;invalid offt expected a string of length 3 &#39;</span>
                              <span class="s1">&#39;offt=</span><span class="si">%r</span><span class="s1">; Type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">offt</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">offt</span><span class="p">)))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">offt</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="n">check_offt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="CBAR.add_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.add_card">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">baror</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CBAR card from ``BDF.add_card(...)``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        card : BDFCard()</span>
<span class="sd">            a BDFCard object</span>
<span class="sd">        beamor : BAROR() or None</span>
<span class="sd">            defines the defaults</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;eid&#39;</span><span class="p">)</span>
        <span class="n">pid_default</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="n">x1_default</span><span class="p">,</span> <span class="n">x2_default</span><span class="p">,</span> <span class="n">x3_default</span> <span class="o">=</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span>
        <span class="n">offt_default</span> <span class="o">=</span> <span class="s1">&#39;GGG&#39;</span>
        <span class="k">if</span> <span class="n">baror</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">baror</span><span class="o">.</span><span class="n">pid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">pid_default</span> <span class="o">=</span> <span class="n">baror</span><span class="o">.</span><span class="n">pid</span>
            <span class="k">if</span> <span class="n">baror</span><span class="o">.</span><span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">x1_default</span> <span class="o">=</span> <span class="n">baror</span><span class="o">.</span><span class="n">g0</span>
                <span class="n">x2_default</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">x3_default</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">x1_default</span><span class="p">,</span> <span class="n">x2_default</span><span class="p">,</span> <span class="n">x3_default</span> <span class="o">=</span> <span class="n">baror</span><span class="o">.</span><span class="n">x</span>
            <span class="n">offt_default</span> <span class="o">=</span> <span class="n">baror</span><span class="o">.</span><span class="n">offt</span>

        <span class="n">pid</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="n">pid_default</span><span class="p">)</span>
        <span class="n">ga</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;ga&#39;</span><span class="p">)</span>
        <span class="n">gb</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;gb&#39;</span><span class="p">)</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">g0</span> <span class="o">=</span> <span class="n">init_x_g0</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">x1_default</span><span class="p">,</span> <span class="n">x2_default</span><span class="p">,</span> <span class="n">x3_default</span><span class="p">)</span>

        <span class="c1"># doesn&#39;t exist in NX nastran</span>
        <span class="n">offt</span> <span class="o">=</span> <span class="n">integer_string_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;offt&#39;</span><span class="p">,</span> <span class="n">offt_default</span><span class="p">)</span>
        <span class="c1">#print(&#39;cls.offt = %r&#39; % (cls.offt))</span>

        <span class="n">pa</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;pa&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">pb</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;pb&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="n">wa</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;w1a&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
                       <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;w2a&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
                       <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="s1">&#39;w3a&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>

        <span class="n">wb</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">&#39;w1b&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
                       <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="s1">&#39;w2b&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
                       <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="s1">&#39;w3b&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">17</span><span class="p">,</span> <span class="s1">&#39;len(CBAR card) = </span><span class="si">%i</span><span class="se">\n</span><span class="s1">card=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">),</span> <span class="n">card</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">CBAR</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="p">[</span><span class="n">ga</span><span class="p">,</span> <span class="n">gb</span><span class="p">],</span> <span class="n">x</span><span class="p">,</span> <span class="n">g0</span><span class="p">,</span>
                    <span class="n">offt</span><span class="p">,</span> <span class="n">pa</span><span class="p">,</span> <span class="n">pb</span><span class="p">,</span> <span class="n">wa</span><span class="p">,</span> <span class="n">wb</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span></div>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_op2_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="c1">#: .. todo:: verify</span>
        <span class="c1">#data = [[eid,pid,ga,gb,pa,pb,w1a,w2a,w3a,w1b,w2b,w3b],[f,g0]]</span>
        <span class="c1">#data = [[eid,pid,ga,gb,pa,pb,w1a,w2a,w3a,w1b,w2b,w3b],[f,x1,x2,x3]]</span>

        <span class="n">main</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">flag</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">flag</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]:</span>
            <span class="n">g0</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
                          <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span>
                          <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">g0</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">x</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">eid</span> <span class="o">=</span> <span class="n">main</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">main</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">ga</span> <span class="o">=</span> <span class="n">main</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">gb</span> <span class="o">=</span> <span class="n">main</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="c1">#self.offt = str(data[4]) # GGG</span>
        <span class="n">offt</span> <span class="o">=</span> <span class="s1">&#39;GGG&#39;</span>  <span class="c1">#: .. todo:: offt can be an integer; translate to char</span>
        <span class="n">pa</span> <span class="o">=</span> <span class="n">main</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">pb</span> <span class="o">=</span> <span class="n">main</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>

        <span class="n">wa</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">main</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="n">main</span><span class="p">[</span><span class="mi">7</span><span class="p">],</span> <span class="n">main</span><span class="p">[</span><span class="mi">8</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>
        <span class="n">wb</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">main</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span> <span class="n">main</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="n">main</span><span class="p">[</span><span class="mi">11</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">CBAR</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="p">[</span><span class="n">ga</span><span class="p">,</span> <span class="n">gb</span><span class="p">],</span> <span class="n">x</span><span class="p">,</span> <span class="n">g0</span><span class="p">,</span>
                    <span class="n">offt</span><span class="p">,</span> <span class="n">pa</span><span class="p">,</span> <span class="n">pb</span><span class="p">,</span> <span class="n">wa</span><span class="p">,</span> <span class="n">wb</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xref</span><span class="p">):</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="n">unused_pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="n">unused_edges</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_edge_ids</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">xref</span><span class="p">:</span>  <span class="c1"># True</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;PBAR&#39;</span><span class="p">,</span> <span class="s1">&#39;PBARL&#39;</span><span class="p">,</span> <span class="s1">&#39;PBRSECT&#39;</span><span class="p">],</span> <span class="s1">&#39;</span><span class="si">%s%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="p">)</span>
            <span class="n">mid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Mid</span><span class="p">()</span>
            <span class="n">A</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Area</span><span class="p">()</span>
            <span class="n">nsm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Nsm</span><span class="p">()</span>
            <span class="n">mpl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MassPerLength</span><span class="p">()</span>
            <span class="n">L</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Length</span><span class="p">()</span>
            <span class="n">mass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Mass</span><span class="p">()</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mid</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="s1">&#39;mid=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">mid</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nsm</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;nsm=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nsm</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;eid=</span><span class="si">%s</span><span class="s1"> A=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">A</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;eid=</span><span class="si">%s</span><span class="s1"> L=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">L</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mpl</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;eid=</span><span class="si">%s</span><span class="s1"> mass_per_length=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">mpl</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mass</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;eid=</span><span class="si">%s</span><span class="s1"> mass=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">mass</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">L</span> <span class="o">&gt;</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s1">&#39;eid=</span><span class="si">%s</span><span class="s1"> L=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">L</span><span class="p">)</span>

<div class="viewcode-block" id="CBAR.Mid"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.Mid">[docs]</a>    <span class="k">def</span> <span class="nf">Mid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Element eid=</span><span class="si">%i</span><span class="s1"> has not been cross referenced.</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">Mid</span><span class="p">()</span></div>

<div class="viewcode-block" id="CBAR.Area"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.Area">[docs]</a>    <span class="k">def</span> <span class="nf">Area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Element eid=</span><span class="si">%i</span><span class="s1"> has not been cross referenced.</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">A</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">Area</span><span class="p">()</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">A</span></div>

<div class="viewcode-block" id="CBAR.J"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.J">[docs]</a>    <span class="k">def</span> <span class="nf">J</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Element eid=</span><span class="si">%i</span><span class="s1"> has not been cross referenced.</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">j</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">J</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;J=</span><span class="si">%r</span><span class="s1"> must be a float; CBAR eid=</span><span class="si">%s</span><span class="s1"> pid=</span><span class="si">%s</span><span class="s1"> pidType=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">j</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">j</span></div>

<div class="viewcode-block" id="CBAR.Length"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.Length">[docs]</a>    <span class="k">def</span> <span class="nf">Length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># TODO: consider w1a and w1b in the length formulation</span>
        <span class="n">L</span> <span class="o">=</span> <span class="n">norm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">())</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">L</span></div>

<div class="viewcode-block" id="CBAR.Nsm"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.Nsm">[docs]</a>    <span class="k">def</span> <span class="nf">Nsm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Element eid=</span><span class="si">%i</span><span class="s1"> has not been cross referenced.</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">nsm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">Nsm</span><span class="p">()</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nsm</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">nsm</span></div>

<div class="viewcode-block" id="CBAR.I1"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.I1">[docs]</a>    <span class="k">def</span> <span class="nf">I1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Element eid=</span><span class="si">%i</span><span class="s1"> has not been cross referenced.</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">I1</span><span class="p">()</span></div>

<div class="viewcode-block" id="CBAR.I2"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.I2">[docs]</a>    <span class="k">def</span> <span class="nf">I2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Element eid=</span><span class="si">%i</span><span class="s1"> has not been cross referenced.</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">I2</span><span class="p">()</span></div>

<div class="viewcode-block" id="CBAR.Centroid"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.Centroid">[docs]</a>    <span class="k">def</span> <span class="nf">Centroid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Element eid=</span><span class="si">%i</span><span class="s1"> has not been cross referenced.</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">())</span> <span class="o">/</span> <span class="mf">2.</span></div>

<div class="viewcode-block" id="CBAR.center_of_mass"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.center_of_mass">[docs]</a>    <span class="k">def</span> <span class="nf">center_of_mass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Centroid</span><span class="p">()</span></div>

<div class="viewcode-block" id="CBAR.cross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#if self.g0:</span>
        <span class="c1">#    self.x = nodes[self.g0].get_position() - nodes[self.ga].get_position()</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by CBAR eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ga</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gb</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">is_nx</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">offt</span> <span class="o">==</span> <span class="s1">&#39;GGG&#39;</span><span class="p">,</span> <span class="s1">&#39;NX only support offt=GGG; offt=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">offt</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">g0_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">g0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">g0_vector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">g0_vector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span></div>

<div class="viewcode-block" id="CBAR.safe_cross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.safe_cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">safe_cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by CBAR eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ga</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gb</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">safe_property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">g0_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">g0</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">g0_vector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">model</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Node=</span><span class="si">%s%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">g0</span><span class="p">,</span> <span class="n">msg</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">g0_vector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span></div>

<div class="viewcode-block" id="CBAR.uncross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.uncross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">uncross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes cross-reference links&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ga</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Ga</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Gb</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">g0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">G0</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">g0_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="CBAR.Ga"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.Ga">[docs]</a>    <span class="k">def</span> <span class="nf">Ga</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;gets Ga/G1&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ga</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span><span class="o">.</span><span class="n">nid</span></div>

<div class="viewcode-block" id="CBAR.Gb"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.Gb">[docs]</a>    <span class="k">def</span> <span class="nf">Gb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;gets Gb/G2&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span><span class="o">.</span><span class="n">nid</span></div>

<div class="viewcode-block" id="CBAR.G0"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.G0">[docs]</a>    <span class="k">def</span> <span class="nf">G0</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;gets G0&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0_ref</span><span class="o">.</span><span class="n">nid</span></div>

<div class="viewcode-block" id="CBAR.get_x_g0_defaults"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.get_x_g0_defaults">[docs]</a>    <span class="k">def</span> <span class="nf">get_x_g0_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        X and G0 compete for the same fields, so the method exists to</span>
<span class="sd">        make it easier to write the card</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        x_g0 : varies</span>
<span class="sd">            g0 : List[int, None, None]</span>
<span class="sd">            x : List[float, float, float]</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Used by CBAR and CBEAM</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">G0</span><span class="p">(),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="c1">#print(&#39;x =&#39;, self.x)</span>
        <span class="c1">#print(&#39;g0 =&#39;, self.g0)</span>
        <span class="c1">#x1 = set_blank_if_default(self.x[0], 0.0)</span>
        <span class="c1">#x2 = set_blank_if_default(self.x[1], 0.0)</span>
        <span class="c1">#x3 = set_blank_if_default(self.x[2], 0.0)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span></div>

<div class="viewcode-block" id="CBAR.get_axes"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.get_axes">[docs]</a>    <span class="k">def</span> <span class="nf">get_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the axes of a CBAR/CBEAM, while respecting the OFFT flag.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        :func:`pyNastran.bdf.cards.elements.bars.rotate_v_wa_wb` for a</span>
<span class="sd">        description of the OFFT flag.</span>

<span class="sd">        is_passed: bool</span>
<span class="sd">        out: (wa, wb, ihat, jhat, khat)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">is_failed</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">check_offt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">is_failed</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">ihat</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">yhat</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">zhat</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">eid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="p">(</span><span class="n">nid1</span><span class="p">,</span> <span class="n">nid2</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="n">node1</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">nid1</span><span class="p">]</span>
        <span class="n">node2</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">nid2</span><span class="p">]</span>
        <span class="n">xyz1</span> <span class="o">=</span> <span class="n">node1</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
        <span class="n">xyz2</span> <span class="o">=</span> <span class="n">node2</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>

        <span class="n">elem</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">eid</span><span class="p">]</span>
        <span class="n">pid_ref</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">pid_ref</span>
        <span class="k">if</span> <span class="n">pid_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">pid</span><span class="p">)</span>
        <span class="k">assert</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pid_ref</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">),</span> <span class="n">elem</span>

        <span class="n">is_failed</span><span class="p">,</span> <span class="p">(</span><span class="n">wa</span><span class="p">,</span> <span class="n">wb</span><span class="p">,</span> <span class="n">ihat</span><span class="p">,</span> <span class="n">yhat</span><span class="p">,</span> <span class="n">zhat</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_axes_by_nodes</span><span class="p">(</span>
            <span class="n">model</span><span class="p">,</span> <span class="n">pid_ref</span><span class="p">,</span> <span class="n">node1</span><span class="p">,</span> <span class="n">node2</span><span class="p">,</span> <span class="n">xyz1</span><span class="p">,</span> <span class="n">xyz2</span><span class="p">,</span> <span class="n">model</span><span class="o">.</span><span class="n">log</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">is_failed</span><span class="p">,</span> <span class="p">(</span><span class="n">wa</span><span class="p">,</span> <span class="n">wb</span><span class="p">,</span> <span class="n">ihat</span><span class="p">,</span> <span class="n">yhat</span><span class="p">,</span> <span class="n">zhat</span><span class="p">)</span></div>

<div class="viewcode-block" id="CBAR.get_axes_by_nodes"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.get_axes_by_nodes">[docs]</a>    <span class="k">def</span> <span class="nf">get_axes_by_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">pid_ref</span><span class="p">,</span> <span class="n">node1</span><span class="p">,</span> <span class="n">node2</span><span class="p">,</span> <span class="n">xyz1</span><span class="p">,</span> <span class="n">xyz2</span><span class="p">,</span> <span class="n">log</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the axes of a CBAR/CBEAM, while respecting the OFFT flag.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        :func:`pyNastran.bdf.cards.elements.bars.rotate_v_wa_wb` for a</span>
<span class="sd">        description of the OFFT flag.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#TODO: not integrated with CBAR yet...</span>

        <span class="n">is_failed</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="c1">#centroid = (n1 + n2) / 2.</span>
        <span class="c1">#i = n2 - n1</span>
        <span class="c1">#Li = norm(i)</span>
        <span class="c1">#ihat = i / Li</span>

        <span class="n">elem</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="c1">#(nid1, nid2) = elem.node_ids</span>
        <span class="c1">#node1 = model.nodes[nid1]</span>
        <span class="c1">#node2 = model.nodes[nid2]</span>
        <span class="c1">#xyz1 = node1.get_position()</span>
        <span class="c1">#xyz2 = node2.get_position()</span>

        <span class="c1"># wa/wb are not considered in i_offset</span>
        <span class="c1"># they are considered in ihat</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">xyz2</span> <span class="o">-</span> <span class="n">xyz1</span>
        <span class="n">Li</span> <span class="o">=</span> <span class="n">norm</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Li</span> <span class="o">==</span> <span class="mf">0.</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;xyz1=</span><span class="si">%s</span><span class="s1"> xyz2=</span><span class="si">%s</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">xyz1</span><span class="p">,</span> <span class="n">xyz2</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">i_offset</span> <span class="o">=</span> <span class="n">i</span> <span class="o">/</span> <span class="n">Li</span>

        <span class="n">unused_v</span><span class="p">,</span> <span class="n">wa</span><span class="p">,</span> <span class="n">wb</span><span class="p">,</span> <span class="n">xform</span> <span class="o">=</span> <span class="n">rotate_v_wa_wb</span><span class="p">(</span>
            <span class="n">model</span><span class="p">,</span> <span class="n">elem</span><span class="p">,</span>
            <span class="n">xyz1</span><span class="p">,</span> <span class="n">xyz2</span><span class="p">,</span> <span class="n">node1</span><span class="p">,</span> <span class="n">node2</span><span class="p">,</span>
            <span class="n">i_offset</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">Li</span><span class="p">,</span> <span class="n">log</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">wb</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># one or more of v, wa, wb are bad</span>

            <span class="c1"># xform is xform_offset...assuming None</span>
            <span class="n">ihat</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">yhat</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">zhat</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">return</span> <span class="n">is_failed</span><span class="p">,</span> <span class="p">(</span><span class="n">wa</span><span class="p">,</span> <span class="n">wb</span><span class="p">,</span> <span class="n">ihat</span><span class="p">,</span> <span class="n">yhat</span><span class="p">,</span> <span class="n">zhat</span><span class="p">)</span>

        <span class="n">ihat</span> <span class="o">=</span> <span class="n">xform</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span>
        <span class="n">yhat</span> <span class="o">=</span> <span class="n">xform</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">:]</span>
        <span class="n">zhat</span> <span class="o">=</span> <span class="n">xform</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="p">:]</span>

        <span class="n">is_failed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">is_failed</span><span class="p">,</span> <span class="p">(</span><span class="n">wa</span><span class="p">,</span> <span class="n">wb</span><span class="p">,</span> <span class="n">ihat</span><span class="p">,</span> <span class="n">yhat</span><span class="p">,</span> <span class="n">zhat</span><span class="p">)</span></div>

<div class="viewcode-block" id="CBAR.get_orientation_vector"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.get_orientation_vector">[docs]</a>    <span class="k">def</span> <span class="nf">get_orientation_vector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xyz</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Element offsets are defined in a Cartesian system located at the</span>
<span class="sd">        connecting grid point. The components of the offsets are always</span>
<span class="sd">        defined in units of translation, even if the displacement</span>
<span class="sd">        coordinate system is cylindrical or spherical.</span>

<span class="sd">        For example, in Figure 11-11, the grid point displacement</span>
<span class="sd">        coordinate system is cylindrical, and the offset vector is</span>
<span class="sd">        defined using Cartesian coordinates u1, u2, and u3 in units of</span>
<span class="sd">        translation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">xyz</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">g0</span><span class="p">]</span> <span class="o">-</span> <span class="n">xyz</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">Ga</span><span class="p">()]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">offt</span> <span class="o">==</span> <span class="s1">&#39;GGG&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">offt</span>
        <span class="k">return</span> <span class="n">v</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">node_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">Ga</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">Gb</span><span class="p">()]</span>

<div class="viewcode-block" id="CBAR.get_edge_ids"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.get_edge_ids">[docs]</a>    <span class="k">def</span> <span class="nf">get_edge_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span><span class="p">))]</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ga</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb</span><span class="p">]</span>

    <span class="nd">@nodes</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ga</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gb</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nodes_ref</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span><span class="p">]</span>

    <span class="nd">@nodes_ref</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">nodes_ref</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">values</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="n">values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<div class="viewcode-block" id="CBAR.raw_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.raw_fields">[docs]</a>    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the fields of the card in their full form&quot;&quot;&quot;</span>
        <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">x3</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_x_g0_defaults</span><span class="p">()</span>

        <span class="c1"># offt doesn&#39;t exist in NX nastran</span>
        <span class="n">offt</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">offt</span><span class="p">,</span> <span class="s1">&#39;GGG&#39;</span><span class="p">)</span>

        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;CBAR&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">Ga</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">Gb</span><span class="p">(),</span> <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span>
                       <span class="n">x3</span><span class="p">,</span> <span class="n">offt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pa</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pb</span><span class="p">]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wa</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wb</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="CBAR.repr_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.repr_fields">[docs]</a>    <span class="k">def</span> <span class="nf">repr_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the fields of the card in their reduced form&quot;&quot;&quot;</span>
        <span class="n">pa</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pa</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">pb</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pb</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="n">w1a</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wa</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">w2a</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wa</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">w3a</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wa</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">)</span>

        <span class="n">w1b</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wb</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">w2b</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wb</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">w3b</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wb</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">x3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_x_g0_defaults</span><span class="p">()</span>

        <span class="c1"># offt doesn&#39;t exist in NX nastran</span>
        <span class="n">offt</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">offt</span><span class="p">,</span> <span class="s1">&#39;GGG&#39;</span><span class="p">)</span>

        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;CBAR&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">Ga</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">Gb</span><span class="p">(),</span> <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span>
                       <span class="n">x3</span><span class="p">,</span> <span class="n">offt</span><span class="p">,</span> <span class="n">pa</span><span class="p">,</span> <span class="n">pb</span><span class="p">,</span> <span class="n">w1a</span><span class="p">,</span> <span class="n">w2a</span><span class="p">,</span> <span class="n">w3a</span><span class="p">,</span> <span class="n">w1b</span><span class="p">,</span> <span class="n">w2b</span><span class="p">,</span> <span class="n">w3b</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="CBAR.write_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.write_card">[docs]</a>    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">card</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repr_fields</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_8</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_16</span><span class="p">(</span><span class="n">card</span><span class="p">)</span></div>

<div class="viewcode-block" id="CBAR.write_card_16"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBAR.write_card_16">[docs]</a>    <span class="k">def</span> <span class="nf">write_card_16</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_double</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">card</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repr_fields</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_16</span><span class="p">(</span><span class="n">card</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="CBEAM3"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEAM3">[docs]</a><span class="k">class</span> <span class="nc">CBEAM3</span><span class="p">(</span><span class="n">LineElement</span><span class="p">):</span>  <span class="c1"># was CBAR</span>
    <span class="n">_properties</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;node_ids&#39;</span><span class="p">,</span> <span class="s1">&#39;nodes&#39;</span><span class="p">]</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Defines a three-node beam element</span>

<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="CBEAM3._init_from_empty"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEAM3._init_from_empty">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_init_from_empty</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">x</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
        <span class="n">g0</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="k">return</span> <span class="n">CBEAM3</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">g0</span><span class="p">,</span>
                      <span class="n">wa</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                      <span class="n">tw</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></div>

    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;CBEAM3&#39;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">g0</span><span class="p">,</span>
                 <span class="n">wa</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tw</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="n">LineElement</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">wa</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">wa</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">wb</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">wb</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">wc</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">wc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">tw</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">tw</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eid</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="n">pid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ga</span> <span class="o">=</span> <span class="n">nids</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gb</span> <span class="o">=</span> <span class="n">nids</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gc</span> <span class="o">=</span> <span class="n">nids</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">g0</span> <span class="o">=</span> <span class="n">g0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wa</span> <span class="o">=</span> <span class="n">wa</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wb</span> <span class="o">=</span> <span class="n">wb</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wc</span> <span class="o">=</span> <span class="n">wc</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tw</span> <span class="o">=</span> <span class="n">tw</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">=</span> <span class="n">s</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gc_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">g0_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="CBEAM3.add_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEAM3.add_card">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CBEAM3 card from ``BDF.add_card(...)``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        card : BDFCard()</span>
<span class="sd">            a BDFCard object</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;eid&#39;</span><span class="p">)</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="n">eid</span><span class="p">)</span>
        <span class="n">ga</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;ga&#39;</span><span class="p">)</span>
        <span class="n">gb</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;gb&#39;</span><span class="p">)</span>
        <span class="n">gc</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;gc&#39;</span><span class="p">)</span>

        <span class="c1"># card, eid, x1_default, x2_default, x3_default</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">g0</span> <span class="o">=</span> <span class="n">init_x_g0_cbeam3</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
        <span class="n">wa</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;w1a&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
                       <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;w2a&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
                       <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;w3a&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>

        <span class="n">wb</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;w1b&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
                       <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="s1">&#39;w2b&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
                       <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">&#39;w3b&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>

        <span class="n">wc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="s1">&#39;w1c&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
                       <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="s1">&#39;w2c&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
                       <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="s1">&#39;w3c&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>

        <span class="n">tw</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="s1">&#39;twa&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">),</span>
                       <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="s1">&#39;twb&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">),</span>
                       <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;twc&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>

        <span class="c1"># TODO: what are the defaults?</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="s1">&#39;sa&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>
                      <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="s1">&#39;sb&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>
                      <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="s1">&#39;sc&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">24</span><span class="p">,</span> <span class="s1">&#39;len(CBEAM3 card) = </span><span class="si">%i</span><span class="se">\n</span><span class="s1">card=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">),</span> <span class="n">card</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">CBEAM3</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="p">[</span><span class="n">ga</span><span class="p">,</span> <span class="n">gb</span><span class="p">,</span> <span class="n">gc</span><span class="p">],</span> <span class="n">x</span><span class="p">,</span> <span class="n">g0</span><span class="p">,</span>
                      <span class="n">wa</span><span class="o">=</span><span class="n">wa</span><span class="p">,</span> <span class="n">wb</span><span class="o">=</span><span class="n">wb</span><span class="p">,</span> <span class="n">wc</span><span class="o">=</span><span class="n">wc</span><span class="p">,</span> <span class="n">tw</span><span class="o">=</span><span class="n">tw</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">s</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span></div>

<div class="viewcode-block" id="CBEAM3.cross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEAM3.cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by CBEAM3 eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ga</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gb</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gc_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gc</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">g0_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">g0</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CBEAM3.safe_cross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEAM3.safe_cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">safe_cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by CBEAM3 eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ga</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gb</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gc_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gc</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">safe_property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">g0_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">g0</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CBEAM3.uncross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEAM3.uncross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">uncross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes cross-reference links&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ga</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Ga</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Gb</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Gc</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0_ref</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">g0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">G0</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">g0_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gc_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="CBEAM3.center_of_mass"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEAM3.center_of_mass">[docs]</a>    <span class="k">def</span> <span class="nf">center_of_mass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span></div>
<div class="viewcode-block" id="CBEAM3.Centroid"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEAM3.Centroid">[docs]</a>    <span class="k">def</span> <span class="nf">Centroid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span></div>
<div class="viewcode-block" id="CBEAM3.MassPerLength"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEAM3.MassPerLength">[docs]</a>    <span class="k">def</span> <span class="nf">MassPerLength</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mf">0.</span></div>

<div class="viewcode-block" id="CBEAM3.Length"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEAM3.Length">[docs]</a>    <span class="k">def</span> <span class="nf">Length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        We&#39;ll fit a 2nd order polynomial to the x, y, and z coefficients.</span>
<span class="sd">        We know GA (t=0), GB(t=1), and GC (t=0.5 assumed).</span>
<span class="sd">        This gives us A, for:</span>
<span class="sd">         - y1 = a1*t^2 = b1*t + c1</span>

<span class="sd">        where:</span>
<span class="sd">         - yi is for the x, y, and z terms</span>

<span class="sd">        [xa, xb, xc] = [A][a1, b1, c1].T</span>
<span class="sd">        [ya, yb, yc] = [A][a2, b2, c2].T</span>
<span class="sd">        [za, zb, zc] = [A][a3, b3, c3].T</span>

<span class="sd">        [a1, b1, c1] = [A^-1][[xa, xb, xc].T</span>
<span class="sd">        A = [0.  , 0.  , 1.  ]</span>
<span class="sd">            [1.  , 1.  , 1.  ]</span>
<span class="sd">            [0.25, 0.5 , 1.  ]</span>
<span class="sd">        Ainv = [ 2.,  2., -4.]</span>
<span class="sd">               [-3., -1.,  4.]</span>
<span class="sd">               [ 1.,  0.,  0.]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xyza</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">wa</span>
        <span class="n">xyzb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">wb</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">xyzc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gc_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">wc</span>
            <span class="n">xa</span><span class="p">,</span> <span class="n">ya</span><span class="p">,</span> <span class="n">za</span> <span class="o">=</span> <span class="n">xyza</span>
            <span class="n">length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_integrate</span><span class="p">(</span>
                <span class="n">xyza</span> <span class="o">-</span> <span class="n">xa</span><span class="p">,</span>
                <span class="n">xyzb</span> <span class="o">-</span> <span class="n">ya</span><span class="p">,</span>
                <span class="n">xyzc</span> <span class="o">-</span> <span class="n">za</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">length</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">xyzb</span> <span class="o">-</span> <span class="n">xyza</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">length</span></div>

<div class="viewcode-block" id="CBEAM3._integrate"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEAM3._integrate">[docs]</a>    <span class="k">def</span> <span class="nf">_integrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xabc</span><span class="p">,</span> <span class="n">yabc</span><span class="p">,</span> <span class="n">zabc</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        We integrate:</span>
<span class="sd">         y = sqrt(x&#39;(t)^2 + y&#39;(t)^2 + z&#39;(t)^2)*dt from 0 to 1</span>
<span class="sd">         y = sqrt(r)</span>

<span class="sd">        /where:</span>
<span class="sd">         - x(t) = a*t^2 + b*t + c</span>
<span class="sd">         - x&#39;(t) = 2*a*t + b</span>
<span class="sd">         - x&#39;(t)^2 = 4*(a*t)^2 + 2*a*b*t + b^2</span>

<span class="sd">        expanding terms:</span>
<span class="sd">         - x&#39;(t)^2 = 4*(a1*t)^2 + 2*a1*b1*t + b1^2</span>
<span class="sd">         - y&#39;(t)^2 = 4*(a2*t)^2 + 2*a2*b2*t + b2^2</span>
<span class="sd">         - z&#39;(t)^2 = 4*(a3*t)^2 + 2*a3*b3*t + b3^2</span>

<span class="sd">        grouping terms:</span>
<span class="sd">         - a = 4 * (a1 ** 2 + a2 ** 2 + a3 ** 2) * t^2</span>
<span class="sd">         - b = 2 * (a1 * b1 + a2 * b2 + a3 * b3) * t</span>
<span class="sd">         - c = b1 ** 2 + b2 ** 2 + b3 ** 2</span>
<span class="sd">         - y = integrate(sqrt(a*t^2 + b*t + t), t, 0., 1.)</span>
<span class="sd">        Looking up integral formulas, we get a really complicated integral.</span>

<span class="sd">        for a = 0 (and rewriting):</span>
<span class="sd">         - y = integrate(sqrt(a*t + b), t, 0., 1.)</span>
<span class="sd">         - y = (2*b/3a + 2*t/3) * sqrt(at + b)</span>
<span class="sd">        or:</span>
<span class="sd">         - y = (2*c/3b + 2*t/3) * sqrt(b*t + c)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#print(xabc, yabc, zabc)</span>
        <span class="n">Ainv</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
            <span class="p">[</span><span class="mf">2.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="o">-</span><span class="mf">4.</span><span class="p">],</span>
            <span class="p">[</span><span class="o">-</span><span class="mf">3.</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">4.</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span>
        <span class="p">])</span>
        <span class="n">a1</span><span class="p">,</span> <span class="n">b1</span><span class="p">,</span> <span class="n">unused_c1</span> <span class="o">=</span> <span class="n">Ainv</span> <span class="o">@</span> <span class="n">xabc</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">a2</span><span class="p">,</span> <span class="n">b2</span><span class="p">,</span> <span class="n">unused_c2</span> <span class="o">=</span> <span class="n">Ainv</span> <span class="o">@</span> <span class="n">yabc</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">a3</span><span class="p">,</span> <span class="n">b3</span><span class="p">,</span> <span class="n">unused_c3</span> <span class="o">=</span> <span class="n">Ainv</span> <span class="o">@</span> <span class="n">zabc</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="c1">#print(x, y, z)</span>
        <span class="c1">#print(&#39;---------------------&#39;)</span>
        <span class="c1">#print(a1, a2, a3)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="p">(</span><span class="n">a1</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">a2</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">a3</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="n">a1</span> <span class="o">*</span> <span class="n">b1</span> <span class="o">+</span> <span class="n">a2</span> <span class="o">*</span> <span class="n">b2</span> <span class="o">+</span> <span class="n">a3</span> <span class="o">*</span> <span class="n">b3</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">c</span> <span class="o">=</span> <span class="p">(</span><span class="n">b1</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">b2</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">b3</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c1">#print(a, b, c)</span>
        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="mf">0.</span><span class="p">):</span>
            <span class="n">length</span> <span class="o">=</span> <span class="n">c</span> <span class="o">**</span> <span class="mf">0.5</span>
        <span class="k">elif</span> <span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
            <span class="c1">#print(self.ga_ref)</span>
            <span class="c1">#print(self.gb_ref)</span>
            <span class="c1">#print(self.gc_ref)</span>
            <span class="c1"># dx = self.gb_ref.get_position() - self.ga_ref.get_position()</span>
            <span class="c1">#coeff = ((2 * b) / (3 * a) + (2 * t) / 3)</span>
            <span class="c1">#length = coeff * np.sqrt(a*t + b)</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="p">[</span><span class="n">xabc</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">yabc</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">zabc</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
            <span class="n">length</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">dx</span><span class="p">)</span>
            <span class="c1">#print(&#39;dx=&#39;, dx, length)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="mf">1.</span>
            <span class="n">at2btc</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">t</span> <span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">t</span> <span class="o">+</span> <span class="n">c</span>
            <span class="n">length</span> <span class="o">=</span> <span class="p">(</span>
                <span class="p">(</span><span class="n">b</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">a</span> <span class="o">*</span> <span class="n">t</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">a</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">at2btc</span><span class="p">)</span> <span class="o">+</span>
                <span class="p">(</span><span class="mi">4</span> <span class="o">*</span> <span class="n">a</span> <span class="o">*</span> <span class="n">c</span> <span class="o">-</span> <span class="n">b</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">8</span> <span class="o">*</span> <span class="n">a</span> <span class="o">**</span> <span class="mf">1.5</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
                    <span class="mi">2</span><span class="o">*</span><span class="n">a</span><span class="o">*</span><span class="n">t</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">a</span><span class="o">*</span><span class="p">(</span><span class="n">at2btc</span><span class="p">)))</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">length</span></div>

<div class="viewcode-block" id="CBEAM3.Area"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEAM3.Area">[docs]</a>    <span class="k">def</span> <span class="nf">Area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Element eid=</span><span class="si">%i</span><span class="s1"> has not been cross referenced.</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">A</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">Area</span><span class="p">()</span>

        <span class="n">xyza</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">wa</span>
        <span class="n">xyzb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">wb</span>
        <span class="n">Aa</span><span class="p">,</span> <span class="n">Ab</span><span class="p">,</span> <span class="n">Ac</span> <span class="o">=</span> <span class="n">A</span> <span class="c1"># self.pid_ref.area</span>
        <span class="n">L</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Length</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">xa</span><span class="p">,</span> <span class="n">ya</span><span class="p">,</span> <span class="n">za</span> <span class="o">=</span> <span class="n">xyza</span>
            <span class="n">xb</span><span class="p">,</span> <span class="n">yb</span><span class="p">,</span> <span class="n">zb</span> <span class="o">=</span> <span class="n">xyzb</span>
            <span class="n">xc</span><span class="p">,</span> <span class="n">yc</span><span class="p">,</span> <span class="n">zc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gc_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">wc</span>
            <span class="n">area</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_integrate</span><span class="p">(</span>
                <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">Aa</span> <span class="o">*</span> <span class="n">xa</span><span class="p">,</span> <span class="n">Ab</span> <span class="o">*</span> <span class="n">xb</span><span class="p">,</span> <span class="n">Ac</span> <span class="o">*</span> <span class="n">xc</span><span class="p">])</span> <span class="o">/</span> <span class="n">L</span><span class="p">,</span>
                <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">Aa</span> <span class="o">*</span> <span class="n">ya</span><span class="p">,</span> <span class="n">Ab</span> <span class="o">*</span> <span class="n">yb</span><span class="p">,</span> <span class="n">Ac</span> <span class="o">*</span> <span class="n">yc</span><span class="p">])</span> <span class="o">/</span> <span class="n">L</span><span class="p">,</span>
                <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">Aa</span> <span class="o">*</span> <span class="n">za</span><span class="p">,</span> <span class="n">Ab</span> <span class="o">*</span> <span class="n">zb</span><span class="p">,</span> <span class="n">Ac</span> <span class="o">*</span> <span class="n">zc</span><span class="p">])</span> <span class="o">/</span> <span class="n">L</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">area</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">xyzb</span><span class="o">*</span><span class="n">Ab</span> <span class="o">-</span> <span class="n">xyza</span><span class="o">*</span><span class="n">Aa</span><span class="p">)</span> <span class="o">/</span> <span class="n">L</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">area</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="n">area</span>
        <span class="k">return</span> <span class="n">area</span></div>

<div class="viewcode-block" id="CBEAM3.Volume"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEAM3.Volume">[docs]</a>    <span class="k">def</span> <span class="nf">Volume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Element eid=</span><span class="si">%i</span><span class="s1"> has not been cross referenced.</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">A</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">Area</span><span class="p">()</span>

        <span class="n">xyza</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">wa</span>
        <span class="n">xyzb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">wb</span>
        <span class="n">Aa</span><span class="p">,</span> <span class="n">Ab</span><span class="p">,</span> <span class="n">Ac</span> <span class="o">=</span> <span class="n">A</span> <span class="c1"># self.pid_ref.area</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">xa</span><span class="p">,</span> <span class="n">ya</span><span class="p">,</span> <span class="n">za</span> <span class="o">=</span> <span class="n">xyza</span>
            <span class="n">xb</span><span class="p">,</span> <span class="n">yb</span><span class="p">,</span> <span class="n">zb</span> <span class="o">=</span> <span class="n">xyzb</span>
            <span class="n">xc</span><span class="p">,</span> <span class="n">yc</span><span class="p">,</span> <span class="n">zc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gc_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">wc</span>
            <span class="n">volume</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_integrate</span><span class="p">(</span>
                <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">Aa</span> <span class="o">*</span> <span class="n">xa</span><span class="p">,</span> <span class="n">Ab</span> <span class="o">*</span> <span class="n">xb</span><span class="p">,</span> <span class="n">Ac</span> <span class="o">*</span> <span class="n">xc</span><span class="p">]),</span>
                <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">Aa</span> <span class="o">*</span> <span class="n">ya</span><span class="p">,</span> <span class="n">Ab</span> <span class="o">*</span> <span class="n">yb</span><span class="p">,</span> <span class="n">Ac</span> <span class="o">*</span> <span class="n">yc</span><span class="p">]),</span>
                <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">Aa</span> <span class="o">*</span> <span class="n">za</span><span class="p">,</span> <span class="n">Ab</span> <span class="o">*</span> <span class="n">zb</span><span class="p">,</span> <span class="n">Ac</span> <span class="o">*</span> <span class="n">zc</span><span class="p">]),</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">volume</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">xyzb</span><span class="o">*</span><span class="n">Ab</span> <span class="o">-</span> <span class="n">xyza</span><span class="o">*</span><span class="n">Aa</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">volume</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="n">volume</span>
        <span class="k">return</span> <span class="n">volume</span></div>

<div class="viewcode-block" id="CBEAM3.Nsm"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEAM3.Nsm">[docs]</a>    <span class="k">def</span> <span class="nf">Nsm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Element eid=</span><span class="si">%i</span><span class="s1"> has not been cross referenced.</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">nsm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">Nsm</span><span class="p">()</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nsm</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="n">nsm</span>

        <span class="n">xyza</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">wa</span>
        <span class="n">xyzb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">wb</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">xa</span><span class="p">,</span> <span class="n">ya</span><span class="p">,</span> <span class="n">za</span> <span class="o">=</span> <span class="n">xyza</span>
            <span class="n">xb</span><span class="p">,</span> <span class="n">yb</span><span class="p">,</span> <span class="n">zb</span> <span class="o">=</span> <span class="n">xyzb</span>
            <span class="n">xc</span><span class="p">,</span> <span class="n">yc</span><span class="p">,</span> <span class="n">zc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gc_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">wc</span>
            <span class="n">nsma</span><span class="p">,</span> <span class="n">nsmb</span><span class="p">,</span> <span class="n">nsmc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">nsm</span>
            <span class="n">L</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Length</span><span class="p">()</span>
            <span class="n">nsm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_integrate</span><span class="p">(</span>
                <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">nsma</span> <span class="o">*</span> <span class="n">xa</span><span class="p">,</span> <span class="n">nsmb</span> <span class="o">*</span> <span class="n">xb</span><span class="p">,</span> <span class="n">nsmc</span> <span class="o">*</span> <span class="n">xc</span><span class="p">])</span> <span class="o">/</span> <span class="n">L</span><span class="p">,</span>
                <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">nsma</span> <span class="o">*</span> <span class="n">ya</span><span class="p">,</span> <span class="n">nsmb</span> <span class="o">*</span> <span class="n">yb</span><span class="p">,</span> <span class="n">nsmc</span> <span class="o">*</span> <span class="n">yc</span><span class="p">])</span> <span class="o">/</span> <span class="n">L</span><span class="p">,</span>
                <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">nsma</span> <span class="o">*</span> <span class="n">za</span><span class="p">,</span> <span class="n">nsmb</span> <span class="o">*</span> <span class="n">zb</span><span class="p">,</span> <span class="n">nsmc</span> <span class="o">*</span> <span class="n">zc</span><span class="p">])</span> <span class="o">/</span> <span class="n">L</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">nsm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">xyzb</span><span class="o">*</span><span class="n">nsmb</span> <span class="o">-</span> <span class="n">xyza</span><span class="o">*</span><span class="n">nsmb</span><span class="p">)</span> <span class="o">/</span> <span class="n">L</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nsm</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="n">nsm</span>
        <span class="k">return</span> <span class="n">nsm</span></div>

<div class="viewcode-block" id="CBEAM3.Ga"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEAM3.Ga">[docs]</a>    <span class="k">def</span> <span class="nf">Ga</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;gets node 1&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ga</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span><span class="o">.</span><span class="n">nid</span></div>

<div class="viewcode-block" id="CBEAM3.Gb"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEAM3.Gb">[docs]</a>    <span class="k">def</span> <span class="nf">Gb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;gets node 2&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span><span class="o">.</span><span class="n">nid</span></div>

<div class="viewcode-block" id="CBEAM3.Gc"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEAM3.Gc">[docs]</a>    <span class="k">def</span> <span class="nf">Gc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;gets the node between node 1 and 2&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gc_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">gc</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">gc_ref</span><span class="o">.</span><span class="n">nid</span></div>

<div class="viewcode-block" id="CBEAM3.G0"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEAM3.G0">[docs]</a>    <span class="k">def</span> <span class="nf">G0</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;gets the orientation vector node&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0_ref</span><span class="o">.</span><span class="n">nid</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ga</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gc</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">node_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">Ga</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">Gb</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">Gc</span><span class="p">()]</span>


<div class="viewcode-block" id="CBEAM3.get_edge_ids"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEAM3.get_edge_ids">[docs]</a>    <span class="k">def</span> <span class="nf">get_edge_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">Ga</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">Gb</span><span class="p">()]</span>
        <span class="k">return</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">nids</span><span class="p">))]</span></div>

<div class="viewcode-block" id="CBEAM3.get_x_g0_defaults"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEAM3.get_x_g0_defaults">[docs]</a>    <span class="k">def</span> <span class="nf">get_x_g0_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        X and G0 compete for the same fields, so the method exists to</span>
<span class="sd">        make it easier to write the card</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        x_g0 : varies</span>
<span class="sd">            g0 : List[int, None, None]</span>
<span class="sd">            x : List[float, float, float]</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Used by CBAR, CBEAM, and CBEAM3</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">G0</span><span class="p">(),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span></div>

<div class="viewcode-block" id="CBEAM3.raw_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEAM3.raw_fields">[docs]</a>    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">x3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_x_g0_defaults</span><span class="p">()</span>
        <span class="n">ga</span><span class="p">,</span> <span class="n">gb</span><span class="p">,</span> <span class="n">gc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;CBEAM3&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">(),</span> <span class="n">ga</span><span class="p">,</span> <span class="n">gb</span><span class="p">,</span> <span class="n">gc</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">x3</span><span class="p">]</span> <span class="o">+</span> \
                  <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wa</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wb</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wc</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tw</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="CBEAM3.repr_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEAM3.repr_fields">[docs]</a>    <span class="k">def</span> <span class="nf">repr_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">w1a</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wa</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">w2a</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wa</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">w3a</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wa</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">w1b</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wb</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">w2b</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wb</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">w3b</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wb</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">w1c</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">w2c</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wc</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">w3c</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wc</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">)</span>

        <span class="n">twa</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tw</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">twb</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tw</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">twc</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tw</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">)</span>

        <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">x3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_x_g0_defaults</span><span class="p">()</span>
        <span class="n">ga</span><span class="p">,</span> <span class="n">gb</span><span class="p">,</span> <span class="n">gc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;CBEAM3&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">(),</span> <span class="n">ga</span><span class="p">,</span> <span class="n">gb</span><span class="p">,</span> <span class="n">gc</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">x3</span><span class="p">,</span>
                       <span class="n">w1a</span><span class="p">,</span> <span class="n">w2a</span><span class="p">,</span> <span class="n">w3a</span><span class="p">,</span> <span class="n">w1b</span><span class="p">,</span> <span class="n">w2b</span><span class="p">,</span> <span class="n">w3b</span><span class="p">,</span> <span class="n">w1c</span><span class="p">,</span> <span class="n">w2c</span><span class="p">,</span> <span class="n">w3c</span><span class="p">,</span>
                       <span class="n">twa</span><span class="p">,</span> <span class="n">twb</span><span class="p">,</span> <span class="n">twc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="CBEAM3.write_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEAM3.write_card">[docs]</a>    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">card</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repr_fields</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_8</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_16</span><span class="p">(</span><span class="n">card</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xref</span><span class="p">):</span>
        <span class="n">unused_edges</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_edge_ids</span><span class="p">()</span></div>

<div class="viewcode-block" id="init_x_g0_cbeam3"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.init_x_g0_cbeam3">[docs]</a><span class="k">def</span> <span class="nf">init_x_g0_cbeam3</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">x1_default</span><span class="p">,</span> <span class="n">x2_default</span><span class="p">,</span> <span class="n">x3_default</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;reads the x/g0 field for the CBEAM3&quot;&quot;&quot;</span>
    <span class="n">field6</span> <span class="o">=</span> <span class="n">integer_double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;g0_x1&#39;</span><span class="p">,</span> <span class="n">x1_default</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field6</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
        <span class="n">g0</span> <span class="o">=</span> <span class="n">field6</span>
        <span class="n">x</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field6</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
        <span class="n">g0</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">field6</span><span class="p">,</span>
                      <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;x2&#39;</span><span class="p">,</span> <span class="n">x2_default</span><span class="p">),</span>
                      <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;x3&#39;</span><span class="p">,</span> <span class="n">x3_default</span><span class="p">)],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">norm</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;G0 vector defining plane 1 is not defined.</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;G0 = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">g0</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;X  = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">x</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;field5 on </span><span class="si">%s</span><span class="s1"> (G0/X1) is the wrong type...id=</span><span class="si">%s</span><span class="s1"> field5=</span><span class="si">%s</span><span class="s1"> &#39;</span>
               <span class="s1">&#39;type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">card</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">eid</span><span class="p">,</span> <span class="n">field6</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">field6</span><span class="p">)))</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">g0</span></div>


<div class="viewcode-block" id="CBEND"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEND">[docs]</a><span class="k">class</span> <span class="nc">CBEND</span><span class="p">(</span><span class="n">LineElement</span><span class="p">):</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;CBEND&#39;</span>
    <span class="n">_field_map</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;eid&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="s1">&#39;ga&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span><span class="s1">&#39;gb&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span><span class="s1">&#39;geom&#39;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">_properties</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;node_ids&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_update_field_helper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">g0</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Field </span><span class="si">%r</span><span class="s1">=</span><span class="si">%r</span><span class="s1"> is an invalid </span><span class="si">%s</span><span class="s1"> entry.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Field </span><span class="si">%r</span><span class="s1">=</span><span class="si">%r</span><span class="s1"> is an invalid </span><span class="si">%s</span><span class="s1"> entry.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">))</span>

<div class="viewcode-block" id="CBEND._init_from_empty"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEND._init_from_empty">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_init_from_empty</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
        <span class="n">g0</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="n">x</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">geom</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">CBEND</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">g0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">geom</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">g0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">geom</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a CBEND card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        eid : int</span>
<span class="sd">            element id</span>
<span class="sd">        pid : int</span>
<span class="sd">            property id (PBEND)</span>
<span class="sd">        nids : List[int, int]</span>
<span class="sd">            node ids; connected grid points at ends A and B</span>
<span class="sd">        g0 : int</span>
<span class="sd">            ???</span>
<span class="sd">        x : List[float, float, float]</span>
<span class="sd">            ???</span>
<span class="sd">        geom : int</span>
<span class="sd">            1 : The center of curvature lies on the line AO (or its extension) or vector v.</span>
<span class="sd">            2 : The tangent of centroid arc at end A is parallel to line AO or vector v.</span>
<span class="sd">                Point O (or vector v) and the arc must be on the same side of the chord AB.</span>
<span class="sd">            3 : The bend radius (RB) is specified on the PBEND entry:</span>
<span class="sd">                Points A, B, and O (or vector v) define a plane parallel or coincident</span>
<span class="sd">                with the plane of the element arc. Point O (or vector v) lies on the</span>
<span class="sd">                opposite side of line AB from the center of the curvature.</span>
<span class="sd">            4 : THETAB is specified on the PBEND entry. Points A, B, and O (or vector v)</span>
<span class="sd">                define a plane parallel or coincident with the plane of the element arc.</span>
<span class="sd">                Point O (or vector v) lies on the opposite side of line AB from the center</span>
<span class="sd">                of curvature.</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">LineElement</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eid</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="n">pid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ga</span> <span class="o">=</span> <span class="n">nids</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gb</span> <span class="o">=</span> <span class="n">nids</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">g0</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;g0=</span><span class="si">%s</span><span class="s1"> x=</span><span class="si">%s</span><span class="s1">; one must not be None&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">g0</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">g0</span> <span class="o">=</span> <span class="n">g0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">geom</span> <span class="o">=</span> <span class="n">geom</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">geom</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s1">&#39;geom is invalid geom=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">geom</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">g0</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_stats</span><span class="p">()</span>

<div class="viewcode-block" id="CBEND.add_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEND.add_card">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CBEND card from ``BDF.add_card(...)``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        card : BDFCard()</span>
<span class="sd">            a BDFCard object</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;eid&#39;</span><span class="p">)</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="n">eid</span><span class="p">)</span>
        <span class="n">ga</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;ga&#39;</span><span class="p">)</span>
        <span class="n">gb</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;gb&#39;</span><span class="p">)</span>
        <span class="n">x1_g0</span> <span class="o">=</span> <span class="n">integer_double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;x1_g0&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x1_g0</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="n">g0</span> <span class="o">=</span> <span class="n">x1_g0</span>
            <span class="n">x</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x1_g0</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
            <span class="n">g0</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;x1&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
                          <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;x2&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
                          <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;x3&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">norm</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;G0 vector defining plane 1 is not defined.</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;G0 = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">g0</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;X  = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">x</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;invalid x1Go=</span><span class="si">%r</span><span class="s1"> on CBEND&#39;</span> <span class="o">%</span> <span class="n">x1_g0</span><span class="p">)</span>
        <span class="n">geom</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;geom&#39;</span><span class="p">)</span>

        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">==</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;len(CBEND card) = </span><span class="si">%i</span><span class="se">\n</span><span class="s1">card=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">),</span> <span class="n">card</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">CBEND</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="p">[</span><span class="n">ga</span><span class="p">,</span> <span class="n">gb</span><span class="p">],</span> <span class="n">g0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">geom</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span></div>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_op2_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="c1">#data = [[eid, pid, ga, gb, geom], [f, x1, x2, x3]]</span>
        <span class="c1">#data = [[eid, pid, ga, gb, geom], [f, g0]]</span>

        <span class="n">main</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">flag</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">flag</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]:</span>
            <span class="n">g0</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
                          <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span>
                          <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">g0</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">x</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">eid</span> <span class="o">=</span> <span class="n">main</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">main</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">ga</span> <span class="o">=</span> <span class="n">main</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">gb</span> <span class="o">=</span> <span class="n">main</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">geom</span> <span class="o">=</span> <span class="n">main</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">CBEND</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="p">[</span><span class="n">ga</span><span class="p">,</span> <span class="n">gb</span><span class="p">],</span> <span class="n">g0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">geom</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

<div class="viewcode-block" id="CBEND.get_x_g0_defaults"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEND.get_x_g0_defaults">[docs]</a>    <span class="k">def</span> <span class="nf">get_x_g0_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="c1">#print(&#39;x =&#39;, self.x)</span>
        <span class="c1">#print(&#39;g0 =&#39;, self.g0)</span>
        <span class="c1">#x1 = set_blank_if_default(self.x[0], 0.0)</span>
        <span class="c1">#x2 = set_blank_if_default(self.x[1], 0.0)</span>
        <span class="c1">#x3 = set_blank_if_default(self.x[2], 0.0)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span></div>

<div class="viewcode-block" id="CBEND.Length"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEND.Length">[docs]</a>    <span class="k">def</span> <span class="nf">Length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># TODO: consider w1a and w1b in the length formulation</span>
        <span class="n">L</span> <span class="o">=</span> <span class="n">norm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">())</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">L</span></div>

        <span class="c1">#prop = self.pid_ref</span>
        <span class="c1">#bend_radius = prop.rb</span>
        <span class="c1">#theta_bend = prop.thetab</span>
        <span class="c1">#length_oa = None</span>
        <span class="c1">#if self.geom == 1:</span>
            <span class="c1">#The center of curvature lies on the line AO</span>
            <span class="c1">#(or its extension) or vector .</span>
            <span class="c1">#pass</span>
        <span class="c1">#elif self.geom == 2:</span>
            <span class="c1"># The tangent of centroid arc at end A is</span>
            <span class="c1"># parallel to line AO or vector . Point O (or</span>
            <span class="c1"># vector) and the arc must be on the</span>
            <span class="c1"># same side of the chord .</span>
            <span class="c1">#pass</span>
        <span class="c1">#elif self.geom == 3:</span>
            <span class="c1"># The bend radius (RB) is specified on the</span>
            <span class="c1"># PBEND entry: Points A, B, and O (or</span>
            <span class="c1"># vector ) define a plane parallel or</span>
            <span class="c1"># coincident with the plane of the element</span>
            <span class="c1"># arc. Point O (or vector ) lies on the</span>
            <span class="c1"># opposite side of line AB from the center of</span>
            <span class="c1"># the curvature.</span>
            <span class="c1">#pass</span>
        <span class="c1">#elif self.geom == 4:</span>
            <span class="c1"># THETAB is specified on the PBEND entry.</span>
            <span class="c1"># Points A, B, and O (or vector ) define a</span>
            <span class="c1"># plane parallel or coincident with the plane</span>
            <span class="c1"># of the element arc. Point O (or vector )</span>
            <span class="c1"># lies on the opposite side of line AB from the</span>
            <span class="c1"># center of curvature.</span>
            <span class="c1">#pass</span>
        <span class="c1">#else:</span>
            <span class="c1">#raise RuntimeError(&#39;geom=%r is not supported on the CBEND&#39; % self.geom)</span>
        <span class="c1">#return L</span>

<div class="viewcode-block" id="CBEND.validate"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEND.validate">[docs]</a>    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">g0</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">),</span> <span class="s1">&#39;g0=</span><span class="si">%s</span><span class="s1"> must be an integer&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">g0</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ga</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb</span><span class="p">]:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;G0=</span><span class="si">%s</span><span class="s1"> cannot be GA=</span><span class="si">%s</span><span class="s1"> or GB=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">g0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ga</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span></div>
        <span class="c1">#BEND ELEMENT %1 BEND RADIUS OR ARC ANGLE INCONSISTENT</span>
        <span class="c1">#WITH GEOM OPTION</span>
        <span class="c1">#RB is nonzero on PBEND entry when GEOM option on CBEND entry is 1,</span>
        <span class="c1">#2, or 4 or RB is zero when GEOM option is 3 or AB is nonzero when</span>
        <span class="c1">#when GEOM option is 1, 2, or 3 or B is &lt;= 0. or &gt; 180, when</span>
        <span class="c1">#GEOM option is 4.</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">node_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">Ga</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">Gb</span><span class="p">()]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ga</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb</span><span class="p">]</span>

    <span class="nd">@nodes</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ga</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gb</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<div class="viewcode-block" id="CBEND.Ga"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEND.Ga">[docs]</a>    <span class="k">def</span> <span class="nf">Ga</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ga</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span><span class="o">.</span><span class="n">nid</span></div>

<div class="viewcode-block" id="CBEND.Gb"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEND.Gb">[docs]</a>    <span class="k">def</span> <span class="nf">Gb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span><span class="o">.</span><span class="n">nid</span></div>

    <span class="c1">#def get_edge_ids(self):</span>
        <span class="c1">#return [tuple(sorted(self.node_ids))]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nodes_ref</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span><span class="p">]</span>

    <span class="nd">@nodes_ref</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">nodes_ref</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">values</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="n">values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<div class="viewcode-block" id="CBEND.Area"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEND.Area">[docs]</a>    <span class="k">def</span> <span class="nf">Area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Element eid=</span><span class="si">%i</span><span class="s1"> has not been cross referenced.</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">Area</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xref</span><span class="p">):</span>
        <span class="n">unused_edges</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_edge_ids</span><span class="p">()</span>

<div class="viewcode-block" id="CBEND.cross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEND.cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by CBEND eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">)</span>
        <span class="c1">#self.g0 = model.nodes[self.g0]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ga</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gb</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CBEND.safe_cross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEND.safe_cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">safe_cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by CBEND eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ga</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gb</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">safe_property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CBEND.uncross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEND.uncross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">uncross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes cross-reference links&quot;&quot;&quot;</span>
        <span class="n">node_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ga</span> <span class="o">=</span> <span class="n">node_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gb</span> <span class="o">=</span> <span class="n">node_ids</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="CBEND.Centroid"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEND.Centroid">[docs]</a>    <span class="k">def</span> <span class="nf">Centroid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Element eid=</span><span class="si">%i</span><span class="s1"> has not been cross referenced.</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ga_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">gb_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">())</span> <span class="o">/</span> <span class="mf">2.</span></div>

<div class="viewcode-block" id="CBEND.center_of_mass"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEND.center_of_mass">[docs]</a>    <span class="k">def</span> <span class="nf">center_of_mass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Centroid</span><span class="p">()</span></div>

<div class="viewcode-block" id="CBEND.raw_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEND.raw_fields">[docs]</a>    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">x3</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_x_g0_defaults</span><span class="p">()</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;CBEND&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">Ga</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">Gb</span><span class="p">(),</span>
                       <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">x3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">geom</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="CBEND.repr_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEND.repr_fields">[docs]</a>    <span class="k">def</span> <span class="nf">repr_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_fields</span><span class="p">()</span></div>

<div class="viewcode-block" id="CBEND.write_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.CBEND.write_card">[docs]</a>    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">card</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repr_fields</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_8</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_16</span><span class="p">(</span><span class="n">card</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="init_x_g0"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.init_x_g0">[docs]</a><span class="k">def</span> <span class="nf">init_x_g0</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">x1_default</span><span class="p">,</span> <span class="n">x2_default</span><span class="p">,</span> <span class="n">x3_default</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;common method to read the x/g0 field for the CBAR, CBEAM, CBEAM3&quot;&quot;&quot;</span>
    <span class="n">field5</span> <span class="o">=</span> <span class="n">integer_double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;g0_x1&#39;</span><span class="p">,</span> <span class="n">x1_default</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field5</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
        <span class="n">g0</span> <span class="o">=</span> <span class="n">field5</span>
        <span class="n">x</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field5</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
        <span class="n">g0</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">field5</span><span class="p">,</span>
                      <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;x2&#39;</span><span class="p">,</span> <span class="n">x2_default</span><span class="p">),</span>
                      <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;x3&#39;</span><span class="p">,</span> <span class="n">x3_default</span><span class="p">)],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">norm</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;G0 vector defining plane 1 is not defined.</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;G0 = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">g0</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;X  = </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">x</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;field5 on </span><span class="si">%s</span><span class="s1"> (G0/X1) is the wrong type...id=</span><span class="si">%s</span><span class="s1"> field5=</span><span class="si">%s</span><span class="s1"> &#39;</span>
               <span class="s1">&#39;type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">card</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">eid</span><span class="p">,</span> <span class="n">field5</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">field5</span><span class="p">)))</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">g0</span></div>

<div class="viewcode-block" id="get_bar_vector"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.get_bar_vector">[docs]</a><span class="k">def</span> <span class="nf">get_bar_vector</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">elem</span><span class="p">,</span> <span class="n">node1</span><span class="p">,</span> <span class="n">node2</span><span class="p">,</span> <span class="n">xyz1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;helper method for ``rotate_v_wa_wb``&quot;&quot;&quot;</span>
    <span class="n">cd1</span> <span class="o">=</span> <span class="n">node1</span><span class="o">.</span><span class="n">Cd</span><span class="p">()</span>
    <span class="n">cd2</span> <span class="o">=</span> <span class="n">node2</span><span class="o">.</span><span class="n">Cd</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">cd1_ref</span> <span class="o">=</span> <span class="n">node1</span><span class="o">.</span><span class="n">cd_ref</span>
        <span class="n">cd2_ref</span> <span class="o">=</span> <span class="n">node2</span><span class="o">.</span><span class="n">cd_ref</span>

        <span class="c1"># get the vector v, which defines the projection on to the elemental</span>
        <span class="c1"># coordinate frame</span>
        <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">g0</span><span class="p">:</span>
            <span class="c1">#msg = &#39;which is required by %s eid=%s\n%s&#39; % (elem.type, elem.g0, str(elem))</span>
            <span class="n">g0_ref</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">g0_ref</span>
            <span class="n">n0</span> <span class="o">=</span> <span class="n">g0_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">n0</span> <span class="o">-</span> <span class="n">xyz1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">cd1_ref</span><span class="o">.</span><span class="n">transform_node_to_global</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by </span><span class="si">%s</span><span class="s1">=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">elem</span><span class="o">.</span><span class="n">eid</span><span class="p">)</span>
        <span class="n">cd1_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Coord</span><span class="p">(</span><span class="n">cd1</span><span class="p">)</span>
        <span class="n">cd2_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Coord</span><span class="p">(</span><span class="n">cd2</span><span class="p">)</span>

        <span class="c1"># get the vector v, which defines the projection on to the elemental</span>
        <span class="c1"># coordinate frame</span>
        <span class="k">if</span> <span class="n">elem</span><span class="o">.</span><span class="n">g0</span><span class="p">:</span>
            <span class="c1">#msg = &#39;which is required by %s eid=%s\n%s&#39; % (elem.type, elem.g0, str(elem))</span>
            <span class="n">g0_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">g0</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">n0</span> <span class="o">=</span> <span class="n">g0_ref</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">n0</span> <span class="o">-</span> <span class="n">xyz1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">cd1_ref</span><span class="o">.</span><span class="n">transform_node_to_global</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
            <span class="n">cd1_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Coord</span><span class="p">(</span><span class="n">cd1</span><span class="p">)</span>
            <span class="n">cd2_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Coord</span><span class="p">(</span><span class="n">cd2</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">v</span><span class="p">,</span> <span class="n">cd1</span><span class="p">,</span> <span class="n">cd1_ref</span><span class="p">,</span> <span class="n">cd2</span><span class="p">,</span> <span class="n">cd2_ref</span></div>

<div class="viewcode-block" id="rotate_v_wa_wb"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.rotate_v_wa_wb">[docs]</a><span class="k">def</span> <span class="nf">rotate_v_wa_wb</span><span class="p">(</span><span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">,</span> <span class="n">elem</span><span class="p">,</span> <span class="n">xyz1</span><span class="p">,</span> <span class="n">xyz2</span><span class="p">,</span> <span class="n">node1</span><span class="p">,</span> <span class="n">node2</span><span class="p">,</span> <span class="n">ihat_offset</span><span class="p">,</span> <span class="n">i_offset</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span>
                   <span class="n">Li_offset</span><span class="p">,</span>
                   <span class="n">log</span><span class="p">:</span> <span class="n">SimpleLogger</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">NDArray3float</span><span class="p">,</span> <span class="n">NDArray3float</span><span class="p">,</span> <span class="n">NDArray3float</span><span class="p">,</span> <span class="n">NDArray33float</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Rotates v, wa, wb</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    model : BDF()</span>
<span class="sd">        BDF : assume the model isn&#39;t xref&#39;d</span>
<span class="sd">        None : use the xref&#39;d values</span>
<span class="sd">    elem : CBAR() / CBEAM()</span>
<span class="sd">       the CBAR/CBEAM</span>
<span class="sd">    xyz1 / xyz2 : (3, ) float ndarray</span>
<span class="sd">        the xyz locations for node 1 / 2</span>
<span class="sd">    node1 / node2 : GRID()</span>
<span class="sd">        the xyz object for node 1 / 2</span>
<span class="sd">    ihat_offset : (3, ) float ndarray</span>
<span class="sd">        the normalized x-axis (not including the CBEAM offset)</span>
<span class="sd">    i_offset : (3, ) float ndarray</span>
<span class="sd">        the unnormalized x-axis (not including the CBEAM offset)</span>
<span class="sd">    eid : int</span>
<span class="sd">        the element id</span>
<span class="sd">    Li_offset : float</span>
<span class="sd">        the length of the CBAR/CBEAM (not including the CBEAM offset)</span>
<span class="sd">    log : Log()</span>
<span class="sd">        a logging object or None</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    v : List[float, float, float]</span>
<span class="sd">        the projection vector that defines the y-axis (jhat)</span>
<span class="sd">    wa : List[float, float, float]</span>
<span class="sd">       the offset vector at A</span>
<span class="sd">    wb : List[float, float, float]</span>
<span class="sd">       the offset vector at B</span>
<span class="sd">    xform : (3, 3) float ndarray</span>
<span class="sd">        a vstack of the [ihat, jhat, khat] axes</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This section details the OFFT flag.</span>

<span class="sd">    ABC or A-B-C (an example is G-G-G or B-G-G)</span>
<span class="sd">    while the slots are:</span>
<span class="sd">     - A -&gt; orientation; values=[G, B]</span>
<span class="sd">     - B -&gt; End A; values=[G, O]</span>
<span class="sd">     - C -&gt; End B; values=[G, O]</span>

<span class="sd">    and the values for A,B,C mean:</span>
<span class="sd">     - B -&gt; basic</span>
<span class="sd">     - G -&gt; global</span>
<span class="sd">     - O -&gt; orientation</span>

<span class="sd">    so for example G-G-G, that&#39;s global for all terms.</span>
<span class="sd">    BOG means basic orientation, orientation end A, global end B</span>

<span class="sd">    so now we&#39;re left with what does basic/global/orientation mean?</span>
<span class="sd">    - basic -&gt; the global coordinate system defined by cid=0</span>
<span class="sd">    - global -&gt; the local coordinate system defined by the</span>
<span class="sd">                CD field on the GRID card, but referenced by</span>
<span class="sd">                the CBAR/CBEAM</span>
<span class="sd">    - orientation -&gt; wa/wb are defined in the xform_offset (yz) frame;</span>
<span class="sd">                     this is likely the easiest frame for a user</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">check_offt</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
    <span class="n">v</span><span class="p">,</span> <span class="n">cd1</span><span class="p">,</span> <span class="n">cd1_ref</span><span class="p">,</span> <span class="n">cd2</span><span class="p">,</span> <span class="n">cd2_ref</span> <span class="o">=</span> <span class="n">get_bar_vector</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">elem</span><span class="p">,</span> <span class="n">node1</span><span class="p">,</span> <span class="n">node2</span><span class="p">,</span> <span class="n">xyz1</span><span class="p">)</span>

    <span class="c1">#--------------------------------------------------------------------------</span>
    <span class="n">offt_vector</span><span class="p">,</span> <span class="n">offt_end_a</span><span class="p">,</span> <span class="n">offt_end_b</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">offt</span>

    <span class="c1"># rotate v</span>
    <span class="k">if</span> <span class="n">offt_vector</span> <span class="o">==</span> <span class="s1">&#39;G&#39;</span><span class="p">:</span>
        <span class="c1"># end A</span>
        <span class="c1"># global - cid != 0</span>
        <span class="k">if</span> <span class="n">cd1</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">cd1_ref</span><span class="o">.</span><span class="n">transform_node_to_global_assuming_rectangular</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">offt_vector</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span>
        <span class="c1"># basic - cid = 0</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;offt_vector=</span><span class="si">%r</span><span class="s1"> is not supported; offt=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">offt_vector</span><span class="p">,</span> <span class="n">elem</span><span class="o">.</span><span class="n">offt</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

    <span class="n">yhat_offset</span><span class="p">,</span> <span class="n">zhat_offset</span> <span class="o">=</span> <span class="n">get_bar_yz_transform</span><span class="p">(</span>
        <span class="n">v</span><span class="p">,</span> <span class="n">ihat_offset</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">xyz1</span><span class="p">,</span> <span class="n">xyz2</span><span class="p">,</span> <span class="n">node1</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span> <span class="n">node2</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span>
        <span class="n">i_offset</span><span class="p">,</span> <span class="n">Li_offset</span><span class="p">)</span>
    <span class="n">xform_offset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">ihat_offset</span><span class="p">,</span> <span class="n">yhat_offset</span><span class="p">,</span> <span class="n">zhat_offset</span><span class="p">])</span> <span class="c1"># 3x3 unit matrix</span>

    <span class="c1">#--------------------------------------------------------------------------</span>
    <span class="c1"># rotate wa</span>
    <span class="c1"># wa defines the offset at end A</span>
    <span class="n">wa</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">wa</span>
    <span class="c1">#ia = n1</span>
    <span class="k">if</span> <span class="n">offt_end_a</span> <span class="o">==</span> <span class="s1">&#39;G&#39;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">cd1</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">wa</span> <span class="o">=</span> <span class="n">cd1_ref</span><span class="o">.</span><span class="n">transform_node_to_global_assuming_rectangular</span><span class="p">(</span><span class="n">wa</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">offt_end_a</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">elif</span> <span class="n">offt_end_a</span> <span class="o">==</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span>
        <span class="c1"># rotate point wa from the local frame to the global frame</span>
        <span class="n">wa</span> <span class="o">=</span> <span class="n">wa</span> <span class="o">@</span> <span class="n">xform_offset</span>
        <span class="c1">#ia = n1 + wa</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;offt_end_a=</span><span class="si">%r</span><span class="s1"> is not supported; offt=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">offt_end_a</span><span class="p">,</span> <span class="n">elem</span><span class="o">.</span><span class="n">offt</span><span class="p">)</span>
        <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">xform_offset</span>

    <span class="c1">#--------------------------------------------------------------------------</span>
    <span class="c1"># rotate wb</span>
    <span class="c1"># wb defines the offset at end B</span>
    <span class="n">wb</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">wb</span>
    <span class="c1">#ib = n2</span>
    <span class="k">if</span> <span class="n">offt_end_b</span> <span class="o">==</span> <span class="s1">&#39;G&#39;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">cd2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># MasterModelTaxi</span>
            <span class="n">wb</span> <span class="o">=</span> <span class="n">cd2_ref</span><span class="o">.</span><span class="n">transform_node_to_global_assuming_rectangular</span><span class="p">(</span><span class="n">wb</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">offt_end_b</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">elif</span> <span class="n">offt_end_b</span> <span class="o">==</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span>
        <span class="c1"># rotate point wb from the local frame to the global frame</span>
        <span class="n">wb</span> <span class="o">=</span> <span class="n">wb</span> <span class="o">@</span> <span class="n">xform_offset</span>
        <span class="c1">#ib = n2 + wb</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;offt_end_b=</span><span class="si">%r</span><span class="s1"> is not supported; offt=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">offt_end_b</span><span class="p">,</span> <span class="n">elem</span><span class="o">.</span><span class="n">offt</span><span class="p">)</span>
        <span class="n">model</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span><span class="p">,</span> <span class="n">wa</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">xform_offset</span>

    <span class="c1">#--------------------------------------------------------------------------</span>
    <span class="c1">#i = ib - ia # (xyz2 + wb) - (xyz1 + wa)</span>
    <span class="c1">#i = (xyz2 + wb) - (xyz1 + wa)</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">i_offset</span>
    <span class="n">Li</span> <span class="o">=</span> <span class="n">norm</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">ihat</span> <span class="o">=</span> <span class="n">i</span> <span class="o">/</span> <span class="n">Li</span>
    <span class="n">yhat</span><span class="p">,</span> <span class="n">zhat</span> <span class="o">=</span> <span class="n">get_bar_yz_transform</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">ihat</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">xyz1</span><span class="p">,</span> <span class="n">xyz2</span><span class="p">,</span> <span class="n">node1</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span> <span class="n">node2</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">Li</span><span class="p">)</span>

    <span class="c1">#print(&#39;  n1=%s n2=%s&#39; % (n1, n2))</span>
    <span class="c1">#print(&#39;  ib=%s ia=%s&#39; % (ib, ia))</span>
    <span class="c1">#print(&#39;  wa=%s wb=%s&#39; % (wa, wb))</span>
    <span class="c1">#print(&#39;  ioffset=%s i=%s&#39; % (i_offset, i))</span>
    <span class="c1">#print(&#39;  ihat=%s&#39; % (ihat))</span>
    <span class="c1">#print(&#39;  yhat=%s&#39; % (yhat))</span>
    <span class="c1">#print(&#39;  zhat=%s&#39; % (zhat))</span>
    <span class="c1">#print(&quot;&quot;)</span>

    <span class="n">xform</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">ihat</span><span class="p">,</span> <span class="n">yhat</span><span class="p">,</span> <span class="n">zhat</span><span class="p">])</span> <span class="c1"># 3x3 unit matrix</span>

    <span class="k">return</span> <span class="n">v</span><span class="p">,</span> <span class="n">wa</span><span class="p">,</span> <span class="n">wb</span><span class="p">,</span> <span class="n">xform</span></div>

<div class="viewcode-block" id="get_bar_yz_transform"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.get_bar_yz_transform">[docs]</a><span class="k">def</span> <span class="nf">get_bar_yz_transform</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">ihat</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">xyz1</span><span class="p">,</span> <span class="n">xyz2</span><span class="p">,</span> <span class="n">nid1</span><span class="p">,</span> <span class="n">nid2</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">Li</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    helper method for ``_get_bar_yz_arrays``</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    v : List[float, float, float]</span>
<span class="sd">        the projection vector that defines the y-axis (jhat)</span>
<span class="sd">    ihat : (3, ) float ndarray</span>
<span class="sd">        the normalized x-axis (not including the CBEAM offset)</span>
<span class="sd">    eid : int</span>
<span class="sd">        the element id</span>
<span class="sd">    xyz1 / xyz2 : (3, ) float ndarray</span>
<span class="sd">        the xyz locations for node 1 / 2</span>
<span class="sd">    nid1 / nid2  : int</span>
<span class="sd">        the node ids for xyz1 / xyz2</span>
<span class="sd">    i : (3, ) float ndarray</span>
<span class="sd">        the unnormalized x-axis (not including the CBEAM offset)</span>
<span class="sd">    Li : float</span>
<span class="sd">        the length of the CBAR/CBEAM (not including the CBEAM offset)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    yhat (3, ) float ndarray</span>
<span class="sd">       the CBAR/CBEAM&#39;s y-axis</span>
<span class="sd">    zhat (3, ) float ndarray</span>
<span class="sd">       the CBAR/CBEAM&#39;s z-axis</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">vhat</span> <span class="o">=</span> <span class="n">v</span> <span class="o">/</span> <span class="n">norm</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="c1"># j</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">ihat</span><span class="p">,</span> <span class="n">vhat</span><span class="p">)</span> <span class="c1"># k</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Invalid vector length</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;xyz1=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">xyz1</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;xyz2=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">xyz2</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;nid1=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">nid1</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;nid2=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">nid2</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;i   =</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;Li  =</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">Li</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;ihat=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">ihat</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;v   =</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;vhat=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">vhat</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;z=cross(ihat, vhat)&#39;</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="n">zhat</span> <span class="o">=</span> <span class="n">z</span> <span class="o">/</span> <span class="n">norm</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
    <span class="n">yhat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">zhat</span><span class="p">,</span> <span class="n">ihat</span><span class="p">)</span> <span class="c1"># j</span>

    <span class="k">if</span> <span class="n">norm</span><span class="p">(</span><span class="n">ihat</span><span class="p">)</span> <span class="o">==</span> <span class="mf">0.0</span> <span class="ow">or</span> <span class="n">norm</span><span class="p">(</span><span class="n">yhat</span><span class="p">)</span> <span class="o">==</span> <span class="mf">0.0</span> <span class="ow">or</span> <span class="n">norm</span><span class="p">(</span><span class="n">z</span><span class="p">)</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  invalid_orientation - eid=</span><span class="si">%s</span><span class="s1"> yhat=</span><span class="si">%s</span><span class="s1"> zhat=</span><span class="si">%s</span><span class="s1"> v=</span><span class="si">%s</span><span class="s1"> i=</span><span class="si">%s</span><span class="s1"> n</span><span class="si">%s</span><span class="s1">=</span><span class="si">%s</span><span class="s1"> n</span><span class="si">%s</span><span class="s1">=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">eid</span><span class="p">,</span> <span class="n">yhat</span><span class="p">,</span> <span class="n">zhat</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">nid1</span><span class="p">,</span> <span class="n">xyz1</span><span class="p">,</span> <span class="n">nid2</span><span class="p">,</span> <span class="n">xyz2</span><span class="p">))</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">yhat</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">zhat</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">)</span> <span class="ow">or</span> <span class="n">Li</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  length_error        - eid=</span><span class="si">%s</span><span class="s1"> Li=</span><span class="si">%s</span><span class="s1"> Lyhat=</span><span class="si">%s</span><span class="s1"> Lzhat=</span><span class="si">%s</span><span class="s1">&#39;</span>
              <span class="s1">&#39; v=</span><span class="si">%s</span><span class="s1"> i=</span><span class="si">%s</span><span class="s1"> n</span><span class="si">%s</span><span class="s1">=</span><span class="si">%s</span><span class="s1"> n</span><span class="si">%s</span><span class="s1">=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                  <span class="n">eid</span><span class="p">,</span> <span class="n">Li</span><span class="p">,</span> <span class="n">norm</span><span class="p">(</span><span class="n">yhat</span><span class="p">),</span> <span class="n">norm</span><span class="p">(</span><span class="n">zhat</span><span class="p">),</span> <span class="n">v</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">nid1</span><span class="p">,</span> <span class="n">xyz1</span><span class="p">,</span> <span class="n">nid2</span><span class="p">,</span> <span class="n">xyz2</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">yhat</span><span class="p">,</span> <span class="n">zhat</span></div>

<div class="viewcode-block" id="check_offt"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.bars.html#pyNastran.bdf.cards.elements.bars.check_offt">[docs]</a><span class="k">def</span> <span class="nf">check_offt</span><span class="p">(</span><span class="n">element</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    B,G,O</span>
<span class="sd">    Note: The character &#39;O&#39; in the table replaces the obsolete character &#39;E&#39;</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">offt</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">SyntaxError</span><span class="p">(</span><span class="s1">&#39;invalid offt expected a string of length 3; &#39;</span>
                          <span class="s1">&#39;offt=</span><span class="si">%r</span><span class="s1">; Type=</span><span class="si">%s</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">offt</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">offt</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">element</span><span class="p">)))</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;invalid offt parameter of </span><span class="si">%s</span><span class="s1">...offt=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">element</span><span class="o">.</span><span class="n">offt</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">element</span><span class="o">.</span><span class="n">offt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;G&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">],</span> <span class="n">msg</span>
    <span class="k">assert</span> <span class="n">element</span><span class="o">.</span><span class="n">offt</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;G&#39;</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">],</span> <span class="n">msg</span>
    <span class="k">assert</span> <span class="n">element</span><span class="o">.</span><span class="n">offt</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;G&#39;</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">],</span> <span class="n">msg</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Steven Doyle.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>