

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>pyNastran.bdf.cards.nodes &mdash; pyNastran 1.4-dev 1.4-dev documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> pyNastran 1.4-dev
          

          
            
            <img src="../../../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.4-dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../quick_start/index.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../how_to/index.html">How To: pyNastran</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference/pyNastran.html">pyNastran Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../manual/index.html">pyNastran Manual</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">pyNastran 1.4-dev</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
        
      <li>pyNastran.bdf.cards.nodes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pyNastran.bdf.cards.nodes</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">All nodes are defined in this file.  This includes:</span>

<span class="sd"> * Node</span>
<span class="sd">   * XPoint</span>
<span class="sd">     * EPOINT</span>
<span class="sd">     * SPOINT</span>
<span class="sd">   * XPoints</span>
<span class="sd">     * EPOINTs</span>
<span class="sd">     * SPOINTs</span>
<span class="sd">   * GRID</span>
<span class="sd">   * GRDSET</span>
<span class="sd">   * GRIDB</span>
<span class="sd"> * POINT</span>
<span class="sd"> * Ring</span>
<span class="sd">   * RINGAX</span>
<span class="sd"> * SEQGP</span>

<span class="sd">All ungrouped elements are Node objects.</span>

<span class="sd">The EPOINT/SPOINT classes refer to a single EPOINT/SPOINT.  The</span>
<span class="sd">EPOINTs/SPOINTs classes are for multiple degrees of freedom</span>
<span class="sd">(e.g. an SPOINT card).</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">count</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">TYPE_CHECKING</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">pyNastran.utils.numpy_utils</span> <span class="kn">import</span> <span class="n">integer_types</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.field_writer_8</span> <span class="kn">import</span> <span class="n">set_string8_blank_if_default</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.field_writer_16</span> <span class="kn">import</span> <span class="n">set_string16_blank_if_default</span>

<span class="kn">from</span> <span class="nn">pyNastran.bdf.field_writer_8</span> <span class="kn">import</span> <span class="n">set_blank_if_default</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.cards.base_card</span> <span class="kn">import</span> <span class="n">BaseCard</span><span class="p">,</span> <span class="n">expand_thru</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.cards.collpase_card</span> <span class="kn">import</span> <span class="n">collapse_thru_packs</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.bdf_interface.assign_type</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">integer</span><span class="p">,</span> <span class="n">integer_or_blank</span><span class="p">,</span> <span class="n">double</span><span class="p">,</span> <span class="n">double_or_blank</span><span class="p">,</span> <span class="n">blank</span><span class="p">,</span> <span class="n">integer_or_string</span><span class="p">,</span>
    <span class="n">integer_or_double</span><span class="p">,</span> <span class="n">components_or_blank</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.field_writer_8</span> <span class="kn">import</span> <span class="n">print_card_8</span><span class="p">,</span> <span class="n">print_float_8</span><span class="p">,</span> <span class="n">print_int_card</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.field_writer_16</span> <span class="kn">import</span> <span class="n">print_float_16</span><span class="p">,</span> <span class="n">print_card_16</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.field_writer_double</span> <span class="kn">import</span> <span class="n">print_scientific_double</span><span class="p">,</span> <span class="n">print_card_double</span>

<span class="c1">#u = str</span>
<span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
    <span class="kn">from</span> <span class="nn">pyNastran.bdf</span> <span class="kn">import</span> <span class="n">BDF</span>
    <span class="kn">from</span> <span class="nn">pyNastran.bdf.bdf_interface.bdf_card</span> <span class="kn">import</span> <span class="n">BDFCard</span>
    <span class="kn">from</span> <span class="nn">pyNastran.nptyping</span> <span class="kn">import</span> <span class="n">NDArray3float</span>
    <span class="c1">#from pyNastran.bdf.bdf_interface.typing import Coord, Element</span>


<div class="viewcode-block" id="SEQGP"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.SEQGP">[docs]</a><span class="k">class</span> <span class="nc">SEQGP</span><span class="p">(</span><span class="n">BaseCard</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;defines the SEQGP class&quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;SEQGP&#39;</span>

<div class="viewcode-block" id="SEQGP._init_from_empty"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.SEQGP._init_from_empty">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_init_from_empty</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">seqids</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">SEQGP</span><span class="p">(</span><span class="n">nids</span><span class="p">,</span> <span class="n">seqids</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">seqids</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates the SEQGP card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        nid : int</span>
<span class="sd">           the node id</span>
<span class="sd">        seqid : int/float</span>
<span class="sd">           the superelement id</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nids</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="n">nids</span> <span class="o">=</span> <span class="p">[</span><span class="n">nids</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">seqids</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="n">seqids</span> <span class="o">=</span> <span class="p">[</span><span class="n">seqids</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">nids</span> <span class="o">=</span> <span class="n">nids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seqids</span> <span class="o">=</span> <span class="n">seqids</span>

<div class="viewcode-block" id="SEQGP.add_card"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.SEQGP.add_card">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a SEQGP card from ``BDF.add_card(...)``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        card : BDFCard()</span>
<span class="sd">            a BDFCard object</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ncard</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;len(SEQGP) = 1; card=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">card</span>
        <span class="k">assert</span> <span class="n">ncard</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">card</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">seqids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ifield</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">ncard</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
            <span class="n">nid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="n">ifield</span><span class="p">,</span> <span class="s1">&#39;nid&#39;</span><span class="p">)</span>
            <span class="n">seqid</span> <span class="o">=</span> <span class="n">integer_or_double</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="n">ifield</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;seqid&#39;</span><span class="p">)</span>
            <span class="n">nids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nid</span><span class="p">)</span>
            <span class="n">seqids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">seqid</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">SEQGP</span><span class="p">(</span><span class="n">nids</span><span class="p">,</span> <span class="n">seqids</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span></div>

<div class="viewcode-block" id="SEQGP.cross_reference"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.SEQGP.cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="SEQGP.append"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.SEQGP.append">[docs]</a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seqgp</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nids</span> <span class="o">+=</span> <span class="n">seqgp</span><span class="o">.</span><span class="n">nids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seqids</span> <span class="o">+=</span> <span class="n">seqgp</span><span class="o">.</span><span class="n">seqids</span></div>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_op2_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a SEQGP card from the OP2</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        data : List[varies]</span>
<span class="sd">            a list of fields defined in OP2 format</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nids</span><span class="p">,</span> <span class="n">seqids</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">return</span> <span class="n">SEQGP</span><span class="p">(</span><span class="n">nids</span><span class="p">,</span> <span class="n">seqids</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

<div class="viewcode-block" id="SEQGP.raw_fields"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.SEQGP.raw_fields">[docs]</a>    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the fields in their unmodified form</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        fields : List[varies]</span>
<span class="sd">            the fields that define the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;SEQGP&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">nid</span><span class="p">,</span> <span class="n">seqid</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nids</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">seqids</span><span class="p">):</span>
            <span class="n">list_fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nid</span><span class="p">)</span>
            <span class="n">list_fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">seqid</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="SEQGP.write_card"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.SEQGP.write_card">[docs]</a>    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The writer method used by BDF.write_card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        size : int; default=8</span>
<span class="sd">            unused</span>
<span class="sd">        is_double : bool; default=False</span>
<span class="sd">            unused</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;SEQGP&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">seqid</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">count</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">nids</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">seqids</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="n">print_card_8</span><span class="p">(</span><span class="n">list_fields</span><span class="p">)</span>
                <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;SEQGP&#39;</span><span class="p">]</span>
            <span class="n">list_fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nid</span><span class="p">)</span>
            <span class="n">list_fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">seqid</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">list_fields</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="n">print_card_8</span><span class="p">(</span><span class="n">list_fields</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">msg</span></div></div>


<div class="viewcode-block" id="XPoint"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.XPoint">[docs]</a><span class="k">class</span> <span class="nc">XPoint</span><span class="p">(</span><span class="n">BaseCard</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;common class for EPOINT/SPOINT&quot;&quot;&quot;</span>

<div class="viewcode-block" id="XPoint._init_from_empty"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.XPoint._init_from_empty">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_init_from_empty</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="n">nid</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">comment</span><span class="p">):</span>
        <span class="c1">#Node.__init__(self)</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nid</span> <span class="o">=</span> <span class="n">nid</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">),</span> <span class="n">nid</span>

<div class="viewcode-block" id="XPoint._export_to_hdf5"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.XPoint._export_to_hdf5">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_export_to_hdf5</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">h5_file</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">,</span> <span class="n">nids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;exports the nodes in a vectorized way&quot;&quot;&quot;</span>
        <span class="c1">#comments = []</span>
        <span class="c1">#for nid in nids:</span>
            <span class="c1">#node = model.nodes[nid]</span>
            <span class="c1">#comments.append(element.comment)</span>
        <span class="c1">#h5_file.create_dataset(&#39;_comment&#39;, data=comments)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;nid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">nids</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;dummy method for EPOINT/SPOINT classes&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;This method should be overwritten by the parent class&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="XPoint.raw_fields"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.XPoint.raw_fields">[docs]</a>    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the fields in their unmodified form</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        fields : List[varies]</span>
<span class="sd">            the fields that define the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lists_fields</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nid</span><span class="p">]</span>
            <span class="n">lists_fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">list_fields</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">singles</span><span class="p">,</span> <span class="n">doubles</span> <span class="o">=</span> <span class="n">collapse_thru_packs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nid</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">singles</span><span class="p">:</span>
                <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">]</span> <span class="o">+</span> <span class="n">singles</span>
            <span class="k">if</span> <span class="n">doubles</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">spoint_double</span> <span class="ow">in</span> <span class="n">doubles</span><span class="p">:</span>
                    <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">]</span> <span class="o">+</span> <span class="n">spoint_double</span>
                    <span class="n">lists_fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">list_fields</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">lists_fields</span></div>

<div class="viewcode-block" id="XPoint.write_card"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.XPoint.write_card">[docs]</a>    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The writer method used by BDF.write_card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        size : int; default=8</span>
<span class="sd">            unused</span>
<span class="sd">        is_double : bool; default=False</span>
<span class="sd">            unused</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span>
        <span class="n">lists_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repr_fields</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">list_fields</span> <span class="ow">in</span> <span class="n">lists_fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;THRU&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">list_fields</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="n">print_int_card</span><span class="p">(</span><span class="n">list_fields</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="n">print_card_8</span><span class="p">(</span><span class="n">list_fields</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="XPoint.cross_reference"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.XPoint.cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div></div>

<div class="viewcode-block" id="SPOINT"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.SPOINT">[docs]</a><span class="k">class</span> <span class="nc">SPOINT</span><span class="p">(</span><span class="n">XPoint</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;defines the SPOINT class&quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;SPOINT&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates the SPOINT card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        nid : int</span>
<span class="sd">           the SPOINT id</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">XPoint</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">comment</span><span class="p">)</span>

<div class="viewcode-block" id="SPOINT.get_position"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.SPOINT.get_position">[docs]</a>    <span class="k">def</span> <span class="nf">get_position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="EPOINT"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.EPOINT">[docs]</a><span class="k">class</span> <span class="nc">EPOINT</span><span class="p">(</span><span class="n">XPoint</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;defines the EPOINT class&quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;EPOINT&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates the EPOINT card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        nid : int</span>
<span class="sd">           the EPOINT id</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">XPoint</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">comment</span><span class="p">)</span></div>

<div class="viewcode-block" id="write_xpoints"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.write_xpoints">[docs]</a><span class="k">def</span> <span class="nf">write_xpoints</span><span class="p">(</span><span class="n">cardtype</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;writes SPOINTs/EPOINTs&quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">comment</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">point_ids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">point_id</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">points</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="n">point_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">point_id</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">point</span><span class="o">.</span><span class="n">comment</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="n">point</span><span class="o">.</span><span class="n">comment</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">point_ids</span> <span class="o">=</span> <span class="n">points</span>
    <span class="n">lists_fields</span> <span class="o">=</span> <span class="n">compress_xpoints</span><span class="p">(</span><span class="n">cardtype</span><span class="p">,</span> <span class="n">point_ids</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">list_fields</span> <span class="ow">in</span> <span class="n">lists_fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;THRU&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">list_fields</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="n">print_int_card</span><span class="p">(</span><span class="n">list_fields</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="n">print_card_8</span><span class="p">(</span><span class="n">list_fields</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">msg</span></div>


<div class="viewcode-block" id="compress_xpoints"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.compress_xpoints">[docs]</a><span class="k">def</span> <span class="nf">compress_xpoints</span><span class="p">(</span><span class="n">point_type</span><span class="p">,</span> <span class="n">xpoints</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the SPOINTs/EPOINTs in sorted, short form.</span>

<span class="sd">      uncompresed:  SPOINT,1,3,5</span>
<span class="sd">      compressed:   SPOINT,1,3,5</span>

<span class="sd">      uncompresed:  SPOINT,1,2,3,4,5</span>
<span class="sd">      compressed:   SPOINT,1,THRU,5</span>

<span class="sd">      uncompresed:  SPOINT,1,2,3,4,5,7</span>
<span class="sd">      compressed:   SPOINT,7</span>
<span class="sd">                    SPOINT,1,THRU,5</span>

<span class="sd">    point_type = &#39;SPOINT&#39;</span>
<span class="sd">    spoints = [1, 2, 3, 4, 5]</span>
<span class="sd">    fields = compressed_xpoints(point_type, spoints)</span>
<span class="sd">    &gt;&gt;&gt; fields</span>
<span class="sd">    [&#39;SPOINT&#39;, 1, &#39;THRU&#39;, 5]</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">spoints</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">xpoints</span><span class="p">)</span>
    <span class="n">spoints</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

    <span class="n">singles</span><span class="p">,</span> <span class="n">doubles</span> <span class="o">=</span> <span class="n">collapse_thru_packs</span><span class="p">(</span><span class="n">spoints</span><span class="p">)</span>

    <span class="n">lists_fields</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">singles</span><span class="p">:</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="n">point_type</span><span class="p">]</span> <span class="o">+</span> <span class="n">singles</span>
        <span class="n">lists_fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">list_fields</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">doubles</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">spoint_double</span> <span class="ow">in</span> <span class="n">doubles</span><span class="p">:</span>
            <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="n">point_type</span><span class="p">]</span> <span class="o">+</span> <span class="n">spoint_double</span>
            <span class="n">lists_fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">list_fields</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">lists_fields</span></div>

<div class="viewcode-block" id="XPoints"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.XPoints">[docs]</a><span class="k">class</span> <span class="nc">XPoints</span><span class="p">(</span><span class="n">BaseCard</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;common class for EPOINTs and SPOINTs&quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;dummy method for EPOINTs/SPOINTs classes&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;This method should be overwritten by the parent class&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="XPoints._init_from_empty"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.XPoints._init_from_empty">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_init_from_empty</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="n">ids</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">ids</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="c1">#Node.__init__(self)</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ids</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="n">ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">ids</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">expand_thru</span><span class="p">(</span><span class="n">ids</span><span class="p">))</span>

<div class="viewcode-block" id="XPoints.add_card"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.XPoints.add_card">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a SPOINT/EPOINT card from ``BDF.add_card(...)``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        card : BDFCard()</span>
<span class="sd">            a BDFCard object</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">points</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)):</span>
            <span class="n">field</span> <span class="o">=</span> <span class="n">integer_or_string</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s1">&#39;ID</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
            <span class="n">points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span></div>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_op2_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a SPOINT/EPOINT card from the OP2</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        data : List[varies]</span>
<span class="sd">            a list of fields defined in OP2 format</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">points</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="nb">list</span><span class="p">),</span> <span class="n">points</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">integer_types</span><span class="p">),</span> <span class="n">points</span>
        <span class="k">assert</span> <span class="nb">min</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">points</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the number of degrees of freedom for the EPOINTs/SPOINTs class</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ndofs : int</span>
<span class="sd">            the number of degrees of freedom</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">)</span>

<div class="viewcode-block" id="XPoints.add_points"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.XPoints.add_points">[docs]</a>    <span class="k">def</span> <span class="nf">add_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sList</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds more EPOINTs/SPOINTs to this object&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">sList</span><span class="p">))</span></div>

<div class="viewcode-block" id="XPoints.cross_reference"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.XPoints.cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="XPoints.raw_fields"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.XPoints.raw_fields">[docs]</a>    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the fields in their unmodified form</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        fields : List[varies]</span>
<span class="sd">            the fields that define the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">points</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">)</span>
        <span class="n">points</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">]</span> <span class="o">+</span> <span class="n">points</span></div>

<div class="viewcode-block" id="XPoints.write_card"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.XPoints.write_card">[docs]</a>    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The writer method used by BDF.write_card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        size : int; default=8</span>
<span class="sd">            unused</span>
<span class="sd">        is_double : bool; default=False</span>
<span class="sd">            unused</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lists_fields</span> <span class="o">=</span> <span class="n">compress_xpoints</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span>
        <span class="k">for</span> <span class="n">list_fields</span> <span class="ow">in</span> <span class="n">lists_fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;THRU&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">list_fields</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="n">print_int_card</span><span class="p">(</span><span class="n">list_fields</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="n">print_card_8</span><span class="p">(</span><span class="n">list_fields</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">msg</span></div></div>

<div class="viewcode-block" id="SPOINTs"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.SPOINTs">[docs]</a><span class="k">class</span> <span class="nc">SPOINTs</span><span class="p">(</span><span class="n">XPoints</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    +--------+-----+------+-----+-----+-----+-----+-----+-----+</span>
<span class="sd">    |   1    |  2  |  3   |  4  |  5  |  6  |  7  |  8  |  9  |</span>
<span class="sd">    +========+=====+======+=====+=====+=====+=====+=====+=====+</span>
<span class="sd">    | SPOINT | ID1 | THRU | ID2 |     |     |     |     |     |</span>
<span class="sd">    +--------+-----+------+-----+-----+-----+-----+-----+-----+</span>
<span class="sd">    | SPOINT | ID1 | ID1  | ID3 | ID4 | ID5 | ID6 | ID7 | ID8 |</span>
<span class="sd">    +--------+-----+------+-----+-----+-----+-----+-----+-----+</span>
<span class="sd">    |        | ID8 | etc. |     |     |     |     |     |     |</span>
<span class="sd">    +--------+-----+------+-----+-----+-----+-----+-----+-----+</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;SPOINT&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates the SPOINTs card that contains many SPOINTs</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ids : List[int]</span>
<span class="sd">            SPOINT ids</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">XPoints</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

<div class="viewcode-block" id="SPOINTs.create_spointi"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.SPOINTs.create_spointi">[docs]</a>    <span class="k">def</span> <span class="nf">create_spointi</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates individal SPOINT objects&quot;&quot;&quot;</span>
        <span class="n">spoints</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">nid</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">:</span>
            <span class="n">spoint</span> <span class="o">=</span> <span class="n">SPOINT</span><span class="p">(</span><span class="n">nid</span><span class="p">)</span>
            <span class="n">spoints</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">spoint</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;ifile&#39;</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">spoint</span> <span class="ow">in</span> <span class="n">spoints</span><span class="p">:</span>
                <span class="n">spoint</span><span class="o">.</span><span class="n">ifile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ifile</span> <span class="c1"># type: int</span>
        <span class="k">return</span> <span class="n">spoints</span></div></div>


<div class="viewcode-block" id="EPOINTs"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.EPOINTs">[docs]</a><span class="k">class</span> <span class="nc">EPOINTs</span><span class="p">(</span><span class="n">XPoints</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    +--------+-----+------+-----+-----+-----+-----+-----+-----+</span>
<span class="sd">    |   1    |  2  |  3   |  4  |  5  |  6  |  7  |  8  |  9  |</span>
<span class="sd">    +========+=====+======+=====+=====+=====+=====+=====+=====+</span>
<span class="sd">    | EPOINT | ID1 | THRU | ID2 |     |     |     |     |     |</span>
<span class="sd">    +--------+-----+------+-----+-----+-----+-----+-----+-----+</span>
<span class="sd">    | EPOINT | ID1 | ID1  | ID3 | ID4 | ID5 | ID6 | ID7 | ID8 |</span>
<span class="sd">    +--------+-----+------+-----+-----+-----+-----+-----+-----+</span>
<span class="sd">    |        | ID8 | etc. |     |     |     |     |     |     |</span>
<span class="sd">    +--------+-----+------+-----+-----+-----+-----+-----+-----+</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;EPOINT&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates the EPOINTs card that contains many EPOINTs</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ids : List[int]</span>
<span class="sd">            EPOINT ids</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">XPoints</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

<div class="viewcode-block" id="EPOINTs.create_epointi"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.EPOINTs.create_epointi">[docs]</a>    <span class="k">def</span> <span class="nf">create_epointi</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates individal EPOINT objects&quot;&quot;&quot;</span>
        <span class="n">points</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">nid</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">:</span>
            <span class="n">points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">EPOINT</span><span class="p">(</span><span class="n">nid</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">points</span></div></div>


<div class="viewcode-block" id="GRDSET"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRDSET">[docs]</a><span class="k">class</span> <span class="nc">GRDSET</span><span class="p">(</span><span class="n">BaseCard</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Defines default options for fields 3, 7, 8, and 9 of all GRID entries.</span>

<span class="sd">    +--------+-----+----+----+----+----+----+----+------+</span>
<span class="sd">    |    1   |  2  | 3  | 4  | 5  | 6  |  7 | 8  |  9   |</span>
<span class="sd">    +========+=====+====+====+====+====+====+====+======+</span>
<span class="sd">    | GRDSET |     | CP |    |    |    | CD | PS | SEID |</span>
<span class="sd">    +--------+-----+----+----+----+----+----+----+------+</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;GRDSET&#39;</span>

    <span class="c1">#: allows the get_field method and update_field methods to be used</span>
    <span class="n">_field_map</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="p">:</span><span class="s1">&#39;cp&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span><span class="s1">&#39;cd&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span><span class="s1">&#39;ps&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span><span class="s1">&#39;seid&#39;</span><span class="p">}</span>

<div class="viewcode-block" id="GRDSET._init_from_empty"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRDSET._init_from_empty">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_init_from_empty</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="n">cp</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">cd</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">ps</span> <span class="o">=</span> <span class="s1">&#39;34&#39;</span>
        <span class="n">seid</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="n">GRDSET</span><span class="p">(</span><span class="n">cp</span><span class="p">,</span> <span class="n">cd</span><span class="p">,</span> <span class="n">ps</span><span class="p">,</span> <span class="n">seid</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cp</span><span class="p">,</span> <span class="n">cd</span><span class="p">,</span> <span class="n">ps</span><span class="p">,</span> <span class="n">seid</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates the GRDSET card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        cp : int; default=0</span>
<span class="sd">            the xyz coordinate frame</span>
<span class="sd">        cd : int; default=0</span>
<span class="sd">            the analysis coordinate frame</span>
<span class="sd">        ps : str; default=&#39;&#39;</span>
<span class="sd">            Additional SPCs in the analysis coordinate frame (e.g. &#39;123&#39;).</span>
<span class="sd">            This corresponds to DOF set ``SG``.</span>
<span class="sd">        seid : int; default=0</span>
<span class="sd">            superelement id</span>
<span class="sd">            TODO: how is this used by Nastran???</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>

        <span class="c1">#: Output Coordinate System</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cp</span> <span class="o">=</span> <span class="n">cp</span>

        <span class="c1">#: Analysis coordinate system</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cd</span> <span class="o">=</span> <span class="n">cd</span>

        <span class="c1">#: Default SPC constraint on undefined nodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ps</span> <span class="o">=</span> <span class="n">ps</span>

        <span class="c1">#: Superelement ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seid</span> <span class="o">=</span> <span class="n">seid</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cp_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cd_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seid_ref</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="GRDSET.add_card"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRDSET.add_card">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a GRDSET card from ``BDF.add_card(...)``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        card : BDFCard()</span>
<span class="sd">            a BDFCard object</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#: Grid point coordinate system</span>
        <span class="n">blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;blank&#39;</span><span class="p">)</span>

        <span class="n">cp</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;cp&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;blank&#39;</span><span class="p">)</span>
        <span class="n">blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;blank&#39;</span><span class="p">)</span>
        <span class="n">blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;blank&#39;</span><span class="p">)</span>
        <span class="n">cd</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;cd&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="n">ps</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;ps&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
        <span class="n">seid</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;seid&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;len(GRDSET card) = </span><span class="si">%i</span><span class="se">\n</span><span class="s1">card=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">),</span> <span class="n">card</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">GRDSET</span><span class="p">(</span><span class="n">cp</span><span class="p">,</span> <span class="n">cd</span><span class="p">,</span> <span class="n">ps</span><span class="p">,</span> <span class="n">seid</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span></div>

<div class="viewcode-block" id="GRDSET.cross_reference"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRDSET.cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by the GRDSET&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cp_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Coord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cp</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cd_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Coord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cd</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span></div>
        <span class="c1">#self.seid = model.SuperElement(self.seid, msg)</span>
        <span class="c1">#self.seid_ref = self.seid</span>

<div class="viewcode-block" id="GRDSET.uncross_reference"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRDSET.uncross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">uncross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes cross-reference links&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cp</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cd</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cp_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cd_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seid_ref</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="GRDSET.Cd"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRDSET.Cd">[docs]</a>    <span class="k">def</span> <span class="nf">Cd</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the output coordinate system</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        cd : int</span>
<span class="sd">            the output coordinate system</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cd_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cd</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cd</span><span class="o">.</span><span class="n">cid</span></div>

<div class="viewcode-block" id="GRDSET.Cp"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRDSET.Cp">[docs]</a>    <span class="k">def</span> <span class="nf">Cp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the analysis coordinate system</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        cp : int</span>
<span class="sd">            the analysis coordinate system</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cp_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cp</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cp</span><span class="o">.</span><span class="n">cid</span></div>

<div class="viewcode-block" id="GRDSET.Ps"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRDSET.Ps">[docs]</a>    <span class="k">def</span> <span class="nf">Ps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the GRID-based SPC</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ps : str</span>
<span class="sd">            the GRID-based SPC</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ps</span></div>

<div class="viewcode-block" id="GRDSET.SEid"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRDSET.SEid">[docs]</a>    <span class="k">def</span> <span class="nf">SEid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the Superelement ID</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        seid : int</span>
<span class="sd">            the Superelement ID</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">seid_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">seid</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">seid_ref</span><span class="o">.</span><span class="n">seid</span></div>

    <span class="k">def</span> <span class="nf">_verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xref</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Verifies all methods for this object work</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        xref: bool</span>
<span class="sd">            has this model been cross referenced</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cp</span><span class="p">()</span>
        <span class="n">seid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SEid</span><span class="p">()</span>
        <span class="n">cd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cd</span><span class="p">()</span>
        <span class="n">ps</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Ps</span><span class="p">()</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cp</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">),</span> <span class="s1">&#39;cp=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">cp</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cd</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">),</span> <span class="s1">&#39;cd=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">cd</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ps</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span> <span class="s1">&#39;ps=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ps</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">seid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">),</span> <span class="s1">&#39;seid=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">seid</span>

<div class="viewcode-block" id="GRDSET.raw_fields"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRDSET.raw_fields">[docs]</a>    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the fields in their unmodified form</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        fields : List[varies]</span>
<span class="sd">            the fields that define the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;GRDSET&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cp</span><span class="p">(),</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                       <span class="bp">self</span><span class="o">.</span><span class="n">Cd</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">ps</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">SEid</span><span class="p">()]</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="GRDSET.repr_fields"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRDSET.repr_fields">[docs]</a>    <span class="k">def</span> <span class="nf">repr_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the fields in their simplified form</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        fields : List[varies]</span>
<span class="sd">            the fields that define the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cp</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Cp</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">cd</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Cd</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">ps</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ps</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">seid</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SEid</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;GRDSET&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">cp</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">cd</span><span class="p">,</span> <span class="n">ps</span><span class="p">,</span> <span class="n">seid</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="GRDSET.write_card"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRDSET.write_card">[docs]</a>    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The writer method used by BDF.write_card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        size : int</span>
<span class="sd">            the size of the card (8/16)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">card</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repr_fields</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">print_card_8</span><span class="p">(</span><span class="n">card</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="GRIDB"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRIDB">[docs]</a><span class="k">class</span> <span class="nc">GRIDB</span><span class="p">(</span><span class="n">BaseCard</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;defines the GRIDB class&quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;GRIDB&#39;</span>

    <span class="c1">#: allows the get_field method and update_field methods to be used</span>
    <span class="n">_field_map</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;nid&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span><span class="s1">&#39;phi&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span><span class="s1">&#39;cd&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span><span class="s1">&#39;ps&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span><span class="s1">&#39;idf&#39;</span><span class="p">}</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">cd</span><span class="p">,</span> <span class="n">ps</span><span class="p">,</span> <span class="n">ringfl</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates the GRIDB card</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="c1">#Node.__init__(self)</span>

        <span class="c1">#: node ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nid</span> <span class="o">=</span> <span class="n">nid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phi</span> <span class="o">=</span> <span class="n">phi</span>
        <span class="c1"># analysis coordinate system</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cd</span> <span class="o">=</span> <span class="n">cd</span>
        <span class="c1">#: local SPC constraint</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ps</span> <span class="o">=</span> <span class="n">ps</span>
        <span class="c1">#: ringfl</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ringfl</span> <span class="o">=</span> <span class="n">ringfl</span>

        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">nid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;nid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nid</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">phi</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;phi=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">phi</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">cd</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;cd=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">cd</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">ringfl</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;ringfl=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">ringfl</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cd_ref</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="GRIDB.add_card"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRIDB.add_card">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a GRIDB card from ``BDF.add_card(...)``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        card : BDFCard()</span>
<span class="sd">            a BDFCard object</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;nid&#39;</span><span class="p">)</span>
        <span class="n">phi</span> <span class="o">=</span> <span class="n">double</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;phi&#39;</span><span class="p">)</span>
        <span class="n">cd</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;cd&#39;</span><span class="p">)</span>
        <span class="n">ps</span> <span class="o">=</span> <span class="n">components_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;ps&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">idf</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;ringfl/idf&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">GRIDB</span><span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">cd</span><span class="p">,</span> <span class="n">ps</span><span class="p">,</span> <span class="n">idf</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span></div>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_op2_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a GRIDB card from the OP2</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        data : List[varies]</span>
<span class="sd">            a list of fields defined in OP2 format</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">phi</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">cd</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">ps</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">idf</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">GRIDB</span><span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">cd</span><span class="p">,</span> <span class="n">ps</span><span class="p">,</span> <span class="n">idf</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xref</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Verifies all methods for this object work</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        xref : bool</span>
<span class="sd">            has this model been cross referenced</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

<div class="viewcode-block" id="GRIDB.Cd"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRIDB.Cd">[docs]</a>    <span class="k">def</span> <span class="nf">Cd</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the output coordinate system</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        cd : int</span>
<span class="sd">            the output coordinate system</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cd_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cd</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cd_ref</span><span class="o">.</span><span class="n">cid</span></div>

<div class="viewcode-block" id="GRIDB.raw_fields"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRIDB.raw_fields">[docs]</a>    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the fields in their unmodified form</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        fields : List[varies]</span>
<span class="sd">            the fields that define the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;GRIDB&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">phi</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                       <span class="bp">self</span><span class="o">.</span><span class="n">Cd</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">ps</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ringfl</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="GRIDB.get_position"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRIDB.get_position">[docs]</a>    <span class="k">def</span> <span class="nf">get_position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">## TODO: fixme</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">])</span></div>

<div class="viewcode-block" id="GRIDB.repr_fields"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRIDB.repr_fields">[docs]</a>    <span class="k">def</span> <span class="nf">repr_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the fields in their simplified form</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        fields : List[varies]</span>
<span class="sd">            the fields that define the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#phi = set_blank_if_default(self.phi, 0.0)</span>
        <span class="n">cd</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Cd</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">ps</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ps</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">idf</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ringfl</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;GRIDB&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">phi</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">cd</span><span class="p">,</span> <span class="n">ps</span><span class="p">,</span>
                       <span class="n">idf</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="GRIDB.write_card"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRIDB.write_card">[docs]</a>    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The writer method used by BDF.write_card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        size : int; default=8</span>
<span class="sd">            the size of the card (8/16)</span>
<span class="sd">        is_double : bool; default=False</span>
<span class="sd">            should this card be written with double precision</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        msg : str</span>
<span class="sd">            the card as a string</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">card</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repr_fields</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_8</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_16</span><span class="p">(</span><span class="n">card</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="GRID"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRID">[docs]</a><span class="k">class</span> <span class="nc">GRID</span><span class="p">(</span><span class="n">BaseCard</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    +------+-----+----+----+----+----+----+----+------+</span>
<span class="sd">    |   1  |  2  | 3  | 4  | 5  | 6  |  7 | 8  |  9   |</span>
<span class="sd">    +======+=====+====+====+====+====+====+====+======+</span>
<span class="sd">    | GRID | NID | CP | X1 | X2 | X3 | CD | PS | SEID |</span>
<span class="sd">    +------+-----+----+----+----+----+----+----+------+</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    nid : int</span>
<span class="sd">        node id</span>
<span class="sd">    xyz : float ndarray</span>
<span class="sd">        Raw location &lt;:math:`x_1, x_2, x_3`&gt;</span>
<span class="sd">    cp : int</span>
<span class="sd">        reference coordinate system</span>
<span class="sd">    cd : int</span>
<span class="sd">        analysis coordinate system</span>
<span class="sd">    ps : str</span>
<span class="sd">        nodal-based constraints</span>
<span class="sd">    seid : int</span>
<span class="sd">        superelement id</span>
<span class="sd">    cp_ref : Coord() or None</span>
<span class="sd">        cross-referenced cp</span>
<span class="sd">    cd_ref : Coord() or None</span>
<span class="sd">        cross-referenced cd</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">    Nid()</span>
<span class="sd">        gets nid</span>
<span class="sd">    Cp()</span>
<span class="sd">        gets cp_ref.cid or cp depending on cross-referencing</span>
<span class="sd">    Cd()</span>
<span class="sd">        gets cd_ref.cid or cd depending on cross-referencing</span>
<span class="sd">    Ps()</span>
<span class="sd">        gets ps</span>
<span class="sd">    SEid()</span>
<span class="sd">        superelement id</span>
<span class="sd">    get_position()</span>
<span class="sd">        gets xyz in the global frame</span>
<span class="sd">    get_position_wrt(model, cid)</span>
<span class="sd">        gets xyz in a local frame</span>
<span class="sd">    cross_reference(model)</span>
<span class="sd">        cross-references the card</span>
<span class="sd">    uncross_reference()</span>
<span class="sd">        uncross-references the card</span>
<span class="sd">    set_position(model, xyz, cid=0, xref=True)</span>
<span class="sd">        updates the coordinate system</span>

<span class="sd">    Using the GRID object::</span>

<span class="sd">     model = read_bdf(bdf_filename)</span>
<span class="sd">     node = model.Node(nid)</span>

<span class="sd">     # gets the position of the node in the global frame</span>
<span class="sd">     node.get_position()</span>
<span class="sd">     node.get_position_wrt(model, cid=0)</span>

<span class="sd">     # gets the position of the node in a local frame</span>
<span class="sd">     node.get_position_wrt(model, cid=1)</span>

<span class="sd">     # change the location of the node</span>
<span class="sd">     node.set_position(model, array([1.,2.,3.]), cid=3)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;GRID&#39;</span>

    <span class="c1">#: allows the get_field method and update_field methods to be used</span>
    <span class="n">_field_map</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;nid&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s1">&#39;cp&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span><span class="s1">&#39;cd&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span><span class="s1">&#39;ps&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span><span class="s1">&#39;seid&#39;</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">_get_field_helper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets complicated parameters on the GRID card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        n : int</span>
<span class="sd">            the field number to update</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        value : float</span>
<span class="sd">            the value for the appropriate field</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Field </span><span class="si">%r</span><span class="s1"> is an invalid </span><span class="si">%s</span><span class="s1"> entry.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_update_field_helper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates complicated parameters on the GRID card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        n : int</span>
<span class="sd">            the field number to update</span>
<span class="sd">        value : float</span>
<span class="sd">            the value for the appropriate field</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Field </span><span class="si">%r</span><span class="s1">=</span><span class="si">%r</span><span class="s1"> is an invalid </span><span class="si">%s</span><span class="s1"> entry.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">))</span>

<div class="viewcode-block" id="GRID.export_to_hdf5"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRID.export_to_hdf5">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">export_to_hdf5</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">h5_file</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">nids</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;exports the nodes in a vectorized way&quot;&quot;&quot;</span>
        <span class="n">comments</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">cp</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">xyz</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">cd</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ps</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">seid</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">nid</span> <span class="ow">in</span> <span class="n">nids</span><span class="p">:</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">nid</span><span class="p">]</span>
            <span class="c1">#comments.append(element.comment)</span>
            <span class="n">xyz</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">xyz</span><span class="p">)</span>
            <span class="n">cp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">cp</span><span class="p">)</span>
            <span class="n">cd</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">cd</span><span class="p">)</span>
            <span class="n">psi</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">ps</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="k">else</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">ps</span><span class="p">))</span>
            <span class="n">ps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">psi</span><span class="p">)</span>
            <span class="n">seid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">seid</span><span class="p">)</span>
        <span class="c1">#h5_file.create_dataset(&#39;_comment&#39;, data=comments)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;nid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">nids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;xyz&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">xyz</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;cp&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">cp</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;cd&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">cd</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;ps&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">ps</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;seid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">seid</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nid</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">xyz</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">],</span>
                 <span class="n">cp</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cd</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ps</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">seid</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                 <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates the GRID card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        nid : int</span>
<span class="sd">            node id</span>
<span class="sd">        cp : int; default=0</span>
<span class="sd">            the xyz coordinate frame</span>
<span class="sd">        xyz : (3, ) float ndarray; default=None -&gt; [0., 0., 0.]</span>
<span class="sd">            the xyz/r-theta-z/rho-theta-phi values</span>
<span class="sd">        cd : int; default=0</span>
<span class="sd">            the analysis coordinate frame</span>
<span class="sd">        ps : str; default=&#39;&#39;</span>
<span class="sd">            Additional SPCs in the analysis coordinate frame (e.g. &#39;123&#39;).</span>
<span class="sd">            This corresponds to DOF set ``SG``.</span>
<span class="sd">        seid : int; default=0</span>
<span class="sd">            superelement id</span>
<span class="sd">            TODO: how is this used by Nastran???</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">BaseCard</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nid</span> <span class="o">=</span> <span class="n">nid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cp</span> <span class="o">=</span> <span class="n">cp</span>
        <span class="k">if</span> <span class="n">xyz</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">xyz</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">xyz</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="o">.</span><span class="n">shape</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cd</span> <span class="o">=</span> <span class="n">cd</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ps</span> <span class="o">=</span> <span class="n">ps</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seid</span> <span class="o">=</span> <span class="n">seid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cp_ref</span> <span class="o">=</span> <span class="kc">None</span> <span class="c1"># type: Coord</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cd_ref</span> <span class="o">=</span> <span class="kc">None</span> <span class="c1"># type: Coord</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elements_ref</span> <span class="o">=</span> <span class="kc">None</span> <span class="c1"># type: List[Element]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_op2_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="c1"># (List[Union[int, float]], str) -&gt; GRID</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a GRID card from the OP2.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        data : List[varies]</span>
<span class="sd">            a list of fields defined in OP2 format</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        .. todo:: Currently unused, but is tested by test_nodes.py</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">cp</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">xyz</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
        <span class="n">cd</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
        <span class="n">ps</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
        <span class="n">seid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">ps</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">ps</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">return</span> <span class="n">GRID</span><span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">xyz</span><span class="p">,</span> <span class="n">cp</span><span class="p">,</span> <span class="n">cd</span><span class="p">,</span> <span class="n">ps</span><span class="p">,</span> <span class="n">seid</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

<div class="viewcode-block" id="GRID.add_card"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRID.add_card">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">:</span> <span class="n">BDFCard</span><span class="p">,</span> <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="c1"># (Any, str) -&gt; GRID</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a GRID card from ``BDF.add_card(...)``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        card : BDFCard()</span>
<span class="sd">            a BDFCard object</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nfields</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
        <span class="c1">#: Node ID</span>
        <span class="n">nid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;nid&#39;</span><span class="p">)</span>

        <span class="c1">#: Grid point coordinate system</span>
        <span class="n">cp</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;cp&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1">#: node location in local frame</span>
        <span class="n">xyz</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;x1&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">),</span>
            <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;x2&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">),</span>
            <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;x3&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)]</span>

        <span class="k">if</span> <span class="n">nfields</span> <span class="o">&gt;</span> <span class="mi">6</span><span class="p">:</span>
            <span class="c1">#: Analysis coordinate system</span>
            <span class="n">cd</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;cd&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

            <span class="c1">#: SPC constraint</span>
            <span class="n">ps</span> <span class="o">=</span> <span class="n">components_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;ps&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="c1">#u(integer_or_blank(card, 7, &#39;ps&#39;, &#39;&#39;))</span>

            <span class="c1">#: Superelement ID</span>
            <span class="n">seid</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;seid&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;len(GRID card) = </span><span class="si">%i</span><span class="se">\n</span><span class="s1">card=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">),</span> <span class="n">card</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cd</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">ps</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">seid</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="n">GRID</span><span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">xyz</span><span class="p">,</span> <span class="n">cp</span><span class="p">,</span> <span class="n">cd</span><span class="p">,</span> <span class="n">ps</span><span class="p">,</span> <span class="n">seid</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span></div>

<div class="viewcode-block" id="GRID.validate"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRID.validate">[docs]</a>    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cp</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">),</span> <span class="s1">&#39;cp=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cp</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">nid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;nid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nid</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">cp</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;cp=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cp</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">cd</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;cd=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cd</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">seid</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;seid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">seid</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span></div>

<div class="viewcode-block" id="GRID.Nid"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRID.Nid">[docs]</a>    <span class="k">def</span> <span class="nf">Nid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the GRID ID</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        nid : int</span>
<span class="sd">            node ID</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">nid</span></div>

<div class="viewcode-block" id="GRID.Ps"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRID.Ps">[docs]</a>    <span class="k">def</span> <span class="nf">Ps</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the GRID-based SPC</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ps : str</span>
<span class="sd">            the GRID-based SPC</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ps</span></div>

<div class="viewcode-block" id="GRID.Cd"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRID.Cd">[docs]</a>    <span class="k">def</span> <span class="nf">Cd</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the output coordinate system</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        cd : int</span>
<span class="sd">            the output coordinate system</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cd_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cd</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cd_ref</span><span class="o">.</span><span class="n">cid</span></div>


<div class="viewcode-block" id="GRID.Cp"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRID.Cp">[docs]</a>    <span class="k">def</span> <span class="nf">Cp</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the analysis coordinate system</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        cp : int</span>
<span class="sd">            the analysis coordinate system</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cp_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cp</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cp_ref</span><span class="o">.</span><span class="n">cid</span></div>

<div class="viewcode-block" id="GRID.SEid"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRID.SEid">[docs]</a>    <span class="k">def</span> <span class="nf">SEid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the Superelement ID</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        seid : int</span>
<span class="sd">            the Superelement ID</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#if isinstance(self.seid, integer_types):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">seid</span></div>
        <span class="c1">#return self.seid.seid</span>

    <span class="k">def</span> <span class="nf">_verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xref</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Verifies all methods for this object work</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        xref : bool</span>
<span class="sd">            has this model been cross referenced</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Nid</span><span class="p">()</span>
        <span class="n">cp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cp</span><span class="p">()</span>
        <span class="n">cd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cd</span><span class="p">()</span>
        <span class="n">xyz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span>
        <span class="n">ps</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Ps</span><span class="p">()</span>
        <span class="n">seid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SEid</span><span class="p">()</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">xyz</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">),</span> <span class="s1">&#39;xyz=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">xyz</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">),</span> <span class="s1">&#39;nid=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">nid</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cp</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">),</span> <span class="s1">&#39;cp=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">cp</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cd</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">),</span> <span class="s1">&#39;cd=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">cd</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ps</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span> <span class="s1">&#39;ps=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ps</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">seid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">),</span> <span class="s1">&#39;seid=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">seid</span>
        <span class="k">if</span> <span class="n">xref</span><span class="p">:</span>
            <span class="n">pos_xyz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pos_xyz</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">),</span> <span class="s1">&#39;pos_xyz=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">pos_xyz</span>

<div class="viewcode-block" id="GRID.set_position"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRID.set_position">[docs]</a>    <span class="k">def</span> <span class="nf">set_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">,</span> <span class="n">xyz</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
                     <span class="n">cid</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">xref</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># (Any, np.ndarray, int) -&gt; None</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the GRID location</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        xyz : (3, ) float ndarray</span>
<span class="sd">            the location of the node.</span>
<span class="sd">        cp : int; default=0 (global)</span>
<span class="sd">            the analysis coordinate system</span>
<span class="sd">        xref : bool; default=True</span>
<span class="sd">            cross-references the coordinate system</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span> <span class="o">=</span> <span class="n">xyz</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by GRID nid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cp</span> <span class="o">=</span> <span class="n">cid</span>
        <span class="k">if</span> <span class="n">xref</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cp_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Coord</span><span class="p">(</span><span class="n">cid</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="GRID.get_position_no_xref"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRID.get_position_no_xref">[docs]</a>    <span class="k">def</span> <span class="nf">get_position_no_xref</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="c1"># (Any) -&gt; np.ndarray</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cp</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cp</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">cp</span>
        <span class="n">coord</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Coord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cp</span><span class="p">)</span>
        <span class="n">xyz</span> <span class="o">=</span> <span class="n">coord</span><span class="o">.</span><span class="n">transform_node_to_global_no_xref</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">xyz</span></div>

<div class="viewcode-block" id="GRID.get_position"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRID.get_position">[docs]</a>    <span class="k">def</span> <span class="nf">get_position</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the point in the global XYZ coordinate system.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        xyz : (3, ) float ndarray</span>
<span class="sd">            the position of the GRID in the global coordinate system</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">xyz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cp_ref</span><span class="o">.</span><span class="n">transform_node_to_global</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cp</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span>
            <span class="k">raise</span>
        <span class="k">return</span> <span class="n">xyz</span></div>

<div class="viewcode-block" id="GRID.get_position_assuming_rectangular"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRID.get_position_assuming_rectangular">[docs]</a>    <span class="k">def</span> <span class="nf">get_position_assuming_rectangular</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NDArray3float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the point in a coordinate system that has unit vectors</span>
<span class="sd">        in the referenced coordinate system, but is not transformed</span>
<span class="sd">        from a cylindrical/spherical system.  This is used by cards</span>
<span class="sd">        like CBAR/CBEAM for element offset vectors.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        xyz : (3, ) float ndarray</span>
<span class="sd">            the position of the GRID in the global coordinate system</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">xyz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cp_ref</span><span class="o">.</span><span class="n">transform_node_to_global</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cp</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span>
            <span class="k">raise</span>
        <span class="k">return</span> <span class="n">xyz</span></div>

<div class="viewcode-block" id="GRID.get_position_wrt_no_xref"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRID.get_position_wrt_no_xref">[docs]</a>    <span class="k">def</span> <span class="nf">get_position_wrt_no_xref</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">,</span> <span class="n">cid</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NDArray3float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;see get_position_wrt&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">cid</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">cp</span><span class="p">:</span> <span class="c1"># same coordinate system</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by GRID nid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nid</span><span class="p">)</span>

        <span class="c1"># converting the xyz point arbitrary-&gt;global</span>
        <span class="n">cp_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Coord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cp</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">cp_ref</span><span class="o">.</span><span class="n">transform_node_to_global_no_xref</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span>

        <span class="c1"># a matrix global-&gt;local matrix is found</span>
        <span class="n">coord_b</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Coord</span><span class="p">(</span><span class="n">cid</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">xyz</span> <span class="o">=</span> <span class="n">coord_b</span><span class="o">.</span><span class="n">transform_node_to_local</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">xyz</span></div>

<div class="viewcode-block" id="GRID.get_position_wrt"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRID.get_position_wrt">[docs]</a>    <span class="k">def</span> <span class="nf">get_position_wrt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">,</span> <span class="n">cid</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the location of the GRID which started in some arbitrary</span>
<span class="sd">        system and returns it in the desired coordinate system</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>
<span class="sd">        cid : int</span>
<span class="sd">            the desired coordinate ID</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        xyz : (3, ) float ndarray</span>
<span class="sd">            the position of the GRID in an arbitrary coordinate system</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">cid</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cp</span><span class="p">():</span> <span class="c1"># same coordinate system</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span>

        <span class="c1"># converting the xyz point arbitrary-&gt;global</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cp_ref</span><span class="o">.</span><span class="n">transform_node_to_global</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">)</span>

        <span class="c1"># a matrix global-&gt;local matrix is found</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by GRID nid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nid</span><span class="p">)</span>
        <span class="n">coord_b</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Coord</span><span class="p">(</span><span class="n">cid</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">xyz</span> <span class="o">=</span> <span class="n">coord_b</span><span class="o">.</span><span class="n">transform_node_to_local</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">xyz</span></div>

<div class="viewcode-block" id="GRID.cross_reference"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRID.cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">,</span> <span class="n">grdset</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>
<span class="sd">        grdset : GRDSET / None; default=None</span>
<span class="sd">            a GRDSET if available (default=None)</span>

<span class="sd">        .. note::  The gridset object will only update the fields that</span>
<span class="sd">                   have not been set</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">grdset</span><span class="p">:</span>
            <span class="c1"># update using a grdset object</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">cp</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cp_ref</span> <span class="o">=</span> <span class="n">grdset</span><span class="o">.</span><span class="n">cp_ref</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">cd</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cd</span> <span class="o">=</span> <span class="n">grdset</span><span class="o">.</span><span class="n">cd</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cd_ref</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cd_ref</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ps</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ps_ref</span> <span class="o">=</span> <span class="n">grdset</span><span class="o">.</span><span class="n">ps</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">seid</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">seid_ref</span> <span class="o">=</span> <span class="n">grdset</span><span class="o">.</span><span class="n">seid</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by GRID nid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cp_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Coord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cp</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cd</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cd_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Coord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cd</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="GRID.uncross_reference"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRID.uncross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">uncross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes cross-reference links&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cd_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cp_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elements_ref</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="GRID.raw_fields"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRID.raw_fields">[docs]</a>    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the fields in their unmodified form</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        fields : List[int/float/str]</span>
<span class="sd">            the fields that define the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;GRID&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cp</span><span class="p">()]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">)</span> <span class="o">+</span> \
                      <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">Cd</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">ps</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">SEid</span><span class="p">()]</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="GRID.repr_fields"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRID.repr_fields">[docs]</a>    <span class="k">def</span> <span class="nf">repr_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the fields in their simplified form</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        fields : List[int/float/str]</span>
<span class="sd">            the fields that define the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cp</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Cp</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">cd</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Cd</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">seid</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SEid</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;GRID&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span> <span class="n">cp</span><span class="p">]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="n">cd</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ps</span><span class="p">,</span>
                                                                 <span class="n">seid</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="GRID.write_card"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRID.write_card">[docs]</a>    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The writer method used by BDF.write_card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        size : int; default=8</span>
<span class="sd">            the size of the card (8/16)</span>
<span class="sd">        is_double : bool; default=False</span>
<span class="sd">            should this card be written with double precision</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        msg : str</span>
<span class="sd">            the card as a string</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">write_card_8</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">write_card_16</span><span class="p">(</span><span class="n">is_double</span><span class="p">)</span></div>

<div class="viewcode-block" id="GRID.write_card_8"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRID.write_card_8">[docs]</a>    <span class="k">def</span> <span class="nf">write_card_8</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Writes a GRID card in 8-field format&quot;&quot;&quot;</span>
        <span class="n">xyz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span>
        <span class="n">cp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cp</span><span class="p">()</span>
        <span class="n">cd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cd</span><span class="p">()</span>

        <span class="n">cps</span> <span class="o">=</span> <span class="n">set_string8_blank_if_default</span><span class="p">(</span><span class="n">cp</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">[</span><span class="n">cd</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ps</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">seid</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">]:</span>
            <span class="c1"># default</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;GRID    </span><span class="si">%8i%8s%s%s%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span> <span class="n">cps</span><span class="p">,</span>
                <span class="n">print_float_8</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                <span class="n">print_float_8</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                <span class="n">print_float_8</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cds</span> <span class="o">=</span> <span class="n">set_string8_blank_if_default</span><span class="p">(</span><span class="n">cd</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">seid</span> <span class="o">=</span> <span class="n">set_string8_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SEid</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;GRID    </span><span class="si">%8i%8s%s%s%s%s%8s%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span> <span class="n">cps</span><span class="p">,</span>
                <span class="n">print_float_8</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                <span class="n">print_float_8</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                <span class="n">print_float_8</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span>
                <span class="n">cds</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ps</span><span class="p">,</span> <span class="n">seid</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="GRID.write_card_16"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.GRID.write_card_16">[docs]</a>    <span class="k">def</span> <span class="nf">write_card_16</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Writes a GRID card in 16-field format&quot;&quot;&quot;</span>
        <span class="n">xyz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span>
        <span class="n">cp</span> <span class="o">=</span> <span class="n">set_string16_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Cp</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">cd</span> <span class="o">=</span> <span class="n">set_string16_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Cd</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">seid</span> <span class="o">=</span> <span class="n">set_string16_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SEid</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_double</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">[</span><span class="n">cd</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ps</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">seid</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">]:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;GRID*   </span><span class="si">%16i%16s%16s%16s</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="s1">&#39;*       </span><span class="si">%16s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span>
                           <span class="n">cp</span><span class="p">,</span>
                           <span class="n">print_scientific_double</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                           <span class="n">print_scientific_double</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                           <span class="n">print_scientific_double</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">2</span><span class="p">])))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;GRID*   </span><span class="si">%16i%16s%16s%16s</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="s1">&#39;*       </span><span class="si">%16s%16s%16s%16s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span>
                           <span class="n">cp</span><span class="p">,</span>
                           <span class="n">print_scientific_double</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                           <span class="n">print_scientific_double</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                           <span class="n">print_scientific_double</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span>
                           <span class="n">cd</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ps</span><span class="p">,</span> <span class="n">seid</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">[</span><span class="n">cd</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ps</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">seid</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">]:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;GRID*   </span><span class="si">%16i%16s%16s%16s</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="s1">&#39;*       </span><span class="si">%16s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span>
                           <span class="n">cp</span><span class="p">,</span>
                           <span class="n">print_float_16</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                           <span class="n">print_float_16</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                           <span class="n">print_float_16</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">2</span><span class="p">])))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;GRID*   </span><span class="si">%16i%16s%16s%16s</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="s1">&#39;*       </span><span class="si">%16s%16s%16s%16s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span>
                           <span class="n">cp</span><span class="p">,</span>
                           <span class="n">print_float_16</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                           <span class="n">print_float_16</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                           <span class="n">print_float_16</span><span class="p">(</span><span class="n">xyz</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span>
                           <span class="n">cd</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ps</span><span class="p">,</span> <span class="n">seid</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">msg</span></div></div>


<div class="viewcode-block" id="POINT"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.POINT">[docs]</a><span class="k">class</span> <span class="nc">POINT</span><span class="p">(</span><span class="n">BaseCard</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    +-------+-----+----+----+----+----+</span>
<span class="sd">    |   1   |  2  | 3  | 4  | 5  | 6  |</span>
<span class="sd">    +=======+=====+====+====+====+====+</span>
<span class="sd">    | POINT | NID | CP | X1 | X2 | X3 |</span>
<span class="sd">    +-------+-----+----+----+----+----+</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;POINT&#39;</span>
    <span class="n">_field_map</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;nid&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s1">&#39;cp&#39;</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">_get_field_helper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets complicated parameters on the POINT card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        n : int</span>
<span class="sd">            the field number to update</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        value : varies</span>
<span class="sd">            the value for the appropriate field</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Field </span><span class="si">%r</span><span class="s1"> is an invalid </span><span class="si">%s</span><span class="s1"> entry.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_update_field_helper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates complicated parameters on the POINT card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        n : int</span>
<span class="sd">            the field number to update</span>
<span class="sd">        value : varies</span>
<span class="sd">            the value for the appropriate field</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Field </span><span class="si">%r</span><span class="s1">=</span><span class="si">%r</span><span class="s1"> is an invalid </span><span class="si">%s</span><span class="s1"> entry.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">))</span>

<div class="viewcode-block" id="POINT._init_from_empty"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.POINT._init_from_empty">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_init_from_empty</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="n">nid</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">xyz</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">POINT</span><span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">xyz</span><span class="p">,</span> <span class="n">cp</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nid</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                 <span class="n">xyz</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">],</span>
                 <span class="n">cp</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates the POINT card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        nid : int</span>
<span class="sd">            node id</span>
<span class="sd">        xyz : (3, ) float ndarray; default=None -&gt; [0., 0., 0.]</span>
<span class="sd">            the xyz/r-theta-z/rho-theta-phi values</span>
<span class="sd">        cp : int; default=0</span>
<span class="sd">            coordinate system for the xyz location</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="k">if</span> <span class="n">xyz</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">xyz</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]</span>
        <span class="c1">#Node.__init__(self)</span>

        <span class="c1">#: Node ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nid</span> <span class="o">=</span> <span class="n">nid</span>

        <span class="c1">#: Grid point coordinate system</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cp</span> <span class="o">=</span> <span class="n">cp</span>

        <span class="c1">#: node location in local frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">xyz</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="o">.</span><span class="n">shape</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cp_ref</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="POINT.validate"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.POINT.validate">[docs]</a>    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">nid</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;nid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nid</span><span class="p">)</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">cp</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;cp=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cp</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span></div>

<div class="viewcode-block" id="POINT.add_card"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.POINT.add_card">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">:</span> <span class="n">BDFCard</span><span class="p">,</span> <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="c1"># type: (Any, str) -&gt; POINT</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a POINT card from ``BDF.add_card(...)``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        card : BDFCard()</span>
<span class="sd">            a BDFCard object</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;nid&#39;</span><span class="p">)</span>
        <span class="n">cp</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;cp&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
            <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;x1&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">),</span>
            <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;x2&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">),</span>
            <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;x3&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">)</span>

        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;len(POINT card) = </span><span class="si">%i</span><span class="se">\n</span><span class="s1">card=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">),</span> <span class="n">card</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">POINT</span><span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">xyz</span><span class="p">,</span> <span class="n">cp</span><span class="o">=</span><span class="n">cp</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span></div>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_op2_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="c1"># type: (List[Union[int, float]], str) -&gt; POINT</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a POINT card from the OP2</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        data : List[varies]</span>
<span class="sd">            a list of fields defined in OP2 format</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># type: int</span>
        <span class="n">cp</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># type: int</span>
        <span class="n">xyz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">5</span><span class="p">])</span> <span class="c1"># type: np.ndarray</span>
        <span class="k">return</span> <span class="n">POINT</span><span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">xyz</span><span class="p">,</span> <span class="n">cp</span><span class="o">=</span><span class="n">cp</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

<div class="viewcode-block" id="POINT.set_position"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.POINT.set_position">[docs]</a>    <span class="k">def</span> <span class="nf">set_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">xyz</span><span class="p">,</span> <span class="n">cid</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="c1"># type: (Any, np.ndarray, int) -&gt; None</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the POINT location</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        xyz : (3,) float ndarray</span>
<span class="sd">            the location of the node</span>
<span class="sd">        cp : int; default=0 (global)</span>
<span class="sd">            the analysis coordinate system</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span> <span class="o">=</span> <span class="n">xyz</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by POINT nid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cp</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Coord</span><span class="p">(</span><span class="n">cid</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="POINT.get_position"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.POINT.get_position">[docs]</a>    <span class="k">def</span> <span class="nf">get_position</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NDArray3float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the point in the global XYZ coordinate system.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        position : (3,) float ndarray</span>
<span class="sd">            the position of the POINT in the globaly coordinate system</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cp_ref</span><span class="o">.</span><span class="n">transform_node_to_global</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">p</span></div>

<div class="viewcode-block" id="POINT.get_position_wrt"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.POINT.get_position_wrt">[docs]</a>    <span class="k">def</span> <span class="nf">get_position_wrt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">cid</span><span class="p">):</span>
        <span class="c1"># type: (Any, int) -&gt; np.ndarray</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the location of the POINT which started in some arbitrary</span>
<span class="sd">        system and returns it in the desired coordinate system</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF model object</span>
<span class="sd">        cid : int</span>
<span class="sd">            the desired coordinate ID</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        xyz : (3,) ndarray</span>
<span class="sd">            the position of the POINT in an arbitrary coordinate system</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">cid</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cp</span><span class="p">():</span> <span class="c1"># same coordinate system</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">xyz</span>

        <span class="c1"># converting the xyz point arbitrary-&gt;global</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cp_ref</span><span class="o">.</span><span class="n">transform_node_to_global</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">)</span>

        <span class="c1"># a matrix global-&gt;local matrix is found</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by POINT nid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nid</span><span class="p">)</span>
        <span class="n">coord_b</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Coord</span><span class="p">(</span><span class="n">cid</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">xyz</span> <span class="o">=</span> <span class="n">coord_b</span><span class="o">.</span><span class="n">transform_node_to_local</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">xyz</span></div>

<div class="viewcode-block" id="POINT.Cp"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.POINT.Cp">[docs]</a>    <span class="k">def</span> <span class="nf">Cp</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the analysis coordinate system</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        cp : int</span>
<span class="sd">            the analysis coordinate system</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cp_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cp</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cp_ref</span><span class="o">.</span><span class="n">cid</span></div>

<div class="viewcode-block" id="POINT.cross_reference"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.POINT.cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># type: (Any) -&gt; None</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cp_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Coord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cp</span><span class="p">)</span></div>

<div class="viewcode-block" id="POINT.uncross_reference"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.POINT.uncross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">uncross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes cross-reference links&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cp_ref</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cp</span><span class="p">()</span></div>

<div class="viewcode-block" id="POINT.raw_fields"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.POINT.raw_fields">[docs]</a>    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="kc">None</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the fields in their unmodified form</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        fields : list[varies]</span>
<span class="sd">            the fields that define the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;POINT&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cp</span><span class="p">()]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="POINT.repr_fields"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.POINT.repr_fields">[docs]</a>    <span class="k">def</span> <span class="nf">repr_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the fields in their simplified form</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        fields : list[varies]</span>
<span class="sd">            the fields that define the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cp</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Cp</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;POINT&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span> <span class="n">cp</span><span class="p">]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xyz</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="POINT.write_card"><a class="viewcode-back" href="../../../../reference/bdf/cards/pyNastran.bdf.cards.nodes.html#pyNastran.bdf.cards.nodes.POINT.write_card">[docs]</a>    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The writer method used by BDF.write_card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        size : int</span>
<span class="sd">            the size of the card (8/16)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">card</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repr_fields</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_8</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">is_double</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_double</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_16</span><span class="p">(</span><span class="n">card</span><span class="p">)</span></div></div>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Steven Doyle.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>