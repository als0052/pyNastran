

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>pyNastran.bdf.cards.elements.shell &mdash; pyNastran 1.4-dev 1.4-dev documentation</title>
  

  
  <link rel="stylesheet" href="../../../../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../_static/jquery.js"></script>
        <script src="../../../../../_static/underscore.js"></script>
        <script src="../../../../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../index.html" class="icon icon-home"> pyNastran 1.4-dev
          

          
            
            <img src="../../../../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.4-dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../quick_start/index.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../how_to/index.html">How To: pyNastran</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../reference/pyNastran.html">pyNastran Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../manual/index.html">pyNastran Manual</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">pyNastran 1.4-dev</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../../index.html">Module code</a> &raquo;</li>
        
      <li>pyNastran.bdf.cards.elements.shell</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pyNastran.bdf.cards.elements.shell</h1><div class="highlight"><pre>
<span></span><span class="c1">## pylint: disable=C0103</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">All shell elements are defined in this file.  This includes:</span>

<span class="sd"> * CTRIA3</span>
<span class="sd"> * CTRIA6</span>

<span class="sd"> * CSHEAR</span>

<span class="sd"> * CQUAD</span>
<span class="sd"> * CQUAD4</span>
<span class="sd"> * CQUAD8</span>
<span class="sd"> * CQUADR</span>

<span class="sd"> * CPLTSN3</span>
<span class="sd"> * CPLSTN4</span>
<span class="sd"> * CPLSTN6</span>
<span class="sd"> * CPLSTN8</span>
<span class="sd"> * SNORM</span>

<span class="sd">All tris are TriShell, ShellElement, and Element objects.</span>
<span class="sd">All quads are QuadShell, ShellElement, and Element objects.</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">TYPE_CHECKING</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">cross</span><span class="p">,</span> <span class="n">allclose</span>
<span class="kn">from</span> <span class="nn">numpy.linalg</span> <span class="kn">import</span> <span class="n">norm</span>  <span class="c1"># type: ignore</span>

<span class="kn">from</span> <span class="nn">pyNastran.utils.numpy_utils</span> <span class="kn">import</span> <span class="n">integer_types</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.field_writer_8</span> <span class="kn">import</span> <span class="n">set_blank_if_default</span><span class="p">,</span> <span class="n">print_float_8</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.cards.base_card</span> <span class="kn">import</span> <span class="n">Element</span><span class="p">,</span> <span class="n">BaseCard</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.bdf_interface.assign_type</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">integer</span><span class="p">,</span> <span class="n">integer_or_blank</span><span class="p">,</span> <span class="n">double_or_blank</span><span class="p">,</span> <span class="n">integer_double_or_blank</span><span class="p">,</span> <span class="n">blank</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.field_writer_8</span> <span class="kn">import</span> <span class="n">print_card_8</span><span class="p">,</span> <span class="n">print_field_8</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.field_writer_16</span> <span class="kn">import</span> <span class="n">print_card_16</span><span class="p">,</span> <span class="n">print_field_16</span>
<span class="kn">from</span> <span class="nn">pyNastran.bdf.cards.utils</span> <span class="kn">import</span> <span class="n">wipe_empty_fields</span>
<span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
    <span class="kn">from</span> <span class="nn">pyNastran.bdf.bdf</span> <span class="kn">import</span> <span class="n">BDF</span>
    <span class="kn">from</span> <span class="nn">pyNastran.nptyping</span> <span class="kn">import</span> <span class="n">NDArray3float</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;CTRIA3&#39;</span><span class="p">,</span> <span class="s1">&#39;CTRIA6&#39;</span><span class="p">,</span> <span class="s1">&#39;CSHEAR&#39;</span><span class="p">,</span>
           <span class="s1">&#39;CQUAD&#39;</span><span class="p">,</span> <span class="s1">&#39;CQUAD4&#39;</span><span class="p">,</span> <span class="s1">&#39;CQUAD8&#39;</span><span class="p">,</span> <span class="s1">&#39;CQUADR&#39;</span><span class="p">,</span>
           <span class="s1">&#39;CPLSTN3&#39;</span><span class="p">,</span> <span class="s1">&#39;CPLSTN4&#39;</span><span class="p">,</span> <span class="s1">&#39;CPLSTN6&#39;</span><span class="p">,</span> <span class="s1">&#39;CPLSTN8&#39;</span><span class="p">,</span>
           <span class="s1">&#39;CPLSTS3&#39;</span><span class="p">,</span> <span class="s1">&#39;CPLSTS4&#39;</span><span class="p">,</span> <span class="s1">&#39;CPLSTS6&#39;</span><span class="p">,</span> <span class="s1">&#39;CPLSTS8&#39;</span><span class="p">,</span>
           <span class="s1">&#39;_triangle_area_centroid_normal&#39;</span><span class="p">,</span> <span class="s1">&#39;_normal&#39;</span><span class="p">,</span>
           <span class="s1">&#39;transform_shell_material_coordinate_system&#39;</span><span class="p">]</span>

<div class="viewcode-block" id="_triangle_area_centroid_normal"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell._triangle_area_centroid_normal">[docs]</a><span class="k">def</span> <span class="nf">_triangle_area_centroid_normal</span><span class="p">(</span><span class="n">nodes</span><span class="p">,</span> <span class="n">card</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the area, centroid and normal for a triangle.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    nodes : List[np.ndarray]</span>
<span class="sd">        List of three triangle vertices.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    area : float</span>
<span class="sd">        Area of triangle.</span>
<span class="sd">    centroid : ndarray</span>
<span class="sd">        Centroid of triangle.</span>
<span class="sd">    unit_normal : ndarray</span>
<span class="sd">        Unit normal of triangles.</span>
<span class="sd">    card : CTRIA3(), CTRIA6()</span>
<span class="sd">        the self parameter</span>

<span class="sd">    ::</span>

<span class="sd">      n = Normal = a x b</span>
<span class="sd">      Area = 1/2 * |a x b|</span>
<span class="sd">      V = &lt;v1,v2,v3&gt;</span>
<span class="sd">      |V| = sqrt(v1^0.5+v2^0.5+v3^0.5) = norm(V)</span>

<span class="sd">      Area = 0.5 * |n|</span>
<span class="sd">      unit_normal = n/|n|</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">)</span> <span class="o">=</span> <span class="n">nodes</span>
    <span class="n">vector</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">n1</span> <span class="o">-</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n1</span> <span class="o">-</span> <span class="n">n3</span><span class="p">)</span>
    <span class="n">length</span> <span class="o">=</span> <span class="n">norm</span><span class="p">(</span><span class="n">vector</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">vector</span> <span class="o">/</span> <span class="n">length</span>
    <span class="k">except</span> <span class="ne">FloatingPointError</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
        <span class="c1">#CTRIA3     20152     701   20174   20175   20176    8020</span>
        <span class="c1">#vector: [ 0.  0.  0.]; length: 0.0</span>
            <span class="c1">#[207.42750549, 0.0, -0.22425441]</span>
            <span class="c1">#[207.42750549, 0.0, 0.00631836]</span>
            <span class="c1">#[207.42750549, 0.0, 0.69803673]</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">error</span><span class="o">.</span><span class="n">message</span> <span class="c1"># strerror</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">vector: </span><span class="si">%s</span><span class="s1">; length: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">vector</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">  </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n1</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span> <span class="n">n2</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span> <span class="n">n3</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">allclose</span><span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">normal</span><span class="p">),</span> <span class="mf">1.</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;function _triangle_area_centroid_normal, check...</span><span class="se">\n</span><span class="s1">&#39;</span>
               <span class="s1">&#39;a = </span><span class="si">{0}</span><span class="se">\n</span><span class="s1">b = </span><span class="si">{1}</span><span class="se">\n</span><span class="s1">normal = </span><span class="si">{2}</span><span class="se">\n</span><span class="s1">length = </span><span class="si">{3}</span><span class="se">\n</span><span class="si">{4}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                   <span class="n">n1</span> <span class="o">-</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n1</span> <span class="o">-</span> <span class="n">n3</span><span class="p">,</span> <span class="n">normal</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">card</span><span class="p">)))</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">length</span><span class="p">,</span> <span class="p">(</span><span class="n">n1</span> <span class="o">+</span> <span class="n">n2</span> <span class="o">+</span> <span class="n">n3</span><span class="p">)</span> <span class="o">/</span> <span class="mf">3.</span><span class="p">,</span> <span class="n">normal</span><span class="p">)</span></div>


<div class="viewcode-block" id="_normal"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell._normal">[docs]</a><span class="k">def</span> <span class="nf">_normal</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Finds the unit normal vector of 2 vectors&quot;&quot;&quot;</span>
    <span class="n">vector</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="n">normal</span> <span class="o">=</span> <span class="n">vector</span> <span class="o">/</span> <span class="n">norm</span><span class="p">(</span><span class="n">vector</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">allclose</span><span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">normal</span><span class="p">),</span> <span class="mf">1.</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;function _normal, check...</span><span class="se">\n</span><span class="s1">&#39;</span>
               <span class="s1">&#39;a = </span><span class="si">{0}</span><span class="se">\n</span><span class="s1">b = </span><span class="si">{1}</span><span class="se">\n</span><span class="s1">normal = </span><span class="si">{2}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                   <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">normal</span><span class="p">))</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">normal</span></div>

<span class="k">def</span> <span class="nf">_normal4</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">card</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Finds the unit normal vector of 2 vectors&quot;&quot;&quot;</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">n1</span> <span class="o">-</span> <span class="n">n3</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">n2</span> <span class="o">-</span> <span class="n">n4</span>
    <span class="n">vector</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="n">normal</span> <span class="o">=</span> <span class="n">vector</span> <span class="o">/</span> <span class="n">norm</span><span class="p">(</span><span class="n">vector</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">allclose</span><span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">normal</span><span class="p">),</span> <span class="mf">1.</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;function _normal4, check...</span><span class="se">\n</span><span class="s1">&#39;</span>
               <span class="sa">f</span><span class="s1">&#39;a = </span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="se">\n</span><span class="s1">b = </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="se">\n</span><span class="s1">normal = </span><span class="si">{</span><span class="n">normal</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">card</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">normal</span>


<span class="k">class</span> <span class="nc">ShellElement</span><span class="p">(</span><span class="n">Element</span><span class="p">):</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;ShellElement&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">Element</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">Theta_mcid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># () -&gt; int</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span><span class="o">.</span><span class="n">cid</span>

    <span class="k">def</span> <span class="nf">_get_theta_mcid_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># : () -&gt; str</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set_blank_if_default doesn&#39;t distinguish between 0 and 0.0,</span>
<span class="sd">        so we fix it</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">theta_mcid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Theta_mcid</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
            <span class="n">theta_mcid</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">theta_mcid</span>

    <span class="k">def</span> <span class="nf">Thickness</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the thickness&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">Thickness</span><span class="p">()</span>

    <span class="c1">#def Volume(self):</span>
        <span class="c1">#&quot;&quot;&quot;</span>
        <span class="c1">#Returns the volume</span>
        <span class="c1">#&quot;&quot;&quot;</span>
        <span class="c1">#return self.Thickness() * self.Area()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">material_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the material</span>

<span class="sd">        .. todo:: possibly remove this</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">material_ids</span>

    <span class="k">def</span> <span class="nf">mid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the material</span>

<span class="sd">        .. todo:: possibly remove this</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">mid</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">Mid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the material ID</span>

<span class="sd">        .. todo:: possibly remove this</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">Mid</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">Nsm</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the non-structural mass&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">Nsm</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">MassPerArea</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the mass per area&quot;&quot;&quot;</span>
        <span class="n">tscales</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_thickness_scale</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">MassPerArea</span><span class="p">(</span><span class="n">tflag</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tflag</span><span class="p">,</span> <span class="n">tscales</span><span class="o">=</span><span class="n">tscales</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">Mass</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        .. math:: m = \frac{m}{A} A  \f]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">A</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Area</span><span class="p">()</span>
        <span class="n">tscales</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_thickness_scale</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">mpa</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">MassPerArea</span><span class="p">(</span><span class="n">tflag</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tflag</span><span class="p">,</span> <span class="n">tscales</span><span class="o">=</span><span class="n">tscales</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="p">)</span>
            <span class="k">raise</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">mpa</span> <span class="o">*</span> <span class="n">A</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;mass/area=</span><span class="si">%s</span><span class="s1"> area=</span><span class="si">%s</span><span class="s1"> prop_type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">mpa</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">Mass_breakdown</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        .. math:: m = \frac{m}{A} A  \f]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">A</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Area</span><span class="p">()</span>
        <span class="n">mpa</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">MassPerArea_structure</span><span class="p">()</span>
        <span class="n">nsm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">nsm</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">mpa</span> <span class="o">*</span> <span class="n">A</span><span class="p">,</span> <span class="n">nsm</span> <span class="o">*</span> <span class="n">A</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;mass/area=</span><span class="si">%s</span><span class="s1"> area=</span><span class="si">%s</span><span class="s1"> prop_type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">mpa</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">Mass_no_xref</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        .. math:: m = \frac{m}{A} A  \f]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">A</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Area_no_xref</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
        <span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">)</span>
        <span class="n">tavg_scale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_thickness_scale</span><span class="p">()</span>
        <span class="n">mpa</span> <span class="o">=</span> <span class="n">pid_ref</span><span class="o">.</span><span class="n">MassPerArea_no_xref</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">tavg_scale</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">mpa</span> <span class="o">*</span> <span class="n">A</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;mass/area=</span><span class="si">%s</span><span class="s1"> area=</span><span class="si">%s</span><span class="s1"> prop_type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">mpa</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="c1">#def flip_normal(self):</span>
        <span class="c1">#raise NotImplementedError(&#39;flip_normal undefined for %s&#39; % self.type)</span>


<span class="k">class</span> <span class="nc">TriShell</span><span class="p">(</span><span class="n">ShellElement</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ShellElement</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: Optional[List[Any]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: Optional[Any]</span>

    <span class="k">def</span> <span class="nf">get_edge_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the edge IDs&quot;&quot;&quot;</span>
        <span class="n">node_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="nb">tuple</span><span class="p">(</span><span class="nb">sorted</span><span class="p">([</span><span class="n">node_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">node_ids</span><span class="p">[</span><span class="mi">1</span><span class="p">]])),</span>
            <span class="nb">tuple</span><span class="p">(</span><span class="nb">sorted</span><span class="p">([</span><span class="n">node_ids</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">node_ids</span><span class="p">[</span><span class="mi">2</span><span class="p">]])),</span>
            <span class="nb">tuple</span><span class="p">(</span><span class="nb">sorted</span><span class="p">([</span><span class="n">node_ids</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">node_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">]]))</span>
        <span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_edge_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span>
        <span class="n">g1</span> <span class="o">=</span> <span class="n">n1</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
        <span class="n">g2</span> <span class="o">=</span> <span class="n">n2</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
        <span class="n">g3</span> <span class="o">=</span> <span class="n">n3</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">g2</span> <span class="o">-</span> <span class="n">g1</span>
        <span class="n">yprime</span> <span class="o">=</span> <span class="n">g3</span> <span class="o">-</span> <span class="n">g1</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">yprime</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>


    <span class="k">def</span> <span class="nf">Thickness</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the thickness&quot;&quot;&quot;</span>
        <span class="n">tscales</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_thickness_scale</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">Thickness</span><span class="p">(</span><span class="n">tflag</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tflag</span><span class="p">,</span> <span class="n">tscales</span><span class="o">=</span><span class="n">tscales</span><span class="p">)</span>
        <span class="c1">#return self.pid_ref.Thickness()</span>

    <span class="k">def</span> <span class="nf">AreaCentroidNormal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns area,centroid, normal as it&#39;s more efficient to do them</span>
<span class="sd">        together</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        area : float</span>
<span class="sd">               the area</span>
<span class="sd">        centroid : (3,) array</span>
<span class="sd">               the centroid</span>
<span class="sd">        normal : (3,) array</span>
<span class="sd">               the normal vector</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">_triangle_area_centroid_normal</span><span class="p">([</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">],</span> <span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_area</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;see ``TriShell.Area()``&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Area</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">Area</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the area, :math:`A`.</span>

<span class="sd">        .. math:: A = \frac{1}{2} \lvert (n_0-n_1) \times (n_0-n_2) \rvert&quot;&quot;&quot;</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">n1</span> <span class="o">-</span> <span class="n">n2</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">n1</span> <span class="o">-</span> <span class="n">n3</span>
        <span class="n">area</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">norm</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">area</span>

    <span class="k">def</span> <span class="nf">Normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># () -&gt; np.ndarray</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the normal vector, :math:`n`.</span>

<span class="sd">        .. math::</span>
<span class="sd">          n = \frac{(n_0-n_1) \times (n_0-n_2)}</span>
<span class="sd">             {\lvert (n_0-n_1) \times (n_0-n_2) \lvert}</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">_normal</span><span class="p">(</span><span class="n">n1</span> <span class="o">-</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n1</span> <span class="o">-</span> <span class="n">n3</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;ERROR computing normal vector for eid=</span><span class="si">%i</span><span class="s1">.</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;  nid1=</span><span class="si">%i</span><span class="s1"> n1=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span> <span class="n">n1</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;  nid2=</span><span class="si">%i</span><span class="s1"> n2=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span> <span class="n">n2</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;  nid3=</span><span class="si">%i</span><span class="s1"> n3=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span> <span class="n">n3</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">Centroid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># () -&gt; np.ndarray</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the centroid.</span>

<span class="sd">        .. math::</span>
<span class="sd">          CG = \frac{1}{3} (n_0+n_1+n_2)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
        <span class="n">centroid</span> <span class="o">=</span> <span class="p">(</span><span class="n">n1</span> <span class="o">+</span> <span class="n">n2</span> <span class="o">+</span> <span class="n">n3</span><span class="p">)</span> <span class="o">/</span> <span class="mf">3.</span>
        <span class="k">return</span> <span class="n">centroid</span>

    <span class="k">def</span> <span class="nf">center_of_mass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># () -&gt; np.ndarray</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Centroid</span><span class="p">()</span>

    <span class="c1">#def uncross_reference(self):</span>
        <span class="c1">#self.nodes = self.node_ids</span>
        <span class="c1">#self.pid = self.Pid()</span>
        <span class="c1">#del self.nodes_ref, self.pid_ref</span>

    <span class="k">def</span> <span class="nf">material_coordinate_system</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">normal</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xyz123</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determines the material coordinate system</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        normal (3, ) float ndarray</span>
<span class="sd">            the unit normal vector</span>
<span class="sd">        xyz123 (3, 3) float ndarray</span>
<span class="sd">            the xyz coordinates</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        centroid (3, ) float ndarray</span>
<span class="sd">            the centroid of the element</span>
<span class="sd">        imat (3, ) float ndarray</span>
<span class="sd">            the element unit i vector</span>
<span class="sd">        jmat (3, ) float ndarray</span>
<span class="sd">            the element unit j vector</span>
<span class="sd">        normal (3, ) float ndarray</span>
<span class="sd">            the unit normal vector</span>

<span class="sd">        .. todo:: rotate the coordinate system by the angle theta</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">normal</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">normal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Normal</span><span class="p">()</span> <span class="c1"># k = kmat</span>

        <span class="k">if</span> <span class="n">xyz123</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">xyz1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
            <span class="n">xyz2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
            <span class="n">xyz3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
            <span class="c1">#centroid = (xyz1 + xyz2 + xyz3) / 3.</span>
            <span class="c1">#centroid = self.Centroid()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#centroid = xyz1234.sum(axis=1)</span>
            <span class="c1">#assert len(centroid) == 3, centroid</span>
            <span class="n">xyz1</span> <span class="o">=</span> <span class="n">xyz123</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">xyz2</span> <span class="o">=</span> <span class="n">xyz123</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">xyz3</span> <span class="o">=</span> <span class="n">xyz123</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span>
        <span class="n">centroid</span> <span class="o">=</span> <span class="p">(</span><span class="n">xyz1</span> <span class="o">+</span> <span class="n">xyz2</span> <span class="o">+</span> <span class="n">xyz3</span><span class="p">)</span> <span class="o">/</span> <span class="mf">3.</span>
        <span class="n">imat</span><span class="p">,</span> <span class="n">jmat</span> <span class="o">=</span> <span class="n">_material_coordinate_system</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">normal</span><span class="p">,</span> <span class="n">xyz1</span><span class="p">,</span> <span class="n">xyz2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">centroid</span><span class="p">,</span> <span class="n">imat</span><span class="p">,</span> <span class="n">jmat</span><span class="p">,</span> <span class="n">normal</span>


<span class="k">def</span> <span class="nf">_material_coordinate_system</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">normal</span><span class="p">,</span> <span class="n">xyz1</span><span class="p">,</span> <span class="n">xyz2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;helper function for material_coordinate_system&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;theta_mcid=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">element</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;mcid=</span><span class="si">{</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="si">}</span><span class="s1"> not found for</span><span class="se">\n</span><span class="si">{</span><span class="n">element</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">theta_mcid_ref</span><span class="o">.</span><span class="n">i</span>
        <span class="n">jmat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="c1"># k x i</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">jmat</span> <span class="o">/=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">jmat</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">FloatingPointError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Cannot project i-axis onto element normal i=</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1"> normal=</span><span class="si">{</span><span class="n">normal</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">element</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1"># we do an extra normalization here because</span>
        <span class="c1"># we had to project i onto the elemental plane</span>
        <span class="c1"># unlike in the next block</span>
        <span class="n">imat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">jmat</span><span class="p">,</span> <span class="n">normal</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
        <span class="c1"># TODO: rotate by the angle theta</span>
        <span class="n">imat</span> <span class="o">=</span> <span class="n">xyz2</span> <span class="o">-</span> <span class="n">xyz1</span>
        <span class="n">imat</span> <span class="o">/=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">imat</span><span class="p">)</span>
        <span class="n">jmat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">imat</span><span class="p">)</span> <span class="c1"># k x i</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">jmat</span> <span class="o">/=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">jmat</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">FloatingPointError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Cannot project i-axis onto element normal i=</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1"> normal=</span><span class="si">{</span><span class="n">normal</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">element</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">imat</span><span class="p">,</span> <span class="n">jmat</span>


<div class="viewcode-block" id="CTRIA3"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA3">[docs]</a><span class="k">class</span> <span class="nc">CTRIA3</span><span class="p">(</span><span class="n">TriShell</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    +--------+-------+-------+----+----+----+------------+---------+</span>
<span class="sd">    |   1    |   2   |   3   |  4 |  5 |  6 |     7      |    8    |</span>
<span class="sd">    +========+=======+=======+=====+===+====+============+=========+</span>
<span class="sd">    | CTRIA3 |  EID  |  PID  | N1 | N2 | N3 | THETA/MCID | ZOFFSET |</span>
<span class="sd">    +--------+-------+-------+----+----+----+------------+---------+</span>
<span class="sd">    |        |       | TFLAG | T1 | T2 | T3 |            |         |</span>
<span class="sd">    +--------+-------+-------+----+----+----+------------+---------+</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;CTRIA3&#39;</span>
    <span class="n">_field_map</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;eid&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span><span class="s1">&#39;theta_mcid&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span><span class="s1">&#39;zoffset&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span><span class="s1">&#39;tflag&#39;</span><span class="p">,</span>
        <span class="mi">11</span><span class="p">:</span><span class="s1">&#39;T1&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span><span class="s1">&#39;T2&#39;</span><span class="p">,</span> <span class="mi">13</span><span class="p">:</span><span class="s1">&#39;T3&#39;</span><span class="p">}</span>
    <span class="n">cp_name_map</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;T1&#39;</span> <span class="p">:</span> <span class="s1">&#39;T1&#39;</span><span class="p">,</span>
        <span class="s1">&#39;T2&#39;</span> <span class="p">:</span> <span class="s1">&#39;T2&#39;</span><span class="p">,</span>
        <span class="s1">&#39;T3&#39;</span> <span class="p">:</span> <span class="s1">&#39;T3&#39;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">_properties</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;cp_name_map&#39;</span><span class="p">,</span> <span class="s1">&#39;_field_map&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_update_field_helper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># (int, Any) -&gt; None</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Field </span><span class="si">%r</span><span class="s1">=</span><span class="si">%r</span><span class="s1"> is an invalid </span><span class="si">%s</span><span class="s1"> entry.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">))</span>

<div class="viewcode-block" id="CTRIA3.export_to_hdf5"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA3.export_to_hdf5">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">export_to_hdf5</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">h5_file</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">eids</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;exports the elements in a vectorized way&quot;&quot;&quot;</span>
        <span class="c1">#comments = []</span>
        <span class="n">pids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">mcids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">thetas</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">zoffsets</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">#t123 = []</span>
        <span class="k">for</span> <span class="n">eid</span> <span class="ow">in</span> <span class="n">eids</span><span class="p">:</span>
            <span class="n">element</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">eid</span><span class="p">]</span>
            <span class="c1">#comments.append(element.comment)</span>
            <span class="n">pids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">pid</span><span class="p">)</span>
            <span class="n">nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="n">mcid</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span>
                <span class="n">theta</span> <span class="o">=</span> <span class="mf">0.</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">)</span>
                <span class="n">mcid</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
                <span class="n">theta</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span>
            <span class="n">mcids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mcid</span><span class="p">)</span>
            <span class="n">thetas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
            <span class="n">zoffsets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">zoffset</span><span class="p">)</span>
            <span class="c1">#t123.append([element.T1, element.T2, element.T3])</span>
        <span class="c1">#h5_file.create_dataset(&#39;_comment&#39;, data=comments)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;eid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">eids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">pids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;nodes&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">nodes</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;mcid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">mcids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">thetas</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;zoffset&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">zoffsets</span><span class="p">)</span></div>
        <span class="c1">#self.tflag = tflag</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">zoffset</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
                 <span class="n">tflag</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">T1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">T2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">T3</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="c1"># (int, int, List[int], float, Union[int, float], int, Optional[float], Optional[float], Optional[float], str) -&gt; None</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a CTRIA3 card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        eid : int</span>
<span class="sd">            element id</span>
<span class="sd">        pid : int</span>
<span class="sd">            property id (PSHELL/PCOMP/PCOMPG)</span>
<span class="sd">        nids : List[int, int, int]</span>
<span class="sd">            node ids</span>
<span class="sd">        zoffset : float; default=0.0</span>
<span class="sd">            Offset from the surface of grid points to the element reference</span>
<span class="sd">            plane.  Requires MID1 and MID2.</span>
<span class="sd">        theta_mcid : float; default=0.0</span>
<span class="sd">            float : material coordinate system angle (theta) is defined</span>
<span class="sd">                    relative to the element coordinate system</span>
<span class="sd">            int : x-axis from material coordinate system angle defined by</span>
<span class="sd">                  mcid is projected onto the element</span>
<span class="sd">        tflag : int; default=0</span>
<span class="sd">            0 : Ti are actual user specified thicknesses</span>
<span class="sd">            1 : Ti are fractions relative to the T value of the PSHELL</span>
<span class="sd">        T1 / T2 / T3 : float; default=None</span>
<span class="sd">            If it is not supplied, then T1 through T3 will be set equal</span>
<span class="sd">            to the value of T on the PSHELL entry.</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">TriShell</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eid</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="n">pid</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">nids</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">,</span> <span class="n">nids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_node_ids</span><span class="p">(</span><span class="n">nids</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoffset</span> <span class="o">=</span> <span class="n">zoffset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span> <span class="o">=</span> <span class="n">theta_mcid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tflag</span> <span class="o">=</span> <span class="n">tflag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T1</span> <span class="o">=</span> <span class="n">T1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T2</span> <span class="o">=</span> <span class="n">T2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T3</span> <span class="o">=</span> <span class="n">T3</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: Optional[Any]</span>

<div class="viewcode-block" id="CTRIA3.validate"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA3.validate">[docs]</a>    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">))</span> <span class="o">==</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;nodes=</span><span class="si">%s</span><span class="s1">; n=</span><span class="si">%s</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">)),</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_op2_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CTRIA3 card from the OP2</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        data : List[varies]</span>
<span class="sd">            a list of fields defined in OP2 format</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>

        <span class="n">theta_mcid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
        <span class="n">zoffset</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
        <span class="n">tflag</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
        <span class="n">T1</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span>
        <span class="n">T2</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>
        <span class="n">T3</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">T1</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">:</span>
            <span class="n">T1</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">if</span> <span class="n">T2</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">:</span>
            <span class="n">T2</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">if</span> <span class="n">T3</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">:</span>
            <span class="n">T3</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">assert</span> <span class="n">tflag</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">data</span>
        <span class="k">return</span> <span class="n">CTRIA3</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">zoffset</span><span class="o">=</span><span class="n">zoffset</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="o">=</span><span class="n">theta_mcid</span><span class="p">,</span>
                      <span class="n">tflag</span><span class="o">=</span><span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="o">=</span><span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="o">=</span><span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="o">=</span><span class="n">T3</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

<div class="viewcode-block" id="CTRIA3.add_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA3.add_card">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="c1"># type: (Any, str) -&gt; CTRIA3</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CTRIA3 card from ``BDF.add_card(...)``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        card : BDFCard()</span>
<span class="sd">            a BDFCard object</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#: Element ID</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;eid&#39;</span><span class="p">)</span>
        <span class="c1">#: Property ID</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="n">eid</span><span class="p">)</span>

        <span class="n">nids</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;n1&#39;</span><span class="p">),</span>
            <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;n2&#39;</span><span class="p">),</span>
            <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;n3&#39;</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">6</span><span class="p">:</span>
            <span class="n">theta_mcid</span> <span class="o">=</span> <span class="n">integer_double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;theta_mcid&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
            <span class="n">zoffset</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;zoffset&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
            <span class="n">blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;blank&#39;</span><span class="p">)</span>
            <span class="n">blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;blank&#39;</span><span class="p">)</span>

            <span class="n">tflag</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;tflag&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">T1</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;T1&#39;</span><span class="p">)</span>
            <span class="n">T2</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;T2&#39;</span><span class="p">)</span>
            <span class="n">T3</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="s1">&#39;T3&#39;</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">14</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;len(CTRIA3 card) = </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span><span class="si">:</span><span class="s1">d</span><span class="si">}</span><span class="se">\n</span><span class="s1">card=</span><span class="si">{</span><span class="n">card</span><span class="si">}</span><span class="se">\n</span><span class="s1"> tflag=</span><span class="si">{</span><span class="n">tflag</span><span class="si">}</span><span class="s1"> T123=[</span><span class="si">{</span><span class="n">T1</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">T2</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="n">T3</span><span class="si">}</span><span class="s1">]&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">theta_mcid</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="n">zoffset</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="n">tflag</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">T1</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">T2</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">T3</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">CTRIA3</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">zoffset</span><span class="o">=</span><span class="n">zoffset</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="o">=</span><span class="n">theta_mcid</span><span class="p">,</span>
                      <span class="n">tflag</span><span class="o">=</span><span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="o">=</span><span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="o">=</span><span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="o">=</span><span class="n">T3</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span></div>

<div class="viewcode-block" id="CTRIA3.cross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA3.cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by CTRIA3 eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">(),</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Coord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CTRIA3.safe_cross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA3.safe_cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">safe_cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by CTRIA3 eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">safe_property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">safe_coord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CTRIA3.uncross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA3.uncross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">uncross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes cross-reference links&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Theta_mcid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="kc">None</span></div>

    <span class="k">def</span> <span class="nf">_verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xref</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="n">unused_edges</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_edge_ids</span><span class="p">()</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">nid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">nids</span><span class="p">):</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">),</span> <span class="s1">&#39;nid</span><span class="si">%i</span><span class="s1"> is not an integer; nid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">nid</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">xref</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;PSHELL&#39;</span><span class="p">,</span> <span class="s1">&#39;PCOMP&#39;</span><span class="p">,</span> <span class="s1">&#39;PCOMPG&#39;</span><span class="p">,</span> <span class="s1">&#39;PLPLANE&#39;</span><span class="p">],</span> <span class="s1">&#39;pid=</span><span class="si">%i</span><span class="s1"> self.pid_ref.type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;PLPLANE&#39;</span><span class="p">]:</span>
                <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Thickness</span><span class="p">()</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;thickness=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">t</span>
                <span class="n">mass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Mass</span><span class="p">()</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mass</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;mass=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">mass</span>
            <span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">AreaCentroidNormal</span><span class="p">()</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;Area=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">a</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="nb">float</span><span class="p">)</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="nb">float</span><span class="p">)</span>

    <span class="c1">#def Thickness(self):</span>
        <span class="c1">#if self.T1 + self.T2 + self.T3 &gt; 0.0:</span>
        <span class="c1">#    if self.tflag == 0:</span>
        <span class="c1">#        t = self.pid_ref.Thickness()</span>
        <span class="c1">#        t1 = self.T1 / t</span>
        <span class="c1">#        t2 = self.T2 / t</span>
        <span class="c1">#        t3 = self.T3 / t</span>
        <span class="c1">#    else:</span>
        <span class="c1">#        t1 = self.T1</span>
        <span class="c1">#        t2 = self.T2</span>
        <span class="c1">#        t3 = self.T3</span>
        <span class="c1">#    t = (t1 + t2 + t3)/3.</span>
        <span class="c1">#else:</span>
        <span class="c1">#    t = self.pid_ref.Thickness()</span>
        <span class="c1">#return t</span>

<div class="viewcode-block" id="CTRIA3.get_thickness_scale"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA3.get_thickness_scale">[docs]</a>    <span class="k">def</span> <span class="nf">get_thickness_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T3</span><span class="p">]</span></div>

<div class="viewcode-block" id="CTRIA3.flip_normal"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA3.flip_normal">[docs]</a>    <span class="k">def</span> <span class="nf">flip_normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Flips normal of element.</span>

<span class="sd">        ::</span>

<span class="sd">               1           1</span>
<span class="sd">              * *   --&gt;   * *</span>
<span class="sd">             *   *       *   *</span>
<span class="sd">            2-----3     3-----2</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">]</span></div>

<div class="viewcode-block" id="CTRIA3._get_repr_defaults"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA3._get_repr_defaults">[docs]</a>    <span class="k">def</span> <span class="nf">_get_repr_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">zoffset</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zoffset</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">tflag</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tflag</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">theta_mcid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_theta_mcid_repr</span><span class="p">()</span>
        <span class="n">T1</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">T2</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">T3</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T3</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">,</span> <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">node_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node_ids</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">,</span> <span class="n">allow_empty_nodes</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<div class="viewcode-block" id="CTRIA3.raw_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA3.raw_fields">[docs]</a>    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">([</span><span class="s1">&#39;CTRIA3&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span> <span class="o">+</span>
                       <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">zoffset</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">+</span>
                       <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tflag</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T3</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="CTRIA3.repr_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA3.repr_fields">[docs]</a>    <span class="k">def</span> <span class="nf">repr_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">,</span> <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_repr_defaults</span><span class="p">()</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">([</span><span class="s1">&#39;CTRIA3&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span> <span class="o">+</span>
                       <span class="p">[</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="CTRIA3.write_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA3.write_card">[docs]</a>    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">zoffset</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zoffset</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">tflag</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tflag</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">theta_mcid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_theta_mcid_repr</span><span class="p">()</span>

        <span class="n">T1</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">T2</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">T3</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T3</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>

        <span class="c1">#return self.write_card(size, double)</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="n">row2_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">,</span>
                     <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">]</span>
        <span class="n">row2</span> <span class="o">=</span> <span class="p">[</span><span class="n">print_field_8</span><span class="p">(</span><span class="n">field</span><span class="p">)</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">row2_data</span><span class="p">]</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="n">nodes</span> <span class="o">+</span> <span class="n">row2</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;CTRIA3  </span><span class="si">%8i%8i%8i%8i%8i%8s%8s</span><span class="se">\n</span><span class="s1">&#39;</span>
               <span class="s1">&#39;                </span><span class="si">%8s%8s%8s%8s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">msg</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span></div></div>

<span class="k">class</span> <span class="nc">CPLSTx3</span><span class="p">(</span><span class="n">TriShell</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    +---------+-------+-------+----+----+----+-------+</span>
<span class="sd">    |    1    |   2   |   3   |  4 |  5 |  6 |   7   |</span>
<span class="sd">    +=========+=======+=======+=====+===+====+=======+</span>
<span class="sd">    | CPLSTN3 |  EID  |  PID  | N1 | N2 | N3 | THETA |</span>
<span class="sd">    +---------+-------+-------+----+----+----+-------+</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;CPLSTN3&#39;</span>
    <span class="n">_field_map</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;eid&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="p">}</span>

    <span class="k">def</span> <span class="nf">_update_field_helper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Field </span><span class="si">%r</span><span class="s1">=</span><span class="si">%r</span><span class="s1"> is an invalid </span><span class="si">%s</span><span class="s1"> entry.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;NX specific card&quot;&quot;&quot;</span>
        <span class="n">TriShell</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eid</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="n">pid</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">nids</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">,</span> <span class="n">nids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_node_ids</span><span class="p">(</span><span class="n">nids</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta</span> <span class="o">=</span> <span class="n">theta</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">export_to_hdf5</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">h5_file</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">eids</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;exports the elements in a vectorized way&quot;&quot;&quot;</span>
        <span class="c1">#comments = []</span>
        <span class="n">pids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">thetas</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">eid</span> <span class="ow">in</span> <span class="n">eids</span><span class="p">:</span>
            <span class="n">element</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">eid</span><span class="p">]</span>
            <span class="c1">#comments.append(element.comment)</span>
            <span class="n">pids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">pid</span><span class="p">)</span>
            <span class="n">nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
            <span class="n">thetas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta</span><span class="p">)</span>
        <span class="c1">#h5_file.create_dataset(&#39;_comment&#39;, data=comments)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;eid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">eids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">pids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;nodes&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">nodes</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">thetas</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">))</span> <span class="o">==</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;nodes=</span><span class="si">%s</span><span class="s1">; n=</span><span class="si">%s</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">)),</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="c1">#@classmethod</span>
    <span class="c1">#def add_op2_data(cls, data, comment=&#39;&#39;):</span>
        <span class="c1">#eid = data[0]</span>
        <span class="c1">#pid = data[1]</span>
        <span class="c1">#nids = data[2:5]</span>
        <span class="c1">#theta = data[5]</span>
        <span class="c1">#return CPLSTN3(eid, pid, nids, theta, comment=comment)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CPLSTx3 card from ``BDF.add_card(...)``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        card : BDFCard()</span>
<span class="sd">            a BDFCard object</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#: Element ID</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;eid&#39;</span><span class="p">)</span>
        <span class="c1">#: Property ID</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="n">eid</span><span class="p">)</span>

        <span class="n">nids</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;n1&#39;</span><span class="p">),</span>
            <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;n2&#39;</span><span class="p">),</span>
            <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;n3&#39;</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">theta</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">&#39;len(CPLSTN3 card) = </span><span class="si">%i</span><span class="se">\n</span><span class="s1">card=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">),</span> <span class="n">card</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">theta</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;, which is required by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s1"> eid=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">(),</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">safe_cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;, which is required by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s1"> eid=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">safe_property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">uncross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes cross-reference links&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xref</span><span class="p">):</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="n">unused_edges</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_edge_ids</span><span class="p">()</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">nid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">nids</span><span class="p">):</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">),</span> <span class="s1">&#39;nid</span><span class="si">%i</span><span class="s1"> is not an integer; nid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">nid</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">xref</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;PPLANE&#39;</span><span class="p">,</span> <span class="s1">&#39;PLPLANE&#39;</span><span class="p">,</span> <span class="s1">&#39;PGPLSN&#39;</span><span class="p">],</span> <span class="s1">&#39;pid=</span><span class="si">%i</span><span class="s1"> self.pid_ref.type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>

            <span class="c1">#if not self.pid_ref.type in [&#39;PLPLANE&#39;]:</span>
            <span class="c1">#t = self.Thickness()</span>
            <span class="c1">#assert isinstance(t, float), &#39;thickness=%r&#39; % t</span>
            <span class="c1">#mass = self.Mass()</span>
            <span class="c1">#assert isinstance(mass, float), &#39;mass=%r&#39; % mass</span>
            <span class="c1">#a, c, n = self.AreaCentroidNormal()</span>
            <span class="c1">#assert isinstance(a, float), &#39;Area=%r&#39; % a</span>
            <span class="c1">#for i in range(3):</span>
                <span class="c1">#assert isinstance(c[i], float)</span>
                <span class="c1">#assert isinstance(n[i], float)</span>

    <span class="k">def</span> <span class="nf">flip_normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Flips normal of element.</span>

<span class="sd">        ::</span>

<span class="sd">               1           1</span>
<span class="sd">              * *   --&gt;   * *</span>
<span class="sd">             *   *       *   *</span>
<span class="sd">            2-----3     3-----2</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">node_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node_ids</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">,</span> <span class="n">allow_empty_nodes</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span> <span class="o">+</span>
                       <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theta</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">list_fields</span>

    <span class="k">def</span> <span class="nf">repr_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">theta</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span> <span class="o">+</span>
                       <span class="p">[</span><span class="n">theta</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">list_fields</span>


<div class="viewcode-block" id="CPLSTN3"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CPLSTN3">[docs]</a><span class="k">class</span> <span class="nc">CPLSTN3</span><span class="p">(</span><span class="n">CPLSTx3</span><span class="p">):</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;CPLSTN3&#39;</span>

<div class="viewcode-block" id="CPLSTN3.write_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CPLSTN3.write_card">[docs]</a>    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="n">nodes</span> <span class="o">+</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theta</span><span class="p">]</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;CPLSTN3 </span><span class="si">%8i%8i%8i%8i%8i%8s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">msg</span></div></div>

<span class="k">class</span> <span class="nc">CPLSTS3</span><span class="p">(</span><span class="n">CPLSTx3</span><span class="p">):</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;CPLSTS3&#39;</span>

    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="n">nodes</span> <span class="o">+</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theta</span><span class="p">]</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;CPLSTS3 </span><span class="si">%8i%8i%8i%8i%8i%8s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">msg</span>

<div class="viewcode-block" id="CTRIA6"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA6">[docs]</a><span class="k">class</span> <span class="nc">CTRIA6</span><span class="p">(</span><span class="n">TriShell</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    +--------+------------+---------+----+----+----+----+----+-----+</span>
<span class="sd">    |   1    |      2     |    3    |  4 |  5 |  6 | 7  | 8  |  9  |</span>
<span class="sd">    +========+============+=========+=====+===+====+====+====+=====+</span>
<span class="sd">    | CTRIA3 |    EID     |   PID   | N1 | N2 | N3 | N4 | N5 | N6  |</span>
<span class="sd">    +--------+------------+---------+----+----+----+----+----+-----+</span>
<span class="sd">    |        | THETA/MCID | ZOFFSET | T1 | T2 | T3 |    |    |     |</span>
<span class="sd">    +--------+------------+---------+----+----+----+----+----+-----+</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;CTRIA6&#39;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">zoffset</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">tflag</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                 <span class="n">T1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">T2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">T3</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a CTRIA6 card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        eid : int</span>
<span class="sd">            element id</span>
<span class="sd">        pid : int</span>
<span class="sd">            property id (PSHELL/PCOMP/PCOMPG)</span>
<span class="sd">        nids : List[int, int, int, int/None, int/None, int/None]</span>
<span class="sd">            node ids</span>
<span class="sd">        zoffset : float; default=0.0</span>
<span class="sd">            Offset from the surface of grid points to the element reference</span>
<span class="sd">            plane.  Requires MID1 and MID2.</span>
<span class="sd">        theta_mcid : float; default=0.0</span>
<span class="sd">            float : material coordinate system angle (theta) is defined</span>
<span class="sd">                    relative to the element coordinate system</span>
<span class="sd">            int : x-axis from material coordinate system angle defined by</span>
<span class="sd">                  mcid is projected onto the element</span>
<span class="sd">        tflag : int; default=0</span>
<span class="sd">            0 : Ti are actual user specified thicknesses</span>
<span class="sd">            1 : Ti are fractions relative to the T value of the PSHELL</span>
<span class="sd">        T1 / T2 / T3 : float; default=None</span>
<span class="sd">            If it is not supplied, then T1 through T3 will be set equal</span>
<span class="sd">            to the value of T on the PSHELL entry.</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">TriShell</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eid</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="n">pid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span> <span class="o">=</span> <span class="n">theta_mcid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoffset</span> <span class="o">=</span> <span class="n">zoffset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tflag</span> <span class="o">=</span> <span class="n">tflag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T1</span> <span class="o">=</span> <span class="n">T1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T2</span> <span class="o">=</span> <span class="n">T2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T3</span> <span class="o">=</span> <span class="n">T3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_node_ids</span><span class="p">(</span><span class="n">nids</span><span class="p">,</span> <span class="n">allow_empty_nodes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">nids</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;error on CTRIA6&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: Optional[Any]</span>

<div class="viewcode-block" id="CTRIA6.export_to_hdf5"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA6.export_to_hdf5">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">export_to_hdf5</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">h5_file</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">eids</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;exports the elements in a vectorized way&quot;&quot;&quot;</span>
        <span class="c1">#comments = []</span>
        <span class="n">pids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">mcids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">thetas</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">zoffsets</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">#t123 = []</span>

        <span class="c1">#element0 = model.elements[eids[0]]</span>
        <span class="n">neids</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">eids</span><span class="p">)</span>
        <span class="n">nnodes</span> <span class="o">=</span> <span class="mi">6</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">neids</span><span class="p">,</span> <span class="n">nnodes</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">eid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">eids</span><span class="p">):</span>
            <span class="n">element</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">eid</span><span class="p">]</span>
            <span class="c1">#comments.append(element.comment)</span>
            <span class="n">pids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">pid</span><span class="p">)</span>
            <span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">nid</span> <span class="k">if</span> <span class="n">nid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">nid</span> <span class="ow">in</span> <span class="n">element</span><span class="o">.</span><span class="n">nodes</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="n">mcid</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span>
                <span class="n">theta</span> <span class="o">=</span> <span class="mf">0.</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">)</span>
                <span class="n">mcid</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
                <span class="n">theta</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span>
            <span class="n">mcids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mcid</span><span class="p">)</span>
            <span class="n">thetas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
            <span class="n">zoffsets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">zoffset</span><span class="p">)</span>
            <span class="c1">#t123.append([element.T1, element.T2, element.T3])</span>
        <span class="c1">#h5_file.create_dataset(&#39;_comment&#39;, data=comments)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;eid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">eids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">pids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;nodes&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">nodes</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;mcid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">mcids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">thetas</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;zoffset&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">zoffsets</span><span class="p">)</span></div>
        <span class="c1">#self.tflag = tflag</span>

<div class="viewcode-block" id="CTRIA6.add_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA6.add_card">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CTRIA6 card from ``BDF.add_card(...)``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        card : BDFCard()</span>
<span class="sd">            a BDFCard object</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#: Element ID</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;eid&#39;</span><span class="p">)</span>
        <span class="c1">#: Property ID</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;pid&#39;</span><span class="p">)</span>

        <span class="n">nids</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;n1&#39;</span><span class="p">),</span>
            <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;n2&#39;</span><span class="p">),</span>
            <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;n3&#39;</span><span class="p">),</span>
            <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;n4&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;n5&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;n6&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">9</span><span class="p">:</span>
            <span class="n">theta_mcid</span> <span class="o">=</span> <span class="n">integer_double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;theta_mcid&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
            <span class="n">zoffset</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;zoffset&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

            <span class="n">T1</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;T1&#39;</span><span class="p">)</span>
            <span class="n">T2</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;T2&#39;</span><span class="p">)</span>
            <span class="n">T3</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="s1">&#39;T3&#39;</span><span class="p">)</span>
            <span class="n">tflag</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">&#39;tflag&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">15</span><span class="p">,</span> <span class="s1">&#39;len(CTRIA6 card) = </span><span class="si">%i</span><span class="se">\n</span><span class="s1">card=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">),</span> <span class="n">card</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">theta_mcid</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="n">zoffset</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="n">T1</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">T2</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">T3</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">tflag</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="n">CTRIA6</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">,</span>
                      <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span></div>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_op2_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CTRIA6 card from the OP2</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        data : List[varies]</span>
<span class="sd">            a list of fields defined in OP2 format</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span>
        <span class="n">theta_mcid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span>
        <span class="n">zoffset</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span>
        <span class="n">t3</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="n">data</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t2</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="n">data</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t3</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="n">data</span>

        <span class="k">if</span> <span class="n">t1</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1.</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">t2</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1.</span><span class="p">:</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">t3</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1.</span><span class="p">:</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">tflag</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tflag</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">),</span> <span class="n">data</span>
        <span class="c1">#prepare_node_ids(nids, allow_empty_nodes=True)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">nids</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;error on CTRIA6&#39;</span>
        <span class="k">assert</span> <span class="n">tflag</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">data</span>
        <span class="k">return</span> <span class="n">CTRIA6</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">,</span>
                      <span class="n">tflag</span><span class="p">,</span> <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

<div class="viewcode-block" id="CTRIA6.cross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA6.cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by CTRIA6 eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">EmptyNodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">(),</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Coord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CTRIA6.safe_cross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA6.safe_cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">safe_cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by CTRIA6 eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">EmptyNodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">safe_property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">safe_coord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CTRIA6.uncross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA6.uncross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">uncross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes cross-reference links&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Theta_mcid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="kc">None</span></div>

    <span class="k">def</span> <span class="nf">_verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xref</span><span class="p">):</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="n">unused_edges</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_edge_ids</span><span class="p">()</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">nid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">nids</span><span class="p">):</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span> <span class="ow">or</span> <span class="n">nid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;nid</span><span class="si">%i</span><span class="s1"> is not an integer/None; nid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">nid</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">xref</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;PSHELL&#39;</span><span class="p">,</span> <span class="s1">&#39;PCOMP&#39;</span><span class="p">,</span> <span class="s1">&#39;PCOMPG&#39;</span><span class="p">,</span> <span class="s1">&#39;PLPLANE&#39;</span><span class="p">],</span> <span class="s1">&#39;pid=</span><span class="si">%i</span><span class="s1"> self.pid_ref.type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;PLPLANE&#39;</span><span class="p">]:</span>
                <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Thickness</span><span class="p">()</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;thickness=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">t</span>
                <span class="n">mass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Mass</span><span class="p">()</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mass</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;mass=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">mass</span>
            <span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">AreaCentroidNormal</span><span class="p">()</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;Area=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">a</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="nb">float</span><span class="p">)</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="nb">float</span><span class="p">)</span>

<div class="viewcode-block" id="CTRIA6.get_thickness_scale"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA6.get_thickness_scale">[docs]</a>    <span class="k">def</span> <span class="nf">get_thickness_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T3</span><span class="p">]</span></div>

<div class="viewcode-block" id="CTRIA6.Thickness"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA6.Thickness">[docs]</a>    <span class="k">def</span> <span class="nf">Thickness</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the thickness, :math:`t`&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">Thickness</span><span class="p">()</span></div>

<div class="viewcode-block" id="CTRIA6.AreaCentroidNormal"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA6.AreaCentroidNormal">[docs]</a>    <span class="k">def</span> <span class="nf">AreaCentroidNormal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns area, centroid, normal as it&#39;s more efficient to do them</span>
<span class="sd">        together</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">_triangle_area_centroid_normal</span><span class="p">([</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">],</span> <span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="CTRIA6.Area"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA6.Area">[docs]</a>    <span class="k">def</span> <span class="nf">Area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the area, :math:`A`.</span>

<span class="sd">        .. math:: A = \frac{1}{2} (n_0-n_1) \times (n_0-n_2)&quot;&quot;&quot;</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">n1</span> <span class="o">-</span> <span class="n">n2</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">n1</span> <span class="o">-</span> <span class="n">n3</span>
        <span class="n">area</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">norm</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">area</span></div>

<div class="viewcode-block" id="CTRIA6.Normal"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA6.Normal">[docs]</a>    <span class="k">def</span> <span class="nf">Normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the normal vector, :math:`n`.</span>

<span class="sd">        .. math::</span>
<span class="sd">          n = \frac{(n_0-n_1) \times (n_0-n_2)}{\lvert (n_0-n_1) \times (n_0-n_2) \lvert}</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">_normal</span><span class="p">(</span><span class="n">n1</span> <span class="o">-</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n1</span> <span class="o">-</span> <span class="n">n3</span><span class="p">)</span></div>

<div class="viewcode-block" id="CTRIA6.Centroid"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA6.Centroid">[docs]</a>    <span class="k">def</span> <span class="nf">Centroid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the centroid.</span>

<span class="sd">        .. math::</span>
<span class="sd">          CG = \frac{1}{3} (n_1+n_2+n_3)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
        <span class="n">centroid</span> <span class="o">=</span> <span class="p">(</span><span class="n">n1</span> <span class="o">+</span> <span class="n">n2</span> <span class="o">+</span> <span class="n">n3</span><span class="p">)</span> <span class="o">/</span> <span class="mf">3.</span>
        <span class="k">return</span> <span class="n">centroid</span></div>

<div class="viewcode-block" id="CTRIA6.center_of_mass"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA6.center_of_mass">[docs]</a>    <span class="k">def</span> <span class="nf">center_of_mass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Centroid</span><span class="p">()</span></div>

<div class="viewcode-block" id="CTRIA6.flip_normal"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA6.flip_normal">[docs]</a>    <span class="k">def</span> <span class="nf">flip_normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Flips normal of element.</span>

<span class="sd">        ::</span>

<span class="sd">               1                1</span>
<span class="sd">               **               **</span>
<span class="sd">              *  *             *  *</span>
<span class="sd">             4    6   --&gt;     6    4</span>
<span class="sd">            *      *         *      *</span>
<span class="sd">           2----5---3       3----5---2</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n5</span><span class="p">,</span> <span class="n">n6</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n6</span><span class="p">,</span> <span class="n">n5</span><span class="p">,</span> <span class="n">n4</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n5</span><span class="p">,</span> <span class="n">n6</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n6</span><span class="p">,</span> <span class="n">n5</span><span class="p">,</span> <span class="n">n4</span><span class="p">]</span></div>

<div class="viewcode-block" id="CTRIA6._get_repr_defaults"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA6._get_repr_defaults">[docs]</a>    <span class="k">def</span> <span class="nf">_get_repr_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">zoffset</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zoffset</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tflag</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">tflag</span>
        <span class="n">tflag</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tflag</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">theta_mcid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_theta_mcid_repr</span><span class="p">()</span>

        <span class="n">T1</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">T2</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">T3</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T3</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">,</span> <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">node_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node_ids</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">,</span> <span class="n">allow_empty_nodes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<div class="viewcode-block" id="CTRIA6.raw_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA6.raw_fields">[docs]</a>    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">([</span><span class="s1">&#39;CTRIA6&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span> <span class="o">+</span>
                       <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">zoffset</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tflag</span><span class="p">,])</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="CTRIA6.repr_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA6.repr_fields">[docs]</a>    <span class="k">def</span> <span class="nf">repr_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">,</span> <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_repr_defaults</span><span class="p">()</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">([</span><span class="s1">&#39;CTRIA6&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span> <span class="o">+</span>
                       <span class="p">[</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">,</span> <span class="n">tflag</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="CTRIA6.write_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CTRIA6.write_card">[docs]</a>    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">card</span> <span class="o">=</span> <span class="n">wipe_empty_fields</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">repr_fields</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">8</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span> <span class="c1"># to last node</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_8</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_16</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
        <span class="c1">#msg2 = self.write_card(size)</span>
        <span class="c1">#assert msg == msg2, &#39;\n%s---\n%s\n%r\n%r&#39; % (msg, msg2, msg, msg2)</span>
        <span class="k">return</span> <span class="n">msg</span></div></div>


<span class="k">class</span> <span class="nc">CTRIAR</span><span class="p">(</span><span class="n">TriShell</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    +--------+-------+-------+----+----+----+------------+---------+</span>
<span class="sd">    |   1    |   2   |   3   |  4 |  5 |  6 |     7      |    8    |</span>
<span class="sd">    +========+=======+=======+=====+===+====+============+=========+</span>
<span class="sd">    | CTRIAR |  EID  |  PID  | N1 | N2 | N3 | THETA/MCID | ZOFFSET |</span>
<span class="sd">    +--------+-------+-------+----+----+----+------------+---------+</span>
<span class="sd">    |        |       | TFLAG | T1 | T2 | T3 |            |         |</span>
<span class="sd">    +--------+-------+-------+----+----+----+------------+---------+</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;CTRIAR&#39;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">zoffset</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
                 <span class="n">tflag</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">T1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">T2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">T3</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a CTRIAR card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        eid : int</span>
<span class="sd">            element id</span>
<span class="sd">        pid : int</span>
<span class="sd">            property id (PSHELL/PCOMP/PCOMPG)</span>
<span class="sd">        nids : List[int, int, int]</span>
<span class="sd">            node ids</span>
<span class="sd">        zoffset : float; default=0.0</span>
<span class="sd">            Offset from the surface of grid points to the element reference</span>
<span class="sd">            plane.  Requires MID1 and MID2.</span>
<span class="sd">        theta_mcid : float; default=0.0</span>
<span class="sd">            float : material coordinate system angle (theta) is defined</span>
<span class="sd">                    relative to the element coordinate system</span>
<span class="sd">            int : x-axis from material coordinate system angle defined by</span>
<span class="sd">                  mcid is projected onto the element</span>
<span class="sd">        tflag : int; default=0</span>
<span class="sd">            0 : Ti are actual user specified thicknesses</span>
<span class="sd">            1 : Ti are fractions relative to the T value of the PSHELL</span>
<span class="sd">        T1 / T2 / T3 : float; default=None</span>
<span class="sd">            If it is not supplied, then T1 through T3 will be set equal</span>
<span class="sd">            to the value of T on the PSHELL entry.</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">TriShell</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="c1">#: Element ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eid</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="c1">#: Property ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="n">pid</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span> <span class="o">=</span> <span class="n">theta_mcid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoffset</span> <span class="o">=</span> <span class="n">zoffset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tflag</span> <span class="o">=</span> <span class="n">tflag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T1</span> <span class="o">=</span> <span class="n">T1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T2</span> <span class="o">=</span> <span class="n">T2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T3</span> <span class="o">=</span> <span class="n">T3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_node_ids</span><span class="p">(</span><span class="n">nids</span><span class="p">,</span> <span class="n">allow_empty_nodes</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: Optional[Any]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">export_to_hdf5</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">h5_file</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">eids</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;exports the elements in a vectorized way&quot;&quot;&quot;</span>
        <span class="c1">#comments = []</span>
        <span class="n">pids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">mcids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">thetas</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">zoffsets</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">#t123 = []</span>
        <span class="k">for</span> <span class="n">eid</span> <span class="ow">in</span> <span class="n">eids</span><span class="p">:</span>
            <span class="n">element</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">eid</span><span class="p">]</span>
            <span class="c1">#comments.append(element.comment)</span>
            <span class="n">pids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">pid</span><span class="p">)</span>
            <span class="n">nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="n">mcid</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span>
                <span class="n">theta</span> <span class="o">=</span> <span class="mf">0.</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">)</span>
                <span class="n">mcid</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
                <span class="n">theta</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span>
            <span class="n">mcids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mcid</span><span class="p">)</span>
            <span class="n">thetas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
            <span class="n">zoffsets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">zoffset</span><span class="p">)</span>
            <span class="c1">#t123.append([element.T1, element.T2, element.T3])</span>
        <span class="c1">#h5_file.create_dataset(&#39;_comment&#39;, data=comments)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;eid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">eids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">pids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;nodes&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">nodes</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;mcid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">mcids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">thetas</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;zoffset&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">zoffsets</span><span class="p">)</span>
        <span class="c1">#self.tflag = tflag</span>

    <span class="c1">#def validate(self):</span>
        <span class="c1">#self.validate_node_ids(allow_empty_nodes=False)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CTRIAR card from ``BDF.add_card(...)``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        card : BDFCard()</span>
<span class="sd">            a BDFCard object</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;eid&#39;</span><span class="p">)</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;pid&#39;</span><span class="p">)</span>

        <span class="n">nids</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;n1&#39;</span><span class="p">),</span>
            <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;n2&#39;</span><span class="p">),</span>
            <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;n3&#39;</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="n">theta_mcid</span> <span class="o">=</span> <span class="n">integer_double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;theta_mcid&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">zoffset</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;zoffset&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;blank&#39;</span><span class="p">)</span>
        <span class="n">blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;blank&#39;</span><span class="p">)</span>

        <span class="n">tflag</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;tflag&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">T1</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;T1&#39;</span><span class="p">)</span>
        <span class="n">T2</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;T2&#39;</span><span class="p">)</span>
        <span class="n">T3</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="s1">&#39;T3&#39;</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">&#39;len(CTRIAR card) = </span><span class="si">%i</span><span class="se">\n</span><span class="s1">card=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">),</span> <span class="n">card</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">CTRIAR</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="o">=</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="o">=</span><span class="n">zoffset</span><span class="p">,</span>
                      <span class="n">tflag</span><span class="o">=</span><span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="o">=</span><span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="o">=</span><span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="o">=</span><span class="n">T3</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_op2_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CTRIAR card from the OP2</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        data : List[varies]</span>
<span class="sd">            a list of fields defined in OP2 format</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>

        <span class="n">theta_mcid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
        <span class="n">zoffset</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
        <span class="n">tflag</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
        <span class="n">T1</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span>
        <span class="n">T2</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>
        <span class="n">T3</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">T1</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">:</span>
            <span class="n">T1</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">if</span> <span class="n">T2</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">:</span>
            <span class="n">T2</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">if</span> <span class="n">T3</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">:</span>
            <span class="n">T3</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">assert</span> <span class="n">tflag</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">data</span>
        <span class="k">return</span> <span class="n">CTRIAR</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">zoffset</span><span class="o">=</span><span class="n">zoffset</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="o">=</span><span class="n">theta_mcid</span><span class="p">,</span>
                      <span class="n">tflag</span><span class="o">=</span><span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="o">=</span><span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="o">=</span><span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="o">=</span><span class="n">T3</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by CTRIAR eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Coord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">safe_cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by CTRIAR eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">safe_property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">safe_coord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">uncross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes cross-reference links&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Theta_mcid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">get_thickness_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T3</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">Thickness</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the thickness&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">Thickness</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">flip_normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ::</span>

<span class="sd">               1           1</span>
<span class="sd">              * *   --&gt;   * *</span>
<span class="sd">             *   *       *   *</span>
<span class="sd">            2-----3     3-----2</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_get_repr_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">zoffset</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zoffset</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">tflag</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tflag</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">theta_mcid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_theta_mcid_repr</span><span class="p">()</span>

        <span class="n">T1</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">T2</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">T3</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T3</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">,</span> <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">_verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xref</span><span class="p">):</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="n">unused_nids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="n">unused_edges</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_edge_ids</span><span class="p">()</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span>
        <span class="c1">#for i,nid in enumerate(nids):</span>
            <span class="c1">#assert isinstance(nid, integer_types), &#39;nid%i is not an integer; nid=%s&#39; %(i, nid)</span>

        <span class="k">if</span> <span class="n">xref</span><span class="p">:</span>
            <span class="c1"># PSHELL/PCOMP</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;PSHELL&#39;</span><span class="p">,</span> <span class="s1">&#39;PCOMP&#39;</span><span class="p">,</span> <span class="s1">&#39;PCOMPG&#39;</span><span class="p">],</span> <span class="s1">&#39;pid=</span><span class="si">%i</span><span class="s1"> self.pid_ref.type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
            <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Thickness</span><span class="p">()</span>
            <span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">unused_normal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">AreaCentroidNormal</span><span class="p">()</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;thickness=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">t</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;Area=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">a</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="nb">float</span><span class="p">)</span>
                <span class="c1">#assert isinstance(normal[i], float)</span>
            <span class="n">mass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Mass</span><span class="p">()</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mass</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;mass=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">mass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">node_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node_ids</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">,</span> <span class="n">allow_empty_nodes</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">([</span><span class="s1">&#39;CTRIAR&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span> <span class="o">+</span>
                       <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">zoffset</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tflag</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T3</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">list_fields</span>

    <span class="k">def</span> <span class="nf">repr_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">,</span> <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_repr_defaults</span><span class="p">()</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">([</span><span class="s1">&#39;CTRIAR&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span> <span class="o">+</span>
                       <span class="p">[</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">list_fields</span>

    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">card</span> <span class="o">=</span> <span class="n">wipe_empty_fields</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">repr_fields</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">8</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span> <span class="c1"># to last node</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_8</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_16</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">msg</span>


<span class="k">class</span> <span class="nc">QuadShell</span><span class="p">(</span><span class="n">ShellElement</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ShellElement</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: Optional[List[Any]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: Optional[Any]</span>

    <span class="k">def</span> <span class="nf">get_edge_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the edge IDs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">node_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="nb">tuple</span><span class="p">(</span><span class="nb">sorted</span><span class="p">([</span><span class="n">node_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">node_ids</span><span class="p">[</span><span class="mi">1</span><span class="p">]])),</span>
            <span class="nb">tuple</span><span class="p">(</span><span class="nb">sorted</span><span class="p">([</span><span class="n">node_ids</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">node_ids</span><span class="p">[</span><span class="mi">2</span><span class="p">]])),</span>
            <span class="nb">tuple</span><span class="p">(</span><span class="nb">sorted</span><span class="p">([</span><span class="n">node_ids</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">node_ids</span><span class="p">[</span><span class="mi">3</span><span class="p">]])),</span>
            <span class="nb">tuple</span><span class="p">(</span><span class="nb">sorted</span><span class="p">([</span><span class="n">node_ids</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">node_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">]]))</span>
        <span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_edge_number_by_node_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">):</span>
        <span class="n">edge_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_edge_ids</span><span class="p">()</span>
        <span class="n">edge</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">]</span>
        <span class="n">edge</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">tedge</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">edge</span><span class="p">)</span>
        <span class="n">iedge</span> <span class="o">=</span> <span class="n">edge_ids</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">tedge</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">iedge</span>

    <span class="k">def</span> <span class="nf">get_edge_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span>

        <span class="n">g1</span> <span class="o">=</span> <span class="n">n1</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
        <span class="n">g2</span> <span class="o">=</span> <span class="n">n2</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
        <span class="n">g3</span> <span class="o">=</span> <span class="n">n3</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
        <span class="n">g4</span> <span class="o">=</span> <span class="n">n4</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
        <span class="n">g12</span> <span class="o">=</span> <span class="p">(</span><span class="n">g1</span> <span class="o">+</span> <span class="n">g2</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.</span>
        <span class="n">g23</span> <span class="o">=</span> <span class="p">(</span><span class="n">g2</span> <span class="o">+</span> <span class="n">g3</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.</span>
        <span class="n">g34</span> <span class="o">=</span> <span class="p">(</span><span class="n">g3</span> <span class="o">+</span> <span class="n">g4</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.</span>
        <span class="n">g14</span> <span class="o">=</span> <span class="p">(</span><span class="n">g1</span> <span class="o">+</span> <span class="n">g4</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">g23</span> <span class="o">-</span> <span class="n">g14</span>
        <span class="n">yprime</span> <span class="o">=</span> <span class="n">g34</span> <span class="o">-</span> <span class="n">g12</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">yprime</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">cross</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>

    <span class="k">def</span> <span class="nf">get_thickness_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">Thickness</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the thickness&quot;&quot;&quot;</span>
        <span class="n">tscales</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_thickness_scale</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">Thickness</span><span class="p">(</span><span class="n">tflag</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tflag</span><span class="p">,</span> <span class="n">tscales</span><span class="o">=</span><span class="n">tscales</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="p">)</span>
            <span class="k">raise</span>
        <span class="c1">#return self.pid_ref.Thickness()</span>

    <span class="k">def</span> <span class="nf">Normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[:</span><span class="mi">4</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
            <span class="k">raise</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">_normal</span><span class="p">(</span><span class="n">n1</span> <span class="o">-</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span> <span class="o">-</span> <span class="n">n4</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;ERROR computing normal vector for eid=</span><span class="si">%i</span><span class="s1">.</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;  nid1=</span><span class="si">%i</span><span class="s1"> n1=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span> <span class="n">n1</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;  nid2=</span><span class="si">%i</span><span class="s1"> n2=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span> <span class="n">n2</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;  nid3=</span><span class="si">%i</span><span class="s1"> n3=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span> <span class="n">n3</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;  nid4=</span><span class="si">%i</span><span class="s1"> n4=</span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span> <span class="n">n4</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">AreaCentroidNormal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="n">area</span><span class="p">,</span> <span class="n">centroid</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">AreaCentroid</span><span class="p">()</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Normal</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">area</span><span class="p">,</span> <span class="n">centroid</span><span class="p">,</span> <span class="n">normal</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">AreaCentroid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ::</span>
<span class="sd">          1-----2</span>
<span class="sd">          |    /|</span>
<span class="sd">          | A1/ |</span>
<span class="sd">          |  /  |</span>
<span class="sd">          |/ A2 |</span>
<span class="sd">          4-----3</span>

<span class="sd">        .. math:</span>
<span class="sd">            c = \frac{\sum(c_i A_i){\sum{A_i}}</span>

<span class="sd">         c = sum(ci*Ai)/sum(A)</span>
<span class="sd">         where:</span>
<span class="sd">           c=centroid</span>
<span class="sd">           A=area</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nodes_ref</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="n">nodes_ref</span><span class="p">)</span>
        <span class="n">area</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">norm</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">n3</span><span class="o">-</span><span class="n">n1</span><span class="p">,</span> <span class="n">n4</span><span class="o">-</span><span class="n">n2</span><span class="p">))</span>
        <span class="n">centroid</span> <span class="o">=</span> <span class="p">(</span><span class="n">n1</span> <span class="o">+</span> <span class="n">n2</span> <span class="o">+</span> <span class="n">n3</span> <span class="o">+</span> <span class="n">n4</span><span class="p">)</span> <span class="o">/</span> <span class="mf">4.</span>
        <span class="k">return</span><span class="p">(</span><span class="n">area</span><span class="p">,</span> <span class="n">centroid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">Centroid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">nodes_ref</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="n">nodes_ref</span><span class="p">)</span>
        <span class="n">centroid</span> <span class="o">=</span> <span class="p">(</span><span class="n">n1</span> <span class="o">+</span> <span class="n">n2</span> <span class="o">+</span> <span class="n">n3</span> <span class="o">+</span> <span class="n">n4</span><span class="p">)</span> <span class="o">/</span> <span class="mf">4.</span>
        <span class="k">return</span> <span class="n">centroid</span>

    <span class="k">def</span> <span class="nf">Centroid_no_xref</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">):</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions_no_xref</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">nodes</span><span class="o">=</span><span class="n">nodes</span><span class="p">)</span>
        <span class="n">centroid</span> <span class="o">=</span> <span class="p">(</span><span class="n">n1</span> <span class="o">+</span> <span class="n">n2</span> <span class="o">+</span> <span class="n">n3</span> <span class="o">+</span> <span class="n">n4</span><span class="p">)</span> <span class="o">/</span> <span class="mf">4.</span>
        <span class="k">return</span> <span class="n">centroid</span>

    <span class="k">def</span> <span class="nf">center_of_mass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Centroid</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Area</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">Area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        .. math:: A = \frac{1}{2} \lvert (n_1-n_3) \times (n_2-n_4) \rvert</span>
<span class="sd">        where a and b are the quad&#39;s cross node point vectors&quot;&quot;&quot;</span>
        <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[:</span><span class="mi">4</span><span class="p">])</span>
        <span class="n">area</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">norm</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">n3</span><span class="o">-</span><span class="n">n1</span><span class="p">,</span> <span class="n">n4</span><span class="o">-</span><span class="n">n2</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">area</span>

    <span class="k">def</span> <span class="nf">Area_no_xref</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        .. math:: A = \frac{1}{2} \lvert (n_1-n_3) \times (n_2-n_4) \rvert</span>
<span class="sd">        where a and b are the quad&#39;s cross node point vectors&quot;&quot;&quot;</span>
        <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions_no_xref</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[:</span><span class="mi">4</span><span class="p">])</span>
        <span class="n">area</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">norm</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">n3</span><span class="o">-</span><span class="n">n1</span><span class="p">,</span> <span class="n">n4</span><span class="o">-</span><span class="n">n2</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">area</span>

    <span class="k">def</span> <span class="nf">flip_normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ::</span>

<span class="sd">          1---2       1---4</span>
<span class="sd">          |   |  --&gt;  |   |</span>
<span class="sd">          |   |       |   |</span>
<span class="sd">          4---3       2---3</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_get_repr_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">zoffset</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zoffset</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">tflag</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tflag</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="n">theta_mcid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_theta_mcid_repr</span><span class="p">()</span>
        <span class="n">T1</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">T2</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">T3</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T3</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">T4</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T4</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">,</span> <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">,</span> <span class="n">T4</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">uncross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes cross-reference links&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">material_coordinate_system</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">normal</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xyz1234</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determines the material coordinate system</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        normal (3, ) float ndarray</span>
<span class="sd">            the unit normal vector</span>
<span class="sd">        xyz1234 (4, 3) float ndarray</span>
<span class="sd">            the xyz coordinates</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        centroid (3, ) float ndarray</span>
<span class="sd">            the centroid of the element</span>
<span class="sd">        imat (3, ) float ndarray</span>
<span class="sd">            the element unit i vector</span>
<span class="sd">        jmat (3, ) float ndarray</span>
<span class="sd">            the element unit j vector</span>
<span class="sd">        normal (3, ) float ndarray</span>
<span class="sd">            the unit normal vector</span>

<span class="sd">        .. todo:: rotate the coordinate system by the angle theta</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">normal</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">normal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Normal</span><span class="p">()</span> <span class="c1"># k = kmat</span>

        <span class="k">if</span> <span class="n">xyz1234</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">xyz1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
            <span class="n">xyz2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
            <span class="n">xyz3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
            <span class="n">xyz4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
            <span class="c1">#centroid = (xyz1 + xyz2 + xyz3 + xyz4) / 4.</span>
            <span class="c1">#centroid = self.Centroid()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#centroid = xyz1234.sum(axis=1)</span>
            <span class="c1">#assert len(centroid) == 3, centroid</span>
            <span class="n">xyz1</span> <span class="o">=</span> <span class="n">xyz1234</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="n">xyz2</span> <span class="o">=</span> <span class="n">xyz1234</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">xyz3</span> <span class="o">=</span> <span class="n">xyz1234</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span>
            <span class="n">xyz4</span> <span class="o">=</span> <span class="n">xyz1234</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">]</span>
        <span class="n">centroid</span> <span class="o">=</span> <span class="p">(</span><span class="n">xyz1</span> <span class="o">+</span> <span class="n">xyz2</span> <span class="o">+</span> <span class="n">xyz3</span> <span class="o">+</span> <span class="n">xyz4</span><span class="p">)</span> <span class="o">/</span> <span class="mf">4.</span>

        <span class="n">imat</span><span class="p">,</span> <span class="n">jmat</span> <span class="o">=</span> <span class="n">_material_coordinate_system</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">normal</span><span class="p">,</span> <span class="n">xyz1</span><span class="p">,</span> <span class="n">xyz2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">centroid</span><span class="p">,</span> <span class="n">imat</span><span class="p">,</span> <span class="n">jmat</span><span class="p">,</span> <span class="n">normal</span>


<div class="viewcode-block" id="CSHEAR"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CSHEAR">[docs]</a><span class="k">class</span> <span class="nc">CSHEAR</span><span class="p">(</span><span class="n">QuadShell</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    +--------+-------+-------+----+----+----+----+</span>
<span class="sd">    |   1    |   2   |   3   |  4 |  5 |  6 | 7  |</span>
<span class="sd">    +========+=======+=======+=====+===+====+====+</span>
<span class="sd">    | CSHEAR |  EID  |  PID  | N1 | N2 | N3 | N4 |</span>
<span class="sd">    +--------+-------+-------+----+----+----+----+</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;CSHEAR&#39;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a CSHEAR card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        eid : int</span>
<span class="sd">            element id</span>
<span class="sd">        pid : int</span>
<span class="sd">            property id (PSHEAR)</span>
<span class="sd">        nids : List[int, int, int, int]</span>
<span class="sd">            node ids</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">QuadShell</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="c1">#: Element ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eid</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="c1">#: Property ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="n">pid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_node_ids</span><span class="p">(</span><span class="n">nids</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span>

<div class="viewcode-block" id="CSHEAR.export_to_hdf5"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CSHEAR.export_to_hdf5">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">export_to_hdf5</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">h5_file</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">eids</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;exports the elements in a vectorized way&quot;&quot;&quot;</span>
        <span class="c1">#comments = []</span>
        <span class="n">pids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">eid</span> <span class="ow">in</span> <span class="n">eids</span><span class="p">:</span>
            <span class="n">element</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">eid</span><span class="p">]</span>
            <span class="c1">#comments.append(element.comment)</span>
            <span class="n">pids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">pid</span><span class="p">)</span>
            <span class="n">nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
        <span class="c1">#h5_file.create_dataset(&#39;_comment&#39;, data=comments)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;eid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">eids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">pids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;nodes&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">nodes</span><span class="p">)</span></div>

<div class="viewcode-block" id="CSHEAR.validate"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CSHEAR.validate">[docs]</a>    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">))</span> <span class="o">==</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;nodes=</span><span class="si">%s</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div>

<div class="viewcode-block" id="CSHEAR.add_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CSHEAR.add_card">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CSHEAR card from ``BDF.add_card(...)``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        card : BDFCard()</span>
<span class="sd">            a BDFCard object</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;eid&#39;</span><span class="p">)</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="n">eid</span><span class="p">)</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="p">[</span><span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;n1&#39;</span><span class="p">),</span>
                <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;n2&#39;</span><span class="p">),</span>
                <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;n3&#39;</span><span class="p">),</span>
                <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;n4&#39;</span><span class="p">)]</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;len(CSHEAR card) = </span><span class="si">%i</span><span class="se">\n</span><span class="s1">card=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">),</span> <span class="n">card</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">CSHEAR</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span></div>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_op2_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CSHEAR card from the OP2</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        data : List[varies]</span>
<span class="sd">            a list of fields defined in OP2 format</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
        <span class="k">return</span> <span class="n">CSHEAR</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

<div class="viewcode-block" id="CSHEAR.cross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CSHEAR.cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by CSHEAR eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">(),</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CSHEAR.safe_cross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CSHEAR.safe_cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">safe_cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by CSHEAR eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">safe_property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CSHEAR.uncross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CSHEAR.uncross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">uncross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes cross-reference links&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="CSHEAR.Normal"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CSHEAR.Normal">[docs]</a>    <span class="k">def</span> <span class="nf">Normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">_normal</span><span class="p">(</span><span class="n">n1</span> <span class="o">-</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span> <span class="o">-</span> <span class="n">n4</span><span class="p">)</span></div>

<div class="viewcode-block" id="CSHEAR.AreaCentroidNormal"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CSHEAR.AreaCentroidNormal">[docs]</a>    <span class="k">def</span> <span class="nf">AreaCentroidNormal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">NDArray3float</span><span class="p">,</span> <span class="n">NDArray3float</span><span class="p">,</span> <span class="n">NDArray3float</span><span class="p">]:</span>
        <span class="p">(</span><span class="n">area</span><span class="p">,</span> <span class="n">centroid</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">AreaCentroid</span><span class="p">()</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Normal</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">area</span><span class="p">,</span> <span class="n">centroid</span><span class="p">,</span> <span class="n">normal</span><span class="p">)</span></div>

<div class="viewcode-block" id="CSHEAR.AreaCentroid"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CSHEAR.AreaCentroid">[docs]</a>    <span class="k">def</span> <span class="nf">AreaCentroid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">NDArray3float</span><span class="p">,</span> <span class="n">NDArray3float</span><span class="p">]:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ::</span>
<span class="sd">          1-----2</span>
<span class="sd">          |    /|</span>
<span class="sd">          | A1/ |</span>
<span class="sd">          |  /  |</span>
<span class="sd">          |/ A2 |</span>
<span class="sd">          4-----3</span>

<span class="sd">        .. math:</span>
<span class="sd">            c = \frac{\sum(c_i A_i){\sum{A_i}}</span>

<span class="sd">         c = sum(ci*Ai)/sum(A)</span>
<span class="sd">         where:</span>
<span class="sd">           c=centroid</span>
<span class="sd">           A=area</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">()</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">n1</span> <span class="o">-</span> <span class="n">n2</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">n2</span> <span class="o">-</span> <span class="n">n4</span>
        <span class="n">area1</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">norm</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>

        <span class="n">a</span> <span class="o">=</span> <span class="n">n2</span> <span class="o">-</span> <span class="n">n4</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">n2</span> <span class="o">-</span> <span class="n">n3</span>
        <span class="n">area2</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">norm</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>

        <span class="n">area</span> <span class="o">=</span> <span class="n">area1</span> <span class="o">+</span> <span class="n">area2</span>
        <span class="n">centroid</span> <span class="o">=</span> <span class="p">(</span><span class="n">n1</span> <span class="o">+</span> <span class="n">n2</span> <span class="o">+</span> <span class="n">n3</span> <span class="o">+</span> <span class="n">n4</span><span class="p">)</span> <span class="o">/</span> <span class="mf">4.</span>
        <span class="k">return</span><span class="p">(</span><span class="n">area</span><span class="p">,</span> <span class="n">centroid</span><span class="p">)</span></div>

<div class="viewcode-block" id="CSHEAR.Centroid"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CSHEAR.Centroid">[docs]</a>    <span class="k">def</span> <span class="nf">Centroid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NDArray3float</span><span class="p">:</span>
        <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">()</span>
        <span class="n">centroid</span> <span class="o">=</span> <span class="p">(</span><span class="n">n1</span> <span class="o">+</span> <span class="n">n2</span> <span class="o">+</span> <span class="n">n3</span> <span class="o">+</span> <span class="n">n4</span><span class="p">)</span> <span class="o">/</span> <span class="mf">4.</span>
        <span class="k">return</span> <span class="n">centroid</span></div>

<div class="viewcode-block" id="CSHEAR.center_of_mass"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CSHEAR.center_of_mass">[docs]</a>    <span class="k">def</span> <span class="nf">center_of_mass</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NDArray3float</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Centroid</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xref</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="n">unused_edges</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_edge_ids</span><span class="p">()</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">nid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">nids</span><span class="p">):</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">),</span> <span class="s1">&#39;nid</span><span class="si">%i</span><span class="s1"> is not an integer; nid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">nid</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">xref</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;PSHEAR&#39;</span><span class="p">],</span> <span class="s1">&#39;pid=</span><span class="si">%i</span><span class="s1"> self.pid_ref.type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;PSHEAR&#39;</span><span class="p">]:</span>
                <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Thickness</span><span class="p">()</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;thickness=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">t</span>
                <span class="n">mass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Mass</span><span class="p">()</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mass</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;mass=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">mass</span>
            <span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">AreaCentroidNormal</span><span class="p">()</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;Area=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">a</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="nb">float</span><span class="p">)</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="nb">float</span><span class="p">)</span>

<div class="viewcode-block" id="CSHEAR.Area"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CSHEAR.Area">[docs]</a>    <span class="k">def</span> <span class="nf">Area</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        .. math:: A = \frac{1}{2} \lvert (n_1-n_3) \times (n_2-n_4) \rvert</span>
<span class="sd">        where a and b are the quad&#39;s cross node point vectors&quot;&quot;&quot;</span>
        <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">()</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">n1</span> <span class="o">-</span> <span class="n">n3</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">n2</span> <span class="o">-</span> <span class="n">n4</span>
        <span class="n">area</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">norm</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">area</span></div>

<div class="viewcode-block" id="CSHEAR.flip_normal"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CSHEAR.flip_normal">[docs]</a>    <span class="k">def</span> <span class="nf">flip_normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ::</span>

<span class="sd">          1---2       1---4</span>
<span class="sd">          |   |  --&gt;  |   |</span>
<span class="sd">          |   |       |   |</span>
<span class="sd">          4---3       2---3</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">]</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">node_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node_ids</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">,</span> <span class="n">allow_empty_nodes</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="nd">@node_ids</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">node_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You cannot set node IDs like this...modify the node objects&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="CSHEAR.raw_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CSHEAR.raw_fields">[docs]</a>    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;CSHEAR&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="CSHEAR.repr_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CSHEAR.repr_fields">[docs]</a>    <span class="k">def</span> <span class="nf">repr_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_fields</span><span class="p">()</span></div>

<div class="viewcode-block" id="CSHEAR.write_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CSHEAR.write_card">[docs]</a>    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">card</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repr_fields</span><span class="p">()</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_8</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
        <span class="c1">#msg2 = self.write_card(size)</span>
        <span class="c1">#assert msg == msg2, &#39;\n%s---\n%s\n%r\n%r&#39; % (msg, msg2, msg, msg2)</span>
        <span class="k">return</span> <span class="n">msg</span></div>

<div class="viewcode-block" id="CSHEAR.G"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CSHEAR.G">[docs]</a>    <span class="k">def</span> <span class="nf">G</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">mid_ref</span><span class="o">.</span><span class="n">G</span><span class="p">()</span></div>

<div class="viewcode-block" id="CSHEAR.Mass"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CSHEAR.Mass">[docs]</a>    <span class="k">def</span> <span class="nf">Mass</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        .. math:: m = \frac{m}{A} A  \f]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">A</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Area</span><span class="p">()</span>
        <span class="n">mpa</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">MassPerArea</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">mpa</span> <span class="o">*</span> <span class="n">A</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;mass/area=</span><span class="si">%s</span><span class="s1"> area=</span><span class="si">%s</span><span class="s1"> prop_type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">mpa</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CSHEAR.Thickness"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CSHEAR.Thickness">[docs]</a>    <span class="k">def</span> <span class="nf">Thickness</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">t</span></div></div>


<div class="viewcode-block" id="CQUAD4"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD4">[docs]</a><span class="k">class</span> <span class="nc">CQUAD4</span><span class="p">(</span><span class="n">QuadShell</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    +--------+-------+-------+----+----+----+----+------------+---------+</span>
<span class="sd">    |   1    |   2   |   3   |  4 |  5 |  6 | 7  |     8      |    9    |</span>
<span class="sd">    +========+=======+=======+=====+===+====+====+============+=========+</span>
<span class="sd">    | CQUAD4 |  EID  |  PID  | N1 | N2 | N3 | N4 | THETA/MCID | ZOFFSET |</span>
<span class="sd">    +--------+-------+-------+----+----+----+----+------------+---------+</span>
<span class="sd">    |        |       | TFLAG | T1 | T2 | T3 | T4 |            |         |</span>
<span class="sd">    +--------+-------+-------+----+----+----+----+------------+---------+</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;CQUAD4&#39;</span>
    <span class="n">cp_name_map</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;T1&#39;</span> <span class="p">:</span> <span class="s1">&#39;T1&#39;</span><span class="p">,</span>
        <span class="s1">&#39;T2&#39;</span> <span class="p">:</span> <span class="s1">&#39;T2&#39;</span><span class="p">,</span>
        <span class="s1">&#39;T3&#39;</span> <span class="p">:</span> <span class="s1">&#39;T3&#39;</span><span class="p">,</span>
        <span class="s1">&#39;T4&#39;</span> <span class="p">:</span> <span class="s1">&#39;T4&#39;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">_field_map</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;eid&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span><span class="s1">&#39;theta_mcid&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span><span class="s1">&#39;zoffset&#39;</span><span class="p">,</span>
                  <span class="mi">10</span><span class="p">:</span><span class="s1">&#39;tflag&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span><span class="s1">&#39;T1&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span><span class="s1">&#39;T2&#39;</span><span class="p">,</span> <span class="mi">13</span><span class="p">:</span><span class="s1">&#39;T3&#39;</span><span class="p">}</span>
    <span class="n">_properties</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;cp_name_map&#39;</span><span class="p">,</span> <span class="s1">&#39;_field_map&#39;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_update_field_helper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Field </span><span class="si">%r</span><span class="s1">=</span><span class="si">%r</span><span class="s1"> is an invalid </span><span class="si">%s</span><span class="s1"> entry.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">))</span>

<div class="viewcode-block" id="CQUAD4.export_to_hdf5"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD4.export_to_hdf5">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">export_to_hdf5</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">h5_file</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">eids</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;exports the elements in a vectorized way&quot;&quot;&quot;</span>
        <span class="c1">#comments = []</span>
        <span class="n">pids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">mcids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">thetas</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">zoffsets</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">#t1234 = []</span>
        <span class="k">for</span> <span class="n">eid</span> <span class="ow">in</span> <span class="n">eids</span><span class="p">:</span>
            <span class="n">element</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">eid</span><span class="p">]</span>
            <span class="c1">#comments.append(element.comment)</span>
            <span class="n">pids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">pid</span><span class="p">)</span>
            <span class="n">nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="n">mcid</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span>
                <span class="n">theta</span> <span class="o">=</span> <span class="mf">0.</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">)</span>
                <span class="n">mcid</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
                <span class="n">theta</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span>
            <span class="n">mcids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mcid</span><span class="p">)</span>
            <span class="n">thetas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
            <span class="n">zoffsets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">zoffset</span><span class="p">)</span>
            <span class="c1">#t1234.append([element.T1, element.T2, element.T3, element.T4])</span>
        <span class="c1">#h5_file.create_dataset(&#39;_comment&#39;, data=comments)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;eid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">eids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">pids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;nodes&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">nodes</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;mcid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">mcids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">thetas</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;zoffset&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">zoffsets</span><span class="p">)</span></div>
        <span class="c1">#self.tflag = tflag</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">zoffset</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span>
                 <span class="n">tflag</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">T1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">T2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">T3</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">T4</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a CQUAD4 card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        eid : int</span>
<span class="sd">            element id</span>
<span class="sd">        pid : int</span>
<span class="sd">            property id (PSHELL/PCOMP/PCOMPG)</span>
<span class="sd">        nids : List[int, int, int, int]</span>
<span class="sd">            node ids</span>
<span class="sd">        zoffset : float; default=0.0</span>
<span class="sd">            Offset from the surface of grid points to the element reference</span>
<span class="sd">            plane.  Requires MID1 and MID2.</span>
<span class="sd">        theta_mcid : float; default=0.0</span>
<span class="sd">            float : material coordinate system angle (theta) is defined</span>
<span class="sd">                    relative to the element coordinate system</span>
<span class="sd">            int : x-axis from material coordinate system angle defined by</span>
<span class="sd">                  mcid is projected onto the element</span>
<span class="sd">        tflag : int; default=0</span>
<span class="sd">            0 : Ti are actual user specified thicknesses</span>
<span class="sd">            1 : Ti are fractions relative to the T value of the PSHELL</span>
<span class="sd">        T1 / T2 / T3 / T4 : float; default=None</span>
<span class="sd">            If it is not supplied, then T1 through T4 will be set equal</span>
<span class="sd">            to the value of T on the PSHELL entry.</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">QuadShell</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="c1">#: Element ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eid</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="c1">#: Property ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="n">pid</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">nids</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">,</span> <span class="n">nids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_node_ids</span><span class="p">(</span><span class="n">nids</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoffset</span> <span class="o">=</span> <span class="n">zoffset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span> <span class="o">=</span> <span class="n">theta_mcid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tflag</span> <span class="o">=</span> <span class="n">tflag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T1</span> <span class="o">=</span> <span class="n">T1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T2</span> <span class="o">=</span> <span class="n">T2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T3</span> <span class="o">=</span> <span class="n">T3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T4</span> <span class="o">=</span> <span class="n">T4</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: Optional[Any]</span>

<div class="viewcode-block" id="CQUAD4.validate"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD4.validate">[docs]</a>    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">))</span> <span class="o">==</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;nodes=</span><span class="si">%s</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div>

<div class="viewcode-block" id="CQUAD4.add_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD4.add_card">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CQUAD4 card from ``BDF.add_card(...)``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        card : BDFCard()</span>
<span class="sd">            a BDFCard object</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;eid&#39;</span><span class="p">)</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="n">eid</span><span class="p">)</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="p">[</span><span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;n1&#39;</span><span class="p">),</span>
                <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;n2&#39;</span><span class="p">),</span>
                <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;n3&#39;</span><span class="p">),</span>
                <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;n4&#39;</span><span class="p">),]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">7</span><span class="p">:</span>
            <span class="n">theta_mcid</span> <span class="o">=</span> <span class="n">integer_double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;theta_mcid&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
            <span class="n">zoffset</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;zoffset&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
            <span class="n">blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;blank&#39;</span><span class="p">)</span>
            <span class="n">tflag</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;tflag&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">T1</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;T1&#39;</span><span class="p">)</span>
            <span class="n">T2</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;T2&#39;</span><span class="p">)</span>
            <span class="n">T3</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="s1">&#39;T3&#39;</span><span class="p">)</span>
            <span class="n">T4</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">&#39;T4&#39;</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">15</span><span class="p">,</span> <span class="s1">&#39;len(CQUAD4 card) = </span><span class="si">%i</span><span class="se">\n</span><span class="s1">card=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">),</span> <span class="n">card</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">theta_mcid</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="n">zoffset</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="n">tflag</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">T1</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">T2</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">T3</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">T4</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">CQUAD4</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">,</span>
                      <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">,</span> <span class="n">T4</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span></div>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_op2_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CQUAD4 card from the OP2</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        data : List[varies]</span>
<span class="sd">            a list of fields defined in OP2 format</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span>

        <span class="n">theta_mcid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
        <span class="n">zoffset</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
        <span class="n">tflag</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span>
        <span class="n">T1</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>
        <span class="n">T2</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
        <span class="n">T3</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span>
        <span class="n">T4</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">T1</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">:</span>
            <span class="n">T1</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">if</span> <span class="n">T2</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">:</span>
            <span class="n">T2</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">if</span> <span class="n">T3</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">:</span>
            <span class="n">T3</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">if</span> <span class="n">T4</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">:</span>
            <span class="n">T4</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">assert</span> <span class="n">tflag</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;data=</span><span class="si">%s</span><span class="s1"> tflag=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">tflag</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">CQUAD4</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">,</span>
                      <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">,</span> <span class="n">T4</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

<div class="viewcode-block" id="CQUAD4.cross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD4.cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by CQUAD4 eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Coord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CQUAD4.safe_cross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD4.safe_cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">safe_cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by CQUAD4 eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">safe_property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">safe_coord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span></div>

    <span class="c1">#def x(self, eta, xi, xs):</span>
        <span class="c1">#&quot;&quot;&quot;Calculate the x-coordinate within the element.</span>

        <span class="c1">#Calculates the local xsect x-coordinate provided the desired master</span>
        <span class="c1">#coordinates eta and xi.</span>

        <span class="c1">#:Args:</span>

        <span class="c1">#- `eta (float)`: The eta coordinate in the master coordinate domain.*</span>
        <span class="c1">#- `xi (float)`: The xi coordinate in the master coordinate domain.*</span>

        <span class="c1">#:Returns:</span>

        <span class="c1">#- `x (float)`: The x-coordinate within the element.</span>

        <span class="c1">#.. note:: Xi and eta can both vary between -1 and 1 respectively.</span>

        <span class="c1">#per AeroComBAT</span>
        <span class="c1">#&quot;&quot;&quot;</span>
        <span class="c1">#return .25*(</span>
            <span class="c1">#xs[0]*(1.-xi)*(1.-eta) + xs[1]*(1.+xi)*(1.-eta)+</span>
            <span class="c1">#xs[2]*(1.+xi)*(1.+eta) + xs[3]*(1.-xi)*(1.+eta)</span>
        <span class="c1">#)</span>

    <span class="c1">#def y(self, eta, xi, ys):</span>
        <span class="c1">#&quot;&quot;&quot;Calculate the y-coordinate within the element.</span>

        <span class="c1">#Calculates the local xsect y-coordinate provided the desired master</span>
        <span class="c1">#coordinates eta and xi.</span>

        <span class="c1">#:Args:</span>

        <span class="c1">#- `eta (float)`: The eta coordinate in the master coordinate domain.*</span>
        <span class="c1">#- `xi (float)`: The xi coordinate in the master coordinate domain.*</span>

        <span class="c1">#:Returns:</span>

        <span class="c1">#- `y (float)&#39;: The y-coordinate within the element.</span>

        <span class="c1">#.. note:: Xi and eta can both vary between -1 and 1 respectively.</span>

        <span class="c1">#per AeroComBAT</span>
        <span class="c1">#&quot;&quot;&quot;</span>
        <span class="c1">#return .25*(</span>
            <span class="c1">#ys[0]*(1.-xi)*(1.-eta) + ys[1]*(1.+xi)*(1.-eta)+\</span>
            <span class="c1">#ys[2]*(1.+xi)*(1.+eta) + ys[3]*(1.-xi)*(1.+eta)</span>
        <span class="c1">#)</span>

    <span class="c1">#def Z(self, eta, xi, xs, ys):</span>
        <span class="c1">#&quot;&quot;&quot;Calculates transformation matrix relating stress to force-moments.</span>

        <span class="c1">#Intended primarily as a private method but left public, this method</span>
        <span class="c1">#calculates the transformation matrix that converts stresses to force</span>
        <span class="c1">#and moment resultants.</span>

        <span class="c1">#:Args:</span>

        <span class="c1">#- `eta (float)`: The eta coordinate in the master coordinate domain.*</span>
        <span class="c1">#- `xi (float)`: The xi coordinate in the master coordinate domain.*</span>

        <span class="c1">#:Returns:</span>

        <span class="c1">#- `Z (3x6 np.array[float])`: The stress-resutlant transformation array.</span>

        <span class="c1">#.. note:: Xi and eta can both vary between -1 and 1 respectively.</span>

        <span class="c1">#per AeroComBAT</span>
        <span class="c1">#&quot;&quot;&quot;</span>
        <span class="c1">#return np.array([</span>
            <span class="c1">#[1., 0, 0, 0, 0, -self.y(eta, xi, ys)],</span>
            <span class="c1">#[0, 1., 0, 0, 0, self.x(eta, xi, xs)],</span>
            <span class="c1">#[0, 0, 1., self.y(eta, xi, ys), -self.x(eta, xi, xs), 0]</span>
        <span class="c1">#])</span>

    <span class="c1">#def J(self, eta, xi):</span>
        <span class="c1">#&quot;&quot;&quot;Calculates the jacobian at a point in the element.</span>

        <span class="c1">#This method calculates the jacobian at a local point within the element</span>
        <span class="c1">#provided the master coordinates eta and xi.</span>

        <span class="c1">#:Args:</span>

        <span class="c1">#- `eta (float)`: The eta coordinate in the master coordinate domain.</span>
        <span class="c1">#- `xi (float)`: The xi coordinate in the master coordinate domain.</span>

        <span class="c1">#:Returns:</span>

        <span class="c1">#- `Jmat (3x3 np.array[float])`: The stress-resutlant transformation</span>
            <span class="c1">#array.</span>

        <span class="c1">#.. note:: Xi and eta can both vary between -1 and 1 respectively.</span>

        <span class="c1">#per AeroComBAT</span>
        <span class="c1">#&quot;&quot;&quot;</span>
        <span class="c1">#xs = self.xs</span>
        <span class="c1">#ys = self.ys</span>
        <span class="c1">#J11 = 0.25*(-xs[0]*(1-eta) + xs[1]*(1-eta) + xs[2]*(1+eta) - xs[3]*(1+eta))</span>
        <span class="c1">#J12 = 0.25*(-ys[0]*(1-eta) + ys[1]*(1-eta) + ys[2]*(1+eta) - ys[3]*(1+eta))</span>
        <span class="c1">#J21 = 0.25*(-xs[0]*(1-xi) - xs[1]*(1+xi) + xs[2]*(1+xi) + xs[3]*(1-xi))</span>
        <span class="c1">#J22 = 0.25*(-ys[0]*(1-xi) - ys[1]*(1+xi) + ys[2]*(1+xi) + ys[3]*(1-xi))</span>
        <span class="c1">#Jmat = np.array([</span>
            <span class="c1">#[J11, J12, 0.],</span>
            <span class="c1">#[J21, J22, 0.],</span>
            <span class="c1">#[0., 0., 1.]])</span>
        <span class="c1">#return Jmat</span>

    <span class="c1">#def _gauss(self):</span>
        <span class="c1">#&quot;&quot;&quot;</span>
        <span class="c1">#per AeroComBAT</span>
        <span class="c1">#&quot;&quot;&quot;</span>
        <span class="c1">#xyz = self.get_node_positions()</span>
        <span class="c1">#xs = xyz[:, 0]</span>
        <span class="c1">#ys = xyz[:, 0]</span>

        <span class="c1">## Initialize coordinates for Guass Quadrature Integration</span>
        <span class="c1">#etas = np.array([-1,1]) * np.sqrt(3)/3</span>
        <span class="c1">#xis = np.array([-1,1]) * np.sqrt(3)/3</span>

        <span class="c1">## Evaluate/sum the cross-section matricies at the Guass points</span>
        <span class="c1">#for k in range(0, np.size(xis)):</span>
            <span class="c1">#for l in range(0, np.size(etas)):</span>
                <span class="c1">##Get Z Matrix</span>
                <span class="c1">#Zmat = self.Z(etas[l], xis[k], xs, ys)</span>

                <span class="c1">##Get BN Matricies</span>
                <span class="c1">#Jmat = self.J(etas[l], xis[k], xs, ys)</span>

                <span class="c1">##Get determinant of the Jacobian Matrix</span>
                <span class="c1">#Jdet = abs(np.linalg.det(Jmat))</span>
                <span class="c1">#Jmatinv = np.linalg.inv(Jmat)</span>
                <span class="c1">#Bxi = np.zeros((6,3))</span>
                <span class="c1">#Beta = np.zeros((6,3))</span>
                <span class="c1">#Bxi[0,0] = Bxi[2,1] = Bxi[3,2] = Jmatinv[0,0]</span>
                <span class="c1">#Bxi[1,1] = Bxi[2,0] = Bxi[4,2] = Jmatinv[1,0]</span>
                <span class="c1">#Beta[0,0] = Beta[2,1] = Beta[3,2] = Jmatinv[0,1]</span>
                <span class="c1">#Beta[1,1] = Beta[2,0] = Beta[4,2] = Jmatinv[1,1]</span>
                <span class="c1">#BN = np.dot(Bxi,self.dNdxi(etas[l])) + np.dot(Beta,self.dNdeta(xis[k]))</span>

                <span class="c1">##Get a few last minute matricies</span>
                <span class="c1">#S = np.zeros((6,3))</span>
                <span class="c1">#S[3,0] = 1.</span>
                <span class="c1">#S[4,1] = 1.</span>
                <span class="c1">#S[5,2] = 1.</span>
                <span class="c1">#SZ = S @ Zmat</span>
                <span class="c1">#Nmat = self.N(etas[l], xis[k])</span>
                <span class="c1">#SN = S @ Nmat</span>

                <span class="c1">## Calculate the mass per unit length of the element</span>
                <span class="c1">#self.mass += self.rho * Jdet</span>

                <span class="c1">##Add to Ae Matrix</span>
                <span class="c1">#self.Ae += SZ.T @ self.Q @ SZ * Jdet</span>

                <span class="c1">##Add to Re Matrix</span>
                <span class="c1">#self.Re += BN.T @ self.Q @ SZ * Jdet</span>

                <span class="c1">##Add to Ee Matrix</span>
                <span class="c1">#self.Ee += BN.T @ self.Q @ BN * Jdet</span>

                <span class="c1">##Add to Ce Matrix</span>
                <span class="c1">#self.Ce += BN.T @ self.Q @ SN * Jdet</span>

                <span class="c1">##Add to Le Matrix</span>
                <span class="c1">#self.Le += SN.T @ self.Q @ SZ * Jdet</span>

                <span class="c1">##Add to Me Matrix</span>
                <span class="c1">#self.Me += SN.T @ self.Q @ SN * Jdet</span>

    <span class="c1">#@staticmethod</span>
    <span class="c1">#def N(eta, xi):</span>
        <span class="c1">#&quot;&quot;&quot;Generates the shape-function value weighting matrix.</span>

        <span class="c1">#Intended primarily as a private method but left public, this method</span>
        <span class="c1">#generates the weighting matrix used to interpolate values within the</span>
        <span class="c1">#element. This method however is mainly reserved for the cross-sectional</span>
        <span class="c1">#analysis process.</span>

        <span class="c1">#:Args:</span>

        <span class="c1">#- `eta (float)`: The eta coordinate in the master coordinate domain.*</span>
        <span class="c1">#- `xi (float)`: The xi coordinate in the master coordinate domain.*</span>

        <span class="c1">#:Returns:</span>

        <span class="c1">#- `Nmat (3x12 np.array[float])`: The shape-function value weighting</span>
            <span class="c1">#matrix.</span>

        <span class="c1">#Notes</span>
        <span class="c1">#-----</span>
        <span class="c1">#Xi and eta can both vary between -1 and 1 respectively.</span>

        <span class="c1">#per AeroComBAT</span>
        <span class="c1">#&quot;&quot;&quot;</span>
        <span class="c1">#Nmat = np.zeros([3,12])</span>
        <span class="c1">#N1 = .25*(1.-xi)*(1.-eta)</span>
        <span class="c1">#N2 = .25*(1.+xi)*(1.-eta)</span>
        <span class="c1">#N3 = .25*(1.+xi)*(1.+eta)</span>
        <span class="c1">#N4 = .25*(1.-xi)*(1.+eta)</span>
        <span class="c1">#Nmat[0,0] = Nmat[1,1] = Nmat[2,2] = N1</span>
        <span class="c1">#Nmat[0,3] = Nmat[1,4] = Nmat[2,5] = N2</span>
        <span class="c1">#Nmat[0,6] = Nmat[1,7] = Nmat[2,8] = N3</span>
        <span class="c1">#Nmat[0,9] = Nmat[1,10] = Nmat[2,11] = N4</span>
        <span class="c1">#return Nmat</span>

    <span class="c1">#@staticmethod</span>
    <span class="c1">#def dNdxi(eta):</span>
        <span class="c1">#&quot;&quot;&quot;Generates a gradient of the shape-function value weighting matrix.</span>

        <span class="c1">#Intended primarily as a private method but left public, this method</span>
        <span class="c1">#generates the gradient of the weighting matrix with respect to xi and</span>
        <span class="c1">#is used to interpolate values within the element. This method however</span>
        <span class="c1">#is mainly reserved for the cross-sectional analysis process.</span>

        <span class="c1">#:Args:</span>

        <span class="c1">#- `eta (float)`: The eta coordinate in the master coordinate domain.*</span>
        <span class="c1">#- `xi (float)`: The xi coordinate in the master coordinate domain.*</span>

        <span class="c1">#:Returns:</span>

        <span class="c1">#- `dNdxi_mat (3x12 np.array[float])`: The gradient of the shape-</span>
            <span class="c1">#function value weighting matrix with respect to xi.</span>

        <span class="c1">#.. note:: Xi and eta can both vary between -1 and 1 respectively.</span>

        <span class="c1">#per AeroComBAT</span>
        <span class="c1">#&quot;&quot;&quot;</span>
        <span class="c1">#dNdxi_mat = np.zeros([3,12])</span>
        <span class="c1">#dN1dxi = -.25*(1-eta)</span>
        <span class="c1">#dN2dxi = .25*(1-eta)</span>
        <span class="c1">#dN3dxi = .25*(1+eta)</span>
        <span class="c1">#dN4dxi = -.25*(1+eta)</span>
        <span class="c1">#dNdxi_mat[0,0] = dNdxi_mat[1,1] = dNdxi_mat[2,2] = dN1dxi</span>
        <span class="c1">#dNdxi_mat[0,3] = dNdxi_mat[1,4] = dNdxi_mat[2,5] = dN2dxi</span>
        <span class="c1">#dNdxi_mat[0,6] = dNdxi_mat[1,7] = dNdxi_mat[2,8] = dN3dxi</span>
        <span class="c1">#dNdxi_mat[0,9] = dNdxi_mat[1,10] = dNdxi_mat[2,11] = dN4dxi</span>
        <span class="c1">#return dNdxi_mat</span>

    <span class="c1">#@staticmethod</span>
    <span class="c1">#def dNdeta(xi):</span>
        <span class="c1">#&quot;&quot;&quot;Generates a gradient of the shape-function value weighting matrix.</span>

        <span class="c1">#Intended primarily as a private method but left public, this method</span>
        <span class="c1">#generates the gradient of the weighting matrix with respect to eta and</span>
        <span class="c1">#is used to interpolate values within the element. This method however</span>
        <span class="c1">#is mainly reserved for the cross-sectional analysis process.</span>

        <span class="c1">#:Args:</span>

        <span class="c1">#- `eta (float)`: The eta coordinate in the master coordinate domain.*</span>
        <span class="c1">#- `xi (float)`: The xi coordinate in the master coordinate domain.*</span>

        <span class="c1">#:Returns:</span>

        <span class="c1">#- `dNdeta_mat (3x12 np.array[float])`: The gradient of the shape-</span>
            <span class="c1">#function value weighting matrix with respect to eta.</span>

        <span class="c1">#.. note:: Xi and eta can both vary between -1 and 1 respectively.</span>

        <span class="c1">#per AeroComBAT</span>
        <span class="c1">#&quot;&quot;&quot;</span>
        <span class="c1">#dNdeta_mat = np.zeros([3,12])</span>
        <span class="c1">#dN1deta = -.25*(1-xi)</span>
        <span class="c1">#dN2deta = -.25*(1+xi)</span>
        <span class="c1">#dN3deta = .25*(1+xi)</span>
        <span class="c1">#dN4deta = .25*(1-xi)</span>
        <span class="c1">#dNdeta_mat[0,0] = dNdeta_mat[1,1] = dNdeta_mat[2,2] = dN1deta</span>
        <span class="c1">#dNdeta_mat[0,3] = dNdeta_mat[1,4] = dNdeta_mat[2,5] = dN2deta</span>
        <span class="c1">#dNdeta_mat[0,6] = dNdeta_mat[1,7] = dNdeta_mat[2,8] = dN3deta</span>
        <span class="c1">#dNdeta_mat[0,9] = dNdeta_mat[1,10] = dNdeta_mat[2,11] = dN4deta</span>
        <span class="c1">#return dNdeta_mat</span>

<div class="viewcode-block" id="CQUAD4.uncross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD4.uncross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">uncross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes cross-reference links&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Theta_mcid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="CQUAD4.split_to_ctria3"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD4.split_to_ctria3">[docs]</a>    <span class="k">def</span> <span class="nf">split_to_ctria3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eida</span><span class="p">,</span> <span class="n">eidb</span><span class="p">):</span>
        <span class="c1"># (int, int) -&gt; (CTRIA3, CTRIA3)</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Splits a CQUAD4 into two CTRIA3s</span>

<span class="sd">        .. todo:: doesn&#39;t consider theta_mcid if a float correctly (use an integer)</span>
<span class="sd">        .. todo:: doesn&#39;t optimize the orientation of the nodes yet...</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">]</span>
        <span class="n">elementa</span> <span class="o">=</span> <span class="n">CTRIA3</span><span class="p">(</span><span class="n">eida</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">zoffset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">zoffset</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span>
                          <span class="n">tflag</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">T3</span><span class="p">,</span>
                          <span class="n">comment</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">comment</span><span class="p">)</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="p">[</span><span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n1</span><span class="p">]</span>
        <span class="n">elementb</span> <span class="o">=</span> <span class="n">CTRIA3</span><span class="p">(</span><span class="n">eidb</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">zoffset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">zoffset</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span>
                          <span class="n">tflag</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">T3</span><span class="p">,</span>
                          <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">elementa</span><span class="p">,</span> <span class="n">elementb</span></div>

<div class="viewcode-block" id="CQUAD4.get_thickness_scale"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD4.get_thickness_scale">[docs]</a>    <span class="k">def</span> <span class="nf">get_thickness_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T4</span><span class="p">]</span></div>

    <span class="k">def</span> <span class="nf">_verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xref</span><span class="p">):</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="n">unused_edges</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_edge_ids</span><span class="p">()</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">nid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">nids</span><span class="p">):</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">),</span> <span class="s1">&#39;nid</span><span class="si">%i</span><span class="s1"> is not an integer; nid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">nid</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">xref</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;PSHELL&#39;</span><span class="p">,</span> <span class="s1">&#39;PCOMP&#39;</span><span class="p">,</span> <span class="s1">&#39;PCOMPG&#39;</span><span class="p">,</span> <span class="s1">&#39;PLPLANE&#39;</span><span class="p">],</span> <span class="s1">&#39;pid=</span><span class="si">%i</span><span class="s1"> self.pid_ref.type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;PLPLANE&#39;</span><span class="p">]:</span>
                <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Thickness</span><span class="p">()</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;thickness=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">t</span>
                <span class="n">mass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Mass</span><span class="p">()</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mass</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;mass=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">mass</span>
            <span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">AreaCentroidNormal</span><span class="p">()</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;Area=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">a</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="nb">float</span><span class="p">)</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="nb">float</span><span class="p">)</span>

<div class="viewcode-block" id="CQUAD4.flip_normal"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD4.flip_normal">[docs]</a>    <span class="k">def</span> <span class="nf">flip_normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ::</span>

<span class="sd">          1---2       1---4</span>
<span class="sd">          |   |  --&gt;  |   |</span>
<span class="sd">          |   |       |   |</span>
<span class="sd">          4---3       2---3</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">]</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">node_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node_ids</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">,</span> <span class="n">allow_empty_nodes</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<div class="viewcode-block" id="CQUAD4.write_as_ctria3"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD4.write_as_ctria3">[docs]</a>    <span class="k">def</span> <span class="nf">write_as_ctria3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_eid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        triangle - 012</span>
<span class="sd">        triangle - 023</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">zoffset</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zoffset</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">nodes1</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
        <span class="n">nodes2</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span>
        <span class="n">fields1</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;CTRIA3&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="n">nodes1</span> <span class="o">+</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">]</span>
        <span class="n">fields2</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;CTRIA3&#39;</span><span class="p">,</span> <span class="n">new_eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="n">nodes2</span> <span class="o">+</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">print_card</span><span class="p">(</span><span class="n">fields1</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">print_card</span><span class="p">(</span><span class="n">fields2</span><span class="p">)</span></div>

<div class="viewcode-block" id="CQUAD4.raw_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD4.raw_fields">[docs]</a>    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">([</span><span class="s1">&#39;CQUAD4&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span> <span class="o">+</span>
                       <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">zoffset</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tflag</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T2</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">T3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T4</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="CQUAD4.repr_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD4.repr_fields">[docs]</a>    <span class="k">def</span> <span class="nf">repr_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">,</span> <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">,</span> <span class="n">T4</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_repr_defaults</span><span class="p">()</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">([</span><span class="s1">&#39;CQUAD4&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span> <span class="o">+</span>
                       <span class="p">[</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">,</span> <span class="n">T4</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="CQUAD4.write_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD4.write_card">[docs]</a>    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>

        <span class="n">row2_data</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">zoffset</span><span class="p">,</span>
                     <span class="bp">self</span><span class="o">.</span><span class="n">tflag</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T4</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">row2_data</span> <span class="o">==</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="n">nodes</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;CQUAD4  </span><span class="si">%8i%8i%8i%8i%8i%8i</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">msg</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">theta_mcid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_theta_mcid_repr</span><span class="p">()</span>
            <span class="n">zoffset</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zoffset</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
            <span class="n">tflag</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tflag</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">T1</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
            <span class="n">T2</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
            <span class="n">T3</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T3</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
            <span class="n">T4</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T4</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>

            <span class="n">row2_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">,</span>
                         <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">,</span> <span class="n">T4</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
                <span class="n">row2</span> <span class="o">=</span> <span class="p">[</span><span class="n">print_field_8</span><span class="p">(</span><span class="n">field</span><span class="p">)</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">row2_data</span><span class="p">]</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="n">nodes</span> <span class="o">+</span> <span class="n">row2</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;CQUAD4  </span><span class="si">%8i%8i%8i%8i%8i%8i%8s%8s</span><span class="se">\n</span><span class="s1">&#39;</span>
                       <span class="s1">&#39;                </span><span class="si">%8s%8s%8s%8s%8s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">msg</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1"> &#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">row2</span> <span class="o">=</span> <span class="p">[</span><span class="n">print_field_16</span><span class="p">(</span><span class="n">field</span><span class="p">)</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">row2_data</span><span class="p">]</span>
                <span class="n">is_stripped</span> <span class="o">=</span> <span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">row2</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">is_stripped</span><span class="p">[</span><span class="mi">2</span><span class="p">:]):</span> <span class="c1"># tflag, t1234 are blank</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="n">nodes</span> <span class="o">+</span> <span class="n">row2</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;CQUAD4* </span><span class="si">%16i%16i%16i%16i</span><span class="se">\n</span><span class="s1">&#39;</span>
                           <span class="s1">&#39;*       </span><span class="si">%16i%16i%16s%16s</span><span class="se">\n</span><span class="s1">&#39;</span>
                           <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="n">nodes</span> <span class="o">+</span> <span class="n">row2</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;CQUAD4* </span><span class="si">%16i%16i%16i%16i</span><span class="se">\n</span><span class="s1">&#39;</span>
                           <span class="s1">&#39;*       </span><span class="si">%16i%16i%16s%16s</span><span class="se">\n</span><span class="s1">&#39;</span>
                           <span class="s1">&#39;*                     </span><span class="si">%16s%16s%16s</span><span class="se">\n</span><span class="s1">&#39;</span>
                           <span class="s1">&#39;*       </span><span class="si">%16s%16s</span><span class="se">\n</span><span class="s1">&#39;</span>
                           <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">msg</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;*</span><span class="se">\n</span><span class="s1"> &#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">msg</span></div></div>


<span class="k">class</span> <span class="nc">CPLSTx4</span><span class="p">(</span><span class="n">QuadShell</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    +---------+-------+-------+----+----+----+----+-------+</span>
<span class="sd">    |    1    |   2   |   3   |  4 |  5 |  6 | 7  |   8   |</span>
<span class="sd">    +=========+=======+=======+====+====+====+====+=======+</span>
<span class="sd">    | CPLSTN4 |  EID  |  PID  | N1 | N2 | N3 | N4 | THETA |</span>
<span class="sd">    +---------+-------+-------+----+----+----+----+-------+</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_field_map</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;eid&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span><span class="s1">&#39;theta&#39;</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">_update_field_helper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Field </span><span class="si">%r</span><span class="s1">=</span><span class="si">%r</span><span class="s1"> is an invalid </span><span class="si">%s</span><span class="s1"> entry.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="n">QuadShell</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="c1">#: Element ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eid</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="c1">#: Property ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="n">pid</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">nids</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">,</span> <span class="n">nids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_node_ids</span><span class="p">(</span><span class="n">nids</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta</span> <span class="o">=</span> <span class="n">theta</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">export_to_hdf5</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">h5_file</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">eids</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;exports the elements in a vectorized way&quot;&quot;&quot;</span>
        <span class="c1">#comments = []</span>
        <span class="n">pids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">thetas</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">eid</span> <span class="ow">in</span> <span class="n">eids</span><span class="p">:</span>
            <span class="n">element</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">eid</span><span class="p">]</span>
            <span class="c1">#comments.append(element.comment)</span>
            <span class="n">pids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">pid</span><span class="p">)</span>
            <span class="n">nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
            <span class="n">thetas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta</span><span class="p">)</span>
        <span class="c1">#h5_file.create_dataset(&#39;_comment&#39;, data=comments)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;eid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">eids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">pids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;nodes&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">nodes</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">thetas</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">))</span> <span class="o">==</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;nodes=</span><span class="si">%s</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CPLSTx4 card from ``BDF.add_card(...)``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        card : BDFCard()</span>
<span class="sd">            a BDFCard object</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;eid&#39;</span><span class="p">)</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="n">eid</span><span class="p">)</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="p">[</span><span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;n1&#39;</span><span class="p">),</span>
                <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;n2&#39;</span><span class="p">),</span>
                <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;n3&#39;</span><span class="p">),</span>
                <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;n4&#39;</span><span class="p">),]</span>

        <span class="n">theta</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;len(</span><span class="si">%s</span><span class="s1"> card) = </span><span class="si">%i</span><span class="se">\n</span><span class="s1">card=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">),</span> <span class="n">card</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;, which is required by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s1"> eid=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">(),</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">safe_cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;, which is required by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s1"> eid=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">safe_property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">uncross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes cross-reference links&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xref</span><span class="p">):</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="n">unused_edges</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_edge_ids</span><span class="p">()</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">nid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">nids</span><span class="p">):</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">),</span> <span class="s1">&#39;nid</span><span class="si">%i</span><span class="s1"> is not an integer; nid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">nid</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">xref</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;PPLANE&#39;</span><span class="p">,</span> <span class="s1">&#39;PLPLANE&#39;</span><span class="p">,</span> <span class="s1">&#39;PGPLSN&#39;</span><span class="p">],</span> <span class="s1">&#39;pid=</span><span class="si">%i</span><span class="s1"> self.pid_ref.type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
            <span class="c1">#if not self.pid_ref.type in [&#39;PLPLANE&#39;]:</span>
                <span class="c1">#t = self.Thickness()</span>
                <span class="c1">#assert isinstance(t, float), &#39;thickness=%r&#39; % t</span>
                <span class="c1">#mass = self.Mass()</span>
                <span class="c1">#assert isinstance(mass, float), &#39;mass=%r&#39; % mass</span>
            <span class="c1">#a, c, n = self.AreaCentroidNormal()</span>
            <span class="c1">#assert isinstance(a, float), &#39;Area=%r&#39; % a</span>
            <span class="c1">#for i in range(3):</span>
                <span class="c1">#assert isinstance(c[i], float)</span>
                <span class="c1">#assert isinstance(n[i], float)</span>

    <span class="k">def</span> <span class="nf">flip_normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ::</span>

<span class="sd">          1---2       1---4</span>
<span class="sd">          |   |  --&gt;  |   |</span>
<span class="sd">          |   |       |   |</span>
<span class="sd">          4---3       2---3</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">Mass</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">node_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node_ids</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">,</span> <span class="n">allow_empty_nodes</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span> <span class="o">+</span>
                       <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theta</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">list_fields</span>

    <span class="k">def</span> <span class="nf">repr_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">theta</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span> <span class="o">+</span>
                       <span class="p">[</span><span class="n">theta</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">list_fields</span>


<div class="viewcode-block" id="CPLSTS4"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CPLSTS4">[docs]</a><span class="k">class</span> <span class="nc">CPLSTS4</span><span class="p">(</span><span class="n">CPLSTx4</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    +---------+-------+-------+----+-------+----+-------+-------+------+</span>
<span class="sd">    |    1    |   2   |   3   |  4 |   5   |  6 |   7   |   8   |   9  |</span>
<span class="sd">    +=========+=======+=======+====+=======+====+=======+=======+======+</span>
<span class="sd">    | CPLSTS4 |  EID  |  PID  | N1 |   N2  | N3 |   N4  | THETA |      |</span>
<span class="sd">    +---------+-------+-------+----+-------+----+-------+-------+------+</span>
<span class="sd">    |         |       |       |    | TFLAG | T1 |   T2  |   T3  |  T4  |</span>
<span class="sd">    +---------+-------+-------+----+-------+----+-------+-------+------+</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;CPLSTS4&#39;</span>

<div class="viewcode-block" id="CPLSTS4.write_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CPLSTS4.write_card">[docs]</a>    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="n">nodes</span> <span class="o">+</span> <span class="p">[</span><span class="n">print_float_8</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta</span><span class="p">)]</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;CPLSTS4 </span><span class="si">%8i%8i%8i%8i%8i%8i%8s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">msg</span></div></div>


<div class="viewcode-block" id="CPLSTN4"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CPLSTN4">[docs]</a><span class="k">class</span> <span class="nc">CPLSTN4</span><span class="p">(</span><span class="n">CPLSTx4</span><span class="p">):</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;CPLSTN4&#39;</span>

<div class="viewcode-block" id="CPLSTN4.write_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CPLSTN4.write_card">[docs]</a>    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="n">nodes</span> <span class="o">+</span> <span class="p">[</span><span class="n">print_float_8</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta</span><span class="p">)]</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;CPLSTN4 </span><span class="si">%8i%8i%8i%8i%8i%8i%8s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">msg</span></div></div>


<span class="k">class</span> <span class="nc">CPLSTx6</span><span class="p">(</span><span class="n">TriShell</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="n">TriShell</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eid</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="n">pid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta</span> <span class="o">=</span> <span class="n">theta</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_node_ids</span><span class="p">(</span><span class="n">nids</span><span class="p">,</span> <span class="n">allow_empty_nodes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">nids</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;error on </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s1">&#39;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">export_to_hdf5</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">h5_file</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">eids</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;exports the elements in a vectorized way&quot;&quot;&quot;</span>
        <span class="c1">#comments = []</span>
        <span class="n">pids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">thetas</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">eid</span> <span class="ow">in</span> <span class="n">eids</span><span class="p">:</span>
            <span class="n">element</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">eid</span><span class="p">]</span>
            <span class="c1">#comments.append(element.comment)</span>
            <span class="n">pids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">pid</span><span class="p">)</span>
            <span class="n">nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
            <span class="n">thetas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta</span><span class="p">)</span>
        <span class="c1">#h5_file.create_dataset(&#39;_comment&#39;, data=comments)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;eid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">eids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">pids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;nodes&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">nodes</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">thetas</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CPLSTx6 card from ``BDF.add_card(...)``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        card : BDFCard()</span>
<span class="sd">            a BDFCard object</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#: Element ID</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;eid&#39;</span><span class="p">)</span>
        <span class="c1">#: Property ID</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;pid&#39;</span><span class="p">)</span>

        <span class="n">nids</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;n1&#39;</span><span class="p">),</span>
            <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;n2&#39;</span><span class="p">),</span>
            <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;n3&#39;</span><span class="p">),</span>
            <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;n4&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;n5&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;n6&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">9</span><span class="p">:</span>
            <span class="n">theta</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">15</span><span class="p">,</span> <span class="s1">&#39;len(</span><span class="si">%s</span><span class="s1"> card) = </span><span class="si">%i</span><span class="se">\n</span><span class="s1">card=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">),</span> <span class="n">card</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">theta</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="n">theta</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;, which is required by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s1"> eid=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">EmptyNodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">(),</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">safe_cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;, which is required by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s1"> eid=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">EmptyNodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">safe_property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">uncross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes cross-reference links&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">Mass</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_op2_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CPLSTN6 card from the OP2</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        data : List[varies]</span>
<span class="sd">            a list of fields defined in OP2 format</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">8</span><span class="p">]</span>
        <span class="n">theta</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">nids</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;error on CPLSTN6&#39;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xref</span><span class="p">):</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="n">edges</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_edge_ids</span><span class="p">()</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">nid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">nids</span><span class="p">):</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span> <span class="ow">or</span> <span class="n">nid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;nid</span><span class="si">%i</span><span class="s1"> is not an integer/None; nid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">nid</span><span class="p">)</span>

        <span class="c1">#if xref:</span>
            <span class="c1">#assert self.pid_ref.type in [&#39;PSHELL&#39;, &#39;PCOMP&#39;, &#39;PCOMPG&#39;, &#39;PLPLANE&#39;], &#39;pid=%i self.pid_ref.type=%s&#39; % (pid, self.pid_ref.type)</span>
            <span class="c1">#if not self.pid_ref.type in [&#39;PLPLANE&#39;]:</span>
                <span class="c1">#t = self.Thickness()</span>
                <span class="c1">#assert isinstance(t, float), &#39;thickness=%r&#39; % t</span>
                <span class="c1">#mass = self.Mass()</span>
                <span class="c1">#assert isinstance(mass, float), &#39;mass=%r&#39; % mass</span>
            <span class="c1">#a, c, n = self.AreaCentroidNormal()</span>
            <span class="c1">#assert isinstance(a, float), &#39;Area=%r&#39; % a</span>
            <span class="c1">#for i in range(3):</span>
                <span class="c1">#assert isinstance(c[i], float)</span>
                <span class="c1">#assert isinstance(n[i], float)</span>

    <span class="k">def</span> <span class="nf">Thickness</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the thickness, :math:`t`&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">Thickness</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">AreaCentroidNormal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns area, centroid, normal as it&#39;s more efficient to do them</span>
<span class="sd">        together</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">_triangle_area_centroid_normal</span><span class="p">([</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">],</span> <span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">Area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the area, :math:`A`.</span>

<span class="sd">        .. math:: A = \frac{1}{2} (n_0-n_1) \times (n_0-n_2)&quot;&quot;&quot;</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">n1</span> <span class="o">-</span> <span class="n">n2</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">n1</span> <span class="o">-</span> <span class="n">n3</span>
        <span class="n">area</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">norm</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">area</span>

    <span class="k">def</span> <span class="nf">Normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the normal vector, :math:`n`.</span>

<span class="sd">        .. math::</span>
<span class="sd">          n = \frac{(n_0-n_1) \times (n_0-n_2)}{\lvert (n_0-n_1) \times (n_0-n_2) \lvert}</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">_normal</span><span class="p">(</span><span class="n">n1</span> <span class="o">-</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n1</span> <span class="o">-</span> <span class="n">n3</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">Centroid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the centroid.</span>

<span class="sd">        .. math::</span>
<span class="sd">          CG = \frac{1}{3} (n_1+n_2+n_3)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
        <span class="n">centroid</span> <span class="o">=</span> <span class="p">(</span><span class="n">n1</span> <span class="o">+</span> <span class="n">n2</span> <span class="o">+</span> <span class="n">n3</span><span class="p">)</span> <span class="o">/</span> <span class="mf">3.</span>
        <span class="k">return</span> <span class="n">centroid</span>

    <span class="k">def</span> <span class="nf">flip_normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Flips normal of element.</span>

<span class="sd">        ::</span>

<span class="sd">               1                1</span>
<span class="sd">               **               **</span>
<span class="sd">              *  *             *  *</span>
<span class="sd">             4    6   --&gt;     6    4</span>
<span class="sd">            *      *         *      *</span>
<span class="sd">           2----5---3       3----5---2</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n5</span><span class="p">,</span> <span class="n">n6</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n6</span><span class="p">,</span> <span class="n">n5</span><span class="p">,</span> <span class="n">n4</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n5</span><span class="p">,</span> <span class="n">n6</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n6</span><span class="p">,</span> <span class="n">n5</span><span class="p">,</span> <span class="n">n4</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">node_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node_ids</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">,</span> <span class="n">allow_empty_nodes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span> <span class="o">+</span>
                       <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theta</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">list_fields</span>

    <span class="k">def</span> <span class="nf">repr_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">theta</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span> <span class="o">+</span>
                       <span class="p">[</span><span class="n">theta</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">list_fields</span>

    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">card</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repr_fields</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_8</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_16</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
        <span class="c1">#msg2 = self.write_card(size)</span>
        <span class="c1">#assert msg == msg2, &#39;\n%s---\n%s\n%r\n%r&#39; % (msg, msg2, msg, msg2)</span>
        <span class="k">return</span> <span class="n">msg</span>


<div class="viewcode-block" id="CPLSTS6"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CPLSTS6">[docs]</a><span class="k">class</span> <span class="nc">CPLSTS6</span><span class="p">(</span><span class="n">CPLSTx6</span><span class="p">):</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;CPLSTS6&#39;</span></div>

<div class="viewcode-block" id="CPLSTN6"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CPLSTN6">[docs]</a><span class="k">class</span> <span class="nc">CPLSTN6</span><span class="p">(</span><span class="n">CPLSTx6</span><span class="p">):</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;CPLSTN6&#39;</span></div>


<span class="k">class</span> <span class="nc">CPLSTx8</span><span class="p">(</span><span class="n">QuadShell</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="n">QuadShell</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="c1">#: Element ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eid</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="c1">#: Property ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="n">pid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta</span> <span class="o">=</span> <span class="n">theta</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_node_ids</span><span class="p">(</span><span class="n">nids</span><span class="p">,</span> <span class="n">allow_empty_nodes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">8</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">export_to_hdf5</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">h5_file</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">eids</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;exports the elements in a vectorized way&quot;&quot;&quot;</span>
        <span class="c1">#comments = []</span>
        <span class="n">pids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">thetas</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">eid</span> <span class="ow">in</span> <span class="n">eids</span><span class="p">:</span>
            <span class="n">element</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">eid</span><span class="p">]</span>
            <span class="c1">#comments.append(element.comment)</span>
            <span class="n">pids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">pid</span><span class="p">)</span>
            <span class="n">nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
            <span class="n">thetas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta</span><span class="p">)</span>
        <span class="c1">#h5_file.create_dataset(&#39;_comment&#39;, data=comments)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;eid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">eids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">pids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;nodes&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">nodes</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">thetas</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CPLSTx8 card from ``BDF.add_card(...)``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        card : BDFCard()</span>
<span class="sd">            a BDFCard object</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;eid&#39;</span><span class="p">)</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;pid&#39;</span><span class="p">)</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="p">[</span><span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;n1&#39;</span><span class="p">),</span>
                <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;n2&#39;</span><span class="p">),</span>
                <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;n3&#39;</span><span class="p">),</span>
                <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;n4&#39;</span><span class="p">),</span>
                <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;n5&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;n6&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;n7&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;n8&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">11</span><span class="p">:</span>
            <span class="n">theta</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">18</span><span class="p">,</span> <span class="s1">&#39;len(</span><span class="si">%s</span><span class="s1"> card) = </span><span class="si">%i</span><span class="se">\n</span><span class="s1">card=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">),</span> <span class="n">card</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">theta</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="n">theta</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

    <span class="c1">#@classmethod</span>
    <span class="c1">#def add_op2_data(cls, data, comment=&#39;&#39;):</span>
        <span class="c1">#&quot;&quot;&quot;</span>
        <span class="c1">#Adds a CPLSTx8 card from the OP2</span>

        <span class="c1">#Parameters</span>
        <span class="c1">#----------</span>
        <span class="c1">#data : List[varies]</span>
            <span class="c1">#a list of fields defined in OP2 format</span>
        <span class="c1">#comment : str; default=&#39;&#39;</span>
            <span class="c1">#a comment for the card</span>
        <span class="c1">#&quot;&quot;&quot;</span>
        <span class="c1">##print(&quot;CQUAD8 = &quot;,data)</span>
        <span class="c1">##(6401,</span>
        <span class="c1">##6400,</span>
        <span class="c1">##6401, 6402, 6405, 6403, 0, 0, 6404, 0,</span>
        <span class="c1">##-1.0, -1.0, -1.0, -1.0,</span>
        <span class="c1">##0.0, 0)</span>
        <span class="c1">#eid = data[0]</span>
        <span class="c1">#pid = data[1]</span>
        <span class="c1">#nids = data[2:10]</span>
        <span class="c1">#theta = data[10]</span>
        <span class="c1">#return CPLSTN8(eid, pid, nids, T1, T2, T3, T4, theta, comment=comment)</span>

    <span class="k">def</span> <span class="nf">cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;, which is required by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s1"> eid=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">EmptyNodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">(),</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">safe_cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;, which is required by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="si">}</span><span class="s1"> eid=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">EmptyNodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">safe_property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">uncross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes cross-reference links&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xref</span><span class="p">):</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="n">unused_edges</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_edge_ids</span><span class="p">()</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">nid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">nids</span><span class="p">):</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span> <span class="ow">or</span> <span class="n">nid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;nid</span><span class="si">%i</span><span class="s1"> is not an integer/None; nid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">nid</span><span class="p">)</span>

        <span class="c1">#if xref:</span>
            <span class="c1">#assert self.pid_ref.type in [&#39;PSHELL&#39;, &#39;PCOMP&#39;, &#39;PCOMPG&#39;, &#39;PLPLANE&#39;], &#39;pid=%i self.pid_ref.type=%s&#39; % (pid, self.pid_ref.type)</span>
            <span class="c1">#t = self.Thickness()</span>
            <span class="c1">#a, c, n = self.AreaCentroidNormal()</span>
            <span class="c1">#assert isinstance(t, float), &#39;thickness=%r&#39; % t</span>
            <span class="c1">#assert isinstance(a, float), &#39;Area=%r&#39; % a</span>
            <span class="c1">#for i in range(3):</span>
                <span class="c1">#assert isinstance(c[i], float)</span>
                <span class="c1">##assert isinstance(n[i], float)</span>
            <span class="c1">#mass = self.Mass()</span>
            <span class="c1">#assert isinstance(mass, float), &#39;mass=%r&#39; % mass</span>

    <span class="k">def</span> <span class="nf">Thickness</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the thickness&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">Thickness</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">flip_normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ::</span>

<span class="sd">          1--5--2       1--8--4</span>
<span class="sd">          |     |  --&gt;  |     |</span>
<span class="sd">          8     6       5     7</span>
<span class="sd">          |     |       |     |</span>
<span class="sd">          4--7--3       2--6--3</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n5</span><span class="p">,</span> <span class="n">n6</span><span class="p">,</span> <span class="n">n7</span><span class="p">,</span> <span class="n">n8</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n8</span><span class="p">,</span> <span class="n">n7</span><span class="p">,</span> <span class="n">n6</span><span class="p">,</span> <span class="n">n5</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">Normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[:</span><span class="mi">4</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">_normal</span><span class="p">(</span><span class="n">n1</span> <span class="o">-</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span> <span class="o">-</span> <span class="n">n4</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">AreaCentroid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ::</span>

<span class="sd">          1-----2</span>
<span class="sd">          |    /|</span>
<span class="sd">          | A1/ |</span>
<span class="sd">          |  /  |</span>
<span class="sd">          |/ A2 |</span>
<span class="sd">          4-----3</span>

<span class="sd">          centroid</span>
<span class="sd">             c = sum(ci*Ai)/sum(A)</span>
<span class="sd">             where:</span>
<span class="sd">               c=centroid</span>
<span class="sd">               A=area</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[:</span><span class="mi">4</span><span class="p">])</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">n1</span> <span class="o">-</span> <span class="n">n2</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">n2</span> <span class="o">-</span> <span class="n">n4</span>
        <span class="n">area1</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">norm</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
        <span class="n">c1</span> <span class="o">=</span> <span class="p">(</span><span class="n">n1</span> <span class="o">+</span> <span class="n">n2</span> <span class="o">+</span> <span class="n">n4</span><span class="p">)</span> <span class="o">/</span> <span class="mf">3.</span>

        <span class="n">a</span> <span class="o">=</span> <span class="n">n2</span> <span class="o">-</span> <span class="n">n4</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">n2</span> <span class="o">-</span> <span class="n">n3</span>
        <span class="n">area2</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">norm</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
        <span class="n">c2</span> <span class="o">=</span> <span class="p">(</span><span class="n">n2</span> <span class="o">+</span> <span class="n">n3</span> <span class="o">+</span> <span class="n">n4</span><span class="p">)</span> <span class="o">/</span> <span class="mf">3.</span>

        <span class="n">area</span> <span class="o">=</span> <span class="n">area1</span> <span class="o">+</span> <span class="n">area2</span>
        <span class="n">centroid</span> <span class="o">=</span> <span class="p">(</span><span class="n">c1</span> <span class="o">*</span> <span class="n">area1</span> <span class="o">+</span> <span class="n">c2</span> <span class="o">*</span> <span class="n">area2</span><span class="p">)</span> <span class="o">/</span> <span class="n">area</span>
        <span class="k">return</span><span class="p">(</span><span class="n">area</span><span class="p">,</span> <span class="n">centroid</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">Area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        .. math:: A = \frac{1}{2} \lvert (n_1-n_3) \times (n_2-n_4) \rvert</span>
<span class="sd">        where a and b are the quad&#39;s cross node point vectors&quot;&quot;&quot;</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[:</span><span class="mi">4</span><span class="p">])</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">n1</span> <span class="o">-</span> <span class="n">n3</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">n2</span> <span class="o">-</span> <span class="n">n4</span>
        <span class="n">area</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">norm</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">area</span>

    <span class="k">def</span> <span class="nf">Mass</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">node_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node_ids</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">,</span> <span class="n">allow_empty_nodes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span> <span class="o">+</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">list_fields</span>

    <span class="k">def</span> <span class="nf">repr_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">theta</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span> <span class="o">+</span> <span class="p">[</span>
            <span class="n">theta</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">list_fields</span>

    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">card</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repr_fields</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span> <span class="c1"># to last node</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_8</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_16</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>

<div class="viewcode-block" id="CPLSTS8"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CPLSTS8">[docs]</a><span class="k">class</span> <span class="nc">CPLSTS8</span><span class="p">(</span><span class="n">CPLSTx8</span><span class="p">):</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;CPLSTS8&#39;</span></div>

<div class="viewcode-block" id="CPLSTN8"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CPLSTN8">[docs]</a><span class="k">class</span> <span class="nc">CPLSTN8</span><span class="p">(</span><span class="n">CPLSTx8</span><span class="p">):</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;CPLSTN8&#39;</span></div>



<div class="viewcode-block" id="CQUADR"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUADR">[docs]</a><span class="k">class</span> <span class="nc">CQUADR</span><span class="p">(</span><span class="n">QuadShell</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    +--------+-------+-------+----+----+----+----+------------+---------+</span>
<span class="sd">    |   1    |   2   |   3   |  4 |  5 |  6 | 7  |     8      |    9    |</span>
<span class="sd">    +========+=======+=======+=====+===+====+====+============+=========+</span>
<span class="sd">    | CQUADR |  EID  |  PID  | N1 | N2 | N3 | N4 | THETA/MCID | ZOFFSET |</span>
<span class="sd">    +--------+-------+-------+----+----+----+----+------------+---------+</span>
<span class="sd">    |        |       | TFLAG | T1 | T2 | T3 | T4 |            |         |</span>
<span class="sd">    +--------+-------+-------+----+----+----+----+------------+---------+</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;CQUADR&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">zoffset</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">tflag</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                 <span class="n">T1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">T2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">T3</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">T4</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a CQUADR card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        eid : int</span>
<span class="sd">            element id</span>
<span class="sd">        pid : int</span>
<span class="sd">            property id (PSHELL/PCOMP/PCOMPG)</span>
<span class="sd">        nids : List[int, int, int, int]</span>
<span class="sd">            node ids</span>
<span class="sd">        zoffset : float; default=0.0</span>
<span class="sd">            Offset from the surface of grid points to the element reference</span>
<span class="sd">            plane.  Requires MID1 and MID2.</span>
<span class="sd">        theta_mcid : float; default=0.0</span>
<span class="sd">            float : material coordinate system angle (theta) is defined</span>
<span class="sd">                    relative to the element coordinate system</span>
<span class="sd">            int : x-axis from material coordinate system angle defined by</span>
<span class="sd">                  mcid is projected onto the element</span>
<span class="sd">        tflag : int; default=0</span>
<span class="sd">            0 : Ti are actual user specified thicknesses</span>
<span class="sd">            1 : Ti are fractions relative to the T value of the PSHELL</span>
<span class="sd">        T1 / T2 / T3 / T4 : float; default=None</span>
<span class="sd">            If it is not supplied, then T1 through T4 will be set equal</span>
<span class="sd">            to the value of T on the PSHELL entry.</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">QuadShell</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="c1">#: Element ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eid</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="c1">#: Property ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="n">pid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span> <span class="o">=</span> <span class="n">theta_mcid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoffset</span> <span class="o">=</span> <span class="n">zoffset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tflag</span> <span class="o">=</span> <span class="n">tflag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T1</span> <span class="o">=</span> <span class="n">T1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T2</span> <span class="o">=</span> <span class="n">T2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T3</span> <span class="o">=</span> <span class="n">T3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T4</span> <span class="o">=</span> <span class="n">T4</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_node_ids</span><span class="p">(</span><span class="n">nids</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;CQUADR&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: Optional[Any]</span>

<div class="viewcode-block" id="CQUADR.export_to_hdf5"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUADR.export_to_hdf5">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">export_to_hdf5</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">h5_file</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">eids</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;exports the elements in a vectorized way&quot;&quot;&quot;</span>
        <span class="c1">#comments = []</span>
        <span class="n">pids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">mcids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">thetas</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">zoffsets</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">#t1234 = []</span>
        <span class="k">for</span> <span class="n">eid</span> <span class="ow">in</span> <span class="n">eids</span><span class="p">:</span>
            <span class="n">element</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">eid</span><span class="p">]</span>
            <span class="c1">#comments.append(element.comment)</span>
            <span class="n">pids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">pid</span><span class="p">)</span>
            <span class="n">nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="n">mcid</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span>
                <span class="n">theta</span> <span class="o">=</span> <span class="mf">0.</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">)</span>
                <span class="n">mcid</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
                <span class="n">theta</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span>
            <span class="n">mcids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mcid</span><span class="p">)</span>
            <span class="n">thetas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
            <span class="n">zoffsets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">zoffset</span><span class="p">)</span>
            <span class="c1">#t1234.append([element.T1, element.T2, element.T3, element.T4])</span>
        <span class="c1">#h5_file.create_dataset(&#39;_comment&#39;, data=comments)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;eid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">eids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">pids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;nodes&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">nodes</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;mcid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">mcids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">thetas</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;zoffset&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">zoffsets</span><span class="p">)</span></div>
        <span class="c1">#self.tflag = tflag</span>

<div class="viewcode-block" id="CQUADR.add_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUADR.add_card">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CQUADR card from ``BDF.add_card(...)``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        card : BDFCard()</span>
<span class="sd">            a BDFCard object</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;eid&#39;</span><span class="p">)</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;pid&#39;</span><span class="p">)</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="p">[</span><span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;n1&#39;</span><span class="p">),</span>
                <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;n2&#39;</span><span class="p">),</span>
                <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;n3&#39;</span><span class="p">),</span>
                <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;n4&#39;</span><span class="p">),]</span>

        <span class="n">theta_mcid</span> <span class="o">=</span> <span class="n">integer_double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;theta_mcid&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">zoffset</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;zoffset&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

        <span class="n">tflag</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;tflag&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">T1</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;T1&#39;</span><span class="p">)</span>
        <span class="n">T2</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;T2&#39;</span><span class="p">)</span>
        <span class="n">T3</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="s1">&#39;T3&#39;</span><span class="p">)</span>
        <span class="n">T4</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">&#39;T4&#39;</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">15</span><span class="p">,</span> <span class="s1">&#39;len(CQUADR card) = </span><span class="si">%i</span><span class="se">\n</span><span class="s1">card=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">),</span> <span class="n">card</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">CQUADR</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="o">=</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="o">=</span><span class="n">zoffset</span><span class="p">,</span>
                      <span class="n">tflag</span><span class="o">=</span><span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="o">=</span><span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="o">=</span><span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="o">=</span><span class="n">T3</span><span class="p">,</span> <span class="n">T4</span><span class="o">=</span><span class="n">T4</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span></div>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_op2_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CQUADR card from the OP2</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        data : List[varies]</span>
<span class="sd">            a list of fields defined in OP2 format</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span>

        <span class="n">theta_mcid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
        <span class="n">zoffset</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
        <span class="n">tflag</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span>
        <span class="n">T1</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>
        <span class="n">T2</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
        <span class="n">T3</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span>
        <span class="n">T4</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">T1</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">:</span>
            <span class="n">T1</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">if</span> <span class="n">T2</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">:</span>
            <span class="n">T2</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">if</span> <span class="n">T3</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">:</span>
            <span class="n">T3</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">if</span> <span class="n">T4</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">:</span>
            <span class="n">T4</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">assert</span> <span class="n">tflag</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">data</span>
        <span class="k">return</span> <span class="n">CQUADR</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">,</span>
                      <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">,</span> <span class="n">T4</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

<div class="viewcode-block" id="CQUADR.cross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUADR.cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by CQUADR eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">EmptyNodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Coord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CQUADR.safe_cross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUADR.safe_cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">safe_cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by CQUADR eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">EmptyNodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">safe_property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">safe_coord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CQUADR.uncross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUADR.uncross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">uncross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes cross-reference links&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Theta_mcid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="CQUADR.get_thickness_scale"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUADR.get_thickness_scale">[docs]</a>    <span class="k">def</span> <span class="nf">get_thickness_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T4</span><span class="p">]</span></div>

<div class="viewcode-block" id="CQUADR.Thickness"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUADR.Thickness">[docs]</a>    <span class="k">def</span> <span class="nf">Thickness</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the thickness&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">Thickness</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xref</span><span class="p">):</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="n">unused_nids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span>
        <span class="c1">#for i,nid in enumerate(nids):</span>
            <span class="c1">#assert isinstance(nid, integer_types), &#39;nid%i is not an integer; nid=%s&#39; %(i, nid)</span>

        <span class="k">if</span> <span class="n">xref</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;PSHELL&#39;</span><span class="p">,</span> <span class="s1">&#39;PCOMP&#39;</span><span class="p">,</span> <span class="s1">&#39;PCOMPG&#39;</span><span class="p">],</span> <span class="s1">&#39;pid=</span><span class="si">%i</span><span class="s1"> self.pid_ref.type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
            <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Thickness</span><span class="p">()</span>
            <span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">unused_n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">AreaCentroidNormal</span><span class="p">()</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;thickness=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">t</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;Area=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">a</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="nb">float</span><span class="p">)</span>
                <span class="c1">#assert isinstance(n[i], float)</span>
            <span class="n">mass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Mass</span><span class="p">()</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mass</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;mass=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">mass</span>

<div class="viewcode-block" id="CQUADR.flip_normal"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUADR.flip_normal">[docs]</a>    <span class="k">def</span> <span class="nf">flip_normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ::</span>

<span class="sd">          1---2       1---4</span>
<span class="sd">          |   |  --&gt;  |   |</span>
<span class="sd">          |   |       |   |</span>
<span class="sd">          4---3       2---3</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">]</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">node_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node_ids</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">,</span> <span class="n">allow_empty_nodes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="nd">@node_ids</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">node_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;You cannot set node IDs like this...modify the node objects&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="CQUADR.raw_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUADR.raw_fields">[docs]</a>    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">([</span><span class="s1">&#39;CQUADR&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span> <span class="o">+</span>
                       <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">zoffset</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tflag</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">T2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T4</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="CQUADR.repr_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUADR.repr_fields">[docs]</a>    <span class="k">def</span> <span class="nf">repr_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">,</span> <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">,</span> <span class="n">T4</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_repr_defaults</span><span class="p">()</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">([</span><span class="s1">&#39;CQUADR&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span> <span class="o">+</span>
                       <span class="p">[</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">,</span> <span class="n">T4</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="CQUADR.write_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUADR.write_card">[docs]</a>    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">card</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repr_fields</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">8</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span> <span class="c1"># to last node</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_8</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_16</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
        <span class="c1">#msg2 = self.write_card(size)</span>
        <span class="c1">#assert msg == msg2, &#39;\n%s---\n%s\n%r\n%r&#39; % (msg, msg2, msg, msg2)</span>
        <span class="k">return</span> <span class="n">msg</span></div></div>


<div class="viewcode-block" id="CPLSTS3"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CPLSTS3">[docs]</a><span class="k">class</span> <span class="nc">CPLSTS3</span><span class="p">(</span><span class="n">TriShell</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    +---------+-------+-------+----+----+----+-------+-------+-----+</span>
<span class="sd">    |    1    |   2   |   3   |  4 |  5 |  6 |   7   |   8   |  9  |</span>
<span class="sd">    +=========+=======+=======+=====+===+====+=======+=======+=====+</span>
<span class="sd">    | CPLSTS3 |  EID  |  PID  | N1 | N2 | N3 | THETA |       |     |</span>
<span class="sd">    +---------+-------+-------+----+----+----+-------+-------+-----+</span>
<span class="sd">    |         |       | TFLAG | T1 | T2 | T3 |       |       |     |</span>
<span class="sd">    +---------+-------+-------+----+----+----+-------+-------+-----+</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;CPLSTS3&#39;</span>
    <span class="n">_field_map</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;eid&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span><span class="s1">&#39;tflag&#39;</span><span class="p">,</span>
        <span class="mi">11</span><span class="p">:</span><span class="s1">&#39;T1&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span><span class="s1">&#39;T2&#39;</span><span class="p">,</span> <span class="mi">13</span><span class="p">:</span><span class="s1">&#39;T3&#39;</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">_update_field_helper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;Field </span><span class="si">%r</span><span class="s1">=</span><span class="si">%r</span><span class="s1"> is an invalid </span><span class="si">%s</span><span class="s1"> entry.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span>
                 <span class="n">theta</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">tflag</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">T1</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">T2</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">T3</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="n">TriShell</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eid</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="n">pid</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">nids</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">,</span> <span class="n">nids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_node_ids</span><span class="p">(</span><span class="n">nids</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta</span> <span class="o">=</span> <span class="n">theta</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tflag</span> <span class="o">=</span> <span class="n">tflag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T1</span> <span class="o">=</span> <span class="n">T1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T2</span> <span class="o">=</span> <span class="n">T2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T3</span> <span class="o">=</span> <span class="n">T3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_node_ids</span><span class="p">(</span><span class="n">nids</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>

<div class="viewcode-block" id="CPLSTS3.validate"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CPLSTS3.validate">[docs]</a>    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">))</span> <span class="o">==</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;nodes=</span><span class="si">%s</span><span class="s1">; n=</span><span class="si">%s</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">)),</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div>

<div class="viewcode-block" id="CPLSTS3.Mass"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CPLSTS3.Mass">[docs]</a>    <span class="k">def</span> <span class="nf">Mass</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.</span></div>

    <span class="c1">#@classmethod</span>
    <span class="c1">#def add_op2_data(cls, data, comment=&#39;&#39;):</span>
        <span class="c1">#eid = data[0]</span>
        <span class="c1">#pid = data[1]</span>
        <span class="c1">#nids = data[2:5]</span>

        <span class="c1">#theta = data[5]</span>
        <span class="c1">#tflag = data[7]</span>
        <span class="c1">#T1 = data[8]</span>
        <span class="c1">#T2 = data[9]</span>
        <span class="c1">#T3 = data[10]</span>
        <span class="c1">#if T1 == -1.0:</span>
            <span class="c1">#T1 = 1.0</span>
        <span class="c1">#if T2 == -1.0:</span>
            <span class="c1">#T2 = 1.0</span>
        <span class="c1">#if T3 == -1.0:</span>
            <span class="c1">#T3 = 1.0</span>
        <span class="c1">#return CPLSTS3(eid, pid, nids, zoffset, theta,</span>
                       <span class="c1">#tflag, T1, T2, T3, comment=comment)</span>

<div class="viewcode-block" id="CPLSTS3.add_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CPLSTS3.add_card">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CPLSTS3 card from ``BDF.add_card(...)``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        card : BDFCard()</span>
<span class="sd">            a BDFCard object</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#: Element ID</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;eid&#39;</span><span class="p">)</span>
        <span class="c1">#: Property ID</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="n">eid</span><span class="p">)</span>

        <span class="n">nids</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;n1&#39;</span><span class="p">),</span>
            <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;n2&#39;</span><span class="p">),</span>
            <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;n3&#39;</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">theta</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
            <span class="n">blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;blank&#39;</span><span class="p">)</span>
            <span class="n">blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;blank&#39;</span><span class="p">)</span>

            <span class="n">tflag</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;tflag&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">T1</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;T1&#39;</span><span class="p">)</span>
            <span class="n">T2</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;T2&#39;</span><span class="p">)</span>
            <span class="n">T3</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="s1">&#39;T3&#39;</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">&#39;len(CPLSTS3 card) = </span><span class="si">%i</span><span class="se">\n</span><span class="s1">card=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">),</span> <span class="n">card</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">theta</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="n">tflag</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">T1</span> <span class="o">=</span> <span class="mf">1.0</span>
            <span class="n">T2</span> <span class="o">=</span> <span class="mf">1.0</span>
            <span class="n">T3</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">return</span> <span class="n">CPLSTS3</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span>
                       <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span></div>

<div class="viewcode-block" id="CPLSTS3.cross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CPLSTS3.cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by CPLSTS3 eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CPLSTS3.safe_cross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CPLSTS3.safe_cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">safe_cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by CPLSTS3 eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Nodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">safe_property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CPLSTS3.uncross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CPLSTS3.uncross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">uncross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes cross-reference links&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="kc">None</span></div>

    <span class="k">def</span> <span class="nf">_verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xref</span><span class="p">):</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="n">unused_edges</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_edge_ids</span><span class="p">()</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">nid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">nids</span><span class="p">):</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">),</span> <span class="s1">&#39;nid</span><span class="si">%i</span><span class="s1"> is not an integer; nid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">nid</span><span class="p">)</span>

        <span class="c1">#if xref:</span>
            <span class="c1">#assert self.pid_ref.type in [&#39;PSHELL&#39;, &#39;PCOMP&#39;, &#39;PCOMPG&#39;, &#39;PLPLANE&#39;], &#39;pid=%i self.pid_ref.type=%s&#39; % (pid, self.pid_ref.type)</span>
            <span class="c1">#if not self.pid_ref.type in [&#39;PLPLANE&#39;]:</span>
                <span class="c1">#t = self.Thickness()</span>
                <span class="c1">#assert isinstance(t, float), &#39;thickness=%r&#39; % t</span>
                <span class="c1">#mass = self.Mass()</span>
                <span class="c1">#assert isinstance(mass, float), &#39;mass=%r&#39; % mass</span>
            <span class="c1">#a, c, n = self.AreaCentroidNormal()</span>
            <span class="c1">#assert isinstance(a, float), &#39;Area=%r&#39; % a</span>
            <span class="c1">#for i in range(3):</span>
                <span class="c1">#assert isinstance(c[i], float)</span>
                <span class="c1">#assert isinstance(n[i], float)</span>

<div class="viewcode-block" id="CPLSTS3.flip_normal"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CPLSTS3.flip_normal">[docs]</a>    <span class="k">def</span> <span class="nf">flip_normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Flips normal of element.</span>

<span class="sd">        ::</span>

<span class="sd">               1           1</span>
<span class="sd">              * *   --&gt;   * *</span>
<span class="sd">             *   *       *   *</span>
<span class="sd">            2-----3     3-----2</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">]</span></div>

<div class="viewcode-block" id="CPLSTS3._get_repr_defaults"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CPLSTS3._get_repr_defaults">[docs]</a>    <span class="k">def</span> <span class="nf">_get_repr_defaults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">tflag</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tflag</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">theta</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>

        <span class="n">T1</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">T2</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">T3</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T3</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">theta</span><span class="p">,</span> <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">node_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node_ids</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">,</span> <span class="n">allow_empty_nodes</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<div class="viewcode-block" id="CPLSTS3.raw_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CPLSTS3.raw_fields">[docs]</a>    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">([</span><span class="s1">&#39;CPLSTS3&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span> <span class="o">+</span>
                       <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theta</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">+</span>
                       <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tflag</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T3</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="CPLSTS3.repr_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CPLSTS3.repr_fields">[docs]</a>    <span class="k">def</span> <span class="nf">repr_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="n">theta</span><span class="p">,</span> <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_repr_defaults</span><span class="p">()</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">([</span><span class="s1">&#39;CPLSTS3&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span> <span class="o">+</span>
                       <span class="p">[</span><span class="n">theta</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="CPLSTS3.write_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CPLSTS3.write_card">[docs]</a>    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="p">(</span><span class="n">theta</span><span class="p">,</span> <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_repr_defaults</span><span class="p">()</span>

        <span class="n">T1</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">T2</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">T3</span> <span class="o">=</span> <span class="n">set_blank_if_default</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T3</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>

        <span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="n">row2_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">theta</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">]</span>
        <span class="n">row2</span> <span class="o">=</span> <span class="p">[</span><span class="n">print_field_8</span><span class="p">(</span><span class="n">field</span><span class="p">)</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">row2_data</span><span class="p">]</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="n">nodes</span> <span class="o">+</span> <span class="n">row2</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;CPLSTS3 </span><span class="si">%8i%8i%8i%8i%8i%8s%8s</span><span class="se">\n</span><span class="s1">&#39;</span>
               <span class="s1">&#39;                </span><span class="si">%8s%8s%8s%8s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">msg</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span></div></div>


<div class="viewcode-block" id="CQUAD"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD">[docs]</a><span class="k">class</span> <span class="nc">CQUAD</span><span class="p">(</span><span class="n">QuadShell</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    +-------+-------+-----+----+------------+----+----+----+----+</span>
<span class="sd">    |    1  |   2   |  3  |  4 |     5      |  6 |  7 | 8  |  9 |</span>
<span class="sd">    +=======+=======+=====+====+============+====+====+====+====+</span>
<span class="sd">    | CQUAD |  EID  | PID | G1 |     G2     | G3 | G4 | G5 | G6 |</span>
<span class="sd">    +-------+-------+-----+----+------------+----+----+----+----+</span>
<span class="sd">    |       |   G7  | G8  | G9 | THETA/MCID |    |    |    |    |</span>
<span class="sd">    +-------+-------+-----+----+------------+----+----+----+----+</span>

<span class="sd">    theta_mcid is an MSC specific variable</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;CQUAD&#39;</span>
    <span class="c1">#tflag = 1</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a CQUAD card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        eid : int</span>
<span class="sd">            element id</span>
<span class="sd">        pid : int</span>
<span class="sd">            property id (PSHELL/PCOMP/PCOMPG)</span>
<span class="sd">        nids : List[int, int, int, int, int/None, int/None,</span>
<span class="sd">                    int/None, int/None, int/None]</span>
<span class="sd">            node ids</span>
<span class="sd">        theta_mcid : float; default=0.0</span>
<span class="sd">            float : material coordinate system angle (theta) is defined</span>
<span class="sd">                    relative to the element coordinate system</span>
<span class="sd">            int : x-axis from material coordinate system angle defined by</span>
<span class="sd">                  mcid is projected onto the element</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">QuadShell</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="c1">#: Element ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eid</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="c1">#: Property ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="n">pid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span> <span class="o">=</span> <span class="n">theta_mcid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_node_ids</span><span class="p">(</span><span class="n">nids</span><span class="p">,</span> <span class="n">allow_empty_nodes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">9</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: Optional[Any]</span>

<div class="viewcode-block" id="CQUAD.export_to_hdf5"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD.export_to_hdf5">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">export_to_hdf5</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">h5_file</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">eids</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;exports the elements in a vectorized way&quot;&quot;&quot;</span>
        <span class="c1">#comments = []</span>
        <span class="n">pids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">mcids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">thetas</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">neids</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">eids</span><span class="p">)</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">neids</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">eid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">eids</span><span class="p">):</span>
            <span class="n">element</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">eid</span><span class="p">]</span>
            <span class="c1">#comments.append(element.comment)</span>
            <span class="n">pids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">pid</span><span class="p">)</span>
            <span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">nid</span> <span class="k">if</span> <span class="n">nid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">nid</span> <span class="ow">in</span> <span class="n">element</span><span class="o">.</span><span class="n">nodes</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="n">mcid</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span>
                <span class="n">theta</span> <span class="o">=</span> <span class="mf">0.</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">)</span>
                <span class="n">mcid</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
                <span class="n">theta</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span>
            <span class="n">mcids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mcid</span><span class="p">)</span>
            <span class="n">thetas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
        <span class="c1">#h5_file.create_dataset(&#39;_comment&#39;, data=comments)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;eid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">eids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">pids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;nodes&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">nodes</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;mcid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">mcids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">thetas</span><span class="p">)</span></div>

<div class="viewcode-block" id="CQUAD.add_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD.add_card">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CQUAD card from ``BDF.add_card(...)``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        card : BDFCard()</span>
<span class="sd">            a BDFCard object</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;eid&#39;</span><span class="p">)</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;pid&#39;</span><span class="p">)</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="p">[</span><span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;n1&#39;</span><span class="p">),</span>
                <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;n2&#39;</span><span class="p">),</span>
                <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;n3&#39;</span><span class="p">),</span>
                <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;n4&#39;</span><span class="p">),</span>
                <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;n5&#39;</span><span class="p">),</span>
                <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;n6&#39;</span><span class="p">),</span>
                <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;n7&#39;</span><span class="p">),</span>
                <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;n8&#39;</span><span class="p">),</span>
                <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;n9&#39;</span><span class="p">),]</span>
        <span class="n">theta_mcid</span> <span class="o">=</span> <span class="n">integer_double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;theta_mcid&#39;</span><span class="p">,</span> <span class="mf">0.</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">13</span><span class="p">,</span> <span class="s1">&#39;len(CQUAD card) = </span><span class="si">%i</span><span class="se">\n</span><span class="s1">card=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">),</span> <span class="n">card</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">CQUAD</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="o">=</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span></div>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_op2_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CQUAD card from the OP2</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        data : List[varies]</span>
<span class="sd">            a list of fields defined in OP2 format</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">11</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span>
            <span class="n">theta_mcid</span> <span class="o">=</span> <span class="mf">0.</span> <span class="c1">#  msc specific</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;theta_mcid is defined; data=</span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">CQUAD</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="o">=</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

<div class="viewcode-block" id="CQUAD.cross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD.cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by CQUAD eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">EmptyNodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Coord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CQUAD.safe_cross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD.safe_cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">safe_cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by CQUAD eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">EmptyNodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">safe_property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">safe_coord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CQUAD.uncross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD.uncross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">uncross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes cross-reference links&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Theta_mcid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="CQUAD.Area"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD.Area">[docs]</a>    <span class="k">def</span> <span class="nf">Area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        .. math:: A = \frac{1}{2} \lvert (n_1-n_3) \times (n_2-n_4) \rvert</span>
<span class="sd">        where a and b are the quad&#39;s cross node point vectors&quot;&quot;&quot;</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[:</span><span class="mi">4</span><span class="p">])</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">n1</span> <span class="o">-</span> <span class="n">n3</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">n2</span> <span class="o">-</span> <span class="n">n4</span>
        <span class="n">area</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">norm</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">area</span></div>

<div class="viewcode-block" id="CQUAD.Mass"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD.Mass">[docs]</a>    <span class="k">def</span> <span class="nf">Mass</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;.. math:: m = \frac{m}{A} A  \f]&quot;&quot;&quot;</span>
        <span class="n">A</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Area</span><span class="p">()</span>
        <span class="n">mpa</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">MassPerArea</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">mpa</span> <span class="o">*</span> <span class="n">A</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;mass/area=</span><span class="si">%s</span><span class="s1"> area=</span><span class="si">%s</span><span class="s1"> prop_type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">mpa</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CQUAD.Thickness"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD.Thickness">[docs]</a>    <span class="k">def</span> <span class="nf">Thickness</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns the thickness&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">Thickness</span><span class="p">()</span></div>

<div class="viewcode-block" id="CQUAD.flip_normal"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD.flip_normal">[docs]</a>    <span class="k">def</span> <span class="nf">flip_normal</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ::</span>

<span class="sd">          1--5--2       1--8--4</span>
<span class="sd">          |     |  --&gt;  |     |</span>
<span class="sd">          8  9  6       5  9  7</span>
<span class="sd">          |     |       |     |</span>
<span class="sd">          4--7--3       2--6--3</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n5</span><span class="p">,</span> <span class="n">n6</span><span class="p">,</span> <span class="n">n7</span><span class="p">,</span> <span class="n">n8</span><span class="p">,</span> <span class="n">n9</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n8</span><span class="p">,</span> <span class="n">n7</span><span class="p">,</span> <span class="n">n6</span><span class="p">,</span> <span class="n">n5</span><span class="p">,</span> <span class="n">n9</span><span class="p">]</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">9</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n5</span><span class="p">,</span> <span class="n">n6</span><span class="p">,</span> <span class="n">n7</span><span class="p">,</span> <span class="n">n8</span><span class="p">,</span> <span class="n">n9</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n8</span><span class="p">,</span> <span class="n">n7</span><span class="p">,</span> <span class="n">n6</span><span class="p">,</span> <span class="n">n5</span><span class="p">,</span> <span class="n">n9</span><span class="p">]</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">node_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node_ids</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">,</span> <span class="n">allow_empty_nodes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xref</span><span class="p">):</span>
        <span class="k">pass</span>

<div class="viewcode-block" id="CQUAD.raw_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD.raw_fields">[docs]</a>    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;CQUAD&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span> <span class="o">+</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="CQUAD.repr_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD.repr_fields">[docs]</a>    <span class="k">def</span> <span class="nf">repr_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;CQUAD&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span> <span class="o">+</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="CQUAD.write_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD.write_card">[docs]</a>    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="n">nodes2</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;&#39;</span> <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="s1">&#39;</span><span class="si">%8i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">node</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">[</span><span class="mi">4</span><span class="p">:]]</span>
        <span class="n">theta_mcid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span>

        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="n">nodes</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="n">nodes2</span> <span class="o">+</span> <span class="p">[</span><span class="n">theta_mcid</span><span class="p">]</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;CQUAD   </span><span class="si">%8i%8i%8i%8i%8i%8i%8s%8s</span><span class="se">\n</span><span class="s1">&#39;</span>  <span class="c1"># 6 nodes</span>
               <span class="s1">&#39;        </span><span class="si">%8s%8s%8s%8s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">msg</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span></div></div>


<div class="viewcode-block" id="CQUAD8"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD8">[docs]</a><span class="k">class</span> <span class="nc">CQUAD8</span><span class="p">(</span><span class="n">QuadShell</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    +--------+-------+-----+----+----+----+----+------------+-------+</span>
<span class="sd">    |    1   |   2   |  3  |  4 |  5 |  6 |  7 |      8     |   9   |</span>
<span class="sd">    +========+=======+=====+====+====+====+====+============+=======+</span>
<span class="sd">    | CQUAD8 |  EID  | PID | G1 | G2 | G3 | G4 |     G5     |  G6   |</span>
<span class="sd">    +--------+-------+-----+----+----+----+----+------------+-------+</span>
<span class="sd">    |        |   G7  | G8  | T1 | T2 | T3 | T4 | THETA/MCID | ZOFFS |</span>
<span class="sd">    +--------+-------+-----+----+----+----+----+------------+-------+</span>
<span class="sd">    |        | TFLAG |     |    |    |    |    |            |       |</span>
<span class="sd">    +--------+-------+-----+----+----+----+----+------------+-------+</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;CQUAD8&#39;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">zoffset</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span>
                 <span class="n">tflag</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">T1</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">T2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">T3</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">T4</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a CQUAD8 card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        eid : int</span>
<span class="sd">            element id</span>
<span class="sd">        pid : int</span>
<span class="sd">            property id (PSHELL/PCOMP/PCOMPG)</span>
<span class="sd">        nids : List[int, int, int, int, int/None, int/None, int/None, int/None]</span>
<span class="sd">            node ids</span>
<span class="sd">        zoffset : float; default=0.0</span>
<span class="sd">            Offset from the surface of grid points to the element reference</span>
<span class="sd">            plane.  Requires MID1 and MID2.</span>
<span class="sd">        theta_mcid : float; default=0.0</span>
<span class="sd">            float : material coordinate system angle (theta) is defined</span>
<span class="sd">                    relative to the element coordinate system</span>
<span class="sd">            int : x-axis from material coordinate system angle defined by</span>
<span class="sd">                  mcid is projected onto the element</span>
<span class="sd">        tflag : int; default=0</span>
<span class="sd">            0 : Ti are actual user specified thicknesses</span>
<span class="sd">            1 : Ti are fractions relative to the T value of the PSHELL</span>
<span class="sd">        T1 / T2 / T3 / T4 : float; default=None</span>
<span class="sd">            If it is not supplied, then T1 through T4 will be set equal</span>
<span class="sd">            to the value of T on the PSHELL entry.</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">QuadShell</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="c1">#: Element ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eid</span> <span class="o">=</span> <span class="n">eid</span>
        <span class="c1">#: Property ID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="n">pid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T1</span> <span class="o">=</span> <span class="n">T1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T2</span> <span class="o">=</span> <span class="n">T2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T3</span> <span class="o">=</span> <span class="n">T3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T4</span> <span class="o">=</span> <span class="n">T4</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tflag</span> <span class="o">=</span> <span class="n">tflag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span> <span class="o">=</span> <span class="n">theta_mcid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoffset</span> <span class="o">=</span> <span class="n">zoffset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prepare_node_ids</span><span class="p">(</span><span class="n">nids</span><span class="p">,</span> <span class="n">allow_empty_nodes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">8</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: Optional[Any]</span>

<div class="viewcode-block" id="CQUAD8.export_to_hdf5"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD8.export_to_hdf5">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">export_to_hdf5</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">h5_file</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">eids</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;exports the elements in a vectorized way&quot;&quot;&quot;</span>
        <span class="c1">#comments = []</span>
        <span class="n">pids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">mcids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">thetas</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">zoffsets</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">#t1234 = []</span>
        <span class="n">neids</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">eids</span><span class="p">)</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">neids</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int32&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">eid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">eids</span><span class="p">):</span>
            <span class="n">element</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="n">eid</span><span class="p">]</span>
            <span class="c1">#comments.append(element.comment)</span>
            <span class="n">pids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">pid</span><span class="p">)</span>
            <span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">nid</span> <span class="k">if</span> <span class="n">nid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">nid</span> <span class="ow">in</span> <span class="n">element</span><span class="o">.</span><span class="n">nodes</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="n">mcid</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span>
                <span class="n">theta</span> <span class="o">=</span> <span class="mf">0.</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">)</span>
                <span class="n">mcid</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
                <span class="n">theta</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">theta_mcid</span>
            <span class="n">mcids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mcid</span><span class="p">)</span>
            <span class="n">thetas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
            <span class="n">zoffsets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">zoffset</span><span class="p">)</span>
            <span class="c1">#t1234.append([element.T1, element.T2, element.T3, element.T4])</span>
        <span class="c1">#h5_file.create_dataset(&#39;_comment&#39;, data=comments)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;eid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">eids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">pids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;nodes&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">nodes</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;mcid&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">mcids</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">thetas</span><span class="p">)</span>
        <span class="n">h5_file</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;zoffset&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">zoffsets</span><span class="p">)</span></div>
        <span class="c1">#self.tflag = tflag</span>

<div class="viewcode-block" id="CQUAD8.add_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD8.add_card">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CQUAD8 card from ``BDF.add_card(...)``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        card : BDFCard()</span>
<span class="sd">            a BDFCard object</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;eid&#39;</span><span class="p">)</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;pid&#39;</span><span class="p">)</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="p">[</span><span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;n1&#39;</span><span class="p">),</span>
                <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;n2&#39;</span><span class="p">),</span>
                <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;n3&#39;</span><span class="p">),</span>
                <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;n4&#39;</span><span class="p">),</span>
                <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;n5&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;n6&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;n7&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;n8&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">11</span><span class="p">:</span>
            <span class="n">T1</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;T1&#39;</span><span class="p">)</span>
            <span class="n">T2</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;T2&#39;</span><span class="p">)</span>
            <span class="n">T3</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="s1">&#39;T3&#39;</span><span class="p">)</span>
            <span class="n">T4</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="s1">&#39;T4&#39;</span><span class="p">)</span>
            <span class="n">theta_mcid</span> <span class="o">=</span> <span class="n">integer_double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="s1">&#39;theta_mcid&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
            <span class="n">zoffset</span> <span class="o">=</span> <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="s1">&#39;zoffset&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
            <span class="n">tflag</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="s1">&#39;tflag&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">18</span><span class="p">,</span> <span class="s1">&#39;len(CQUAD8 card) = </span><span class="si">%i</span><span class="se">\n</span><span class="s1">card=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">),</span> <span class="n">card</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">theta_mcid</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="n">zoffset</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="n">T1</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">T2</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">T3</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">T4</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">tflag</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="n">CQUAD8</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="o">=</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="o">=</span><span class="n">zoffset</span><span class="p">,</span>
                      <span class="n">tflag</span><span class="o">=</span><span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="o">=</span><span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="o">=</span><span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="o">=</span><span class="n">T3</span><span class="p">,</span> <span class="n">T4</span><span class="o">=</span><span class="n">T4</span><span class="p">,</span>
                      <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span></div>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_op2_data</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a CQUAD8 card from the OP2</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        data : List[varies]</span>
<span class="sd">            a list of fields defined in OP2 format</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#print(&quot;CQUAD8 = &quot;,data)</span>
        <span class="c1">#(6401,</span>
        <span class="c1">#6400,</span>
        <span class="c1">#6401, 6402, 6405, 6403, 0, 0, 6404, 0,</span>
        <span class="c1">#-1.0, -1.0, -1.0, -1.0,</span>
        <span class="c1">#0.0, 0)</span>
        <span class="c1">#(eid, pid, n1, n2, n3, n4, n5, n6, n7, n8,</span>
         <span class="c1">#t1, t2, t3, t4, theta, zoffs, tflag) = out</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
        <span class="n">T1</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
        <span class="n">T2</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span>
        <span class="n">T3</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span>
        <span class="n">T4</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span>
        <span class="n">theta_mcid</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span>
        <span class="n">zoffset</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">15</span><span class="p">]</span>
        <span class="n">tflag</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">16</span><span class="p">]</span>
        <span class="c1">#assert isinstance(tflag, int), tflag  # None for v2001; int for post-2001</span>
        <span class="k">if</span> <span class="n">tflag</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="c1"># TODO: temporary</span>
            <span class="n">tflag</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">tflag</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;tflag=</span><span class="si">%s</span><span class="s1"> data=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">tflag</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">CQUAD8</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">nids</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="o">=</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="o">=</span><span class="n">zoffset</span><span class="p">,</span>
                      <span class="n">tflag</span><span class="o">=</span><span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="o">=</span><span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="o">=</span><span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="o">=</span><span class="n">T3</span><span class="p">,</span> <span class="n">T4</span><span class="o">=</span><span class="n">T4</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

<div class="viewcode-block" id="CQUAD8.cross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD8.cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by CQUAD8 eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">EmptyNodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">(),</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Coord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CQUAD8.safe_cross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD8.safe_cross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">safe_cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by CQUAD8 eid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">EmptyNodes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">safe_property</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">safe_coord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="CQUAD8.uncross_reference"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD8.uncross_reference">[docs]</a>    <span class="k">def</span> <span class="nf">uncross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes cross-reference links&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Theta_mcid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid_ref</span> <span class="o">=</span> <span class="kc">None</span></div>

    <span class="k">def</span> <span class="nf">_verify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xref</span><span class="p">):</span>
        <span class="n">eid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span>
        <span class="n">pid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()</span>
        <span class="n">nids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span>
        <span class="n">unused_edges</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_edge_ids</span><span class="p">()</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">eid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">nid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">nids</span><span class="p">):</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span> <span class="ow">or</span> <span class="n">nid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;nid</span><span class="si">%i</span><span class="s1"> is not an integer/None; nid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">nid</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">xref</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;PSHELL&#39;</span><span class="p">,</span> <span class="s1">&#39;PCOMP&#39;</span><span class="p">,</span> <span class="s1">&#39;PCOMPG&#39;</span><span class="p">,</span> <span class="s1">&#39;PLPLANE&#39;</span><span class="p">],</span> <span class="s1">&#39;pid=</span><span class="si">%i</span><span class="s1"> self.pid_ref.type=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
            <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Thickness</span><span class="p">()</span>
            <span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">AreaCentroidNormal</span><span class="p">()</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;thickness=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">t</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;Area=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">a</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="nb">float</span><span class="p">)</span>
                <span class="c1">#assert isinstance(n[i], float)</span>
            <span class="n">mass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Mass</span><span class="p">()</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mass</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span> <span class="s1">&#39;mass=</span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">mass</span>

<div class="viewcode-block" id="CQUAD8.get_thickness_scale"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD8.get_thickness_scale">[docs]</a>    <span class="k">def</span> <span class="nf">get_thickness_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T4</span><span class="p">]</span></div>

<div class="viewcode-block" id="CQUAD8.Thickness"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD8.Thickness">[docs]</a>    <span class="k">def</span> <span class="nf">Thickness</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the thickness&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pid_ref</span><span class="o">.</span><span class="n">Thickness</span><span class="p">()</span></div>

<div class="viewcode-block" id="CQUAD8.flip_normal"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD8.flip_normal">[docs]</a>    <span class="k">def</span> <span class="nf">flip_normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ::</span>

<span class="sd">          1--5--2       1--8--4</span>
<span class="sd">          |     |  --&gt;  |     |</span>
<span class="sd">          8     6       5     7</span>
<span class="sd">          |     |       |     |</span>
<span class="sd">          4--7--3       2--6--3</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n5</span><span class="p">,</span> <span class="n">n6</span><span class="p">,</span> <span class="n">n7</span><span class="p">,</span> <span class="n">n8</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n8</span><span class="p">,</span> <span class="n">n7</span><span class="p">,</span> <span class="n">n6</span><span class="p">,</span> <span class="n">n5</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n5</span><span class="p">,</span> <span class="n">n6</span><span class="p">,</span> <span class="n">n7</span><span class="p">,</span> <span class="n">n8</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span> <span class="o">=</span> <span class="p">[</span><span class="n">n1</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n8</span><span class="p">,</span> <span class="n">n7</span><span class="p">,</span> <span class="n">n6</span><span class="p">,</span> <span class="n">n5</span><span class="p">]</span></div>

<div class="viewcode-block" id="CQUAD8.Normal"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD8.Normal">[docs]</a>    <span class="k">def</span> <span class="nf">Normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[:</span><span class="mi">4</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">_normal4</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="CQUAD8.AreaCentroid"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD8.AreaCentroid">[docs]</a>    <span class="k">def</span> <span class="nf">AreaCentroid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ::</span>

<span class="sd">          1-----2</span>
<span class="sd">          |    /|</span>
<span class="sd">          | A1/ |</span>
<span class="sd">          |  /  |</span>
<span class="sd">          |/ A2 |</span>
<span class="sd">          4-----3</span>

<span class="sd">          centroid</span>
<span class="sd">             c = sum(ci*Ai)/sum(A)</span>
<span class="sd">             where:</span>
<span class="sd">               c=centroid</span>
<span class="sd">               A=area</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[:</span><span class="mi">4</span><span class="p">])</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">n1</span> <span class="o">-</span> <span class="n">n2</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">n2</span> <span class="o">-</span> <span class="n">n4</span>
        <span class="n">area1</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">norm</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
        <span class="n">c1</span> <span class="o">=</span> <span class="p">(</span><span class="n">n1</span> <span class="o">+</span> <span class="n">n2</span> <span class="o">+</span> <span class="n">n4</span><span class="p">)</span> <span class="o">/</span> <span class="mf">3.</span>

        <span class="n">a</span> <span class="o">=</span> <span class="n">n2</span> <span class="o">-</span> <span class="n">n4</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">n2</span> <span class="o">-</span> <span class="n">n3</span>
        <span class="n">area2</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">norm</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
        <span class="n">c2</span> <span class="o">=</span> <span class="p">(</span><span class="n">n2</span> <span class="o">+</span> <span class="n">n3</span> <span class="o">+</span> <span class="n">n4</span><span class="p">)</span> <span class="o">/</span> <span class="mf">3.</span>

        <span class="n">area</span> <span class="o">=</span> <span class="n">area1</span> <span class="o">+</span> <span class="n">area2</span>
        <span class="n">centroid</span> <span class="o">=</span> <span class="p">(</span><span class="n">c1</span> <span class="o">*</span> <span class="n">area1</span> <span class="o">+</span> <span class="n">c2</span> <span class="o">*</span> <span class="n">area2</span><span class="p">)</span> <span class="o">/</span> <span class="n">area</span>
        <span class="k">return</span><span class="p">(</span><span class="n">area</span><span class="p">,</span> <span class="n">centroid</span><span class="p">)</span></div>

<div class="viewcode-block" id="CQUAD8.Area"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD8.Area">[docs]</a>    <span class="k">def</span> <span class="nf">Area</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        .. math:: A = \frac{1}{2} \lvert (n_1-n_3) \times (n_2-n_4) \rvert</span>
<span class="sd">        where a and b are the quad&#39;s cross node point vectors&quot;&quot;&quot;</span>
        <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_node_positions</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">[:</span><span class="mi">4</span><span class="p">])</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">n1</span> <span class="o">-</span> <span class="n">n3</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">n2</span> <span class="o">-</span> <span class="n">n4</span>
        <span class="n">area</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">norm</span><span class="p">(</span><span class="n">cross</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">area</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">node_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">]]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_node_ids</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes_ref</span><span class="p">,</span> <span class="n">allow_empty_nodes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<div class="viewcode-block" id="CQUAD8.raw_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD8.raw_fields">[docs]</a>    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;CQUAD8&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span> <span class="o">+</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">T1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">T4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">zoffset</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tflag</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="CQUAD8.repr_fields"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD8.repr_fields">[docs]</a>    <span class="k">def</span> <span class="nf">repr_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">,</span> <span class="n">tflag</span><span class="p">,</span> <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">,</span> <span class="n">T4</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_repr_defaults</span><span class="p">()</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">([</span><span class="s1">&#39;CQUAD8&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pid</span><span class="p">()]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_ids</span> <span class="o">+</span> <span class="p">[</span>
            <span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="n">T3</span><span class="p">,</span> <span class="n">T4</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="p">,</span> <span class="n">zoffset</span><span class="p">,</span> <span class="n">tflag</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">list_fields</span></div>

<div class="viewcode-block" id="CQUAD8.write_card"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.CQUAD8.write_card">[docs]</a>    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">card</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repr_fields</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">8</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span> <span class="c1"># to last node</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_8</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_16</span><span class="p">(</span><span class="n">card</span><span class="p">)</span></div></div>


<span class="k">class</span> <span class="nc">SNORM</span><span class="p">(</span><span class="n">BaseCard</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    +--------+-------+-------+----+-----+----+</span>
<span class="sd">    |   1    |   2   |   3   |  4 |  5  |  6 |</span>
<span class="sd">    +========+=======+=======+====+=====+====+</span>
<span class="sd">    |  SNORM |  GID  |  CID  | N1 |  N2 | N3 |</span>
<span class="sd">    +--------+-------+-------+----+-----+----+</span>
<span class="sd">    |  SNORM |   3   |   2   | 0. | -1. | 0. |</span>
<span class="sd">    +--------+-------+-------+----+-----+----+</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s1">&#39;SNORM&#39;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_init_from_empty</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="n">nid</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">SNORM</span><span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">normal</span><span class="p">,</span> <span class="n">cid</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">normal</span><span class="p">,</span> <span class="n">cid</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates an SNORM card</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        nid : int</span>
<span class="sd">            node id</span>
<span class="sd">        cid : int</span>
<span class="sd">            coordinate system</span>
<span class="sd">        normal : List[float, float, float]</span>
<span class="sd">            normal vector</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">BaseCard</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nid</span> <span class="o">=</span> <span class="n">nid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cid</span> <span class="o">=</span> <span class="n">cid</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">normal</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">normal</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cid_ref</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: Optional[Any]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_card</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">card</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds an SNORM card from ``BDF.add_card(...)``</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        card : BDFCard()</span>
<span class="sd">            a BDFCard object</span>
<span class="sd">        comment : str; default=&#39;&#39;</span>
<span class="sd">            a comment for the card</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nid</span> <span class="o">=</span> <span class="n">integer</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;nid&#39;</span><span class="p">)</span>
        <span class="n">cid</span> <span class="o">=</span> <span class="n">integer_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;cid&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">normal</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;n1&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">),</span>
            <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;n2&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">),</span>
            <span class="n">double_or_blank</span><span class="p">(</span><span class="n">card</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;n3&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">),</span>
        <span class="p">]</span>

        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;len(SNORM card) = </span><span class="si">%i</span><span class="se">\n</span><span class="s1">card=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">),</span> <span class="n">card</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">SNORM</span><span class="p">(</span><span class="n">nid</span><span class="p">,</span> <span class="n">normal</span><span class="p">,</span> <span class="n">cid</span><span class="o">=</span><span class="n">cid</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">BDF</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by SNORM nid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">Coord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cid</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">safe_cross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cross links the card so referenced cards can be extracted directly</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        model : BDF()</span>
<span class="sd">            the BDF object</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;, which is required by SNORM nid=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cid_ref</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">safe_coord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span> <span class="n">xref_errors</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">uncross_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Removes cross-reference links&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cid_ref</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">Cid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cid_ref</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cid_ref</span><span class="o">.</span><span class="n">cid</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cid</span>

    <span class="k">def</span> <span class="nf">raw_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;SNORM&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cid</span><span class="p">()]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">list_fields</span>

    <span class="k">def</span> <span class="nf">repr_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">list_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;SNORM&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cid</span><span class="p">()]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">list_fields</span>

    <span class="k">def</span> <span class="nf">write_card</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">is_double</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">card</span> <span class="o">=</span> <span class="n">wipe_empty_fields</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">repr_fields</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">size</span> <span class="o">==</span> <span class="mi">8</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">card</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span> <span class="c1"># to last node</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_8</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+</span> <span class="n">print_card_16</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">msg</span>

<div class="viewcode-block" id="transform_shell_material_coordinate_system"><a class="viewcode-back" href="../../../../../reference/bdf/cards/elements/pyNastran.bdf.cards.elements.shell.html#pyNastran.bdf.cards.elements.shell.transform_shell_material_coordinate_system">[docs]</a><span class="k">def</span> <span class="nf">transform_shell_material_coordinate_system</span><span class="p">(</span><span class="n">cids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span>
                                               <span class="n">iaxes</span><span class="p">,</span> <span class="n">theta_mcid</span><span class="p">,</span> <span class="n">normal</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span>
                                               <span class="n">idtype</span><span class="o">=</span><span class="s1">&#39;int32&#39;</span><span class="p">,</span> <span class="n">fdtype</span><span class="o">=</span><span class="s1">&#39;float64&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;calculate the material transformation matrix&quot;&quot;&quot;</span>
    <span class="n">is_mcid</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">integer_types</span><span class="p">)</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">theta_mcid</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;bool&#39;</span><span class="p">)</span>
    <span class="n">nelements</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">theta_mcid</span><span class="p">)</span>
    <span class="n">imcid</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">is_mcid</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">itheta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="o">~</span><span class="n">is_mcid</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">ielem</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">nelements</span><span class="p">)</span>
    <span class="n">mcid</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">theta_mcid</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">idtype</span><span class="p">)[</span><span class="n">imcid</span><span class="p">]</span>
    <span class="c1">#thetad = np.array(theta_mcid, dtype=&#39;float64&#39;)[itheta]</span>
    <span class="c1">#print(&#39;  nmcid=%s ntheta=%s&#39; % (len(mcid), len(thetad)))</span>
    <span class="c1">#print(&#39;mcid&#39;, mcid)</span>
    <span class="c1">#print(&#39;thetad&#39;, thetad)</span>

    <span class="k">assert</span> <span class="n">nelements</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">nelements</span>
    <span class="n">telem</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">nelements</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">fdtype</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">imcid</span><span class="p">):</span>
        <span class="n">icids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">searchsorted</span><span class="p">(</span><span class="n">cids</span><span class="p">,</span> <span class="n">mcid</span><span class="p">)</span>
        <span class="n">iaxesi</span> <span class="o">=</span> <span class="n">iaxes</span><span class="p">[</span><span class="n">icids</span><span class="p">,</span> <span class="p">:]</span>
        <span class="n">jmat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">normal</span><span class="p">[</span><span class="n">imcid</span><span class="p">,</span> <span class="p">:],</span> <span class="n">iaxesi</span><span class="p">)</span> <span class="c1"># k x i</span>
        <span class="n">ji</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">jmat</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>
        <span class="n">ipos</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">ji</span> <span class="o">&gt;</span> <span class="mf">0.</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c1">#izero = np.where(ji == 0.)[0]</span>
        <span class="c1">#jmat[izero] = np.nan</span>
        <span class="n">jmat</span><span class="p">[</span><span class="n">ipos</span><span class="p">]</span> <span class="o">/=</span> <span class="n">ji</span><span class="p">[</span><span class="n">ipos</span><span class="p">]</span>
        <span class="c1"># we do an extra normalization here because</span>
        <span class="c1"># we had to project i onto the elemental plane</span>
        <span class="c1"># unlike in the next block</span>
        <span class="n">imat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">jmat</span><span class="p">,</span> <span class="n">normal</span><span class="p">[</span><span class="n">imcid</span><span class="p">,</span> <span class="p">:])</span>
        <span class="n">telem</span><span class="p">[</span><span class="n">imcid</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">imat</span>
        <span class="n">telem</span><span class="p">[</span><span class="n">imcid</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">jmat</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">itheta</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">,</span> <span class="n">p1</span><span class="o">.</span><span class="n">shape</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">p2</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">,</span> <span class="n">p1</span><span class="o">.</span><span class="n">shape</span>
        <span class="n">imat</span> <span class="o">=</span> <span class="n">p2</span><span class="p">[</span><span class="n">itheta</span><span class="p">,</span> <span class="p">:]</span> <span class="o">-</span> <span class="n">p1</span><span class="p">[</span><span class="n">itheta</span><span class="p">,</span> <span class="p">:]</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">imat</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">,</span> <span class="n">imat</span><span class="o">.</span><span class="n">shape</span>
        <span class="n">ni</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">imat</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">imat</span> <span class="o">/=</span> <span class="n">ni</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>
        <span class="n">jmat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">normal</span><span class="p">[</span><span class="n">itheta</span><span class="p">,</span> <span class="p">:],</span> <span class="n">imat</span><span class="p">)</span> <span class="c1"># k x i</span>
        <span class="n">nj</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">jmat</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">jmat</span> <span class="o">/=</span> <span class="n">nj</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>
        <span class="n">telem</span><span class="p">[</span><span class="n">itheta</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">imat</span>
        <span class="n">telem</span><span class="p">[</span><span class="n">itheta</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">jmat</span>
    <span class="c1"># rotate imat and jmat into the -theta frame?</span>
    <span class="c1"># the next step is to rotate the [S] matrix into the global xyz frame</span>

    <span class="c1">#       [ imat ]</span>
    <span class="c1">#[Te] = [ jmat ]</span>
    <span class="c1">#       [normal]</span>
    <span class="c1"># [T] = [ti][ti^T]</span>
    <span class="c1"># [Sbar] = [T_inv][S][T_inv^T]</span>
    <span class="c1"># [Sg] = [Te^T][Sbar][Te]</span>
    <span class="c1">#</span>
    <span class="n">telem</span><span class="p">[</span><span class="n">ielem</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">normal</span>

    <span class="n">T</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">fdtype</span><span class="p">)</span>
    <span class="c1">#K = T</span>
    <span class="n">K</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">fdtype</span><span class="p">)</span>
    <span class="n">K</span><span class="p">[:</span><span class="mi">3</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">T</span>
    <span class="n">K2</span> <span class="o">=</span> <span class="n">K</span><span class="p">[:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">:]</span>
    <span class="n">K3</span> <span class="o">=</span> <span class="n">K</span><span class="p">[</span><span class="mi">3</span><span class="p">:,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">K4</span> <span class="o">=</span> <span class="n">K</span><span class="p">[</span><span class="mi">3</span><span class="p">:,</span> <span class="mi">3</span><span class="p">:]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="n">i1</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">3</span>
        <span class="n">i2</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">%</span> <span class="mi">3</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
            <span class="n">j1</span> <span class="o">=</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">3</span>
            <span class="n">j2</span> <span class="o">=</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">%</span> <span class="mi">3</span>
            <span class="n">K2</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">T</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j1</span><span class="p">]</span> <span class="o">*</span> <span class="n">T</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j2</span><span class="p">]</span>
            <span class="n">K3</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">T</span><span class="p">[</span><span class="n">i1</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">*</span> <span class="n">T</span><span class="p">[</span><span class="n">i2</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span>
            <span class="n">K4</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">T</span><span class="p">[</span><span class="n">i1</span><span class="p">,</span> <span class="n">j1</span><span class="p">]</span> <span class="o">*</span> <span class="n">T</span><span class="p">[</span><span class="n">i2</span><span class="p">,</span> <span class="n">j2</span><span class="p">]</span> <span class="o">+</span> <span class="n">T</span><span class="p">[</span><span class="n">i1</span><span class="p">,</span> <span class="n">j2</span><span class="p">]</span> <span class="o">*</span> <span class="n">T</span><span class="p">[</span><span class="n">i2</span><span class="p">,</span> <span class="n">j1</span><span class="p">]</span>
    <span class="c1">#K2[0, 0] = K2[0, 1]</span>
    <span class="c1">#K2[0, 1] = K2[0, 2]</span>
    <span class="c1">#K2[0, 2] = K2[0, 0]</span>
    <span class="k">return</span> <span class="n">telem</span></div>

</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Steven Doyle.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>